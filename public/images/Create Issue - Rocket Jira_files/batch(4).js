;
/* module-key = 'jira.webresources:calendar-lib', location = '/includes/lib/calendar/Calendar.js' */
Calendar=function(e,t,a,n,r){if(this.activeDiv=null,this.currentDateEl=null,this.getDateStatus=null,this.getDateToolTip=null,this.getDateText=null,this.timeout=null,this.onSelected=n||null,this.onClose=r||null,this.dragging=!1,this.hidden=!1,this.minYear=1970,this.maxYear=2050,this.dateFormat=Calendar._TT.DEF_DATE_FORMAT,this.ttDateFormat=Calendar._TT.TT_DATE_FORMAT,this.isPopup=!0,this.weekNumbers=!0,this.firstDayOfWeek="number"==typeof e?e:Calendar._FD,this.showsOtherMonths=!1,this.dateStr=t,this.todayDateStr=a,this.ar_days=null,this.showsTime=!1,this.time24=!0,this.yearStep=2,this.hiliteToday=!0,this.multiple=null,this.table=null,this.element=null,this.tbody=null,this.firstdayname=null,this.monthsCombo=null,this.yearsCombo=null,this.hilitedMonth=null,this.activeMonth=null,this.hilitedYear=null,this.activeYear=null,this.dateClicked=!1,void 0===Calendar._SDN){void 0===Calendar._SDN_len&&(Calendar._SDN_len=3);for(var l=new Array,i=8;i>0;)l[--i]=Calendar._DN[i].substr(0,Calendar._SDN_len);Calendar._SDN=l,void 0===Calendar._SMN_len&&(Calendar._SMN_len=3),l=new Array;for(var i=12;i>0;)l[--i]=Calendar._MN[i].substr(0,Calendar._SMN_len);Calendar._SMN=l}},Calendar._C=null,Calendar.is_ie=/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent),Calendar.is_ie5=Calendar.is_ie&&/msie 5\.0/i.test(navigator.userAgent),Calendar.is_ie6=Calendar.is_ie&&/msie 6\.0/i.test(navigator.userAgent),Calendar.is_opera=/opera/i.test(navigator.userAgent),Calendar.is_khtml=/Konqueror|Safari|KHTML/i.test(navigator.userAgent),Calendar.getAbsolutePos=function(e){var t=jQuery(e).offset();return t.x=t.left,t.y=t.top,t},Calendar.isRelated=function(e,t){var a=t.relatedTarget;if(!a){var n=t.type;"mouseover"==n?a=t.fromElement:"mouseout"==n&&(a=t.toElement)}for(;a;){if(a==e)return!0;a=a.parentNode}return!1},Calendar.removeClass=function(e,t){if(e&&e.className){for(var a=e.className.split(" "),n=new Array,r=a.length;r>0;)a[--r]!=t&&(n[n.length]=a[r]);e.className=n.join(" ")}},Calendar.addClass=function(e,t){Calendar.removeClass(e,t),e.className+=" "+t},Calendar.getElement=function(e){for(var t=Calendar.is_ie?window.event.srcElement:e.currentTarget;1!=t.nodeType||/^div$/i.test(t.tagName);)t=t.parentNode;return t},Calendar.getTargetElement=function(e){for(var t=Calendar.is_ie?window.event.srcElement:e.target;1!=t.nodeType;)t=t.parentNode;return t},Calendar.stopEvent=function(e){return e||(e=window.event),e.stopPropagation?(e.preventDefault(),e.stopPropagation()):(e.cancelBubble=!0,e.returnValue=!1),!1},Calendar.addEvent=function(e,t,a){e.attachEvent?e.attachEvent("on"+t,a):e.addEventListener?e.addEventListener(t,a,!0):e["on"+t]=a},Calendar.removeEvent=function(e,t,a){e.detachEvent?e.detachEvent("on"+t,a):e.removeEventListener?e.removeEventListener(t,a,!0):e["on"+t]=null},Calendar.createElement=function(e,t){var a=null;return a=document.createElementNS?document.createElementNS("http://www.w3.org/1999/xhtml",e):document.createElement(e),void 0!==t&&t.appendChild(a),a},Calendar._add_evs=function(el){with(Calendar)addEvent(el,"mouseover",dayMouseOver),addEvent(el,"mousedown",dayMouseDown),addEvent(el,"mouseout",dayMouseOut),is_ie&&(addEvent(el,"dblclick",dayMouseDblClick),el.setAttribute("unselectable",!0))},Calendar.findMonth=function(e){return void 0!==e.month?e:void 0!==e.parentNode.month?e.parentNode:null},Calendar.findYear=function(e){return void 0!==e.year?e:void 0!==e.parentNode.year?e.parentNode:null},Calendar.showMonthsCombo=function(){var e=Calendar._C;if(!e)return!1;var e=e,t=e.activeDiv,a=e.monthsCombo;e.hilitedMonth&&Calendar.removeClass(e.hilitedMonth,"hilite"),e.activeMonth&&Calendar.removeClass(e.activeMonth,"active");var n=e.monthsCombo.getElementsByTagName("div")[e.date.getMonth()];Calendar.addClass(n,"active"),e.activeMonth=n;var r=a.style;if(r.display="block",t.navtype<0)r.left=t.offsetLeft+"px";else{var l=a.offsetWidth;void 0===l&&(l=50),r.left=t.offsetLeft+t.offsetWidth-l+"px"}r.top=t.offsetTop+t.offsetHeight+"px"},Calendar.showYearsCombo=function(e){var t=Calendar._C;if(!t)return!1;var t=t,a=t.activeDiv,n=t.yearsCombo;t.hilitedYear&&Calendar.removeClass(t.hilitedYear,"hilite"),t.activeYear&&Calendar.removeClass(t.activeYear,"active"),t.activeYear=null;for(var r=t.date.getFullYear()+(e?1:-1),l=n.firstChild,i=!1,s=12;s>0;--s)r>=t.minYear&&r<=t.maxYear?(l.innerHTML=r,l.year=r,l.style.display="block",i=!0):l.style.display="none",l=l.nextSibling,r+=e?t.yearStep:-t.yearStep;if(i){var o=n.style;if(o.display="block",a.navtype<0)o.left=a.offsetLeft+"px";else{var d=n.offsetWidth;void 0===d&&(d=50),o.left=a.offsetLeft+a.offsetWidth-d+"px"}o.top=a.offsetTop+a.offsetHeight+"px"}},Calendar.tableMouseUp=function(ev){var cal=Calendar._C;if(!cal)return!1;cal.timeout&&clearTimeout(cal.timeout);var el=cal.activeDiv;if(!el)return!1;var target=Calendar.getTargetElement(ev);ev||(ev=window.event),Calendar.removeClass(el,"active"),target!=el&&target.parentNode!=el||Calendar.cellClick(el,ev);var mon=Calendar.findMonth(target),date=null;if(mon)date=new Date(cal.date),mon.month!=date.getMonth()&&(date.setMonth(mon.month),cal.setDate(date),cal.dateClicked=!1,cal.callHandler());else{var year=Calendar.findYear(target);year&&(date=new Date(cal.date),year.year!=date.getFullYear()&&(date.setFullYear(year.year),cal.setDate(date),cal.dateClicked=!1,cal.callHandler()))}with(Calendar)return removeEvent(document,"mouseup",tableMouseUp),removeEvent(document,"mouseover",tableMouseOver),removeEvent(document,"mousemove",tableMouseOver),cal._hideCombos(),_C=null,stopEvent(ev)},Calendar.tableMouseOver=function(e){var t=Calendar._C;if(t){var a=t.activeDiv,n=Calendar.getTargetElement(e);if(n==a||n.parentNode==a?(Calendar.addClass(a,"hilite active"),Calendar.addClass(a.parentNode,"rowhilite")):((void 0===a.navtype||50!=a.navtype&&(0==a.navtype||Math.abs(a.navtype)>2))&&Calendar.removeClass(a,"active"),Calendar.removeClass(a,"hilite"),Calendar.removeClass(a.parentNode,"rowhilite")),e||(e=window.event),50==a.navtype&&n!=a){var r,l=Calendar.getAbsolutePos(a),i=a.offsetWidth,s=e.clientX,o=!0;s>l.x+i?(r=s-l.x-i,o=!1):r=l.x-s,r<0&&(r=0);for(var d=a._range,h=a._current,u=Math.floor(r/10)%d.length,c=d.length;--c>=0&&d[c]!=h;);for(;u-- >0;)o?--c<0&&(c=d.length-1):++c>=d.length&&(c=0);var m=d[c];a.innerHTML=m,t.onUpdateTime()}var C=Calendar.findMonth(n);if(C)C.month!=t.date.getMonth()?(t.hilitedMonth&&Calendar.removeClass(t.hilitedMonth,"hilite"),Calendar.addClass(C,"hilite"),t.hilitedMonth=C):t.hilitedMonth&&Calendar.removeClass(t.hilitedMonth,"hilite");else{t.hilitedMonth&&Calendar.removeClass(t.hilitedMonth,"hilite");var v=Calendar.findYear(n);v&&v.year!=t.date.getFullYear()?(t.hilitedYear&&Calendar.removeClass(t.hilitedYear,"hilite"),Calendar.addClass(v,"hilite"),t.hilitedYear=v):t.hilitedYear&&Calendar.removeClass(t.hilitedYear,"hilite")}return Calendar.stopEvent(e)}},Calendar.tableMouseDown=function(e){if(Calendar.getTargetElement(e)==Calendar.getElement(e))return Calendar.stopEvent(e)},Calendar.calDragIt=function(e){var t=Calendar._C;if(!t||!t.dragging)return!1;var a,n;Calendar.is_ie?(n=window.event.clientY+document.body.scrollTop,a=window.event.clientX+document.body.scrollLeft):(a=e.pageX,n=e.pageY);var r=t.element.style;return r.left=a-t.xOffs+"px",r.top=n-t.yOffs+"px",Calendar.stopEvent(e)},Calendar.calDragEnd=function(ev){var cal=Calendar._C;if(!cal)return!1;with(cal.dragging=!1,Calendar)removeEvent(document,"mousemove",calDragIt),removeEvent(document,"mouseup",calDragEnd),tableMouseUp(ev)},Calendar.dayMouseDown=function(ev){var el=Calendar.getElement(ev);if(el.disabled)return!1;var cal=el.calendar;if(cal.activeDiv=el,Calendar._C=cal,300!=el.navtype)with(Calendar)50==el.navtype?(el._current=el.innerHTML,addEvent(document,"mousemove",tableMouseOver)):addEvent(document,Calendar.is_ie5?"mousemove":"mouseover",tableMouseOver),addClass(el,"hilite active"),addEvent(document,"mouseup",tableMouseUp);else cal.isPopup&&cal._dragStart(ev);return-1==el.navtype||1==el.navtype?(cal.timeout&&clearTimeout(cal.timeout),cal.timeout=setTimeout("Calendar.showMonthsCombo()",250)):-2==el.navtype||2==el.navtype?(cal.timeout&&clearTimeout(cal.timeout),cal.timeout=setTimeout(el.navtype>0?"Calendar.showYearsCombo(true)":"Calendar.showYearsCombo(false)",250)):cal.timeout=null,Calendar.stopEvent(ev)},Calendar.dayMouseDblClick=function(e){Calendar.cellClick(Calendar.getElement(e),e||window.event),Calendar.is_ie&&document.selection.empty()},Calendar.dayMouseOver=function(e){var t=Calendar.getElement(e);return!(Calendar.isRelated(t,e)||Calendar._C||t.disabled)&&(t.ttip&&("_"==t.ttip.substr(0,1)&&(t.ttip=t.caldate.print(t.calendar.ttDateFormat)+t.ttip.substr(1)),t.calendar.tooltips.innerHTML=t.ttip),300!=t.navtype&&(Calendar.addClass(t,"hilite"),t.caldate&&Calendar.addClass(t.parentNode,"rowhilite")),Calendar.stopEvent(e))},Calendar.dayMouseOut=function(ev){with(Calendar){var el=getElement(ev);return!(isRelated(el,ev)||_C||el.disabled)&&(removeClass(el,"hilite"),el.caldate&&removeClass(el.parentNode,"rowhilite"),el.calendar&&(el.calendar.tooltips.innerHTML=_TT.SEL_DATE),stopEvent(ev))}},Calendar.cellClick=function(e,t){function a(e){var t=i.getDate(),a=i.getMonthDays(e);t>a&&i.setDate(a),i.setMonth(e)}var n=e.calendar,r=!1,l=!1,i=null;if(void 0===e.navtype){n.currentDateEl&&(Calendar.removeClass(n.currentDateEl,"selected"),Calendar.addClass(e,"selected"),(r=n.currentDateEl==e)||(n.currentDateEl=e)),n.date.setDateOnly(e.caldate),i=n.date;var s=!(n.dateClicked=!e.otherMonth);s||n.currentDateEl?l=!e.disabled:n._toggleMultipleDate(new Date(i)),s&&n._init(n.firstDayOfWeek,i)}else{if(200==e.navtype)return Calendar.removeClass(e,"hilite"),void n.callCloseHandler();i=new Date(n.date),0==e.navtype&&(n.todayDateStr?i=new Date(n.todayDateStr):i.setDateOnly(new Date)),n.dateClicked=!1;var o=i.getFullYear(),d=i.getMonth();switch(e.navtype){case 400:Calendar.removeClass(e,"hilite");var h=Calendar._TT.ABOUT;return void 0!==h?h+=n.showsTime?Calendar._TT.ABOUT_TIME:"":h='Help and about box text is not translated into this language.\nIf you know this language and you feel generous please update\nthe corresponding file in "lang" subdir to match calendar-en.js\nand send it back to <mihai_bazon@yahoo.com> to get it into the distribution  ;-)\n\nThank you!\nhttp://dynarch.com/mishoo/calendar.epl\n',void alert(h);case-2:o>n.minYear&&i.setFullYear(o-1);break;case-1:d>0?a(d-1):o-- >n.minYear&&(i.setFullYear(o),a(11));break;case 1:d<11?a(d+1):o<n.maxYear&&(i.setFullYear(o+1),a(0));break;case 2:o<n.maxYear&&i.setFullYear(o+1);break;case 100:return void n.setFirstDayOfWeek(e.fdow);case 50:for(var u=e._range,c=e.innerHTML,m=u.length;--m>=0&&u[m]!=c;);t&&t.shiftKey?--m<0&&(m=u.length-1):++m>=u.length&&(m=0);var C=u[m];return e.innerHTML=C,void n.onUpdateTime();case 0:if("function"==typeof n.getDateStatus&&n.getDateStatus(i,i.getFullYear(),i.getMonth(),i.getDate()))return!1}i.equalsTo(n.date)?0==e.navtype&&(l=r=!0):(n.setDate(i),l=!0)}l&&t&&n.callHandler(),r&&(Calendar.removeClass(e,"hilite"),t&&n.callCloseHandler())},Calendar.prototype.create=function(e){var t=null;e?(t=e,this.isPopup=!1):(t=document.getElementsByTagName("body")[0],this.isPopup=!0),this.dateStr&&(this.date=new Date(this.dateStr)),this.date&&!isNaN(this.date)||(this.date=new Date);var a=Calendar.createElement("table");this.table=a,a.cellSpacing=0,a.cellPadding=0,a.calendar=this,Calendar.addEvent(a,"mousedown",Calendar.tableMouseDown);var n=Calendar.createElement("div");this.element=n,n.className="calendar",this.isPopup&&(n.style.position="absolute",n.style.display="none"),n.appendChild(a);var r=Calendar.createElement("thead",a),l=null,i=null,s=this,o=function(e,t,a){return l=Calendar.createElement("td",i),l.colSpan=t,l.className="button",0!=a&&Math.abs(a)<=2&&(l.className+=" nav"),Calendar._add_evs(l),l.calendar=s,l.navtype=a,l.innerHTML="<div unselectable='on'>"+e+"</div>",l};i=Calendar.createElement("tr",r);var d=6;this.isPopup&&--d,this.weekNumbers&&++d,o("?",1,400).ttip=Calendar._TT.INFO,this.title=o("",d,300),this.title.className="title",this.isPopup&&(this.title.ttip=Calendar._TT.DRAG_TO_MOVE,this.title.style.cursor="move",o("&#x00d7;",1,200).ttip=Calendar._TT.CLOSE),i=Calendar.createElement("tr",r),i.className="headrow",this._nav_py=o("&#x00ab;",1,-2),this._nav_py.ttip=Calendar._TT.PREV_YEAR,this._nav_pm=o("&#x2039;",1,-1),this._nav_pm.ttip=Calendar._TT.PREV_MONTH,this._nav_now=o(Calendar._TT.TODAY,this.weekNumbers?4:3,0),this._nav_now.ttip=Calendar._TT.GO_TODAY,this._nav_nm=o("&#x203a;",1,1),this._nav_nm.ttip=Calendar._TT.NEXT_MONTH,this._nav_ny=o("&#x00bb;",1,2),this._nav_ny.ttip=Calendar._TT.NEXT_YEAR,i=Calendar.createElement("tr",r),i.className="daynames",this.weekNumbers&&(l=Calendar.createElement("td",i),l.className="name wn",l.innerHTML=Calendar._TT.WK);for(var h=7;h>0;--h)l=Calendar.createElement("td",i),h||(l.navtype=100,l.calendar=this,Calendar._add_evs(l));this.firstdayname=this.weekNumbers?i.firstChild.nextSibling:i.firstChild,this._displayWeekdays();var u=Calendar.createElement("tbody",a);for(this.tbody=u,h=6;h>0;--h){i=Calendar.createElement("tr",u),this.weekNumbers&&(l=Calendar.createElement("td",i));for(var c=7;c>0;--c)l=Calendar.createElement("td",i),l.calendar=this,Calendar._add_evs(l)}this.showsTime?(i=Calendar.createElement("tr",u),i.className="time",l=Calendar.createElement("td",i),l.className="time",l.colSpan=2,l.innerHTML=Calendar._TT.TIME||"&nbsp;",l=Calendar.createElement("td",i),l.className="time",l.colSpan=this.weekNumbers?4:3,function(){function e(e,t,a,n){var r=Calendar.createElement("span",l);if(r.className=e,r.innerHTML=t,r.calendar=s,r.ttip=Calendar._TT.TIME_PART,r.navtype=50,r._range=[],"number"!=typeof a)r._range=a;else for(var i=a;i<=n;++i){var o;o=i<10&&n>=10?"0"+i:""+i,r._range[r._range.length]=o}return Calendar._add_evs(r),r}var t=s.date.getHours(),a=s.date.getMinutes(),n=!s.time24,r=t>12;n&&r&&(t-=12);var o=e("hour",t,n?1:0,n?12:23),d=Calendar.createElement("span",l);d.innerHTML=":",d.className="colon";var h=e("minute",a,0,59),u=null;l=Calendar.createElement("td",i),l.className="time",l.colSpan=2,n?u=e("ampm",r?Calendar._TT.PM:Calendar._TT.AM,[Calendar._TT.am,Calendar._TT.pm]):l.innerHTML="&nbsp;",s.onSetTime=function(){var e,t=this.date.getHours(),a=this.date.getMinutes();n&&(e=t>=12,e&&(t-=12),0==t&&(t=12),u.innerHTML=e?Calendar._TT.pm:Calendar._TT.am),o.innerHTML=t<10?"0"+t:t,h.innerHTML=a<10?"0"+a:a},s.onUpdateTime=function(){var e=this.date,t=parseInt(o.innerHTML,10);n&&(new RegExp(Calendar._TT.pm,"i").test(u.innerHTML)&&t<12?t+=12:new RegExp(Calendar._TT.am,"i").test(u.innerHTML)&&12==t&&(t=0));var a=e.getDate(),r=e.getMonth(),l=e.getFullYear();e.setHours(t),e.setMinutes(parseInt(h.innerHTML,10)),e.setFullYear(l),e.setMonth(r),e.setDate(a),this.dateClicked=!1,this.callHandler()}}()):this.onSetTime=this.onUpdateTime=function(){};var m=Calendar.createElement("tfoot",a);for(i=Calendar.createElement("tr",m),i.className="footrow",l=o(Calendar._TT.SEL_DATE,this.weekNumbers?8:7,300),l.className="ttip",this.isPopup&&(l.ttip=Calendar._TT.DRAG_TO_MOVE,l.style.cursor="move"),this.tooltips=l,n=Calendar.createElement("div",this.element),this.monthsCombo=n,n.className="combo",h=0;h<Calendar._MN.length;++h){var C=Calendar.createElement("div");C.className=Calendar.is_ie?"label-IEfix":"label",C.month=h,C.innerHTML=Calendar._SMN[h],n.appendChild(C)}for(n=Calendar.createElement("div",this.element),this.yearsCombo=n,n.className="combo",h=12;h>0;--h){var v=Calendar.createElement("div");v.className=Calendar.is_ie?"label-IEfix":"label",n.appendChild(v)}this._init(this.firstDayOfWeek,this.date),t.appendChild(this.element),Calendar.addEvent(this.element,"mousedown",function(e){e.preventDefault?e.preventDefault():e.returnValue=!1})},Calendar._upkeyEvent=function(e){27===e.keyCode&&window.setTimeout(function(){var e=window._dynarch_popupCalendar;if(!e||e.multiple)return!1;e.callCloseHandler()},0)},Calendar._keyEvent=function(e){function t(){u=r.currentDateEl;var e=u.pos;o=15&e,d=e>>4,h=r.ar_days[d][o]}function a(){var e=new Date(r.date);e.setDate(e.getDate()-c),r.setDate(e)}function n(){var e=new Date(r.date);e.setDate(e.getDate()+c),r.setDate(e)}var r=window._dynarch_popupCalendar;if(!r||r.multiple)return!1;var l=Calendar.is_ie||"keydown"==e.type,i=e.keyCode;if(e.ctrlKey)switch(i){case 37:l&&Calendar.cellClick(r._nav_pm);break;case 38:l&&Calendar.cellClick(r._nav_py);break;case 39:l&&Calendar.cellClick(r._nav_nm);break;case 40:l&&Calendar.cellClick(r._nav_ny)}else switch(i){case 32:Calendar.cellClick(r._nav_now);break;case 37:case 38:case 39:case 40:if(l){var s,o,d,h,u,c;for(s=37==i||38==i,c=37==i||39==i?1:7,t();;){switch(i){case 37:if(!(--o>=0)){o=6,i=38;continue}h=r.ar_days[d][o];break;case 38:--d>=0?h=r.ar_days[d][o]:(a(),t());break;case 39:if(!(++o<7)){o=0,i=40;continue}h=r.ar_days[d][o];break;case 40:++d<r.ar_days.length?h=r.ar_days[d][o]:(n(),t())}break}h&&(h.disabled?s?a():n():Calendar.cellClick(h))}break;case 13:l&&Calendar.cellClick(r.currentDateEl,e)}return Calendar.stopEvent(e)},Calendar.prototype._init=function(e,t){var a=new Date(t);a.setHours(13);var n=new Date,r=n.getFullYear(),l=n.getMonth(),i=n.getDate();this.table.style.visibility="hidden";var s=a.getFullYear();s<this.minYear?(s=this.minYear,a.setFullYear(s)):s>this.maxYear&&(s=this.maxYear,a.setFullYear(s)),this.firstDayOfWeek=e;var o=a.getMonth(),d=a.getDate();a.getMonthDays();a.setDate(1);var h=(a.getDay()-this.firstDayOfWeek)%7;h<0&&(h+=7),a.setDate(-h),a.setDate(a.getDate()+1);for(var u=this.tbody.firstChild,c=(Calendar._SMN[o],this.ar_days=new Array),m=Calendar._TT.WEEKEND,C=this.multiple?this.datesCells={}:null,v=0;v<6;++v,u=u.nextSibling){var p=u.firstChild;if(this.weekNumbers){p.className="day wn";var f=a;0==o&&0==v&&0==Date.useISO8601WeekNumbers&&(f=new Date(s,o,1)),p.innerHTML=f.getWeekNumber(this.firstDayOfWeek),p=p.nextSibling}u.className="daysrow";for(var y,g=!1,_=c[v]=[],D=0;D<7;++D,p=p.nextSibling,a.setDate(y+1)){y=a.getDate();var b=a.getDay();p.className="day day-"+y,p.pos=v<<4|D,_[D]=p;var T=a.getMonth()==o;if(T)p.otherMonth=!1,g=!0;else{if(!this.showsOtherMonths){p.className="emptycell",p.innerHTML="&nbsp;",p.disabled=!0;continue}p.className+=" othermonth",p.otherMonth=!0}if(p.disabled=!1,p.innerHTML=this.getDateText?this.getDateText(a,y):y,C&&(C[a.print("%Y%m%d")]=p),this.getDateStatus){var w=this.getDateStatus(a,s,o,y);if(this.getDateToolTip){var M=this.getDateToolTip(a,s,o,y);M&&(p.title=M)}!0===w?(p.className+=" disabled",p.disabled=!0):(/disabled/i.test(w)&&(p.disabled=!0),p.className+=" "+w)}p.disabled||(p.caldate=new Date(a),p.ttip="_",!this.multiple&&T&&y==d&&this.hiliteToday&&(p.className+=" selected",this.currentDateEl=p),a.getFullYear()==r&&a.getMonth()==l&&y==i&&(p.className+=" today",p.ttip+=Calendar._TT.PART_TODAY),-1!=m.indexOf(b.toString())&&(p.className+=p.otherMonth?" oweekend":" weekend"))}g||this.showsOtherMonths||(u.className="emptyrow")}this.date=new Date(t),this.onSetTime(),this.title.innerHTML=Calendar._MN[o]+", "+s,this.table.style.visibility="visible",this._initMultipleDates()},Calendar.prototype._initMultipleDates=function(){if(this.multiple)for(var e in this.multiple){var t=this.datesCells[e],a=this.multiple[e];a&&(t&&(t.className+=" selected"))}},Calendar.prototype._toggleMultipleDate=function(e){if(this.multiple){var t=e.print("%Y%m%d"),a=this.datesCells[t];if(a){this.multiple[t]?(Calendar.removeClass(a,"selected"),delete this.multiple[t]):(Calendar.addClass(a,"selected"),this.multiple[t]=e)}}},Calendar.prototype.setDateToolTipHandler=function(e){this.getDateToolTip=e},Calendar.prototype.setDate=function(e){e.equalsTo(this.date)||this._init(this.firstDayOfWeek,e)},Calendar.prototype.refresh=function(){this._init(this.firstDayOfWeek,this.date)},Calendar.prototype.setFirstDayOfWeek=function(e){this._init(e,this.date),this._displayWeekdays()},Calendar.prototype.setDateStatusHandler=Calendar.prototype.setDisabledHandler=function(e){this.getDateStatus=e},Calendar.prototype.setRange=function(e,t){this.minYear=e,this.maxYear=t},Calendar.prototype.callHandler=function(){this.onSelected&&this.onSelected(this,this.date.print(this.dateFormat))},Calendar.prototype.callCloseHandler=function(){this.onClose&&this.onClose(this)},Calendar.prototype.destroy=function(){this.element.parentNode.removeChild(this.element),Calendar._C=null,window._dynarch_popupCalendar=null},Calendar.prototype.reparent=function(e){var t=this.element;t.parentNode.removeChild(t),e.appendChild(t)},Calendar._checkCalendar=function(e){var t=window._dynarch_popupCalendar;if(!t)return!1;for(var a=Calendar.is_ie?Calendar.getElement(e):Calendar.getTargetElement(e);null!=a&&a!=t.element;a=a.parentNode);return null==a?(window._dynarch_popupCalendar.callCloseHandler(),Calendar.stopEvent(e)):void 0},Calendar.prototype.show=function(){if(!this.params.inputField.disabled){for(var e=this.table.getElementsByTagName("tr"),t=e.length;t>0;){var a=e[--t];Calendar.removeClass(a,"rowhilite");for(var n=a.getElementsByTagName("td"),r=n.length;r>0;){var l=n[--r];Calendar.removeClass(l,"hilite"),Calendar.removeClass(l,"active")}}Calendar.current=this,this.element.style.display="block",this.element.className+=" active",this.hidden=!1,this.isPopup&&(window._dynarch_popupCalendar=this,Calendar.addEvent(document,"keyup",Calendar._upkeyEvent),Calendar.addEvent(document,"keydown",Calendar._keyEvent),Calendar.addEvent(document,"mousedown",Calendar._checkCalendar))}},Calendar.prototype.hide=function(){this.isPopup&&(Calendar.removeEvent(document,"keyup",Calendar._upkeyEvent),Calendar.removeEvent(document,"keydown",Calendar._keyEvent),Calendar.removeEvent(document,"mousedown",Calendar._checkCalendar)),Calendar.current=null,this.element.style.display="none",this.element.className=this.element.className.replace(/active/gi,""),this.hidden=!0},Calendar.prototype.showAt=function(e,t){var a=this.element.style;a.left=e+"px",a.top=t+"px",this.show()},Calendar.prototype.showAtElement=function(e,t){function a(e){e.x<0&&(e.x=0),e.y<0&&(e.y=0);var t=document.createElement("div"),a=t.style;a.position="absolute",a.right=a.bottom=a.width=a.height="0px",document.body.appendChild(t);var n=Calendar.getAbsolutePos(t);document.body.removeChild(t),n.y+=jQuery(window).scrollTop(),n.x+=jQuery(window).scrollLeft();var r=e.x+e.width-n.x;r>0&&(e.x-=r),(r=e.y+e.height-n.y)>0&&(e.y-=r)}var n=this,r=Calendar.getAbsolutePos(e);if(!t||"string"!=typeof t)return this.showAt(r.x,r.y+e.offsetHeight),!0;this.element.style.display="block",Calendar.continuation_for_the_khtml_browser=function(){var l=jQuery(n.element).outerWidth(),i=jQuery(n.element).outerHeight();n.element.style.display="none";var s=t.substr(0,1),o="l";switch(t.length>1&&(o=t.substr(1,1)),s){case"T":r.y-=i;break;case"B":r.y+=jQuery(e).outerHeight();break;case"C":r.y+=(jQuery(e).outerHeight()-i)/2;break;case"t":r.y+=jQuery(e).outerHeight()-i}switch(o){case"L":r.x-=l;break;case"R":r.x+=jQuery(e).outerWidth();break;case"C":r.x+=(jQuery(e).outerWidth()-l)/2;break;case"l":r.x+=jQuery(e).outerWidth()-l}r.width=l,r.height=i+40,n.monthsCombo.style.display="none",a(r),n.showAt(r.x,r.y)},Calendar.continuation_for_the_khtml_browser()},Calendar.prototype.setDateFormat=function(e){this.dateFormat=e},Calendar.prototype.setTtDateFormat=function(e){this.ttDateFormat=e},Calendar.prototype.parseDate=function(e,t){t||(t=this.dateFormat),this.setDate(Date.parseDate(e,t))},Calendar.prototype._displayWeekdays=function(){for(var e=this.firstDayOfWeek,t=this.firstdayname,a=Calendar._TT.WEEKEND,n=0;n<7;++n){t.className="day name";var r=(n+e)%7;n&&(t.ttip=Calendar._TT.DAY_FIRST.replace("%s",Calendar._DN[r]),t.navtype=100,t.calendar=this,t.fdow=r,Calendar._add_evs(t)),-1!=a.indexOf(r.toString())&&Calendar.addClass(t,"weekend"),t.innerHTML=Calendar._SDN[(n+e)%7],t=t.nextSibling}},Calendar.prototype._hideCombos=function(){this.monthsCombo.style.display="none",this.yearsCombo.style.display="none"},Calendar.prototype._dragStart=function(ev){if(!this.dragging){this.dragging=!0;var posX,posY;Calendar.is_ie?(posY=window.event.clientY+document.body.scrollTop,posX=window.event.clientX+document.body.scrollLeft):(posY=ev.clientY+window.scrollY,posX=ev.clientX+window.scrollX);var st=this.element.style;with(this.xOffs=posX-parseInt(st.left),this.yOffs=posY-parseInt(st.top),Calendar)addEvent(document,"mousemove",calDragIt),addEvent(document,"mouseup",calDragEnd)}},Date._MD=new Array(31,28,31,30,31,30,31,31,30,31,30,31),Date.SECOND=1e3,Date.MINUTE=60*Date.SECOND,Date.HOUR=60*Date.MINUTE,Date.DAY=24*Date.HOUR,Date.WEEK=7*Date.DAY,Date._multisplit=function(e,t){if(null==e)return null;null==t&&(t="");var a=[],n=e.length,r="",l=!1;for(i=0;i<n;i++){var s=e.charAt(i);-1==t.indexOf(s)?(l=!0,r+=s):l&&(a[a.length]=r,r="",l=!1)}return r.length>0&&(a[a.length]=r),0==a.length&&(a[a.length]=""),a},Date._parseNonDateFormatChars=function(e){var t="",a=e.length;for(i=0;i<a;i++){var n=e.charAt(i);if("%"==n){var r="";if(i+1<a&&(r=e.charAt(i+1)),i+=1,r.length>0&&-1!="aAbBCdeHIJklmMnpPRSstUWVuwyY%".indexOf(r))continue;-1==t.indexOf(n)&&(t+=n),r.length>0&&-1==t.indexOf(r)&&(t+=r)}else-1==t.indexOf(n)&&(t+=n)}return t},Date.splitDate=function(e,t){var a=(new Date,0),n=-1,r=0,l=Date._parseNonDateFormatChars(t),i=Date._multisplit(e,l),s=t.match(/%./g),o=0,d=0,h=0,u=0;for(o=0;o<i.length;++o)if(i[o])switch(s[o]){case"%d":case"%e":r=Number(i[o]);break;case"%m":n=Number(i[o])-1;break;case"%Y":case"%y":a=Number(i[o]),a<100&&(a+=a>29?1900:2e3);break;case"%b":case"%B":var c=i[o].toLowerCase(),m=!1;if("%b"==s[o])for(d=0;d<12;++d)if(Calendar._SMN[d].substr(0,c.length).toLowerCase()==c){n=d,m=!0;break}if(!m)for(d=0;d<12;++d)if(Calendar._MN[d].substr(0,c.length).toLowerCase()==c){n=d;break}break;case"%H":case"%I":case"%k":case"%l":h=Number(i[o]);break;case"%P":case"%p":/pm/i.test(i[o])&&h<12?h+=12:/am/i.test(i[o])&&h>=12&&(h-=12);break;case"%M":u=Number(i[o]);break;case"%R":var C=i[o],v=C.indexOf(":"),p=C.substring(0,v),f=-1==v?0:C.substring(v+1);h=Number(p),u=Number(f)}return{parts:i,year:a,month:n,day:r,hour:h,minute:u}},Date.parseDate=function(e,t){var a=new Date,n=Date.splitDate(e,t),r=n.parts,l=n.year,i=n.month,s=n.day,o=n.hour,d=n.minute,h=0,u=0;if(isNaN(l)&&(l=a.getFullYear()),isNaN(i)&&(i=a.getMonth()),isNaN(s)&&(s=a.getDate()),isNaN(o)&&(o=a.getHours()),isNaN(d)&&(d=a.getMinutes()),0!=l&&-1!=i&&0!=s)return new Date(l,i,s,o,d,0);for(l=0,i=-1,s=0,h=0;h<r.length;++h)if(-1!=r[h].search(/[a-zA-Z]+/)){var c=-1;for(u=0;u<12;++u)if(Calendar._MN[u].substr(0,r[h].length).toLowerCase()==r[h].toLowerCase()){c=u;break}-1!=c&&(-1!=i&&(s=i+1),i=c)}else Number(r[h])<=12&&-1==i?i=r[h]-1:Number(r[h])>31&&0==l?(l=Number(r[h]))<100&&(l+=l>29?1900:2e3):0==s&&(s=r[h]);return 0==l&&(l=a.getFullYear()),-1!=i&&0!=s?new Date(l,i,s,o,d,0):a},Date.prototype.getMonthDays=function(e){var t=this.getFullYear();return void 0===e&&(e=this.getMonth()),0!=t%4||0==t%100&&0!=t%400||1!=e?Date._MD[e]:29},Date.prototype.getDayOfYear=function(){var e=new Date(this.getFullYear(),this.getMonth(),this.getDate(),13,0,0),t=new Date(this.getFullYear(),0,0,13,0,0),a=e-t;return Math.floor(a/Date.DAY)},Date.prototype.getWeekNumber=function(e){return Date.useISO8601WeekNumbers?this.getISO8601WeekNumber():this.getSimpleWeekNumber(e)},Date.prototype.getISO8601WeekNumber=function(){function e(e,t,a){return y=e,m=t,t<3&&(y-=1),t<3&&(m+=12),Math.floor(365.25*y)-Math.floor(y/100)+Math.floor(y/400)+Math.floor(30.6*(m+1))+a-62}return function(t){return year=t.getFullYear(),month=t.getMonth(),day=t.getDate(),wday=t.getDay(),weekday=(wday+6)%7+1,isoyear=year,d0=e(year,1,0),weekday0=(d0+4)%7+1,d=e(year,month+1,day),isoweeknr=Math.floor((d-d0+weekday0+6)/7)-Math.floor((weekday0+3)/7),11==month&&day-weekday>27&&(isoweeknr=1,isoyear+=1),0==month&&weekday-day>3&&(d0=e(year-1,1,0),weekday0=(d0+4)%7+1,isoweeknr=Math.floor((d-d0+weekday0+6)/7)-Math.floor((weekday0+3)/7),isoyear-=1),isoweeknr}(this)},Date.prototype.getSimpleWeekNumber=function(e){return function(e,t,a){var n,r=e.getFullYear(),l=new Date(r,0,1);return n=Math.round((e-l)/864e5),null!=t&&(n-=(7+t-l.getDay())%7),null!=a&&(n+=a),[r,1+n/7|0,1+(7+n)%7]}(this,e||6,6)[1]},Date.prototype.equalsTo=function(e){return this.getFullYear()==e.getFullYear()&&this.getMonth()==e.getMonth()&&this.getDate()==e.getDate()&&this.getHours()==e.getHours()&&this.getMinutes()==e.getMinutes()},Date.prototype.setDateOnly=function(e){var t=new Date(e);this.setDate(1),this.setFullYear(t.getFullYear()),this.setMonth(t.getMonth()),this.setDate(t.getDate())},Date.prototype.print=function(e){var t=this.getMonth(),a=this.getDate(),n=this.getFullYear(),r=this.getWeekNumber(),l=this.getDay(),i={},s=this.getHours(),o=s>=12,d=o?s-12:s,h=this.getDayOfYear();0==d&&(d=12);var u=this.getMinutes(),c=this.getSeconds();i["%a"]=Calendar._SDN[l],i["%A"]=Calendar._DN[l],i["%b"]=Calendar._SMN[t],i["%B"]=Calendar._MN[t],i["%C"]=1+Math.floor(n/100),i["%d"]=a<10?"0"+a:a,i["%e"]=a,i["%H"]=s<10?"0"+s:s,i["%I"]=d<10?"0"+d:d,i["%j"]=h<100?h<10?"00"+h:"0"+h:h,i["%k"]=s,i["%l"]=d,i["%m"]=t<9?"0"+(1+t):1+t,i["%M"]=u<10?"0"+u:u,i["%n"]="\n",i["%p"]=o?Calendar._TT.PM:Calendar._TT.AM,i["%P"]=o?Calendar._TT.PM:Calendar._TT.AM,i["%R"]=i["%k"]+":"+i["%M"],i["%s"]=Math.floor(this.getTime()/1e3),i["%S"]=c<10?"0"+c:c,i["%t"]="\t",i["%U"]=i["%W"]=i["%V"]=r<10?"0"+r:r,i["%u"]=l+1,i["%w"]=l,i["%y"]=(""+n).slice(-2),i["%Y"]=n,i["%%"]="%";var m=/%./g;if(!Calendar.is_ie5&&!Calendar.is_khtml)return e.replace(m,function(e){return i[e]||e});for(var C=e.match(m),v=0;v<C.length;v++){var p=i[C[v]];p&&(m=new RegExp(C[v],"g"),e=e.replace(m,p))}return e},Date.prototype.__msh_oldSetFullYear=Date.prototype.setFullYear,Date.prototype.setFullYear=function(e){var t=new Date(this);t.__msh_oldSetFullYear(e),t.getMonth()!=this.getMonth()&&this.setDate(28),this.__msh_oldSetFullYear(e)},window._dynarch_popupCalendar=null;;
;
/* module-key = 'jira.webresources:calendar-lib', location = '/includes/lib/calendar/Calendar.setup.js' */
!function(e,t){Calendar.setup=function(a){function n(e,t){void 0===a[e]&&(a[e]=t)}function l(t){var a=t.params,n=t.dateClicked||a.electric;n&&a.inputField&&(a.inputField.value=t.date.print(a.ifFormat),e(a.inputField).change()),n&&a.displayArea&&(a.displayArea.innerHTML=t.date.print(a.daFormat)),n&&"function"==typeof a.onUpdate&&a.onUpdate(t),n&&a.flat&&"function"==typeof a.flatCallback&&a.flatCallback(t),"true"===a.singleClick?a.singleClick=!0:"false"===a.singleClick&&(a.singleClick=!1),n&&a.singleClick&&t.dateClicked&&t.callCloseHandler()}function i(){if(!0===Calendar._UNSUPPORTED)return void alert("The JIRA Calendar does not currently support your language.");var e=a.inputField||a.displayArea,t=a.inputField?a.ifFormat:a.daFormat,n=!1,i=window.calendar;if(i&&i.hide(),e&&(e.value||e.innerHTML)&&(a.date=Date.parseDate(e.value||e.innerHTML,t)),i&&a.cache?(a.date&&i.setDate(a.date),i.hide()):(window.calendar=i=new Calendar(a.firstDay,a.date,a.todayDate,a.onSelect||l,a.onClose||function(e){e.hide()}),i.showsTime=a.showsTime,i.time24="24"==a.timeFormat,i.weekNumbers=a.weekNumbers,Date.useISO8601WeekNumbers=a.useISO8601WeekNumbers,a.useISO8601WeekNumbers&&(i.firstDayOfWeek=1),n=!0),a.multiple){i.multiple={};for(var r=a.multiple.length;--r>=0;){var u=a.multiple[r],o=u.print("%Y%m%d");i.multiple[o]=u}}return i.showsOtherMonths=a.showOthers,i.yearStep=a.step,i.setRange(a.range[0],a.range[1]),i.params=a,i.setDateStatusHandler(a.dateStatusFunc),i.getDateText=a.dateText,i.setDateFormat(t),n&&i.create(),i.refresh(),a.position?i.showAt(a.position[0],a.position[1]):i.showAtElement(a.button||a.displayArea||a.inputField,a.align),!1}a=a||{},n("inputField",null),n("context",null),n("displayArea",null),n("button",null),n("eventName","click"),n("ifFormat","%Y/%m/%d"),n("daFormat","%Y/%m/%d"),n("singleClick",!0),n("disableFunc",null),n("dateStatusFunc",a.disableFunc),n("dateText",null),n("firstDay",null),n("align","Br"),n("range",[1900,2999]),n("weekNumbers",!0),n("useISO8601WeekNumbers",!1),n("flat",null),n("flatCallback",null),n("onSelect",null),n("onClose",null),n("onUpdate",null),n("date",null),n("todayDate",null),n("showsTime",!1),n("timeFormat","24"),n("electric",!0),n("step",1),n("position",null),n("cache",!1),n("showOthers",!1),n("multiple",null);var r,u,o=["context","inputField","button","displayArea"];for(r in o)u=o[r],a[u]instanceof e&&(a[u]=a[u][0]);var s=["inputField","displayArea","button"];for(r in s)if(u=s[r],"string"==typeof a[u]){var d="#"+e.escapeSelector(a[u]),p=e(a.context||document.body).find(d);a[u]=p[0]}if(!(a.flat||a.multiple||a.inputField||a.displayArea||a.button))return t.log("Calendar.setup:\n  Nothing to setup (no fields found).  Please check your code"),!1;if(a.firstDay&&null!==a.firstDay&&(a.firstDay=+a.firstDay),null!=a.flat){if("string"==typeof a.flat&&(a.flat=document.getElementById(a.flat)),!a.flat)return t.log("Calendar.setup:\n  Flat specified but can't find parent."),!1;var c=new Calendar(a.firstDay,a.date,a.todayDate,a.onSelect||l);return c.showsOtherMonths=a.showOthers,c.showsTime=a.showsTime,c.time24="24"==a.timeFormat,c.params=a,c.weekNumbers=a.weekNumbers,c.setRange(a.range[0],a.range[1]),c.setDateStatusHandler(a.dateStatusFunc),c.getDateText=a.dateText,a.ifFormat&&c.setDateFormat(a.ifFormat),a.inputField&&"string"==typeof a.inputField.value&&c.parseDate(a.inputField.value),c.create(a.flat),c.show(),!1}var f=a.button||a.displayArea||a.inputField;return e(f).bind(a.eventName,function(e){e.preventDefault(),i()}),a.inputField&&function(){var t=e(a.inputField);a.button&&e(a.button).mousedown(function(e){e.preventDefault(),!t.is(":focus")&&t.is(":enabled")&&t.focus()}),t.keydown(function(e){var t=window.calendar;40===e.keyCode&&(t&&!t.hidden||setTimeout(function(){i()},1))})}(),c}}(require("jquery"),require("jira/util/logger"));;
;
/* module-key = 'jira.webresources:calendar', location = '/includes/lib/calendar/Calendar-layerable.js' */
define("jira/libs/calendar-layerable-mixin",["jira/ajs/layer/layer-interactions","jira/ajs/layer/inline-layer","jira/util/events"],function(e,n,i){"use strict";function r(r){e.preventDialogHide(r),e.preventInputBlur(r),e.preventInlineEditCancel(r),i.bind(n.EVENTS.beforeHide,function(e){r.current&&e.preventDefault()})}return{layerableExtensions:r}});;
;
/* module-key = 'jira.webresources:calendar', location = '/includes/lib/calendar/Calendar-amd.js' */
define("jira/libs/calendar",["require"],function(a){"use strict";var e=window.Calendar;return a("jira/libs/calendar-layerable-mixin").layerableExtensions(e),e}),function(){"use strict";var a=require("jira/libs/calendar");AJS.namespace("window.Calendar",window,a)}();;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/dropdown/Dropdown.js' */
define("jira/dropdown",["require"],function(i){function o(){try{return Boolean(n.require("jira/dialog/dialog").current)}catch(i){}return!1}var n=i("jira/util/top-same-origin-window")(window),t=i("jira/ajs/layer/layer-interactions"),e=i("jquery"),d=i("jira/util/key-code"),r=[],s={current:null,addInstance:function(){r.push(this)},hideInstances:function(){var i=this;e(r).each(function(){i!==this&&this.hideDropdown()})},getHash:function(){return this.hash||(this.hash={container:this.dropdown,hide:this.hideDropdown,show:this.displayDropdown}),this.hash},displayDropdown:function(){if(this.current!==this){this.hideInstances(),this.current=this,this.dropdown.css({display:"block"}),this.displayed=!0;var i=this.dropdown;o()||setTimeout(function(){var o=e(window),n=i.offset().top+i.prop("offsetHeight")-o.height()+10;o.scrollTop()<n&&e("html,body").animate({scrollTop:n},300,"linear")},100)}},hideDropdown:function(){!1!==this.displayed&&(this.current=null,this.dropdown.css({display:"none"}),this.displayed=!1)},init:function(i,o){var n=this;this.addInstance(this),this.dropdown=e(o),this.dropdown.css({display:"none"}),e(document).keydown(function(i){i.keyCode===d.TAB&&n.hideDropdown()}),i.target?e.aop.before(i,function(){n.displayed||n.displayDropdown()}):(n.dropdown.css("top",e(i).outerHeight()+"px"),i.click(function(i){n.displayed?n.hideDropdown():(n.displayDropdown(),i.stopPropagation()),i.preventDefault()})),e(document.body).click(function(){n.displayed&&n.hideDropdown()})}};return t.preventDialogHide(s),t.hideBeforeDialogShown(s),s}),AJS.namespace("JIRA.Dropdown",null,require("jira/dropdown")),AJS.namespace("jira.widget.dropdown",null,require("jira/dropdown"));;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/AutoComplete.js' */
define("jira/autocomplete/autocomplete",["jira/ajs/ajax/smart-ajax","jira/util/key-code","jira/util/objects","jquery"],function(e,t,o,n){return function(){var i,s=function e(t,o){e.t&&(clearTimeout(e.t),e.t=void 0),e.t=setTimeout(t,1e3*o)},r={9:!0,13:!0,14:!0,25:!0,27:!0,38:!0,40:!0,224:!0};return{dispatcher:function(){},getSavedResponse:function(){},saveResponse:function(){},renderSuggestions:function(){},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},set:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])},completeField:function(e){e&&(this.field.val(e).focus(),this.field.trigger("change"))},textToSuggestionCursorPosition:function(){return this.field.val()},_makeRequest:function(t){var n=this,i=o.copyObject(t);return this.pendingRequest&&this.pendingRequest.abort(),i.complete=function(){n.pendingRequest=null},i.error=function(e){!e.aborted&&0!==e.status&&t.error&&t.error.apply(this,arguments)},this.pendingRequest=e.makeRequest(i)},addSuggestionControls:function(e){function o(e){d.dropdownController.displayed&&a(e.data.index)}function s(e){0===e.data.index&&(d.selectedIndex=-1),n(this).removeClass("active")}function r(e){d.completeField(d.suggestionNodes[e.data.index][1])}var d=this,l=function(e,t){var o=!1===d.autoSelectFirst?-1:0;return d.allowArrowCarousel?e>t?o:e<o?t:e:e>t?t:e<o?(d.responseContainer.scrollTop(0),o):e},a=function(e){void 0!==d.selectedIndex&&d.selectedIndex>-1&&d.suggestionNodes[d.selectedIndex][0].removeClass("active"),d.selectedIndex=l(e,d.suggestionNodes.length-1),d.selectedIndex>-1&&d.suggestionNodes[d.selectedIndex][0].addClass("active")},u=function(){return d.suggestionNodes&&d.suggestionNodes[d.selectedIndex]&&d.suggestionNodes[d.selectedIndex][0].hasClass("active")},p=function(e){d.responseContainer.is(":visible")&&e.keyCode===t.ENTER&&(u()&&!d.pendingRequest&&d.completeField(d.suggestionNodes[d.selectedIndex][1]),e.preventDefault(),e.stopPropagation())},c=function(e){if(d.responseContainer.is(":visible"))if(d.field[0]!==document.activeElement&&d.field.focus(),e.keyCode===t.DOWN){if(a(d.selectedIndex+1),d.selectedIndex>=0){var o=d.responseContainer.height(),n=d.suggestionNodes[d.selectedIndex][0].position().top+d.suggestionNodes[d.selectedIndex][0].outerHeight();n-o>0&&d.responseContainer.scrollTop(d.responseContainer.scrollTop()+n-o+2)}else d.responseContainer.scrollTop(0);e.preventDefault()}else if(e.keyCode===t.UP){if(a(d.selectedIndex-1),d.selectedIndex>=0){var i=d.suggestionNodes[d.selectedIndex][0].position().top;i<0&&d.responseContainer.scrollTop(d.responseContainer.scrollTop()+i-2)}e.preventDefault()}else e.keyCode===t.TAB&&(u()?(d.completeField(d.suggestionNodes[d.selectedIndex][1]),e.preventDefault()):d.dropdownController.hideDropdown())};if(e.length){this.selectedIndex=0,this.suggestionNodes=e;for(var h=0;h<d.suggestionNodes.length;h++){var f={instance:this,index:h};this.suggestionNodes[h][0].bind("mouseover",f,o).bind("mouseout",f,s).bind("click",f,r).bind("mousedown",function(e){e.preventDefault()})}this.keyboardHandlerBinded||(n(this.field).keypress(p),n(this.field).keydown(c),this.keyboardHandlerBinded=!0),a(!1===d.autoSelectFirst?-1:0),i=this}},clearResponseContainer:function(){this.responseContainer.empty(),this.suggestionNodes=void 0},delay:s,buildResponseContainer:function(){var e=this.field.parent().addClass("atlassian-autocomplete");this.responseContainer=n(document.createElement("div")),this.responseContainer.addClass("suggestions"),this.positionResponseContainer(),this.responseContainer.appendTo(e)},positionResponseContainer:function(){this.responseContainer.css({top:this.field.outerHeight()})},keyUpHandler:function(){function e(){this.responseContainer||this.buildResponseContainer(),this.dispatcher(this.field.val())}return function(o){return this.field.val().length>=this.minQueryLength&&(o.keyCode in r&&(!this.responseContainer||this.responseContainer.is(":visible")||o.keyCode!==t.UP&&o.keyCode!==t.DOWN)||e.call(this)),o}}(),addMultiSelectAdvice:function(e){var t=this,o=function e(o){if(!e.isAlerting){e.isAlerting=!0;var i=n(document.createElement("div")).css({float:"left",display:"none"}).addClass("warningBox").html("Oops! You have already entered the value <em>"+o+"</em>").appendTo(t.field.parent()).show("fast",function(){t.delay(function(){i.hide("fast",function(){i.remove(),e.isAlerting=!1})},4)})}};n.aop.before({target:this,method:"dispatcher"},function(t){var o=this.field.val();return t[0]=n.trim(o.slice(o.lastIndexOf(e)+1)),t}),n.aop.before({target:this,method:"completeField"},function(t){var i=t[0],s=this.field.val().split(e),r=n(s).map(function(){return n.trim(this)}).get();return!this.allowDuplicates&&new RegExp("(?:^|[\\s"+e+"])"+i+"\\s*"+e).test(this.field.val())?(o(i),r[r.length-1]=""):(r[r.length-1]=i,r[r.length]=""),t[0]=r.join(e.replace(/([^\s]$)/,"$1 ")),t})},addDropdownAdvice:function(){n.aop.after({target:this,method:"buildResponseContainer"},function(e){return this.dropdownController=JIRA.Dropdown.AutoComplete({target:this,method:"renderSuggestions"},this.responseContainer),n.aop.after({target:this.dropdownController,method:"hideDropdown"},function(){this.dropdown.removeClass("dropdown-ready"),clearTimeout(s.t)}),e}),n.aop.after({target:this,method:"renderSuggestions"},function(e){return e&&e.length>0?(this.dropdownController.displayDropdown(),this.maxHeight&&this.dropdownController.dropdown.prop("scrollHeight")>this.maxHeight?this.dropdownController.dropdown.css({height:this.maxHeight,overflowX:"visible",overflowY:"scroll"}):this.maxHeight&&this.dropdownController.dropdown.css({height:"",overflowX:"",overflowY:""}),this.dropdownController.dropdown.addClass("dropdown-ready")):this.dropdownController.hideDropdown(),e}),n.aop.after({target:this,method:"completeField"},this._afterCompleteField),n.aop.after({target:this,method:"keyUpHandler"},function(e){return this.field.val().length>=this.minQueryLength&&e.keyCode!==t.ESCAPE||!this.dropdownController||!this.dropdownController.displayed||(this.dropdownController.hideDropdown(),e.keyCode===t.ESCAPE&&e.stopPropagation()),e})},_afterCompleteField:function(e){return this.dropdownController.hideDropdown(),e},init:function(e){var o=this;this.set(e),this.field=this.field||n("#"+this.fieldID),this.field.attr("autocomplete","off").keyup(function(e){o.disabled||o.keyUpHandler(e)}).keydown(function(e){e.keyCode===t.ESCAPE&&o.responseContainer&&o.responseContainer.is(":visible")&&e.preventDefault()}).click(function(){i===o&&setTimeout(function(){o.dispatcher(o.field.val())},0)}).blur(function(){o.pendingRequest&&o.pendingRequest.abort()}).focus(function(e){o.disabled||(e.originalEvent&&e.originalEvent.relatedTarget&&setTimeout(function(){o.dispatcher(o.field.val())},0),i=o)}),this.addDropdownAdvice(),e.delimChar&&this.addMultiSelectAdvice(e.delimChar)}}}()}),AJS.namespace("jira.widget.autocomplete",null,require("jira/autocomplete/autocomplete")),AJS.namespace("JIRA.AutoComplete",null,require("jira/autocomplete/autocomplete"));;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/RESTAutoComplete.js' */
var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};define("jira/autocomplete/rest-autocomplete",["jira/autocomplete/autocomplete","jira/util/objects"],function(e,t){return function(){var o=t.begetObject(e);return o.dispatcher=function(e){var t=this;e.length<this.minQueryLength||(this.getSavedResponse(e)?(t.renderSuggestions(t.getSavedResponse(e)),t.responseContainer.scrollTop(0)):this.delay(function(){var o=t.getAjaxParams();o.data.query=e,o.success=function(o){t.saveResponse(e,o),t.responseContainer.scrollTop(0),t.renderSuggestions(o)},t._makeRequest(o)},t.queryDelay))},o.getAjaxParams=function(){},o.getSavedResponse=function(e){return this.requested||(this.requested={}),this.requested[e]},o.saveResponse=function(e,t){"string"==typeof e&&"object"===(void 0===t?"undefined":_typeof(t))&&(this.requested||(this.requested={}),this.requested[e]=t)},o}()}),AJS.namespace("jira.widget.autocomplete.REST",null,require("jira/autocomplete/rest-autocomplete")),AJS.namespace("JIRA.RESTAutoComplete",null,require("jira/autocomplete/rest-autocomplete"));;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/IssueAutoComplete.js' */
define("jira/autocomplete/issue-autocomplete",["jira/data/parse-options-from-fieldset","jira/field/issue-picker","jira/autocomplete/rest-autocomplete","jira/util/objects","wrm/context-path","jquery"],function(e,t,s,a,i,n){var r=i(),d=function(e){var t=a.begetObject(s);return t.getAjaxParams=function(){return{url:r+"/rest/api/2/issue/picker",data:e.ajaxData,dataType:"json",type:"GET"}},t.renderSuggestions=function(s){var a,i=[];if(this.clearResponseContainer(),s&&s.sections&&s.sections.length>0)return a=n("<ul/>").appendTo(this.responseContainer),n(s.sections).each(function(){var t=this,s=n("<div/>").attr("id",e.fieldID+"_s_"+t.id).addClass("yag").text(t.label);if(t.sub&&s.append(n("<span/>").addClass("yagt").text("("+t.sub+")")),a.append(n("<li/>").append(s).mouseover(function(){n(this).addClass("active")}).mouseout(function(){n(this).removeClass("active")})),t.msg){var d=n("<div/>").attr("id",e.fieldID+"_i_"+t.id+"_n").addClass("yad").text(t.msg);a.append(n("<li/>").append(d).mouseover(function(){n(this).addClass("active")}).mouseout(function(){n(this).removeClass("active")}))}t.issues&&t.issues.length>0&&n(t.issues).each(function(){var s;s=/^http/.test(this.img)?this.img:r+this.img;var d=n("<li/>").append(n("<div/>").attr("id",e.fieldID+"_i_"+t.id+"_"+this.key).addClass("yad").append(n("<table/>").addClass("yat").attr({cellpadding:"0",cellspacing:"0"}).append(n("<tr/>").append(n("<td/>").append(n("<img/>").attr("src",s))).append(n("<td/>").append(n("<div/>").addClass("yak").html(this.keyHtml))).append(n("<td/>").css("width","100%").html(this.summary)))));a.append(d),i.push([d,this.key])})}),t.addSuggestionControls(i),i},e.minQueryLength=1,e.queryDelay=.25,t.init(e),t};return d.init=function(){n("fieldset.issue-picker-params").each(function(){var s=e(n(this));n("#"+s.fieldId+"-container").add("#"+s.fieldName+"_container").find("a.popup-trigger").click(function(e){var a=r+"/secure/popups/IssuePicker.jspa?";a+="currentIssue="+s.currentIssueKey+"&",a+="singleSelectOnly="+s.singleSelectOnly+"&",a+="showSubTasks="+s.showSubTasks+"&",a+="showSubTasksParent="+s.showSubTaskParent,s.currentProjectId&&""!==s.currentProjectId&&(a+="&selectedProjectId="+s.currentProjectId),t.callback=function(e){var t,a=[];e=JSON.parse(e),s.fieldId&&a&&(t=n("#"+s.fieldId))&&(n.each(e,function(){a.push(this.value)}),t.val(a.join(", ")))};var i=window.open(a,"IssueSelectorPopup","status=no,resizable=yes,top=100,left=200,width=620,height=500,scrollbars=yes,resizable");i.opener=self,i.focus(),e.preventDefault()}),s.fieldId||(s.fieldId=s.fieldName),!0===s.issuePickerEnabled&&d({fieldID:s.fieldId,delimChar:!0===s.singleSelectOnly?void 0:",",ajaxData:s})})},d}),AJS.namespace("jira.widget.autocomplete.Issues",null,require("jira/autocomplete/issue-autocomplete")),AJS.namespace("JIRA.IssueAutoComplete",null,require("jira/autocomplete/issue-autocomplete"));;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/UserAutoComplete.js' */
define("jira/autocomplete/user-autocomplete",["jira/autocomplete/rest-autocomplete","jira/data/parse-options-from-fieldset","jira/util/browser","jira/util/elements","jira/util/objects","wrm/context-path","jquery"],function(e,t,i,r,o,a,s){"use strict";var n=a(),l=function(t){function a(e){var t=!1,i=e.closest("form");return i.length&&i.hasClass("submitting")&&(t=!0),t}var l=o.begetObject(e);return l.getAjaxParams=function(){return{url:n+"/rest/api/1.0/users/picker",data:{fieldName:t.fieldID,fieldConfigId:t.fieldConfigID,projectId:t.projectId},dataType:"json",type:"GET"}},l.renderSuggestions=function(e){if(a(this.field)||!i.isSelenium()&&!r.elementIsFocused(this.field))return!1;var t,o=[];return this.clearResponseContainer(),e&&e.users&&e.users.length>0&&(t=s("<ul/>").appendTo(this.responseContainer),s(e.users).each(function(){o.push([s("<li/>").html(this.html).appendTo(t),this.name])})),e.footer&&this.responseContainer.append(s("<div/>").addClass("yui-ac-ft").html(e.footer).css("display","block")),o.length>0&&(l.addSuggestionControls(o),s(".atlassian-autocomplete div.yad, .atlassian-autocomplete .labels li").textOverflow({autoUpdate:!0})),o},t.minQueryLength=2,t.queryDelay=.25,l.init(t),l};return l.init=function(e){s("fieldset.user-picker-params",e).each(function(){var i=t(s(this)),r=i.fieldId||i.fieldName,o=s("#"+r+"_container");o.find("a.popup-trigger").click(function(e){var t,a=n;if(e.preventDefault(),i.formName||(i.formName=o.find("#"+r).parents("form").attr("name")),i.actionToOpen?a+=i.actionToOpen:a+="/secure/popups/UserPickerBrowser.jspa",a+="?formName="+i.formName+"&",a+="multiSelect="+i.multiSelect+"&",a+="decorator=popup&",a+="element="+r,i.fieldConfigId&&(a+="&fieldConfigId="+i.fieldConfigId),i.projectId)if(s.isArray(i.projectId))for(var l in i.projectId)a+="&projectId="+l;else a+="&projectId="+i.projectId;t=window.open(a,"UserPicker","status=yes,resizable=yes,top=100,left=100,width=800,height=750,scrollbars=yes"),t.opener=self,t.focus()}),!0===i.userPickerEnabled&&l({field:e?e.find("#"+r):null,fieldID:r,fieldConfigID:i.fieldConfigId,projectId:i.projectId,delimChar:!1===i.multiSelect?void 0:",",ajaxData:{fieldName:i.fieldName}})})},l}),AJS.namespace("jira.widget.autocomplete.Users",null,require("jira/autocomplete/user-autocomplete")),AJS.namespace("JIRA.UserAutoComplete",null,require("jira/autocomplete/user-autocomplete"));;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/initAutoCompleteFields.js' */
!function(){"use strict";var e=require("jquery"),r=require("jira/data/parse-options-from-fieldset"),i=require("jira/util/events"),t=require("jira/util/events/reasons"),a=require("jira/util/events/types"),s=require("jira/autocomplete/issue-autocomplete"),l=require("jira/autocomplete/user-autocomplete"),o=require("wrm/context-path"),u=o();i.bind(a.NEW_CONTENT_ADDED,function(e,r,i){i!==t.panelRefreshed&&(l.init(r),s.init(r))}),i.bind(a.NEW_CONTENT_ADDED,function(i,a,s){s!==t.panelRefreshed&&e("fieldset.user-searcher-params",a).each(function(){var i=r(e(this)),t=e("#"+i.fieldId+"_container",a);if(!0===i.userPickerEnabled)var s=l({fieldID:i.fieldId,delimChar:!0===i.multiSelect?",":void 0,ajaxData:{fieldName:i.fieldName}});var o=function(r){var t=e("#"+i.fieldId,a),l=e("#"+i.fieldId+"Image",a),o=e("#"+i.fieldId+"GroupImage",a),u=e("#"+i.fieldId+"_desc",a);"select.list.none"===r?(t.val("").attr("disabled","true"),l.hide(),o.hide(),u.hide()):(t.removeAttr("disabled"),"select.list.group"===r?(l.hide(),o.show(),!0===i.userPickerEnabled&&(s.disable(),u.hide())):(l.show(),o.hide(),!0===i.userPickerEnabled&&(s.enable(),u.show())))};e("#"+i.userSelect,a).change(function(){var r=e(this).find("option:selected").attr("rel");o(r)}).find("option:selected").each(function(){o(e(this).attr("rel"))}),t.find("a.user-popup-trigger").click(function(e){var r=u+"/secure/popups/UserPickerBrowser.jspa?";r+="formName="+i.formName+"&",r+="multiSelect="+i.multiSelect+"&",r+="decorator=popup&",r+="element="+i.fieldId;var t=window.open(r,"UserPicker","status=yes,resizable=yes,top=100,left=100,width=800,height=750,scrollbars=yes");t.opener=self,t.focus(),e.preventDefault()}),t.find("a.group-popup-trigger").click(function(e){var r=u+"/secure/popups/GroupPickerBrowser.jspa?";r+="formName="+i.formName+"&",r+="multiSelect="+i.multiSelect+"&",r+="decorator=popup&",r+="element="+i.fieldId;var t=window.open(r,"GroupPicker","status=yes,resizable=yes,top=100,left=100,width=800,height=750,scrollbars=yes");t.opener=self,t.focus(),e.preventDefault()})})})}();;
;
/* module-key = 'jira.webresources:group-label-lozenge', location = '/includes/jira/admin/group-browser/group-label-lozenge.js' */
define("jira/admin/group-browser/group-label-lozenge",["jquery","jira/skate"],function(e,t){t("group-label-lozenge",{type:t.type.CLASSNAME,attached:function(t){e(t).tooltip({gravity:"w",html:!0})}})});;
;
/* module-key = 'jira.webresources:group-label-lozenge', location = '/includes/jira/admin/group-browser/group-label-lozenge.soy' */
// This file was automatically generated from group-label-lozenge.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }


JIRA.Templates.groupLabelLozenge = function(opt_data, opt_ignored) {
  return '' + aui.lozenges.lozenge({text: opt_data.label.text, title: opt_data.label.title, isSubtle: true, extraClasses: 'group-label-lozenge'});
};
if (goog.DEBUG) {
  JIRA.Templates.groupLabelLozenge.soyTemplateName = 'JIRA.Templates.groupLabelLozenge';
}
;
;
/* module-key = 'jira.webresources:groupbrowser', location = '/includes/jira/admin/group-browser/group-browser.js' */
require(["jquery","jira/admin/group-browser/group-label-lozenge"],function(i){i(function(){i(".operations-list .aui-button[disabled]").tooltip({gravity:"e",html:!1})})});;
;
/* module-key = 'jira.webresources:group-pickers', location = '/includes/jira/field/groupPickerUtil.js' */
define("jira/field/group-picker-util",["jira/ajs/list/item-descriptor","jira/ajs/list/group-descriptor","jquery"],function(e,i,r){var t=function(t,a){var n=[],s=a?JIRA.Templates.GroupPickerUtil.formatResponseWithLabels:JIRA.Templates.GroupPickerUtil.formatResponse;return r(t).each(function(t,a){var u=new i({weight:t,label:a.header});r(a.groups).each(function(){u.addItem(new e({value:this.name,label:this.name,title:this.name,html:s(this),highlighted:!0}))}),n.push(u)}),n};return{formatResponseWithLabels:function(e){return t(e,!0)},formatResponse:function(e,i){return t(e,i)}}}),AJS.namespace("JIRA.GroupPickerUtil",null,require("jira/field/group-picker-util"));;
;
/* module-key = 'jira.webresources:group-pickers', location = '/includes/jira/field/templates/groupPickerUtil.soy' */
// This file was automatically generated from groupPickerUtil.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.GroupPickerUtil.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.GroupPickerUtil == 'undefined') { JIRA.Templates.GroupPickerUtil = {}; }


JIRA.Templates.GroupPickerUtil.formatResponseWithLabels = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.GroupPickerUtil.formatResponse(soy.$$augmentMap(opt_data, {showLabels: true}));
};
if (goog.DEBUG) {
  JIRA.Templates.GroupPickerUtil.formatResponseWithLabels.soyTemplateName = 'JIRA.Templates.GroupPickerUtil.formatResponseWithLabels';
}


JIRA.Templates.GroupPickerUtil.formatResponse = function(opt_data, opt_ignored) {
  var output = '<div class="group-suggestion-item"><span class="group-suggestion-item__name">' + soy.$$filterNoAutoescape(opt_data.html) + '</span>';
  if (opt_data.showLabels) {
    output += '<span class="group-suggestion-item__labels group-labels-lozenges">';
    var labelList13 = opt_data.labels;
    var labelListLen13 = labelList13.length;
    for (var labelIndex13 = 0; labelIndex13 < labelListLen13; labelIndex13++) {
      var labelData13 = labelList13[labelIndex13];
      output += JIRA.Templates.groupLabelLozenge({label: labelData13}) + ' ';
    }
    output += '</span>';
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.GroupPickerUtil.formatResponse.soyTemplateName = 'JIRA.Templates.GroupPickerUtil.formatResponse';
}
;
;
/* module-key = 'jira.webresources:group-pickers', location = '/includes/jira/field/initMultiGroupPickers.js' */
define("jira/field/init-multi-group-pickers",["jquery","wrm/context-path","jira/ajs/select/multi-select","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/field/group-picker-util"],function(e,t,i,r,a,s,n){"use strict";function u(t){t.find(".js-default-multi-group-picker").each(function(){var t=e(this),r=!0===t.data("show-labels"),a=t.data("user-name");new i({element:this,itemAttrDisplayed:"label",showDropdownButton:!1,ajaxOptions:{data:function(e){return{userName:a,query:e,exclude:t.val()}},url:l+"/rest/api/2/groups/picker",query:!0,formatResponse:r?n.formatResponseWithLabels:n.formatResponse}})})}var l=t();s.bind(a.NEW_CONTENT_ADDED,function(e,t,i){i!==r.panelRefreshed&&u(t)})});;
;
/* module-key = 'jira.webresources:group-pickers', location = '/includes/jira/field/initSingleGroupPickers.js' */
define("jira/field/init-single-group-pickers",["jira/ajs/select/single-select","jquery","wrm/context-path","jira/ajs/list/item-descriptor","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/field/group-picker-util"],function(e,t,i,a,n,r,s,l){"use strict";function u(i){i.find(".js-default-single-group-picker").each(function(){var i=t(this),n=i.find("option[data-empty]"),r=!0===i.data("show-labels"),s=i.data("user-name");new e({element:this,itemAttrDisplayed:"label",revertOnInvalid:!0,ajaxOptions:{data:function(e){return{userName:s,query:e,exclude:i.val()}},url:o+"/rest/api/2/groups/picker",query:!0,formatResponse:function(e){var t=l.formatResponse(e,r);return n.length&&""!==i.val()&&t.unshift(new a({value:"",label:n.text(),highlighted:!0})),t}}})})}var o=i();s.bind(r.NEW_CONTENT_ADDED,function(e,t,i){i!==n.panelRefreshed&&u(t)})});;
;
/* module-key = 'jira.webresources:group-pickers', location = '/includes/jira/field/init/init-group-pickers-webresource.js' */
require("jira/field/init-multi-group-pickers"),require("jira/field/init-single-group-pickers");;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/userPickerUtil.js' */
define("jira/field/user-picker-util",["jira/ajs/list/item-descriptor","jira/ajs/list/group-descriptor","jquery"],function(e,i,r){return{formatResponse:function(t){var a=[];return r(t).each(function(t,l){var s=new i({weight:t,label:l.footer});r(l.users).each(function(){s.addItem(new e({value:this.name,label:this.displayName,html:this.html,icon:this.avatarUrl,allowDuplicate:!1,highlighted:!0}))}),a.push(s)}),a}}}),AJS.namespace("JIRA.UserPickerUtil",null,require("jira/field/user-picker-util"));;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/initSingleUserPickers.js' */
define("jira/field/init-single-user-pickers",["jquery","wrm/context-path","jira/ajs/select/single-select","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/field/user-picker-util","jira/util/formatter"],function(e,t,i,r,s,a,n,u){"use strict";function o(t){e(".js-default-user-picker",t).each(function(){var t=e(this);if(!t.data("aui-ss")){var r={showAvatar:!0},s=t.data("inputValue");new i({element:t,submitInputVal:!0,showDropdownButton:!!t.data("show-dropdown-button"),errorMessage:u.format("There is no user \'\'{0}\'\'.","'{0}'"),ajaxOptions:{url:l+"/rest/api/1.0/users/picker",query:!0,data:r,formatResponse:n.formatResponse},inputText:s})}})}var l=t();a.bind(s.NEW_CONTENT_ADDED,function(e,t,i){i!==r.panelRefreshed&&o(t)})});;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/NoBrowseUserNamePicker.js' */
define("jira/field/no-browser-user-name-picker",["require"],function(e){"use strict";var t=e("jquery"),r=e("jira/ajs/list/item-descriptor"),i=e("jira/ajs/select/multi-select"),a=e("jira/util/formatter"),n=e("wrm/context-path"),s=n();return i.extend({_getDefaultOptions:function(){return t.extend(!0,this._super(),{errorMessage:"The requested user does not exist.",showDropdownButton:!1,removeOnUnSelect:!0,itemAttrDisplayed:"label"})},_handleCharacterInput:function(){},_setSuggestions:function(){},_handleServerError:function(e){404===e.status?this.showErrorMessage():this._super()},_deactivate:function(){this.validateAndAdd()},validateAndAdd:function(){var e=this;""===t.trim(this.$field.val())?this.hideErrorMessage():t.ajax({url:s+"/rest/api/2/user",data:{username:t.trim(e.getQueryVal())},success:function(t){e.hideErrorMessage(),e.$field.val(""),e.addItem(new r({label:t.displayName,value:t.name}))},error:function(){e.showErrorMessage()}})},_handleSpace:function(){this.validate()},_handleServerSuggestions:function(){this.hideErrorMessage(),this.handleFreeInput()},handleFreeInput:function(){var e=t.trim(this.$field.val());""!==e&&(this.addItem({value:e,label:e}),this.model.$element.trigger("change")),this.$field.val("")},keys:{Return:function(e){e.preventDefault(),this.validateAndAdd()},Spacebar:function(e){e.preventDefault(),this.validateAndAdd()}}})}),AJS.namespace("AJS.NoBrowseUserNamePicker",null,require("jira/field/no-browser-user-name-picker"));;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/initMultiUserPickers.js' */
define("jira/field/init-multi-user-pickers",["jquery","wrm/context-path","jira/ajs/select/multi-select","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/field/no-browser-user-name-picker","jira/field/user-picker-util"],function(e,t,r,i,n,s,a,u){function l(t){t.find(".js-default-multi-user-picker").each(function(){var t=e(this);AJS.params.currentUserCanBrowseUsers?new r({element:this,itemAttrDisplayed:"label",showDropdownButton:!1,removeOnUnSelect:!0,submitInputVal:!0,ajaxOptions:{url:o+"/rest/api/1.0/users/picker",query:!0,data:function(e){return{showAvatar:!0,query:e,exclude:t.val()}},formatResponse:u.formatResponse}}):new a({element:this})})}var o=t();s.bind(n.NEW_CONTENT_ADDED,function(e,t,r){r!==i.panelRefreshed&&l(t)})});;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/init/init-user-pickers-webresource.js' */
require("jira/field/init-multi-user-pickers"),require("jira/field/init-single-user-pickers");;
;
/* module-key = 'jira.webresources:ie-imitation-placeholder', location = '/includes/jira/field/IEImitationPlaceholder.js' */
require(["jquery"],function(e){e.fn.ieImitationPlaceholder=function(){if(e.browser.msie){var a=function(){var a=e(this);""===a.val()&&(a.val(a.attr("placeholder")),a.addClass("input-placeholder"))},l=function(){var a=e(this);a.val()===a.attr("placeholder")&&(a.val(""),a.removeClass("input-placeholder"))},i=function(){t.each(l)},r=this,t=r.find("[placeholder]");t.focus(l),t.blur(a),r.submit(i),t.each(a)}}});;
;
/* module-key = 'jira.webresources:jira-project-issuetype-fields', location = '/includes/jira/field/ProjectIssueTypeSelect.js' */
define("jira/field/project-issue-type-select",["jira/lib/class"],function(e){return e.extend({init:function(e){var s,t=this;this.$project=e.project,this.issueTypeSelect=e.issueTypeSelect,this.$projectIssueTypesSchemes=e.projectIssueTypesSchemes,this.$issueTypeSchemeIssueDefaults=e.issueTypeSchemeIssueDefaults,this.projectIssueTypeSchemes=JSON.parse(this.$projectIssueTypesSchemes.html()),this.issueTypesSchemeDefaults=JSON.parse(this.$issueTypeSchemeIssueDefaults.html()||"[]"),t.$project.length>0&&(s=t.$project.val(),t.setIssueTypeScheme(t.getIssueTypeSchemeForProject(s)),this.$project.change(function(){var e=t.$project.val();t.setIssueTypeScheme(t.getIssueTypeSchemeForProject(e))}))},getIssueTypeSchemeForProject:function(e){return this.projectIssueTypeSchemes[e]},getDefaultIssueTypeForScheme:function(e){return this.issueTypesSchemeDefaults[e]},setIssueTypeScheme:function(e){var s=this.issueTypeSelect.model.getValue();this.issueTypeSelect.model.setFilterGroup(e),this.issueTypeSelect.model.setSelected(s,!1)||this.setDefaultIssueType(e),this.issueTypeSelect.model.$element.data("project",this.$project.val())},setDefaultIssueType:function(e){var s=this.getDefaultIssueTypeForScheme(e),t=this.issueTypeSelect.model.getDescriptor(s);t||(t=this.issueTypeSelect.model.getAllDescriptors()[0]),this.issueTypeSelect.setSelection(t,!1)}})}),AJS.namespace("JIRA.ProjectIssueTypeSelect",null,require("jira/field/project-issue-type-select"));;
;
/* module-key = 'jira.webresources:jira-project-issuetype-fields', location = '/includes/jira/field/initProjectIssueTypeSelect.js' */
define("jira/field/init-project-issue-type-select",["jira/ajs/select/suggestion-collection-model","jquery","jira/ajs/select/single-select","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/field/project-issue-type-select"],function(e,t,i,s,n,l,r){function c(s){var n=s||t("body");n.find(".issuetype-field").each(function(s){var l=n.find(".project-field, .project-field-readonly"),c=t(this),d=n.find("#"+c.attr("id")+"-projects"),o=n.find("#"+c.attr("id")+"-defaults"),a=new i({element:c,revertOnInvalid:!0,model:e});a.model.remove(""),l.length>0&&new r({project:l.eq(s),issueTypeSelect:a,projectIssueTypesSchemes:d,issueTypeSchemeIssueDefaults:o})})}l.bind(n.NEW_CONTENT_ADDED,function(e,t,i){i!==s.panelRefreshed&&c(t)})});;
;
/* module-key = 'jira.webresources:jira-project-issuetype-fields', location = '/includes/jira/field/initProjectPickers.js' */
define("jira/field/init-project-pickers",["jira/ajs/select/scrollable-single-select","jira/ajs/select/suggestion-collection-model","jira/util/events/reasons","jira/util/events/types","jira/util/events"],function(e,i,n,t,l){function s(n){n.find(".project-field").each(function(){new e({element:this,revertOnInvalid:!0,pageSize:50,pagingThreshold:100,model:i})})}l.bind(t.NEW_CONTENT_ADDED,function(e,i,t){t!==n.panelRefreshed&&s(i)})});;
;
/* module-key = 'jira.webresources:jira-project-issuetype-fields', location = '/includes/jira/field/init/init-jira-project-issuetype-fields-webresource.js' */
require("jira/field/init-project-issue-type-select"),require("jira/field/init-project-pickers");;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/field-templates.soy' */
// This file was automatically generated from field-templates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Fields.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Fields == 'undefined') { JIRA.Templates.Fields = {}; }


JIRA.Templates.Fields.username = function(opt_data, opt_ignored) {
  return '' + ((opt_data.escape) ? soy.$$escapeHtml(opt_data.displayName) : soy.$$filterNoAutoescape(opt_data.displayName));
};
if (goog.DEBUG) {
  JIRA.Templates.Fields.username.soyTemplateName = 'JIRA.Templates.Fields.username';
}


JIRA.Templates.Fields.recipientUsername = function(opt_data, opt_ignored) {
  return '<li data-username="' + soy.$$escapeHtml(opt_data.username) + '" title=' + soy.$$escapeHtml(opt_data.username) + '><span><span class="user-hover" rel="' + soy.$$escapeHtml(opt_data.username) + '"><img alt="" src="' + soy.$$escapeHtml(opt_data.icon) + '" title="' + JIRA.Templates.Fields.username(opt_data) + '"><span title="' + JIRA.Templates.Fields.username(opt_data) + '">' + JIRA.Templates.Fields.username(opt_data) + '</span></span>' + ((! opt_data.readOnly) ? '<button type="button" class="remove-recipient item-delete"><span class="icon-default aui-icon aui-icon-small aui-iconfont-delete">' + soy.$$escapeHtml(AJS.format("Remove watcher: {0}",opt_data.username)) + '</span></button>' : '') + '</span></li>';
};
if (goog.DEBUG) {
  JIRA.Templates.Fields.recipientUsername.soyTemplateName = 'JIRA.Templates.Fields.recipientUsername';
}


JIRA.Templates.Fields.recipientEmail = function(opt_data, opt_ignored) {
  return '<li data-email="' + soy.$$escapeHtml(opt_data.email) + '" title=' + soy.$$escapeHtml(opt_data.email) + '><span><img src="' + soy.$$escapeHtml(opt_data.icon) + '" title="' + soy.$$escapeHtml(opt_data.email) + '"><span title="' + soy.$$escapeHtml(opt_data.email) + '">' + soy.$$escapeHtml(opt_data.email) + '</span><span class="remove-recipient item-delete"><span class="icon-default aui-icon aui-icon-small aui-iconfont-delete"></span></span></span></li>';
};
if (goog.DEBUG) {
  JIRA.Templates.Fields.recipientEmail.soyTemplateName = 'JIRA.Templates.Fields.recipientEmail';
}
;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/LabelPicker.js' */
define("jira/field/label-picker",["jira/util/formatter","jira/ajs/select/multi-select","jira/ajs/list/group-descriptor","jira/ajs/list/item-descriptor","wrm/context-path","jquery"],function(e,t,i,s,a,l){var n=a();return t.extend({_getDefaultOptions:function(){return l.extend(!0,this._super(),{ajaxOptions:{url:n+"/includes/js/ajs/layer/labeldata.js",query:!0,formatResponse:this._formatResponse},removeDuplicates:!0,removeOnUnSelect:!0,userEnteredOptionsMsg:"New Label"})},isValidItem:function(e){return!/\s/.test(e)},_handleServerSuggestions:function(e){e&&e.token&&l.trim(this.$field.val())!==e.token||this._super(e)},_handleSpace:function(){""!==l.trim(this.$field.val())&&this.handleFreeInput()&&this.hideSuggestions()},keys:{Spacebar:function(e){this._handleSpace(),e.preventDefault()}},_formatResponse:function(t){var a=new i({label:"Suggestions",type:"optgroup",styleClass:"labels-suggested"});return t&&t.suggestions&&l.each(t.suggestions,function(){a.addItem(new s({value:this.label,label:this.label,html:this.html,highlighted:!0}))}),[a]},handleFreeInput:function(){var e=l.trim(this.$field.val()).match(/\S+/g);if(e){for(var t,i=0;t=e[i];i++)this.addItem({value:t,label:t});this.model.$element.trigger("change")}this.$field.val("")}})}),AJS.namespace("AJS.LabelPicker",null,require("jira/field/label-picker")),AJS.namespace("JIRA.LabelPicker",null,require("jira/field/label-picker"));;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/LabelPickerFactory.js' */
define("jira/field/label-picker-factory",["jira/field/label-picker","jira/data/parse-options-from-fieldset","wrm/context-path","jquery","exports"],function(e,t,i,a,r){"use strict";r.createPicker=function(r,s){var d=t(r),l=a("#"+d.id,s),c=d.issueId,o={};/customfield_\d/.test(d.id)&&(o.customFieldId=parseInt(d.id.replace("customfield_",""),10)),new e({element:l,ajaxOptions:{url:i()+"/rest/api/1.0/labels"+(c?"/"+c:"")+"/suggest",data:o}})}});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/MultiUserListPicker.Item.js' */
define("jira/field/multi-user-list-picker/item",["jira/util/data/meta","jira/util/strings","jira/ajs/control","jquery"],function(e,t,i,n){"use strict";return i.extend({init:function(e){this._setOptions(e),this.$lozenge=this._render("item"),this.$removeButton=this.$lozenge.find(".remove-recipient"),this._assignEvents("instance",this),this._assignEvents("lozenge",this.$lozenge),this._assignEvents("removeButton",this.$removeButton),this.$lozenge.prependTo(this.options.container)},_getDefaultOptions:function(){return{label:null,title:null,container:null,focusClass:"focused"}},_renders:{item:function(){var i,s=this.options.descriptor;return!0!==s.noExactMatch()?(i={escape:!1,username:s.value(),icon:s.icon(),displayName:t.escapeHtml(s.label())},n(JIRA.Templates.Fields.recipientUsername(i))):(i={email:s.value(),icon:e.get("default-avatar-url")},n(JIRA.Templates.Fields.recipientEmail(i)))}},_events:{instance:{remove:function(){this.$lozenge.remove()}},removeButton:{click:function(e){e.stopPropagation(),this.trigger("remove")}}}})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/MultiUserListPicker.js' */
define("jira/field/multi-user-list-picker",["jira/util/formatter","jira/field/multi-user-list-picker/item","jira/ajs/select/suggestions/user-list-suggest-handler","jira/ajs/select/multi-select","jira/ajs/list/item-descriptor","jira/ajs/list/group-descriptor","jira/ajs/group","wrm/context-path","jquery"],function(e,t,i,r,s,n,a,l,u){"use strict";var o=l();return r.extend({init:function(r){function l(e){var t=[];return u(e).each(function(e,i){var r=new n({weight:e,label:i.footer});u(i.users).each(function(){r.addItem(new s({value:this.name,label:this.displayName,html:this.html,icon:this.avatarUrl,allowDuplicate:!1,highlighted:!0}))}),t.push(r)}),t}u.extend(r,{itemAttrDisplayed:"label",userEnteredOptionsMsg:"Email address",showDropdownButton:!1,removeOnUnSelect:!0,ajaxOptions:{url:o+"/rest/api/1.0/users/picker",query:!0,data:{showAvatar:!0},formatResponse:l},suggestionsHandler:i,itemGroup:new a,itemBuilder:function(e){return new t({descriptor:e,container:this.$selectedItemsContainer})}}),this._super(r)},_createFurniture:function(e){this._super(e),this.options.description&&this._render("description",this.options.description).insertAfter(this.$field)},updateItemsIndent:u.noop,_renders:{selectedItemsWrapper:function(){return u('<div class="recipients" />')},selectedItemsContainer:function(){return u("<ol />")},description:function(e){return u("<div />").addClass("description").text(e)}}})}),AJS.namespace("JIRA.MultiUserListPicker",null,require("jira/field/multi-user-list-picker")),AJS.namespace("JIRA.MultiUserListPicker.Item",null,require("jira/field/multi-user-list-picker/item"));;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initCascadingSelects.js' */
define("jira/field/init-cascading-selects",["jquery","jira/util/events/reasons","jira/util/events/types","jira/util/events"],function(e,i,n,t){function a(i){e(i||document.body).find("div.aui-field-cascadingselect").add("tr.aui-field-cascadingselect").add("td.aui-field-cascadingselect").each(function(){function i(){var i,n=t.find("option:selected").attr("class");n!==a&&(i=e("<span />").insertAfter(d),d.detach(),d.find("option").each(function(e,i){i.parentNode.removeChild(this)}),d.insertAfter(i),i.remove(),c.filter("."+t.find("option:selected").attr("class")).appendTo(d),s.hasClass(t.find("option:selected").attr("class"))?d.val(s.val()):d.val(d.find("option:first").val()),a=n)}var n=e(this),t=n.find(".cascadingselect-parent"),a=(t.find("option"),""),d=n.find(".cascadingselect-child"),c=d.find("option"),s=d.find(":selected");t.bind("cascadingSelectChanged",i).change(function(){e(this).trigger("cascadingSelectChanged")}).trigger("cascadingSelectChanged")})}t.bind(n.NEW_CONTENT_ADDED,function(e,n,t){t!==i.panelRefreshed&&a(n)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/ComponentPicker.js' */
define("jira/field/component-picker",["jira/util/formatter","jira/util/events","jira/ajs/select/suggestions/only-new-items-suggest-handler","jira/ajs/select/multi-select","underscore","jquery"],function(e,t,n,s,i,r){return s.extend({init:function(e){this._super(e),this.suggestionsHandler=new n(this.options,this.model)},_getDefaultOptions:function(t){var n=!1;return t&&t.element&&(n=r(t.element).data("create-permission")),n?r.extend(!0,this._super(),{userEnteredOptionsMsg:"New Component"}):this._super(t)},_selectionHandler:function(e,n){var s=this.model.getDisplayableSelectedDescriptors().concat(this.model.getDisplayableUnSelectedDescriptors()),r=e.data("descriptor");i.find(s,function(e){return e.label()===r.label()})||(r.properties.value="nv_"+r.value(),t.trigger("Issue.Component.new.selected",[r.value()])),this._super(e,n)}})}),AJS.namespace("JIRA.ComponentPicker",null,require("jira/field/component-picker"));;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initComponentPickers.js' */
define("jira/field/init-component-pickers",["jira/field/component-picker","jira/util/formatter","jira/util/events","jira/util/events/types","jira/util/events/reasons","jquery"],function(e,n,r,t,i,o){function l(r){new e({element:r,itemAttrDisplayed:"label",errorMessage:"{0} is not a valid component.",maxInlineResultsDisplayed:15,expandAllResults:!0})}function a(e){var n=o(e);return n.is("select")?n:n.find("select")}function c(e,n){n=n||s.join(", "),o(n,e).each(function(){var e=a(this);e.length&&l(e)})}var s=["div.aui-field-componentspicker.frother-control-renderer","td.aui-field-componentspicker.frother-control-renderer","tr.aui-field-componentspicker.frother-control-renderer"];r.bind(t.NEW_CONTENT_ADDED,function(e,n,r){r!==i.panelRefreshed&&c(n)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initMultiselectPickers.js' */
define("jira/field/init-multi-select-pickers",["jquery","jira/ajs/select/multi-select","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/util/formatter"],function(e,t,i,n,l,r){function s(e){new t({element:e,itemAttrDisplayed:"label",errorMessage:"{0} is not a valid value.",maxInlineResultsDisplayed:15,submitInputVal:!0,expandAllResults:!0})}function a(t){var i=e(t);return i.is("select")?i:i.find("select")}function u(t,i){i=i||c.join(", "),e(i,t).each(function(){var e=a(this);e.length&&s(e)})}var c=["div.aui-field-multiselectpicker.frother-control-renderer"];l.bind(n.NEW_CONTENT_ADDED,function(e,t,n){n!==i.panelRefreshed&&u(t)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initDatePickers.js' */
define("jira/field/init-date-pickers",["jquery","jira/data/parse-options-from-fieldset","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/libs/calendar"],function(e,i,t,d,a,n){"use strict";function r(t){e(t||document.body).find("div.aui-field-datepicker").add("tr.aui-field-datepicker").add("td.aui-field-datepicker").each(function(){function d(){r.prop("disabled",s.is(":checked"))}var a=e(this),r=a.find("input:text"),s=a.find("#useCurrentDate"),c=i(a.find("fieldset.datepicker-params"));c.context=t,n.setup(c),s.length&&(d(),s.click(d))})}a.bind(d.NEW_CONTENT_ADDED,function(e,i,d){d!==t.panelRefreshed&&r(i)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initLegacyGroupPickers.js' */
define("jira/field/init-legacy-group-pickers",["jquery","jira/util/events/reasons","jira/util/events/types","jira/util/events"],function(e,i,r,t){function n(i){e(i||document.body).find("div.aui-field-grouppicker").add("tr.aui-field-grouppicker").add("td.aui-field-grouppicker").each(function(){function i(e){e.preventDefault(),window.open(n,"GroupPicker","status=yes,resizable=yes,top=100,left=100,width=800,height=750,scrollbars=yes")}var r=e(this),t=r.find("a.grouppicker-trigger"),n=t.attr("href");t.click(i)})}t.bind(r.NEW_CONTENT_ADDED,function(e,r,t){t!==i.panelRefreshed&&n(r)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initIssuePickers.js' */
define("jira/field/init-issue-pickers",["jira/field/issue-picker","jira/util/events","jira/util/events/types","jira/util/events/reasons","jquery","jira/util/formatter"],function(e,i,n,t,s,r){function u(i){s(i||document.body).find(".aui-field-issuepicker").each(function(){new e({element:s(this),userEnteredOptionsMsg:"Enter issue key",uppercaseUserEnteredOnSelect:!0})})}i.bind(n.NEW_CONTENT_ADDED,function(e,i,n){n!==t.panelRefreshed&&u(i)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initLabelPickers.js' */
define("jira/field/init-label-pickers",["jira/field/label-picker-factory","jira/util/events","jira/util/events/types","jira/util/events/reasons","jquery"],function(e,i,n,r,a){function t(e){var i=a(e);return i.is(c)?i:i.find(c)}function l(i,n){n=n||".aui-field-labelpicker",a(n,i).each(function(){var n=t(this);n.length>0&&e.createPicker(n,i)})}var c="fieldset.labelpicker-params";i.bind(n.NEW_CONTENT_ADDED,function(e,i,n){n!==r.panelRefreshed&&l(i)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/VersionPicker.js' */
define("jira/field/version-picker",["jira/util/formatter","jira/util/events","jira/ajs/select/suggestions/only-new-items-suggest-handler","jira/ajs/select/multi-select","underscore","jquery"],function(e,t,s,i,n,r){return i.extend({init:function(e){this._super(e),this.suggestionsHandler=new s(this.options,this.model)},_getDefaultOptions:function(t){var s=!1;return t&&t.element&&(s=r(t.element).data("create-permission")),s?r.extend(!0,this._super(),{userEnteredOptionsMsg:"New Version"}):this._super(t)},_selectionHandler:function(e,s){var i=this.model.getDisplayableSelectedDescriptors().concat(this.model.getDisplayableUnSelectedDescriptors()),r=e.data("descriptor");n.find(i,function(e){return e.label()===r.label()})||(r.properties.value="nv_"+r.value(),t.trigger("Issue.Version.new.selected",[r.value()])),this._super(e,s)}})}),AJS.namespace("JIRA.VersionPicker",null,require("jira/field/version-picker"));;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initVersionPickers.js' */
define("jira/field/init-version-pickers",["jira/field/version-picker","jira/util/formatter","jira/util/events","jira/util/events/types","jira/util/events/reasons","jquery"],function(e,i,n,r,t,s){function l(n){new e({element:n,itemAttrDisplayed:"label",removeOnUnSelect:!1,submitInputVal:!0,errorMessage:"{0} is not a valid version.",maxInlineResultsDisplayed:15,expandAllResults:!0})}function a(e){var i=s(e);return i.is("select")?i:i.find("select")}function o(e,i){i=i||".aui-field-versionspicker.frother-control-renderer",s(i,e).each(function(){var e=a(this);e.length&&l(e)})}n.bind(r.NEW_CONTENT_ADDED,function(e,i,n){n!==t.panelRefreshed&&o(i)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initCommentControls.js' */
define("jira/field/init-comment-controls",["jira/skate","jira/ajs/select/security-level-select","jira/wikipreview/wiki-preview"],function(e,i,t){e("jira-wikifield",{type:e.type.CLASSNAME,created:function(e){var i={fieldId:e.getAttribute("field-id"),trigger:e.querySelector(".wiki-preview").id,issueKey:e.getAttribute("issue-key"),rendererType:e.getAttribute("renderer-type")};t(i,e).init()}}),e("security-level",{type:e.type.CLASSNAME,created:function(e){var t=e.querySelector("#commentLevel");t&&new i(t)}})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initLogWorkControls.js' */
define("jira/field/init-log-work-controls",["jira/util/events","jira/util/events/types","jira/util/events/reasons","jquery"],function(e,t,a,i){function n(e,t){var a=i(e).find("#worklog-logworkcontainer"),n=i(e).find("#worklog-timetrackingcontainer"),d=i(e).find("#log-work-activate");t?(a.removeClass("hidden"),n.addClass("hidden"),d.prop("checked",!0)):(a.addClass("hidden"),n.removeClass("hidden"),d.prop("checked",!1))}function d(e){i("#log-work-adjust-estimate-new-value, #log-work-adjust-estimate-manual-value",e).attr("disabled","disabled"),i("#log-work-adjust-estimate-"+i("input[name=worklog_adjustEstimate]:checked,input[name=adjustEstimate]:checked",e).val()+"-value",e).removeAttr("disabled"),i("input[name=worklog_adjustEstimate],input[name=adjustEstimate]",e).change(function(){i("#log-work-adjust-estimate-new-value,#log-work-adjust-estimate-manual-value",e).attr("disabled","disabled"),i("#log-work-adjust-estimate-"+i(this).val()+"-value",e).removeAttr("disabled")}),i("#delete-log-work-adjust-estimate-new-value").change(function(){i("#delete-log-work-adjust-estimate-new").prop("checked",!0)}),i("#delete-log-work-adjust-estimate-manual-value").change(function(){i("#delete-log-work-adjust-estimate-manual").prop("checked",!0)}),i(e).find("#log-work-activate").change(function(){n(e,i(this).is(":checked"))})}e.bind(t.VALIDATE_TIMETRACKING,function(e,t){n(t,!0)}),e.bind(t.NEW_CONTENT_ADDED,function(e,t,i){i!==a.panelRefreshed&&d(t)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initPriorityPickers.js' */
define("jira/field/init-priority-pickers",["jira/ajs/select/single-select","jira/util/events/reasons","jira/util/events/types","jira/util/events"],function(e,i,n,t){function r(i){i.find("select#priority").each(function(i,n){new e({element:n,revertOnInvalid:!0})})}t.bind(n.NEW_CONTENT_ADDED,function(e,n,t){t!==i.panelRefreshed&&r(n)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initInlineAttach.js' */
define("jira/field/init-inline-attach",["jira/util/events","jira/util/events/types","jira/util/events/reasons","jquery","jira/jquery/plugins/attachment/inline-attach"],function(i,n,t){"use strict";function e(i){i.find("input[type=file]:not('.ignore-inline-attach')").inlineAttach()}i.bind(n.NEW_CONTENT_ADDED,function(i,n,a){a!==t.panelRefreshed&&e(n)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/init/init-jira-fields-webresource.js' */
require("jira/field/init-cascading-selects"),require("jira/field/init-component-pickers"),require("jira/field/init-multi-select-pickers"),require("jira/field/init-date-pickers"),require("jira/field/init-legacy-group-pickers"),require("jira/field/init-issue-pickers"),require("jira/field/init-label-pickers"),require("jira/field/init-version-pickers"),require("jira/field/init-comment-controls"),require("jira/field/init-log-work-controls"),require("jira/field/init-priority-pickers"),require("jira/field/init-inline-attach");;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form-templates', location = 'soy/quickform.soy' */
// This file was automatically generated from quickform.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.QuickForm.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.QuickForm == 'undefined') { JIRA.Templates.QuickForm = {}; }


JIRA.Templates.QuickForm.field = function(opt_data, opt_ignored) {
  return '' + soy.$$filterNoAutoescape(opt_data.editHtml);
};
if (goog.DEBUG) {
  JIRA.Templates.QuickForm.field.soyTemplateName = 'JIRA.Templates.QuickForm.field';
}


JIRA.Templates.QuickForm.fieldPicker = function(opt_data, opt_ignored) {
  return '<div class="qf-picker"><div class="qf-picker-header"><dl><dt>' + soy.$$escapeHtml("Show Fields:") + '</dt>' + ((opt_data.isConfigurable) ? '<dd><a class="qf-unconfigurable" href="#">' + soy.$$escapeHtml("All") + '</a></dd><dd>' + soy.$$escapeHtml("Custom") + '</dd>' : '<dd>' + soy.$$escapeHtml("All") + '</dd><dd><a class="qf-configurable" href="#">' + soy.$$escapeHtml("Custom") + '</a></dd>') + '</dl></div><div class="qf-picker-content ' + ((! opt_data.isConfigurable) ? 'qf-picker-unconfigurable' : '') + '"></div><div class="qf-picker-footer"></div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.QuickForm.fieldPicker.soyTemplateName = 'JIRA.Templates.QuickForm.fieldPicker';
}


JIRA.Templates.QuickForm.configurablePickerButton = function(opt_data, opt_ignored) {
  return '<a title="' + soy.$$escapeHtml(opt_data.label) + '" data-field-id="' + soy.$$escapeHtml(opt_data.fieldId) + '" class="qf-picker-button' + ((opt_data.isActive) ? ' qf-active' : '') + '" href="#">' + soy.$$escapeHtml(opt_data.label) + ((opt_data.required) ? '<span class="aui-icon icon-required"></span>' : '') + '</a>';
};
if (goog.DEBUG) {
  JIRA.Templates.QuickForm.configurablePickerButton.soyTemplateName = 'JIRA.Templates.QuickForm.configurablePickerButton';
}


JIRA.Templates.QuickForm.unconfigurablePickerButton = function(opt_data, opt_ignored) {
  return '<span title="' + soy.$$escapeHtml(opt_data.label) + '" data-field-id="' + soy.$$escapeHtml(opt_data.fieldId) + '" class="qf-picker-button' + ((opt_data.isActive) ? ' qf-active' : '') + '" href="#">' + soy.$$escapeHtml(opt_data.label) + ((opt_data.required) ? '<span class="aui-icon icon-required"></span>' : '') + '</span>';
};
if (goog.DEBUG) {
  JIRA.Templates.QuickForm.unconfigurablePickerButton.soyTemplateName = 'JIRA.Templates.QuickForm.unconfigurablePickerButton';
}


JIRA.Templates.QuickForm.errorMessage = function(opt_data, opt_ignored) {
  return '' + aui.message.error({closeable: 'true', content: opt_data.message});
};
if (goog.DEBUG) {
  JIRA.Templates.QuickForm.errorMessage.soyTemplateName = 'JIRA.Templates.QuickForm.errorMessage';
}
;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form-templates', location = 'soy/issue.soy' */
// This file was automatically generated from issue.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Issue.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Issue == 'undefined') { JIRA.Templates.Issue = {}; }


JIRA.Templates.Issue.editIssueError = function(opt_data, opt_ignored) {
  return '<h2>' + soy.$$escapeHtml("Edit Issue") + '</h2><div class="form-body">' + soy.$$filterNoAutoescape(opt_data.errorHtml) + '</div>';
};
if (goog.DEBUG) {
  JIRA.Templates.Issue.editIssueError.soyTemplateName = 'JIRA.Templates.Issue.editIssueError';
}


JIRA.Templates.Issue.editIssueForm = function(opt_data, opt_ignored) {
  return '<form action="#" name="jiraform" id="issue-quickedit" class="aui"><h2>' + ((opt_data.showFieldConfigurationToolBar) ? JIRA.Templates.Issue.fieldConfigurationToolbar(null) : '') + soy.$$filterNoAutoescape(opt_data.title) + '</h2><div class="form-body"><input type="hidden" name="id" value="' + soy.$$escapeHtml(opt_data.issueId) + '" /><input type="hidden" name="atl_token" value="' + soy.$$escapeHtml(opt_data.atlToken) + '" /><input type="hidden" name="formToken" value="' + soy.$$escapeHtml(opt_data.formToken) + '" /><div class="content">' + ((opt_data.fieldsHtml) ? soy.$$filterNoAutoescape(opt_data.fieldsHtml) : '') + ((opt_data.commentField) ? soy.$$filterNoAutoescape(opt_data.commentField.editHtml) : '') + ((opt_data.additionalCommentFieldsHtml) ? soy.$$filterNoAutoescape(opt_data.additionalCommentFieldsHtml) : '') + '<!-- fields inserted here via javascript --></div></div><div class="buttons-container form-footer"><div class="buttons"><input accesskey="' + soy.$$escapeHtml("s") + '" title="' + soy.$$escapeHtml(AJS.format("Press {1}+{0} to submit this form","s",opt_data.modifierKey)) + '" class="button" id="edit-issue-submit" name="Edit" type="submit" value="' + soy.$$escapeHtml("Update") + '" /><a href="#" accesskey="' + soy.$$escapeHtml("`") + '" title="' + soy.$$escapeHtml(AJS.format("Press {1}+{0} to cancel","`",opt_data.modifierKey)) + '" class="cancel">' + soy.$$escapeHtml("Cancel") + '</a></div></div></form>';
};
if (goog.DEBUG) {
  JIRA.Templates.Issue.editIssueForm.soyTemplateName = 'JIRA.Templates.Issue.editIssueForm';
}


JIRA.Templates.Issue.fieldConfigurationToolbar = function(opt_data, opt_ignored) {
  return '' + aui.toolbar2.toolbar2({extraClasses: 'qf-form-operations', content: '' + aui.toolbar2.item({item: 'secondary', content: '' + aui.buttons.button({text: ' ' + soy.$$escapeHtml("Configure Fields"), id: 'qf-field-picker-trigger', extraClasses: 'toolbar-trigger', iconText: "Configure Fields", iconType: 'aui', iconClass: 'aui-icon-small aui-iconfont-configure'})})});
};
if (goog.DEBUG) {
  JIRA.Templates.Issue.fieldConfigurationToolbar.soyTemplateName = 'JIRA.Templates.Issue.fieldConfigurationToolbar';
}


JIRA.Templates.Issue.issueFields = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.hasTabs) {
    output += '<div class="aui-tabs horizontal-tabs" id="horizontal"><ul class="tabs-menu">';
    var tabList68 = opt_data.tabs;
    var tabListLen68 = tabList68.length;
    for (var tabIndex68 = 0; tabIndex68 < tabListLen68; tabIndex68++) {
      var tabData68 = tabList68[tabIndex68];
      output += (tabData68) ? '<li class="menu-item ' + ((tabData68.isFirst) ? 'first active-tab' : '') + ' "><a href="#tab-' + soy.$$escapeHtml(tabData68.position) + '" ><strong>' + soy.$$escapeHtml(tabData68.label) + '</strong></a></li>' : '';
    }
    output += '</ul>';
    var tabList82 = opt_data.tabs;
    var tabListLen82 = tabList82.length;
    for (var tabIndex82 = 0; tabIndex82 < tabListLen82; tabIndex82++) {
      var tabData82 = tabList82[tabIndex82];
      if (tabData82) {
        output += '<div class="tabs-pane ' + ((tabData82.isFirst) ? 'active-pane' : '') + '" id="tab-' + soy.$$escapeHtml(tabData82.position) + '">';
        var fieldList92 = tabData82.fields;
        var fieldListLen92 = fieldList92.length;
        for (var fieldIndex92 = 0; fieldIndex92 < fieldListLen92; fieldIndex92++) {
          var fieldData92 = fieldList92[fieldIndex92];
          output += (fieldData92.editHtml) ? soy.$$filterNoAutoescape(fieldData92.editHtml) : '';
        }
        output += '</div>';
      }
    }
    output += '</div>';
  } else {
    var fieldList102 = opt_data.fields;
    var fieldListLen102 = fieldList102.length;
    for (var fieldIndex102 = 0; fieldIndex102 < fieldListLen102; fieldIndex102++) {
      var fieldData102 = fieldList102[fieldIndex102];
      output += (fieldData102.editHtml) ? soy.$$filterNoAutoescape(fieldData102.editHtml) : '';
    }
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Issue.issueFields.soyTemplateName = 'JIRA.Templates.Issue.issueFields';
}


JIRA.Templates.Issue.createIssueForm = function(opt_data, opt_ignored) {
  var output = '<form name="jiraform" action="#" class="aui"><h2>' + ((opt_data.showFieldConfigurationToolBar) ? JIRA.Templates.Issue.fieldConfigurationToolbar(null) : '') + soy.$$escapeHtml(opt_data.title) + '</h2><div class="form-body">';
  if (opt_data.issueSetupFields) {
    output += '<div class="issue-setup-fields">';
    var fieldList118 = opt_data.issueSetupFields;
    var fieldListLen118 = fieldList118.length;
    for (var fieldIndex118 = 0; fieldIndex118 < fieldListLen118; fieldIndex118++) {
      var fieldData118 = fieldList118[fieldIndex118];
      output += '<div class="qf-field qf-field-' + soy.$$escapeHtml(fieldData118.id) + ' qf-required" data-field-id="' + soy.$$escapeHtml(fieldData118.id) + '">' + soy.$$filterNoAutoescape(fieldData118.editHtml) + '</div>';
    }
    output += '</div>';
  }
  output += ((opt_data.parentIssueId) ? '<input type="hidden" name="parentIssueId" value="' + soy.$$escapeHtml(opt_data.parentIssueId) + '" />' : '') + '<input type="hidden" name="atl_token" value="' + soy.$$escapeHtml(opt_data.atlToken) + '" /><input type="hidden" name="formToken" value="' + soy.$$escapeHtml(opt_data.formToken) + '" /><div class="content">' + ((opt_data.fieldsHtml) ? soy.$$filterNoAutoescape(opt_data.fieldsHtml) : '') + '<!-- fields inserted here via javascript --></div></div><div class="buttons-container form-footer"><div class="buttons">' + ((! opt_data.disallowCreateAnother) ? '<label for="qf-create-another" class="qf-create-another"><input id="qf-create-another" type="checkbox" ' + ((opt_data.multipleMode) ? 'checked="checked"' : '') + ' />' + soy.$$escapeHtml("Create another") + '</label>' : '') + '<input accesskey="' + soy.$$escapeHtml("s") + '" title="' + soy.$$escapeHtml(AJS.format("Press {1}+{0} to submit this form","s",opt_data.modifierKey)) + '" class="aui-button aui-button-primary" id="create-issue-submit" name="Edit" type="submit" value="' + soy.$$escapeHtml("Create") + '" /><a href="#" accesskey="' + soy.$$escapeHtml("`") + '" title="' + soy.$$escapeHtml(AJS.format("Press {1}+{0} to cancel","`",opt_data.modifierKey)) + '" class="cancel">' + soy.$$escapeHtml("Cancel") + '</a></div></div></form>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Issue.createIssueForm.soyTemplateName = 'JIRA.Templates.Issue.createIssueForm';
}


JIRA.Templates.Issue.checkBoxField = function(opt_data, opt_ignored) {
  return '<fieldset class="group"><legend><span></span></legend><div class="checkbox"><input class="checkbox" type="checkbox" name="' + soy.$$escapeHtml(opt_data.name) + '" id="' + soy.$$escapeHtml(opt_data.name) + '" value="true" ' + ((opt_data.checked) ? 'checked' : '') + '><label for="' + soy.$$escapeHtml(opt_data.name) + '">' + soy.$$escapeHtml(opt_data.label) + '</label></div></fieldset>';
};
if (goog.DEBUG) {
  JIRA.Templates.Issue.checkBoxField.soyTemplateName = 'JIRA.Templates.Issue.checkBoxField';
}


JIRA.Templates.Issue.createIssueError = function(opt_data, opt_ignored) {
  return '<h2>' + soy.$$escapeHtml("Create Issue") + '</h2><div class="form-footer">' + soy.$$filterNoAutoescape(opt_data.errorHtml) + '</div>';
};
if (goog.DEBUG) {
  JIRA.Templates.Issue.createIssueError.soyTemplateName = 'JIRA.Templates.Issue.createIssueError';
}


JIRA.Templates.Issue.undealtErrors = function(opt_data, opt_ignored) {
  var output = '<div>' + soy.$$escapeHtml("There were some errors when trying to create this issue") + '</div><ul>';
  var errorList191 = opt_data.errors;
  var errorListLen191 = errorList191.length;
  for (var errorIndex191 = 0; errorIndex191 < errorListLen191; errorIndex191++) {
    var errorData191 = errorList191[errorIndex191];
    output += '<li>' + soy.$$escapeHtml(errorData191) + '</li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Issue.undealtErrors.soyTemplateName = 'JIRA.Templates.Issue.undealtErrors';
}
;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/templates/form.js' */
define("quick-edit/templates/form",function(){return JIRA.Templates.QuickForm});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/templates/issue.js' */
define("quick-edit/templates/issue",function(){return JIRA.Templates.Issue});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/util/extension-mixin.js' */
define("quick-edit/util/extension-mixin",["jquery"],function(b){var a=function(e,c,d){b(this).trigger(e,c);if(d&&this.globalEventNamespaces){b.each(this.globalEventNamespaces,function(g,f){b(document).trigger(f+"."+e,c)})}return this};return{triggerEvent:a}});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/util/class.js' */
define("quick-edit/util/class",["quick-edit/util/extension-mixin","jira/lib/class"],function(a,b){return b.extend(a)});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/util/control.js' */
define("quick-edit/util/control",["quick-edit/util/extension-mixin","jira/ajs/control"],function(a,b){return b.extend(a)});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/util/dialog.js' */
define("quick-edit/util/dialog",["jira/dialog/dialog","jira/issue","jira/issuenavigator/issue-navigator"],function(b,f,c){var e=JIRA.Issues;var d=function(j){var k=b.current,i=k.$activeTrigger;if(i){return i.attr(j)}};var g=function(){var i=d("data-issueKey");if(!i&&f.getIssueKey()){i=f.getIssueKey()}if(!i&&c.getSelectedIssueKey()){i=c.getSelectedIssueKey()}if(!i&&e){i=e.Api.getSelectedIssueKey()}return i};var h=function(j){var i=g();if(!i){return j}return j+" : "+i};var a=function(){return e||c.isNavigator()||d("data-issueKey")};return{getActionIssueKey:g,getAttrFromActiveTrigger:d,getIssueActionTitle:h,shouldShowIssueKeyInTitle:a}});AJS.namespace("JIRA.Dialog.getActionIssueKey",null,require("quick-edit/util/dialog").getActionIssueKey);AJS.namespace("JIRA.Dialog.getAttrFromActiveTrigger",null,require("quick-edit/util/dialog").getAttrFromActiveTrigger);AJS.namespace("JIRA.Dialog.getIssueActionTitle",null,require("quick-edit/util/dialog").getIssueActionTitle);AJS.namespace("JIRA.Dialog.shouldShowIssueKeyInTitle",null,require("quick-edit/util/dialog").shouldShowIssueKeyInTitle);;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/util/jira.js' */
define("quick-edit/util/jira",["quick-edit/templates/issue","jira/util/data/meta","aui/message","jquery"],function(d,f,c,m){var a=function(r){var p,o,n,q=r.closest(".tabs-pane");if(q.length){o=q.closest(".aui-tabs");p=q.attr("id");n=o.find("a[href='#"+p+"']");n.click()}};var i=function(o,n){return l("error",o,AJS.escapeHtml(n),false)};var b=function(o,n){return l("error",o,n,false)};var h=function(p,q){var o,n=[];m.each(q,function(s,v){var u,r,t=p.find(":input[name='"+s+"']").last();if(t.length===1){if(!o){o=t}r=m("<div class='error' />").attr("data-field",s).text(v);u=t.closest(".field-group, .group");u.find(".error").remove();u.append(r)}else{if(t.length===0){n.push(v)}}});if(n.length>0){b(p,d.undealtErrors({errors:n}))}a(p.find(".error:first"));if(o){o.focus()}};var l=function(n,p,o,r){var q=p.find(".aui-message-context");if(!q.length){q=m("<div class='aui-message-context' />");q.prependTo(p.find(".form-body"))}q.empty();c[n](q,{shadowed:false,closeable:r,body:o})};var k=function(o,n){return l("success",o,n,true)};var j=function(o){var n=m(o);return{html:n.not("script"),scripts:n.filter("script")}};var e=function(n){if(m.isFunction(n)){return n}else{return function(){return n}}};var g=function(){f.get("keyboard-accesskey-modifier")};return{activateTabWithChild:a,applyErrorMessageToForm:i,applyErrorsToForm:h,applyMessageToForm:l,applySuccessMessageToForm:k,getModifierKey:g,extractScripts:j,makePropertyFunc:e}});AJS.namespace("JIRA.activateTabWithChild",null,require("quick-edit/util/jira").activateTabWithChild);AJS.namespace("JIRA.applyErrorMessageToForm",null,require("quick-edit/util/jira").applyErrorMessageToForm);AJS.namespace("JIRA.applyErrorsToForm",null,require("quick-edit/util/jira").applyErrorsToForm);AJS.namespace("JIRA.applyMessageToForm",null,require("quick-edit/util/jira").applyMessageToForm);AJS.namespace("JIRA.applySuccessMessageToForm",null,require("quick-edit/util/jira").applySuccessMessageToForm);AJS.namespace("JIRA.extractScripts",null,require("quick-edit/util/jira").extractScripts);AJS.namespace("JIRA.makePropertyFunc",null,require("quick-edit/util/jira").makePropertyFunc);;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/field/configurable.js' */
define("quick-edit/form/field/configurable",["quick-edit/util/jira","quick-edit/util/control","quick-edit/templates/form","jira/util/events","jira/util/events/types","jquery"],function(b,e,d,a,c,f){return e.extend({init:function(g){this.descriptor=g;this.$element=f("<div />").attr("id","qf-field-"+this.getId())},focus:function(){this.$element.find(":input:first").focus()},highlight:function(){var g=this;this.$element.css("backgroundColor","#fff").animate({backgroundColor:"lightyellow"},function(){g.$element.animate({backgroundColor:"#fff"},function(){g.$element.css("backgroundColor","")})})},getLabel:function(){return this.descriptor.label},getId:function(){return this.descriptor.id},activate:function(h){var g;this.active=true;this.$element.addClass("qf-field-active").show();this.$element.find("textarea").trigger("refreshInputHeight");if(!h){g=this.render();this.$element.append(g.scripts);this.focus();a.trigger(c.NEW_CONTENT_ADDED,[this.$element]);this.$element.scrollIntoView();this.triggerEvent("activated")}},hasVisibilityFeature:function(){return !!this.descriptor.hasVisibilityFeature},hasRetainFeature:function(){return !!this.descriptor.hasRetainFeature},isActive:function(){return this.active},disable:function(g){this.render();this.active=false;this.$element.removeClass("qf-field-active").hide();if(!g){this.triggerEvent("disabled")}},render:function(){var h=d.field(this.descriptor),g=b.extractScripts(h);this.$element.html(g.html).addClass("qf-field").data("model",this);return{element:this.$element,scripts:g.scripts}}})});AJS.namespace("JIRA.Forms.ConfigurableField",null,require("quick-edit/form/field/configurable"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/model/model.js' */
define("quick-edit/form/model",["quick-edit/util/class","jira/util/data/meta","jira/util/objects","jira/ajs/ajax/smart-ajax","jquery"],function(a,c,b,d,e){return a.extend({init:function(f){this.userFieldsResource=f.userFieldsResource;this.fieldsResource=f.fieldsResource;this.retainedFields=[];this._hasRetainFeature=false;this._hasVisibilityFeature=true},getFieldsResource:function(){return this.fieldsResource},getAtlToken:function(){return this.atlToken},getFormToken:function(){return this.formToken},getActiveFieldIds:function(){return this.getUserFields()},getAdditionalCommentFieldsHtml:function(){return this.additionalCommentFieldsHtml},addFieldToRetainValue:function(f){if(this._hasRetainFeature){this.removeFieldToRetainValue(f);this.retainedFields.push(f)}else{throw new Error("getFieldsWithRetainedValues: cannot be called. Must enable retain feature first by specifiying [_hasRetainFeature=true]")}},clearRetainedFields:function(){this.retainedFields=[]},removeFieldToRetainValue:function(g){if(this._hasRetainFeature){var f=e.inArray(g,this.retainedFields);if(f!=-1){this.retainedFields.splice(f,1)}}else{throw new Error("getFieldsWithRetainedValues: cannot be called. Must enable retain feature first by specifiying [_hasRetainFeature=true]")}},getFieldsWithRetainedValues:function(){if(this._hasRetainFeature){return this.retainedFields}else{throw new Error("getFieldsWithRetainedValues: cannot be called. Must enable retain feature first by specifiying [_hasRetainFeature=true]")}},hasRetainedValue:function(f){if(this._hasRetainFeature){return e.inArray(f.id,this.retainedFields)!==-1}else{throw new Error("HasRetainedValue: cannot be called. Must enable retain feature first by specifiying [_hasRetainFeature=true]")}},refresh:function(h){var f=this,g=e.Deferred(),i;if(h){i=h+"&retainValues=true"}d.makeRequest({url:this.getFieldsResource(),type:"POST",data:i,success:function(j){f._update(j)},complete:function(k,l,j){if(j.successful){g.resolveWith(f,arguments)}else{f.triggerEvent("serverError",[j]);g.rejectWith(f,[j])}}});return g.promise()},_update:function(f){this.atlToken=f.atl_token;this.formToken=f.formToken;this.fields=f.fields;this.sortedTabs=f.sortedTabs;this.userPreferences=f.userPreferences;this.additionalCommentFieldsHtml=f.additionalCommentFieldsHtml},setFields:function(f){this.fields=f},getConfigurableFields:function(){return this.getFields()},getFields:function(){var f=this,g=e.Deferred();if(!this.fields){this.refresh().done(function(){g.resolve(f.fields)})}else{g.resolve(f.fields)}return g.promise()},_mungeTabs:function(g){var f=0,h=[];e.each(g,function(j,k){f++;if(k.tab){if(!h[k.tab.position]){h[k.tab.position]=b.copyObject(k.tab)}if(k.tab.position===0){h[k.tab.position].isFirst=true}if(!h[k.tab.position].fields){h[k.tab.position].fields=[]}h[k.tab.position].fields.push(b.copyObject(k))}});return h},getTabs:function(){var f=this,g=e.Deferred();this.getFields().done(function(h){var i=f._mungeTabs(h);g.resolve(i)});return g.promise()},getSortedTabs:function(){var f=e.Deferred();if(!this.sortedTabs){this.refresh().done(function(){f.resolve(this.sortedTabs)})}else{f.resolve(this.sortedTabs)}return f.promise()},getUserFields:function(){var f=this,g=e.Deferred();if(!this.userPreferences){this.refresh().done(function(){g.resolve(f.userPreferences.fields)})}else{g.resolve(f.userPreferences.fields)}return g.promise()},setUserFields:function(f){var g={};g.fields=f;return this.updateUserPrefs(g)},hasRetainFeature:function(){return !!this._hasRetainFeature},hasVisibilityFeature:function(){return !!this._hasVisibilityFeature},getUseConfigurableForm:function(){var f=this,g=e.Deferred();if(!this.userPreferences){this.refresh().done(function(){g.resolve(f.userPreferences.useQuickForm)}).fail(function(){g.reject()})}else{g.resolve(f.userPreferences.useQuickForm)}return g.promise()},setUseConfigurableForm:function(f){var g={};g.useQuickForm=f;return this.updateUserPrefs(g)},updateUserPrefs:function(h){var g=e.Deferred(),f=this;if(c.get("remote-user")===""){g.done();return g.promise()}if(!this.userPreferences){g.reject();return g.promise()}if(!h.fields){h.fields=this.userPreferences.fields}if(typeof h.showWelcomeScreen==="undefined"){h.showWelcomeScreen=this.userPreferences.showWelcomeScreen}if(typeof h.useQuickForm==="undefined"){h.useQuickForm=this.userPreferences.useQuickForm}return d.makeRequest({url:this.userFieldsResource,type:"POST",data:JSON.stringify(h),dataType:"json",contentType:"application/json",complete:function(j,k,i){if(i.successful){f.userPreferences=h}else{f.triggerEvent("serverError",[i])}}})}})});AJS.namespace("JIRA.Forms.Model",null,require("quick-edit/form/model"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/model/create-issue.js' */
define("quick-edit/form/model/create-issue",["quick-edit/form/model","wrm/context-path","underscore","jquery"],function(a,c,b,d){return a.extend({DEFAULT_NON_RETAINED_FIELDS:["summary","description","timetracking","timetracking_originalestimate","timetracking_remainingestimate","worklog","worklog_startDate","worklog_timeLogged","worklog_newEstimate","worklog_adjustmentAmount","attachment"],CUSTOMFIELD_PATTERN:/^(customfield_(\d+))(?:|\:(?:\d+))$/,TIMETRACKING_PATTERN:/^timetracking_/,init:function(e){e=e||{};this.userFieldsResource=c()+"/rest/quickedit/1.0/userpreferences/create";this._hasRetainFeature=true;this._hasVisibilityFeature=true;this.retainedFields=[];this.dirtyFields=[];this.initIssueType=e.issueType;this.initProjectId=e.projectId;this.parentIssueId=e.parentIssueId;this.nonRetainedFields=this.DEFAULT_NON_RETAINED_FIELDS;if(e.nonRetainedFields){this.nonRetainedFields=b.union(e.nonRetainedFields,this.DEFAULT_NON_RETAINED_FIELDS)}},getParentIssueId:function(){return this.parentIssueId},isInMultipleMode:function(){return this.multipleMode},setIsMultipleMode:function(e){this.multipleMode=e},getActiveFieldIds:function(){var e=this,f=d.Deferred(),g=[];this.getUserFields().done(function(h){d.each(h,function(k,j){g.push(j)});e.getRequiredFields().done(function(i){d.each(i,function(k,j){if(d.inArray(j.id,g)===-1){g.push(j.id)}});f.resolve(g)})});return f.promise()},hasVisibilityFeature:function(e){return !e.required},getFieldsResource:function(){var e=c()+"/secure/QuickCreateIssue!default.jspa?decorator=none";if(this.parentIssueId){return e+"&parentIssueId="+this.parentIssueId}if(this.initIssueType){e=e+"&issuetype="+this.initIssueType;delete this.initIssueType}if(this.initProjectId){e=e+"&pid="+this.initProjectId;delete this.initProjectId}return e},addFieldToRetainValue:function(h,f){var e=!b.contains(this.nonRetainedFields,h);var g=h.match(/^filetoconvert/)!==null;if(e||g||f){this._super(h)}},getRequiredFields:function(){var e=d.Deferred(),f=[];this.getFields().done(function(g){d.each(g,function(h,j){if(j.required){f.push(j)}});e.resolve(f)});return e.promise()},getConfigurableFields:function(){var e=d.Deferred(),f=[];this.getFields().done(function(g){d.each(g,function(h,j){if(j.id!=="project"&&j.id!=="issuetype"){f.push(j)}});e.resolve(f)});return e.promise()},getIssueSetupFields:function(){var e=d.Deferred(),f=[];this.getFields().done(function(g){d.each(g,function(h,j){if(j.id==="project"||j.id==="issuetype"){f.push(j)}});e.resolve(f)});return e.promise()},markFieldAsDirty:function(e){e=this.normalizeCustomFieldId(e);if(!this.fieldIsDirty(e)){this.dirtyFields.push(e)}},fieldIsDirty:function(e){return b.contains(this.dirtyFields,e)},isCustomFieldId:function(e){return e&&!!e.match(this.CUSTOMFIELD_PATTERN)},isTimetrackingFieldId:function(e){return e&&!!e.match(this.TIMETRACKING_PATTERN)},normalizeCustomFieldId:function(e){if(this.isCustomFieldId(e)){return e.match(this.CUSTOMFIELD_PATTERN)[1]}else{return e}},normalizeFieldParam:function(e,f){if(e=="filetoconvert"){return e+"-"+f}else{if(this.isCustomFieldId(e)){return this.normalizeCustomFieldId(e)}else{if(this.isTimetrackingFieldId(e)){return"timetracking"}else{return e}}}}})});AJS.namespace("JIRA.Forms.CreateIssueModel",null,require("quick-edit/form/model/create-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/model/edit-issue.js' */
define("quick-edit/form/model/edit-issue",["quick-edit/form/model","underscore","jquery"],function(a,b,c){return a.extend({getUnconfigurableTabs:function(){var d=this,e=c.Deferred();d.getTabs().done(function(g){var f=g.slice(0);f[0].fields=f[0].fields.slice(0);c.each(f[0].fields,function(h,j){if(j.id==="comment"){f[0].fields.splice(h,1);return false}});e.resolve(f)});return e.promise()},getCommentField:function(){var d=c.Deferred();this.getFields().done(function(e){c.each(e,function(f,g){if(g.id==="comment"){d.resolve(g)}});d.reject()});return d.promise()}})});AJS.namespace("JIRA.Forms.EditIssueModel",null,require("quick-edit/form/model/edit-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/model/factory/edit-issue.js' */
define("quick-edit/form/model/factory/edit-issue",["quick-edit/form/model/edit-issue","wrm/context-path"],function(b,a){return function(c){return new b({fieldsResource:a()+"/secure/QuickEditIssue!default.jspa?issueId="+c+"&decorator=none",userFieldsResource:a()+"/rest/quickedit/1.0/userpreferences/edit"})}});AJS.namespace("JIRA.Forms.Model.createQuickEditIssueModel",null,require("quick-edit/form/model/factory/edit-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/helper/helper.js' */
define("quick-edit/form/helper/helper",["quick-edit/util/jira","quick-edit/form/model","quick-edit/util/class","jira/jquery/plugins/isdirty","jira/util/events","jira/dialog/dialog","underscore","jquery"],function(c,a,b,g,h,e,f,i){var d=AJS.escapeHTML;return b.extend({init:function(j){this.form=j},handleSubmitSuccess:function(m){function l(n,p,o){var q='<a href="'+o+'">'+n+" - "+d(p)+"</a>";return AJS.format("Issue {0} has been successfully created",q)}var j=this,k=this.form.$element.find("#summary").val();m.summary=k;this.form.triggerEvent("submitted",[m,this]);this.form.triggerEvent("issueCreated",[m,this],true);if(j.form.model.isInMultipleMode()){this.form.render().done(function(){var n=l(m.issueKey,k,contextPath+"/browse/"+m.issueKey);c.applySuccessMessageToForm(j.form.getForm(),n)})}else{this.form.triggerEvent("sessionComplete")}},getCreateAnotherCheckbox:function(){return this.form.$element.find("#qf-create-another")},isInMultipleMode:function(){return this.getCreateAnotherCheckbox().is(":checked")},getProjectField:function(){return this.form.$element.find(".issue-setup-fields #project")},getIssueTypeField:function(){return this.form.$element.find(".issue-setup-fields #issuetype")},serializeForToggle:function(l){if(!this.form.model.hasRetainFeature()){return this.form.getForm().serialize()}var n=this.form.model.prevActiveFields||[];var t=this.form.getForm().serializeArray();var p=function(u){return this.form.model.normalizeFieldParam(u.name,u.value)}.bind(this);var m=this.form.getActiveFieldIds();var o=i.grep(t,function(u){return i.inArray(p(u),m)!==-1});var j=i.grep(n,function(u){return i.inArray(p(u),m)===-1});var k=i.map(j,function(u){return p(u)});var r=i.merge(o,j);var q=i.merge(m,k);this.form.model.prevActiveFields=i.extend(true,[],r);if(l){q=this.executeProjectChangedSecuritySettingAction(q)}q=q.filter(function(u){return !this.form.model.isCustomFieldId(u)||this.form.model.fieldIsDirty(u)}.bind(this));var s=i.merge([{name:"retainValues",value:true}],r);i.each(t,function(u,v){if(v.name==="pid"||v.name==="issuetype"){s.push(v)}});s.push({name:"toggle",value:true});i.each(q,function(u,v){s.push({name:"fieldsToRetain",value:v})});s.push({name:"formToken",value:this.form.model.getFormToken()});return i.param(s)},executeProjectChangedSecuritySettingAction:function(j){return f.reject(j,function(k){return k==="security"})},prepareFieldsToRetain:function(j,k){i.each(j,function(l,m){k.push({name:"fieldsToRetain",value:m})});return k},setIssueType:function(){var j=this,k=this.serializeForToggle();this.form.invalidateFieldsCache();this.form.disable();this.form.render(k).done(function(){j.form.enable()})},setProjectId:function(){var j=this,k=this.serializeForToggle(true);this.form.invalidateFieldsCache();this.form.disable();this.form.render(k).done(function(){j.form.enable()})},saveFormDirtyStatus:function(){this.form.isDirty=this.form.getForm().isDirty()},restoreFormDirtyStatus:function(){if(this.form.isDirty){this.form.getForm().addClass(g.ClassNames.BY_DEFAULT)}},decorate:function(){var j=this;this.getProjectField().change(function(){j.saveFormDirtyStatus();h.trigger("dialogBeforeContentChange",["projectId",this.value,e.current.options.id]);j.setProjectId(this.value)});this.getIssueTypeField().change(function(){j.saveFormDirtyStatus();h.trigger("dialogBeforeContentChange",["issueType",this.value,e.current.options.id]);j.setIssueType(this.value)});this.getCreateAnotherCheckbox().change(function(){j.form.model.setIsMultipleMode(this.checked)})},decorateFields:function(){var j=this;this.form.$element.find('*[id^="customfield_"]').off("change.customField").on("change.customField",function(){if(j.form.model.isCustomFieldId(this.name)){j.form.model.markFieldAsDirty(this.name)}})},sendQuickEditAnalyticsEvent:function(l){var j=l.instance;var k=l.name;var o;var n;var m=j.model.fields.map(function(p){return{id:p.id,required:p.required}});if(l.field){n={id:l.field.descriptor.id,required:l.field.descriptor.required}}j.model.getActiveFieldIds().then(function(p){o=m.filter(function(q){return p.some(function(r){return r===q.id})});AJS.trigger("analyticsEvent",{name:k,data:{allFieldsShown:l.allFieldsShown,field:JSON.stringify(n),allFields:JSON.stringify(m),displayedFields:l.allFieldsShown?JSON.stringify(m):JSON.stringify(o)}})})}})});AJS.namespace("JIRA.Forms.CreateIssueHelper",null,require("quick-edit/form/helper/helper"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/abstract/abstract.js' */
define("quick-edit/form/abstract",["quick-edit/util/jira","quick-edit/util/control","jira/ajs/ajax/smart-ajax","jira/dialog/form-dialog","jira/dialog/dialog","jira/util/events/types","jira/util/events","jira/util/browser","jquery","underscore"],function(d,b,a,c,g,j,k,i,l,h){var f=AJS.extractBodyFromResponse;var e=AJS.log;return b.extend({submit:function(){var m=this;m.getForm().addClass("submitting");this.triggerEvent("submitting",[],true);return a.makeRequest({url:this.getAction(),type:"POST",beforeSend:function(){m.disable()},data:this.serialize(),complete:function(s,t,o){var q=o.data;m.getForm().find(".aui-message-context").remove();m.enable();m.getForm().find(".error").remove();if(o.successful){m.performAnalytics();if(q&&q.fields){m.invalidateFieldsCache();m.model.setFields(q.fields)}if(typeof q==="string"){var r=l(f(q));var p=r.find("#atl_token").val();if(p){m.model.atlToken=p;m.getForm().find('input[name="atl_token"]').val(p)}var n=new c({offsetTarget:"body",content:r});n._handleServerSuccess=function(){if(n.prev){n.prev._removeStackState();n.prev._resetWindowTitle();n._removeStackState()}n.hide();m.triggerEvent("sessionComplete",[],true);m.handleSubmitSuccess()};n._handleServerError=function(u){n.hide();m.handleSubmitError(u)};n.show()}else{m.handleSubmitSuccess(o.data)}}else{m.handleSubmitError(s)}m.getForm().removeClass("submitting")}})},disable:function(){this.getForm().find(":input").attr("disabled","disabled").trigger("disable");this.getForm().find(":submit").attr("disabled","disabled")},enable:function(){this.getForm().find(":input").removeAttr("disabled").trigger("enable");this.getForm().find(":submit").removeAttr("disabled")},getActiveFieldIds:function(){throw new Error("getActiveFieldIds: Abstract, must be implemented by sub class")},serialize:function(o){var m=this,n=this.getForm().serialize();if(this.model.isInMultipleMode&&this.model.isInMultipleMode()){n=n+"&multipleMode=true"}if(this.model.hasRetainFeature()){this.model.clearRetainedFields();l.each(this.getActiveFieldIds(),function(q,p){m.model.addFieldToRetainValue(p,o)});l.each(this.model.getFieldsWithRetainedValues(),function(p,q){n=n+"&fieldsToRetain="+q})}return n},invalidateFieldsCache:function(){delete this.fields},setInitialFocus:function(){this.getFormContent().find(":input:first").focus()},handleSubmitSuccess:function(){this.triggerEvent("submitted");i.reloadViaWindowLocation()},performAnalytics:function(){var m=function(p,q){var o="***** Analytics log ["+p+"]";if(q){o+="["+JSON.stringify(q)+"]"}e(o);if(AJS.EventQueue){AJS.EventQueue.push({name:p,properties:q||{}})}};var n=function(q){var o={};var r=h.filter(q,function(s){return !h.contains(["isCreateIssue","isEditIssue","atl_token","hasWorkStarted"],s.name)});var p=h.filter(r,function(s){return s.value!=""});h.each(p,function(t){var s=t.name;if(!h.has(o,s)){o[s]=[]}o[s].push(t.value)});return o};this.previousAnalytics=(function(w,A){var r=n(w);var y=h.keys(r);var s=h.keys(A.data);var v=h.difference(y,s);var z=h.difference(s,y);var x=h.intersection(s,y);var p=h.filter(x,function(B){return h.isEqual(A.data[B],r[B])});var o=h.difference(x,p);var u=A.count+1;var t=(g.current.options.id==="edit-issue-dialog");var q={"atlassian.numCreates":u,"edit.form":t};h.each(v,function(B){q[B]="added"});h.each(z,function(B){q[B]="removed"});h.each(p,function(B){q[B]="same"});h.each(o,function(B){q[B]="changed"});m("quick.create.fields",q);return{data:r,count:u}})(this.getForm().serializeArray(),this.previousAnalytics||{data:{},count:0})},addErrorMessage:function(m){d.applyErrorMessageToForm(this.getForm(),[m])},handleSubmitError:function(r){var m=this;var s;if(!r.responseText){var o=a.SmartAjaxResult(r,undefined,r.statusText,"",false,undefined);var n=a.buildSimpleErrorContent(o);m.addErrorMessage(n)}else{try{s=JSON.parse(r.responseText)}catch(q){}if(s){if(s.errorMessages&&s.errorMessages.length){d.applyErrorMessageToForm(this.getForm(),s.errorMessages[0])}if(s&&s.errors&&r.status===400){if(this.getFieldById){l.each(s.errors,function(t){if(/^timetracking/.test(t)){m.getFieldById("timetracking").done(function(u){k.trigger(j.VALIDATE_TIMETRACKING,[m.$element]);u.activate(true)})}else{if(/^worklog/.test(t)){m.getFieldById("worklog").done(function(u){k.trigger(j.VALIDATE_TIMETRACKING,[m.$element]);u.activate(true)})}else{m.getFieldById(t).done(function(u){u.activate(true)})}}})}d.applyErrorsToForm(this.getForm(),s.errors);this.triggerEvent("validationError",[this,s.errors],true)}var p=m.$element.find(".error");if(p.length){p[0].scrollIntoView(false)}}}},getAction:function(){return this.action},getFormContent:function(){return this.$element.find("div.content")},getForm:function(){return this.$element.find("form")},createField:function(){throw new Error("AbstractForm: You must implement [createField] method in subclass.")},_getActiveAttachments:function(m){var n=[];if(!m){return n}var p=m.split("&");for(var o=0;o<p.length;o++){var q=p[o].split("=");if(q[0]=="filetoconvert"){n.push(q[1])}}return n},_setActiveAttachments:function(n){var m=this.$element.find("input[name=filetoconvert]");m.each(function(){var p=l(this);var o=h.contains(n,p.attr("value"));p.prop("checked",o)})},render:function(o){var n=l.Deferred(),m=this;var p=m._getActiveAttachments(o);if(o){this.invalidateFieldsCache();this.model.refresh(o).done(function(){m._render().done(function(r,q){m.triggerEvent("rendered",[m.$element]);n.resolveWith(m,[m.$element,q])})})}else{m._render().done(function(r,q){m.triggerEvent("rendered",[m.$element]);n.resolveWith(m,[m.$element,q])})}n.always(function(){m._setActiveAttachments(p)});return n.promise()}})});AJS.namespace("JIRA.Forms.AbstractForm",null,require("quick-edit/form/abstract"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/abstract/configurable.js' */
define("quick-edit/form/abstract/configurable",["quick-edit/form/abstract","quick-edit/form/field/configurable","quick-edit/form/helper/helper","jquery"],function(a,c,b,d){return a.extend({getFields:function(){var f=d.Deferred(),e=this;if(!this.fields){this.fields=[];this.model.getConfigurableFields().done(function(g){d.each(g,function(h,k){var j=e.createField(k);e.fields.push(j)});f.resolveWith(e,[e.fields])})}else{f.resolveWith(this,[this.fields])}return f.promise()},getActiveFieldIds:function(){var f=[],e=this.$element.find(".qf-field.qf-field-active:not(.qf-required), .qf-field.qf-required:not(.qf-field-active)");d.each(e,function(j,k){var h=d(k);var g=h.data("model");var l=h.data("field-id")||g&&g.getId();if(l!=null){f.push(l)}if(l==="attachment"){h.find("input[name=filetoconvert]").each(function(){f.push(this.id)})}});return f},createField:function(h){h.hasVisibilityFeature=this.model.hasVisibilityFeature(h);if(this.model.hasRetainFeature(h)){h.hasRetainFeature=true;h.retainValue=this.model.hasRetainedValue(h)}var e=this,g=new c(h),f=new b(e);if(h.hasVisibilityFeature){g.bind("activated",function(){e.model.setUserFields(e.getActiveFieldIds());g.highlight();e.triggerEvent("QuickForm.fieldAdded",[g]);f.sendQuickEditAnalyticsEvent({name:"quickeditform.custom.added",field:g,instance:e})}).bind("disabled",function(){e.model.setUserFields(e.getActiveFieldIds());e.triggerEvent("QuickForm.fieldRemoved",[g]);f.sendQuickEditAnalyticsEvent({name:"quickeditform.custom.removed",field:g,instance:e})})}return g},getFieldById:function(g){var e=this,f=d.Deferred();this.getFields().done(function(h){d.each(h,function(j,k){if(k.getId()===g){f.resolveWith(e,[k])}});f.rejectWith(e,[])});return f.promise()},hasNoVisibleFields:function(){var e=d.Deferred();e.resolve(this.getActiveFieldIds().length===0);return e.promise()},renderFormContents:function(){var g=d.Deferred(),f=d(),e=this;e.getFields().done(function(i){var h=e.reorderFieldsToRender(i);e.model.getActiveFieldIds().done(function(j){d.each(h,function(){var k=this.render();f=f.add(k.scripts);e.getFormContent().append(k.element)});d.each(j,function(l,k){d.each(h,function(){if(this.getId()===k){this.activate(true)}})});d.each(h,function(){if(!this.isActive()){this.disable(true)}});e.hasNoVisibleFields().done(function(l){if(l===true){for(var k=0;k<3;k++){if(h[k]){h[k].activate(true)}}}g.resolveWith(this,[e.$element,f])})})});return g.promise()},reorderFieldsToRender:function(e){return e}})});AJS.namespace("JIRA.Forms.AbstractConfigurableForm",null,require("quick-edit/form/abstract/configurable"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/abstract/unconfigurable.js' */
define("quick-edit/form/abstract/unconfigurable",["quick-edit/form/abstract","quick-edit/templates/issue","jquery"],function(a,b,c){return a.extend({getFieldsHtml:function(){var d=this,e=c.Deferred(),f={};this.model.getTabs().done(function(g){if(g.length===1){f.fields=g[0].fields}else{f.tabs=g;f.hasTabs=true}e.resolveWith(d,[b.issueFields(f)])});return e.promise()},getActiveFieldIds:function(){var e=[];this.model.getFields().done(function(f){c.each(f,function(g,h){e.push(h.id)})});if(e.indexOf("attachment")){var d=this.$element.find("input[name=filetoconvert]").map(function(f,g){return g.id}).toArray();e.push.apply(e,d)}return e},getFields:function(){var e=c.Deferred(),d=this;if(!this.fields){this.fields=[];this.model.getFields().done(function(f){c.each(f,function(g,j){var h=d.createField(j);d.fields.push(h)});e.resolveWith(d,[d.fields])})}else{e.resolveWith(this,[this.fields])}return e.promise()}})});AJS.namespace("JIRA.Forms.AbstractUnconfigurableForm",null,require("quick-edit/form/abstract/unconfigurable"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/configurable/create-issue.js' */
define("quick-edit/form/configurable/create-issue",["quick-edit/form/abstract/configurable","quick-edit/form/helper/helper","quick-edit/templates/issue","quick-edit/util/jira","jira/util/users/logged-in-user","wrm/context-path","jquery"],function(d,c,e,a,g,b,f){return d.extend({init:function(h){this.model=h.model;this.helper=new c(this);this.globalEventNamespaces=h.globalEventNamespaces||[];this.issueId=h.issueId;this.title=h.title;this._serialization={};this.action=b()+"/secure/QuickCreateIssue.jspa?decorator=none";this.$element=f("<div />").addClass("qf-form qf-configurable-form")},handleSubmitSuccess:function(h){return this.helper.handleSubmitSuccess(h)},_render:function(){var i=f.Deferred(),h=this;h.model.getIssueSetupFields().done(function(k){var j=e.createIssueForm({issueSetupFields:k,atlToken:h.model.getAtlToken(),formToken:h.model.getFormToken(),isConfigurable:true,title:h.title,parentIssueId:h.model.getParentIssueId(),multipleMode:h.model.isInMultipleMode(),showFieldConfigurationToolBar:!g.isAnonymous(),modifierKey:a.getModifierKey()});h.$element.html(j);h.helper.decorate();h.renderFormContents().done(function(m,l){h.helper.decorateFields();i.resolveWith(h,[h.$element,l])});h.bind("QuickForm.fieldAdded",function(){h.helper.decorateFields()})});return i.promise()}})});AJS.namespace("JIRA.Forms.ConfigurableCreateIssueForm",null,require("quick-edit/form/configurable/create-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/configurable/edit-issue.js' */
define("quick-edit/form/configurable/edit-issue",["quick-edit/form/abstract/configurable","quick-edit/util/jira","quick-edit/templates/issue","jira/util/users/logged-in-user","wrm/context-path","jquery"],function(c,a,d,f,b,e){return c.extend({init:function(g){this.model=g.model;this.globalEventNamespaces=g.globalEventNamespaces||[];this.issueId=g.issueId;this.title=g.title;this.action=b()+"/secure/QuickEditIssue.jspa?issueId="+g.issueId+"&decorator=none";this.$element=e("<div />").addClass("qf-form qf-configurable-form")},handleSubmitSuccess:function(g){this.triggerEvent("submitted",[g]);this.triggerEvent("issueEdited",[g],true);this.triggerEvent("sessionComplete")},hasNoVisibleFields:function(){var g=e.Deferred(),h=this.getActiveFieldIds();this.model.getUserFields().done(function(i){if(i.length===1&&i[0]==="comment"){g.resolve(false)}else{if(h.length===0||(h.length===1&&h[0]==="comment")){g.resolve(true)}else{g.resolve(false)}}});return g.promise()},_render:function(){var h=e.Deferred(),g=this,i=d.editIssueForm({issueId:this.issueId,title:this.title,atlToken:g.model.getAtlToken(),formToken:g.model.getFormToken(),isConfigurable:true,modifierKey:a.getModifierKey(),showFieldConfigurationToolBar:!f.isAnonymous(),additionalCommentFieldsHtml:g.model.getAdditionalCommentFieldsHtml()});this.$element.html(i);g.renderFormContents().done(function(k,j){g.getFieldById("comment").done(function(l){g.getFormContent().append(l.$element)});h.resolveWith(g,[g.$element,j])});return h.promise()}})});AJS.namespace("JIRA.Forms.ConfigurableEditIssueForm",null,require("quick-edit/form/configurable/edit-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/field-picker/button/configurable.js' */
define("quick-edit/form/field-picker/button/configurable",["quick-edit/util/control","quick-edit/templates/form"],function(b,a){return b.extend({init:function(d){var c=this;this.field=d.field;this.field.bind("disabled",function(){c.$element.removeClass("qf-active")}).bind("activated",function(){c.$element.addClass("qf-active")})},toggle:function(){if(this.field.isActive()){this.field.disable()}else{this.field.activate()}},getId:function(){return this.field.getId()},render:function(){this.$element=jQuery(a.configurablePickerButton({required:this.field.descriptor.required,label:this.field.getLabel(),fieldId:this.field.getId(),isActive:this.field.isActive()}));this._assignEvents("button",this.$element);return this.$element},_events:{button:{click:function(c){this.toggle();c.preventDefault()}}}})});AJS.namespace("JIRA.Forms.FieldPicker.ConfigurableButton",null,require("quick-edit/form/field-picker/button/configurable"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/field-picker/button/unconfigurable.js' */
define("quick-edit/form/field-picker/button/unconfigurable",["quick-edit/util/control","quick-edit/templates/form","jquery"],function(b,a,c){return b.extend({init:function(d){this.descriptor=d},render:function(){this.$element=c(a.unconfigurablePickerButton({required:this.descriptor.required,label:this.descriptor.label,fieldId:this.descriptor.id,isActive:true}));return this.$element}})});AJS.namespace("JIRA.Forms.FieldPicker.UnconfigurableButton",null,require("quick-edit/form/field-picker/button/unconfigurable"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/field-picker/field-picker.js' */
define("quick-edit/form/field-picker",["quick-edit/form/field-picker/button/configurable","quick-edit/form/field-picker/button/unconfigurable","quick-edit/templates/form","quick-edit/util/control","aui/inline-dialog","jquery"],function(a,e,b,d,c,f){return d.extend({INLINE_DIALOG_ID:"field_picker_popup",init:function(){this.buttons=[]},switchToAll:function(g){this.isConfigurable=false;if(g!==true){this.hideCallback=function(){this.remove()};this.inlineDialog.hide();this.triggerEvent("switchedToAll")}},setForm:function(g){this.form=g},switchToCustom:function(g){this.isConfigurable=true;if(g!==true){this.hideCallback=function(){this.remove()};this.inlineDialog.hide();this.triggerEvent("switchedToCustom")}},hideCallback:function(){},bindInlineDialog:function(){var h=this;var g=this.getInlineDialogTrigger();function i(l,j,k){h.render().done(function(m){if(l.find(".qf-picker").length===0){l.html(m);l.click(function(q){q.stopPropagation()})}var p=g.offset().top-f(window).scrollTop();var o=f(window).height();var n=o-p-110;l.find(".qf-picker-content").css("maxHeight",n);k()})}if(this.inlineDialog){this.inlineDialog.remove()}this.inlineDialog=c(g,this.INLINE_DIALOG_ID,i,{width:450,upfrontCallback:function(){g.parent().addClass("active")},hideCallback:function(){g.parent().removeClass("active")},nobind:true});g.click(function(j){if(f("#inline-dialog-"+h.INLINE_DIALOG_ID).is(":visible")){h.inlineDialog.hide()}else{h.inlineDialog.show()}});return this.inlineDialog},getInlineDialogTrigger:function(){return this.form.$element.find("#qf-field-picker-trigger")},renderButtons:function(h){var g=this;var i=f('<ul class="qf-picker-buttons" />').appendTo(this.$content);f.each(h,function(k,l){var m;var j;if(g.isConfigurable){g.form.getFieldById(l.id).done(function(o){if(o&&o.hasVisibilityFeature()){var p=f("<li />").appendTo(i);var n=new a({field:o});n.render().appendTo(p);g.buttons.push(n)}})}else{j=new e(l);m=f("<li />").appendTo(i);j.render().appendTo(m)}});if(i.children().length===0){i.addClass("qf-no-fields").append("<li><em>"+"No fields can be configured for this tab"+"</em></li>")}},renderContents:function(){var g=this;var h=f.Deferred();this.form.model.getSortedTabs().done(function(i){if(i.length===1){g.renderButtons(i[0].fields)}else{f.each(i,function(j,k){if(k.fields.length>0){f("<h4><span></span></h4>").appendTo(g.$content).find("span").text(k.label);g.renderButtons(k.fields)}})}h.resolveWith(g,[g.$element])});return h.promise()},show:function(){this.inlineDialog.show()},render:function(){this.$element=f(b.fieldPicker({isConfigurable:this.isConfigurable}));this.$content=this.$element.find(".qf-picker-content");this._assignEvents("switchToCustom",this.$element.find(".qf-configurable"));this._assignEvents("switchToAll",this.$element.find(".qf-unconfigurable"));return this.renderContents()},_events:{switchToCustom:{click:function(g){this.switchToCustom();g.preventDefault()}},switchToAll:{click:function(g){this.switchToAll();g.preventDefault()}}}})});AJS.namespace("JIRA.Forms.FieldPicker",null,require("quick-edit/form/field-picker"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/container/container.js' */
define("quick-edit/form/container",["quick-edit/form/field-picker","quick-edit/util/jira","quick-edit/util/control","quick-edit/form/helper/helper","jira/dialog/form-dialog","jira/dialog/dialog","jira/util/navigator","jira/issue","jira/issuenavigator/issue-navigator","jquery"],function(i,c,a,e,b,g,j,f,d,h){return a.extend({init:function(k){this.$element=h("<div />").addClass("qf-container");this.options=c.makePropertyFunc(k);this.fieldPicker=new i();this.successData=[];this.helper=new e(this)},decorateRenderers:function(){var k=this;if(!this.fieldPicker.decorated){this.fieldPicker.bind("switchedToAll",function(){k.unconfigurableForm.render(k.currentView.serialize(true)).done(function(){k.fieldPicker.show()});k.helper.sendQuickEditAnalyticsEvent({name:"quickeditform.switched.all",allFieldsShown:true,instance:k})});this.fieldPicker.bind("switchedToCustom",function(){k.configurableForm.render(k.currentView.serialize(true)).done(function(){k.fieldPicker.show()});k.helper.sendQuickEditAnalyticsEvent({name:"quickeditform.switched.custom",allFieldsShown:false,instance:k})});this.fieldPicker.decorated=true}if(!this.configurableForm.decorated){this.configurableForm.bind("rendered",function(m,l){k.currentView=k.configurableForm;k.fieldPicker.switchToCustom(true);k.fieldPicker.setForm(k.configurableForm);k.fieldPicker.bindInlineDialog();k.applyGlobalDecorator(l);k.model.setUseConfigurableForm(true);k.triggerEvent("configurableFormRendered")});this.configurableForm.bind("submitted",function(m,l){k.successData.push(l);k.triggerEvent("configurableFormSubmitted");k.helper.sendQuickEditAnalyticsEvent({name:"quickeditform.submit.success",allFieldsShown:false,instance:k})});this.configurableForm.decorated=true}if(!this.unconfigurableForm.decorated){this.unconfigurableForm.bind("rendered",function(m,l){k.fieldPicker.switchToAll(true);k.fieldPicker.setForm(k.unconfigurableForm);k.fieldPicker.bindInlineDialog();k.currentView=k.unconfigurableForm;k.applyGlobalDecorator(l);k.model.setUseConfigurableForm(false);k.triggerEvent("unconfigurableFormRendered")});this.unconfigurableForm.bind("submitted",function(m,l){k.successData.push(l);k.triggerEvent("unconfigurableFormSubmitted");k.helper.sendQuickEditAnalyticsEvent({name:"quickeditform.submit.success",allFieldsShown:true,instance:k})});this.unconfigurableForm.decorated=true}},applyGlobalDecorator:function(m){function l(){if(k.currentView.setInitialFocus){k.currentView.setInitialFocus()}}var k=this;m.detach();this.$element.html(m);this.triggerEvent("contentRefreshed",[this.$element]);if(j.isIE()){window.setTimeout(l,0)}else{l()}},asDialog:function(m){m=h.extend(true,{},m);var k=this;var n;var l=!!m.modeless;this.dialog=n=new b({id:m.id,trigger:m.trigger,windowTitle:(m.windowTitle!==undefined?m.windowTitle:!l),width:(l)?g.WIDTH_PRESETS.medium:g.WIDTH_PRESETS.large,defineResources:function(){this.requireContext("jira.create.issue")},content:function(o){k.render().done(function(){o(k.$element)});k.triggerEvent("dialogShown")},submitHandler:function(p,o){p.preventDefault();k.currentView.submit().then(o,o)},stacked:true,modeless:l});if(m.id==="edit-issue-dialog"){h(this.dialog).on("beforeShow",function(o){if(!f.getIssueKey()&&!d.isRowSelected()){o.preventDefault()}})}this.dialog._focusFirstField=function(){b.prototype._focusFirstField.apply(this,["div.content :input:visible:first"])};this.bind("initialized",function(){this.unconfigurableForm.bind("sessionComplete",function(){n.hide()});this.configurableForm.bind("sessionComplete",function(){n.hide()})}).bind("contentRefreshed",function(){n.notifyOfNewContent()});n.bind("Dialog.hide",function(){if(k.successData.length){k.triggerEvent("sessionComplete",[k.successData],true);k.successData=[]}});k.$element.ajaxStart(function(){n.showFooterLoadingIndicator()}).ajaxStop(function(){n.hideFooterLoadingIndicator()});n.getQuickForm=function(){return k};n.dirtyFormWarning();return n},lazyInit:function(){var k=this;var l=this.options.call(this);this.model=l.model;this.errorHandler=l.errorHandler;this.globalEventNamespaces=l.globalEventNamespaces;this.configurableForm=l.configurableForm;this.unconfigurableForm=l.unconfigurableForm;this.sessionComplete=l.sessionComplete;this.model.clearRetainedFields();this.configurableForm.invalidateFieldsCache();this.model.bind("serverError",function(n,m){k.$element.html(k.errorHandler.render(m));k.triggerEvent("contentRefreshed",[this.$element])});this.triggerEvent("initialized");this.decorateRenderers()},render:function(){var k=this;var l=h.Deferred();this.lazyInit();k.model.getUseConfigurableForm().done(function(m){if(m===true){k.configurableForm.render().done(function(o,n){l.resolveWith(k,[k.$element]);k.$element.append(n)})}else{k.unconfigurableForm.render().done(function(o,n){l.resolveWith(k,[k.$element,n]);k.$element.append(n)})}}).fail(function(){l.resolveWith(k,[k.$element])});return l.promise()}})});AJS.namespace("JIRA.Forms.Container",null,require("quick-edit/form/container"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/error/error.js' */
define("quick-edit/form/error",["quick-edit/util/control","quick-edit/templates/form","jira/ajs/ajax/smart-ajax"],function(c,a,b){return c.extend({getErrorMessageFromSmartAjax:function(d){var f,g;if(d.hasData&&d.status!==401){try{g=JSON.parse(d.data);if(g.errorMessages&&g.errorMessages.length>0){f=a.errorMessage({message:g.errorMessages[0]})}else{f=b.buildDialogErrorContent(d,true).html()}}catch(h){f=b.buildDialogErrorContent(d,true).html()}}else{f=b.buildDialogErrorContent(d,true).html()}return f},render:function(e){var d=this.getErrorMessageFromSmartAjax(e);return this._render(d)}})});AJS.namespace("JIRA.Forms.Error",null,require("quick-edit/form/error"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/error/create-issue.js' */
define("quick-edit/form/error/create-issue",["quick-edit/form/error","quick-edit/templates/issue","jquery"],function(c,a,b){return c.extend({_render:function(d){return b(a.createIssueError({errorHtml:d}))}})});AJS.namespace("JIRA.Forms.CreateIssueError",null,require("quick-edit/form/error/create-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/error/edit-issue.js' */
define("quick-edit/form/error/edit-issue",["quick-edit/form/error","quick-edit/templates/issue","jquery"],function(c,a,b){return c.extend({_render:function(d){return b(a.editIssueError({errorHtml:d}))}})});AJS.namespace("JIRA.Forms.EditIssueError",null,require("quick-edit/form/error/edit-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/unconfigurable/create-issue.js' */
define("quick-edit/form/unconfigurable-create-issue",["quick-edit/form/abstract/unconfigurable","quick-edit/form/helper/helper","quick-edit/templates/issue","quick-edit/util/jira","jira/util/users/logged-in-user","wrm/context-path","jquery"],function(g,c,d,a,f,b,e){return g.extend({init:function(h){this._serialization={};this.globalEventNamespaces=h.globalEventNamespaces||[];this.model=h.model;this.helper=new c(this);this.title=h.title;this.action=b()+"/secure/QuickCreateIssue.jspa?decorator=none";this.$element=e("<div class='qf-unconfigurable-form' />")},handleSubmitSuccess:function(h){this.helper.handleSubmitSuccess(h)},_render:function(){var i=e.Deferred(),h=this;this.getFieldsHtml().done(function(j){h.model.getIssueSetupFields().done(function(m){var l=d.createIssueForm({issueSetupFields:m,fieldsHtml:j,parentIssueId:h.model.getParentIssueId(),atlToken:h.model.getAtlToken(),formToken:h.model.getFormToken(),title:h.title,multipleMode:h.model.isInMultipleMode(),showFieldConfigurationToolBar:!f.isAnonymous(),modifierKey:a.getModifierKey()}),k=a.extractScripts(l);h.$element.empty().append(k.html);h.helper.restoreFormDirtyStatus();h.helper.decorate();h.helper.decorateFields();i.resolveWith(h,[h.$element,k.scripts])})});return i.promise()}})});AJS.namespace("JIRA.Forms.UnconfigurableCreateIssueForm",null,require("quick-edit/form/unconfigurable-create-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/unconfigurable/edit-issue.js' */
define("quick-edit/form/unconfigurable-edit-issue",["quick-edit/form/abstract/unconfigurable","quick-edit/util/jira","quick-edit/templates/issue","jira/util/users/logged-in-user","wrm/context-path","jquery"],function(f,a,c,e,b,d){return f.extend({init:function(g){this.globalEventNamespaces=g.globalEventNamespaces||[];this.model=g.model;this.issueId=g.issueId;this.title=g.title;this.action=b()+"/secure/QuickEditIssue.jspa?issueId="+g.issueId+"&decorator=none";this.$element=d("<div class='qf-unconfigurable-form' />")},getFieldsHtml:function(){var g=this,h=d.Deferred(),i={};this.model.getUnconfigurableTabs().done(function(j){if(j.length===1){i.fields=j[0].fields}else{i.tabs=j;i.hasTabs=true}h.resolveWith(g,[c.issueFields(i)])});return h.promise()},handleSubmitSuccess:function(g){this.triggerEvent("submitted",[g]);this.triggerEvent("issueEdited",[g],true);this.triggerEvent("sessionComplete")},_render:function(){var h=d.Deferred(),g=this;this.getFieldsHtml().done(function(i){var j={fieldsHtml:i,title:g.title,issueId:g.issueId,atlToken:g.model.getAtlToken(),formToken:g.model.getFormToken(),modifierKey:a.getModifierKey(),showFieldConfigurationToolBar:!e.isAnonymous(),additionalCommentFieldsHtml:g.model.getAdditionalCommentFieldsHtml()};this.model.getCommentField().then(function(m){var l,k;j.commentField=m;l=c.editIssueForm(j);k=a.extractScripts(l);g.$element.html(k.html);h.resolveWith(g,[g.$element,k.scripts])},function(){var l=c.editIssueForm(j),k=a.extractScripts(l);g.$element.html(k.html);h.resolveWith(g,[g.$element,k.scripts])})});return h.promise()}})});AJS.namespace("JIRA.Forms.UnconfigurableEditIssueForm",null,require("quick-edit/form/unconfigurable-edit-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/factory/create-issue.js' */
define("quick-edit/form/factory/create-issue",["quick-edit/form/container","quick-edit/form/configurable/create-issue","quick-edit/form/unconfigurable-create-issue","quick-edit/form/error/create-issue","quick-edit/form/model/create-issue"],function(e,d,c,b,a){return function(f){f=f||{};return new e(function(){f.globalEventNamespaces=f.globalEventNamespaces||["QuickCreateIssue"];var j="Create Issue",g=new a({projectId:f.pid,issueType:f.issueType}),i=new d({model:g,title:j,globalEventNamespaces:f.globalEventNamespaces}),h=new c({model:g,title:j,globalEventNamespaces:f.globalEventNamespaces});return{globalEventNamespaces:f.globalEventNamespaces,model:g,errorHandler:new b(),configurableForm:i,unconfigurableForm:h}})}});AJS.namespace("JIRA.Forms.createCreateIssueForm",null,require("quick-edit/form/factory/create-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/factory/create-subtask.js' */
define("quick-edit/form/factory/create-subtask",["quick-edit/form/container","quick-edit/form/configurable/create-issue","quick-edit/form/error/create-issue","quick-edit/form/model/create-issue","quick-edit/form/unconfigurable-create-issue","quick-edit/util/dialog","jira/issue","jira/issuenavigator/issue-navigator"],function(d,e,f,b,a,g,h,c){function j(k){return k.parentIssueId||h.getIssueId()||c.getSelectedIssueId()}return function i(k){k=k||{};return new d(function(){k.globalEventNamespaces=k.globalEventNamespaces||["QuickCreateSubtask"];var o=j(k),p=g.getIssueActionTitle("Create Subtask"),l=new b({parentIssueId:o,projectId:k.pid,issueType:k.issueType}),n=new e({model:l,title:p,globalEventNamespaces:k.globalEventNamespaces}),m=new a({model:l,title:p,globalEventNamespaces:k.globalEventNamespaces});return{globalEventNamespaces:k.globalEventNamespaces,model:l,errorHandler:new f(),configurableForm:n,unconfigurableForm:m}})}});AJS.namespace("JIRA.Forms.createSubtaskForm",null,require("quick-edit/form/factory/create-subtask"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/factory/edit-issue.js' */
define("quick-edit/form/factory/edit-issue",["quick-edit/form/container","quick-edit/form/configurable/edit-issue","quick-edit/form/error/edit-issue","quick-edit/util/dialog","quick-edit/form/model/factory/edit-issue","quick-edit/form/unconfigurable-edit-issue","jira/issue","jira/issuenavigator/issue-navigator","jquery"],function(e,a,f,g,c,i,h,d,k){function j(l){var m=g.getAttrFromActiveTrigger("data-issueId");if(k.isFunction(l.issueId)){return l.issueId(l)}else{if(l.issueId){return l.issueId}else{if(m){return m}else{return h.getIssueId()||d.getSelectedIssueId()}}}}function b(){var l="Edit Issue";if(g.shouldShowIssueKeyInTitle()){return g.getIssueActionTitle(l)}else{return l}}return function(l){l=l||{};return new e(function(){var q=j(l),p=b(),m=c(q),o=new a({title:p,model:m,issueId:q,globalEventNamespaces:["QuickEdit"]}),n=new i({title:p,model:m,issueId:q,globalEventNamespaces:["QuickEdit"]});return{globalEventNamespaces:["QuickEdit"],model:m,errorHandler:new f(),configurableForm:o,unconfigurableForm:n}})}});AJS.namespace("JIRA.Forms.createEditIssueForm",null,require("quick-edit/form/factory/edit-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:loading-indicator', location = 'js/util/loading-indicator.js' */
define("quick-edit/util/loading-indicator",["jira/loading/loading","jira/flag"],function(b,d){var c=AJS.dim;var a=AJS.undim;return{showLoadingIndicator:function(){c();b.showLoadingIndicator()},hideLoadingIndicator:function(e){a();b.hideLoadingIndicator();if(e){d.showErrorMsg(null,"The JIRA server could not be contacted. This may be a temporary glitch or the server may be down.")}}}});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-edit-issue-bootstrap', location = 'js/init/edit-bootstrap-wrm.js' */
require(["jquery","underscore","wrm/require","quick-edit/util/loading-indicator","jira/ajs/keyboardshortcut/keyboard-shortcut-toggle"],function(i,h,e,f,b){var d=function(){b.disable();f.showLoadingIndicator()};var c=function(){f.hideLoadingIndicator(true);b.enable()};var g;var a=function(l){l.preventDefault();d();var k="wr!com.atlassian.jira.jira-quick-edit-plugin:quick-edit-issue";var j=e([k]);j.then(function(){var n=require("quick-edit/init/edit");if(!g){g=n.initDialog()}g._events.trigger.simpleClick.call(g,l,i(l.target));b.enable()},function m(){c()})};i(document).delegate(".issueaction-edit-issue","click",a)});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-edit-issue', location = 'js/init/edit.js' */
define("quick-edit/init/edit",["quick-edit/form/factory/edit-issue","quick-edit/util/dialog","aui/tabs","jquery"],function(c,a,d,e){var b=function(){var f=c().asDialog({windowTitle:function(){return a.getIssueActionTitle("Edit Issue")},id:"edit-issue-dialog"});e(document).bind("dialogContentReady",function(){d.setup()});return f};return{initDialog:b}});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue-bootstrap', location = 'js/init/create-bootstrap-wrm.js' */
require(["jquery","underscore","wrm/require","quick-edit/util/loading-indicator","jira/ajs/keyboardshortcut/keyboard-shortcut-toggle"],function(l,k,h,i,b){var f=function(){b.disable();i.showLoadingIndicator()};var c=function(){i.hideLoadingIndicator(true);b.enable()};var g;var a=false;l(document).on("simpleClick",".create-issue, .create-issue-type",function(o){o.preventDefault();if(!a){a=true;f();var n="wr!com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue";var m=h([n]);m.then(d.bind(undefined,o),function p(){c();a=false})}});var d=function(n){var m=require("quick-edit/init/create");m.initIssueDialog(n);b.enable();a=false};l(function(){g=document.getElementById("stqc_show");if(g){g.onclick=null}});var j=false;l(document).on("simpleClick",".issueaction-create-subtask",function(o){o.preventDefault();if(!j){j=true;f();var n="wr!com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue";var m=h([n]);m.then(e,function p(){c();j=false})}});var e=function(n){var m=require("quick-edit/init/create");m.initSubtaskDialog(n);b.enable();j=false}});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue', location = 'js/init/create.js' */
define("quick-edit/init/create",["quick-edit/form/factory/create-issue","quick-edit/form/factory/create-subtask","quick-edit/util/dialog","jquery"],function(d,b,a,e){var c=function(j){var g=e(j.target);var i=g.is("a")?g:g.find("a");var k=parseUri(i.attr("href")).queryKey;var h={pid:k.pid,issueType:k.issuetype};h=e.extend(h,{pid:g.attr("data-pid"),issueType:g.attr("data-issue-type")});d(h).asDialog({trigger:document.createElement("a"),id:"create-issue-dialog",windowTitle:"Create Issue"}).show()};var f=function(j){var g=e(j.target);var i=g.is("a")?g:g.find("a");var h={parentIssueId:i.attr("data-issueid")};b(h).asDialog({windowTitle:function(){return a.getIssueActionTitle("Create Subtask")},trigger:document.createElement("a"),id:"create-subtask-dialog"}).show()};return{initIssueDialog:c,initSubtaskDialog:f}});;
;
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/store-1.3.1.js' */
(function(){var l={},h=window,k=h.document,c="localStorage",n="globalStorage",d="__storejs__",g;l.disabled=false;l.set=function(e,o){};l.get=function(e){};l.remove=function(e){};l.clear=function(){};l.transact=function(e,o){var p=l.get(e);if(typeof p=="undefined"){p={}}o(p);l.set(e,p)};l.serialize=function(e){return JSON.stringify(e)};l.deserialize=function(e){if(typeof e!="string"){return undefined}return JSON.parse(e)};function b(){try{return(c in h&&h[c])}catch(e){return false}}function m(){try{return(n in h&&h[n]&&h[n][h.location.hostname])}catch(e){return false}}if(b()){g=h[c];l.set=function(e,o){if(o===undefined){return l.remove(e)}g.setItem(e,l.serialize(o))};l.get=function(e){return l.deserialize(g.getItem(e))};l.remove=function(e){g.removeItem(e)};l.clear=function(){g.clear()}}else{if(m()){g=h[n][h.location.hostname];l.set=function(e,o){if(o===undefined){return l.remove(e)}g[e]=l.serialize(o)};l.get=function(e){return l.deserialize(g[e]&&g[e].value)};l.remove=function(e){delete g[e]};l.clear=function(){for(var e in g){delete g[e]}}}else{if(k.documentElement.addBehavior){var j,f;try{f=new ActiveXObject("htmlfile");f.open();f.write('<script>document.w=window<\/script><iframe src="/favicon.ico"></frame>');f.close();j=f.w.frames[0].document;g=j.createElement("div")}catch(i){g=k.createElement("div");j=k.body}function a(e){return function(){var p=Array.prototype.slice.call(arguments,0);p.unshift(g);j.appendChild(g);g.addBehavior("#default#userData");g.load(c);var o=e.apply(l,p);j.removeChild(g);return o}}l.set=a(function(p,e,o){if(o===undefined){return l.remove(e)}p.setAttribute(e,l.serialize(o));p.save(c)});l.get=a(function(o,e){return l.deserialize(o.getAttribute(e))});l.remove=a(function(o,e){o.removeAttribute(e);o.save(c)});l.clear=a(function(q){var o=q.XMLDocument.documentElement.attributes;q.load(c);for(var p=0,e;e=o[p];p++){q.removeAttribute(e.name)}q.save(c)})}}}try{l.set(d,d);if(l.get(d)!=d){l.disabled=true}l.remove(d)}catch(i){l.disabled=true}if(typeof module!="undefined"){module.exports=l}else{if(typeof define==="function"&&define.amd){define(l)}else{this.store=l}}})();;
;
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/page-visibility.js' */
define("atlassian/analytics/page-visibility",function(){var a=(document.hidden!==undefined);var b={supported:a,isHidden:function(){return a?document.hidden:false}};return b});;
;
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/user-activity-xhr-header.js' */
define("atlassian/analytics/user-activity-xhr-header",["atlassian/analytics/page-visibility"],function(c){var e="x-atlassian-mau-ignore";var d=XMLHttpRequest.prototype.send;var a=window.fetch;var b=false;return{install:function(){if(!b&&c.supported){XMLHttpRequest.prototype.send=function(){if(c.isHidden()){this.setRequestHeader(e,c.isHidden())}d.apply(this,arguments)};if(a){window.fetch=function(f,i){var g=i||{};var h=g.headers;if(c.isHidden()){g.headers=(h)?new Headers(h):new Headers();g.headers.append(e,c.isHidden())}return a.call(this,f,g)}}b=true}},uninstall:function(){if(b){XMLHttpRequest.prototype.send=d;if(a){window.fetch=a}}b=false}}});require("atlassian/analytics/user-activity-xhr-header").install();;
;
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/atlassian-analytics.js' */
(function(d){var q=AJS.$.ajax;var l="atlassian-analytics";var j=typeof AJS.contextPath==="function"?AJS.contextPath():"";var p=null;var m=null;var g=null;var r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(z){var y=Math.random()*16|0,x=z=="x"?y:(y&3|8);return x.toString(16)});var t=function(){var x="unknown";if(document.body.id=="jira"){x="jira"}else{if(document.body.id=="com-atlassian-confluence"){x="confluence"}}m=l+"."+x;g=m+".lock"};var f=function(){if(store.get(g)){return false}store.set(g,r);return(store.get(g)===r)};var u=function(){store.set(g,null)};var i=function(){var y=[],A,B,x,z;if(AJS.EventQueue.length==0){return}y=store.get(m)||y;for(x=0,z=AJS.EventQueue.length;x<z;++x){B=AJS.EventQueue[x];if(B.name){A={name:B.name,properties:B.properties,time:B.time||0};y.push(A)}}AJS.EventQueue.length=0;store.set(m,y)};var v=0;var a=function(x){return Math.min(5000*Math.pow(2,x),5*60*1000)};var e=0;var h=function(){var A;function y(){setTimeout(h,a(v=0))}function x(){setTimeout(h,a(++v))}if(!f()){++e;if(e<20){return y()}}else{e=0}try{i();A=store.get(m);if(!A||!A.length){return y()}store.remove(m);if(!o(A)){return y()}var B=new Date().getTime();for(var z=0;z<A.length;z++){if(A[z].time>0){A[z].timeDelta=A[z].time-B}else{A[z].timeDelta=z-A.length}delete A[z].time}p=q({type:"POST",url:j+"/rest/analytics/1.0/publish/bulk",data:JSON.stringify(A),contentType:"application/json",dataType:"json"});p.fail(function(){AJS.EventQueue.concat(A);i();x()});p.done(function(){y()})}finally{u()}};var o=function(z){for(var y=z.length-1;y>=0;y--){var B="";var A=z[y];var x=A.properties;if(typeof A.name==="undefined"){B="you must provide a name for the event."}else{if(typeof x!=="undefined"&&x!==null){if(x.constructor!==Object){B="properties must be an object with key value pairs."}else{b(x)}}}if(B!==""){AJS.log("WARN: Invalid analytics event detected and ignored, "+B+"\nEvent: "+JSON.stringify(A));z.splice(y,1)}}return z.length};var b=function(z){for(var y in z){if(z.hasOwnProperty(y)){var x=z[y];if(c(x)&&k(x)){}else{if(c(x)&&x.toString){z[y]=x.toString()}else{z[y]=""}}}}};function c(x){return typeof x!=="undefined"&&x!==null}function k(x){return typeof x==="number"||typeof x==="string"||typeof x==="boolean"}var n=function(){if(p&&!(p.state()==="resolved"||p.state()==="rejected")){p.abort()}};AJS.EventQueue=AJS.EventQueue||[];var s=Array.prototype.push;AJS.EventQueue.push=function(x){x.time=new Date().getTime();s.call(AJS.EventQueue,x)};AJS.toInit(function(){t();setTimeout(h,500);w()});d(window).unload(function(){n();i()});AJS.Analytics={triggerPrivacyPolicySafeEvent:function(x,y){AJS.log("WARN: 'triggerPrivacyPolicySafeEvent' has been deprecated");AJS.EventQueue.push({name:x,properties:y})}};AJS.bind("analytics",function(x,y){AJS.EventQueue.push({name:y.name,properties:y.data})});AJS.bind("analyticsEvent",function(x,y){AJS.EventQueue.push({name:y.name,properties:y.data})});var w=function(){if(window.location.pathname.indexOf("/secure/admin/ViewApplicationProperties")>-1){AJS.$("[data-property-id='analytics-enabled']").remove()}else{if(window.location.pathname.indexOf("/secure/admin/EditApplicationProperties")>-1){var y=AJS.$(":contains(Enable Atlassian analytics)");if(y.size()>0){var x=y[y.size()-2];if(x){x.remove()}}}}}}(AJS.$));;
;
/* module-key = 'com.atlassian.analytics.analytics-client:policy-update-init', location = 'js/policy-update-init.js' */
AJS.toInit(function(){var a=WRM.data.claim("com.atlassian.analytics.analytics-client:policy-update-init.policy-update-data-provider");if(a){WRM.require("wrc!com.atlassian.analytics.analytics-client:policy-update")}});;
;
/* module-key = 'com.atlassian.analytics.analytics-client:programmatic-analytics-init', location = 'js/programmatic-analytics-init.js' */
(function(){var a=WRM.data.claim("com.atlassian.analytics.analytics-client:programmatic-analytics-init.programmatic-analytics-data-provider");if(a){WRM.require("wrc!com.atlassian.analytics.analytics-client:programmatic-analytics")}}());;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:application-header-administration-cog-resource', location = 'header/cog.js' */
var NavLinks=(function(a){a.ApplicationHeader=function(b){b.Cog=(function(){var c=function(){var d=AJS.$("#system-admin-menu-content");if(d.length>0){return d}var e=AJS.$("#admin-menu-link-content");if(e.length>0){return e}return AJS.$("#bamboo\\.global\\.header-admin\\.menu")};return{getDropdown:c}}());return b}(a.ApplicationHeader||{});return a}(NavLinks||{}));;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:administration-shortcuts-resources', location = 'adminshortcuts/adminshortcuts.soy' */
// This file was automatically generated from adminshortcuts.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.adminshortcuts.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.adminshortcuts == 'undefined') { navlinks.templates.adminshortcuts = {}; }


navlinks.templates.adminshortcuts.section = function(opt_data, opt_ignored) {
  var param5 = '<ul class="aui-list-truncate">';
  var linkList7 = opt_data.links;
  var linkListLen7 = linkList7.length;
  for (var linkIndex7 = 0; linkIndex7 < linkListLen7; linkIndex7++) {
    var linkData7 = linkList7[linkIndex7];
    param5 += '<li><a href="' + soy.$$escapeHtml(linkData7.link) + '">' + soy.$$escapeHtml(linkData7.label) + '</a></li>';
  }
  param5 += '</ul>';
  var output = '' + aui.dropdown2.section({id: 'nl-remote-admin-section', label: "Other applications", content: param5});
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.adminshortcuts.section.soyTemplateName = 'navlinks.templates.adminshortcuts.section';
}
;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:administration-shortcuts-resources', location = 'adminshortcuts/adminnavlinks.js' */
var NavLinks=(function(a){a.AdminShortcuts=(function(){var c=function(){return AJS.$.ajax({url:AJS.contextPath()+"/rest/menu/latest/admin",cache:false,dataType:"json"})};var b=function(){AJS.$("#nl-remote-admin-section").on("click","a",function(){NL.trackEvent("remoteAdminItemSelected",NL.getCurrentApplication(),$(this).attr("href"))})};return{render:function(){c().done(function(e){e=_.reject(e,function(f){return f.local===true});if(e.length){var d=navlinks.templates.adminshortcuts.section({links:e});a.ApplicationHeader.Cog.getDropdown().append(d);b()}})}}}());return a}(NavLinks||{}));;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:administration-shortcuts', location = 'adminshortcuts/adminshortcuts-cdn.js' */
AJS.toInit(function(){if(AJS.DarkFeatures&&AJS.DarkFeatures.isEnabled("rotp.admin.shortcuts")){NavLinks.AdminShortcuts.render()}});;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-projectshortcuts', location = 'projectshortcuts/projectshortcuts.soy' */
// This file was automatically generated from projectshortcuts.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.projectshortcuts.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.projectshortcuts == 'undefined') { navlinks.templates.projectshortcuts = {}; }


navlinks.templates.projectshortcuts.dialogContent = function(opt_data, opt_ignored) {
  return '' + ((opt_data.localShortcuts && opt_data.localShortcuts.length > 0) ? navlinks.templates.projectshortcuts.dialogContentShortcuts({shortcuts: opt_data.localShortcuts, listClass: 'projectshortcut-links'}) : '') + ((opt_data.remoteShortcuts != null) ? (opt_data.remoteShortcuts.length > 0) ? '<h2 class="projectshortcuts-heading">Related Links</h2>' + navlinks.templates.projectshortcuts.dialogContentShortcuts(soy.$$augmentMap(opt_data.remoteShortcuts, {shortcuts: opt_data.remoteShortcuts, listClass: 'projectshortcut-links'})) : '' : navlinks.templates.projectshortcuts.dialogLoading(null));
};
if (goog.DEBUG) {
  navlinks.templates.projectshortcuts.dialogContent.soyTemplateName = 'navlinks.templates.projectshortcuts.dialogContent';
}


navlinks.templates.projectshortcuts.headingWrapper = function(opt_data, opt_ignored) {
  return '<div class="project-dialog-header-wrapper"><div class="project-header"><img class="project-img" src="' + soy.$$escapeHtml(opt_data.logoUrl) + '"><h2 class="dialog-title">' + soy.$$escapeHtml(opt_data.title) + '</h2></div><div class="project-content-wrapper">' + soy.$$filterNoAutoescape(opt_data.contentHtml) + '</div></div>';
};
if (goog.DEBUG) {
  navlinks.templates.projectshortcuts.headingWrapper.soyTemplateName = 'navlinks.templates.projectshortcuts.headingWrapper';
}


navlinks.templates.projectshortcuts.dialogContentShortcuts = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '<ul' + ((opt_data.listClass) ? ' class="' + soy.$$escapeHtml(opt_data.listClass) + '"' : '') + '>';
  var shortcutList35 = opt_data.shortcuts;
  var shortcutListLen35 = shortcutList35.length;
  for (var shortcutIndex35 = 0; shortcutIndex35 < shortcutListLen35; shortcutIndex35++) {
    var shortcutData35 = shortcutList35[shortcutIndex35];
    output += '<li' + ((shortcutIndex35 == shortcutListLen35 - 1) ? ' class="last"' : '') + '>' + navlinks.templates.projectshortcuts.dialogContentShortcut(shortcutData35) + '</li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.projectshortcuts.dialogContentShortcuts.soyTemplateName = 'navlinks.templates.projectshortcuts.dialogContentShortcuts';
}


navlinks.templates.projectshortcuts.dialogContentShortcut = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(opt_data.link) + '"' + ((opt_data.tooltip) ? ' title="' + soy.$$escapeHtml(opt_data.tooltip) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.label) + '</a>';
};
if (goog.DEBUG) {
  navlinks.templates.projectshortcuts.dialogContentShortcut.soyTemplateName = 'navlinks.templates.projectshortcuts.dialogContentShortcut';
}


navlinks.templates.projectshortcuts.dialogLoading = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="projectshortcuts-loading">' + ((opt_data.text) ? soy.$$escapeHtml(opt_data.text) : '') + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.projectshortcuts.dialogLoading.soyTemplateName = 'navlinks.templates.projectshortcuts.dialogLoading';
}
;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-projectshortcuts', location = 'projectshortcuts/projectshortcuts.js' */
(function(e,g){var i,k={},m="key",b="name",j="entity-type";function f(s){var n=e(this),o=n.data(m),q=n.data(b),p=n.data(j);if(typeof o==="undefined"){return}s.preventDefault();i=new AJS.Dialog({width:600,keypressListener:function(u){if(u.which==jQuery.ui.keyCode.ESCAPE){i.remove()}},id:"project-shortcuts-dialog"}).addCancel("Close",function(){i.remove()}).addPanel("",navlinks.templates.projectshortcuts.headingWrapper({title:q,logoUrl:h(),contentHtml:navlinks.templates.projectshortcuts.dialogLoading({text:"Retrieving links"})})).show();c(i);if(!k[o]){k[o]={entity:{title:q},localShortcuts:null,remoteShortcuts:null};d(AJS.contextPath()+"/rest/project-shortcuts/1.0/local/"+o,{entityType:p}).done(t);d(AJS.contextPath()+"/rest/project-shortcuts/1.0/remote/"+o,{entityType:p}).done(r).fail(function(){var u=i.getCurrentPanel().body.find(".project-content-wrapper");u.find(".projectshortcuts-loading").remove();AJS.messages.error(u,{body:"Could not retrieve remote project shortcuts",closeable:false});c(i)})}else{l(k[o])}function t(u){k[o].localShortcuts=u.shortcuts;l(k[o])}function r(u){k[o].remoteShortcuts=u.shortcuts;l(k[o])}}function h(){return e(".project-shortcut-dialog-trigger img").attr("src")}function l(n){if(n.localShortcuts){i.getCurrentPanel().html(navlinks.templates.projectshortcuts.headingWrapper({title:n.entity.title,logoUrl:h(),contentHtml:navlinks.templates.projectshortcuts.dialogContent(n)}));c(i)}}function a(p){var o=210;if(!p||p.length<=o){return p}var n=o;while(n>0&&p.charAt(n)!=" "){n--}if(n==0){n=o}p=p.substring(0,n);if(p.length>=n){p=p+"..."}return p}function c(n){var q=n.popup.element,p=q.find(".dialog-panel-body"),o=q.find(".dialog-components");p.height("auto");q.height(o.outerHeight()-1);e(".aui-shadow").remove()}function d(n,o){return e.ajax({url:n,cache:false,data:o,dataType:"json"})}e(document).on("click",".project-shortcut-dialog-trigger",f)}(jQuery,window.NL=(window.NL||{})));;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:atlassian-ui-popup-display-controller', location = 'popups/DisplayController.js' */
AJS.Popups=AJS.Popups||{};AJS.Popups.DisplayController=function(){var c=[];var a=false;var b=false;AJS.toInit(function(){setTimeout(function(){AJS.Popups.DisplayController.render()},0)});return{request:function(d){c.push(d);if(a&&b===false){this.render()}},render:function(){c.sort(function(e,d){return e.weight-d.weight});a=true;if(c.length!==0){b=true;c[0].show()}}}}();;
;
/* module-key = 'com.atlassian.plugin.jslibs:moment-2.6.0', location = 'libs/moment/2.6.0/moment-2.6.0.js' */
(function(A){define("atlassian/libs/moment-2.6.0",function(){var z={};A.call(z);return z.moment})})(function(){for(var A=function(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}},z=function(a,b){var c=!0;return l(function(){c&&(!1===e.suppressDeprecationWarnings&&("undefined"!==typeof console&&console.warn)&&console.warn("Deprecation warning: "+a),c=!1);return b.apply(this,arguments)},b)},X=function(a,
b){return function(c){return j(a.call(this,c),b)}},ua=function(a,b){return function(c){return this.lang().ordinal(a.call(this,c),b)}},Y=function(){},F=function(a){Z(a);l(this,a)},G=function(a){var a=$(a),b=a.year||0,c=a.quarter||0,d=a.month||0,g=a.week||0,e=a.day||0;this._milliseconds=+(a.millisecond||0)+1E3*(a.second||0)+6E4*(a.minute||0)+36E5*(a.hour||0);this._days=+e+7*g;this._months=+d+3*c+12*b;this._data={};this._bubble()},l=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);b.hasOwnProperty("toString")&&
(a.toString=b.toString);b.hasOwnProperty("valueOf")&&(a.valueOf=b.valueOf);return a},v=function(a){return 0>a?Math.ceil(a):Math.floor(a)},j=function(a,b,c){for(var d=""+Math.abs(a);d.length<b;)d="0"+d;return(0<=a?c?"+":"":"-")+d},I=function(a,b,c,d){var g=b._milliseconds,f=b._days,b=b._months,d=null==d?!0:d;g&&a._d.setTime(+a._d+g*c);f&&aa(a,"Date",H(a,"Date")+f*c);b&&ba(a,H(a,"Month")+b*c);d&&e.updateOffset(a,f||b)},J=function(a){return"[object Array]"===Object.prototype.toString.call(a)},ca=function(a,
b,c){var d=Math.min(a.length,b.length),g=Math.abs(a.length-b.length),e=0,h;for(h=0;h<d;h++)(c&&a[h]!==b[h]||!c&&i(a[h])!==i(b[h]))&&e++;return e+g},r=function(a){if(a)var b=a.toLowerCase().replace(/(.)s$/,"$1"),a=va[a]||wa[b]||b;return a},$=function(a){var b={},c,d;for(d in a)a.hasOwnProperty(d)&&(c=r(d))&&(b[c]=a[d]);return b},xa=function(a){var b,c;if(0===a.indexOf("week"))b=7,c="day";else if(0===a.indexOf("month"))b=12,c="month";else return;e[a]=function(d,g){var f,h,i=e.fn._lang[a],j=[];"number"===
typeof d&&(g=d,d=void 0);h=function(a){a=e().utc().set(c,a);return i.call(e.fn._lang,a,d||"")};if(null!=g)return h(g);for(f=0;f<b;f++)j.push(h(f));return j}},i=function(a){var a=+a,b=0;0!==a&&isFinite(a)&&(b=0<=a?Math.floor(a):Math.ceil(a));return b},K=function(a,b){return(new Date(Date.UTC(a,b+1,0))).getUTCDate()},da=function(a,b,c){return B(e([a,11,31+b-c]),b,c).week},L=function(a){return 0===a%4&&0!==a%100||0===a%400},Z=function(a){var b;if(a._a&&-2===a._pf.overflow){b=0>a._a[s]||11<a._a[s]?s:
1>a._a[o]||a._a[o]>K(a._a[p],a._a[s])?o:0>a._a[m]||23<a._a[m]?m:0>a._a[w]||59<a._a[w]?w:0>a._a[C]||59<a._a[C]?C:0>a._a[D]||999<a._a[D]?D:-1;if(a._pf._overflowDayOfYear&&(b<p||b>o))b=o;a._pf.overflow=b}},ea=function(a){null==a._isValid&&(a._isValid=!isNaN(a._d.getTime())&&0>a._pf.overflow&&!a._pf.empty&&!a._pf.invalidMonth&&!a._pf.nullInput&&!a._pf.invalidFormat&&!a._pf.userInvalidated,a._strict&&(a._isValid=a._isValid&&0===a._pf.charsLeftOver&&0===a._pf.unusedTokens.length));return a._isValid},M=
function(a){return a?a.toLowerCase().replace("_","-"):a},N=function(a,b){return b._isUTC?e(a).zone(b._offset||0):e(a).local()},q=function(a){var b=0,c,d,g,f,h=function(a){if(!x[a]&&ya)try{require("./lang/"+a)}catch(b){}return x[a]};if(!a)return e.fn._lang;if(!J(a)){if(d=h(a))return d;a=[a]}for(;b<a.length;){f=M(a[b]).split("-");c=f.length;for(g=(g=M(a[b+1]))?g.split("-"):null;0<c;){if(d=h(f.slice(0,c).join("-")))return d;if(g&&g.length>=c&&ca(f,g,!0)>=c-1)break;c--}b++}return e.fn._lang},P=function(a,
b){if(!a.isValid())return a.lang().invalidDate();b=fa(b,a.lang());if(!O[b]){var c=O,d=b,g=b,e=g.match(ga),h,i;h=0;for(i=e.length;h<i;h++)e[h]=t[e[h]]?t[e[h]]:e[h].match(/\[[\s\S]/)?e[h].replace(/^\[|\]$/g,""):e[h].replace(/\\/g,"");c[d]=function(a){var b="";for(h=0;h<i;h++)b+=e[h]instanceof Function?e[h].call(a,g):e[h];return b}}return O[b](a)},fa=function(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(E.lastIndex=0;0<=d&&E.test(a);)a=a.replace(E,c),E.lastIndex=0,d-=1;return a},Ka=function(a,
b){var c=b._strict;switch(a){case "Q":return ha;case "DDDD":return ia;case "YYYY":case "GGGG":case "gggg":return c?za:Aa;case "Y":case "G":case "g":return Ba;case "YYYYYY":case "YYYYY":case "GGGGG":case "ggggg":return c?Ca:Da;case "S":if(c)return ha;case "SS":if(c)return ja;case "SSS":if(c)return ia;case "DDD":return Ea;case "MMM":case "MMMM":case "dd":case "ddd":case "dddd":return Fa;case "a":case "A":return q(b._l)._meridiemParse;case "X":return Ga;case "Z":case "ZZ":return Q;case "T":return Ha;
case "SSSS":return Ia;case "MM":case "DD":case "YY":case "GG":case "gg":case "HH":case "hh":case "mm":case "ss":case "ww":case "WW":return c?ja:ka;case "M":case "D":case "d":case "H":case "h":case "m":case "s":case "w":case "W":case "e":case "E":return ka;case "Do":return Ja;default:var c=RegExp,d;d=a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");return c(d)}},la=function(a){var a=(a||"").match(Q)||[],
a=((a[a.length-1]||[])+"").match(La)||["-",0,0],b=+(60*a[1])+i(a[2]);return"+"===a[0]?-b:b},S=function(a){var b,c=[],d,g,f,h,j;if(!a._d){d=new Date;d=a._useUTC?[d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()]:[d.getFullYear(),d.getMonth(),d.getDate()];a._w&&(null==a._a[o]&&null==a._a[s])&&(b=function(b){var c=parseInt(b,10);return b?3>b.length?68<c?1900+c:2E3+c:c:null==a._a[p]?e().weekYear():a._a[p]},g=a._w,null!=g.GG||null!=g.W||null!=g.E?b=ma(b(g.GG),g.W||1,g.E,4,1):(f=q(a._l),h=null!=g.d?na(g.d,
f):null!=g.e?parseInt(g.e,10)+f._week.dow:0,j=parseInt(g.w,10)||1,null!=g.d&&h<f._week.dow&&j++,b=ma(b(g.gg),j,h,f._week.doy,f._week.dow)),a._a[p]=b.year,a._dayOfYear=b.dayOfYear);if(a._dayOfYear){b=null==a._a[p]?d[p]:a._a[p];if(a._dayOfYear>(L(b)?366:365))a._pf._overflowDayOfYear=!0;b=R(b,0,a._dayOfYear);a._a[s]=b.getUTCMonth();a._a[o]=b.getUTCDate()}for(b=0;3>b&&null==a._a[b];++b)a._a[b]=c[b]=d[b];for(;7>b;b++)a._a[b]=c[b]=null==a._a[b]?2===b?1:0:a._a[b];c[m]+=i((a._tzm||0)/60);c[w]+=i((a._tzm||
0)%60);a._d=(a._useUTC?R:Ma).apply(null,c)}},T=function(a){a._a=[];a._pf.empty=!0;var b=q(a._l),c=""+a._i,d,g,f,h,j=c.length,k=0;g=fa(a._f,b).match(ga)||[];for(b=0;b<g.length;b++){f=g[b];if(d=(c.match(Ka(f,a))||[])[0])h=c.substr(0,c.indexOf(d)),0<h.length&&a._pf.unusedInput.push(h),c=c.slice(c.indexOf(d)+d.length),k+=d.length;if(t[f]){d?a._pf.empty=!1:a._pf.unusedTokens.push(f);h=a;var l=void 0,n=h._a;switch(f){case "Q":null!=d&&(n[s]=3*(i(d)-1));break;case "M":case "MM":null!=d&&(n[s]=i(d)-1);break;
case "MMM":case "MMMM":l=q(h._l).monthsParse(d);null!=l?n[s]=l:h._pf.invalidMonth=d;break;case "D":case "DD":null!=d&&(n[o]=i(d));break;case "Do":null!=d&&(n[o]=i(parseInt(d,10)));break;case "DDD":case "DDDD":null!=d&&(h._dayOfYear=i(d));break;case "YY":n[p]=e.parseTwoDigitYear(d);break;case "YYYY":case "YYYYY":case "YYYYYY":n[p]=i(d);break;case "a":case "A":h._isPm=q(h._l).isPM(d);break;case "H":case "HH":case "h":case "hh":n[m]=i(d);break;case "m":case "mm":n[w]=i(d);break;case "s":case "ss":n[C]=
i(d);break;case "S":case "SS":case "SSS":case "SSSS":n[D]=i(1E3*("0."+d));break;case "X":h._d=new Date(1E3*parseFloat(d));break;case "Z":case "ZZ":h._useUTC=!0;h._tzm=la(d);break;case "w":case "ww":case "W":case "WW":case "d":case "dd":case "ddd":case "dddd":case "e":case "E":f=f.substr(0,1);case "gg":case "gggg":case "GG":case "GGGG":case "GGGGG":f=f.substr(0,2),d&&(h._w=h._w||{},h._w[f]=d)}}else a._strict&&!d&&a._pf.unusedTokens.push(f)}a._pf.charsLeftOver=j-k;0<c.length&&a._pf.unusedInput.push(c);
a._isPm&&12>a._a[m]&&(a._a[m]+=12);!1===a._isPm&&12===a._a[m]&&(a._a[m]=0);S(a);Z(a)},Ma=function(a,b,c,d,e,f,h){b=new Date(a,b,c,d,e,f,h);1970>a&&b.setFullYear(a);return b},R=function(a){var b=new Date(Date.UTC.apply(null,arguments));1970>a&&b.setUTCFullYear(a);return b},na=function(a,b){if("string"===typeof a)if(isNaN(a)){if(a=b.weekdaysParse(a),"number"!==typeof a)return null}else a=parseInt(a,10);return a},Na=function(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)},B=function(a,b,c){b=c-b;c-=
a.day();c>b&&(c-=7);c<b-7&&(c+=7);a=e(a).add("d",c);return{week:Math.ceil(a.dayOfYear()/7),year:a.year()}},ma=function(a,b,c,d,e){var f=R(a,0,1).getUTCDay(),b=7*(b-1)+((null!=c?c:e)-e)+(e-f+(f>d?7:0)-(f<e?7:0))+1;return{year:0<b?a:a-1,dayOfYear:0<b?b:(L(a-1)?366:365)+b}},pa=function(a){var b=a._i,c=a._f;if(null===b||void 0===c&&""===b)return e.invalid({nullInput:!0});"string"===typeof b&&(a._i=b=q().preparse(b));if(e.isMoment(b)){var a=b,d={},g;for(g in a)a.hasOwnProperty(g)&&oa.hasOwnProperty(g)&&
(d[g]=a[g]);a=d;a._d=new Date(+b._d)}else if(c)if(J(c)){var b=a,f,h;if(0===b._f.length)b._pf.invalidFormat=!0,b._d=new Date(NaN);else{for(g=0;g<b._f.length;g++)if(c=0,d=l({},b),d._pf=A(),d._f=b._f[g],T(d),ea(d)&&(c+=d._pf.charsLeftOver,c+=10*d._pf.unusedTokens.length,d._pf.score=c,null==h||c<h))h=c,f=d;l(b,f||d)}}else T(a);else if(d=a,f=d._i,h=Oa.exec(f),void 0===f)d._d=new Date;else if(h)d._d=new Date(+h[1]);else if("string"===typeof f)if(b=d._i,g=Pa.exec(b)){d._pf.iso=!0;f=0;for(h=U.length;f<h;f++)if(U[f][1].exec(b)){d._f=
U[f][0]+(g[6]||" ");break}f=0;for(h=V.length;f<h;f++)if(V[f][1].exec(b)){d._f+=V[f][0];break}b.match(Q)&&(d._f+="Z");T(d)}else e.createFromInputFallback(d);else J(f)?(d._a=f.slice(0),S(d)):"[object Date]"===Object.prototype.toString.call(f)||f instanceof Date?d._d=new Date(+f):"object"===typeof f?d._d||(f=$(d._i),d._a=[f.year,f.month,f.day,f.hour,f.minute,f.second,f.millisecond],S(d)):"number"===typeof f?d._d=new Date(f):e.createFromInputFallback(d);return new F(a)},ba=function(a,b){var c;if("string"===
typeof b&&(b=a.lang().monthsParse(b),"number"!==typeof b))return a;c=Math.min(a.date(),K(a.year(),b));a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c);return a},H=function(a,b){return a._d["get"+(a._isUTC?"UTC":"")+b]()},aa=function(a,b,c){return"Month"===b?ba(a,c):a._d["set"+(a._isUTC?"UTC":"")+b](c)},u=function(a,b){return function(c){return null!=c?(aa(this,a,c),e.updateOffset(this,b),this):H(this,a)}},Qa=function(a){e.duration.fn[a]=function(){return this._data[a]}},qa=function(a,b){e.duration.fn["as"+
a]=function(){return+this/b}},e,Ra="undefined"!==typeof global?global:this,y=Math.round,k,p=0,s=1,o=2,m=3,w=4,C=5,D=6,x={},oa={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_isUTC:null,_offset:null,_pf:null,_lang:null},ya="undefined"!==typeof module&&module.exports,Oa=/^\/?Date\((\-?\d+)/i,Sa=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Ta=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,ga=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,
E=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,ka=/\d\d?/,Ea=/\d{1,3}/,Aa=/\d{1,4}/,Da=/[+\-]?\d{1,6}/,Ia=/\d+/,Fa=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Q=/Z|[\+\-]\d\d:?\d\d/gi,Ha=/T/i,Ga=/[\+\-]?\d+(\.\d{1,3})?/,Ja=/\d{1,2}/,ha=/\d/,ja=/\d\d/,ia=/\d{3}/,za=/\d{4}/,Ca=/[+-]?\d{6}/,Ba=/[+-]?\d+/,Pa=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,
U=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],V=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],La=/([\+\-]|\d\d)/gi,W={Milliseconds:1,Seconds:1E3,Minutes:6E4,Hours:36E5,Days:864E5,Months:2592E6,Years:31536E6},va={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",
M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},wa={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},O={},ra="DDD w W M D d".split(" "),sa="MDHhmswW".split(""),t={M:function(){return this.month()+1},MMM:function(a){return this.lang().monthsShort(this,a)},MMMM:function(a){return this.lang().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},
dd:function(a){return this.lang().weekdaysMin(this,a)},ddd:function(a){return this.lang().weekdaysShort(this,a)},dddd:function(a){return this.lang().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return j(this.year()%100,2)},YYYY:function(){return j(this.year(),4)},YYYYY:function(){return j(this.year(),5)},YYYYYY:function(){var a=this.year();return(0<=a?"+":"-")+j(Math.abs(a),6)},gg:function(){return j(this.weekYear()%100,2)},gggg:function(){return j(this.weekYear(),
4)},ggggg:function(){return j(this.weekYear(),5)},GG:function(){return j(this.isoWeekYear()%100,2)},GGGG:function(){return j(this.isoWeekYear(),4)},GGGGG:function(){return j(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},
s:function(){return this.seconds()},S:function(){return i(this.milliseconds()/100)},SS:function(){return j(i(this.milliseconds()/10),2)},SSS:function(){return j(this.milliseconds(),3)},SSSS:function(){return j(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";0>a&&(a=-a,b="-");return b+j(i(a/60),2)+":"+j(i(a)%60,2)},ZZ:function(){var a=-this.zone(),b="+";0>a&&(a=-a,b="-");return b+j(i(a/60),2)+j(i(a)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},
Q:function(){return this.quarter()}},ta=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];ra.length;)k=ra.pop(),t[k+"o"]=ua(t[k],k);for(;sa.length;)k=sa.pop(),t[k+k]=X(t[k],2);t.DDDD=X(t.DDD,3);l(Y.prototype,{set:function(a){var b,c;for(c in a)b=a[c],"function"===typeof b?this[c]=b:this["_"+c]=b},_months:"January February March April May June July August September October November December".split(" "),months:function(a){return this._months[a.month()]},_monthsShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a){var b,c;this._monthsParse||(this._monthsParse=[]);for(b=0;12>b;b++)if(this._monthsParse[b]||(c=e.utc([2E3,b]),c="^"+this.months(c,"")+"|^"+this.monthsShort(c,""),this._monthsParse[b]=RegExp(c.replace(".",""),"i")),this._monthsParse[b].test(a))return b},_weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),
weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su Mo Tu We Th Fr Sa".split(" "),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var b,c;this._weekdaysParse||(this._weekdaysParse=[]);for(b=0;7>b;b++)if(this._weekdaysParse[b]||(c=e([2E3,1]).day(b),c="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=RegExp(c.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b},_longDateFormat:{LT:"h:mm A",
L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b);return b},isPM:function(a){return"p"===(a+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,b,c){return 11<a?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",
nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,b){var c=this._calendar[a];return"function"===typeof c?c.apply(b):c},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,d){var e=this._relativeTime[c];return"function"===typeof e?e(a,b,c,
d):e.replace(/%d/i,a)},pastFuture:function(a,b){var c=this._relativeTime[0<a?"future":"past"];return"function"===typeof c?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",preparse:function(a){return a},postformat:function(a){return a},week:function(a){return B(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}});e=function(a,b,c,d){var e;"boolean"===typeof c&&(d=c,c=
void 0);e={_isAMomentObject:!0};e._i=a;e._f=b;e._l=c;e._strict=d;e._isUTC=!1;e._pf=A();return pa(e)};e.suppressDeprecationWarnings=!1;e.createFromInputFallback=z("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i)});e.utc=function(a,b,c,d){var e;"boolean"===typeof c&&(d=c,c=void 0);e={_isAMomentObject:!0,_useUTC:!0,_isUTC:!0};e._l=
c;e._i=a;e._f=b;e._strict=d;e._pf=A();return pa(e).utc()};e.unix=function(a){return e(1E3*a)};e.duration=function(a,b){var c=a,d=null,g;if(e.isDuration(a))c={ms:a._milliseconds,d:a._days,M:a._months};else if("number"===typeof a)c={},b?c[b]=a:c.milliseconds=a;else if(d=Sa.exec(a))g="-"===d[1]?-1:1,c={y:0,d:i(d[o])*g,h:i(d[m])*g,m:i(d[w])*g,s:i(d[C])*g,ms:i(d[D])*g};else if(d=Ta.exec(a))g="-"===d[1]?-1:1,c=function(a){a=a&&parseFloat(a.replace(",","."));return(isNaN(a)?0:a)*g},c={y:c(d[2]),M:c(d[3]),
d:c(d[4]),h:c(d[5]),m:c(d[6]),s:c(d[7]),w:c(d[8])};d=new G(c);e.isDuration(a)&&a.hasOwnProperty("_lang")&&(d._lang=a._lang);return d};e.version="2.6.0";e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";e.momentProperties=oa;e.updateOffset=function(){};e.lang=function(a,b){if(!a)return e.fn._lang._abbr;if(b){var c=M(a);b.abbr=c;x[c]||(x[c]=new Y);x[c].set(b)}else null===b?(delete x[a],a="en"):x[a]||q(a);return(e.duration.fn._lang=e.fn._lang=q(a))._abbr};e.langData=function(a){a&&(a._lang&&a._lang._abbr)&&(a=
a._lang._abbr);return q(a)};e.isMoment=function(a){return a instanceof F||null!=a&&a.hasOwnProperty("_isAMomentObject")};e.isDuration=function(a){return a instanceof G};for(k=ta.length-1;0<=k;--k)xa(ta[k]);e.normalizeUnits=function(a){return r(a)};e.invalid=function(a){var b=e.utc(NaN);null!=a?l(b._pf,a):b._pf.userInvalidated=!0;return b};e.parseZone=function(){return e.apply(null,arguments).parseZone()};e.parseTwoDigitYear=function(a){return i(a)+(68<i(a)?1900:2E3)};l(e.fn=F.prototype,{clone:function(){return e(this)},
valueOf:function(){return+this._d+6E4*(this._offset||0)},unix:function(){return Math.floor(+this/1E3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var a=e(this).utc();return 0<a.year()&&9999>=a.year()?P(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):P(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){return[this.year(),this.month(),this.date(),this.hours(),this.minutes(),
this.seconds(),this.milliseconds()]},isValid:function(){return ea(this)},isDSTShifted:function(){return this._a?this.isValid()&&0<ca(this._a,(this._isUTC?e.utc(this._a):e(this._a)).toArray()):!1},parsingFlags:function(){return l({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){this.zone(0);this._isUTC=!1;return this},format:function(a){a=P(this,a||e.defaultFormat);return this.lang().postformat(a)},add:function(a,b){var c;c="string"===
typeof a?e.duration(+b,a):e.duration(a,b);I(this,c,1);return this},subtract:function(a,b){var c;c="string"===typeof a?e.duration(+b,a):e.duration(a,b);I(this,c,-1);return this},diff:function(a,b,c){var a=N(a,this),d=6E4*(this.zone()-a.zone()),g,b=r(b);"year"===b||"month"===b?(g=432E5*(this.daysInMonth()+a.daysInMonth()),d=12*(this.year()-a.year())+(this.month()-a.month()),d+=(this-e(this).startOf("month")-(a-e(a).startOf("month")))/g,d-=6E4*(this.zone()-e(this).startOf("month").zone()-(a.zone()-e(a).startOf("month").zone()))/
g,"year"===b&&(d/=12)):(g=this-a,d="second"===b?g/1E3:"minute"===b?g/6E4:"hour"===b?g/36E5:"day"===b?(g-d)/864E5:"week"===b?(g-d)/6048E5:g);return c?d:v(d)},from:function(a,b){return e.duration(this.diff(a)).lang(this.lang()._abbr).humanize(!b)},fromNow:function(a){return this.from(e(),a)},calendar:function(){var a=N(e(),this).startOf("day"),a=this.diff(a,"days",!0);return this.format(this.lang().calendar(-6>a?"sameElse":-1>a?"lastWeek":0>a?"lastDay":1>a?"sameDay":2>a?"nextDay":7>a?"nextWeek":"sameElse",
this))},isLeapYear:function(){return L(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=na(a,this.lang()),this.add({d:a-b})):b},month:u("Month",!0),startOf:function(a){a=r(a);switch(a){case "year":this.month(0);case "quarter":case "month":this.date(1);case "week":case "isoWeek":case "day":this.hours(0);case "hour":this.minutes(0);case "minute":this.seconds(0);
case "second":this.milliseconds(0)}"week"===a?this.weekday(0):"isoWeek"===a&&this.isoWeekday(1);"quarter"===a&&this.month(3*Math.floor(this.month()/3));return this},endOf:function(a){a=r(a);return this.startOf(a).add("isoWeek"===a?"week":a,1).subtract("ms",1)},isAfter:function(a,b){b="undefined"!==typeof b?b:"millisecond";return+this.clone().startOf(b)>+e(a).startOf(b)},isBefore:function(a,b){b="undefined"!==typeof b?b:"millisecond";return+this.clone().startOf(b)<+e(a).startOf(b)},isSame:function(a,
b){b=b||"ms";return+this.clone().startOf(b)===+N(a,this).startOf(b)},min:function(a){a=e.apply(null,arguments);return a<this?this:a},max:function(a){a=e.apply(null,arguments);return a>this?this:a},zone:function(a,b){var c=this._offset||0;if(null!=a)"string"===typeof a&&(a=la(a)),16>Math.abs(a)&&(a*=60),this._offset=a,this._isUTC=!0,c!==a&&(!b||this._changeInProgress?I(this,e.duration(c-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null));
else return this._isUTC?c:this._d.getTimezoneOffset();return this},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){this._tzm?this.zone(this._tzm):"string"===typeof this._i&&this.zone(this._i);return this},hasAlignedHourOffset:function(a){a=a?e(a).zone():0;return 0===(this.zone()-a)%60},daysInMonth:function(){return K(this.year(),this.month())},dayOfYear:function(a){var b=y((e(this).startOf("day")-e(this).startOf("year"))/
864E5)+1;return null==a?b:this.add("d",a-b)},quarter:function(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)},weekYear:function(a){var b=B(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==a?b:this.add("y",a-b)},isoWeekYear:function(a){var b=B(this,1,4).year;return null==a?b:this.add("y",a-b)},week:function(a){var b=this.lang().week(this);return null==a?b:this.add("d",7*(a-b))},isoWeek:function(a){var b=B(this,1,4).week;return null==a?b:this.add("d",
7*(a-b))},weekday:function(a){var b=(this.day()+7-this.lang()._week.dow)%7;return null==a?b:this.add("d",a-b)},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)},isoWeeksInYear:function(){return da(this.year(),1,4)},weeksInYear:function(){var a=this._lang._week;return da(this.year(),a.dow,a.doy)},get:function(a){a=r(a);return this[a]()},set:function(a,b){a=r(a);if("function"===typeof this[a])this[a](b);return this},lang:function(a){if(void 0===a)return this._lang;this._lang=
q(a);return this}});e.fn.millisecond=e.fn.milliseconds=u("Milliseconds",!1);e.fn.second=e.fn.seconds=u("Seconds",!1);e.fn.minute=e.fn.minutes=u("Minutes",!1);e.fn.hour=e.fn.hours=u("Hours",!0);e.fn.date=u("Date",!0);e.fn.dates=z("dates accessor is deprecated. Use date instead.",u("Date",!0));e.fn.year=u("FullYear",!0);e.fn.years=z("years accessor is deprecated. Use year instead.",u("FullYear",!0));e.fn.days=e.fn.day;e.fn.months=e.fn.month;e.fn.weeks=e.fn.week;e.fn.isoWeeks=e.fn.isoWeek;e.fn.quarters=
e.fn.quarter;e.fn.toJSON=e.fn.toISOString;l(e.duration.fn=G.prototype,{_bubble:function(){var a=this._milliseconds,b=this._days,c=this._months,d=this._data;d.milliseconds=a%1E3;a=v(a/1E3);d.seconds=a%60;a=v(a/60);d.minutes=a%60;a=v(a/60);d.hours=a%24;b+=v(a/24);d.days=b%30;c+=v(b/30);d.months=c%12;b=v(c/12);d.years=b},weeks:function(){return v(this.days()/7)},valueOf:function(){return this._milliseconds+864E5*this._days+2592E6*(this._months%12)+31536E6*i(this._months/12)},humanize:function(a){var b=
+this,c;c=!a;var d=this.lang(),e=y(Math.abs(b)/1E3),f=y(e/60),h=y(f/60),i=y(h/24),j=y(i/365),e=45>e&&["s",e]||1===f&&["m"]||45>f&&["mm",f]||1===h&&["h"]||22>h&&["hh",h]||1===i&&["d"]||25>=i&&["dd",i]||45>=i&&["M"]||345>i&&["MM",y(i/30)]||1===j&&["y"]||["yy",j];e[2]=c;e[3]=0<b;e[4]=d;c=Na.apply({},e);a&&(c=this.lang().pastFuture(b,c));return this.lang().postformat(c)},add:function(a,b){var c=e.duration(a,b);this._milliseconds+=c._milliseconds;this._days+=c._days;this._months+=c._months;this._bubble();
return this},subtract:function(a,b){var c=e.duration(a,b);this._milliseconds-=c._milliseconds;this._days-=c._days;this._months-=c._months;this._bubble();return this},get:function(a){a=r(a);return this[a.toLowerCase()+"s"]()},as:function(a){a=r(a);return this["as"+a.charAt(0).toUpperCase()+a.slice(1)+"s"]()},lang:e.fn.lang,toIsoString:function(){var a=Math.abs(this.years()),b=Math.abs(this.months()),c=Math.abs(this.days()),d=Math.abs(this.hours()),e=Math.abs(this.minutes()),f=Math.abs(this.seconds()+
this.milliseconds()/1E3);return!this.asSeconds()?"P0D":(0>this.asSeconds()?"-":"")+"P"+(a?a+"Y":"")+(b?b+"M":"")+(c?c+"D":"")+(d||e||f?"T":"")+(d?d+"H":"")+(e?e+"M":"")+(f?f+"S":"")}});for(k in W)W.hasOwnProperty(k)&&(qa(k,W[k]),Qa(k.toLowerCase()));qa("Weeks",6048E5);e.duration.fn.asMonths=function(){return(+this-31536E6*this.years())/2592E6+12*this.years()};e.lang("en",{ordinal:function(a){var b=a%10,b=1===i(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+b}});"undefined"===typeof ender&&
(Ra.moment=e)});;
;
/* module-key = 'jira.webresources:momentjs', location = '/static/lib/moment/moment.lib.js' */
define("jira/moment/moment.lib",["atlassian/libs/moment-2.6.0"],function(n){return n});;
;
/* module-key = 'jira.webresources:momentjs', location = '/static/lib/moment/moment.jira.formatter.js' */
define("jira/moment/moment.jira.formatter",["underscore","exports"],function(t,e){"use strict";function r(e){return u[e]||t.reduce(e,function(t,e){return t+(u[e]||e)},"")}function n(e){var n=!1,u=!1,a="",o=t.reduce(e,function(t,e,o,i){return u?u=!1:"'"===e?(a&&(t+=r(a),a=""),"'"===i[o+1]?(t+=e,u=!0):(t+=n?"]":"[",n=!n)):n?t+=e:/[a-zA-Z]/.test(e)?a&&a[a.length-1]!==e?(t+=r(a),a=e):a+=e:(a&&(t+=r(a),a=""),t+=e),t},"");return a&&(o+=r(a)),o}var u={d:"D",y:"Y",a:"A",E:"d",u:"d",Z:"ZZ",z:"[GMT]ZZ",XX:"ZZ",XXX:"Z"};e.translateSimpleDateFormat=n});;
;
/* module-key = 'jira.webresources:momentjs', location = '/static/lib/moment/moment.jira.i18n.js' */
!function(){"use strict";var e;define("jira/moment/moment.jira.datetime-formats",["wrm/data"],function(t){return e||(e=t.claim("jira.webresources:dateFormatProvider.allFormats")),e})}(),define("jira/moment/moment.jira.i18n",["jira/moment/moment.lib","jira/moment/moment.jira.datetime-formats","jira/moment/moment.jira.formatter","jira/util/formatter"],function(e,t,m,a){"use strict";var r=t.dateFormats,o=t.lookAndFeelFormats;return e.lang("jira",{months:r.months,monthsShort:r.monthsShort,weekdays:r.weekdays,weekdaysShort:r.weekdaysShort,weekdaysMin:r.weekdaysShort,longDateFormat:{LT:m.translateSimpleDateFormat(o.time),L:m.translateSimpleDateFormat(o.day),LL:m.translateSimpleDateFormat(o.dmy),LLL:m.translateSimpleDateFormat(o.complete)},meridiem:function(e){return r.meridiem[+(e>11)]},calendar:{sameDay:"LLL",nextDay:"LLL",nextWeek:"LLL",lastDay:"LLL",lastWeek:"LLL",sameElse:"LLL"},relativeTime:{future:a.format("in {0}","%s"),past:a.format("{0} ago","%s"),s:"a few seconds",m:"a minute",mm:a.format("{0} minutes","%d"),h:"an hour",hh:a.format("{0} hours","%d"),d:"a day",dd:a.format("{0} days","%d"),M:"a month",MM:a.format("{0} months","%d"),y:"a year",yy:a.format("{0} years","%d")}}),e});;
;
/* module-key = 'jira.webresources:momentjs', location = '/static/lib/moment/moment.js' */
define("jira/moment",["jira/moment/moment.jira.i18n"],function(t){return t.splitDate=function(t,n){return Date.splitDate(t,n)},t});;
;
/* module-key = 'jira.webresources:momentjs', location = '/static/lib/moment/moment.legacy.js' */
!function(){AJS.namespace("JIRA.translateSimpleDateFormat",null,require("jira/moment/moment.jira.formatter").translateSimpleDateFormat),AJS.namespace("window.moment",null,require("jira/moment"))}();;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:shared-utility', location = 'js/ctrlv/time.js' */
define("dndattachment/ctrlv/time",["require"],function(a){var b=a("jira/moment");return b});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:shared-utility', location = 'js/ctrlv/base64decode.js' */
define("dndattachment/ctrlv/base64decode",["exports"],function(a){function c(d){return d>64&&d<91?d-65:d>96&&d<123?d-71:d>47&&d<58?d+4:d===43?62:d===47?63:0}var b=function(f){var m=f.replace(/[^A-Za-z0-9\+\/]/g,""),g=m.length,d=g*3+1>>2,k=new Uint8Array(d);for(var j,h,i=0,e=0,l=0;l<g;l++){h=l&3;i|=c(m.charCodeAt(l))<<18-6*h;if(h===3||g-l===1){for(j=0;j<3&&e<d;j++,e++){k[e]=i>>>(16>>>j&24)&255}i=0}}return k};a.base64decode=b;a.decodeBase64DataUri=function(e){var g=";base64,",f=e.slice(0,e.indexOf(g))+g,d=e.substring(f.length);return b(d)}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:shared-utility', location = 'js/ctrlv/utility.js' */
define("dndattachment/ctrlv/utility",["require","exports"],function(b,c){var g=b("jira/jquery/deferred");var d=b("jquery");var k=b("underscore");var i=b("dndattachment/ctrlv/base64decode");var a=b("dndattachment/ctrlv/time");var f=b("dndattachment/ctrlv/version");var j=b("jira/flag");var m=b("jira/util/navigator");c.isKeyPasteEvent=function(q,n){var o=86;var p=((n||"").indexOf("Mac")!==-1)||m.isMac();return q.which===o&&(p?q.metaKey:q.ctrlKey)};c.isImagePasteEvent=function(q){if(q&&q.clipboardData){var o=k.union(k.toArray(q.clipboardData.items),k.toArray(q.clipboardData.files));var p=o.some(function(r){return r.type.indexOf("image")!==-1});var n=o.some(function(r){return r.type.indexOf("rtf")!==-1});return p&&!n}};var h=function(o){if(!o.clipboardData||!o.clipboardData.types||!k.contains(o.clipboardData.types,"text/html")){return}var n=d(o.clipboardData.getData("text/html"));if(n.length===1&&n.children().length===0&&n[0].nodeName.toLowerCase()==="img"){return n[0].src}return null};c.getHtmlImagePaste=h;c.isHtmlImagePasteEvent=function(n){return h(n)!=null};c.isTextPasteEvent=function(n){return n.clipboardData.types&&(k.contains(n.clipboardData.types,"text/plain")||k.contains(n.clipboardData.types,"text/html"))};c.isContentEditable=function(n){return n.contentEditable=="true"||n.contentEditable==""||(n.contentEditable=="inherit"&&d(n).parents().is("[contenteditable=true]"))};c.isValidFileName=function(n){return !k(["\\","/",'"',":","?","*","<","|",">","!"]).any(function(o){return n.indexOf(o)>-1})};c.getTextPasteContent=function(n){return n.clipboardData.types&&k.contains(n.clipboardData.types,"text/plain")&&n.clipboardData.getData("text/plain")||""};c.getTextContent=function(n){if(!n){return""}else{if(m.isIE()&&typeof n.innerText!=="undefined"){return n.innerText}else{return d(n).text()}}};c.normalizePasteEvent=function(n){if(n&&n.originalEvent&&n.originalEvent.clipboardData){n.clipboardData=n.originalEvent.clipboardData}if(n&&!n.clipboardData&&window.clipboardData){n.clipboardData={files:window.clipboardData.files,types:{contains:function(o){if(o=="text/plain"){return !!window.clipboardData.getData("Text")}}},getData:function(o){if(o=="text/plain"){return window.clipboardData.getData("Text")}}}}return n};c.browserIsSupported=function(n){var p=((n||"").indexOf("Mac")!==-1)||m.isMac();var o=m.isSafari();return !(p&&o)&&!(f.isIE8()||f.isIE9()||f.isIE10())};c.browserIsNativePaste=function(){return m.isChrome()||m.isSafari()};c.isWikiTextfield=function(n){return n.is(":input")&&n.hasClass("wiki-textfield")};var e=function(n){return n.is("input#summary")};var l=function(o,v,r,t){var q=d(v);if(!(c.isWikiTextfield(q)||e(q))||!o){return}if(!q.is(":focus")){q.one("focus",function(){var w=q[0];w.selectionStart=w.selectionEnd=r+o.length})}var s=q.val();var n=s.substring(0,r);var u=s.substring(t,s.length);var p=q.data("wikiEditor");if(p&&p.undoRedoEl&&k.isFunction(p.undoRedoEl.recordHistoryItem)){p.undoRedoEl.recordHistoryItem()}q.val(n+o+u);q.trigger("input");v.selectionStart=v.selectionEnd=r+o.length;if(p&&p.undoRedoEl&&k.isFunction(p.undoRedoEl.updateCurrent)){p.undoRedoEl.updateCurrent()}};c.insertToInput=l;c.isThumbnailsAllowed=function(){var n=d("#dnd-metadata-webpanel").data("thumbnails-allowed");var o=true;if(n!=null){o=!!n}return o};c.getMarkup=function(s){var q=["bmp","gif"];var r=["pjpeg","jpeg","jpg","png"];var p=s.split(".");var o=c.isThumbnailsAllowed();var n=p[p.length-1].toLowerCase();if(o&&k.contains(r,n)){return"!"+s+"|thumbnail!"}else{if(k.contains(r,n)||k.contains(q,n)){return"!"+s+"!"}else{return"[^"+s+"]"}}};c.insertWikiMarkup=function(s,p,q,r,n){var o=c.getMarkup(s,n);if(o){o=" "+o+" ";l(o,p,q,r)}};c.loadImage=function(p){var n=new g();var o=new Image();o.setAttribute("crossOrigin","anonymous");o.onload=function(){n.resolve(o)};o.onerror=n.reject.bind(n);o.src=p;if(o.width>0&&o.height>0){n.resolve(o)}return n};c.convertImageToBlob=function(p){var n=d("<canvas>").attr("width",p.width).attr("height",p.height)[0];n.getContext("2d").drawImage(p,0,0);try{if(n.mozGetAsFile){return n.mozGetAsFile("image/png")}if(n.toDataURL){return new Blob([i.decodeBase64DataUri(n.toDataURL("image/png"))],{type:"image/png"})}}catch(o){return null}};c.convertBlobToImage=function(n,p){var o=new Blob([n.slice()],{type:n.type});o.lastModifiedDate=new Date();o.name=p;return o};c.dropFileToElement=function(p,o){var r=p.name;if(!r){r=this.generateFileName();p.name=r+".png"}var q=d.Event("drop",{dataTransfer:{files:[p]}});var n=false;d(document).on("dropHandled.dropFileToElement",function(){n=true});o.trigger(q);d(document).off(".dropFileToElement");return n};c.generateFileName=function(){return"image-"+a().format("YYYY-MM-DD-HH-mm-ss-SSS")};c.getCurrentIssueId=function(){return JIRA.Issues.Api.getSelectedIssueId()};c.showErrorMsg=function(o,n){j.showErrorMsg(o,n)};c.createBlobFromFile=function(n){var o=new Blob([n.slice()],{type:n.type});o.name=n.name;return o};c.dragEventContainsFiles=function(o){if(!o.dataTransfer||!o.dataTransfer.types){return true}var n=o.dataTransfer.types;if(m.isMozilla()){return k.contains(n,"application/x-moz-file")}else{return k.contains(n,"Files")}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:shared-utility', location = 'js/ctrlv/ie_version.js' */
define("dndattachment/ctrlv/version",["require","exports"],function(e,h){var i=e("jquery");var m=e("underscore");var n=e("jira/util/navigator");var g=document.documentElement.className.split(/\s+/);var c=n.isIE();var l=i.inArray("msie-gt-7",g)>-1;var k=i.inArray("msie-gt-8",g)>-1;var j=i.inArray("msie-gt-9",g)>-1;var b=i.inArray("msie-gt-10",g)>-1;var f=c&&l&&!k;var d=c&&k&&!j;var a=c&&j&&!b;h.isIE8=m.once(function(){return f});h.isIE9=m.once(function(){return d});h.isIE10=m.once(function(){return a})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-utility', location = 'js/util/Configuration.js' */
define("dndattachment/util/Configuration",["require"],function(b){var a=b("wrm/data");var d="com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.";function c(e){return a.claim(e)}return{getWRM:function(e){return c(d+e)}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-utility', location = 'js/util/DataTransfer.js' */
define("dndattachment/util/DataTransfer",["require"],function(d){var a=d("jira/lib/class");var c=d("underscore");var b=d("jira/jquery/deferred");var e=d("jquery");return a.extend({init:function(f){this._dataTransfer=f},getFiles:function(){var g=this._dataTransfer.files;var f=this._dataTransfer.items;if(f&&f.length>0){if(c.any(f,function(h){return !!h.webkitGetAsEntry})){return this.readEntries(f)}}if(g&&g.length>0){return this.readFiles(this._dataTransfer.files)}else{return new b().reject()}},readFiles:function(g){var f=new b();e.when.apply(window,c.map(g,function(i){var h=new b();var j=!i.name.match(/\.([a-z0-9]+)$/i);if(j&&(i.size<=8192)||i.size==8192||i.size==4096||i.size<=1024){this.readFileAsText(i).fail(function(){g=c(g).without(i)}).always(h.resolve.bind(h))}else{h.resolve()}return h}.bind(this))).always(function(){f.resolve(g)});return f},readFileAsText:function(h){var g=new b();var f=new FileReader();f.onload=function(){g.resolve(this.result)};f.onerror=function(){g.reject(this.error)};f.readAsText(h);return g},readEntries:function(g){var f=new b();g=c.filter(g,function(h){return h.kind==="file"});e.when.apply(window,c.map(g,function(h){return this.readEntry(h.webkitGetAsEntry(),h)}.bind(this))).then(function(){f.resolve(c.union.apply(c,arguments))},f.reject.bind(f));return f},readEntry:function(h,g){var f=new b();if(h.isFile){if(g&&g.getAsFile){f.resolve([g.getAsFile()])}else{h.file(function(i){f.resolve([i])})}}else{if(h.isDirectory){h.createReader().readEntries(function(i){var j=[];e.when.apply(window,c.map(i,function(k){return this.readEntry(k).then(function(l){return j.push.apply(j,l)})}.bind(this))).always(function(){f.resolve(j)})}.bind(this))}}return f}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-utility', location = 'js/util/FileSizeUtil.js' */
define("dndattachment/util/FileSizeUtil",function(){var h=1024;var c=h*h;var d=" kB";var g=" MB";function f(i){if(i>c){return e(i)}else{if(i>h){return a(i)}else{return b(i)}}}function e(j){var i=j/c;return i.toFixed(2)+g}function a(j){var i=Math.round(j/h);return i+d}function b(j){var i=j/h;return i.toFixed(1)+d}return{format:f}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-utility', location = 'js/util/AttachmentEvents.js' */
define("dndattachment/util/events/types",{ATTACHMENT_FOR_PAGE_RECEIVED:"attachmentForPageReceived"});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-upload', location = 'js/upload/UploadHandler.js' */
define("dndattachment/upload/handler",["require","exports"],function(c,e){var i=c("jira/analytics");var j=c("jira/dialog/dialog");var k=c("jira/jquery/deferred");var n=c("jira/util/events");var m=c("dndattachment/util/events/types");var l=c("underscore");var f=c("jquery");var h=c("dndattachment/ctrlv/utility");var d=[];var a;var g=function(r,q){var p=k();var o=j.current;if(o&&o.$form){i.send({name:"attach.screenshot.html5.dialogPaste",data:{}});var t=h.createBlobFromFile(q.files[0]);if(h.dropFileToElement(t,o.$form)){p.resolve([q.files[0].name])}}else{var s=l.find(d,function(u){return u.isValid(r,q)});if(s){p=s.processFiles(q.files,a);if(q.successCallback){p.done(q.successCallback)}if(q.failureCallback){p.fail(q.failureCallback)}if(q.alwaysCallback){p.always(q.alwaysCallback)}}}p.done(function(v,u){if(!u&&q.isWikiTextfieldFocused){var w=q.wikiTextfield;l.each(v,function(x){h.insertWikiMarkup(x,w,w.selectionStart,w.selectionStart)});if(o&&q.isPaste){i.send({name:"attach.screenshot.html5.dialogPaste.insertWikiMarkup",data:{}})}if(!f(q.wikiTextfield).is(":focus")){setTimeout(function(){q.wikiTextfield.focus()},0)}}})};var b=function(s){if(s){var p=typeof s.isValid!=="undefined";var q=typeof s.processFiles!=="undefined";var o=typeof s.weight!=="undefined";var r=typeof s.name!=="undefined";return p&&q&&o&&r}return false};e.registerExecutor=function(q){var p=b(q);if(p){var o=l.reject(d,function(r){return r.name===q.name});o.push(q);d=l.sortBy(o,function(r){return -r.weight})}return p};e.unregisterExecutor=function(o){d=l.reject(d,function(p){return p.name===o.name})};e.initialize=function(){n.bind(m.ATTACHMENT_FOR_PAGE_RECEIVED,g)};e.disable=function(){n.unbind(m.ATTACHMENT_FOR_PAGE_RECEIVED,g)};e.setAttachmentDropZone=function(o){a=o}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-upload', location = 'js/upload/DefaultUploadExecutor.js' */
define("dndattachment/upload/default/executor",["require","exports"],function(b,a){a.name="Default attachment executor";a.weight=0;a.isValid=function(d,c){return true};a.processFiles=function(d,c){return c.uploadFiles(d)}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'js/ctrlv/path.js' */
define("dndattachment/ctrlv/path",["exports"],function(a){var b=function b(c){return c.split(/\//).pop()};a.basename=b;a.dirname=function(c){var d=b(c);return c.substring(0,c.length-d.length)}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'templates/soy/attach-screenshot-form.soy' */
// This file was automatically generated from attach-screenshot-form.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Html5Screenshot.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Html5Screenshot == 'undefined') { JIRA.Templates.Html5Screenshot = {}; }


JIRA.Templates.Html5Screenshot.attachScreenshotForm = function(opt_data, opt_ignored) {
  return '<h2 class="dialog-title">' + soy.$$escapeHtml("Attach Screenshot") + '</h2><form action="ShowAttachScreenshotFormAction.jspa" class="aui" method="post" id="attach-screenshot-form" data-attach-secure-token="' + soy.$$escapeHtml(opt_data.attachUserToken) + '" data-submit-secure-token="' + soy.$$escapeHtml(opt_data.submitUserToken) + '"><input type="hidden" name="id" value="' + soy.$$escapeHtml(opt_data.id) + '"/><input type="hidden" name="atl_token" value="' + soy.$$escapeHtml(opt_data.atlToken) + '"><input type="hidden" name="formToken" value="' + soy.$$escapeHtml(opt_data.formToken) + '"><input type="hidden" name="filetoconvert" value=""><div class="attach-screenshot-padding"><div class="attach-screenshot-container"><div id="attach-screenshot-inner-container"><div class="mod-content"><ul class="item-details"><li><dl><dt>' + soy.$$escapeHtml("Take a screenshot:") + '</dt>' + ((opt_data.userPlatform == 'pc') ? '<dd>' + soy.$$filterNoAutoescape("\x3ckbd\x3ePrtScn\x3c/kbd\x3e") + '</dd>' : '<dd>' + soy.$$filterNoAutoescape("\x3ckbd\x3e\x26#8963; Ctrl\x3c/kbd\x3e + \x3ckbd\x3e\x26#8984; Cmd\x3c/kbd\x3e + \x3ckbd\x3e\x26#8679; Shift\x3c/kbd\x3e + \x3ckbd\x3e3\x3c/kbd\x3e") + '</dd>') + '</dl></li><li><dl><dt>' + soy.$$escapeHtml("Paste the image:") + '</dt>' + ((opt_data.userPlatform == 'pc') ? '<dd>' + soy.$$filterNoAutoescape("\x3ckbd\x3eCtrl\x3c/kbd\x3e + \x3ckbd\x3ev\x3c/kbd\x3e") + '</dd>' : '<dd>' + soy.$$filterNoAutoescape("\x3ckbd\x3e\x26#8984; Cmd\x3c/kbd\x3e + \x3ckbd\x3ev\x3c/kbd\x3e") + '</dd>') + '</dl></li></ul></div><input type="text" id="attach-screenshot-fake-input"><div class="attach-screenshot-padding attach-screenshot-padding-inner"><div id="attach-screenshot-image-container" class="attach-screenshot-image-container"><div class="attach-screenshot-placeholder"><div class="mod-content"><ul class="item-details"><li><dl><dt id="attach-screenshot-placeholder-message">' + soy.$$escapeHtml("Your image will be pasted here") + '</dt></dl></li></ul></div></div></div></div><div id=\'attach-max-size\' class="hidden">' + soy.$$escapeHtml(opt_data.maxSize) + '</div></div></div></div><fieldset><div><legend><span>' + soy.$$escapeHtml("Attach Screenshot") + '</span></legend><div id="attach-screenshot-filename-group" class="field-group"><div id="attach-screenshot-progress-container"></div><label for="attachscreenshotname">' + soy.$$escapeHtml("File name") + ' <span class="aui-icon icon-required">' + soy.$$escapeHtml("Required") + '</span></label><input class="text" type="text" id="attachscreenshotname" name="attachscreenshotname" title="File Name" value="' + soy.$$escapeHtml(opt_data.nextScreenshotName) + '"><div class="description">' + soy.$$escapeHtml("A file name to be used as attached image name") + '</div></div></div></fieldset><div class="buttons-container form-footer"><div class="buttons"><button class="aui-button aui-button-primary" id="attach-screenshot-html5-upload">' + soy.$$escapeHtml("Upload") + '</button><a href="#" class="cancel">' + soy.$$escapeHtml("Cancel") + '</a></div></div></form>';
};
if (goog.DEBUG) {
  JIRA.Templates.Html5Screenshot.attachScreenshotForm.soyTemplateName = 'JIRA.Templates.Html5Screenshot.attachScreenshotForm';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'js/ctrlv/html5.js' */
define("dndattachment/ctrlv/html5",["require","exports"],function(b,c){var k=b("jira/util/formatter");var e=b("wrm/context-path");var h=b("jira/jquery/deferred");var d=b("jquery");var m=b("underscore");var i=b("dndattachment/ctrlv/base64decode");var l=b("dndattachment/ctrlv/utility");var g=b("jira/dialog/dialog");var j=b("jira/dialog/dialog-register");var a=b("jira/ajs/ajax/smart-ajax");var f=b("jira/attachment/inline-attach");c.getFileFromEvent=function(o){var n=new h();if(l.isImagePasteEvent(o)){n.resolve(m(o.clipboardData.items).filter(function(p){return p.type.indexOf("image")!==-1}).map(function(p){return p.getAsFile()})[0]||m(o.clipboardData.files).filter(function(p){return p.type.indexOf("image")!==-1})[0])}else{n.reject()}return n.promise()};c.REQUEST_TIMEOUT_MILLIS=5*60*1000;c.screenshotFileUpload={};c.screenshotFileUploadUri=null;c.$document=undefined;c.$window=undefined;c.$container=undefined;c.$fakeInput=undefined;c.uploadError=false;c.uploadErrorMsg="";c.progressView={hidden:false,progress:0,old:0,progressBarContainer:undefined,progressEl:undefined,container:undefined,options:undefined,staticProgress:undefined,initProgress:function(){this.container=this.buildContainer();this.progressEl=this.buildProgress();this.container.append(this.progressEl);this.options={showPercentage:false,height:"5px"};this.progressBarContainer=d("#attach-screenshot-progress-container");this.progressBarContainer.empty();this.progressBarContainer.append(this.container);this.staticProgress=this.container;this.hidden=true},finish:function(){this.value(100)},progressHandler:function(o){var n=Math.round(o.loaded*100/o.total);this.value(n)},value:function(n){if(n>100){n=100}else{if(n<0){n=0}}if(this.hidden){this.progressEl.show();this.hidden=false}if(this.old!==n){this.progressEl.progressBar(n,this.options);if(n>=100){this.progressEl.fadeOut()}this.old=n}},buildContainer:function(){return d("<div>").addClass("file-progress")},buildProgress:function(){return d("<div>").attr("id","attach-screenshot-upload-progress")}};c.dialogView={pasteCatcher:{},presenter:undefined,getMaxSize:function(){return d("#attach-max-size").text()},getFileSize:function(){if(d.isPlainObject(this.presenter.screenshotFileUpload)&&m.isEmpty(this.presenter.screenshotFileUpload)){return 0}return this.presenter.screenshotFileUpload.size||this.presenter.screenshotFileUpload.byteLength||this.presenter.screenshotFileUpload.length},cleanGeneralErrors:function(){d("#error-attach-screenshot-image").closest(".field-group").remove()},cleanFileErrors:function(){d("#error-attach-screenshot-filename").remove()},displayErrors:function(n){if("compatibility" in n){l.showErrorMsg("",n.compatibility)}if("fileName" in n){l.showErrorMsg("",n.fileName)}if("fileUpload" in n){l.showErrorMsg("",n.fileUpload)}},appendBlobImage:function(n){var p=window.URL||window.webkitURL;var o=p.createObjectURL(n);this.presenter.screenshotFileUpload=n;this.createImage(o)},createImage:function(q){var o=new Image();o.onload=function(){};o.src=q;this.presenter.screenshotToUpload=o;var p=d(o);p.addClass("attach-screenshot-pasted-image");var n=d("#attach-screenshot-image-container");n.empty();n.append(p);this.presenter.$fakeInput.focus();m.defer(function(){c.imageCreatedHandler()})},checkInput:function(){var o,n=c.dialogView.pasteCatcher.childNodes[0];if(n){if("IMG"===n.tagName){if(n.src.indexOf("data:")===0){o=n.src}else{}}c.dialogView.pasteCatcher.innerHTML=""}if(!o){c.$fakeInput.focus()}return o},onPaste:function(n){c.dialogView.cleanFileErrors();c.dialogView.cleanGeneralErrors();if(l.isImagePasteEvent(n)){c.getFileFromEvent(n).then(function(o){this.appendBlobImage(o)}.bind(this))}else{setTimeout(function(){var o=this.checkInput();if(o){c.screenshotFileUpload=i.decodeBase64DataUri(o);c.dialogView.createImage(o)}}.bind(this),0)}},getFakeInput:function(){return d("#attach-screenshot-fake-input")},getContainer:function(){return d("#attach-screenshot-image-container")},getIssueKey:function(){return d("input[name='id']").val()},getDocument:function(){return d(document)},getWindow:function(){return d(window)},getFileNameInput:function(){return d("#attachscreenshotname")},hasPngExtension:function(o){var n=/\.png$/i;return n.test(o)},setFileToConvert:function(n){d("input[name='filetoconvert']").val(n)},buildPasteCatcher:function(){if(!document.getElementById("attach-screenshot-form")){return}var n=document.createElement("div");n.setAttribute("contenteditable","true");n.style.width=0;n.style.height=0;n.style.position="absolute";n.style.top="-5000px";document.getElementById("attach-screenshot-form").appendChild(n);return n},_getFormSubmits:function(){return d("#attach-screenshot-form").find("button.aui-button")},disable:function(){this._getFormSubmits().attr("disabled","disabled");return this},enable:function(){this._getFormSubmits().removeAttr("disabled");return this},isEnabled:function(){return this.isVisible()&&!this._getFormSubmits().attr("disabled")},isVisible:function(){return d("#attach-screenshot-form").length>0},initDialog:function(n){this.pasteCatcher={};this.presenter=n;this.pasteCatcher=this.buildPasteCatcher()}};c.initScreenshotPasteHandler=function(){var n=c.dialogView;c.screenshotFileUpload={};c.resetUploadErrors();c.dialogView.initDialog(c);c.$document=n.getDocument();c.$window=n.getWindow();c.$container=n.getContainer();c.$fakeInput=n.getFakeInput();c.bindOnce(c.$container,"click",c.setFocusOnClickHandler);c.bindOnce(c.$fakeInput,"focus",c.showFocusOnFieldHandler);c.bindOnce(c.$fakeInput,"blur",c.hideFocusOnFieldHandler);c.bindOnce(c.$fakeInput,"keydown",c.keyDownHandler);if(!l.browserIsSupported()){n.displayErrors({compatibility:k.format("Your browser is not supported. Consider using an alternative supported browser such as {0}Google Chrome{1} or {2}Firefox{3}.",'<a href="//www.google.com/chrome/browser/">',"</a>",'<a href="//www.mozilla.org/firefox/">',"</a>")})}else{c.bindOnce(c.$window,"paste",c.pasteHandler)}};c.resetUploadErrors=function(){c.uploadError=false;c.uploadErrorMsg=undefined};c.setUploadError=function(n){c.uploadError=true;c.uploadErrorMsg=n};c.bindOnce=function(p,n,o){p.unbind(n,o);p.bind(n,o)};c.showFocusOnFieldHandler=function(){c.$container.addClass("focus")};c.hideFocusOnFieldHandler=function(){c.$container.addClass("focus")};c.setFocusOnClickHandler=function(){c.$fakeInput.focus()};c.pasteHandler=function(n){if(!c.dialogView.isEnabled()){return}n=l.normalizePasteEvent(n);c.dialogView.onPaste(n)};c.polyPasteHandler=function(o,n,p){if(!c.dialogView.isEnabled()){return}c.screenshotFileUpload={length:-1};c.screenshotFileUploadUri=n;c.dialogView.createImage(p)};c.keyDownHandler=function(n){if(l.isKeyPasteEvent(n)){if(c.dialogView.pasteCatcher.focus){c.dialogView.pasteCatcher.focus()}}};c.imageCreatedHandler=function(){c.doAjaxUpload(this.dialogView.getIssueKey(),this.dialogView.getFileNameInput().val())};c.getMimeType=function(){return"image/png"};c.createData=function(){return c.screenshotFileUpload};c.clipboardDataIsEmpty=function(n){if(window.clipboardData!=null){return false}return !(n&&n.clipboardData&&n.clipboardData.types&&n.clipboardData.types.length>0)};c.validateFileSize=function(q,n,p){var n=n||c.dialogView.getFileSize();var p=p||c.dialogView.getMaxSize();if(n>p){var o=f.Text.fileSize(p,n);q.fileUpload=k.format("Screenshot is too large to attach. Attachment is {0} but the largest allowed attachment is {1}.",o[1],o[0])}};c.validateFormData=function(n,p){var o={};if(d.isPlainObject(n)&&m.isEmpty(n)){o.fileUpload="Please paste the image you wish to upload"}c.validateFileSize(o);if(c.uploadError){o.fileUpload="The error occurred during image upload - you will need to try the pasting image again. Sorry for the inconvenience."}if(""==p){o.fileName="You must specify a filename of the image."}if(!l.isValidFileName(p)){o.fileName="Filename must not contain the characters \'\\\', \'/\', \'\"\', \':\', \'?\', \'*\', \'\u003c\', \'|\', \'\u003e\', \'!\'"}return o};c.doAjaxUpload=function(n,u){c.dialogView.disable();var t={};c.validateFileSize(t);if(!m.isEmpty(t)){c.dialogView.displayErrors(t);c.dialogView.enable();return}var r=c.createData(),s=c.getMimeType(),p=d("#attach-screenshot-form").data("attach-secure-token"),o=d("#attach-screenshot-form").find("input[name='formToken']").attr("value");var q=e()+"/rest/internal/1.0/AttachTemporaryFile?size="+c.dialogView.getFileSize()+"&filename="+encodeURIComponent(u)+"&atl_token="+encodeURIComponent(atl_token())+"&issueId="+encodeURIComponent(this.dialogView.getIssueKey())+(p?("&secureToken="+encodeURIComponent(p)):"")+(o?("&formToken="+encodeURIComponent(o)):"");c.resetUploadErrors();c.executeAjaxUpload(r,q,s).progress(function(v){if(v=="init"){c.progressView.initProgress()}}).done(function(v){if(typeof v=="string"){v=JSON.parse(v)}c.dialogView.setFileToConvert(v.id)}).fail(function(x,A,z,v){var w;if(v.statusText=="abort"){w="The call to the JIRA server did not complete within the timeout period.  We are unsure of the result of this operation."}else{if(v.hasData){var y=JSON.parse(v.data);if(y.errorMessage){w=y.errorMessage}else{w=a.buildSimpleErrorContent(v,{alert:false})}}}c.setUploadError(w);c.dialogView.displayErrors({fileUpload:w})}).always(function(){c.dialogView.enable();c.progressView.finish()}).progress(function(v){if(v!="init"){c.progressView.progressHandler(v)}})};c.executeAjaxUpload=function(p,o,r){var n=h();var q=a.makeRequest({type:"POST",url:o,contentType:r,processData:false,data:p,timeout:c.REQUEST_TIMEOUT_MILLIS,success:n.resolve.bind(n),error:n.reject.bind(n),xhr:function(){var s=d.ajaxSettings.xhr();n.notify("init");s.upload.addEventListener("progress",n.notify.bind(n));return s}});n.always(function(){d.ajaxSettings.xhr().removeEventListener("progress",c.progressView.progressHandler);d(j.attachScreenshotDialog).off("Dialog.hide",q.abort)});d(j.attachScreenshotDialog).one("Dialog.hide",q.abort);return n.promise()};c.show=function(){var n=new h();var o=d(".issueaction-attach-screenshot-html5");if(g.current!=null){return n.reject().promise()}if(o.length==0){return n.reject().promise()}m.defer(function(){o.trigger("click")});d(document).on("dialogContentReady",function(q,p){if(p===j.attachScreenshotDialog&&c.dialogView.isEnabled()){n.resolve(p)}else{n.reject()}});d(document).on("ajaxComplete.jira.screenshot.dialog",function(r,q,p){if(p.url.indexOf(o.attr("href"))>-1){setTimeout(function(){if(!n.isResolved()){n.reject()}},1000)}});n.always(function(){d(document).off("ajaxComplete.jira.screenshot.dialog")});return n.promise()}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'js/ctrlv/issue-paste.js' */
define("dndattachment/ctrlv/issue-paste",["require","exports"],function(h,D){var d=h("jquery");var v=h("dndattachment/ctrlv/trace");var e=h("dndattachment/ctrlv/tracking");var r=h("dndattachment/ctrlv/utility");var g=h("dndattachment/ctrlv/html5");var B=h("dndattachment/ctrlv/base64decode");var f=h("jira/dialog/dialog");var o=h("jira/util/events");var x=h("dndattachment/util/events/types");var A=0;var m=1;var c=2;var y=3;var p=4;var t=5;var i=6;var w=7;var q=8;var n=9;function l(G,F){F.stateName=G;var E=function(){var H=F.apply(null,arguments);H.stateName=G;return H};E.stateName=G;return E}function b(F,E,G){return l(F,function(){var J=setTimeout(function(){a(n)},G);var I=E.apply(null,arguments);var H=function(M,L){var K=I(M,L);if(K){clearTimeout(J);return K}};H.stateName=F;return H})}var k=l("idle",function(){function E(F){if(d(F.target).is(":input:not(.wiki-textfield, #summary)")||r.isContentEditable(F.target)){return}return true}return function(G,F){if(G==A&&r.isKeyPasteEvent(F)){if(r.browserIsNativePaste()||!E(F)||!r.browserIsSupported()){return}e.trigger("attach.screenshot.html5.catchClipboard");return new u(F)}if(G==m){if(r.isImagePasteEvent(F)){e.trigger("attach.screenshot.html5.handlePaste");if(!E(F)){v("jira/attach-images-plugin/pasteIgnored");return}if(d(F.target).is(":input.wiki-textfield")){F.preventDefault()}return new s(F)}else{v("jira/attach-images-plugin/pasteIgnoredNotImage")}}}});var u=b("catchClipboard",function(G){var E=document.activeElement;G.selectionStart=G.target.selectionStart;G.selectionEnd=G.target.selectionEnd;var H=d('<div contenteditable="true" class="attach-screenshot-paste-catcher"></div>').appendTo("body");H.focus();if(d(E).is(":focusable:input,:aui-focusable:input")){setTimeout(function(){E.focus()})}function F(){H.remove()}return function(L,I){if(L==m){if(r.isImagePasteEvent(I)){F();I.target=E;return new s(I)}if(r.isHtmlImagePasteEvent(I)){F();I.target=E;return new z(I)}if(r.isTextPasteEvent(I)){F();var O=r.getTextPasteContent(I);r.insertToInput(O,G.target,G.selectionStart,G.selectionEnd);I.preventDefault();return new k()}}if(L==n){F();var K=H.find(">img");if(K.is(":only-child")){var M=K.attr("src");if(M.toLowerCase().indexOf("http")===0){return k()}else{var P=B.decodeBase64DataUri(M);var J=new Blob([P],{type:"image/png"});return new j(J,G)}}else{var N=r.getTextContent(H[0]);r.insertToInput(N,G.target,G.selectionStart,G.selectionEnd);return k()}}}});var z=l("imageLoading",function(E){var F=r.getHtmlImagePaste(E);if(!F){a(t)}else{r.loadImage(F).then(function(G){a(p,G)},a.bind(null,t))}return function(I,G){if(I==p){var H=r.convertImageToBlob(G);if(H){return new j(H,E)}else{return new k()}}if(I==n||I==t){return new k()}}});var s=b("fileLoading",function(E){g.getFileFromEvent(E).done(function(F){a(c,F)}).fail(function(){a(y)});return function(G,F){if(G==c){return new j(F,E)}else{if(G==y||G==n){return new k()}}}},1000);var j=l("attachImage",function(G,F){var H=F.target;var I=r.generateFileName()+".png";var E=r.convertBlobToImage(G,I);o.trigger(x.ATTACHMENT_FOR_PAGE_RECEIVED,{files:[E],isWikiTextfieldFocused:r.isWikiTextfield(d(H)),wikiTextfield:H,isPaste:true,successCallback:function(){a(i)}});return function(K,J){return new k()}});var C=new k();function a(F,E){if(a.eventQueue){a.eventQueue.push({type:F,object:E});return}a.eventQueue=[{type:F,object:E}];while(a.eventQueue.length>0){var G=a.eventQueue.splice(0,1)[0];var H=C(G.type,G.object);if(H){C=H}}delete a.eventQueue}D._getStateMap=function(){return{events:{EVENT_WINDOW_KEYDOWN:A,EVENT_WINDOW_PASTE:m,EVENT_FILE_LOADED:c,EVENT_FILE_LOAD_ERROR:y,EVENT_IMAGE_LOADED:p,EVENT_IMAGE_LOAD_ERROR:t,EVENT_DIALOG_LOADED:i,EVENT_DIALOG_CLOSED:w,EVENT_DIALOG_CANCELED:q,EVENT_TIMEOUT:n},states:{StateIdle:k,StateCatchClipboard:u,StateImageLoading:z,StateFileLoading:s,StateAttachImage:j}}};D.initIssuePaste=function(){d(window).on("keydown",function(E){a(A,E)});d(window).on("paste",function(E){a(m,r.normalizePasteEvent(E))});o.bind("Dialog.hide",function(E,G,F){if(F){a(q,G)}else{a(w,G)}})}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'js/ctrlv/trace.js' */
define("dndattachment/ctrlv/trace",["require"],function(b){var a=b("jira/util/logger");return a.trace});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'js/ctrlv/tracking.js' */
define("dndattachment/ctrlv/tracking",["require","exports"],function(c,b){var a=c("jira/analytics");b.trigger=function(e,d){a.send({name:e,data:d||{}})}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'js/ctrlv/executor.js' */
define("dndattachment/ctrlv/executor",["require","exports"],function(e,c){var d=e("jira/jquery/deferred");var g=e("jquery");var a=e("jira/util/events");var b=e("dndattachment/ctrlv/html5");var f=e("dndattachment/upload/handler");c.register=function(){var h={name:"JIRA Ctrl+V attachment executor",weight:5,isValid:function(j,i){return !!i.isPaste},processFiles:function(k,j){var i=d();b.show().done(function(n){var m=g("#attach-screenshot-placeholder-message");var l=g.Event("paste");l.clipboardData={files:k};m.focus();setTimeout(function(){m.trigger(l)});a.bind("Dialog.hide",function(o,q,p){if(p){i.reject()}else{i.resolve([q.find("#attachscreenshotname").val()+".png"])}})});return i}};f.registerExecutor(h)}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'js/ctrlv/initialize.js' */
define("dndattachment/ctrlv/initialize",["require","exports"],function(b,d){var h=b("jira/jquery/deferred");var e=b("jquery");var k=b("underscore");var l=b("dndattachment/ctrlv/utility");var f=b("dndattachment/ctrlv/html5");var g=b("dndattachment/ctrlv/issue-paste");var j=b("dndattachment/ctrlv/tracking");var c=b("dndattachment/ctrlv/executor");var i=b("jira/dialog/dialog-register");var a=b("jira/dialog/form-dialog");d.init=function(){var m=a.extend({options:{}});window.JIRA.ScreenshotDialog=m;g.initIssuePaste();e(document).ready(function(){var o=h();o.resolve();i.attachScreenshotDialog=new m({id:"attach-screenshot-dialog",trigger:"a.issueaction-attach-screenshot-html5",isIssueDialog:true,onContentRefresh:function n(){this.$form.bind("before-submit",function p(q){var r=f.validateFormData(f.screenshotFileUpload,e.trim(f.dialogView.getFileNameInput().val()));if(f.dialogView.getFileSize()==0){q.preventDefault();return false}else{if(!k.isEmpty(r)){f.dialogView.displayErrors(r);q.preventDefault();return false}}return true})},delayShowUntil:function(){return o}});e(document).bind("dialogContentReady",function(q,p){if(p===i.attachScreenshotDialog&&document.getElementById("attach-screenshot-form")!==null){j.trigger("attach.screenshot.html5.contentReady");f.initScreenshotPasteHandler()}});e(document).ready(function(){e(document).on("click","#attach-screenshot-html5",function(){j.trigger("attach.screenshot.html5.display")})})});c.register()}});require(["dndattachment/ctrlv/initialize","jquery"],function(b,a){a(function(){b.init()})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-amd', location = 'js/aui-amd.js' */
define("dndattachment/aui/dialog2",function(){return AJS.dialog2});define("dndattachment/aui/escape-html",function(){return AJS.escapeHtml});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-amd', location = 'js/dnd-template-wrapper.js' */
define("dndattachment/templates",function(){return window.JIRA.Templates.DnDAttachmentPlugin});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:attachment-menu-link-init', location = 'js/menu/initAttachmentMenuLink.js' */
require(["jquery","jira/analytics","jira/util/events","dndattachment/util/events/types"],function(c,f,j,i){var e="issueaction-attach-file";var a=function(k){k.addClass(e);k.click()};var b=function(){var k=c('<input type="file" multiple />');k.change(function(l){j.trigger(i.ATTACHMENT_FOR_PAGE_RECEIVED,{files:k[0].files})});k.click()};var h=function(k){return !!k.data("issuekey")};var g=function(){c(document).on("click",".unified-attach-file",function(m){f.send({name:"issue.dnd.attachment.opsbar.attachFiles.linkClick",data:{}});var k=c(m.target);if(k.hasClass(e)){return}m.preventDefault();var l=c(".issue-drop-zone").length;if(l&&!h(k)){b()}else{a(k)}})};var d=function(){g()};if(c.isReady){d()}else{c(d)}});;
;
/* module-key = 'com.googlecode.jira-suite-utilities:common', location = 'ch/beecom/jira/jsu/customfield/map/location.js' */
(function(i){var d=window,j="onJSUGMapsLoad",n=[],g=false,a=false;function k(){var p;while(p=n.shift()){p()}}function e(q){var p=d.google.maps&&d.google.maps.LatLng;if(p){n.push(q);k()}else{if(a){n.push(q)}else{a=true;n.push(q);google.load("maps","3",{other_params:"key="+window.JSU.Google.Maps.Key,callback:k})}}}function f(q){if(d.google&&d.google.load){e(q)}else{if(g){n.push(q)}else{g=true;d[j]=function(){e(q)};var p=document.createElement("script");p.src="https://www.google.com/jsapi?callback="+j;p.type="text/javascript";i("body").append(p)}}}function b(p,q){f(function(){new google.maps.Geocoder().geocode({address:p},q)})}function c(p){if(p.hasClass("open")||p.hasClass("notFound")||p.hasClass("noKey")){l(p)}else{if(window.JSU.Google.Maps.Key){m(p)}else{p.addClass("noKey")}}}function l(p){p.removeClass("open");p.removeClass("notFound");p.removeClass("noKey")}function o(p){return !isNaN(parseFloat(p))&&isFinite(p)}function h(p){return(!p||0===p.length)}function m(t){var q=t.find("a.location").text(),p="",r=t.find(".jsuMap");var s=q.split("=>");if(s.length==2){q=s[0].trim();p=s[1].trim()}b(q,function(w,u){if(u==google.maps.GeocoderStatus.OK){t.addClass("open");var A=new google.maps.Map(r.get(0),{zoom:8,center:w[0].geometry.location,mapTypeId:google.maps.MapTypeId.ROADMAP});var z=q.split(",");if(z.length==2&&o(z[0])&&o(z[1])){var B=new google.maps.LatLng(z[0],z[1]);new google.maps.Marker({position:B,map:A,title:q})}else{new google.maps.Marker({map:A,position:w[0].geometry.location,title:q})}if(!h(p)){var v=new google.maps.DirectionsRenderer();var y=new google.maps.DirectionsService();v.setMap(A);var x={origin:q,destination:p,travelMode:google.maps.TravelMode.DRIVING};y.route(x,function(D,C){if(C==google.maps.DirectionsStatus.OK){v.setDirections(D)}})}}else{t.addClass("notFound")}})}JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(s,p,r){if(r===JIRA.CONTENT_ADDED_REASON.panelRefreshed||r===JIRA.CONTENT_ADDED_REASON.pageLoad){var q=i(".jsuLocation.ready",p);q.removeClass("ready");q.each(function(t,u){u=i(u);u.find("> a").click(function(v){v.preventDefault();c(u)})})}});JIRA.bind(JIRA.Events.INLINE_EDIT_STARTED,function(){var p=JIRA.Components.IssueEditor.InlineEditUtils.BlurTriggers.Default;JIRA.Components.IssueEditor.InlineEditUtils.BlurTriggerMapping.custom.locationselect=p;JIRA.Components.IssueEditor.InlineEditUtils.BlurTriggerMapping.custom.locationtextfield=p;JIRA.Components.IssueEditor.InlineEditUtils.BlurTriggerMapping.custom.directionsfield=p})})(AJS.$);;
;
/* module-key = 'com.googlecode.jira-suite-utilities:common', location = 'ch/beecom/jira/jsu/workflow/check/fieldsrequired/fields-required.js' */
function newContentAddedListener(c,a,b){if(b===JIRA.CONTENT_ADDED_REASON.dialogReady){$popupCreateForm=AJS.$("form[name=jiraform]");if($popupCreateForm.length){$project=$popupCreateForm.find("input[id=project]");$issueType=$popupCreateForm.find("input[id=issuetype]");if($project.length&&$issueType.length){$project.change(workflowChangeListener);$issueType.change(workflowChangeListener);loadRequriedFieldsForCreate($popupCreateForm,$project.val(),$issueType.val())}}else{checkTransitionScreen()}}}function checkTransitionScreen(){$transitionForm=AJS.$("form[id=issue-workflow-transition]");if($transitionForm.length){$action=$transitionForm.find("input[name=action]");$issue=$transitionForm.find("input[name=id]");if($action.length&&$issue.length){loadRequriedFieldsForTransition($transitionForm,$issue.val(),$action.val())}}}function workflowChangeListener(a){$popupCreateForm=AJS.$("form[name=jiraform]");if($popupCreateForm.length){$project=$popupCreateForm.find("input[id=project]");$issueType=$popupCreateForm.find("input[id=issuetype]");if($project.length&&$issueType.length){loadRequriedFieldsForCreate($popupCreateForm,$project.val(),$issueType.val())}}}function loadRequriedFieldsForTransition(a,b,c){AJS.$.get(AJS.contextPath()+"/rest/jsu/1/workflow/fieldsrequired/transition/"+b+"/"+c,function(d){markFields(d,a)})}function loadRequriedFieldsForCreate(c,a,b){AJS.$.get(AJS.contextPath()+"/rest/jsu/1/workflow/fieldsrequired/create/"+a+"/"+b,function(d){markFields(d,c)})}function markFields(e,a){var d='<span class="aui-icon icon-required">Required</span>';for(var c=0;c<e.length;c++){var b=e[c];if("timeoriginalestimate"===b){b="timetracking_originalestimate"}else{if("timeestimate"===b){b="timetracking_remainingestimate"}else{if("timespent"===b){b="worklog_timeLogged"}}}$label=a.find("label[for="+b+"],label[for="+b+"-field],label[for="+b+"-textarea]");if($label.length){$label.append(d)}else{$input=a.find("input[name="+b+"]");if($input.length){$fieldset=$input.first().closest("fieldset");if($fieldset.length){$legend=$fieldset.find("legend");if($legend.length){$legend.append(d);continue}}}if("attachment"===b){$attachmentLegend=a.find("fieldset>legend>span:contains('Attachment')");$attachmentLegend.append(d)}else{console.warn("Unable to add icon-required to "+b)}}}markTabs(a)}function markTabs(a){if(a.find(".tabs-pane").length>1){var c='<span class="aui-icon icon-required" style="left: auto; top: unset;">Required</span>';$fields=a.find(".icon-required");$tabsPanes=$fields.closest(".tabs-pane");for(var b=0;b<$tabsPanes.length;b++){var d=$tabsPanes[b].id;$tab=a.find('[href="#'+d+'"]');$tab.append(c);$tab.parent().css("position","relative")}}}AJS.toInit(function(){JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,newContentAddedListener);$flatCreateForm=AJS.$("form[id=issue-create]");if($flatCreateForm.length){$project=$flatCreateForm.find("input[name=pid]");$issueType=$flatCreateForm.find("input[name=issuetype]");$stepOne=$flatCreateForm.find("#project-field");if($project.length&&$issueType.length&&!$stepOne.length){loadRequriedFieldsForCreate($flatCreateForm,$project.val(),$issueType.val())}}checkTransitionScreen()});;
;
/* module-key = 'jira.webresources:jira-analytics', location = '/includes/jira/analytics/analytics-init.js' */
require(["jquery","jira/analytics"],function(a,c){"use strict";function t(){a("[data-track-pageview]").each(function(t,n){c.send({name:a(n).data("track-pageview")})})}a(document).on("click","[data-track-click]",function(){c.send({name:a(this).data("track-click")})}),a(t)});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/jquery/plugins/avataror/avataror.js' */
jQuery.fn.avataror=function(i){var e=jQuery,t=e(document);this.each(function(){var r=e(this),a=r.find("img").attr("src");r.css({"-moz-border-radius":"10px","-webkit-border-radius":"10px"}),r.html("<p>Loading?</p>");var g={previewSize:48};g.preview=e("<div/>").addClass("avataror-preview").css({border:"solid 1px #000",float:"left",height:g.previewSize+"px",overflow:"hidden",width:g.previewSize+"px",position:"relative",top:"-9999em",left:"-9999em"}),g.preview.prependTo(i.previewElement),g.img=e('<img alt="Avatar Source"/>'),g.img.load(function(){g.image=e("<div/>").css({background:"url('"+a+"') no-repeat",clear:"left",position:"relative"}),g.marker=e("<div/>").css({cursor:"move",position:"relative"}),g.dash=e("<div/>"),g.shadow=e("<div/>"),g.dash.add(g.shadow).css({cursor:"move",opacity:.5,left:0,top:0,position:"absolute"}),g.image.append(g.shadow).append(g.dash).append(g.marker),r.append(g.image),g.marker.html("<div></div><div></div><div></div><div></div>"),e("div",g.marker).each(function(i){var t=e(this);t.css({background:"#000",border:"solid 1px #fff",width:"10px",height:"10px",position:"absolute","font-size":"1px"}),t.css(["left","right","right","left"][i],"-6px"),t.css(["top","top","bottom","bottom"][i],"-6px"),t.css("cursor",["nw-resize","ne-resize","se-resize","sw-resize"][i]),t.mousedown(function(e){e.preventDefault(),e.stopPropagation(),g.dragging={x:e.pageX,y:e.pageY,ax:g.x,ay:g.y,w:g.width,h:g.height,i:i+1},g.shadow.hide()})}),g.marker.add(g.image).mousedown(function(i){i.preventDefault(),g.dragging={x:i.pageX,y:i.pageY,ax:g.x,ay:g.y,w:g.width,h:g.height},g.shadow.hide()}),t.mouseup(function(i){g.handleMouseUp(i)}),t.mousemove(function(i){g.dragging&&(g.handleMouseMove(i.pageX,i.pageY),i.preventDefault())}),g.imgwidth=g.img[0].naturalWidth,g.imgheight=g.img[0].naturalHeight,g.x=parseInt(e("#avatar-offsetX").val()),g.y=parseInt(e("#avatar-offsetY").val()),g.width=parseInt(e("#avatar-width").val()),g.height=g.width,g.image.css({width:g.imgwidth+"px",height:g.imgheight+"px"}),g.setMarker(),r.css({width:g.imgwidth+"px"}),g.preview.css({position:"static"}),e("p",r).remove(),r.trigger("AvatarImageLoaded"),g.adjustPreview()}),g.img.attr("src",a),g.preview.append(g.img),g.setMarker=function(){g.marker.css("border","dashed 1px #fff"),g.dash.css("border","solid 1px #000"),g.shadow.css("border","solid 1px #000"),g.marker.add(this.dash).css("left",this.x-1+"px"),g.marker.add(g.dash).css("top",g.y-1+"px"),g.shadow.css("border-left-width",g.x+"px"),g.shadow.css("border-right-width",g.imgwidth-g.x-g.width+"px"),g.shadow.css("border-top-width",g.y+"px"),g.shadow.css("border-bottom-width",g.imgheight-g.y-g.height+"px"),g.shadow.css("width",g.width+"px"),g.shadow.css("height",g.height+"px"),g.marker.add(g.dash).css("width",g.width+"px"),g.marker.add(g.dash).css("height",g.height+"px")},g.adjustPreview=function(){g.img.attr("width",g.imgwidth*g.previewSize/g.width),g.img.attr("height",g.imgheight*g.previewSize/g.height),g.img.css("margin-left","-"+g.x*g.previewSize/g.width+"px"),g.img.css("margin-top","-"+g.y*g.previewSize/g.height+"px"),g.preview.select()},g.handleMouseMove=function(i,e){if(g.dragging.nextExec=g.dragging.nextExec||0,0!=g.dragging.nextExec)return void g.dragging.nextExec--;g.dragging.nextExec=3;var t=i-g.dragging.x,r=e-g.dragging.y;if(this.dragging.i){(0,g.resizeHandlers[this.dragging.i-1])(t,r)}else g.x=g.dragging.ax+t,g.y=g.dragging.ay+r,g.x+g.width>g.imgwidth&&(g.x=g.imgwidth-g.width),g.y+g.height>g.imgheight&&(g.y=g.imgheight-g.height),g.x<0&&(g.x=0),g.y<0&&(g.y=0);g.setMarker(),g.adjustPreview()},g.handleMouseUp=function(i){e("#avatar-offsetX").val(g.x),e("#avatar-offsetY").val(g.y),e("#avatar-width").val(g.width),g.dragging=null,g.shadow.show()},g.originX=function(){return g.dragging.ax},g.originY=function(){return g.dragging.ay},g.originBottomX=function(){return g.dragging.ax+g.dragging.w},g.originBottomY=function(){return g.dragging.ay+g.dragging.h},g.originNw=function(){return{x:g.originX(),y:g.originY()}},g.originNe=function(){return{x:g.originBottomX(),y:g.originY()}},g.originSe=function(){return{x:g.originBottomX(),y:g.originBottomY()}},g.originSw=function(){return{x:g.originX(),y:g.originBottomY()}},g.nwHandler=function(i,e){var t=g.originSe(),r={x:g.originX()+i,y:g.originY()+e},a=Math.abs(r.x-t.x),o=Math.abs(r.y-t.y),n=Math.min(a,o);n<20&&(n=20),t.x-n<0&&(n=t.x),t.y-n<0&&(n=t.y),g.x=t.x-n,g.y=t.y-n,g.width=g.height=n},g.neHandler=function(i,e){var t=g.originSw(),r={x:g.originBottomX()+i,y:g.originY()+e},a=Math.abs(r.x-t.x),o=Math.abs(r.y-t.y),n=Math.min(a,o);n<20&&(n=20),t.x+n>g.imgwidth&&(n=g.imgwidth-t.x),t.y-n<0&&(n=t.y),g.y=t.y-n,g.width=g.height=n},g.seHandler=function(i,e){var t=g.originNw(),r={x:g.originBottomX()+i,y:g.originBottomY()+e},a=Math.abs(r.x-t.x),o=Math.abs(r.y-t.y),n=Math.min(a,o);n<20&&(n=20),t.x+n>g.imgwidth&&(n=g.imgwidth-t.x),t.y+n>g.imgheight&&(n=g.imgheight-t.y),g.width=g.height=n},g.swHandler=function(i,e){var t=g.originNe(),r={x:g.originX()+i,y:g.originBottomY()+e},a=Math.abs(r.x-t.x),o=Math.abs(r.y-t.y),n=Math.min(a,o);n<20&&(n=20),t.x-n<0&&(n=t.x),t.y+n>g.imgheight&&(n=g.imgheight-t.y),g.x=t.x-n,g.width=g.height=n},g.resizeHandlers=[g.nwHandler,g.neHandler,g.seHandler,g.swHandler]})};;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/Avatar.js' */
var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};define("jira/ajs/avatarpicker/avatar",["jira/lib/class"],function(t){return t.extend({init:function(t){this._id=t.id,this._isSystemAvatar=t.isSystemAvatar,this._isSelected=t.isSelected,this._urls=t.urls},setUnSelected:function(){this._isSelected=!1},setSelected:function(){this._isSelected=!0},isSelected:function(){return!!this._isSelected},isSystemAvatar:function(){return this._isSystemAvatar},getId:function(){return this._id},getUrl:function(t){return this._urls[t]},toJSON:function(){return{id:this._id,isSystemAvatar:this._isSystemAvatar,isSelected:this._isSelected,urls:this._urls}}})}),define("jira/ajs/avatarpicker/avatar-factory",["jira/ajs/avatarpicker/avatar","exports"],function(t,e){e.createCustomAvatar=function(e){return e.isSystemAvatar=!1,new t(e)},e.createSystemAvatar=function(e){return e.isSystemAvatar=!0,new t(e)}}),define("jira/ajs/avatarpicker/avatar/sizes",["exports","jquery"],function(t,e){t.getSizeObjectFromName=function(i){if("object"===(void 0===i?"undefined":_typeof(i)))return i;"string"==typeof i&&e.trim(i);return t.LARGE.param===i?t.LARGE:t.MEDIUM.param===i?t.MEDIUM:t.SMALL.param===i?t.SMALL:"xsmall"===i?t.SMALL:t.LARGE},t.LARGE={param:"large",height:48,width:48},t.MEDIUM={param:"medium",width:32,height:32},t.SMALL={param:"small",width:16,height:16}});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/AvatarManager.js' */
define("jira/ajs/avatarpicker/avatar-manager",["jira/util/formatter","jira/lib/class","wrm/context-path","jquery"],function(t,a,r,e){"use strict";var s=r();return a.extend({init:function(t){this.store=t.store,this.ownerId=t.ownerId,this.username=t.username,this.anonymousAvatarId=t.anonymousAvatarId,this.avatarSrcBaseUrl=t.avatarSrcBaseUrl},selectAvatar:function(t,a){return this.store.selectAvatar(t,a)},getById:function(t){return this.store.getById(t)},destroy:function(t,a){this.store.destroy(t,a)},update:function(t,a){this.store.update(t,a)},add:function(t,a){this.store._add(t,a)},getAllSystemAvatars:function(){return this.store.getAllSystemAvatars()},getAllCustomAvatars:function(){return this.store.getAllCustomAvatars()},getSelectedAvatar:function(){return this.store.getSelectedAvatar()},getAllAvatars:function(){return this.store.getAllAvatars()},getAllAvatarsRenderData:function(t){var a,r=this,e=this.getAllAvatars(),s={system:[],custom:[]};for(a=0;a<e.system.length;a++)s.system.push(r.getAvatarRenderData(e.system[a],t));for(a=0;a<e.custom.length;a++)s.custom.push(r.getAvatarRenderData(e.custom[a],t));return s},getAvatarRenderData:function(t,a){var r=t.toJSON();return r.src=this.getAvatarSrc(t,a),r.width=a.width,r.height=a.height,r},refreshStore:function(t){this.store.refresh(t)},getAvatarSrc:function(a,r){return this.store.isTempAvatar(a)?s+"/secure/temporaryavatar?"+e.param({cropped:!0,magic:(new Date).getTime(),size:r.param}):a.getUrl(t.format("{0}x{1}",r.height,r.width))},createTemporaryAvatar:function(t,a){this.store.createTemporaryAvatar(t,a)},createAvatarFromTemporary:function(t,a){this.store.createAvatarFromTemporary(t,a)},getAnonymousAvatarId:function(){return this.anonymousAvatarId}})}),define("jira/ajs/avatarpicker/avatar-manager-factory",["jira/ajs/avatarpicker/avatar-store","jira/ajs/avatarpicker/avatar-manager","wrm/context-path","exports"],function(t,a,r,e){"use strict";var s=r();e.createUniversalAvatarManager=function(r){var e,n="",o="",i="",v="";if(r.projectId){var u=s+"/rest/api/latest/universal_avatar/type/"+r.avatarType+"/owner/"+r.projectId;e=u;var c=u+"/avatar";n=null,o=u+"/temp",i=c,v=c}else e=s+"/rest/api/latest/avatar/project/system",o=s+"/rest/api/latest/avatar/project/temporary",i=s+"/rest/api/latest/avatar/project/temporaryCrop";var l=new t({restQueryUrl:e,restUpdateUrl:n,restCreateTempUrl:o,restUpdateTempUrl:i,restSingleAvatarUrl:v,defaultAvatarId:r.defaultAvatarId});return new a({store:l,ownerId:r.projectId,avatarSrcBaseUrl:s+"/secure/projectavatar"})},e.createProjectAvatarManager=function(t){return t.avatarType="project",e.createUniversalAvatarManager(t)},e.createUserAvatarManager=function(r){var e=s+"/rest/api/latest/user",n=new t({restQueryUrl:e+"/avatars",restUpdateUrl:e+"/avatar",restCreateTempUrl:e+"/avatar/temporary",restUpdateTempUrl:e+"/avatar",restSingleAvatarUrl:e+"/avatar",restParams:{username:r.username},defaultAvatarId:r.defaultAvatarId});return new a({store:n,username:r.username,avatarSrcBaseUrl:s+"/secure/useravatar"})}});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/AvatarStore.js' */
define("jira/ajs/avatarpicker/avatar-store",["jira/util/urls","jira/util/formatter","jira/ajs/avatarpicker/avatar-util","jira/ajs/avatarpicker/avatar-factory","jira/ajs/ajax/smart-ajax","jira/lib/class","jquery"],function(t,e,r,a,s,i,o){return i.extend({TEMP_ID:"TEMP",init:function(e){if(!e.restQueryUrl)throw new Error("JIRA.AvatarStore.init: You must specify [restQueryUrl], The rest url for querying avatars (see class description)");if(!e.restCreateTempUrl)throw new Error("JIRA.AvatarStore.init: You must specify [restCreateTempUrl], The rest url for creating a temporary avatar (see class description)");if(!e.restUpdateTempUrl)throw new Error("JIRA.AvatarStore.init: You must specify [restUpdateTempUrl], The rest url for updating a temporary avatar (see class description)");if(!e.defaultAvatarId)throw new Error("JIRA.AvatarStore.init: You must specify [defaultAvatarId] to the contructor so the store knows what to select if you delete the selected one");this.restQueryUrl=e.restQueryUrl,this.restUpdateUrl=e.restUpdateUrl,this.restCreateTempUrl=e.restCreateTempUrl,this.restUpdateTempUrl=e.restUpdateTempUrl,this.restSingleAvatarUrl=e.restSingleAvatarUrl,this.restParams=e.restParams||{},this.restParams.atl_token=t.atl_token(),this.defaultAvatarId=e.defaultAvatarId,this.avatars={system:[],custom:[]}},_buildCompleteUrl:function(t){var r=t;if(this.restParams){var a="";for(var s in this.restParams)a+=e.format("&{0}={1}",encodeURIComponent(s),encodeURIComponent(this.restParams[s]));r+="?"+a.substr(1)}return r},getById:function(t){var e;return o.each(this.avatars.system,function(r,a){if(this.getId()===t)return e=a,!1}),e||o.each(this.avatars.custom,function(r,a){if(this.getId()===t)return e=a,!1}),e},isTempAvatar:function(t){return t.getId()===this.TEMP_ID},_selectAvatar:function(t){var e=this.getSelectedAvatar();e&&e.setUnSelected(),t.setSelected()},selectAvatar:function(t,e){var r=this;if(!t)throw new Error("JIRA.AvatarStore.selectAvatar: Cannot select Avatar that does not exist");this.restUpdateUrl?s.makeRequest({type:"PUT",contentType:"application/json",dataType:"json",url:this._buildCompleteUrl(this.restUpdateUrl),data:JSON.stringify(t.toJSON()),success:function(){r._selectAvatar(t),e.success&&e.success.call(this,t)},error:e.error}):(r._selectAvatar(t),e.success&&e.success.call(this,t))},_destory:function(t){var e=o.inArray(t,this.avatars.custom);if(-1===e)throw new Error("JIRA.AvatarStore._destroy: Cannot remove avatar ["+t.getId()+"], it might be a system avatar (readonly) or does not exist.");this.avatars.custom.splice(e,1)},destroy:function(t,e){var r=this;if(e=e||{},!t)throw new Error("JIRA.AvatarStore.destroy: Cannot delete Avatar that does not exist");s.makeRequest({type:"DELETE",url:this.getRestUrlForAvatar(t),success:function(){r._destory(t),t.isSelected()?r.selectAvatar(r.getById(r.defaultAvatarId),e):e.success&&e.success.apply(this,arguments)},error:e.error})},getSelectedAvatar:function(){for(var t=0;t<this.avatars.custom.length;t++)if(this.avatars.custom[t].isSelected())return this.avatars.custom[t];for(t=0;t<this.avatars.system.length;t++)if(this.avatars.system[t].isSelected())return this.avatars.system[t]},_update:function(t){var e=this;if(!this.getById(t.getId()))throw new Error("JIRA.AvatarStore._update: Cannot update avatar ["+t.getId()+"], it might be a system avatar (readonly) or does not exist.");o.each(this.avatars.custom,function(r){this.getId()===t.getId()&&(e.avatars.custom[r]=t)})},update:function(t,e){var r=this;e=e||{},s.makeRequest({type:"PUT",url:this.getRestUrlForAvatar(t),error:e.error,success:function(){r._update(t),e.success&&e.success.apply(this,arguments)}})},_add:function(t){t.isSystemAvatar()?this.avatars.system.push(t):this.avatars.custom.push(t)},createAvatarFromTemporary:function(t,e){var r=this;e=e||{},this.restUpdateTempUrl&&s.makeRequest({type:"POST",url:this._buildCompleteUrl(this.restUpdateTempUrl),data:JSON.stringify(t),contentType:"application/json",dataType:"json",success:function(t){t||(t={id:r.TEMP_ID,isSelected:!0});var s=a.createCustomAvatar(t);r._add(s),e.success&&e.success.call(this,t)},error:e.error})},createTemporaryAvatar:function(t,e){e=o.extend(!0,{},e,{params:this.restParams}),r.uploadTemporaryAvatar(this.restCreateTempUrl,t,e)},_refresh:function(t){var e=this;e.avatars.system=[],e.avatars.custom=[],t.system&&o.each(t.system,function(t,r){e.avatars.system.push(a.createSystemAvatar(r))}),t.custom&&o.each(t.custom,function(t,r){e.avatars.custom.push(a.createCustomAvatar(r))})},refresh:function(t){var e=this,r=this.getById(e.TEMP_ID);t=t||{},s.makeRequest({url:this._buildCompleteUrl(this.restQueryUrl),error:t.error,success:function(a){e._refresh(a),r&&e._add(r),t.success&&t.success.apply(this,arguments)}})},getAllAvatars:function(){return this.avatars},getAllSystemAvatars:function(){return this.avatars.system},getAllCustomAvatars:function(){return this.avatars.custom},getRestUrlForAvatar:function(t){return this._buildCompleteUrl(this.restSingleAvatarUrl+"/"+t.getId())}})});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/AvatarUtil.js' */
define("jira/ajs/avatarpicker/avatar-util",["jira/util/urls","jira/util/logger","jira/attachment/inline-attach","jquery"],function(e,r,a,n){var t={uploadUsingIframeRemoting:function(o,s,i){i=i||{};var l=s.val(),c=new a.Form(new a.FileInput(s,!1)),u=c.addStaticProgress(l),d=c.cloneFileInput();c.fileSelector.clear();var g=new a.Timer(function(){!this.cancelled&&u.show()},this),f=new a.FormUpload({$input:d,url:o,params:n.extend({},i.params,{filename:l,atl_token:e.atl_token()}),scope:this,before:function(){!this.cancelled&&u.start()},success:function(e,r){e.errorMessages&&e.errorMessages.length?c.addErrorWithFileName(e.errorMessages[0],l,t.getErrorTarget(c)):i.success&&i.success(e,r)},error:function(e){r.log(e),this.cancelled||(e.indexOf("SecurityTokenMissing")>=0?c.addError(a.Text.tr("upload.xsrf.timeout",l),t.getErrorTarget(c)):c.addError(a.Text.tr("upload.error.unknown",l),t.getErrorTarget(c)))},after:function(){g.cancel(),u.remove(),this.cancelled||c.enable()}});u.onCancel(function(){f.abort()}),f.upload()},uploadUsingFileApi:function(r,o,s){var i,l,c=o[0].files[0],u=new a.Form(new a.FileInput(o,!1)),d=u.addProgress(c);s=s||{},i=new a.Timer(function(){d.show()}),l=new a.AjaxUpload({file:c,params:n.extend({},s.params,{filename:c.name,size:c.size,atl_token:e.atl_token()}),scope:this,url:r,before:function(){o.hide(),d.start()},progress:function(e){d.progress.$progress.parent().parent().show(),d.update(e)},success:function(e,r){e.errorMessages&&e.errorMessages.length?u.addErrorWithFileName(e.errorMessages[0],c.name,t.getErrorTarget(u)):201===r&&s.success(e,r)},error:function(e,r){r<0?u.addError(e,t.getErrorTarget(u)):u.addError(a.Text.tr("upload.error.unknown",c.name),t.getErrorTarget(u)),s.error&&s.error(e,r)},after:function(){i.cancel(),d.finish().remove(),o.val("").show()}}),l.upload(),d.onCancel(function(){l.abort()})},getErrorTarget:function(e){return{$element:e.$form.find(".error")}},uploadTemporaryAvatar:function(e,r,n){a.AjaxPresenter.isSupported(r)?this.uploadUsingFileApi(e,r,n):this.uploadUsingIframeRemoting(e,r,n)}};return t});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/AvatarPicker.js' */
define("jira/ajs/avatarpicker/avatar-picker",["jira/util/logger","jira/util/formatter","jira/util/strings","jira/ajs/avatarpicker/avatar-picker/image-editor","jira/ajs/ajax/smart-ajax","jira/dialog/dialog","jira/ajs/control","aui/message","jquery"],function(a,e,t,r,i,n,c,o,d){"use strict";return c.extend({init:function(a){this.avatarManager=a.avatarManager,this.avatarRenderer=a.avatarRenderer,this.imageEditor=a.imageEditor,this.size=a.size,this.selectCallback=a.select,this.cropperDialog=null,this.initialSelection=a.initialSelection},render:function(a){var e=this;this.avatarManager.refreshStore({success:function(){e.cropperDialog instanceof n&&(e.cropperDialog.hide(),delete e.cropperDialog),e.element=d('<div id="jira-avatar-picker" />'),e.element.html(JIRA.Templates.AvatarPicker.picker({avatars:e.avatarManager.getAllAvatarsRenderData(e.size)})),e._assignEvents("selectAvatar",e.element.find(".jira-avatar button")),e._assignEvents("deleteAvatar",e.element.find(".jira-delete-avatar")),e._assignEvents("uploader",e.element.find("#jira-avatar-uploader")),void 0!==e.initialSelection&&e.getAvatarElById(e.initialSelection).addClass("jira-selected-avatar"),a(e.element)},error:function(t,r,i,n){e.appendErrorContent(e.element,n),a(e.element)}})},appendErrorContent:function(a,e){try{var r=JSON.parse(e.data);r&&r.errorMessages?d.each(r.errorMessages,function(e,r){o.error(a,{body:t.escapeHtml(r),closeable:!1,shadowed:!1})}):a.append(i.buildDialogErrorContent(e,!0))}catch(t){a.append(i.buildDialogErrorContent(e,!0))}},uploadTempAvatar:function(e){var t=this;this.avatarManager.createTemporaryAvatar(e,{success:function(a){a.id?t.render(function(){t.selectAvatar(a.id)}):(e.val(""),t.cropperDialog=new n({id:"project-avatar-cropper",width:560,content:function(e){function r(){var a=i.find("input[type=submit]"),e=d("<span class='icon throbber loading'></span>");return a.attr("aria-disabled","true").attr("disabled",""),a.before(e),function(){e.remove(),a.removeAttr("aria-disabled").removeAttr("disabled")}}var i=t.imageEditor.render(a);t.imageEditor.edit({confirm:function(a){var e=r();t.avatarManager.createAvatarFromTemporary(a,{success:function(a){t.render(function(){t.selectAvatar(a.id)})},error:e})}}),i.find(".cancel").click(function(){t.cropperDialog.hide()}),e(i)}}),t.cropperDialog.bind("dialogContentReady",function(){d(t).trigger(r.LOADED)}),t.cropperDialog.bind("Dialog.hide",function(){d(t).trigger(r.DISMISSED)}),t.cropperDialog.show())},error:function(){a.log(arguments)}})},getAvatarElById:function(a){return this.element.find(".jira-avatar[data-id='"+a+"']")},selectAvatar:function(a){var e=this.avatarManager.getById(a),t=this;this.avatarManager.selectAvatar(this.avatarManager.getById(a),{error:function(){},success:function(){t.getAvatarElById(a).remove(),t.selectCallback&&t.selectCallback.call(t,e,t.avatarManager.getAvatarSrc(e,t.size))}})},deleteAvatar:function(a){var t=this;confirm("Are you sure you want to delete avatar?")&&this.avatarManager.destroy(this.avatarManager.getById(a),{error:function(){},success:function(){var e=t.avatarManager.getSelectedAvatar(),r=t.getAvatarElById(a);r.fadeOut(function(){r.remove()}),e.getId()!==a&&(t.getAvatarElById(e.getId()).addClass("jira-selected-avatar"),t.selectCallback.call(t,e,t.avatarManager.getAvatarSrc(e,t.size),!0))}})},_events:{uploader:{change:function(a,e){this.uploadTempAvatar(e)}},deleteAvatar:{click:function(a,e){this.deleteAvatar(e.attr("data-id"))}},selectAvatar:{click:function(a,e){"select-avatar-button"===e[0].id&&this.selectAvatar(e.attr("data-id"))}}}})}),define("jira/ajs/avatarpicker/avatar-picker/image-editor",["jira/ajs/control","jquery"],function(a,e){"use strict";var t=a.extend({render:function(a){return this.element=e('<div id="avatar-picker-image-editor"/>').html(JIRA.Templates.AvatarPicker.imageEditor(a)),this.element},edit:function(a){var t=this,r=this.element.find(".avataror");a=a||{},r.unbind(),r.bind("AvatarImageLoaded",function(){a.ready&&a.ready()}),r.find("img").load(function(){r.avataror({previewElement:t.element.find(".jira-avatar-cropper-header"),parent:t.element})}),this.element.find("#avataror").submit(function(t){t.preventDefault(),a.confirm&&a.confirm({cropperOffsetX:e("#avatar-offsetX").val(),cropperOffsetY:e("#avatar-offsetY").val(),cropperWidth:e("#avatar-width").val()})}).find(".cancel").click(function(e){e.preventDefault(),a.cancel&&a.cancel()})}});return t.LOADED="imageEditorLoaded",t.DISMISSED="imageEditorDismissed",t}),define("jira/ajs/avatarpicker/avatar-picker-factory",["jira/util/browser","jira/util/formatter","jira/ajs/avatarpicker/avatar-picker","jira/ajs/avatarpicker/avatar-picker/image-editor","jira/ajs/avatarpicker/avatar-manager-factory","jira/ajs/avatarpicker/avatar/sizes","jira/dialog/form-dialog","wrm/context-path","wrm/data","jquery","exports"],function(a,e,t,r,i,n,c,o,d,l,s){"use strict";s.createUniversalAvatarPicker=function(a){return new t({avatarManager:i.createUniversalAvatarManager({projectKey:a.projectKey,projectId:a.projectId,defaultAvatarId:a.defaultAvatarId,avatarType:a.avatarType}),initialSelection:a.initialSelection,imageEditor:new r,size:a.hasOwnProperty("avatarSize")?a.avatarSize:n.LARGE,select:a.select})},s.createProjectAvatarPicker=function(a){return new t({avatarManager:i.createProjectAvatarManager({projectKey:a.projectKey,projectId:a.projectId,defaultAvatarId:a.defaultAvatarId}),imageEditor:new r,size:n.LARGE,select:a.select})},s.createUserAvatarPicker=function(a){return new t({avatarManager:i.createUserAvatarManager({username:a.username,defaultAvatarId:a.defaultAvatarId}),imageEditor:new r,size:n.LARGE,select:a.select})},s.createUniversalAvatarPickerDialog=function(a){var t=a.initialSelection||a.defaultAvatarId,r=new c({trigger:a.trigger,id:"project-avatar-picker",width:600,stacked:!0,content:function(i){var n,c;c=l('<div id="projectavatar-content-wrapper"/>'),l("<h2 />").text(a.title||"Select a Project Avatar").appendTo(c),n=s.createUniversalAvatarPicker({projectKey:a.projectKey,projectId:a.projectId,defaultAvatarId:a.defaultAvatarId,initialSelection:t,avatarType:a.avatarType,avatarSize:a.avatarSize,select:function(e,i,n){t=String(e.getId()),a.select&&a.select.apply(this,arguments),n||r.hide()}}),n.render(function(a){c.append(a),i(c)})}});r._focusFirstField=function(){}},s.createProjectAvatarPickerDialog=function(a){var t=new c({trigger:a.trigger,id:"project-avatar-picker",width:600,stacked:!0,content:function(r){var i,n;n=l('<div id="projectavatar-content-wrapper"/>'),l("<h2 />").text("Select a Project Avatar").appendTo(n),i=s.createProjectAvatarPicker({projectKey:a.projectKey,projectId:a.projectId,defaultAvatarId:a.defaultAvatarId,select:function(e,r,i){a.select&&a.select.apply(this,arguments),i||t.hide()}}),i.render(function(a){n.append(a),r(n)})}});t._focusFirstField=function(){}};var v=d.claim("jira.webresources:avatar-picker.data");s.createUserAvatarPickerDialog=function(t){if(v&&v.isEnabled)return void l(t.trigger).click(function(e){var t=o()+v.url;t+=(t.indexOf("?")>-1?"&":"?")+"continue="+encodeURIComponent(window.location.href),e.preventDefault(),e.stopPropagation(),a.reloadViaWindowLocation(t)});var r=new c({trigger:t.trigger,id:"user-avatar-picker",width:600,stacked:!0,content:function(a){var i,n;n=l('<div id="useravatar-content-wrapper"/>'),l("<h2 />").text("Select a User Avatar").appendTo(n),i=s.createUserAvatarPicker({username:t.username,defaultAvatarId:t.defaultAvatarId,select:function(a,e,i){t.select&&t.select.apply(this,arguments),l(".avatar-image").attr("src",e),i||r.hide()}}),i.render(function(e){n.append(e),a(n)})}})}});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/GravatarUtil.js' */
define("jira/ajs/avatarpicker/gravatar-util",["jquery","exports"],function(a,r){r.showGravatarHelp=function(r){void 0!==r&&void 0!==r.entry&&(a(".gravatar-signup-text").addClass("hidden"),a(".gravatar-login-text").removeClass("hidden"))},r.displayGravatarHelp=function(){var t=a("#gravatar_json_url");t.length&&a.ajax(t.val(),{dataType:"jsonp",success:r.showGravatarHelp})}});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/initAvatarPicker.js' */
!function(){var a=require("jquery"),r=require("jira/ajs/avatarpicker/avatar/sizes"),e=require("jira/ajs/avatarpicker/avatar-factory"),t=require("jira/ajs/avatarpicker/avatar-manager-factory"),c=require("jira/ajs/avatarpicker/avatar-picker-factory"),A=require("jira/ajs/avatarpicker/gravatar-util");AJS.namespace("JIRA.Avatar",null,require("jira/ajs/avatarpicker/avatar")),AJS.namespace("JIRA.Avatar.createCustomAvatar",null,e.createCustomAvatar),AJS.namespace("JIRA.Avatar.createSystemAvatar",null,e.createSystemAvatar),AJS.namespace("JIRA.Avatar.getSizeObjectFromName",null,r.getSizeObjectFromName),AJS.namespace("JIRA.Avatar.LARGE",null,r.LARGE),AJS.namespace("JIRA.Avatar.MEDIUM",null,r.MEDIUM),AJS.namespace("JIRA.Avatar.SMALL",null,r.SMALL),AJS.namespace("JIRA.AvatarManager",null,require("jira/ajs/avatarpicker/avatar-manager")),AJS.namespace("JIRA.AvatarManager.createUniversalAvatarManager",null,t.createUniversalAvatarManager),AJS.namespace("JIRA.AvatarManager.createProjectAvatarManager",null,t.createProjectAvatarManager),AJS.namespace("JIRA.AvatarManager.createUserAvatarManager",null,t.createUserAvatarManager),AJS.namespace("JIRA.AvatarPicker",null,require("jira/ajs/avatarpicker/avatar-picker")),AJS.namespace("JIRA.AvatarPicker.ImageEditor",null,require("jira/ajs/avatarpicker/avatar-picker/image-editor")),AJS.namespace("JIRA.AvatarPicker.createUniversalAvatarPicker",null,c.createUniversalAvatarPicker),AJS.namespace("JIRA.AvatarPicker.createProjectAvatarPicker",null,c.createProjectAvatarPicker),AJS.namespace("JIRA.AvatarPicker.createUserAvatarPicker",null,c.createUserAvatarPicker),AJS.namespace("JIRA.createUniversalAvatarPickerDialog",null,c.createUniversalAvatarPickerDialog),AJS.namespace("JIRA.createProjectAvatarPickerDialog",null,c.createProjectAvatarPickerDialog),AJS.namespace("JIRA.createUserAvatarPickerDialog",null,c.createUserAvatarPickerDialog),AJS.namespace("JIRA.AvatarStore",null,require("jira/ajs/avatarpicker/avatar-store")),AJS.namespace("JIRA.AvatarUtil",null,require("jira/ajs/avatarpicker/avatar-util")),AJS.namespace("JIRA.GravatarUtil.showGravatarHelp",null,A.showGravatarHelp),a(function(){c.createUserAvatarPickerDialog({trigger:"#user_avatar_image",username:a("#avatar-owner-id").text(),defaultAvatarId:a("#default-avatar-id").text()}),a("#gravatar_help_params")&&A.displayGravatarHelp()})}();;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/AvatarPicker.soy' */
// This file was automatically generated from AvatarPicker.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.AvatarPicker.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.AvatarPicker == 'undefined') { JIRA.Templates.AvatarPicker = {}; }


JIRA.Templates.AvatarPicker.picker = function(opt_data, opt_ignored) {
  var output = '<form class="jira-avatar-upload-form aui top-label" action="#"><input name="id" value="10000" type="hidden" ><input name="pid" value="10000" type="hidden" ><div class="field-group"><label for="jira-avatar-uploader">' + soy.$$escapeHtml("Upload a new avatar") + '</label><input type="file" class="ignore-inline-attach" name="avatar" id="jira-avatar-uploader"/><div class="error"></div></div></form><div class="form-body"><ul class="jira-avatars">';
  var avatarList6 = opt_data.avatars.system;
  var avatarListLen6 = avatarList6.length;
  for (var avatarIndex6 = 0; avatarIndex6 < avatarListLen6; avatarIndex6++) {
    var avatarData6 = avatarList6[avatarIndex6];
    output += '<li class="jira-avatar jira-system-avatar ' + ((avatarData6.isSelected) ? 'jira-selected-avatar' : '') + '" title="Select this Avatar" data-id="' + soy.$$escapeHtml(avatarData6.id) + '"><button id="select-avatar-button" data-id="' + soy.$$escapeHtml(avatarData6.id) + '" class="jira-icon-button" title="' + soy.$$escapeHtml("Select this Avatar") + '"><img id="avatar-' + soy.$$escapeHtml(avatarData6.id) + '" src="' + soy.$$escapeHtml(avatarData6.src) + '" width="' + soy.$$escapeHtml(avatarData6.width) + '" height="' + soy.$$escapeHtml(avatarData6.height) + '" alt="' + soy.$$escapeHtml("Select this Avatar") + '"/></button></li>';
  }
  var avatarList29 = opt_data.avatars.custom;
  var avatarListLen29 = avatarList29.length;
  for (var avatarIndex29 = 0; avatarIndex29 < avatarListLen29; avatarIndex29++) {
    var avatarData29 = avatarList29[avatarIndex29];
    output += '<li class="jira-avatar jira-custom-avatar ' + ((avatarData29.isSelected) ? 'jira-selected-avatar' : '') + '" title="Select this avatar" data-id="' + soy.$$escapeHtml(avatarData29.id) + '"><button id="select-avatar-button" data-id="' + soy.$$escapeHtml(avatarData29.id) + '" class="jira-icon-button" title="' + soy.$$escapeHtml("Select this Avatar") + '"><img id="avatar-' + soy.$$escapeHtml(avatarData29.id) + '" src="' + soy.$$escapeHtml(avatarData29.src) + '" width="' + soy.$$escapeHtml(avatarData29.width) + '" height="' + soy.$$escapeHtml(avatarData29.height) + '" alt="' + soy.$$escapeHtml("Select this Avatar") + '" /></span><button class="jira-delete-avatar jira-icon-button" data-id="' + soy.$$escapeHtml(avatarData29.id) + '" title="' + soy.$$escapeHtml("Delete this Avatar") + '">' + soy.$$escapeHtml("Delete this Avatar") + '</button></li>';
  }
  output += '</ul></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.AvatarPicker.picker.soyTemplateName = 'JIRA.Templates.AvatarPicker.picker';
}


JIRA.Templates.AvatarPicker.imageEditor = function(opt_data, opt_ignored) {
  return '<form id="avataror" class="jira-avatar-cropper-form aui" action="/jira/secure/project/AvatarPicker.jspa"><input type="hidden" name="cropperOffsetX" id="avatar-offsetX" value="' + soy.$$escapeHtml(opt_data.cropperOffsetX) + '"><input type="hidden" name="cropperOffsetY" id="avatar-offsetY" value="' + soy.$$escapeHtml(opt_data.cropperOffsetY) + '"><input type="hidden" name="cropperWidth" id="avatar-width"  value="' + soy.$$escapeHtml(opt_data.cropperWidth) + '"><div class="jira-avatar-cropper-header"><p>' + soy.$$escapeHtml("Please select which part of the uploaded image you wish to use as the avatar.") + '</p></div><div class="form-body"><div class="avataror"><img src="' + soy.$$escapeHtml(opt_data.url) + '" height="300" /></div></div><div class="form-footer buttons-container"><div class="buttons"><input type="submit" class="aui-button aui-button-primary" value="' + soy.$$escapeHtml("Confirm") + '"><a class="aui-button aui-button-link cancel" href="#">' + soy.$$escapeHtml("Cancel") + '</a></div></div></form>';
};
if (goog.DEBUG) {
  JIRA.Templates.AvatarPicker.imageEditor.soyTemplateName = 'JIRA.Templates.AvatarPicker.imageEditor';
}
;
;
/* module-key = 'jira.webresources:avatar-picker-trigger', location = '/includes/jira/admin/initAvatarPickerTrigger.js' */
define("jira/admin/init/avatar-picker-trigger",["jira/ajs/layer/layer-constants","jira/util/events","jira/util/events/types","jira/util/events/reasons","jira/ajs/layer/inline-layer","jira/ajs/contentretriever/content-retriever","jira/ajs/avatarpicker/avatar","jira/ajs/avatarpicker/avatar-picker-factory","jira/ajs/avatarpicker/avatar-picker","jira/ajs/avatarpicker/avatar-picker/image-editor","jquery"],function(t,a,e,r,i,n,c,s,v,o,d){"use strict";function f(t){var a=d(".jira-avatar-picker-trigger"),e=d(".jira-avatar-picker-trigger img, img.jira-avatar-picker-trigger",t),r=d(t).find("#avatar-picker-avatar-id"),i=d(t).find("#avatar-picker-iconurl"),n=d(t).find("#avatar-type");""!==n.text()&&s.createUniversalAvatarPickerDialog({trigger:a,title:d(t).find("#avatar-dialog-title").text(),projectId:d(t).find("#avatar-owner-id").text(),projectKey:d(t).find("#avatar-owner-key").text(),defaultAvatarId:d(t).find("#default-avatar-id").text(),initialSelection:r.val(),avatarSize:c.getSizeObjectFromName(d(t).find("#avatar-size").text()),avatarType:n.text(),select:function(t,a){e.attr("src",a),i.val(a),r.val(t.getId())}})}function l(a){var e=d(".jira-inline-avatar-picker-trigger",a);e.length&&new j({offsetTarget:e,projectId:d(a).find("#avatar-owner-id").text(),projectKey:d(a).find("#avatar-owner-key").text(),defaultAvatarId:d(a).find("#default-avatar-id").text(),alignment:t.LEFT,width:420,allowDownsize:!0})}var g=n.extend({init:function(t){this.avatarPicker=t},content:function(t){this.avatarPicker.render(function(a){t(d("<div />").html(a))})},cache:function(){return!1},isLocked:function(){},startingRequest:function(){},finishedRequest:function(){}}),j=i.extend({init:function(t){var a=this;this.avatarPicker=v.createProjectAvatarPicker({projectId:t.projectId,projectKey:t.projectKey,defaultAvatarId:t.defaultAvatarId,select:function(e,r,i){t.select&&t.select.apply(this,arguments),i||a.hide(),a.offsetTarget().attr("src",r),a.offsetTarget().trigger("AvatarSelected")}}),t.contentRetriever=new g(this.avatarPicker),d(this.avatarPicker.imageEditor).bind(o.LOADED,function(){a.setWidth(a.layer().attr("scrollWidth"))}),this._super(t);var e=this.offsetTarget(),r=d("<span class='jira-avatar-picker-trigger'></span>");r.insertBefore(e).append(e),this._assignEvents("offsetTarget",r)},_events:{offsetTarget:{click:function(t){this.show()}}}});a.bind(e.NEW_CONTENT_ADDED,function(t,a,e){e!==r.panelRefreshed&&(f(a),l(a))})});;
;
/* module-key = 'jira.webresources:avatar-picker-trigger', location = '/includes/jira/admin/init/init-avatar-picker.js' */
require("jira/admin/init/avatar-picker-trigger");;
;
/* module-key = 'jira.webresources:croneditor', location = '/includes/js/cron/croneditor.js' */
define("jira/util/cron",["exports"],function(n){"use strict";var i=window.timesOnce=window.timesOnce||{};n.hideCronEdit=function(n){document.getElementById(n).style.display="none"},n.showCronEdit=function(n){document.getElementById(n).style.display=""},n.toggleFrequencyControl=function(i,e){0==document.getElementById(i+"interval").value?n.switchToOnce(i,e):n.switchToMany(i,e)},n.switchToOnce=function(e,o){n.hideCronEdit(e+"runMany"),n.showCronEdit(e+"runOnce"),o&&(i[e]=!0)},n.switchToMany=function(e,o){n.hideCronEdit(e+"runOnce"),n.showCronEdit(e+"runMany"),o&&(i[e]=!1)},n.switchToDaysOfMonth=function(i){n.hideCronEdit(i+"daysOfWeek"),n.showCronEdit(i+"daysOfMonth"),n.showCronEdit(i+"freqDiv"),n.hideCronEdit(i+"innerFreqDiv"),n.hideCronEdit(i+"advanced"),n.switchToOnce(i,!1)},n.switchToDaysOfWeek=function(i){n.showCronEdit(i+"daysOfWeek"),n.hideCronEdit(i+"daysOfMonth"),n.showCronEdit(i+"freqDiv"),n.showCronEdit(i+"innerFreqDiv"),n.hideCronEdit(i+"advanced"),n.switchToOriginal(i)},n.switchToDaily=function(i){n.hideCronEdit(i+"daysOfWeek"),n.hideCronEdit(i+"daysOfMonth"),n.showCronEdit(i+"freqDiv"),n.showCronEdit(i+"innerFreqDiv"),n.hideCronEdit(i+"advanced"),n.switchToOriginal(i)},n.switchToAdvanced=function(i){n.hideCronEdit(i+"daysOfWeek"),n.hideCronEdit(i+"daysOfMonth"),n.hideCronEdit(i+"runOnce"),n.hideCronEdit(i+"runMany"),n.hideCronEdit(i+"freqDiv"),n.showCronEdit(i+"advanced")},n.switchToOriginal=function(e){i[e]?n.switchToOnce(e,!1):n.switchToMany(e,!1)}}),function(){"use strict";var n=require("jira/util/cron");AJS.namespace("hideCronEdit",null,n.hideCronEdit),AJS.namespace("showCronEdit",null,n.showCronEdit),AJS.namespace("switchToOnce",null,n.switchToOnce),AJS.namespace("switchToMany",null,n.switchToMany),AJS.namespace("switchToDaysOfMonth",null,n.switchToDaysOfMonth),AJS.namespace("switchToDaysOfWeek",null,n.switchToDaysOfWeek),AJS.namespace("switchToDaily",null,n.switchToDaily),AJS.namespace("switchToAdvanced",null,n.switchToAdvanced),AJS.namespace("switchToOriginal",null,n.switchToOriginal),AJS.namespace("toggleFrequencyControl",null,n.toggleFrequencyControl)}();;
;
/* module-key = 'jira.webresources:jira-page-atl-prefetch', location = '/includes/jira/page/prefetch.js' */
define("jira/page/atl/prefetch",["jira/util/data/meta","jira/data/local-storage","jira/ajs/dark-features","jquery","wrm/context-path"],function(e,t,r,n,i){"use strict";function a(e){n("<link />",{rel:"prefetch",href:e}).appendTo("head")}function s(e){var t=e.sections;if(t){var r=t.filter(function(e){return"issues_history_main"===e.id});if(r.length&&0!==r[0].items.length){return r[0].items[0].url}}}function u(e,t){for(var r;r=t.exec(e);){a(r[1].replace(/&amp;/g,"&"))}}function c(){t.setItem(h,d)}function f(e){u(e,/<script.+?src="(.+?)".+?<\/script>/g),u(e,/<link.+?rel="stylesheet".+?href="(.+?)".+?>/g),c()}function o(){return!!r.isEnabled("jira.issue.prefetch")&&(1===n("#isNavigator").length?(c(),!1):e.get("issue-key")?(c(),!1):d!==t.getItem(h))}function l(e){var t=s(e);t&&p(t)}function p(e){n.get(e,f)}function g(){o()&&n.ajax({url:i()+"/rest/api/1.0/menus/find_link?inAdminMode=false",dataType:"json"}).done(l)}var h="jira.issue.prefetch.last.superbatch",d=function(){var e=new Date,t=e.getFullYear().toString()+e.getMonth().toString()+e.getDate().toString(),r=n("head > script").filter(function(e,t){return t.src.indexOf("/_super")>0});return(r.length>0?r[0].src:"empty")+t}();return{prefetchResourcesForUrl:p,prefetchViewIssueResources:g}});;
;
/* module-key = 'jira.webresources:init-jira-page-atl-prefetch', location = '/includes/jira/page/initPrefetch.js' */
require(["jira/page/atl/prefetch","jquery"],function(e,r){r(window).on("load",e.prefetchViewIssueResources.bind(e))});;
;
/* module-key = 'com.rocketrack.jira.plugin.customer:customer-case-all', location = '/soy/notification.soy' */
// This file was automatically generated from notification.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace RocketTrack.Templates.CustomerCase.Notification.
 */

if (typeof RocketTrack == 'undefined') { var RocketTrack = {}; }
if (typeof RocketTrack.Templates == 'undefined') { RocketTrack.Templates = {}; }
if (typeof RocketTrack.Templates.CustomerCase == 'undefined') { RocketTrack.Templates.CustomerCase = {}; }
if (typeof RocketTrack.Templates.CustomerCase.Notification == 'undefined') { RocketTrack.Templates.CustomerCase.Notification = {}; }


RocketTrack.Templates.CustomerCase.Notification.emptyNotificationListView = function(opt_data, opt_ignored) {
  return '<div class="notification-view"><div class=""><section class=""><div id="main-view"><div><div class="no-assignments">No new updates.</div></div></div><div style="text-align:center;margin-top: 10px;"></div></section></div></div>';
};
if (goog.DEBUG) {
  RocketTrack.Templates.CustomerCase.Notification.emptyNotificationListView.soyTemplateName = 'RocketTrack.Templates.CustomerCase.Notification.emptyNotificationListView';
}


RocketTrack.Templates.CustomerCase.Notification.listView = function(opt_data, opt_ignored) {
  return '<div class=" notification-view"><div class=""><section class=""><div id="activity-spinner"></div><table class="aui"><thead><tr><th id="number">Case #</th><th id="summary">Summary</th><th id="status"></th></tr></thead><tbody></tbody></table><div style="text-align:center;margin-top: 10px;"></div> </section></div></div>';
};
if (goog.DEBUG) {
  RocketTrack.Templates.CustomerCase.Notification.listView.soyTemplateName = 'RocketTrack.Templates.CustomerCase.Notification.listView';
}


RocketTrack.Templates.CustomerCase.Notification.itemListView = function(opt_data, opt_ignored) {
  return '<td headers="name"><a class="notification-link" data-caseid="' + soy.$$escapeHtml(opt_data.caseId) + '" href="/secure/CustomerView.jspa#caseDetail/' + soy.$$escapeHtml(opt_data.caseId) + '">' + soy.$$escapeHtml(opt_data.caseNumber) + '</a></td><td headers="type"><a class="notification-link" data-caseid="' + soy.$$escapeHtml(opt_data.caseId) + '" href="/secure/CustomerView.jspa#caseDetail/' + soy.$$escapeHtml(opt_data.caseId) + '">' + soy.$$escapeHtml(opt_data.caseSummary) + '</a></td><td headers="read">' + ((opt_data.newCount != 0) ? '<span class="aui-badge">+' + soy.$$escapeHtml(opt_data.newCount) + '</span>' : '') + '</td>';
};
if (goog.DEBUG) {
  RocketTrack.Templates.CustomerCase.Notification.itemListView.soyTemplateName = 'RocketTrack.Templates.CustomerCase.Notification.itemListView';
}
;
;
/* module-key = 'com.rocketrack.jira.plugin.customer:customer-case-all', location = 'js/collections/Notifications.js' */
define("rocketrack/customer/case/notifications-collection", [
    "backbone"
], function (Backbone) {
    var Notification = Backbone.Model.extend({});
    return Backbone.Collection.extend({
        url: '/rest/rest-customer-case/1.0/notifications/',
        model: Notification,
        setRead: function () {
            return AJS.$.post('/rest/rest-customer-case/1.0/notifications/read', {});
        }
    });

});
;
;
/* module-key = 'com.rocketrack.jira.plugin.customer:customer-case-all', location = 'js/views/notification/EmptyListView.js' */
define("rocketrack/customer/case/notification-empty-list-view", [
    "backbone",
    "jquery"
], function (Backbone, $) {
    return Backbone.View.extend({
        template: RocketTrack.Templates.CustomerCase.Notification.emptyNotificationListView,
        render : function() {
            AJS.$(this.el).empty();

            AJS.$(this.template({})).appendTo(this.el);
            return this;
        }
    });
});;
;
/* module-key = 'com.rocketrack.jira.plugin.customer:customer-case-all', location = 'js/views/notification/ListItemView.js' */
define("rocketrack/customer/case/notification-list-item-view", [
    "backbone",
    "jquery"
], function (Backbone, $) {
    return Backbone.View.extend({
        template: RocketTrack.Templates.CustomerCase.Notification.itemListView,
        tagName: "tr",
        className: function () {
            var className = "notification-row";
            if (this.model.get( 'newCount' )!=0)
            {
                className = className+" notread"
            }
            return className;
        },
        render : function() {
            AJS.$(this.el).empty();

            AJS.$(this.template(this.model.toJSON())).appendTo(this.el);
            return this;
        }

    });
});;
;
/* module-key = 'com.rocketrack.jira.plugin.customer:customer-case-all', location = 'js/views/notification/ListView.js' */
define("rocketrack/customer/case/notification-list-view", [
    "backbone",
    "jquery",
    "rocketrack/customer/case/notification-list-item-view"
], function (Backbone, $,ListItemView) {
    return Backbone.View.extend({
        template: RocketTrack.Templates.CustomerCase.Notification.listView,
        itemView: ListItemView,
        initialize : function() {
            var that = this;
            this._collectionViews = [];

            this.collection.each(function(donut) {
                that._collectionViews.push(new ListItemView({
                    model : donut
                }));
            });
        },
        render : function() {
            var that = this;
            // Clear out this element.
            AJS.$(this.el).empty();
            AJS.$(this.template()).appendTo(this.el);
            var el = AJS.$(this.el).find("tbody");
            _(this._collectionViews).each(function(dv) {
                AJS.$(el).append(dv.render().el);
            });
            return this;
        }
    });
});;
;
/* module-key = 'com.rocketrack.jira.plugin.customer:customer-case-all', location = 'js/NotificationApp.js' */
define("rocketrack/customer/case/notification/app", [
    "wrm/data",
    "backbone",
    "jquery",
    "rocketrack/customer/case/notification-empty-list-view",
    "rocketrack/customer/case/notifications-collection",
    "rocketrack/customer/case/notification-list-view"
], function ( WRMData,
              Backbone,
              $,
              EmptyNotificationListView,
              Notifications,
              ListView
              ) {
    'use strict';
    function setNotificationCount() {
        AJS.$.ajax({ url: "/rest/rest-customer-case/1.0/notifications/count", success: function (data) {
                if (data["count"]!=0){
                    AJS.$(".notifications_count").html('<span class="aui-icon aui-icon-small aui-iconfont-workbox"></span>&nbsp;'+ data["count"])
                }
                else{
                    AJS.$(".notifications_count").html('<span class="aui-icon aui-icon-small aui-iconfont-workbox-empty"></span>&nbsp;'+ data["count"])
                }
            }, dataType: "json"});
    }

    function addNotiicationPlaceholder() {
        if (AJS.$(".aui-customer-case-trigger").length !== 0) {
            if (AJS.$(".notifications_count-trigger").length === 0) {
                AJS.$(".aui-customer-case-trigger").css("display", "inline-block");
                AJS.$('<a class="aui-nav-link  notifications_count-trigger" href="/secure/CustomerView.jspa"><span class="notifications_count"><span class="aui-icon aui-icon-small aui-iconfont-workbox"></span>&nbsp;</span></a>')
                    .insertAfter(".aui-customer-case-trigger");
                AJS.$(".notifications_count-trigger").css("display", "inline-block");
                setNotificationCount();
                AJS.InlineDialog(jQuery('.notifications_count-trigger'), 'myDialog', function (content, trigger, showPopup) {
                    content.css({padding: '20px', width: '600px'})
                    AJS.$('#activity-spinner').spin();
                    var data = new Notifications();
                    data.fetch().then(function () {
                        if (data.length != 0) {
                            var listView = new ListView({
                                collection: data,
                                el: content
                            });
                            AJS.$('#activity-spinner').spinStop();
                            listView.render();
                            AJS.$(listView.el)
                            // ajax submit form only when in kickass for footer
                                .delegate(".notification-link", "click", function (e) {
                                    var caseid = AJS.$(this).data("caseid");
                                    AJS.$.post('/rest/rest-customer-case/1.0/notifications/' + caseid + '/read', function (data) {
                                        setNotificationCount();
                                    });
                                })
                        }
                        else {
                            var listView = new EmptyNotificationListView({
                                collection: data,
                                el: content
                            });
                            AJS.$('#activity-spinner').spinStop();
                            listView.render();
                        }
                    });
                    showPopup();
                    return false;
                });
            }
        }

    }

    addNotiicationPlaceholder();
    setInterval(function(){
        addNotiicationPlaceholder();
    }, 1000);
    setInterval(function(){
        setNotificationCount();
    }, 30000);


});
AJS.namespace("RocketTrack.CustomerCases.Notification.app", null, require('rocketrack/customer/case/notification/app'));;
;
/* module-key = 'com.atlassian.jira.jira-header-plugin:newsletter-signup-tip-init', location = 'static/components/newsletter/initNewsletterSignup.js' */
define("jira/newsletter/init-signup",["wrm/data","wrm/require","require"],function(e,i,n){return function(){var r=e.claim("com.atlassian.jira.jira-header-plugin:newsletter-signup-tip-init.newsletterSignup");r&&r.showNewsletterTip&&i("wr!com.atlassian.jira.jira-header-plugin:newsletter-signup-tip").then(function(){n("jira/newsletter/signuptip").render(r)})}});;
;
/* module-key = 'com.atlassian.jira.jira-header-plugin:newsletter-signup-tip-init-init', location = 'static/components/newsletter/initInitNewsletterSignup.js' */
require(["jquery","jira/newsletter/init-signup"],function(i,n){i(function(){n()})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-admin-helper-plugin:dialog-resources', location = 'js/dialog.js' */
define("jira/admin-helper/dialog",["jquery","jira/dialog/dialog","jira/focus/set-focus"],function(c,a,b){return a.extend({_getDefaultOptions:function(){return c.extend(this._super(),{cached:false,widthClass:"large",stacked:true})},defineResources:function(){this._super();this.requireResource("com.atlassian.jira.plugins.jira-admin-helper-plugin:whereismycf-resources")},decorateContent:function(){var d=this;this.get$popupContent().find(".cancel").click(function(f){d.hide();f.preventDefault()})},_onShowContent:function(){this._super();if(a.current===this){var d=new b.FocusConfiguration();d.context=this.get$popup()[0];d.parentElementSelectors=[".form-body"];b.pushConfiguration(d);b.triggerFocus()}},hide:function(d){if(this._super(d)===false){return false}b.popConfiguration()}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-admin-helper-plugin:dialog-resources', location = 'js/notification-helper-init.js' */
require(["jquery","jira/admin-helper/dialog","jira/util/data/meta"],function(c,a,b){if(b.get("is-admin")){c(document).delegate(".notificationhelper-trigger","click",function(e){e.preventDefault();new a({id:"notification-helper-dialog",content:function d(g){var f=this;require(["jira/admin-helper/notification-helper/content-loader"],function(h){h.loadContent(f,g)})}}).show()})}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-admin-helper-plugin:dialog-resources', location = 'js/permission-helper-init.js' */
require(["jquery","jira/admin-helper/dialog","jira/util/data/meta"],function(c,a,b){if(b.get("is-admin")){c(document).delegate(".permissionhelper-trigger","click",function(e){e.preventDefault();new a({id:"permission-helper-dialog",content:function d(g){var f=this;require(["jira/admin-helper/permission-helper/content-loader"],function(h){h.loadContent(f,g)})}}).show()})}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-admin-helper-plugin:dialog-resources', location = 'js/whereismycf-init.js' */
require(["jquery","jira/admin-helper/dialog","jira/util/data/meta","jira/dialog/dialog"],function(e,a,d,b){if(d.get("is-admin")){var c="Where is my field?";e(document).delegate(".whereismycf-trigger","click",function(h){h.preventDefault();new a({id:"whereismycf-dialog",content:function g(j){var i=this;require(["jira/admin-helper/whereismycf/content-loader"],function(k){k.loadContentForView(i,j)})}}).show()});e(document).bind("showLayer",function(h,j,i){if(j=="inlineDialog"&&i.popup.attr("id")=="inline-dialog-field_picker_popup"){if(i.popup.find(".whereismycf-qfpicker-link").length==0){var g=e("<a href='#' class='whereismycf-qfpicker-link'>"+c+"</a>").appendTo(i.popup.find(".qf-picker-header dl"));g.click(function(m){m.preventDefault();i.hide();f();var k=b.current;new a({id:"whereismycf-dialog",content:function l(o){var n=this;require(["jira/admin-helper/whereismycf/content-loader"],function(p){p.loadContentForEditAndCreate(n,k,o)})}}).show()})}}});function f(){AJS.InlineDialog.current=null}}});;
;
/* module-key = 'com.rocketrack.jira.plugin.customfield:com.rocketrack.jira.plugin.customfield.common-web-resources', location = 'js/functions.js' */
AJS.$(function(){JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(d,b,c){var a=AJS.$(b);a.find("#rateit").each(function(){var e=AJS.$(this);e.rateit();console.log(" ==== Draw starts")})})});;
;
/* module-key = 'jira.webresources:field-templates', location = '/includes/jira/field/templates/singleUserPicker.soy' */
// This file was automatically generated from singleUserPicker.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Fields.Pickers.User.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Fields == 'undefined') { JIRA.Templates.Fields = {}; }
if (typeof JIRA.Templates.Fields.Pickers == 'undefined') { JIRA.Templates.Fields.Pickers = {}; }
if (typeof JIRA.Templates.Fields.Pickers.User == 'undefined') { JIRA.Templates.Fields.Pickers.User = {}; }


JIRA.Templates.Fields.Pickers.User.single = function(opt_data, opt_ignored) {
  var output = '<select id="' + soy.$$escapeHtml(opt_data.field.id) + '" name="' + soy.$$escapeHtml(opt_data.field.name) + '" class="single-user-picker js-' + ((opt_data.type) ? soy.$$escapeHtml(opt_data.type) : 'default-user-picker') + '"' + ((opt_data.inputText) ? ' data-input-text="' + soy.$$escapeHtml(opt_data.inputText) + '"' : '') + ((opt_data.editValue) ? ' data-edit-value="' + soy.$$escapeHtml(opt_data.editValue) + '"' : '') + ((opt_data.showDropdownButton) ? ' data-show-dropdown-button="true"' : '') + ((opt_data.userType) ? ' data-user-type="' + soy.$$escapeHtml(opt_data.userType) + '"' : '') + ((opt_data.containerClass) ? ' data-container-class="' + soy.$$escapeHtml(opt_data.containerClass) + '"' : '') + '>';
  var optionList38 = opt_data.options;
  var optionListLen38 = optionList38.length;
  for (var optionIndex38 = 0; optionIndex38 < optionListLen38; optionIndex38++) {
    var optionData38 = optionList38[optionIndex38];
    if (optionData38.optionGroup) {
      output += '<optgroup id="' + soy.$$escapeHtml(opt_data.field.id) + '-group-' + soy.$$escapeHtml(optionData38.id) + '" label="' + soy.$$escapeHtml(optionData38.display) + '"' + ((optionData38.footer) ? ' data-footer-text="' + soy.$$escapeHtml(optionData38.footer) + '"' : '') + ((optionData38.weight != -1) ? ' data-weight="' + soy.$$escapeHtml(optionData38.weight) + '"' : '') + '>';
      var groupOptionList59 = optionData38.groupOptions;
      var groupOptionListLen59 = groupOptionList59.length;
      for (var groupOptionIndex59 = 0; groupOptionIndex59 < groupOptionListLen59; groupOptionIndex59++) {
        var groupOptionData59 = groupOptionList59[groupOptionIndex59];
        output += JIRA.Templates.Fields.Pickers.User.option(groupOptionData59);
      }
      output += '</optgroup>';
    } else {
      output += JIRA.Templates.Fields.Pickers.User.option(optionData38);
    }
  }
  output += '</select>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Fields.Pickers.User.single.soyTemplateName = 'JIRA.Templates.Fields.Pickers.User.single';
}


JIRA.Templates.Fields.Pickers.User.option = function(opt_data, opt_ignored) {
  return '<option ' + ((opt_data.loggedInUser) ? 'class="current-user" ' : '') + ((opt_data.selected) ? 'selected="selected" ' : '') + 'value="' + soy.$$escapeHtml(opt_data.optionName) + '" data-field-text="' + soy.$$escapeHtml(opt_data.displayName) + '" data-field-label="' + soy.$$escapeHtml(opt_data.displayName) + ((opt_data.emailAddress) ? ' - ' + soy.$$escapeHtml(opt_data.emailAddress) : '') + ((opt_data.optionName && opt_data.optionName != '-1') ? ' (' + soy.$$escapeHtml(opt_data.optionName) + ')' : '') + '" data-icon="' + soy.$$escapeHtml(opt_data.avatarURL) + '" >' + soy.$$escapeHtml(opt_data.displayName) + '</option>';
};
if (goog.DEBUG) {
  JIRA.Templates.Fields.Pickers.User.option.soyTemplateName = 'JIRA.Templates.Fields.Pickers.User.option';
}
;
;
/* module-key = 'jira.webresources:field-templates', location = '/includes/jira/field/templates/assigneeField.soy' */
// This file was automatically generated from assigneeField.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Fields.Pickers.User.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Fields == 'undefined') { JIRA.Templates.Fields = {}; }
if (typeof JIRA.Templates.Fields.Pickers == 'undefined') { JIRA.Templates.Fields.Pickers = {}; }
if (typeof JIRA.Templates.Fields.Pickers.User == 'undefined') { JIRA.Templates.Fields.Pickers.User = {}; }


JIRA.Templates.Fields.Pickers.User.assignee = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.Fields.Pickers.User.single(soy.$$augmentMap(opt_data, {options: opt_data.assigneeOptions.options, showDropdownButton: true, userType: 'assignee', type: 'assignee-picker', containerClass: 'long-field'})) + ((opt_data.isLoggedInUserAssignable) ? '<a href="#' + soy.$$escapeHtml(opt_data.field.id) + '" id="assign-to-me-trigger">' + soy.$$escapeHtml("Assign to me") + '</a>' : '') + '<fieldset class="hidden parameters"><input type="hidden" title="projectKeys" value="' + soy.$$escapeHtml(opt_data.projectKeys) + '"/>' + ((opt_data.issueKey) ? '<input type="hidden" title="assigneeEditIssueKey" value="' + soy.$$escapeHtml(opt_data.issueKey) + '"/>' : '') + ((opt_data.actionDescriptorId) ? '<input type="hidden" title="actionDescriptorId" value="' + soy.$$escapeHtml(opt_data.actionDescriptorId) + '"/>' : '') + '</fieldset>';
};
if (goog.DEBUG) {
  JIRA.Templates.Fields.Pickers.User.assignee.soyTemplateName = 'JIRA.Templates.Fields.Pickers.User.assignee';
}
;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/lib/jquery.dotdotdot-1.5.7.js' */
(function(i){if(i.fn.dotdotdot){return}i.fn.dotdotdot=function(v){if(this.length==0){if(!v||v.debug!==false){b(true,'No element found for "'+this.selector+'".')}return this}if(this.length>1){return this.each(function(){i(this).dotdotdot(v)})}var r=this;if(r.data("dotdotdot")){r.trigger("destroy.dot")}r.bind_events=function(){r.bind("update.dot",function(y,A){y.preventDefault();y.stopPropagation();t.maxHeight=(typeof t.height=="number")?t.height:o(r);t.maxHeight+=t.tolerance;if(typeof A!="undefined"){if(typeof A=="string"||A instanceof HTMLElement){A=i("<div />").append(A).contents()}if(A instanceof i){w=A}}s=r.wrapInner('<div class="dotdotdot" />').children();s.empty().append(w.clone(true)).css({height:"auto",width:"auto",border:"none",padding:0,margin:0});var z=false,x=false;if(q.afterElement){z=q.afterElement.clone(true);q.afterElement.remove()}if(k(s,t)){if(t.wrap=="children"){x=d(s,t,z)}else{x=m(s,r,s,t,z)}}s.replaceWith(s.contents());s=null;if(i.isFunction(t.callback)){t.callback.call(r[0],x,w)}q.isTruncated=x;return x}).bind("isTruncated.dot",function(y,x){y.preventDefault();y.stopPropagation();if(typeof x=="function"){x.call(r[0],q.isTruncated)}return q.isTruncated}).bind("originalContent.dot",function(y,x){y.preventDefault();y.stopPropagation();if(typeof x=="function"){x.call(r[0],w)}return w}).bind("destroy.dot",function(x){x.preventDefault();x.stopPropagation();r.unwatch().unbind_events().empty().append(w).data("dotdotdot",false)});return r};r.unbind_events=function(){r.unbind(".dot");return r};r.watch=function(){r.unwatch();if(t.watch=="window"){var z=i(window),y=z.width(),x=z.height();z.bind("resize.dot"+q.dotId,function(){if(y!=z.width()||x!=z.height()||!t.windowResizeFix){y=z.width();x=z.height();if(p){clearInterval(p)}p=setTimeout(function(){r.trigger("update.dot")},10)}})}else{u=j(r);p=setInterval(function(){var A=j(r);if(u.width!=A.width||u.height!=A.height){r.trigger("update.dot");u=j(r)}},100)}return r};r.unwatch=function(){i(window).unbind("resize.dot"+q.dotId);if(p){clearInterval(p)}return r};var w=r.contents(),t=i.extend(true,{},i.fn.dotdotdot.defaults,v),q={},u={},p=null,s=null;q.afterElement=c(t.after,r);q.isTruncated=false;q.dotId=l++;r.data("dotdotdot",true).bind_events().trigger("update.dot");if(t.watch){r.watch()}return r};i.fn.dotdotdot.defaults={ellipsis:"... ",wrap:"word",lastCharacter:{remove:[" ",",",";",".","!","?"],noEllipsis:[]},tolerance:0,callback:null,after:null,height:null,watch:false,windowResizeFix:true,debug:false};var l=1;function d(s,w,v){var u=s.children(),p=false;s.empty();for(var r=0,q=u.length;r<q;r++){var t=u.eq(r);s.append(t);if(v){s.append(v)}if(k(s,w)){t.remove();p=true;break}else{if(v){v.remove()}}}return p}function m(s,r,A,t,q){var w=s.contents(),x=false;s.empty();var z="table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, select, optgroup, option, textarea, script, style";for(var y=0,u=w.length;y<u;y++){if(x){break}var v=w[y],p=i(v);if(typeof v=="undefined"){continue}s.append(p);if(q){s[(s.is(z))?"after":"append"](q)}if(v.nodeType==3){if(k(A,t)){x=e(p,r,A,t,q)}}else{x=m(p,r,A,t,q)}if(!x){if(q){q.remove()}}}return x}function e(q,r,p,w,s){var D=false,A=q[0];if(typeof A=="undefined"){return false}var E=(w.wrap=="letter")?"":" ",t=h(A).split(E),F=-1,v=-1,G=0,y=t.length-1;while(G<=y){var x=Math.floor((G+y)/2);if(x==v){break}v=x;a(A,t.slice(0,v+1).join(E)+w.ellipsis);if(!k(p,w)){F=v;G=v}else{y=v}}if(F!=-1&&!(t.length==1&&t[0].length==0)){var u=f(t.slice(0,F+1).join(E),w);D=true;a(A,u)}else{var z=q.parent();q.remove();var C=(s)?s.length:0;if(z.contents().size()>C){var B=z.contents().eq(-1-C);D=e(B,r,p,w,s)}else{var A=z.prev().contents().eq(-1)[0];if(typeof A!="undefined"){var u=f(h(A),w);a(A,u);z.remove();D=true}}}return D}function k(q,p){return q.innerHeight()>p.maxHeight}function f(p,q){while(i.inArray(p.slice(-1),q.lastCharacter.remove)>-1){p=p.slice(0,-1)}if(i.inArray(p.slice(-1),q.lastCharacter.noEllipsis)<0){p+=q.ellipsis}return p}function j(p){return{width:p.innerWidth(),height:p.innerHeight()}}function a(q,p){if(q.innerText){q.innerText=p}else{if(q.nodeValue){q.nodeValue=p}else{if(q.textContent){q.textContent=p}}}}function h(p){if(p.innerText){return p.innerText}else{if(p.nodeValue){return p.nodeValue}else{if(p.textContent){return p.textContent}else{return""}}}}function c(p,q){if(typeof p=="undefined"){return false}if(!p){return false}if(typeof p=="string"){p=i(p,q);return(p.length)?p:false}if(typeof p=="object"){return(typeof p.jquery=="undefined")?false:p}return false}function o(s){var t=s.innerHeight(),r=["paddingTop","paddingBottom"];for(var u=0,q=r.length;u<q;u++){var p=parseInt(s.css(r[u]),10);if(isNaN(p)){p=0}t-=p}return t}function b(q,p){if(!q){return false}if(typeof p=="string"){p="dotdotdot: "+p}else{p=["dotdotdot:",p]}if(typeof window.console!="undefined"){if(typeof window.console.log!="undefined"){window.console.log(p)}}return false}var n=i.fn.html;i.fn.html=function(p){if(typeof p!="undefined"){if(this.data("dotdotdot")){if(typeof p!="function"){return this.trigger("update",[p])}}return n.call(this,p)}return n.call(this)};var g=i.fn.text;i.fn.text=function(q){if(typeof q!="undefined"){if(this.data("dotdotdot")){var p=i("<div />");p.text(q);q=p.html();p.remove();return this.trigger("update",[q])}return g.call(this,q)}return g.call(this)}})(require("jquery"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/soy/ProjectTemplatesList.soy' */
// This file was automatically generated from ProjectTemplatesList.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.ProjectTemplates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.ProjectTemplates == 'undefined') { JIRA.Templates.ProjectTemplates = {}; }


JIRA.Templates.ProjectTemplates.renderProjectTemplates = function(opt_data, opt_ignored) {
  return '' + ((soy.$$getMapKeys(opt_data.projectTemplates).length == 0) ? JIRA.Templates.errorMsg({closeable: false, msg: "No project templates could be found."}) : JIRA.Templates.ProjectTemplates.renderTemplates(opt_data));
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.renderProjectTemplates.soyTemplateName = 'JIRA.Templates.ProjectTemplates.renderProjectTemplates';
}


JIRA.Templates.ProjectTemplates.renderProjectTemplatesGroupedByType = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.projectTemplatesByType.length == 0) {
    output += JIRA.Templates.errorMsg({closeable: false, msg: "No project templates could be found."});
  } else {
    var projectTypeTemplatesGroupList18 = opt_data.projectTemplatesByType;
    var projectTypeTemplatesGroupListLen18 = projectTypeTemplatesGroupList18.length;
    for (var projectTypeTemplatesGroupIndex18 = 0; projectTypeTemplatesGroupIndex18 < projectTypeTemplatesGroupListLen18; projectTypeTemplatesGroupIndex18++) {
      var projectTypeTemplatesGroupData18 = projectTypeTemplatesGroupList18[projectTypeTemplatesGroupIndex18];
      output += '<div class="template-group" id="project-template-group-' + soy.$$escapeHtml(projectTypeTemplatesGroupData18.projectTypeBean.projectTypeKey) + '"><div class="template-group-header"><h6><img class="project-type-icon" src="data:image/svg+xml;base64, ' + soy.$$escapeHtml(projectTypeTemplatesGroupData18.projectTypeBean.icon) + ' "/><span>' + soy.$$escapeHtml(projectTypeTemplatesGroupData18.projectTypeBean.projectTypeDisplayKey) + '</span></h6></div>' + JIRA.Templates.ProjectTemplates.renderTemplates({projectTemplates: projectTypeTemplatesGroupData18.projectTemplates}) + '</div>';
    }
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.renderProjectTemplatesGroupedByType.soyTemplateName = 'JIRA.Templates.ProjectTemplates.renderProjectTemplatesGroupedByType';
}


JIRA.Templates.ProjectTemplates.renderTemplates = function(opt_data, opt_ignored) {
  return '<div class="pt-templates-list">' + JIRA.Templates.ProjectTemplates.renderItems(opt_data) + '</div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.renderTemplates.soyTemplateName = 'JIRA.Templates.ProjectTemplates.renderTemplates';
}


JIRA.Templates.ProjectTemplates.renderItems = function(opt_data, opt_ignored) {
  var output = '<ol class="templates" tabindex="100">';
  var templateList37 = opt_data.projectTemplates;
  var templateListLen37 = templateList37.length;
  for (var templateIndex37 = 0; templateIndex37 < templateListLen37; templateIndex37++) {
    var templateData37 = templateList37[templateIndex37];
    output += '<li class="template"' + ((templateData37.itemModuleCompleteKey) ? 'data-item-module-complete-key="' + soy.$$escapeHtml(templateData37.itemModuleCompleteKey) + '"' : '') + ((templateData37.projectTemplateModuleCompleteKey) ? 'data-project-template-module-complete-key="' + soy.$$escapeHtml(templateData37.projectTemplateModuleCompleteKey) + '"' : '') + ((templateData37.createProject) ? 'data-create-project="' + soy.$$escapeHtml(templateData37.createProject) + '"' : '') + ((templateData37.demoProject) ? 'data-demo-project="' + soy.$$escapeHtml(templateData37.demoProject) + '"' : '') + ((templateData37.backgroundIconUrl) ? 'data-background-icon-url="' + soy.$$escapeHtml(templateData37.backgroundIconUrl) + '"' : '') + ((templateData37.name) ? 'data-name="' + soy.$$escapeHtml(templateData37.name) + '"' : '') + ((templateData37.description) ? 'data-description="' + soy.$$escapeHtml(templateData37.description) + '"' : '') + ((templateData37.longDescriptionContent) ? 'data-long-description-content="' + soy.$$escapeHtml(templateData37.longDescriptionContent) + '"' : '') + ((templateData37.infoSoyPath) ? 'data-info-soy-path="' + soy.$$escapeHtml(templateData37.infoSoyPath) + '"' : '') + '><img class="template-preview" src="' + soy.$$escapeHtml(templateData37.iconUrl) + '" /><div class="template-meta"><div class="template-name" title="' + soy.$$escapeHtml(templateData37.name) + '">' + soy.$$escapeHtml(templateData37.name) + '</div><div class="template-description" title="' + soy.$$escapeHtml(templateData37.description) + '">' + soy.$$escapeHtml(templateData37.description) + '</div></div></li>';
  }
  output += '</ol>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.renderItems.soyTemplateName = 'JIRA.Templates.ProjectTemplates.renderItems';
}


JIRA.Templates.ProjectTemplates.loadingTemplatesList = function(opt_data, opt_ignored) {
  return '<div class="wait-container"><img class="wait-icon" src="' + soy.$$escapeHtml("") + '/images/icons/wait.gif"><span class="wait-text">' + soy.$$escapeHtml("Loading project templates") + '&hellip;</span></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.loadingTemplatesList.soyTemplateName = 'JIRA.Templates.ProjectTemplates.loadingTemplatesList';
}


JIRA.Templates.ProjectTemplates.footerLinks = function(opt_data, opt_ignored) {
  return '<div class="footer-links"><a class="import-project-trigger button-panel-link" href="' + soy.$$escapeHtml("") + '/secure/admin/views/ExternalImport1.jspa">' + soy.$$escapeHtml("Import a project") + '</a>|<a class="create-with-shared-config button-panel-link" href="#"><span class="aui-icon aui-icon-create-shared">' + soy.$$escapeHtml("Create with shared configuration") + '</span> ' + soy.$$escapeHtml("Create with shared configuration") + '</a>' + ((opt_data.showDemoLink) ? '| <a class="add-demo-project-trigger button-panel-link" href="#">' + soy.$$escapeHtml("Create sample data") + '</a>' : '') + '</div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.footerLinks.soyTemplateName = 'JIRA.Templates.ProjectTemplates.footerLinks';
}


JIRA.Templates.ProjectTemplates.addWorkflowsLink = function(opt_data, opt_ignored) {
  return '<a class="add-workflow-link" href="' + soy.$$escapeHtml(opt_data.baseUrl) + '/plugins/servlet/wfshare-import?src=projecttemplates" tabindex="-1">' + soy.$$escapeHtml("View Marketplace Workflows") + '</a>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.addWorkflowsLink.soyTemplateName = 'JIRA.Templates.ProjectTemplates.addWorkflowsLink';
}
;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/soy/AddProject.soy' */
// This file was automatically generated from AddProject.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.ProjectTemplates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.ProjectTemplates == 'undefined') { JIRA.Templates.ProjectTemplates = {}; }


JIRA.Templates.ProjectTemplates.addProjectForm = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.errors.errorMessages) {
    var errorList5 = opt_data.errors.errorMessages;
    var errorListLen5 = errorList5.length;
    for (var errorIndex5 = 0; errorIndex5 < errorListLen5; errorIndex5++) {
      var errorData5 = errorList5[errorIndex5];
      output += JIRA.Templates.errorMsg({closeable: false, msg: errorData5});
    }
  }
  output += '<div class="add-project-wrapper"><div class="add-project-form-wrapper">' + aui.form.form({content: '' + aui.form.fieldset({legendContent: '', content: '' + JIRA.Templates.ProjectTemplates.longTextField({id: 'name', name: 'name', isRequired: false, maxLength: opt_data.maxNameLength, labelContent: "Name", descriptionText: AJS.format("Max. {0} characters.",opt_data.maxNameLength), value: opt_data.currentName ? opt_data.currentName : '', errorTexts: opt_data.errors.errors.projectName ? [opt_data.errors.errors.projectName] : []}) + JIRA.Templates.ProjectTemplates.textFieldWithHelpIcon({id: 'key', name: 'key', isRequired: false, maxLength: opt_data.maxKeyLength, labelContent: "Key", descriptionText: AJS.format("Max. {0} characters.",opt_data.maxKeyLength), helpTitle: "What\x27s a project key?", value: opt_data.currentKey ? opt_data.currentKey : '', errorTexts: opt_data.errors.errors.projectKey ? [opt_data.errors.errors.projectKey] : []}) + ((opt_data.shouldShowLead) ? JIRA.Templates.ProjectTemplates.projectLeadField({field: opt_data.projectLeadPickerField, isRequired: false, errorTexts: opt_data.errors.errors.projectLead ? [opt_data.errors.errors.projectLead] : [], options: opt_data.leadOptions}) : '') + ((opt_data.addUserToLicense.displayCheckbox) ? JIRA.Templates.ProjectTemplates.addUserToLicense({fieldId: opt_data.addUserToLicense.fieldId, fieldName: opt_data.addUserToLicense.fieldName, applicationName: opt_data.addUserToLicense.applicationName, usedSeats: opt_data.addUserToLicense.usedSeats, totalSeats: opt_data.addUserToLicense.totalSeats, disableCheckbox: opt_data.addUserToLicense.disableCheckbox, licensingUrl: opt_data.addUserToLicense.licensingUrl}) : '') + '<input type="hidden" name="keyEdited" id="keyEdited" value="false"><input type="hidden" name="projectTemplateWebItemKey" value="' + soy.$$escapeHtml(opt_data.projectTemplateWebItemKey) + '"><input type="hidden" name="projectTemplateModuleKey" value="' + soy.$$escapeHtml(opt_data.projectTemplateModuleKey) + '"><input type="submit" class="pt-hidden-submit offscreen-left">'}), id: 'add-project-form'}) + '</div>' + ((opt_data.projectTemplateDescriptionContent) ? '<div class="add-project-description-wrapper"><div class="project-template-title"><h3>' + soy.$$escapeHtml(opt_data.projectTemplateTitle) + '</h3></div><div class="project-template-description">' + soy.$$filterNoAutoescape(opt_data.projectTemplateDescriptionContent) + '</div></div>' : '') + '</div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.addProjectForm.soyTemplateName = 'JIRA.Templates.ProjectTemplates.addProjectForm';
}


JIRA.Templates.ProjectTemplates.keyHelp = function(opt_data, opt_ignored) {
  return '<div class="project-key-help"><p><b>' + soy.$$escapeHtml("What\x27s a project key?") + '</b></p><ul><li>' + soy.$$escapeHtml("It prefixes each issue in the project") + '</li><li>' + soy.$$escapeHtml("It can be changed, but this is not a trivial task") + '</li></ul></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.keyHelp.soyTemplateName = 'JIRA.Templates.ProjectTemplates.keyHelp';
}


JIRA.Templates.ProjectTemplates.projectLeadField = function(opt_data, opt_ignored) {
  var param77 = '' + aui.form.label({forField: opt_data.field.name + '-field', isRequired: opt_data.isRequired, content: "Project Lead"}) + JIRA.Templates.Fields.Pickers.User.single({field: opt_data.field, options: opt_data.options, editValue: opt_data.value}) + aui.form.fieldDescription({message: "Enter the username of the Project Lead."});
  if (opt_data.errorTexts) {
    var errorList90 = opt_data.errorTexts;
    var errorListLen90 = errorList90.length;
    for (var errorIndex90 = 0; errorIndex90 < errorListLen90; errorIndex90++) {
      var errorData90 = errorList90[errorIndex90];
      param77 += aui.form.fieldError({message: errorData90});
    }
  }
  var output = '' + aui.form.fieldGroup({content: param77});
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.projectLeadField.soyTemplateName = 'JIRA.Templates.ProjectTemplates.projectLeadField';
}


JIRA.Templates.ProjectTemplates.addUserToLicense = function(opt_data, opt_ignored) {
  var output = '';
  var labelMessage__soy96 = '' + soy.$$escapeHtml(AJS.format("Give me a {0} license so I can access this project.",opt_data.applicationName)) + ((opt_data.totalSeats > 0) ? '<br/>' + soy.$$escapeHtml(AJS.format("({0} of {1} licenses now used)",opt_data.usedSeats,opt_data.totalSeats)) : '');
  output += aui.form.fieldGroup({content: '' + aui.form.label({forField: opt_data.fieldName, content: 'License'}) + ((opt_data.disableCheckbox) ? aui.form.field({id: opt_data.fieldId, name: opt_data.fieldName, value: 'true', type: 'checkbox', isChecked: false, labelContent: labelMessage__soy96, isDisabled: true, descriptionContent: AJS.format("We can\x27\x27t give you access to {0} automatically. You can {1}manage application access{2} to work on {0} projects.",opt_data.applicationName,'<a href="' + "" + opt_data.licensingUrl + '">','</a>')}) : aui.form.field({id: opt_data.fieldId, name: opt_data.fieldName, value: 'true', type: 'checkbox', isChecked: false, labelContent: labelMessage__soy96, isDisabled: false}))});
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.addUserToLicense.soyTemplateName = 'JIRA.Templates.ProjectTemplates.addUserToLicense';
}


JIRA.Templates.ProjectTemplates.textFieldWithHelpIcon = function(opt_data, opt_ignored) {
  var param128 = '' + aui.form.label({forField: opt_data.name, isRequired: opt_data.isRequired, content: opt_data.labelContent}) + aui.form.input({id: opt_data.id, name: opt_data.name, type: 'text', maxLength: opt_data.maxLength, value: opt_data.value}) + '<a class="help-lnk" title="' + soy.$$escapeHtml(opt_data.helpTitle) + '" id="' + soy.$$escapeHtml(opt_data.id) + '-help-icon"><span class="aui-icon aui-icon-help">' + soy.$$escapeHtml(opt_data.helpTitle) + '</span></a>' + ((opt_data.descriptionText) ? aui.form.fieldDescription({message: opt_data.descriptionText}) : '');
  if (opt_data.errorTexts) {
    var errorList152 = opt_data.errorTexts;
    var errorListLen152 = errorList152.length;
    for (var errorIndex152 = 0; errorIndex152 < errorListLen152; errorIndex152++) {
      var errorData152 = errorList152[errorIndex152];
      param128 += aui.form.fieldError({message: errorData152});
    }
  }
  var output = '' + aui.form.fieldGroup({content: param128});
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.textFieldWithHelpIcon.soyTemplateName = 'JIRA.Templates.ProjectTemplates.textFieldWithHelpIcon';
}


JIRA.Templates.ProjectTemplates.longTextField = function(opt_data, opt_ignored) {
  var param158 = '' + aui.form.label({forField: opt_data.name, isRequired: opt_data.isRequired, content: opt_data.labelContent}) + aui.form.input({id: opt_data.id, name: opt_data.name, type: 'text', maxLength: opt_data.maxLength, value: opt_data.value, extraClasses: 'long-field'}) + ((opt_data.descriptionText) ? aui.form.fieldDescription({message: opt_data.descriptionText}) : '');
  if (opt_data.errorTexts) {
    var errorList176 = opt_data.errorTexts;
    var errorListLen176 = errorList176.length;
    for (var errorIndex176 = 0; errorIndex176 < errorListLen176; errorIndex176++) {
      var errorData176 = errorList176[errorIndex176];
      param158 += aui.form.fieldError({message: errorData176});
    }
  }
  var output = '' + aui.form.fieldGroup({content: param158});
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.longTextField.soyTemplateName = 'JIRA.Templates.ProjectTemplates.longTextField';
}


JIRA.Templates.ProjectTemplates.spinner = function(opt_data, opt_ignored) {
  return '<span id=\'' + soy.$$escapeHtml(opt_data.id) + '\' class=\'icon throbber loading\'/>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.spinner.soyTemplateName = 'JIRA.Templates.ProjectTemplates.spinner';
}


JIRA.Templates.ProjectTemplates.formatAnchor = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(opt_data.href) + '"' + ((opt_data.title) ? ' title="' + soy.$$escapeHtml(opt_data.title) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.body) + '</a>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.formatAnchor.soyTemplateName = 'JIRA.Templates.ProjectTemplates.formatAnchor';
}
;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/soy/CreateSharedProject.soy' */
// This file was automatically generated from CreateSharedProject.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.ProjectTemplates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.ProjectTemplates == 'undefined') { JIRA.Templates.ProjectTemplates = {}; }


JIRA.Templates.ProjectTemplates.createSharedProjectForm = function(opt_data, opt_ignored) {
  return '<div class="create-shared-project-wrapper"><div class="create-shared-project-form-wrapper">' + aui.form.form({content: '' + aui.form.fieldset({content: '<p>' + soy.$$escapeHtml("Select the existing project that you\x27d like to share configurations with.") + '<a class="help-lnk" title="' + soy.$$escapeHtml("What will be shared?") + '" id="shared-help-icon"><span class="aui-icon aui-icon-help">' + soy.$$escapeHtml("What will be shared?") + '</span></a></p>' + aui.form.fieldGroup({extraClasses: 'project-picker-group', content: '' + aui.form.label({forField: 'project-picker', isRequired: false, content: "Choose a project"}) + aui.form.input({id: 'project-picker', name: 'project', type: 'text'}) + '<div id="project-picker-options" data-suggestions="' + soy.$$escapeHtml(opt_data.projectSuggestions) + '"></div>'}) + '<p class="create-shared-info">' + soy.$$escapeHtml("When a configuration is shared with several projects, it means that any changes made to the configuration will affect all the projects.") + '</p>'}), id: 'create-shared-project-form'}) + '</div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.createSharedProjectForm.soyTemplateName = 'JIRA.Templates.ProjectTemplates.createSharedProjectForm';
}


JIRA.Templates.ProjectTemplates.loading = function(opt_data, opt_ignored) {
  return '<div><div class="dialog-spinner"></div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.loading.soyTemplateName = 'JIRA.Templates.ProjectTemplates.loading';
}


JIRA.Templates.ProjectTemplates.noProjects = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$escapeHtml("Looks like no other projects exist yet. Please create a brand new project first before trying to share an existing project\x27s configuration.") + '</p>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.noProjects.soyTemplateName = 'JIRA.Templates.ProjectTemplates.noProjects';
}


JIRA.Templates.ProjectTemplates.sharedHelp = function(opt_data, opt_ignored) {
  return '<div class="shared-help"><p><strong>' + soy.$$escapeHtml("What will be shared?") + '</strong></p><p>' + soy.$$escapeHtml("Configuration refers to the set of schemes used by a project") + '</p><ul><li>' + soy.$$escapeHtml("Permission Scheme") + '</li><li>' + soy.$$escapeHtml("Notification Scheme") + '</li><li>' + soy.$$escapeHtml("Issue Security Scheme") + '</li><li>' + soy.$$escapeHtml("Workflow Scheme") + '</li><li>' + soy.$$escapeHtml("Issue Type Scheme") + '</li><li>' + soy.$$escapeHtml("Issue Type Screen Scheme") + '</li><li>' + soy.$$escapeHtml("Field Configuration Scheme") + '</li></ul></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.sharedHelp.soyTemplateName = 'JIRA.Templates.ProjectTemplates.sharedHelp';
}
;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/Config.js' */
define("jira/project-templates/config",{model:{}});AJS.namespace("JPT.ConfigModel",null,require("jira/project-templates/config"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/ProjectKeyGenerator.js' */
define("jira/project-templates/project-key-generator",["jquery","underscore"],function(d,h){var c={};c.IGNORED_WORDS=["THE","A","AN","AS","AND","OF","OR"];c.CHARACTER_MAP={};c.CHARACTER_MAP[199]="C";c.CHARACTER_MAP[231]="c";c.CHARACTER_MAP[252]="u";c.CHARACTER_MAP[251]="u";c.CHARACTER_MAP[250]="u";c.CHARACTER_MAP[249]="u";c.CHARACTER_MAP[233]="e";c.CHARACTER_MAP[234]="e";c.CHARACTER_MAP[235]="e";c.CHARACTER_MAP[232]="e";c.CHARACTER_MAP[226]="a";c.CHARACTER_MAP[228]="a";c.CHARACTER_MAP[224]="a";c.CHARACTER_MAP[229]="a";c.CHARACTER_MAP[225]="a";c.CHARACTER_MAP[239]="i";c.CHARACTER_MAP[238]="i";c.CHARACTER_MAP[236]="i";c.CHARACTER_MAP[237]="i";c.CHARACTER_MAP[196]="A";c.CHARACTER_MAP[197]="A";c.CHARACTER_MAP[201]="E";c.CHARACTER_MAP[230]="ae";c.CHARACTER_MAP[198]="Ae";c.CHARACTER_MAP[244]="o";c.CHARACTER_MAP[246]="o";c.CHARACTER_MAP[242]="o";c.CHARACTER_MAP[243]="o";c.CHARACTER_MAP[220]="U";c.CHARACTER_MAP[255]="Y";c.CHARACTER_MAP[214]="O";c.CHARACTER_MAP[241]="n";c.CHARACTER_MAP[209]="N";c.desiredKeyLength=4;c.maxKeyLength=10;c.getTotalLength=function a(k){return k.join("").length};c.removeIgnoredWords=function f(k){return h.reject(k,function(l){return d.inArray(l,c.IGNORED_WORDS)!==-1})};c.createAcronym=function b(l){var k="";d.each(l,function(m,n){k+=n.charAt(0)});return k};c.getFirstSyllable=function i(m){var l=false;var k;for(k=0;k<m.length;k++){if(c.isVowelOrY(m[k])){l=true}else{if(l){return m.substring(0,k+1)}}}return m};c.isVowelOrY=function g(k){return k&&k.length===1&&k.search("[AEIOUY]")!==-1};c.init=function j(l,k){c.desiredKeyLength=l;c.maxKeyLength=k};c.generate=function e(l){l=d.trim(l);if(!l){return""}var k=[];for(var n=0,p=l.length;n<p;n++){var o=c.CHARACTER_MAP[l.charCodeAt(n)];k.push(o?o:l[n])}l=k.join("");var r=[];d.each(l.split(/\s+/),function(s,t){if(t){t=t.replace(/[^a-zA-Z]/g,"");t=t.toUpperCase();t.length&&r.push(t)}});if(c.desiredKeyLength&&c.getTotalLength(r)>c.desiredKeyLength){r=c.removeIgnoredWords(r)}var m;if(r.length==0){m=""}else{if(r.length==1){var q=r[0];if(c.desiredKeyLength&&q.length>c.desiredKeyLength){m=c.getFirstSyllable(q)}else{m=q}}else{m=c.createAcronym(r)}}if(c.maxKeyLength&&m.length>c.maxKeyLength){m=m.substr(0,c.maxKeyLength)}return m};return c});AJS.namespace("JPT.ProjectKeyGenerator",null,require("jira/project-templates/project-key-generator"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/DialogView.js' */
define("jira/project-templates/dialog-view-impl",["require","backbone","underscore"],function(e,f,d){var b=AJS.Dialog;var a=AJS.trigger;return f.View.extend({events:{"click   .add-project-trigger":"_onClickAddProject","click   .add-demo-project-trigger":"_onClickAddDemoProject","click   .add-workflow-link":"_onClickViewMarketplaceWorkflows","click   #add-project-dialog .add-demo-project-trigger":"_onCreateProjectAddDemoProjectClick","click   #add-project-dialog .import-project-trigger":"_onClickImportProject","click   #add-project-dialog .create-with-shared-config":"_onClickCreateShared","keydown #add-project-dialog .pt-templates-list":"_onKeydownInTemplatesList"},draw:function(){var g=new b({width:840,height:400,id:"add-project-dialog",closeOnOutsideClick:false,keypressListener:d.bind(this._onKeyPressed,this)});var h=g.popup.element;g.addPage("project-templates-page");g.addHeader("Create project","add-project-dialog-header");g.addPanel("ProjectTemplatesListPanel",JIRA.Templates.ProjectTemplates.loadingTemplatesList(),"pt-content");this._dialog=g;this._$dialogElement=h;g.show();return g},remove:function(){this._dialog&&this._dialog.remove()},showErrorMessage:function(g){this._dialog.getPanel(1,0).html(JIRA.Templates.errorMsg({closable:false,msg:g}))},get$PTContent:function c(){return this.getDialogController().$dialogElement.find(".pt-content")},_onKeyPressed:function(h){var g=27;if(this._dialog){if(h.keyCode===g){this.getDialogController().hideDialogFromNewUser("dismissed");this._dialog.remove();return false}}return true},_onKeydownInTemplatesList:function(h){var g=13;if(this._dialog){if(h.keyCode===g){this._$dialogElement.find(".pt-submit-button:visible").click();return false}}return true},_onClickAddProject:function(g){g.preventDefault();this.getDialogController().handleProjectTemplateTriggered()},_onCreateProjectAddDemoProjectClick:function(){a("analyticsEvent",{name:"jira.project.templates.dialog.create.demo.create.project.clicked"})},_onClickViewMarketplaceWorkflows:function(){a("analyticsEvent",{name:"jira.project.templates.dialog.create.viewmarketplaceworkflows.clicked"})},_onClickAddDemoProject:function(h){h.preventDefault();var g=this.getDialogController().dialog;if(g&&g.popup&&g.popup.element){g.remove()}this.getDialogController().handleDemoProjectTemplateTriggered()},_onClickImportProject:function(g){this.getDialogController().hideDialogFromNewUser("importproject")},_onClickCreateShared:function(g){this.getDialogController().handleCreateShared()},getDialogController:function(){return e("jira/project-templates/dialog-controller")}})});define("jira/project-templates/dialog-view",["jira/project-templates/dialog-view-impl","jquery"],function(b,a){return new b({el:a(document)})});AJS.namespace("JPT.DialogView",null,require("jira/project-templates/dialog-view"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/DialogController.js' */
define("jira/project-templates/dialog-controller",["jira/project-templates/dialog-view","jira/project-templates/config","jira/ajs/ajax/smart-ajax","jira/util/data/meta","jira/lib/class","jquery","underscore","wrm/data"],function(n,e,a,g,b,k,o,m){var d=AJS.contextPath();var f=AJS.isDevMode;var i=AJS.log;function h(p,q){AJS.trigger("analyticsEvent",{name:p,data:q})}var l;var c=function(){if(!l){l=m.claim("com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources.ptAnalyticsData")||{}}return l};var j=b.extend({WELCOME_REST_URL:d+"/rest/welcome/1.0/show/welcome",initialize:function(){o.bindAll(this,"handleProjectTemplateTriggered","hideDialogFromNewUser");if(g.getBoolean("show-welcome-screen")){this.handleProjectTemplateTriggered()}},handleProjectTemplateTriggered:function(){this.demoProject=false;h("jira.project.templates.dialog.create.show");this.openWithFirstProjectTemplateOfTypePreSelected()},handleDemoProjectTemplateTriggered:function(){this.demoProject=true;var p=this.getTemplateController().loadDemoProjectTemplatesData();this.openWithFirstProjectTemplateOfTypePreSelected(null,p);this._addAnalyticsToCreateDemoShow(p)},_addAnalyticsToCreateDemoShow:function(p){p.done(function(r){var s={};var q=function(t){return t.projectTemplatesGroupedByType.map(function(u){return u.projectTemplates.map(function(v){return v.itemModuleCompleteKey}).join()}).join()};s.demoSets=q(r);s.instanceCreatedDate=c().instanceCreatedDate;h("jira.project.templates.dialog.create.demo.show",s)}.bind(this))},openWithFirstProjectTemplateOfTypePreSelected:function(p,q){q=q||this.getTemplateController().loadProjectTemplatesData();this.dialog=n.draw();q.fail(o.bind(function(r){this._handleUnknownErrorOfPTRetrieval()},this));q.done(o.bind(function(r){this.$dialogElement=this.dialog.popup.element;var s;if(!o.isUndefined(e.model.selectedTemplate)){s=e.model.selectedTemplate}e.model=r;e.model.selectedTemplate=s;this.getTemplateController().init(r,p)},this))},handleCreateShared:function(){h("jira.project.templates.dialog.create.shared.clicked");this.demoProject=false;this.openWithCreateShared()},openWithCreateShared:function(){var p=require("jira/project-templates/create-shared-controller");p.initCreateShared()},callbackWithResize:function(p){return o.bind(o.wrap(p,function(q){q.call(this);this.dialog.updateHeight()}),this)},addPage:function(r){var q=this.dialog.addPage(r.name).page[this.dialog.curpage];this.dialog.addHeader(r.title,"add-project-dialog-header");this.dialog.addPanel(r.panelName,"","pt-content");if(r.backButton){this._addBackButton(q)}this.dialog.addButton(r.submitButtonText,this.callbackWithResize(r.submitButtonCallback),r.submitButtonClass+" pt-submit-button");var p=this.$dialogElement.find("."+r.submitButtonClass);p.removeClass("button-panel-button").addClass("aui-button aui-button-primary");p.focus();this.dialog.addCancel("Cancel",o.bind(function(s){this.hideDialogFromNewUser("dismissed");this.dialog.remove()},this));return q},_backButtonOnClickCallback:function(p){return o.bind(function(){if(this.demoProject){h("jira.project.templates.dialog.demo.back")}else{h("jira.project.templates.dialog.create.back")}var q=n.get$PTContent();q.css("background-image","none");this.dialog.prevPage();p.remove();this.dialog.page.pop()},this)},_addBackButton:function(q){this.dialog.addButton("Back",this.callbackWithResize(this._backButtonOnClickCallback(q)),"add-project-back-button");var p=this.$dialogElement.find(".add-project-back-button");p.removeClass("button-panel-button").addClass("aui-button")},_handleUnknownErrorOfPTRetrieval:function(){n.showErrorMessage("An error occurred while trying to contact JIRA")},hideDialogFromNewUser:function(p){if(p==="dismissed"){if(this.demoProject){h("jira.project.templates.dialog.demo.dismissed")}else{h("jira.project.templates.dialog.create.dismissed")}}else{if(p==="importproject"){h("jira.project.templates.dialog.import.clicked")}else{if(p==="templateselected"){if(this.demoProject){h("jira.project.templates.dialog.demo.templateselected")}else{h("jira.project.templates.dialog.create.templateselected")}}}}if(g.getBoolean("show-welcome-screen")){k.ajax({url:this.WELCOME_REST_URL+"/"+p,type:"DELETE",success:function(){if(f&&f()){i("don't show project template dialog anymore")}}})}},getTemplateController:function(){return require("jira/project-templates/select-project-template-controller")}});return new j()});AJS.namespace("JPT.DialogController",null,require("jira/project-templates/dialog-controller"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/AddProjectView.js' */
define("jira/project-templates/add-project-view-impl",["jira/project-templates/dialog-controller","jira/project-templates/config","jira/util/events","jira/util/events/types","require","backbone","jquery","underscore"],function(q,n,t,y,m,e,g,D){var f=AJS.InlineDialog;return e.View.extend({TIMEOUT_MS:100,postDrawCallbacks:[],events:{"submit #add-project-form":"onSubmitForm"},page:undefined,isSubmitting:false,initialize:function(F){D.bindAll(this,"bindHook")},addPostDrawCallback:function(F){this.postDrawCallbacks.push(F)},prepareDialog:function(F){this.page=q.addPage({name:"add-project",title:F,panelName:"add-project",backButton:true,submitButtonText:"Submit",submitButtonCallback:this.onSubmitForm.bind(this),submitButtonClass:"add-project-dialog-create-button"})},draw:function(U){function V(X){if(!X.errors){X.errors={}}return X}this.isSubmitting=false;q.dialog.gotoPage(this.page.id);var G=U.webItemData.projectTemplateModuleCompleteKey;var F=D.find(n.model.projectTemplatesGroupedByType,function(X){return D.any(X.projectTemplates,function(Y){return Y.itemModuleCompleteKey==G})});var L=(F&&F.applicationInfo&&F.applicationInfo.applicationName)||"";var K=(F&&F.applicationInfo&&F.applicationInfo.licenseUsedSeats)||0;var H=(F&&F.applicationInfo&&F.applicationInfo.licenseTotalSeats)||0;var T=(F&&F.applicationInfo&&F.applicationInfo.canUserBeAddedToApplication)||false;var J=(F&&F.applicationInfo&&F.applicationInfo.canUserUseApplication)||false;var P=(F&&F.applicationInfo&&F.applicationInfo.ondemand)||false;var I;if(!F||!F.applicationInfo){I=false}else{I=!J}var R={maxNameLength:n.model.maxNameLength,maxKeyLength:n.model.maxKeyLength,shouldShowLead:n.model.shouldShowProjectLead,projectTemplateWebItemKey:n.model.selectedTemplate||U.webItemData.itemModuleCompleteKey,projectTemplateModuleKey:G,projectTemplateTitle:U.webItemData.name,projectTemplateDescriptionContent:U.webItemData.longDescriptionContent,currentKey:U.currentKey||"",currentName:U.currentName||"",errors:V(U.errors),projectLeadPickerField:{id:"lead",name:"lead"},addUserToLicense:{displayCheckbox:I,disableCheckbox:!T,applicationName:L,usedSeats:K,totalSeats:H,fieldId:"licenseUser",fieldName:"licenseUser",licensingUrl:P?"/admin/accessconfig":"/plugins/servlet/applications/versions-licenses"},leadOptions:[{selected:true,displayName:U.currentUserDisplayName,optionName:U.currentUserName,avatarURL:U.currentUserAvatarUrl}]};var N=JIRA.Templates.ProjectTemplates.addProjectForm(R);q.dialog.getPanel(this.page.id,0).html(N);if(U.webItemData&&U.webItemData.backgroundIconUrl){var Q=q.$dialogElement.find(".pt-content");Q.css("background-image",'url("'+U.webItemData.backgroundIconUrl+'")')}var O=g("#add-project-form");t.trigger(y.NEW_CONTENT_ADDED,[O]);this.nameElement=q.$dialogElement.find("#name");this.keyElement=q.$dialogElement.find("#key");this.keyEditedElement=q.$dialogElement.find("#keyEdited");this.leadDisplayElement=q.$dialogElement.find("#lead-field");this.leadValueElement=q.$dialogElement.find("#lead");var W=this.keyElement.parent().find(".aui-icon-help");if(W.length){new f(W,"project-key-help-popup",function(Z,Y,X){Z.html(JIRA.Templates.ProjectTemplates.keyHelp());X()},{width:330,offsetX:-30})}this.keyElement.attr("style","text-transform: uppercase");var S=m("jira/project-templates/add-project-controller");this.nameElement.focus(D.bind(function(X){this.bindHook(X,S.nameTimeout)},this));var M=this;this.nameElement.change(function(X){S.validateName();M.unbindHook(X)});this.nameElement.focus();this.keyElement.focus(D.bind(function(Y){var X=g(Y.target);X.data("lastValue",X.val());this.bindHook(Y,S.keyTimeout)},this));this.keyElement.blur(D.bind(function(X){this.unbindHook(X)},this));this.keyElement.change(function(){S.validateKey();S.autofillKeyIfNeeded()});if(!D.isEmpty(this.postDrawCallbacks)){D.each(this.postDrawCallbacks,function(X){X()})}q.dialog.updateHeight()},onSubmitForm:function(G){var F=m("jira/project-templates/add-project-controller");F.submit();return false},get$SubmitButton:function(){return q.$dialogElement.find(".add-project-dialog-create-button")},get$BackButton:function(){return q.$dialogElement.find(".add-project-back-button")},bindHook:function p(I,G){var F=g(I.target),H;H=D.bind(function(){this.unbindHook(I);G.apply();if(F.is(":visible")){F.data("checkHook",setTimeout(H,this.TIMEOUT_MS))}},this);if(!F.data("checkHook")){F.data("checkHook",setTimeout(H,0))}},unbindHook:function(G){var F=g(G.target);clearTimeout(F.data("checkHook"));F.removeData("checkHook")},showInlineError:function(G,H){if(this.isSubmitting){return}var F=G.parent().find(".error");if(!F.length){F=g("<div class='error'></div>");G.parent().append(F)}F.text(H);F.show()},showInlineErrorForName:function E(F){this.showInlineError(this.nameElement,F)},showInlineErrorForKey:function A(F){this.showInlineError(this.keyElement,F)},hideInlineError:function z(F){F.parent().find(".error").hide()},hideInlineErrorForName:function c(){this.hideInlineError(this.nameElement)},hideInlineErrorForKey:function u(){this.hideInlineError(this.keyElement)},setName:function i(F){this.nameElement.val(F)},getName:function s(){return this.nameElement.val()},setKey:function b(F){this.keyElement.val(F)},getKey:function o(){return this.keyElement.val().toUpperCase()},getLeadDisplayName:function v(){return this.leadDisplayElement.val()},getLeadUserName:function w(){return this.leadValueElement.val()},getAvatarUrlOfSelectedLead:function r(){var F=q.$dialogElement.find("#lead-single-select .aui-ss-entity-icon").css("background-image");if(!D.isUndefined(F)){var G=F.match(/^url\((.+)\)$/);return(G&&G[1])?G[1]:""}else{return""}},setKeyEdited:function l(F){this.keyEditedElement.val(F)},getKeyEdited:function B(){return this.keyEditedElement.val()},setKeyEdited:function l(){var F=this.getKey();if(this.keyElement.data("lastValue")!==F){this.keyEditedElement.val((F)?"true":"false")}this.keyElement.data("lastValue",F)},hasNameErrors:function d(){return this.nameElement.parent().find(".error").size()>0},getAddProjectForm:function h(){return g("#add-project-form")},get$FormFields:function k(){return q.$dialogElement.find(":input")},enterLoadingState:function j(){$submitButton=this.get$SubmitButton();if(!$submitButton.attr("disabled")){$backButton=this.get$BackButton();$submitButton.attr("disabled","disabled");$backButton.attr("disabled","disabled");$backButton.before(JIRA.Templates.ProjectTemplates.spinner({id:"addproject-loading"}));this.get$FormFields().attr("disabled","disabled");this.isSubmitting=true;return true}else{return false}},hideLoadingState:function x(){q.$dialogElement.find("#addproject-loading").remove();this.get$SubmitButton().removeAttr("disabled");this.get$BackButton().removeAttr("disabled");this.get$FormFields().removeAttr("disabled")},avoidDirtyFormWarning:function a(){if(g.fn.removeDirtyWarning){this.getAddProjectForm().removeDirtyWarning()}},hasInlineErrors:function C(){return q.$dialogElement.find(".field-group .error:visible").length!=0}})});define("jira/project-templates/add-project-view",["jira/project-templates/add-project-view-impl","jira/project-templates/dialog-view","jquery"],function(b,a,c){return new b({el:c(document),dialogView:a})});AJS.namespace("JPT.AddProjectView",null,require("jira/project-templates/add-project-view"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/AddProjectController.js' */
define("jira/project-templates/add-project-controller-impl",["jira/project-templates/add-project-view","jira/project-templates/project-key-generator","jira/project-templates/dialog-controller","jira/project-templates/config","jira/lib/class","jquery","underscore"],function(m,i,k,e,b,l,o){var d=AJS.contextPath();var c=AJS.trigger;return b.extend({postProjectCreationCallbacks:[],projectKeyValidationCallbacks:[],projectNamesUpperCased:[],init:function(p){this._window=p.window||window;o.bindAll(this,"projectCreatedHandler","projectValidationFailedHandler","nameTimeout","keyTimeout","submit")},initCreateShared:function(p){this.existingProjectData=p;this._initAddProject("Create with shared configuration")},initProjectTemplate:function(p){this.existingProjectData=undefined;this.webItemData=p;this._initAddProject(p.name)},_initAddProject:function(p){this.desiredKeyLength=4;this.lastKeyValidated="";this._getExistingProjects();i.init(this.desiredKeyLength,e.model.maxKeyLength);m.prepareDialog(p);m.draw({webItemData:this.webItemData||{},maxKeyLength:e.model.maxKeyLength,maxNameLength:e.model.maxNameLength,currentUserName:e.model.currentUserName,currentUserDisplayName:e.model.currentUserDisplayName,currentUserAvatarUrl:e.model.currentUserAvatarUrl,errors:{}})},_resetProjectLeadValues:function(){e.model.currentUserDisplayName="";e.model.currentUserName="";e.model.currentUserAvatarUrl=""},_hasFullyConfiguredProjectLead:function(){return m.getLeadDisplayName()&&m.getAvatarUrlOfSelectedLead()!=""},submit:function(p){var q;if(this.existingProjectData){q={key:m.getKey(),name:m.getName(),lead:m.getLeadUserName()&&m.getLeadUserName()[0]}}else{q=jQuery.param(m.getAddProjectForm().serializeArray().map(function(r){if(r.name==="key"){r.value=r.value.toUpperCase()}return r}))}if(m.hasInlineErrors()){return}if(m.enterLoadingState()){if(this._hasFullyConfiguredProjectLead()){e.model.currentUserDisplayName=m.getLeadDisplayName();e.model.currentUserName=e.model.currentUserDisplayName?m.getLeadUserName():"";e.model.currentUserAvatarUrl=m.getAvatarUrlOfSelectedLead()}else{this._resetProjectLeadValues()}if(this.existingProjectData){l.ajax({url:d+"/rest/project-templates/1.0/createshared/"+this.existingProjectData.existingProjectId,type:"POST",contentType:"application/json",data:JSON.stringify(q)}).then(this.projectCreatedHandler,this.projectValidationFailedHandler)}else{l.ajax({url:d+(this.webItemData.demoProject?"/rest/jira-importers-plugin/1.0/demo/create":"/rest/project-templates/1.0/templates"),type:"POST",data:q,headers:{"X-Atlassian-Token":"no-check"}}).then(this.projectCreatedHandler,this.projectValidationFailedHandler)}}},registerPostProjectCreationCallback:function(p){this.postProjectCreationCallbacks.push(p)},registerProjectKeyValidationCallback:function(p){this.projectKeyValidationCallbacks.push(p)},localStoragePrefix:"jira.projecttemplates.",projectCreatedHandler:function(q){if(this.existingProjectData){c("analyticsEvent",{name:"jira.project.templates.dialog.create.shared.project.create.success"})}else{if(this.webItemData.demoProject){c("analyticsEvent",{name:"jira.project.templates.dialog.create.demo.success"})}else{c("analyticsEvent",{name:"jira.project.templates.dialog.create.project.success"})}}m.avoidDirtyFormWarning();var p=this.localStoragePrefix;var r=["confluenceProject","fisheyeProject","crucibleProject","bambooProject"];o.map(r,function(s){if(q.remoteProjectLinks&&q.remoteProjectLinks[s]){localStorage.setItem(p+s,q.remoteProjectLinks[s])}});if(!o.isEmpty(this.postProjectCreationCallbacks)){k.dialog.addPage("post-project-created-page");o.each(this.postProjectCreationCallbacks,function(s){s(k.dialog,q.returnUrl,q.projectId,q.projectKey,q.projectName)})}else{this._window.location=d+q.returnUrl}},projectValidationFailedHandler:function(q,s){if(this.existingProjectData){c("analyticsEvent",{name:"jira.project.templates.dialog.create.shared.project.create.failure"})}else{if(this.webItemData.demoProject){c("analyticsEvent",{name:"jira.project.templates.dialog.create.demo.failure"})}else{c("analyticsEvent",{name:"jira.project.templates.dialog.create.project.failure"})}}var r={};if(this.isBadRequest(q)){r=JSON.parse(q.responseText)}else{if(this.isUnDefinedServerSideError(q)){r={errorMessages:["Hmm... we couldn\'t create your project due to an unknown error. Try refreshing the page to start again."]}}else{if(this.isDefinedServerSideError(q)){var p=JSON.parse(q.responseText);JIRA.Messages.showReloadErrorMsg(p.message);m.avoidDirtyFormWarning();this._window.location=d+p.returnUrl;return}else{if(this.isTimeoutError(s)){r={errorMessages:["Request timeout when creating project"]}}else{r={errorMessages:[AJS.format("Error creating project, {0}",q.responseText)]}}}}}m.draw({webItemData:this.webItemData||{},errors:r,currentName:m.getName(),currentKey:m.getKey(),currentUserDisplayName:e.model.currentUserDisplayName,currentUserName:e.model.currentUserName,currentUserAvatarUrl:e.model.currentUserAvatarUrl});m.hideLoadingState()},isBadRequest:function(p){return(p.status===400)},isUnDefinedServerSideError:function(p){if(p.status===500){try{JSON.parse(p.responseText)}catch(q){return true}}return false},isDefinedServerSideError:function(p){return p.status===500&&!o.isUndefined(JSON.parse(p.responseText).message)},isTimeoutError:function(p){return p==="timeout"},_updateAndValidateKey:function a(p){m.setKey(p);this.validateKey()},_shouldUpdateKey:function h(){return(m.getKeyEdited()!="true")},autofillKeyIfNeeded:function n(){if(this._shouldUpdateKey()){var p=i.generate(m.getName());if(p.length>1){this._updateAndValidateKey(p)}else{m.setKey("")}}},_doesProjectNameExists:function(q){var p;for(p in this.projectNamesUpperCased){if(q.toUpperCase()==this.projectNamesUpperCased[p]){return true}}return false},validateName:function(){var p=l.trim(m.getName());if(!p){return}if(p.length<e.model.minNameLength){m.showInlineErrorForName(AJS.format("The project name should be at least {0} characters in length.",e.model.minNameLength));return}if(p.length>e.model.maxNameLength){m.showInlineErrorForName(AJS.format("The project name must not exceed {0} characters in length.",e.model.maxNameLength));return}if(this._doesProjectNameExists(p)){m.showInlineErrorForName("A project with that name already exists.");return}m.hideInlineErrorForName()},_performKeyValidationChecks:function(p){var q=l.ajax({url:d+"/rest/api/latest/projectvalidate/key?key="+p.toUpperCase()});q.done(o.bind(function(s){if(s.errors&&s.errors.projectKey){m.showInlineErrorForKey(s.errors.projectKey)}else{var r=false;o.each(this.projectKeyValidationCallbacks,function(u){var t=u(p.toUpperCase());if(t.errors&&t.errors.projectKey){r=true;m.showInlineErrorForKey(t.errors.projectKey)}});if(!r){m.hideInlineErrorForKey()}}},this))},validateKey:function g(){var p=m.getKey();if(this.lastKeyValidated===p){return}if(p){this.lastKeyValidated=p;this._performKeyValidationChecks(p)}else{m.hideInlineErrorForKey()}},nameTimeout:function j(){this.autofillKeyIfNeeded()},keyTimeout:function f(){m.setKeyEdited()},_getExistingProjects:function(){if(this.projectNamesUpperCased.length>0){return this.projectNamesUpperCased}var p=l.ajax({url:d+"/rest/api/latest/project"});p.done(o.bind(function(q){this.projectNamesUpperCased=o.map(q,function(r){return r.name.toUpperCase()})},this))}})});define("jira/project-templates/add-project-controller",["jira/project-templates/add-project-controller-impl","jquery"],function(a,b){return new a({el:b(document)})});AJS.namespace("JPT.AddProjectController",null,require("jira/project-templates/add-project-controller"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/TemplateInfoView.js' */
define("jira/project-templates/template-info-view",["jira/project-templates/dialog-controller","require","backbone","jquery","underscore"],function(e,c,f,d,b){var a=AJS.trigger;return f.View.extend({initialize:function(g){b.bindAll(this,"draw","onNext")},draw:function(i,h){var j=e.addPage({name:"template-info",title:h,panelName:"template-info",backButton:true,submitButtonText:"Select",submitButtonCallback:this.onNext,submitButtonClass:"template-info-dialog-create-button"});var g=this._nameToObj(i)();e.dialog.getPanel(j.id,0).html(g);e.dialog.gotoPage(j.id)},_nameToObj:function(g){return b.reduce(g.split("."),function(i,h){if(i){return i[h]}},window)},onNext:function(h){a("analyticsEvent",{name:"jira.project.templates.dialog.create.templateinfo.next"});var g=c("jira/project-templates/template-info-controller");g.next();return false}})});AJS.namespace("JPT.TemplateInfoView",null,require("jira/project-templates/template-info-view"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/TemplateInfoController.js' */
define("jira/project-templates/template-info-controller",["jira/project-templates/template-info-view","jira/lib/class","require","underscore"],function(e,a,c,b){var d=a.extend({init:function(f){b.bindAll(this,"initTemplateInfo","next")},initTemplateInfo:function(g){this.projectTemplateData=g;var f=new e();f.draw(g.infoSoyPath,g.name)},next:function(){var f=c("jira/project-templates/select-project-template-controller");f.openAddProjectPage(this.projectTemplateData)}});return new d()});AJS.namespace("JPT.TemplateInfoControllerImpl",null,require("jira/project-templates/template-info-controller"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/SelectProjectTemplateView.js' */
define("jira/project-templates/select-project-template-view",["jira/project-templates/dialog-controller","jira/project-templates/config","jira/featureflags/feature-manager","require","backbone","jquery","underscore"],function(d,b,i,c,g,e,h){var a=AJS.contextPath();var f=AJS.preventDefault;return{ROW_LENGTH:2,DIALOG_BODY_CLASS:"select-project-templates-page",DIALOG_WIDTH:800,draw:function(n,m){var j=c("jira/project-templates/select-project-template-controller");this.page=d.addPage({name:this.DIALOG_BODY_CLASS,title:n.demoProjects?"Create project with sample data":"Create project",panelName:"ProjectTemplatesListPanel",backButton:false,submitButtonText:"Next",submitButtonCallback:j.dialogSubmitted,submitButtonClass:"create-project-dialog-create-button"});function p(){if(j.isProjectTypesEnabled(n)){return JIRA.Templates.ProjectTemplates.renderProjectTemplatesGroupedByType({projectTemplatesByType:n.projectTemplatesGroupedByType})}return JIRA.Templates.ProjectTemplates.renderProjectTemplates({projectTemplates:n.projectTemplates})}d.dialog.getPanel(this.page.id,0).html(p());if(b.model.projectCount>=2&&!n.demoProjects){e(JIRA.Templates.ProjectTemplates.addWorkflowsLink({baseUrl:a})).appendTo(d.$dialogElement.find(".dialog-title"))}var o=d.$dialogElement.find(".create-project-dialog-create-button");var l=this;this.getTemplateItems().click(function(){var q=e(this);q.addClass("selected");l.getTemplateItems().not(this).removeClass("selected")}).dblclick(function(){o.click()}).focus(function(){e(this).click()});var k=this.get$TemplatesContainer();if(!n.demoProjects){e(JIRA.Templates.ProjectTemplates.footerLinks({showDemoLink:i.isFeatureEnabled("jira.onboarding.cyoa")})).prependTo(d.$dialogElement.find(".dialog-button-panel"))}this.bindKeyboardEvents(k);if(j.isProjectTypesEnabled(n)){if((n.projectTemplatesGroupedByType).length==0){o.attr("disabled","disabled")}}else{if((n.projectTemplates).length==0){o.attr("disabled","disabled")}}this.focusOnFirstTemplate(k,m);d.dialog.updateHeight();this.truncateTemplateDescriptions();this.resizeTemplateWidths()},get$TemplatesContainer:function(){return d.$dialogElement.find(".templates")},focusOnFirstTemplate:function(j,k){if(k){this.getFirstTemplateItemOfProjectType(k).click()}else{this.getFirstTemplateItem().click()}setTimeout(function(){j.focus()},0)},getSelectedTemplateData:function(){var j=d.$dialogElement.find(".template.selected");return j.data()},getMoveDeltaForKey:function(j){switch(j){case 37:return -1;case 39:return +1;case 38:return -this.ROW_LENGTH;case 40:return +this.ROW_LENGTH}return 0},bindKeyboardEvents:function(j){j.bind("keydown",h.bind(function(k){var l=this.getMoveDeltaForKey(k.which);if(l){this.moveSelection(j,l);return f(k)}},this))},moveSelection:function(l,o){var k=l.find(".template");var n=k.filter(".selected");var m=k.index(n)+o;if(m<k.length&&m>=0){var j=k.eq(m);j.click().focus();this.scrollToSelectedElement(j)}},scrollToSelectedElement:function(l){var o=e(".dialog-panel-body.pt-content");var j=o.offset().top;var k=l.offset().top;var n=k+l.height();var m=j+o.height();if(k<j){o.scrollTop(o.scrollTop()-(j-k))}else{if(n>(j+o.height())){o.scrollTop(o.scrollTop()+n-m)}}},get$NextButton:function(){return d.$dialogElement.find(".create-project-dialog-create-button")},disableNextButton:function(){this.get$NextButton().attr("disabled","disabled")},truncateTemplateDescriptions:function(){var j=AJS.Meta.get("user-locale");var k="word";if(j==="ja_JP"){k="letter"}d.$dialogElement.find(".template-description").each(function(){e(this).dotdotdot({wrap:k,lastCharacter:{remove:[" ",",",";",".","!","?",""],noEllipsis:[]}})})},getTemplatesDialogContainer:function(){return d.$dialogElement.find("."+this.DIALOG_BODY_CLASS).find(".dialog-panel-body.pt-content").get(0)},getFirstTemplateItem:function(){return this.getTemplateItems().first()},getFirstTemplateItemOfProjectType:function(j){return this.getTemplateItems().filter("#project-template-group-"+j+" *").first()},getTemplateItems:function(){return d.$dialogElement.find(".template")},widthOfScrollbarForElement:function(k){var j=k.offsetWidth;var l=k.clientWidth;return j-l},widthOfDialogAvailableForTemplateList:function(){var j=this.widthOfScrollbarForElement(this.getTemplatesDialogContainer());return this.DIALOG_WIDTH-j},widthOfTemplateItem:function(){var j=this.widthOfDialogAvailableForTemplateList()/this.ROW_LENGTH;return j-this.borderWidthOfTemplateItem()},borderWidthOfTemplateItem:function(){var j=this.getFirstTemplateItem().css("border-top-width");return parseInt(j,10)},resizeTemplateWidths:function(){this.getTemplateItems().each(h.bind(function(j,k){e(k).css("width",this.widthOfTemplateItem())},this))}}});AJS.namespace("JPT.SelectProjectTemplateView",null,require("jira/project-templates/select-project-template-view"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/SelectProjectTemplateController.js' */
define("jira/project-templates/select-project-template-controller",["jira/project-templates/select-project-template-view","jira/project-templates/template-info-controller","jira/project-templates/add-project-controller","jira/project-templates/dialog-controller","jira/project-templates/dialog-view","jira/project-templates/config","wrm/context-path","jquery","underscore"],function(f,h,k,l,o,g,n,m,p){var e=n();var d={init:function q(s,r){f.draw(s,r)},isProjectTypesEnabled:function c(r){return r.projectTemplatesGroupedByType!=null},loadProjectTemplatesData:function j(){return m.ajax({url:e+"/rest/project-templates/1.0/templates",type:"GET"})},loadDemoProjectTemplatesData:function j(){return m.ajax({url:e+"/rest/project-templates/1.0/templates/demo-projects",type:"GET"}).then(function(r){r.demoProjects=true;return r})},dialogSubmitted:function b(){var r=f.getSelectedTemplateData();l.hideDialogFromNewUser("templateselected");d.raiseAtlassianEvent(r.itemModuleCompleteKey);if(!p.isUndefined(r.infoSoyPath)){h.initTemplateInfo(r)}else{d.openAddProjectPage(r)}},openAddProjectPage:function i(r){if(!r){o.showErrorMessage("An error occurred while trying to contact JIRA");return}if(r.createProject){k.initProjectTemplate(r)}else{l.dialog.addPage("blank-template-page");m("body").trigger(r.itemModuleCompleteKey,l.dialog)}},raiseAtlassianEvent:function a(r){g.model.selectedTemplate=r;if(AJS.EventQueue){AJS.EventQueue.push({name:"projecttemplates.templateselected",properties:{selectedTemplate:r}})}}};return d});AJS.namespace("JPT.SelectProjectTemplateController",null,require("jira/project-templates/select-project-template-controller"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/CreateSharedView.js' */
define("jira/project-templates/create-shared-view",["jira/project-templates/dialog-controller","jira/project-templates/dialog-view","jira/ajs/select/scrollable-single-select","jira/ajs/select/suggestion-collection-model","require","backbone","jquery"],function(d,h,g,i,c,j,e){var f=AJS.InlineDialog;var b=AJS.trigger;var a=j.View.extend({events:{"submit #create-shared-project-form":"onSubmitForm"},page:undefined,prepareDialog:function(l){var k=c("jira/project-templates/create-shared-controller");this.page=d.addPage({name:"create-shared-project",title:l,panelName:"create-shared-project",backButton:true,submitButtonText:"Next",submitButtonCallback:k.dialogSubmitted,submitButtonClass:"create-shared-dialog-button"})},draw:function(l){d.dialog.gotoPage(this.page.id);var k=JIRA.Templates.ProjectTemplates.createSharedProjectForm({projectSuggestions:JSON.stringify(l.projectSuggestions)});d.dialog.getPanel(this.page.id,0).html(k);this._createProjectPicker();var m=d.$dialogElement.find("#shared-help-icon");if(m.length){new f(m,"shared-project-help-popup",function(p,o,n){p.html(JIRA.Templates.ProjectTemplates.sharedHelp());n()},{width:330,offsetX:-30})}d.$dialogElement.find(".dialog-button-panel button").removeAttr("disabled")},showProjectMissingError:function(){this._clearFormErrors();this._getProjectPickerInput().after(aui.form.fieldError({extraClasses:"project-picker-missing-error",message:"Please select an existing project first."}))},drawEmptyInfo:function(){var k=JIRA.Templates.ProjectTemplates.noProjects();d.dialog.getPanel(this.page.id,0).html(k);d.$dialogElement.find(".dialog-button-panel button").hide()},drawError:function(k){d.dialog.getPanel(this.page.id,0).html(JIRA.Templates.errorMsg({closable:false,msg:k}))},drawLoading:function(){d.dialog.gotoPage(this.page.id);var k=JIRA.Templates.ProjectTemplates.loading();d.dialog.getPanel(this.page.id,0).html(k);d.$dialogElement.find(".dialog-spinner").spin();d.$dialogElement.find(".dialog-button-panel button").attr("disabled","disabled")},_clearFormErrors:function(){d.$dialogElement.find(".project-picker-missing-error").remove()},_getProjectPickerInput:function(){return d.$dialogElement.find("#project-picker")},onSubmitForm:function(l){this._clearFormErrors();var k=c("jira/project-templates/create-shared-controller");k.dialogSubmitted();return false},_getExtraInfoMessage:function(){return d.$dialogElement.find(".create-shared-info")},_createProjectPicker:function(){this._getExtraInfoMessage().hide();this.projectSelect=new g({element:this._getProjectPickerInput(),revertOnInvalid:true,pageSize:50,pagingThreshold:100,model:i});this.projectSelect.$field.focus();var k=this;this._getProjectPickerInput().on("selected",function(m,l){if(l.value()){b("analyticsEvent",{name:"jira.project.templates.dialog.create.shared.project.selected"});k._getExtraInfoMessage().show()}})},getSelectedProject:function(){return this.projectSelect.getSelectedDescriptor()&&this.projectSelect.getSelectedDescriptor().value()}});return new a({el:e(document),dialogView:h})});AJS.namespace("JPT.CreateSharedView",null,require("jira/project-templates/create-shared-view"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/CreateSharedController.js' */
define("jira/project-templates/create-shared-controller-impl",["jira/project-templates/add-project-controller","jira/project-templates/create-shared-view","jira/lib/class","jquery","underscore"],function(e,f,a,d,c){var b=AJS.contextPath();return a.extend({init:function(g){this._window=g.window||window;c.bindAll(this,"dialogSubmitted")},initCreateShared:function(){f.prepareDialog("Create with shared configuration");var g=this;this._getProjectSuggestions().done(function(h){if(g._hasSuggestions(h)){f.draw({projectSuggestions:h})}else{f.drawEmptyInfo()}}).fail(function(){f.drawError("An error occurred while trying to contact JIRA")});f.drawLoading()},_hasSuggestions:function(h){var g=false;d.each(h,function(j,k){if(k&&k.items&&k.items.length>0){g=true}});return g},_getProjectSuggestions:function(){return d.ajax({url:b+"/rest/project-templates/1.0/createshared"})},dialogSubmitted:function(){var g=f.getSelectedProject();if(g){e.initCreateShared({existingProjectId:g})}else{f.showProjectMissingError()}}})});define("jira/project-templates/create-shared-controller",["jira/project-templates/create-shared-controller-impl","jquery"],function(a,b){return new a({el:b(document)})});AJS.namespace("JPT.CreateSharedController",null,require("jira/project-templates/create-shared-controller"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/RemoteProjectsCreatedMessage.js' */
var $=require("jquery");$(function(){var i=AJS.format;var e=require("jira/project-templates/add-project-controller");var b=localStorage.getItem(e.localStoragePrefix+"confluenceProject");var j=localStorage.getItem(e.localStoragePrefix+"fisheyeProject");var g=localStorage.getItem(e.localStoragePrefix+"crucibleProject");var d=localStorage.getItem(e.localStoragePrefix+"bambooProject");localStorage.removeItem(e.localStoragePrefix+"confluenceProject");localStorage.removeItem(e.localStoragePrefix+"fisheyeProject");localStorage.removeItem(e.localStoragePrefix+"crucibleProject");localStorage.removeItem(e.localStoragePrefix+"bambooProject");var k;function c(m,l){return JIRA.Templates.ProjectTemplates.formatAnchor({href:m,body:l,title:l})}function a(n,o,m,p){var l=[];l.push("a JIRA project");if(n){l.push(c(n,"a Confluence space"))}if(o){l.push(c(o,"a FishEye repository"))}if(m){l.push(c(m,"a Crucible project"))}if(p){l.push(c(p,"a Bamboo project"))}return l}function h(m,o,l,r){var q="The following entities were created: {0} and {1}.";var n=a(m,o,l,r);var p=n.pop();return(n.length>0)?i(q,n.join(", "),p):null}function f(l){var m=$(l).offset();if(m){window.scrollTo(m.left,m.top)}}if(b||j||g||d){k=h(b,j,g,d);if(k){JIRA.Messages.showSuccessMsg(k,{closeable:true})}f("#project-config-webpanel-summary-settings")}});;
;
/* module-key = 'com.atlassian.jira-core-project-templates:jira-core-project-templates-resources', location = '/soy/CoreProjectTemplates.soy' */
// This file was automatically generated from CoreProjectTemplates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.ProjectTemplates.CoreTemplates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.ProjectTemplates == 'undefined') { JIRA.Templates.ProjectTemplates = {}; }
if (typeof JIRA.Templates.ProjectTemplates.CoreTemplates == 'undefined') { JIRA.Templates.ProjectTemplates.CoreTemplates = {}; }


JIRA.Templates.ProjectTemplates.CoreTemplates.taskManagementInfoDialog = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog({description: "Create simple tasks, organize them and get them done. You can use this project to manage your tasks or assign them to someone else.", projectTemplate: 'taskManagement'});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.taskManagementInfoDialog.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.taskManagementInfoDialog';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.projectManagementInfoDialog = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog({description: "Create your tasks, organize and track their progress, and deliver your work on time. Estimations and time tracking allow you to report on where your project is at any stage.", projectTemplate: 'projectManagement'});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.projectManagementInfoDialog.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.projectManagementInfoDialog';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.processManagementInfoDialog = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog({description: "Create your tasks and track them at every step, from start to finish. You can use this project to review documentation, approve expenses, or other processes.", projectTemplate: 'processManagement'});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.processManagementInfoDialog.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.processManagementInfoDialog';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.boardBetaInfoDialog = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog({description: "Visualize work across your team with a board.", projectTemplate: 'projectManagement', issueTypesHtml: '' + JIRA.Templates.ProjectTemplates.CoreTemplates.taskIssueType(null)});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.boardBetaInfoDialog.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.boardBetaInfoDialog';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog = function(opt_data, opt_ignored) {
  return '<div><div class="top-panel"><p>' + soy.$$escapeHtml(opt_data.description) + '</p></div><div class="left-panel"><h6>' + soy.$$escapeHtml("Issue Types") + '</h6><ul class="project-template-issuetype-list">' + ((opt_data.issueTypesHtml != null) ? soy.$$filterNoAutoescape(opt_data.issueTypesHtml) : JIRA.Templates.ProjectTemplates.CoreTemplates.taskIssueType(null) + JIRA.Templates.ProjectTemplates.CoreTemplates.subtaskIssueType(null)) + '</ul></div><div class="right-panel"><h6>' + soy.$$escapeHtml("Workflow") + '</h6><div class="workflow ' + soy.$$escapeHtml(opt_data.projectTemplate) + '"></div></div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.issueType = function(opt_data, opt_ignored) {
  return '<li><span class="issuetype-list-label"><span class="issuetype-icon ' + soy.$$escapeHtml(opt_data.iconKey) + '"></span><span class="issuetype-name">' + soy.$$escapeHtml(opt_data.label) + '</span></span></li>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.issueType.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.issueType';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.taskIssueType = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.issueType({iconKey: 'task', label: "Task"});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.taskIssueType.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.taskIssueType';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.subtaskIssueType = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.issueType({iconKey: 'subtask', label: "Sub-task"});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.subtaskIssueType.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.subtaskIssueType';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-analytics-tracker', location = 'includes/js/rapid/AnalyticsTracker.js' */
define("jira-agile/rapid/analytics-tracker",["require"],function(e){function a(e,a,t){if(i.isUndefined(e))throw new Error("You must specify a category");this.params={},this.params.category=e;var r=0;i.isUndefined(a)||(this.params.action=a,r++,i.isUndefined(t)||(this.params.label=t,r++)),this.requiredArgumentNames=["action","label","value"].slice(r),this.useAsync=!0}var i=e("underscore");return a.prototype.setAsync=function(e){return this.useAsync=e,this},a.prototype.trigger=function(){this.requiredArgumentNames.length<arguments.length&&AJS.log("Warning: too many arguments passed in. Needed at most "+this.requiredArgumentNames.length+" but got "+arguments.length);for(var e=i.clone(this.params),a=0;a<arguments.length&&!i.isUndefined(this.requiredArgumentNames[a]);a++)e[this.requiredArgumentNames[a]]=arguments[a];this._validateParams(e);var t="gh.analytics.async";AJS.$(AJS).trigger(t,e)},a.prototype._validateParams=function(e){var a=["category","action","label"];i.each(a,function(a){i.isUndefined(e[a])||i.isString(e[a])?i.isUndefined(e[a])&&(e[a]=""):e[a]=e[a].toString()}),i.each(["category","action"],function(a){e[a]=e[a].replace(/\s+/g,"")}),i.isUndefined(e.value)||(e.value=parseInt(e.value,10),isNaN(e.value)&&(e.value=void 0))},a}),AJS.namespace("GH.AnalyticsTracker",null,require("jira-agile/rapid/analytics-tracker"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-help-analytics', location = 'includes/js/rapid/ui/help/HelpAnalytics.js' */
AJS.$(function(){var e=require("jira-agile/rapid/analytics-tracker"),r=function(r){return new e(r).setAsync(!1)};AJS.$("#gh_view_help").click(function(e){return r("gh.gethelp").trigger("usermenu","docs"),n(AJS.$(this))}),AJS.$("#greenhopper-my-jira-home-enablement").click(function(e){return r("gh.myjirahome").trigger("usermenu","enabled"),n(AJS.$(this))}),AJS.$("#greenhopper-my-jira-home-enablement-ondemand").click(function(e){return r("gh.myjirahome").trigger("usermenu","set"),n(AJS.$(this))}),AJS.$("#greenhopper-my-jira-home-disablement-ondemand").click(function(e){return r("gh.myjirahome").trigger("usermenu","disable"),n(AJS.$(this))}),AJS.$("#greenhopper-my-jira-home-set").click(function(e){return r("gh.myjirahome").trigger("usermenu","set"),n(AJS.$(this))}),AJS.$("#beta_gh\\.configuration\\.rapid\\.removal").click(function(e){var n=AJS.$(this),t=n.attr("checked")?"on":"off";return r("gh.labs.feature").trigger("rapid_removal",t),!0}),AJS.$(document).delegate("#js-classic-link_lnk","click",function(e){return r("gh.agile.menu").trigger("classic"),!0});var n=function(e){return"_blank"==e.attr("target")||(setTimeout('document.location = "'+e.attr("href")+'"',100),!1)}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-help-analytics', location = 'includes/js/rapid/Analytics.js' */
define("jira-agile/rapid/analytics",["jquery","underscore"],function(n,a){"use strict";function e(){n(document).on(l,function(n,a){i(a)})}function i(n){var e={},i=n.category;a.isUndefined(n.action)||(i=i+"."+n.action),a.isUndefined(n.label)||(e.label=n.label),a.isUndefined(n.value)||(e.value=n.value),AJS.trigger("analytics",{name:i,data:e})}GH.AnalyticsEnabled=!0;var l="gh.analytics.async";e();var t={};return t.isEnabled=function(){return GH.AnalyticsEnabled},t.setEnabled=function(n){return GH.AnalyticsEnabled=n},t}),AJS.namespace("GH.Analytics",null,require("jira-agile/rapid/analytics"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-globalissueoperations', location = 'includes/js/gh-globalissueoperations.js' */
define("jira-agile/gh-globalissueoperations",["jira/dialog/form-dialog","jira/dialog/dialog-register","jquery"],function(r,i,e){var a=require("jira-agile/rapid/analytics-tracker"),o=new a("gh.issueaction.gotorapidboard").setAsync(!1),n=r.extend({_performRedirect:function(r){o.trigger("direct"),window.location.href=r}}),t=new n({id:"gh-rapidboard-dialog",trigger:"a.issueaction-greenhopper-rapidboard-operation",ajaxOptions:function(){return i.getDefaultAjaxOptions.apply(this,arguments)}}),s=function(r,i){var a="",o=e(r);return o.hasClass("js-rapidboard-operation-sprint")?a="sprint.":o.hasClass("js-rapidboard-operation-issue")&&(a="issue."),a+=i};return{init:function(){e(document).on("simpleClick",".issueaction-greenhopper-rapidboard-operation",function(r){r.preventDefault();var i=s(r.currentTarget,"open");o.trigger(i),t.show()}),e(document).on("simpleClick",".js-select-rapidboard",function(r){var i=s(r.currentTarget,"chosen");o.trigger(i)})}}}),require("jira-agile/gh-globalissueoperations").init();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-notification', location = 'includes/js/rapid/ui/notification/Notification.soy' */
// This file was automatically generated from Notification.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.rapid.notification.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.rapid == 'undefined') { GH.tpl.rapid = {}; }
if (typeof GH.tpl.rapid.notification == 'undefined') { GH.tpl.rapid.notification = {}; }


GH.tpl.rapid.notification.renderErrorMessages = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.errors.length > 1) {
    output += '<ul>';
    var errorList6 = opt_data.errors;
    var errorListLen6 = errorList6.length;
    for (var errorIndex6 = 0; errorIndex6 < errorListLen6; errorIndex6++) {
      var errorData6 = errorList6[errorIndex6];
      output += '<li>' + ((errorData6.noAutoescape) ? soy.$$filterNoAutoescape(errorData6.message) : soy.$$escapeHtml(errorData6.message)) + '</li>';
    }
    output += '</ul>';
  } else {
    var errorList18 = opt_data.errors;
    var errorListLen18 = errorList18.length;
    for (var errorIndex18 = 0; errorIndex18 < errorListLen18; errorIndex18++) {
      var errorData18 = errorList18[errorIndex18];
      output += '<p>' + ((errorData18.noAutoescape) ? soy.$$filterNoAutoescape(errorData18.message) : soy.$$escapeHtml(errorData18.message)) + '</p>';
    }
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderErrorMessages.soyTemplateName = 'GH.tpl.rapid.notification.renderErrorMessages';
}


GH.tpl.rapid.notification.renderContextualErrors = function(opt_data, opt_ignored) {
  var output = '';
  var errorList29 = opt_data.errors;
  var errorListLen29 = errorList29.length;
  for (var errorIndex29 = 0; errorIndex29 < errorListLen29; errorIndex29++) {
    var errorData29 = errorList29[errorIndex29];
    output += '<div class="ghx-error">' + soy.$$escapeHtml(errorData29.message) + '</div>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderContextualErrors.soyTemplateName = 'GH.tpl.rapid.notification.renderContextualErrors';
}


GH.tpl.rapid.notification.renderMessageHolder = function(opt_data, opt_ignored) {
  return '<div class="ghx-body-warning">' + soy.$$escapeHtml(AJS.format("This version of {0} is not a supported browser.",opt_data.browser)) + ' <a href="' + soy.$$escapeHtml(opt_data.docsUrl) + '">' + soy.$$escapeHtml("See our documentation for the list of supported browsers.") + '</a></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderMessageHolder.soyTemplateName = 'GH.tpl.rapid.notification.renderMessageHolder';
}


GH.tpl.rapid.notification.renderAuiMessage = function(opt_data, opt_ignored) {
  return '<div class="aui-message ' + soy.$$escapeHtml(opt_data.type) + ((opt_data.className) ? ' ' + soy.$$escapeHtml(opt_data.className) : '') + '">' + ((opt_data.title) ? '<p class="title">' + ((opt_data.icon) ? '<span class="aui-icon icon-' + soy.$$escapeHtml(opt_data.type) + '"></span>' : '') + '<strong>' + soy.$$escapeHtml(opt_data.title) + '</strong></p>' : '') + ((opt_data.message) ? '<p>' + ((! opt_data.title && opt_data.icon) ? '<span class="aui-icon icon-' + soy.$$escapeHtml(opt_data.type) + '"></span>' : '') + ((opt_data.messageHtml) ? soy.$$filterNoAutoescape(opt_data.message) : soy.$$escapeHtml(opt_data.message)) + '</p>' : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderAuiMessage.soyTemplateName = 'GH.tpl.rapid.notification.renderAuiMessage';
}


GH.tpl.rapid.notification.renderGHtvMessage = function(opt_data, opt_ignored) {
  return '<div id="ghx-update-message" class="ghx-tv-message"><p>' + soy.$$escapeHtml("This board has been updated") + ': <a href="" class="js-refresh-now">' + soy.$$escapeHtml("Refresh") + '</a><span class="ghx-divider">&bull;</span><a href="" class="js-ignore-refresh">' + soy.$$escapeHtml("Ignore") + '</a></p></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderGHtvMessage.soyTemplateName = 'GH.tpl.rapid.notification.renderGHtvMessage';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-notification', location = 'includes/js/rapid/ui/notification/Notification.js' */
define("jira-agile/rapid/ui/notification",["require"],function(e){"use strict";function a(e,a,r){return s(n({body:e,title:r.showTitle?a:void 0,close:r.autoHide?"auto":r.closeable?"manual":"never",type:r.type}))}function s(e){var a=r(e).find(".title");return""===r.trim(a.text())&&a.remove(),e}var r=e("jquery"),t=e("underscore"),n=e("aui/flag"),o=e("jira/util/logger"),i={showErrors:function(e){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=arguments[2],r="Error",t=GH.tpl.rapid.notification.renderErrorMessages(e);i.showError(r,t,a,s)},showError:function(e,s){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments[3],o={autoHide:!1,closeable:r,showTitle:!0,type:"error"};n=t.extend({},o,n),a(s,e,n)},showWarnings:function(e,s){var r={preRendered:!1,autoHide:!0,closeable:!0,showTitle:!1,type:"warning"};s=t.extend({},r,s);var n=void 0;n=s.preRendered?e:GH.tpl.rapid.notification.renderErrorMessages({errors:e}),a(n,"Warning",s)},showWarning:function(e){i.showWarnings(e,{preRendered:!0})},showSuccess:function(e,s){var r={closeable:!0,autoHide:!0,showTitle:!1,type:"success"};s=t.extend({},r,s),a(e,null,s)},clear:function(){r("#aui-flag-container").empty()},handleDateFormatMismatchError:function(e){var a='<a href="'+GH.Ajax.CONTEXT_PATH+'/secure/admin/AdvancedApplicationProperties.jspa">';a+="Advanced Settings",a+="</a>";var s=AJS.format("It appears your JIRA date format settings are misconfigured. Please check the {0} and ensure that \'\'jira.date.time.picker.java.format\'\' and \'\'jira.date.time.picker.javascript.format\'\' have matching output.",a);i.showWarnings(s,{autoHide:!1,preRendered:!0})},auiMessage:function(){o.warn("[deprecated] GH.Notification.auiMessage has no effect")},showIssueMessage:function(e){var a=JIRA.SessionStorage,s=null,r=null;e||(e=a.getItem("selectedIssueId")),e&&(r=a.getItem("selectedIssueKey"),s=a.getItem("selectedIssueMsg"),i.showIssueMessageImpl(e,s,r)),a.removeItem("selectedIssueId"),a.removeItem("selectedIssueKey"),a.removeItem("selectedIssueMsg")},showIssueMessageImpl:function(e,a,s){a||(a="thanks_issue_updated");var r=AJS.params[a];r&&s&&(r=AJS.format(r,s),i.showSuccess(r))},addPageLoadMessage:function(e,a){var s=GH.storage.get("gh.pageloadmessages",!0)||[];s.push({message:e,type:a||"success"}),GH.storage.put("gh.pageloadmessages",s,!0)},_displayPageLoadMessages:function(){var e=GH.storage.get("gh.pageloadmessages",!0);if(e){var a=e[0].type,s="";switch(t.each(e,function(e){s.length>0&&(s+="<br>"),s+=e.message}),a){case"warning":i.showWarning(s);break;case"success":default:i.showSuccess(s)}GH.storage.put("gh.pageloadmessages",null,!0)}},showBoardUpdatedMessage:function(){i.clearBoardUpdatedMessage();var e=r.Deferred(),a=r(GH.tpl.rapid.notification.renderGHtvMessage()).appendTo("#gh");return a.data("deferred",e),a.find(".js-refresh-now").click(function(s){s.preventDefault(),a.removeData("deferred"),i.clearBoardUpdatedMessage(),e.resolve()}),a.find(".js-ignore-refresh").click(function(e){e.preventDefault(),i.clearBoardUpdatedMessage()}),e.promise()},clearBoardUpdatedMessage:function(){var e=r("#ghx-update-message");if(e.length){var a=e.data("deferred");a&&a.reject&&a.reject(),e.remove()}},isBoardUpdatedMessageVisible:function(){var e=r("#ghx-update-message");return e.length>0}};return i}),AJS.namespace("GH.Notification",null,require("jira-agile/rapid/ui/notification")),AJS.$(document).ready(function(){GH.Notification.showIssueMessage(),GH.storage&&GH.Notification._displayPageLoadMessages()});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/gh-namespace.js' */
AJS.namespace("GH.namespace",null,AJS.namespace);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/field/initFieldPickers.js' */
!function(e){function n(n){e(".js-epic-picker",n).each(function(){var n=e(this),i=new JIRA.EpicPicker({element:n});e(document).trigger(JIRA.EpicPicker.READY_EVENT,i)})}function i(n){e(".js-sprint-picker",n).each(function(){var n=e(this),i=new JIRA.SprintPicker({element:n});e(document).trigger(JIRA.SprintPicker.READY_EVENT,i)})}JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(e,c,t){t!==JIRA.CONTENT_ADDED_REASON.panelRefreshed&&(n(c),i(c))})}(AJS.$);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/field/EpicPicker.js' */
JIRA.EpicPicker=AJS.SingleSelect.extend({init:function(e){function r(e){var r=!p();return{searchQuery:e,projectKey:AJS.$(g).attr("data-project-key"),maxResults:100,hideDone:r}}function t(e,r,t,i){e=AJS.escapeHTML(String(e)),r=AJS.escapeHTML(String(r)),i=AJS.escapeHTML(String(i));var n=i.toUpperCase(),o=e.toUpperCase(),a=r.toUpperCase();n=(n+"").replace(/([\\\.\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:])/g,"\\$1");var s,c=new RegExp("("+n+")","gi"),l=o.search(c);l>-1&&(s=e.slice(l,l+i.length),e=e.replace(s,"<em>"+s+"</em>")),l=a.search(c),l>-1&&(s=r.slice(l,l+i.length),r=r.replace(s,"<em>"+s+"</em>"));var p=t?" &#8226; "+"Done":"";return e+" - <span class='epic-menu-metadata'>("+r+p+")</span>"}function i(e){if(!e||!e.epicLists||0===e.total)return[];for(var r=[],t=d.getQueryVal(),i=0,a=0;a<e.epicLists.length;a++){var s=e.epicLists[a],c=s.epicNames,l=o(a+1,s.listDescriptor);c.length>0&&(_.each(c,function(e){l.addItem(n(e,t))}),r.push(l)),i+=c.length}if(i>0){var h=new AJS.GroupDescriptor({weight:0,showLabel:!1,items:[new AJS.ItemDescriptor({label:t,highlighted:!0,styleClass:"ghx-epic-menu-header",customItem:!0,html:"<li><h5>"+AJS.format("Showing {0} of {1} matching epics",i,e.total)+"</h5><label for='chkShowDoneEpic'><input type='checkbox' id='chkShowDoneEpic'"+(p()?" checked":"")+">"+"Show done epics"+"</label></li>"})]});r.unshift(h)}return r}function n(e,r){var i=e.key,n=e.name,o=e.isDone,a=t(n,i,o,r);return new AJS.ItemDescriptor({value:"key:"+i,fieldText:n,label:a,html:a,allowDuplicate:!1,highlighted:!0})}function o(e,r){return new AJS.GroupDescriptor({weight:e,label:r,replace:!0})}function a(e,r,t){var i=AJS.$(g);i.siblings(".ghx-error").remove(),i.before(GH.tpl.rapid.notification.renderAuiMessage({message:"Error"+": "+t,type:"error",className:"ghx-error aui-ss"}))}function s(e){var r="",t=!1;return e&&e.length>0&&(r=AJS.format("Epic with key \'\'{0}\'\' does not exist.",e),t=!0),{isError:t,message:r}}function c(e){var r,t;u.apply(d,[e]),e=e||AJS.$.trim(d.$field.val()),t=d.model.getDescriptor(e),!t&&d.$container.hasClass("aui-ss-editing")&&(r=s(e),r.isError?(d.options.errorMessage=r.message,d.showErrorMessage(e)):d.hideErrorMessage())}function l(){d._super(e),u=d.handleFreeInput,d.handleFreeInput=c;var r=require("jira/ajs/layer/inline-layer");d.dropdownController.bind(r.EVENTS.show,function(e,r){r.off("click",'.ghx-epic-menu-header label[for="chkShowDoneEpic"]',h),r.on("click",'.ghx-epic-menu-header label[for="chkShowDoneEpic"]',h)})}function p(){return"true"===localStorage.getItem("gh.epicpicker.showdone")}function h(e){e.preventDefault();var r=!p();return localStorage.setItem("gh.epicpicker.showdone",r),d.$field.click(),!1}var u,g=e.element,d=this,m=require("wrm/context-path");AJS.$.extend(e,{submitInputVal:!0,showDropdownButton:!0,removeDuplicates:!0,ajaxOptions:{url:m()+"/rest/greenhopper/1.0/epics",query:!0,data:r,formatResponse:i,error:a}});var f=this.setSelection;this.setSelection=function(e,r){e.properties.customItem||f.apply(this,arguments)},l()}}),JIRA.EpicPicker.READY_EVENT="gh.epic-picker.ready";;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/field/SprintPicker.js' */
JIRA.SprintPicker=AJS.SingleSelect.extend({init:function(e){function n(e){var n=f.apply(this,arguments);return n.find("a").append(GH.tpl.customfields.sprintpicker.renderSuggestionMeta(e.properties)),n}function t(e){var n,t=this.getSelectedDescriptor();e||t||p(null),o(),this.hideErrorMessage(),n=t?i(t):r(e),n.message&&(this.options.errorMessage=n.message,h.apply(this,arguments),this.$errorMessage.addClass("inline-edit-error")),n.needsScopeChangeWarning&&s()}function r(e){var n=null,t=!1;return e&&e.length>0?v?(n=AJS.format("{0} is not a valid sprint name. This issue will be returned to the backlog.",e),v===m.ACTIVE&&(t=!0)):n=AJS.format("{0} is not a valid sprint name.",e):v===m.ACTIVE&&(t=!0),{message:n,needsScopeChangeWarning:t}}function i(e){var n=!1;return v===m.ACTIVE?n=!!u()||I!=e.properties.value:v===m.FUTURE?e.properties.stateKey===m.ACTIVE&&(n=!0):v||e.properties.stateKey===m.ACTIVE&&(n=!0),{message:null,needsScopeChangeWarning:n}}function s(){if(!S){u()||(S=AJS.$(GH.tpl.rapid.notification.renderAuiMessage({type:"warning",className:"ghx-sprint-picker-scope-warning",icon:!0,title:"Sprint scope will be affected by this action."})));var e=E.$container.closest(".inline-edit-fields");e.size()>0?u()?(S=AJS.$('<div class="ghx-estimate-scope-warning"></div>'),S.text("Sprint scope will be affected by this action."),e.find(".field-group").append(S)):e.closest(".editable-field").append(S):(u()&&(S=AJS.$(GH.tpl.rapid.notification.renderAuiMessage({type:"warning",className:"ghx-sprint-picker-scope-warning",icon:!0,title:"Sprint scope will be affected by this action."}))),E.$container.closest(".field-group").append(S))}S.show()}function o(){S&&(S.remove(),S=null)}function a(e){if(!e.suggestions&&!e.allMatches)return[];var n=new AJS.GroupDescriptor({weight:0,label:"Suggestions"}),t=new AJS.GroupDescriptor({weight:1,label:"All sprints"});return _.each(g(e.suggestions),function(e){n.addItem(l(e,!0))}),_.each(g(e.allMatches),function(e){t.addItem(l(e,!1))}),[n,t]}function l(e,n){var t=AJS.escapeHTML(String(e.name));return new AJS.ItemDescriptor({value:e.id.toString(),label:e.name,html:t,stateKey:e.stateKey,boardName:e.boardName,allowDuplicate:!1,isSuggestion:n})}function g(e){return _.sortBy(e,function(e){return e.name.toLowerCase()})}function p(e){GH.SprintConfig&&AJS.$(GH).trigger("QuickEdit.fieldChange",{fieldId:GH.SprintConfig.getSprintFieldId(),fieldChangeData:{original:I,updated:e?e.properties.value:null}})}function d(){if(E._super(e),f=E.listController._renders.suggestion,h=E.showErrorMessage,E.listController._renders.suggestion=n,E.showErrorMessage=t,u()){var r=E.$container.closest(".inline-edit-fields"),i=r.size()>0;if(i){var s=w.parent().find("input");s.on("focus",function(){E.showErrorMessage()})}}w.bind("selected",function(e,n,t){u()&&i||t.showErrorMessage(t.getQueryVal()),p(n),E.showErrorMessage()}),E.suggestionsHandler=new J(E.options,E.model)}function c(e,n,t){var r=AJS.$(w);r.siblings(".ghx-error").remove(),r.before(GH.tpl.rapid.notification.renderAuiMessage({message:"Error"+": "+t,type:"error",className:"ghx-error aui-ss"}))}function u(){return!(!GH||!GH.DetailsObjectFactory)&&GH.DetailsObjectFactory.isInlineEditableEnabled()}var f,h,S,m={ACTIVE:"ACTIVE",FUTURE:"FUTURE",CLOSED:"CLOSED"},A=10,w=e.element,v=w.data("saved-state"),I=w.data("saved-id"),E=this,J=AJS.SelectSuggestHandler.extend({formatSuggestions:function(e,n){return e=this._super(e,n),0===n.length&&e[e.length-1].footerText("Start typing for sprints."),e}}),x=require("wrm/context-path");AJS.$.extend(e,{submitInputVal:!1,showDropdownButton:!0,removeOnUnSelect:!1,maxInlineResultsDisplayed:A,ajaxOptions:{url:x()+"/rest/greenhopper/1.0/sprint/picker",query:!0,formatResponse:a,error:c}}),d()}}),JIRA.SprintPicker.READY_EVENT="gh.sprint-picker.ready";;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/field/SprintPicker.soy' */
// This file was automatically generated from SprintPicker.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.customfields.sprintpicker.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.customfields == 'undefined') { GH.tpl.customfields = {}; }
if (typeof GH.tpl.customfields.sprintpicker == 'undefined') { GH.tpl.customfields.sprintpicker = {}; }


GH.tpl.customfields.sprintpicker.renderSuggestionMeta = function(opt_data, opt_ignored) {
  return '' + ((opt_data.boardName && ! opt_data.isSuggestion) ? '<span class=\'ghx-sprint-picker-meta\'> (' + GH.tpl.customfields.sprintpicker.renderMetaWithBoardName(opt_data) + ')</span>' : '<span class=\'ghx-sprint-picker-meta\'> (' + GH.tpl.customfields.sprintpicker.renderMetaWithoutBoardName(opt_data) + ')</span>');
};
if (goog.DEBUG) {
  GH.tpl.customfields.sprintpicker.renderSuggestionMeta.soyTemplateName = 'GH.tpl.customfields.sprintpicker.renderSuggestionMeta';
}


GH.tpl.customfields.sprintpicker.renderMetaWithoutBoardName = function(opt_data, opt_ignored) {
  return '' + ((opt_data.stateKey == 'ACTIVE') ? soy.$$escapeHtml("Active sprint") : (opt_data.stateKey == 'FUTURE') ? soy.$$escapeHtml("Future sprint") : '');
};
if (goog.DEBUG) {
  GH.tpl.customfields.sprintpicker.renderMetaWithoutBoardName.soyTemplateName = 'GH.tpl.customfields.sprintpicker.renderMetaWithoutBoardName';
}


GH.tpl.customfields.sprintpicker.renderMetaWithBoardName = function(opt_data, opt_ignored) {
  return '' + ((opt_data.stateKey == 'ACTIVE') ? soy.$$escapeHtml(AJS.format("Active sprint in {0}",opt_data.boardName)) : (opt_data.stateKey == 'FUTURE') ? soy.$$escapeHtml(AJS.format("Future sprint in {0}",opt_data.boardName)) : '');
};
if (goog.DEBUG) {
  GH.tpl.customfields.sprintpicker.renderMetaWithBoardName.soyTemplateName = 'GH.tpl.customfields.sprintpicker.renderMetaWithBoardName';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/field/SprintMultiselect.js' */
JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(e,t){function n(e){var t=new AJS.GroupDescriptor({weight:0,label:"Suggestions",items:_.map(e.suggestions,s)}),n=new AJS.GroupDescriptor({weight:1,label:"All sprints",items:_.map(e.allMatches,s)});return[t,n]}function s(e){e.date=moment(e.date,"YYYY-MM-DDTHH:mm:ssZ").format("LL");var t=GH.tpl.customfields.sprintmultiselect.renderSuggestionMeta(e);return new AJS.ItemDescriptor({value:e.id,label:e.name,html:t,title:GH.tpl.customfields.sprintmultiselect.renderTooltip(e),date:e.date,boardName:e.boardName,stateKey:e.stateKey,highlighted:!0,allowDuplicate:!1})}AJS.$(".js-sprint-checkboxmultiselect",t).each(function(){var e=new AJS.CheckboxMultiSelect({element:this,maxInlineResultsDisplayed:5,content:"ajax",removeOnUnSelect:!0,ajaxOptions:{url:AJS.contextPath()+"/rest/greenhopper/1.0/sprint/picker",error:function(){e._setSuggestions([])},data:{excludeCompleted:!1},query:!0,formatResponse:n},suggestionsHandler:GH.SprintSuggestHandler})})});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/field/SprintMultiselect.soy' */
// This file was automatically generated from SprintMultiselect.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.customfields.sprintmultiselect.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.customfields == 'undefined') { GH.tpl.customfields = {}; }
if (typeof GH.tpl.customfields.sprintmultiselect == 'undefined') { GH.tpl.customfields.sprintmultiselect = {}; }


GH.tpl.customfields.sprintmultiselect.renderSuggestionMeta = function(opt_data, opt_ignored) {
  return '<div>' + soy.$$escapeHtml(opt_data.name) + '</div><div><span class=\'ghx-sprint-multiselect-meta\'> ' + ((opt_data.boardName) ? GH.tpl.customfields.sprintmultiselect.renderMetaWithBoardName(opt_data) : GH.tpl.customfields.sprintmultiselect.renderMetaWithoutBoardName(opt_data)) + '</span></div>';
};
if (goog.DEBUG) {
  GH.tpl.customfields.sprintmultiselect.renderSuggestionMeta.soyTemplateName = 'GH.tpl.customfields.sprintmultiselect.renderSuggestionMeta';
}


GH.tpl.customfields.sprintmultiselect.renderMetaWithoutBoardName = function(opt_data, opt_ignored) {
  return '' + ((opt_data.stateKey == 'ACTIVE') ? soy.$$escapeHtml("Active") : (opt_data.stateKey == 'FUTURE') ? soy.$$escapeHtml("Future") : (opt_data.stateKey == 'CLOSED') ? soy.$$escapeHtml("Closed") : '');
};
if (goog.DEBUG) {
  GH.tpl.customfields.sprintmultiselect.renderMetaWithoutBoardName.soyTemplateName = 'GH.tpl.customfields.sprintmultiselect.renderMetaWithoutBoardName';
}


GH.tpl.customfields.sprintmultiselect.renderMetaWithBoardName = function(opt_data, opt_ignored) {
  return '' + ((opt_data.stateKey == 'ACTIVE') ? soy.$$escapeHtml(AJS.format("Active \xb7 {0}",opt_data.boardName)) : (opt_data.stateKey == 'FUTURE') ? soy.$$escapeHtml(AJS.format("Future \xb7 {0}",opt_data.boardName)) : (opt_data.stateKey == 'CLOSED') ? soy.$$escapeHtml(AJS.format("Closed \xb7 {0}",opt_data.boardName)) : '');
};
if (goog.DEBUG) {
  GH.tpl.customfields.sprintmultiselect.renderMetaWithBoardName.soyTemplateName = 'GH.tpl.customfields.sprintmultiselect.renderMetaWithBoardName';
}


GH.tpl.customfields.sprintmultiselect.renderTooltip = function(opt_data, opt_ignored) {
  return '' + ((opt_data.stateKey == 'ACTIVE') ? soy.$$escapeHtml(AJS.format("Started on {0}",opt_data.date)) : (opt_data.stateKey == 'FUTURE') ? soy.$$escapeHtml("Future") : (opt_data.stateKey == 'CLOSED') ? soy.$$escapeHtml(AJS.format("Closed on {0}",opt_data.date)) : '');
};
if (goog.DEBUG) {
  GH.tpl.customfields.sprintmultiselect.renderTooltip.soyTemplateName = 'GH.tpl.customfields.sprintmultiselect.renderTooltip';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/field/SprintSuggestHandler.js' */
define("includes/js/field/sprint-suggest-handler",["jira/ajs/select/suggestions/checkbox-multi-select-suggest-handler"],function(e){var t=function(e){_.each(e,function(e){var t=JSON.parse(e.properties.meta);t.date=moment(t.date).format("LL"),e.properties.title=GH.tpl.customfields.sprintmultiselect.renderTooltip(t),e.properties.html=GH.tpl.customfields.sprintmultiselect.renderSuggestionMeta(t)})};return e.extend({formatSuggestions:function(e,r){var s=this.model.getDisplayableSelectedDescriptors();t(s);var i=function(e){var t;for(t in s)if(s[t].properties.value===e.properties.value.toString())return!1;return!0};return e=_.map(e,function(e){var t=_.filter(e.properties.items,i);return e.properties.items=t,e}),this._super(e,r)}})}),AJS.namespace("GH.SprintSuggestHandler",null,require("includes/js/field/sprint-suggest-handler"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/field/EpicLinkMultiselect.js' */
require(["require"],function(e){function t(e){return 0!==e.indexOf("project")?"":n(e).trim()}function n(e){function t(e){var t=e.match(/\bproject\s*=\s*(\S+)/i);return t?t[1]:null}function n(e){var t=e.match(/\bproject\s+in\s+\((.*?)\)/i);return t?t[1]:null}return t(e)||n(e)}var i=e("jquery"),r=e("underscore");JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(e,n){var s=i("#jql",this).val();n.find(".js-epiclink-checkboxmultiselect").each(function(){var e=new AJS.CheckboxMultiSelect({element:this,matchingStrategy:"(^|.*?(.*))({0})(.*)",maxInlineResultsDisplayed:5,content:"ajax",removeOnUnSelect:!0,ajaxOptions:{url:AJS.contextPath()+"/rest/greenhopper/1.0/epics",error:function(){e._setSuggestions([])},data:{searchQuery:"",projectKey:t(s),filterEpicsByGivenProjects:!0,maxResults:100},query:!0,minQueryLength:0,formatResponse:function(e){var t=[];if(t.push(new AJS.GroupDescriptor({weight:1,items:[new AJS.ItemDescriptor({highlighted:!0,label:"No Epic Link",value:"EMPTY",title:"EMPTY"})]})),!e||!e.epicLists||0===e.total)return t;for(var n=0;n<e.epicLists.length;n++){var i=e.epicLists[n],s=i.epicNames,c=new AJS.GroupDescriptor({label:i.listDescriptor,weight:n});s.length>0&&(r.each(s,function(e){c.addItem(new AJS.ItemDescriptor({highlighted:!0,label:e.name+" - ("+e.key+")",value:e.key,title:e.key}))}),t.push(c))}return t}},suggestionsHandler:GH.EpicLinkSuggestHandler})})})});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/field/EpicLinkSuggestHandler.js' */
define("includes/js/field/epic-link-suggest-handler",["jira/ajs/select/suggestions/checkbox-multi-select-suggest-handler"],function(e){return e.extend({formatSuggestions:function(e,r){var i=this.model.getDisplayableSelectedDescriptors(),t=function(e){var r;for(r in i)if(i[r].properties.value===e.properties.value.toString())return!1;return!0};return e=_.map(e,function(e){var r=_.filter(e.properties.items,t);return e.properties.items=r,e}),this._super(e,r)}})}),AJS.namespace("GH.EpicLinkSuggestHandler",null,require("includes/js/field/epic-link-suggest-handler"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:project-template-resources', location = '/projecttemplates/soy/ProjectTemplates.soy' */
// This file was automatically generated from ProjectTemplates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.projecttemplates.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.projecttemplates == 'undefined') { GH.tpl.projecttemplates = {}; }


GH.tpl.projecttemplates.kanbanInfoPageJira7 = function(opt_data, opt_ignored) {
  return '' + GH.tpl.projecttemplates.templateInfoDialog({description: "Use this project to optimise the flow of work in your development project. Add constraints to work-in-progress, analyze how long it takes to complete issues, find bottlenecks in your process, and more. This project includes a Kanban board, a basic Agile workflow and issue type configuration, which you can change later on.", extraIssueTypes: '<li><span class="issuetype-list-label"><span class="issuetype-icon story"></span><span class="issuetype-name">' + soy.$$escapeHtml("Story") + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon epic"></span><span class="issuetype-name">' + soy.$$escapeHtml("Epic") + '</span></span></li>', workflowScreenshotClass: 'kanban-workflow-screenshot'});
};
if (goog.DEBUG) {
  GH.tpl.projecttemplates.kanbanInfoPageJira7.soyTemplateName = 'GH.tpl.projecttemplates.kanbanInfoPageJira7';
}


GH.tpl.projecttemplates.scrumInfoPageJira7 = function(opt_data, opt_ignored) {
  return '' + GH.tpl.projecttemplates.templateInfoDialog({description: "Use this project to manage your Agile development work. Create a backlog, organise work into sprints, check progress using reports, and more. This project includes a Scrum board, a basic Agile workflow and issue type configuration, which you can change later on.", extraIssueTypes: '<li><span class="issuetype-list-label"><span class="issuetype-icon story"></span><span class="issuetype-name">' + soy.$$escapeHtml("Story") + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon epic"></span><span class="issuetype-name">' + soy.$$escapeHtml("Epic") + '</span></span></li>', workflowScreenshotClass: 'scrum-workflow-screenshot'});
};
if (goog.DEBUG) {
  GH.tpl.projecttemplates.scrumInfoPageJira7.soyTemplateName = 'GH.tpl.projecttemplates.scrumInfoPageJira7';
}


GH.tpl.projecttemplates.softwareDevelopmentInfoPageJira7 = function(opt_data, opt_ignored) {
  return '' + GH.tpl.projecttemplates.templateInfoDialog({description: "Use this project to work on new features for your product and also track any bugs. This project provides you with a basic workflow and issue type configuration, which you can change later on.", extraIssueTypes: '<li><span class="issuetype-list-label"><span class="issuetype-icon improvement"></span><span class="issuetype-name">' + soy.$$escapeHtml("Improvement") + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon newfeature"></span><span class="issuetype-name">' + soy.$$escapeHtml("New Feature") + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon epic"></span><span class="issuetype-name">' + soy.$$escapeHtml("Epic") + '</span></span></li>', workflowScreenshotClass: 'basic-development-workflow-screenshot'});
};
if (goog.DEBUG) {
  GH.tpl.projecttemplates.softwareDevelopmentInfoPageJira7.soyTemplateName = 'GH.tpl.projecttemplates.softwareDevelopmentInfoPageJira7';
}


GH.tpl.projecttemplates.templateInfoDialog = function(opt_data, opt_ignored) {
  return '<div><div class="top-panel"><p>' + soy.$$escapeHtml(opt_data.description) + '</p></div><div class="left-panel"><h6>' + soy.$$escapeHtml("Issue Types") + '</h6><ul class="project-template-issuetype-list" ><li><span class="issuetype-list-label"><span class="issuetype-icon bug"></span><span class="issuetype-name">' + soy.$$escapeHtml("Bug") + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon task"></span><span class="issuetype-name">' + soy.$$escapeHtml("Task") + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon subtask"></span><span class="issuetype-name">' + soy.$$escapeHtml("Sub-task") + '</span></span></li>' + soy.$$filterNoAutoescape(opt_data.extraIssueTypes) + '</ul></div><div class="right-panel"><h6>' + soy.$$escapeHtml("workflow") + '</h6><div class="workflow ' + soy.$$escapeHtml(opt_data.workflowScreenshotClass) + '"></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.projecttemplates.templateInfoDialog.soyTemplateName = 'GH.tpl.projecttemplates.templateInfoDialog';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-globalkeyboardshortcuts', location = 'includes/js/gh-globalkeyboardshortcuts.js' */
define("jira-agile/gh-globalkeyboardshortcuts",["jira-agile/rapid/ui/notification","jira/ajs/ajax/smart-ajax","jira/data/session-storage","jira/issuenavigator/issue-navigator/shortcuts","jira/issue","jira/issuenavigator/issue-navigator","jira/dialog/dialog","jquery","jira/util/browser"],function(e,s,o,a,t,i,r,n,u){var d={},c=require("wrm/context-path");return d.findSelectedIssueId=function(){var e;return jira&&jira.app&&i&&i.getSelectedIssueId&&(e=i.getSelectedIssueId()),!e&&jira&&jira.app&&t&&t.getIssueId&&(e=t.getIssueId()),e},d.goToAgile=function(){var e="/secure/RapidBoard.jspa",s=c();s&&(e=s+e),window.location.href=e},d.followLink=function(e){var s=n(e);s.length>0&&("a"===s[0].nodeName.toLowerCase()||"link"===s[0].nodeName.toLowerCase())&&(s.click(),window.location.href=s.attr("href"))},d.sendToTop=function(e,o){if(window.GH&&GH.RapidBoard&&GH.Shortcut&&GH.Shortcut.sendToTop)return GH.Shortcut.sendToTop(e),void d.closeDialogAndPopMessage();if("Action"==e){var a=o||d.findSelectedIssueId(),t=c()||"";s.makeRequest({type:"post",contentType:"application/json",url:t+"/rest/greenhopper/1.0/rank/global/first",data:JSON.stringify({issueId:a}),success:d.handleRankSuccess}),n(AJS).trigger("gh.global.rankissues",{action:"rankToTop"+(e?e:""),count:1})}},d.sendToBottom=function(e,o){if(window.GH&&GH.RapidBoard&&GH.Shortcut&&GH.Shortcut.sendToBottom)return GH.Shortcut.sendToBottom(e),void d.closeDialogAndPopMessage();if("Action"==e){var a=o||d.findSelectedIssueId(),t=c()||"";s.makeRequest({type:"post",contentType:"application/json",url:t+"/rest/greenhopper/1.0/rank/global/last",data:JSON.stringify({issueId:a}),success:d.handleRankSuccess}),n(AJS).trigger("gh.global.rankissues",{action:"rankToBottom"+(e?e:""),count:1})}},d.closeDialogAndPopMessage=function(){i.isNavigator()?u.reloadViaWindowLocation():(r&&r.current&&r.current.hide(),window.GH?(GH.RapidBoard&&e&&e.showIssueMessage&&e.showIssueMessage(),window.Boards&&window.Boards.refreshAll()):i&&a&&a.flashIssueRow&&a.flashIssueRow())},d.handleRankSuccess=function(e,s,o){d.storeSuccessMessage(e.issueId,e.issueKey,"thanks_issue_updated"),d.closeDialogAndPopMessage()},d.storeSuccessMessage=function(e,s,a){var t=o;t.setItem("selectedIssueId",e),t.setItem("selectedIssueKey",s),t.setItem("selectedIssueMsg",a)},d}),require(["jquery","jira-agile/gh-globalkeyboardshortcuts"],function(e,s){e(document).delegate(".issueaction-greenhopper-rank-top-operation","click",function(o){o.preventDefault();var a=e(this).attr("data-issueid");s.sendToTop("Action",a)}),e(document).delegate(".issueaction-greenhopper-rank-bottom-operation","click",function(o){o.preventDefault();var a=e(this).attr("data-issueid");s.sendToBottom("Action",a)})}),AJS.namespace("gh.app.globalkeyboardshortcuts",null,require("jira-agile/gh-globalkeyboardshortcuts"));;
;
/* module-key = 'com.atlassian.jira.plugin.ext.bamboo:bamboo-soy-resources', location = 'templates/plugins/bamboo/components.soy' */
// This file was automatically generated from components.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.components.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.components == 'undefined') { bamboo.components = {}; }


bamboo.components.pageHeader = function(opt_data, opt_ignored) {
  return '' + aui.page.pageHeader({content: '' + ((opt_data.headerImageContent) ? aui.page.pageHeaderImage({content: opt_data.headerImageContent}) : '') + aui.page.pageHeaderMain({content: opt_data.headerMainContent}) + ((opt_data.headerActionsContent) ? aui.page.pageHeaderActions({content: opt_data.headerActionsContent}) : '')});
};
if (goog.DEBUG) {
  bamboo.components.pageHeader.soyTemplateName = 'bamboo.components.pageHeader';
}


bamboo.components.icon = function(opt_data, opt_ignored) {
  return '<span class="bamboo-icon bamboo-icon-' + soy.$$escapeHtml(opt_data.type) + '"' + ((opt_data.text && opt_data.showTitle) ? ' title="' + soy.$$escapeHtml(opt_data.text) + '"' : '') + '>' + ((opt_data.text) ? '<span>' + soy.$$escapeHtml(opt_data.text) + '</span>' : '') + '</span>';
};
if (goog.DEBUG) {
  bamboo.components.icon.soyTemplateName = 'bamboo.components.icon';
}


bamboo.components.buildDetail = function(opt_data, opt_ignored) {
  return '<dl><dt class="' + soy.$$escapeHtml(opt_data.keyClass) + '">' + soy.$$escapeHtml(opt_data.key) + '</dt><dd>' + soy.$$filterNoAutoescape(opt_data.value) + '</dd></dl>';
};
if (goog.DEBUG) {
  bamboo.components.buildDetail.soyTemplateName = 'bamboo.components.buildDetail';
}


bamboo.components.artifacts = function(opt_data, opt_ignored) {
  var output = '<ul id="shared-artifacts">';
  var artifactList42 = opt_data.artifacts;
  var artifactListLen42 = artifactList42.length;
  for (var artifactIndex42 = 0; artifactIndex42 < artifactListLen42; artifactIndex42++) {
    var artifactData42 = artifactList42[artifactIndex42];
    output += bamboo.components.artifactItem(soy.$$augmentMap(artifactData42, {id: artifactData42.name, url: artifactData42.link.href}));
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  bamboo.components.artifacts.soyTemplateName = 'bamboo.components.artifacts';
}


bamboo.components.artifactItem = function(opt_data, opt_ignored) {
  return '<li>' + bamboo.components.icon({type: 'artifact-shared'}) + ' <a class="artifact-link" id="artifact-' + soy.$$escapeHtml(opt_data.id) + '" href="' + soy.$$escapeHtml(opt_data.url) + '" title="' + soy.$$escapeHtml(opt_data.name) + '">' + soy.$$escapeHtml(opt_data.name) + '</a><span class="filesize">(' + soy.$$escapeHtml(opt_data.prettySizeDescription) + ')</span></li>';
};
if (goog.DEBUG) {
  bamboo.components.artifactItem.soyTemplateName = 'bamboo.components.artifactItem';
}


bamboo.components.labels = function(opt_data, opt_ignored) {
  var output = '<ul class="labels">';
  var labelList65 = opt_data.labels;
  var labelListLen65 = labelList65.length;
  for (var labelIndex65 = 0; labelIndex65 < labelListLen65; labelIndex65++) {
    var labelData65 = labelList65[labelIndex65];
    output += bamboo.components.labelItem(soy.$$augmentMap(labelData65, {url: opt_data.baseBambooUrl + '/browse/label/' + labelData65.name}));
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  bamboo.components.labels.soyTemplateName = 'bamboo.components.labels';
}


bamboo.components.labelItem = function(opt_data, opt_ignored) {
  return '<li><a class="lozenge" href="' + soy.$$escapeHtml(opt_data.url) + '" title="' + soy.$$escapeHtml(opt_data.name) + '"><span>' + soy.$$escapeHtml(opt_data.name) + '</span></a></li>';
};
if (goog.DEBUG) {
  bamboo.components.labelItem.soyTemplateName = 'bamboo.components.labelItem';
}


bamboo.components.errorResponseMessage = function(opt_data, opt_ignored) {
  return '' + bamboo.components.auiWarning({body: '' + ((opt_data.errorMessage.messageBody) ? '<p>' + soy.$$escapeHtml(opt_data.errorMessage.messageBody) + '</p>' : (opt_data.errorMessage.oauthCallback) ? '<p><a href="' + soy.$$filterNoAutoescape(opt_data.errorMessage.oauthCallback) + '&amp;redirectUrl=' + soy.$$filterNoAutoescape(opt_data.oAuthDanceReturnUrl) + '">' + soy.$$escapeHtml("Log in \x26 approve") + '</a></p>' : '<p>' + soy.$$escapeHtml(opt_data.errorMessage.message) + '</p>')});
};
if (goog.DEBUG) {
  bamboo.components.errorResponseMessage.soyTemplateName = 'bamboo.components.errorResponseMessage';
}


bamboo.components.auiWarning = function(opt_data, opt_ignored) {
  return '<div class="aui-message warning"><span class="aui-icon icon-warning"></span>' + soy.$$filterNoAutoescape(opt_data.body) + '</div>';
};
if (goog.DEBUG) {
  bamboo.components.auiWarning.soyTemplateName = 'bamboo.components.auiWarning';
}
;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-vendor-jquery-plugins-jquery-select2', location = 'node_modules/@atlassian/aui/src/js-vendor/jquery/plugins/jquery.select2.js' */
("undefined"===typeof window?global:window).__541108ffa7d92ccfa7bbf8536d20dbb0=function(){var y=jQuery;"undefined"==typeof y.fn.each2&&y.extend(y.fn,{each2:function(a){for(var b=y([0]),c=-1,d=this.length;++c<d&&(b.context=b[0]=this[c])&&!1!==a.call(b[0],c,b););return this}});var e=jQuery,w=function(a){var b,c,d,g;if(!a||1>a.length)return a;b="";c=0;for(d=a.length;c<d;c++)g=a.charAt(c),b+=O[g]||g;return b},k=function(a,b){for(var c=0,d=b.length;c<d;c+=1)if(m(a,b[c]))return c;return-1},m=function(a,
b){return a===b?!0:void 0===a||void 0===b||null===a||null===b?!1:a.constructor===String?a+""===b+"":b.constructor===String?b+""===a+"":!1},B=function(a,b){var c,d,g;if(null===a||1>a.length)return[];c=a.split(b);d=0;for(g=c.length;d<g;d+=1)c[d]=e.trim(c[d]);return c},G=function(a){a.on("keydown",function(){void 0===e.data(a,"keyup-change-value")&&e.data(a,"keyup-change-value",a.val())});a.on("keyup",function(){var b=e.data(a,"keyup-change-value");void 0!==b&&a.val()!==b&&(e.removeData(a,"keyup-change-value"),
a.trigger("keyup-change"))})},H=function(a,b,c){var c=c||void 0,d;return function(){var g=arguments;window.clearTimeout(d);d=window.setTimeout(function(){b.apply(c,g)},a)}},j=function(a){a.preventDefault();a.stopPropagation()},z=function(a,b,c){var d,g=[],h;(d=a.attr("class"))&&e((""+d).split(" ")).each2(function(){0===this.indexOf("select2-")&&g.push(this)});(d=b.attr("class"))&&e((""+d).split(" ")).each2(function(){0!==this.indexOf("select2-")&&(h=c(this))&&g.push(h)});a.attr("class",g.join(" "))},
I=function(a,b,c,d){var g=w(a.toUpperCase()).indexOf(w(b.toUpperCase())),b=b.length;0>g?c.push(d(a)):(c.push(d(a.substring(0,g))),c.push("<span class='select2-match'>"),c.push(d(a.substring(g,g+b))),c.push("</span>"),c.push(d(a.substring(g+b,a.length))))},J=function(a){var b={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(a).replace(/[&<>"'\/\\]/g,function(a){return b[a]})},K=function(a){var b,c=null,d=a.quietMillis||100,g=a.url,h=this;return function(l){window.clearTimeout(b);
b=window.setTimeout(function(){var b=a.data,d=g,t=a.transport||e.fn.select2.ajaxDefaults.transport,f=e.extend({},e.fn.select2.ajaxDefaults.params,{type:a.type||"GET",cache:a.cache||!1,jsonpCallback:a.jsonpCallback||void 0,dataType:a.dataType||"json"}),b=b?b.call(h,l.term,l.page,l.context):null,d="function"===typeof d?d.call(h,l.term,l.page,l.context):d;c&&c.abort();a.params&&(e.isFunction(a.params)?e.extend(f,a.params.call(h)):e.extend(f,a.params));e.extend(f,{url:d,dataType:a.dataType,data:b,success:function(b){b=
a.results(b,l.page);l.callback(b)}});c=t.call(h,f)},d)}},L=function(a){var b=a,c,d,g=function(a){return""+a.text};e.isArray(b)&&(d=b,b={results:d});!1===e.isFunction(b)&&(d=b,b=function(){return d});a=b();a.text&&(g=a.text,e.isFunction(g)||(c=a.text,g=function(a){return a[c]}));return function(a){var c=a.term,d={results:[]},n;if(c==="")a.callback(b());else{n=function(b,d){var i,f,b=b[0];if(b.children){i={};for(f in b)b.hasOwnProperty(f)&&(i[f]=b[f]);i.children=[];e(b.children).each2(function(a,b){n(b,
i.children)});(i.children.length||a.matcher(c,g(i),b))&&d.push(i)}else a.matcher(c,g(b),b)&&d.push(b)};e(b().results).each2(function(a,b){n(b,d.results)});a.callback(d)}}},M=function(a){var b=e.isFunction(a);return function(c){var d=c.term,g={results:[]};e(b?a():a).each(function(){var a=void 0!==this.text,b=a?this.text:this;if(""===d||c.matcher(d,b))g.results.push(a?this:{id:this,text:this})});c.callback(g)}},r=function(a,b){if(e.isFunction(a))return!0;if(!a)return!1;throw Error(b+" must be a function or a falsy value");
},o=function(a){return e.isFunction(a)?a():a},N=function(a){var b=0;e.each(a,function(a,d){d.children?b+=N(d.children):b++});return b},P=function(a,b,c,d){var g=a,h=!1,e,i,f,t;if(d.createSearchChoice&&d.tokenSeparators&&!(1>d.tokenSeparators.length)){for(;;){h=-1;i=0;for(f=d.tokenSeparators.length;i<f&&!(t=d.tokenSeparators[i],h=a.indexOf(t),0<=h);i++);if(0>h)break;e=a.substring(0,h);a=a.substring(h+t.length);if(0<e.length&&(e=d.createSearchChoice.call(this,e,b),void 0!==e&&null!==e&&void 0!==d.id(e)&&
null!==d.id(e))){h=!1;i=0;for(f=b.length;i<f;i++)if(m(d.id(e),d.id(b[i]))){h=!0;break}h||c(e)}}if(g!==a)return a}},C=function(a,b){var c=function(){};c.prototype=new a;c.prototype.constructor=c;c.prototype.parent=a.prototype;c.prototype=e.extend(c.prototype,b);return c};if(void 0===window.Select2){var f,s,D,E,A,v,x={x:0,y:0},F;f={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(a){a=
a.which?a.which:a;switch(a){case f.LEFT:case f.RIGHT:case f.UP:case f.DOWN:return!0}return!1},isControl:function(a){switch(a.which){case f.SHIFT:case f.CTRL:case f.ALT:return!0}return a.metaKey?!0:!1},isFunctionKey:function(a){a=a.which?a.which:a;return 112<=a&&123>=a}};var O={"\u24b6":"A","\uff21":"A","\u00c0":"A","\u00c1":"A","\u00c2":"A","\u1ea6":"A","\u1ea4":"A","\u1eaa":"A","\u1ea8":"A","\u00c3":"A","\u0100":"A","\u0102":"A","\u1eb0":"A","\u1eae":"A","\u1eb4":"A","\u1eb2":"A","\u0226":"A","\u01e0":"A",
"\u00c4":"A","\u01de":"A","\u1ea2":"A","\u00c5":"A","\u01fa":"A","\u01cd":"A","\u0200":"A","\u0202":"A","\u1ea0":"A","\u1eac":"A","\u1eb6":"A","\u1e00":"A","\u0104":"A","\u023a":"A","\u2c6f":"A","\ua732":"AA","\u00c6":"AE","\u01fc":"AE","\u01e2":"AE","\ua734":"AO","\ua736":"AU","\ua738":"AV","\ua73a":"AV","\ua73c":"AY","\u24b7":"B","\uff22":"B","\u1e02":"B","\u1e04":"B","\u1e06":"B","\u0243":"B","\u0182":"B","\u0181":"B","\u24b8":"C","\uff23":"C","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C",
"\u00c7":"C","\u1e08":"C","\u0187":"C","\u023b":"C","\ua73e":"C","\u24b9":"D","\uff24":"D","\u1e0a":"D","\u010e":"D","\u1e0c":"D","\u1e10":"D","\u1e12":"D","\u1e0e":"D","\u0110":"D","\u018b":"D","\u018a":"D","\u0189":"D","\ua779":"D","\u01f1":"DZ","\u01c4":"DZ","\u01f2":"Dz","\u01c5":"Dz","\u24ba":"E","\uff25":"E","\u00c8":"E","\u00c9":"E","\u00ca":"E","\u1ec0":"E","\u1ebe":"E","\u1ec4":"E","\u1ec2":"E","\u1ebc":"E","\u0112":"E","\u1e14":"E","\u1e16":"E","\u0114":"E","\u0116":"E","\u00cb":"E","\u1eba":"E",
"\u011a":"E","\u0204":"E","\u0206":"E","\u1eb8":"E","\u1ec6":"E","\u0228":"E","\u1e1c":"E","\u0118":"E","\u1e18":"E","\u1e1a":"E","\u0190":"E","\u018e":"E","\u24bb":"F","\uff26":"F","\u1e1e":"F","\u0191":"F","\ua77b":"F","\u24bc":"G","\uff27":"G","\u01f4":"G","\u011c":"G","\u1e20":"G","\u011e":"G","\u0120":"G","\u01e6":"G","\u0122":"G","\u01e4":"G","\u0193":"G","\ua7a0":"G","\ua77d":"G","\ua77e":"G","\u24bd":"H","\uff28":"H","\u0124":"H","\u1e22":"H","\u1e26":"H","\u021e":"H","\u1e24":"H","\u1e28":"H",
"\u1e2a":"H","\u0126":"H","\u2c67":"H","\u2c75":"H","\ua78d":"H","\u24be":"I","\uff29":"I","\u00cc":"I","\u00cd":"I","\u00ce":"I","\u0128":"I","\u012a":"I","\u012c":"I","\u0130":"I","\u00cf":"I","\u1e2e":"I","\u1ec8":"I","\u01cf":"I","\u0208":"I","\u020a":"I","\u1eca":"I","\u012e":"I","\u1e2c":"I","\u0197":"I","\u24bf":"J","\uff2a":"J","\u0134":"J","\u0248":"J","\u24c0":"K","\uff2b":"K","\u1e30":"K","\u01e8":"K","\u1e32":"K","\u0136":"K","\u1e34":"K","\u0198":"K","\u2c69":"K","\ua740":"K","\ua742":"K",
"\ua744":"K","\ua7a2":"K","\u24c1":"L","\uff2c":"L","\u013f":"L","\u0139":"L","\u013d":"L","\u1e36":"L","\u1e38":"L","\u013b":"L","\u1e3c":"L","\u1e3a":"L","\u0141":"L","\u023d":"L","\u2c62":"L","\u2c60":"L","\ua748":"L","\ua746":"L","\ua780":"L","\u01c7":"LJ","\u01c8":"Lj","\u24c2":"M","\uff2d":"M","\u1e3e":"M","\u1e40":"M","\u1e42":"M","\u2c6e":"M","\u019c":"M","\u24c3":"N","\uff2e":"N","\u01f8":"N","\u0143":"N","\u00d1":"N","\u1e44":"N","\u0147":"N","\u1e46":"N","\u0145":"N","\u1e4a":"N","\u1e48":"N",
"\u0220":"N","\u019d":"N","\ua790":"N","\ua7a4":"N","\u01ca":"NJ","\u01cb":"Nj","\u24c4":"O","\uff2f":"O","\u00d2":"O","\u00d3":"O","\u00d4":"O","\u1ed2":"O","\u1ed0":"O","\u1ed6":"O","\u1ed4":"O","\u00d5":"O","\u1e4c":"O","\u022c":"O","\u1e4e":"O","\u014c":"O","\u1e50":"O","\u1e52":"O","\u014e":"O","\u022e":"O","\u0230":"O","\u00d6":"O","\u022a":"O","\u1ece":"O","\u0150":"O","\u01d1":"O","\u020c":"O","\u020e":"O","\u01a0":"O","\u1edc":"O","\u1eda":"O","\u1ee0":"O","\u1ede":"O","\u1ee2":"O","\u1ecc":"O",
"\u1ed8":"O","\u01ea":"O","\u01ec":"O","\u00d8":"O","\u01fe":"O","\u0186":"O","\u019f":"O","\ua74a":"O","\ua74c":"O","\u01a2":"OI","\ua74e":"OO","\u0222":"OU","\u24c5":"P","\uff30":"P","\u1e54":"P","\u1e56":"P","\u01a4":"P","\u2c63":"P","\ua750":"P","\ua752":"P","\ua754":"P","\u24c6":"Q","\uff31":"Q","\ua756":"Q","\ua758":"Q","\u024a":"Q","\u24c7":"R","\uff32":"R","\u0154":"R","\u1e58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1e5a":"R","\u1e5c":"R","\u0156":"R","\u1e5e":"R","\u024c":"R","\u2c64":"R",
"\ua75a":"R","\ua7a6":"R","\ua782":"R","\u24c8":"S","\uff33":"S","\u1e9e":"S","\u015a":"S","\u1e64":"S","\u015c":"S","\u1e60":"S","\u0160":"S","\u1e66":"S","\u1e62":"S","\u1e68":"S","\u0218":"S","\u015e":"S","\u2c7e":"S","\ua7a8":"S","\ua784":"S","\u24c9":"T","\uff34":"T","\u1e6a":"T","\u0164":"T","\u1e6c":"T","\u021a":"T","\u0162":"T","\u1e70":"T","\u1e6e":"T","\u0166":"T","\u01ac":"T","\u01ae":"T","\u023e":"T","\ua786":"T","\ua728":"TZ","\u24ca":"U","\uff35":"U","\u00d9":"U","\u00da":"U","\u00db":"U",
"\u0168":"U","\u1e78":"U","\u016a":"U","\u1e7a":"U","\u016c":"U","\u00dc":"U","\u01db":"U","\u01d7":"U","\u01d5":"U","\u01d9":"U","\u1ee6":"U","\u016e":"U","\u0170":"U","\u01d3":"U","\u0214":"U","\u0216":"U","\u01af":"U","\u1eea":"U","\u1ee8":"U","\u1eee":"U","\u1eec":"U","\u1ef0":"U","\u1ee4":"U","\u1e72":"U","\u0172":"U","\u1e76":"U","\u1e74":"U","\u0244":"U","\u24cb":"V","\uff36":"V","\u1e7c":"V","\u1e7e":"V","\u01b2":"V","\ua75e":"V","\u0245":"V","\ua760":"VY","\u24cc":"W","\uff37":"W","\u1e80":"W",
"\u1e82":"W","\u0174":"W","\u1e86":"W","\u1e84":"W","\u1e88":"W","\u2c72":"W","\u24cd":"X","\uff38":"X","\u1e8a":"X","\u1e8c":"X","\u24ce":"Y","\uff39":"Y","\u1ef2":"Y","\u00dd":"Y","\u0176":"Y","\u1ef8":"Y","\u0232":"Y","\u1e8e":"Y","\u0178":"Y","\u1ef6":"Y","\u1ef4":"Y","\u01b3":"Y","\u024e":"Y","\u1efe":"Y","\u24cf":"Z","\uff3a":"Z","\u0179":"Z","\u1e90":"Z","\u017b":"Z","\u017d":"Z","\u1e92":"Z","\u1e94":"Z","\u01b5":"Z","\u0224":"Z","\u2c7f":"Z","\u2c6b":"Z","\ua762":"Z","\u24d0":"a","\uff41":"a",
"\u1e9a":"a","\u00e0":"a","\u00e1":"a","\u00e2":"a","\u1ea7":"a","\u1ea5":"a","\u1eab":"a","\u1ea9":"a","\u00e3":"a","\u0101":"a","\u0103":"a","\u1eb1":"a","\u1eaf":"a","\u1eb5":"a","\u1eb3":"a","\u0227":"a","\u01e1":"a","\u00e4":"a","\u01df":"a","\u1ea3":"a","\u00e5":"a","\u01fb":"a","\u01ce":"a","\u0201":"a","\u0203":"a","\u1ea1":"a","\u1ead":"a","\u1eb7":"a","\u1e01":"a","\u0105":"a","\u2c65":"a","\u0250":"a","\ua733":"aa","\u00e6":"ae","\u01fd":"ae","\u01e3":"ae","\ua735":"ao","\ua737":"au","\ua739":"av",
"\ua73b":"av","\ua73d":"ay","\u24d1":"b","\uff42":"b","\u1e03":"b","\u1e05":"b","\u1e07":"b","\u0180":"b","\u0183":"b","\u0253":"b","\u24d2":"c","\uff43":"c","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u00e7":"c","\u1e09":"c","\u0188":"c","\u023c":"c","\ua73f":"c","\u2184":"c","\u24d3":"d","\uff44":"d","\u1e0b":"d","\u010f":"d","\u1e0d":"d","\u1e11":"d","\u1e13":"d","\u1e0f":"d","\u0111":"d","\u018c":"d","\u0256":"d","\u0257":"d","\ua77a":"d","\u01f3":"dz","\u01c6":"dz","\u24d4":"e","\uff45":"e",
"\u00e8":"e","\u00e9":"e","\u00ea":"e","\u1ec1":"e","\u1ebf":"e","\u1ec5":"e","\u1ec3":"e","\u1ebd":"e","\u0113":"e","\u1e15":"e","\u1e17":"e","\u0115":"e","\u0117":"e","\u00eb":"e","\u1ebb":"e","\u011b":"e","\u0205":"e","\u0207":"e","\u1eb9":"e","\u1ec7":"e","\u0229":"e","\u1e1d":"e","\u0119":"e","\u1e19":"e","\u1e1b":"e","\u0247":"e","\u025b":"e","\u01dd":"e","\u24d5":"f","\uff46":"f","\u1e1f":"f","\u0192":"f","\ua77c":"f","\u24d6":"g","\uff47":"g","\u01f5":"g","\u011d":"g","\u1e21":"g","\u011f":"g",
"\u0121":"g","\u01e7":"g","\u0123":"g","\u01e5":"g","\u0260":"g","\ua7a1":"g","\u1d79":"g","\ua77f":"g","\u24d7":"h","\uff48":"h","\u0125":"h","\u1e23":"h","\u1e27":"h","\u021f":"h","\u1e25":"h","\u1e29":"h","\u1e2b":"h","\u1e96":"h","\u0127":"h","\u2c68":"h","\u2c76":"h","\u0265":"h","\u0195":"hv","\u24d8":"i","\uff49":"i","\u00ec":"i","\u00ed":"i","\u00ee":"i","\u0129":"i","\u012b":"i","\u012d":"i","\u00ef":"i","\u1e2f":"i","\u1ec9":"i","\u01d0":"i","\u0209":"i","\u020b":"i","\u1ecb":"i","\u012f":"i",
"\u1e2d":"i","\u0268":"i","\u0131":"i","\u24d9":"j","\uff4a":"j","\u0135":"j","\u01f0":"j","\u0249":"j","\u24da":"k","\uff4b":"k","\u1e31":"k","\u01e9":"k","\u1e33":"k","\u0137":"k","\u1e35":"k","\u0199":"k","\u2c6a":"k","\ua741":"k","\ua743":"k","\ua745":"k","\ua7a3":"k","\u24db":"l","\uff4c":"l","\u0140":"l","\u013a":"l","\u013e":"l","\u1e37":"l","\u1e39":"l","\u013c":"l","\u1e3d":"l","\u1e3b":"l","\u017f":"l","\u0142":"l","\u019a":"l","\u026b":"l","\u2c61":"l","\ua749":"l","\ua781":"l","\ua747":"l",
"\u01c9":"lj","\u24dc":"m","\uff4d":"m","\u1e3f":"m","\u1e41":"m","\u1e43":"m","\u0271":"m","\u026f":"m","\u24dd":"n","\uff4e":"n","\u01f9":"n","\u0144":"n","\u00f1":"n","\u1e45":"n","\u0148":"n","\u1e47":"n","\u0146":"n","\u1e4b":"n","\u1e49":"n","\u019e":"n","\u0272":"n","\u0149":"n","\ua791":"n","\ua7a5":"n","\u01cc":"nj","\u24de":"o","\uff4f":"o","\u00f2":"o","\u00f3":"o","\u00f4":"o","\u1ed3":"o","\u1ed1":"o","\u1ed7":"o","\u1ed5":"o","\u00f5":"o","\u1e4d":"o","\u022d":"o","\u1e4f":"o","\u014d":"o",
"\u1e51":"o","\u1e53":"o","\u014f":"o","\u022f":"o","\u0231":"o","\u00f6":"o","\u022b":"o","\u1ecf":"o","\u0151":"o","\u01d2":"o","\u020d":"o","\u020f":"o","\u01a1":"o","\u1edd":"o","\u1edb":"o","\u1ee1":"o","\u1edf":"o","\u1ee3":"o","\u1ecd":"o","\u1ed9":"o","\u01eb":"o","\u01ed":"o","\u00f8":"o","\u01ff":"o","\u0254":"o","\ua74b":"o","\ua74d":"o","\u0275":"o","\u01a3":"oi","\u0223":"ou","\ua74f":"oo","\u24df":"p","\uff50":"p","\u1e55":"p","\u1e57":"p","\u01a5":"p","\u1d7d":"p","\ua751":"p","\ua753":"p",
"\ua755":"p","\u24e0":"q","\uff51":"q","\u024b":"q","\ua757":"q","\ua759":"q","\u24e1":"r","\uff52":"r","\u0155":"r","\u1e59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1e5b":"r","\u1e5d":"r","\u0157":"r","\u1e5f":"r","\u024d":"r","\u027d":"r","\ua75b":"r","\ua7a7":"r","\ua783":"r","\u24e2":"s","\uff53":"s","\u00df":"s","\u015b":"s","\u1e65":"s","\u015d":"s","\u1e61":"s","\u0161":"s","\u1e67":"s","\u1e63":"s","\u1e69":"s","\u0219":"s","\u015f":"s","\u023f":"s","\ua7a9":"s","\ua785":"s","\u1e9b":"s",
"\u24e3":"t","\uff54":"t","\u1e6b":"t","\u1e97":"t","\u0165":"t","\u1e6d":"t","\u021b":"t","\u0163":"t","\u1e71":"t","\u1e6f":"t","\u0167":"t","\u01ad":"t","\u0288":"t","\u2c66":"t","\ua787":"t","\ua729":"tz","\u24e4":"u","\uff55":"u","\u00f9":"u","\u00fa":"u","\u00fb":"u","\u0169":"u","\u1e79":"u","\u016b":"u","\u1e7b":"u","\u016d":"u","\u00fc":"u","\u01dc":"u","\u01d8":"u","\u01d6":"u","\u01da":"u","\u1ee7":"u","\u016f":"u","\u0171":"u","\u01d4":"u","\u0215":"u","\u0217":"u","\u01b0":"u","\u1eeb":"u",
"\u1ee9":"u","\u1eef":"u","\u1eed":"u","\u1ef1":"u","\u1ee5":"u","\u1e73":"u","\u0173":"u","\u1e77":"u","\u1e75":"u","\u0289":"u","\u24e5":"v","\uff56":"v","\u1e7d":"v","\u1e7f":"v","\u028b":"v","\ua75f":"v","\u028c":"v","\ua761":"vy","\u24e6":"w","\uff57":"w","\u1e81":"w","\u1e83":"w","\u0175":"w","\u1e87":"w","\u1e85":"w","\u1e98":"w","\u1e89":"w","\u2c73":"w","\u24e7":"x","\uff58":"x","\u1e8b":"x","\u1e8d":"x","\u24e8":"y","\uff59":"y","\u1ef3":"y","\u00fd":"y","\u0177":"y","\u1ef9":"y","\u0233":"y",
"\u1e8f":"y","\u00ff":"y","\u1ef7":"y","\u1e99":"y","\u1ef5":"y","\u01b4":"y","\u024f":"y","\u1eff":"y","\u24e9":"z","\uff5a":"z","\u017a":"z","\u1e91":"z","\u017c":"z","\u017e":"z","\u1e93":"z","\u1e95":"z","\u01b6":"z","\u0225":"z","\u0240":"z","\u2c6c":"z","\ua763":"z"};s=e(document);var Q=1;A=function(){return Q++};s.on("mousemove",function(a){x.x=a.pageX;x.y=a.pageY});s=C(Object,{bind:function(a){var b=this;return function(){a.apply(b,arguments)}},init:function(a){var b,c;this.opts=a=this.prepareOpts(a);
this.id=a.id;void 0!==a.element.data("select2")&&null!==a.element.data("select2")&&a.element.data("select2").destroy();this.container=this.createContainer();this.containerId="s2id_"+(a.element.attr("id")||"autogen"+A());this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1");this.container.attr("id",this.containerId);var d=!1,g;this.body=function(){!1===d&&(g=a.element.closest("body"),d=!0);return g};z(this.container,this.opts.element,this.opts.adaptContainerCssClass);
this.container.attr("style",a.element.attr("style"));this.container.css(o(a.containerCss));this.container.addClass(o(a.containerCssClass));this.elementTabIndex=this.opts.element.attr("tabindex");this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",j);this.container.data("select2",this);this.dropdown=this.container.find(".select2-drop");z(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass);this.dropdown.addClass(o(a.dropdownCssClass));
this.dropdown.data("select2",this);this.dropdown.on("click",j);this.results=b=this.container.find(".select2-results");this.search=c=this.container.find("input.select2-input");this.resultsPage=this.queryCount=0;this.context=null;this.initContainer();this.container.on("click",j);this.results.on("mousemove",function(a){(void 0===x||x.x!==a.pageX||x.y!==a.pageY)&&e(a.target).trigger("mousemove-filtered",a)});this.dropdown.on("mousemove-filtered touchstart touchmove touchend",".select2-results",this.bind(this.highlightUnderEvent));
var h=this.results,l=H(80,function(a){h.trigger("scroll-debounced",a)});h.on("scroll",function(a){0<=k(a.target,h.get())&&l(a)});this.dropdown.on("scroll-debounced",".select2-results",this.bind(this.loadMoreIfNeeded));e(this.container).on("change",".select2-input",function(a){a.stopPropagation()});e(this.dropdown).on("change",".select2-input",function(a){a.stopPropagation()});e.fn.mousewheel&&b.mousewheel(function(a,c,d,g){c=b.scrollTop();0<g&&0>=c-g?(b.scrollTop(0),j(a)):0>g&&b.get(0).scrollHeight-
b.scrollTop()+g<=b.height()&&(b.scrollTop(b.get(0).scrollHeight-b.height()),j(a))});G(c);c.on("keyup-change input paste",this.bind(this.updateResults));c.on("focus",function(){c.addClass("select2-focused")});c.on("blur",function(){c.removeClass("select2-focused")});this.dropdown.on("mouseup",".select2-results",this.bind(function(a){0<e(a.target).closest(".select2-result-selectable").length&&(this.highlightUnderEvent(a),this.selectHighlighted(a))}));this.dropdown.on("click mouseup mousedown",function(a){a.stopPropagation()});
e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource());null!==a.maximumInputLength&&this.search.attr("maxlength",a.maximumInputLength);var i=a.element.prop("disabled");void 0===i&&(i=!1);this.enable(!i);i=a.element.prop("readonly");void 0===i&&(i=!1);this.readonly(i);if(!(i=F)){i=e("<div class='select2-measure-scrollbar'></div>");i.appendTo("body");var f={width:i.width()-i[0].clientWidth,height:i.height()-i[0].clientHeight};i.remove();i=f}F=i;this.autofocus=a.element.prop("autofocus");
a.element.prop("autofocus",!1);this.autofocus&&this.focus();this.nextSearchTerm=void 0},destroy:function(){var a=this.opts.element,b=a.data("select2");this.close();this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null);void 0!==b&&(b.container.remove(),b.dropdown.remove(),a.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?a.attr({tabindex:this.elementTabIndex}):a.removeAttr("tabindex"),a.show())},
optionToData:function(a){if(a.is("option"))return{id:a.prop("value"),text:a.text(),element:a.get(),css:a.attr("class"),disabled:a.prop("disabled"),locked:m(a.attr("locked"),"locked")||m(a.data("locked"),!0)};if(a.is("optgroup"))return{text:a.attr("label"),children:[],element:a.get(),css:a.attr("class")}},prepareOpts:function(a){var b,c,d,g=this;b=a.element;"select"===b.get(0).tagName.toLowerCase()&&(this.select=c=a.element);c&&e.each("id multiple ajax query createSearchChoice initSelection data tags".split(" "),
function(){if(this in a)throw Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.");});a=e.extend({},{populateResults:function(b,c,d){var f,t=this.opts.id;f=function(b,c,h){var l,j,m,k,o,u,q,b=a.sortResults(b,c,d);l=0;for(j=b.length;l<j;l=l+1){m=b[l];o=m.disabled===true;k=!o&&t(m)!==void 0;u=m.children&&m.children.length>0;q=e("<li></li>");q.addClass("select2-results-dept-"+h);q.addClass("select2-result");q.addClass(k?"select2-result-selectable":"select2-result-unselectable");
o&&q.addClass("select2-disabled");u&&q.addClass("select2-result-with-children");q.addClass(g.opts.formatResultCssClass(m));k=e(document.createElement("div"));k.addClass("select2-result-label");o=a.formatResult(m,k,d,g.opts.escapeMarkup);o!==void 0&&k.html(o);q.append(k);if(u){u=e("<ul></ul>");u.addClass("select2-result-sub");f(m.children,u,h+1);q.append(u)}q.data("select2-data",m);c.append(q)}};f(c,b,0)}},e.fn.select2.defaults,a);"function"!==typeof a.id&&(d=a.id,a.id=function(a){return a[d]});if(e.isArray(a.element.data("select2Tags"))){if("tags"in
a)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+a.element.attr("id");a.tags=a.element.data("select2Tags")}if(c)a.query=this.bind(function(a){var c={results:[],more:false},d=a.term,e,f,p;p=function(b,c){var e;if(b.is("option"))a.matcher(d,b.text(),b)&&c.push(g.optionToData(b));else if(b.is("optgroup")){e=g.optionToData(b);b.children().each2(function(a,b){p(b,e.children)});e.children.length>0&&c.push(e)}};e=b.children();if(this.getPlaceholder()!==void 0&&
e.length>0)(f=this.getPlaceholderOption())&&(e=e.not(f));e.each2(function(a,b){p(b,c.results)});a.callback(c)}),a.id=function(a){return a.id},a.formatResultCssClass=function(a){return a.css};else if(!("query"in a))if("ajax"in a){if((c=a.element.data("ajax-url"))&&0<c.length)a.ajax.url=c;a.query=K.call(a.element,a.ajax)}else if("data"in a)a.query=L(a.data);else if("tags"in a&&(a.query=M(a.tags),void 0===a.createSearchChoice&&(a.createSearchChoice=function(a){return{id:e.trim(a),text:e.trim(a)}}),void 0===
a.initSelection))a.initSelection=function(b,c){var d=[];e(B(b.val(),a.separator)).each(function(){var b={id:this,text:this},c=a.tags;e.isFunction(c)&&(c=c());e(c).each(function(){if(m(this.id,b.id)){b=this;return false}});d.push(b)});c(d)};if("function"!==typeof a.query)throw"query function not defined for Select2 "+a.element.attr("id");return a},monitorSource:function(){var a=this.opts.element,b,c;a.on("change.select2",this.bind(function(){!0!==this.opts.element.data("select2-change-triggered")&&
this.initSelection()}));b=this.bind(function(){var b=a.prop("disabled");void 0===b&&(b=!1);this.enable(!b);b=a.prop("readonly");void 0===b&&(b=!1);this.readonly(b);z(this.container,this.opts.element,this.opts.adaptContainerCssClass);this.container.addClass(o(this.opts.containerCssClass));z(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass);this.dropdown.addClass(o(this.opts.dropdownCssClass))});a.on("propertychange.select2",b);void 0===this.mutationCallback&&(this.mutationCallback=function(a){a.forEach(b)});
c=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;void 0!==c&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new c(this.mutationCallback),this.propertyObserver.observe(a.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(a){a=e.Event("select2-selecting",{val:this.id(a),object:a});this.opts.element.trigger(a);return!a.isDefaultPrevented()},triggerChange:function(a){a=a||{};a=e.extend({},a,{type:"change",
val:this.val()});this.opts.element.data("select2-change-triggered",!0);this.opts.element.trigger(a);this.opts.element.data("select2-change-triggered",!1);this.opts.element.click();this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return!0===this.enabledInterface},enableInterface:function(){var a=this._enabled&&!this._readonly;if(a===this.enabledInterface)return!1;this.container.toggleClass("select2-container-disabled",!a);this.close();this.enabledInterface=a;return!0},
enable:function(a){void 0===a&&(a=!0);this._enabled!==a&&(this._enabled=a,this.opts.element.prop("disabled",!a),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(a){void 0===a&&(a=!1);if(this._readonly===a)return!1;this._readonly=a;this.opts.element.prop("readonly",a);this.enableInterface();return!0},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var a=this.dropdown,b=this.container.offset(),c=this.container.outerHeight(!1),
d=this.container.outerWidth(!1),g=a.outerHeight(!1),h=e(window),f=h.width(),i=h.height(),n=h.scrollLeft()+f,j=h.scrollTop()+i,c=b.top+c,p=b.left,j=c+g<=j,m=b.top-g>=this.body().scrollTop(),k=a.outerWidth(!1),r=p+k<=n,s;a.hasClass("select2-drop-above")?(g=!0,!m&&j&&(s=!0,g=!1)):(g=!1,!j&&m&&(g=s=!0));s&&(a.hide(),b=this.container.offset(),c=this.container.outerHeight(!1),d=this.container.outerWidth(!1),a.outerHeight(!1),n=h.scrollLeft()+f,h.scrollTop(),c=b.top+c,p=b.left,k=a.outerWidth(!1),r=p+k<=
n,a.show());this.opts.dropdownAutoWidth?(h=e(".select2-results",a)[0],a.addClass("select2-drop-auto-width"),a.css("width",""),k=a.outerWidth(!1)+(h.scrollHeight===h.clientHeight?0:F.width),k>d?d=k:k=d,r=p+k<=n):this.container.removeClass("select2-drop-auto-width");"static"!==this.body().css("position")&&(n=this.body().offset(),c-=n.top,p-=n.left);r||(p=b.left+d-k);d={left:p,width:d};g?(d.bottom=i-b.top,d.top="auto",this.container.addClass("select2-drop-above"),a.addClass("select2-drop-above")):(d.top=
c,d.bottom="auto",this.container.removeClass("select2-drop-above"),a.removeClass("select2-drop-above"));d=e.extend(d,o(this.opts.dropdownCss));a.css(d)},shouldOpen:function(){var a;if(this.opened()||!1===this._enabled||!0===this._readonly)return!1;a=e.Event("select2-opening");this.opts.element.trigger(a);return!a.isDefaultPrevented()},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above");this.dropdown.removeClass("select2-drop-above")},open:function(){if(!this.shouldOpen())return!1;
this.opening();return!0},opening:function(){var a=this.containerId,b="scroll."+a,c="resize."+a,d="orientationchange."+a;this.container.addClass("select2-dropdown-open").addClass("select2-container-active");this.clearDropdownAlignmentPreference();this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body());a=e("#select2-drop-mask");0==a.length&&(a=e(document.createElement("div")),a.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),a.hide(),a.appendTo(this.body()),
a.on("mousedown touchstart click",function(a){var b=e("#select2-drop");0<b.length&&(b=b.data("select2"),b.opts.selectOnBlur&&b.selectHighlighted({noFocus:!0}),b.close({focus:!0}),a.preventDefault(),a.stopPropagation())}));this.dropdown.prev()[0]!==a[0]&&this.dropdown.before(a);e("#select2-drop").removeAttr("id");this.dropdown.attr("id","select2-drop");a.show();this.positionDropdown();this.dropdown.show();this.positionDropdown();this.dropdown.addClass("select2-drop-active");var g=this;this.container.parents().add(window).each(function(){e(this).on(c+
" "+b+" "+d,function(){g.positionDropdown()})})},close:function(){if(this.opened()){var a=this.containerId,b="scroll."+a,c="resize."+a,d="orientationchange."+a;this.container.parents().add(window).each(function(){e(this).off(b).off(c).off(d)});this.clearDropdownAlignmentPreference();e("#select2-drop-mask").hide();this.dropdown.removeAttr("id");this.dropdown.hide();this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active");this.results.empty();this.clearSearch();this.search.removeClass("select2-active");
this.opts.element.trigger(e.Event("select2-close"))}},externalSearch:function(a){this.open();this.search.val(a);this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return o(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var a=this.results,b,c,d,g;c=this.highlight();0>c||(0==c?a.scrollTop(0):(b=this.findHighlightableChoices().find(".select2-result-label"),d=e(b[c]),g=d.offset().top+d.outerHeight(!0),c===b.length-1&&(b=a.find("li.select2-more-results"),
0<b.length&&(g=b.offset().top+b.outerHeight(!0))),b=a.offset().top+a.outerHeight(!0),g>b&&a.scrollTop(a.scrollTop()+(g-b)),g=d.offset().top-a.offset().top,0>g&&"none"!=d.css("display")&&a.scrollTop(a.scrollTop()+g)))},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled, .select2-selected)")},moveHighlight:function(a){for(var b=this.findHighlightableChoices(),c=this.highlight();-1<c&&c<b.length;){var c=c+a,d=e(b[c]);if(d.hasClass("select2-result-selectable")&&
!d.hasClass("select2-disabled")&&!d.hasClass("select2-selected")){this.highlight(c);break}}},highlight:function(a){var b=this.findHighlightableChoices();if(0===arguments.length)return k(b.filter(".select2-highlighted")[0],b.get());a>=b.length&&(a=b.length-1);0>a&&(a=0);this.removeHighlight();b=e(b[a]);b.addClass("select2-highlighted");this.ensureHighlightVisible();(b=b.data("select2-data"))&&this.opts.element.trigger({type:"select2-highlight",val:this.id(b),choice:b})},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},
countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(a){a=e(a.target).closest(".select2-result-selectable");if(0<a.length&&!a.is(".select2-highlighted")){var b=this.findHighlightableChoices();this.highlight(b.index(a))}else 0==a.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var a=this.results,b=a.find("li.select2-more-results"),c,d=this.resultsPage+1,e=this,h=this.search.val(),f=this.context;0!==b.length&&(c=b.offset().top-a.offset().top-
a.height(),c<=this.opts.loadMorePadding&&(b.addClass("select2-active"),this.opts.query({element:this.opts.element,term:h,page:d,context:f,matcher:this.opts.matcher,callback:this.bind(function(c){e.opened()&&(e.opts.populateResults.call(this,a,c.results,{term:h,page:d,context:f}),e.postprocessResults(c,!1,!1),!0===c.more?(b.detach().appendTo(a).text(e.opts.formatLoadMore(d+1)),window.setTimeout(function(){e.loadMoreIfNeeded()},10)):b.remove(),e.positionDropdown(),e.resultsPage=d,e.context=c.context,
this.opts.element.trigger({type:"select2-loaded",items:c}))})})))},tokenize:function(){},updateResults:function(a){function b(){d.removeClass("select2-active");i.positionDropdown()}function c(a){g.html(a);b()}var d=this.search,g=this.results,h=this.opts,f,i=this;f=d.val();var n=e.data(this.container,"select2-last-term"),j;if(!(!0!==a&&n&&m(f,n))&&(e.data(this.container,"select2-last-term",f),!(!0!==a&&(!1===this.showSearchInput||!this.opened())))){j=++this.queryCount;n=this.getMaximumSelectionSize();
if(1<=n&&(f=this.data(),e.isArray(f)&&f.length>=n&&r(h.formatSelectionTooBig,"formatSelectionTooBig"))){c("<li class='select2-selection-limit'>"+h.formatSelectionTooBig(n)+"</li>");return}d.val().length<h.minimumInputLength?(r(h.formatInputTooShort,"formatInputTooShort")?c("<li class='select2-no-results'>"+h.formatInputTooShort(d.val(),h.minimumInputLength)+"</li>"):c(""),a&&this.showSearch&&this.showSearch(!0)):h.maximumInputLength&&d.val().length>h.maximumInputLength?r(h.formatInputTooLong,"formatInputTooLong")?
c("<li class='select2-no-results'>"+h.formatInputTooLong(d.val(),h.maximumInputLength)+"</li>"):c(""):(h.formatSearching&&0===this.findHighlightableChoices().length&&c("<li class='select2-searching'>"+h.formatSearching()+"</li>"),d.addClass("select2-active"),this.removeHighlight(),f=this.tokenize(),void 0!=f&&null!=f&&d.val(f),this.resultsPage=1,h.query({element:h.element,term:d.val(),page:this.resultsPage,context:null,matcher:h.matcher,callback:this.bind(function(f){var l;j==this.queryCount&&(this.opened()?
(this.context=void 0===f.context?null:f.context,this.opts.createSearchChoice&&""!==d.val()&&(l=this.opts.createSearchChoice.call(i,d.val(),f.results),void 0!==l&&null!==l&&void 0!==i.id(l)&&null!==i.id(l)&&0===e(f.results).filter(function(){return m(i.id(this),i.id(l))}).length&&f.results.unshift(l)),0===f.results.length&&r(h.formatNoMatches,"formatNoMatches"))?c("<li class='select2-no-results'>"+h.formatNoMatches(d.val())+"</li>"):(g.empty(),i.opts.populateResults.call(this,g,f.results,{term:d.val(),
page:this.resultsPage,context:null}),!0===f.more&&r(h.formatLoadMore,"formatLoadMore")&&(g.append("<li class='select2-more-results'>"+i.opts.escapeMarkup(h.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout(function(){i.loadMoreIfNeeded()},10)),this.postprocessResults(f,a),b(),this.opts.element.trigger({type:"select2-loaded",items:f})):this.search.removeClass("select2-active"))})}))}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0});
this.close();this.container.removeClass("select2-container-active");this.search[0]===document.activeElement&&this.search.blur();this.clearSearch();this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){var a=this.search;a[0]!==document.activeElement&&window.setTimeout(function(){var b=a[0],c=a.val().length;a.focus();a.is(":visible")&&b===document.activeElement&&(b.setSelectionRange?b.setSelectionRange(c,c):b.createTextRange&&(b=b.createTextRange(),
b.collapse(!1),b.select()))},0)},selectHighlighted:function(a){var b=this.highlight(),c=this.results.find(".select2-highlighted").closest(".select2-result").data("select2-data");c?(this.highlight(b),this.onSelect(c,a)):a&&a.noFocus&&this.close()},getPlaceholder:function(){var a;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||(void 0!==(a=this.getPlaceholderOption())?a.text():void 0)},getPlaceholderOption:function(){if(this.select){var a=
this.select.children("option").first();if(void 0!==this.opts.placeholderOption)return"first"===this.opts.placeholderOption&&a||"function"===typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===a.text()&&""===a.val())return a}},initContainerWidth:function(){var a=function(){var a,c,d,g;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||
"resolve"===this.opts.width){a=this.opts.element.attr("style");if(void 0!==a){a=a.split(";");d=0;for(g=a.length;d<g;d+=1)if(c=a[d].replace(/\s/g,""),c=c.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==c&&1<=c.length)return c[1]}return"resolve"===this.opts.width?(a=this.opts.element.css("width"),0<a.indexOf("%")?a:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}.call(this);
null!==a&&this.container.css("width",a)}});D=C(s,{createContainer:function(){return e(document.createElement("div")).attr({"class":"select2-container"}).html("<a href='javascript:void(0)' onclick='return false;' class='select2-choice' tabindex='-1'>   <span class='select2-chosen'>&nbsp;</span><abbr class='select2-search-choice-close'></abbr>   <span class='select2-arrow'><b></b></span></a><input class='select2-focusser select2-offscreen' type='text'/><div class='select2-drop select2-display-none'>   <div class='select2-search'>       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'/>   </div>   <ul class='select2-results'>   </ul></div>")},
enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var a,b;0<=this.opts.minimumResultsForSearch&&this.showSearch(!0);this.parent.opening.apply(this,arguments);!1!==this.showSearchInput&&this.search.val(this.focusser.val());this.search.focus();a=this.search.get(0);a.createTextRange?(a=a.createTextRange(),a.collapse(!1),a.select()):a.setSelectionRange&&(b=this.search.val().length,a.setSelectionRange(b,
b));""===this.search.val()&&void 0!=this.nextSearchTerm&&(this.search.val(this.nextSearchTerm),this.search.select());this.focusser.prop("disabled",!0).val("");this.updateResults(!0);this.opts.element.trigger(e.Event("select2-open"))},close:function(a){this.opened()&&(this.parent.close.apply(this,arguments),a=a||{focus:!0},this.focusser.removeAttr("disabled"),a.focus&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.removeAttr("disabled"),this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},
cancel:function(){this.parent.cancel.apply(this,arguments);this.focusser.removeAttr("disabled");this.focusser.focus()},destroy:function(){e("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id"));this.parent.destroy.apply(this,arguments)},initContainer:function(){var a,b=this.container,c=this.dropdown;0>this.opts.minimumResultsForSearch?this.showSearch(!1):this.showSearch(!0);this.selection=a=b.find(".select2-choice");this.focusser=b.find(".select2-focusser");this.focusser.attr("id",
"s2id_autogen"+A());e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.focusser.attr("id"));this.focusser.attr("tabindex",this.elementTabIndex);this.search.on("keydown",this.bind(function(a){if(this.isInterfaceEnabled())if(a.which===f.PAGE_UP||a.which===f.PAGE_DOWN)j(a);else switch(a.which){case f.UP:case f.DOWN:this.moveHighlight(a.which===f.UP?-1:1);j(a);break;case f.ENTER:this.selectHighlighted();j(a);break;case f.TAB:this.selectHighlighted({noFocus:!0});break;case f.ESC:this.cancel(a),
j(a)}}));this.search.on("blur",this.bind(function(){document.activeElement===this.body().get(0)&&window.setTimeout(this.bind(function(){this.search.focus()}),0)}));this.focusser.on("keydown",this.bind(function(a){if(this.isInterfaceEnabled()&&!(a.which===f.TAB||f.isControl(a)||f.isFunctionKey(a)||a.which===f.ESC))if(!1===this.opts.openOnEnter&&a.which===f.ENTER)j(a);else if(a.which==f.DOWN||a.which==f.UP||a.which==f.ENTER&&this.opts.openOnEnter)!a.altKey&&(!a.ctrlKey&&!a.shiftKey&&!a.metaKey)&&(this.open(),
j(a));else if(a.which==f.DELETE||a.which==f.BACKSPACE)this.opts.allowClear&&this.clear(),j(a)}));G(this.focusser);this.focusser.on("keyup-change input",this.bind(function(a){0<=this.opts.minimumResultsForSearch&&(a.stopPropagation(),this.opened()||this.open())}));a.on("mousedown","abbr",this.bind(function(a){this.isInterfaceEnabled()&&(this.clear(),a.preventDefault(),a.stopImmediatePropagation(),this.close(),this.selection.focus())}));a.on("mousedown",this.bind(function(a){this.container.hasClass("select2-container-active")||
this.opts.element.trigger(e.Event("select2-focus"));this.opened()?this.close():this.isInterfaceEnabled()&&this.open();j(a)}));c.on("mousedown",this.bind(function(){this.search.focus()}));a.on("focus",this.bind(function(a){j(a)}));this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus"));this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),
this.opts.element.trigger(e.Event("select2-blur")))}));this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus"));this.container.addClass("select2-container-active")}));this.initContainerWidth();this.opts.element.addClass("select2-offscreen");this.setPlaceholder()},clear:function(a){var b=this.selection.data("select2-data");if(b){var c=e.Event("select2-clearing");this.opts.element.trigger(c);c.isDefaultPrevented()||
(c=this.getPlaceholderOption(),this.opts.element.val(c?c.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),!1!==a&&(this.opts.element.trigger({type:"select2-removed",val:this.id(b),choice:b}),this.triggerChange({removed:b})))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var a=this;this.opts.initSelection.call(null,this.opts.element,function(b){void 0!==
b&&null!==b&&(a.updateSelection(b),a.close(),a.setPlaceholder())})}},isPlaceholderOptionSelected:function(){var a;return!this.getPlaceholder()?!1:void 0!==(a=this.getPlaceholderOption())&&a.prop("selected")||""===this.opts.element.val()||void 0===this.opts.element.val()||null===this.opts.element.val()},prepareOpts:function(){var a=this.parent.prepareOpts.apply(this,arguments),b=this;"select"===a.element.get(0).tagName.toLowerCase()?a.initSelection=function(a,d){var e=a.find("option").filter(function(){return this.selected});
d(b.optionToData(e))}:"data"in a&&(a.initSelection=a.initSelection||function(b,d){var g=b.val(),f=null;a.query({matcher:function(b,c,d){(b=m(g,a.id(d)))&&(f=d);return b},callback:!e.isFunction(d)?e.noop:function(){d(f)}})});return a},getPlaceholder:function(){return this.select&&void 0===this.getPlaceholderOption()?void 0:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var a=this.getPlaceholder();this.isPlaceholderOptionSelected()&&void 0!==a&&!(this.select&&void 0===this.getPlaceholderOption())&&
(this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(a)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear"))},postprocessResults:function(a,b,c){var d=0,e=this;this.findHighlightableChoices().each2(function(a,b){if(m(e.id(b.data("select2-data")),e.opts.element.val()))return d=a,!1});!1!==c&&(!0===b&&0<=d?this.highlight(d):this.highlight(0));!0===b&&(b=this.opts.minimumResultsForSearch,0<=b&&this.showSearch(N(a.results)>=b))},showSearch:function(a){this.showSearchInput!==
a&&(this.showSearchInput=a,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!a),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!a),e(this.dropdown,this.container).toggleClass("select2-with-searchbox",a))},onSelect:function(a,b){if(this.triggerSelect(a)){var c=this.opts.element.val(),d=this.data();this.opts.element.val(this.id(a));this.updateSelection(a);this.opts.element.trigger({type:"select2-selected",val:this.id(a),choice:a});this.nextSearchTerm=
this.opts.nextSearchTerm(a,this.search.val());this.close();(!b||!b.noFocus)&&this.focusser.focus();m(c,this.id(a))||this.triggerChange({added:a,removed:d})}},updateSelection:function(a){var b=this.selection.find(".select2-chosen"),c;this.selection.data("select2-data",a);b.empty();null!==a&&(c=this.opts.formatSelection(a,b,this.opts.escapeMarkup));void 0!==c&&b.append(c);a=this.opts.formatSelectionCssClass(a,b);void 0!==a&&b.addClass(a);this.selection.removeClass("select2-default");this.opts.allowClear&&
void 0!==this.getPlaceholder()&&this.container.addClass("select2-allowclear")},val:function(){var a,b=!1,c=null,d=this,e=this.data();if(0===arguments.length)return this.opts.element.val();a=arguments[0];1<arguments.length&&(b=arguments[1]);if(this.select)this.select.val(a).find("option").filter(function(){return this.selected}).each2(function(a,b){c=d.optionToData(b);return!1}),this.updateSelection(c),this.setPlaceholder(),b&&this.triggerChange({added:c,removed:e});else if(!a&&0!==a)this.clear(b);
else{if(void 0===this.opts.initSelection)throw Error("cannot call val() if initSelection() is not defined");this.opts.element.val(a);this.opts.initSelection(this.opts.element,function(a){d.opts.element.val(!a?"":d.id(a));d.updateSelection(a);d.setPlaceholder();b&&d.triggerChange({added:a,removed:e})})}},clearSearch:function(){this.search.val("");this.focusser.val("")},data:function(a){var b,c=!1;if(0===arguments.length)return b=this.selection.data("select2-data"),void 0==b&&(b=null),b;1<arguments.length&&
(c=arguments[1]);a?(b=this.data(),this.opts.element.val(!a?"":this.id(a)),this.updateSelection(a),c&&this.triggerChange({added:a,removed:b})):this.clear(c)}});E=C(s,{createContainer:function(){return e(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html("<ul class='select2-choices'>  <li class='select2-search-field'>    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>  </li></ul><div class='select2-drop select2-drop-multi select2-display-none'>   <ul class='select2-results'>   </ul></div>")},
prepareOpts:function(){var a=this.parent.prepareOpts.apply(this,arguments),b=this;"select"===a.element.get(0).tagName.toLowerCase()?a.initSelection=function(a,d){var e=[];a.find("option").filter(function(){return this.selected}).each2(function(a,c){e.push(b.optionToData(c))});d(e)}:"data"in a&&(a.initSelection=a.initSelection||function(b,d){var g=B(b.val(),a.separator),f=[];a.query({matcher:function(b,c,d){(b=e.grep(g,function(b){return m(b,a.id(d))}).length)&&f.push(d);return b},callback:!e.isFunction(d)?
e.noop:function(){for(var b=[],c=0;c<g.length;c++)for(var e=g[c],j=0;j<f.length;j++){var k=f[j];if(m(e,a.id(k))){b.push(k);f.splice(j,1);break}}d(b)}})});return a},selectChoice:function(a){var b=this.container.find(".select2-search-choice-focus");if(!b.length||!(a&&a[0]==b[0]))b.length&&this.opts.element.trigger("choice-deselected",b),b.removeClass("select2-search-choice-focus"),a&&a.length&&(this.close(),a.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",a))},destroy:function(){e("label[for='"+
this.search.attr("id")+"']").attr("for",this.opts.element.attr("id"));this.parent.destroy.apply(this,arguments)},initContainer:function(){var a;this.searchContainer=this.container.find(".select2-search-field");this.selection=a=this.container.find(".select2-choices");var b=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",function(){b.search[0].focus();b.selectChoice(e(this))});this.search.attr("id","s2id_autogen"+A());e("label[for='"+this.opts.element.attr("id")+"']").attr("for",
this.search.attr("id"));this.search.on("input paste",this.bind(function(){this.isInterfaceEnabled()&&(this.opened()||this.open())}));this.search.attr("tabindex",this.elementTabIndex);this.keydowns=0;this.search.on("keydown",this.bind(function(b){var d,g;if(this.isInterfaceEnabled()){++this.keydowns;var h=a.find(".select2-search-choice-focus"),l=h.prev(".select2-search-choice:not(.select2-locked)"),i=h.next(".select2-search-choice:not(.select2-locked)");d=this.search;d=e(d)[0];var k=0;g=0;"selectionStart"in
d?(k=d.selectionStart,g=d.selectionEnd-k):"selection"in document&&(d.focus(),k=document.selection.createRange(),g=document.selection.createRange().text.length,k.moveStart("character",-d.value.length),k=k.text.length-g);d=k;if(h.length&&(b.which==f.LEFT||b.which==f.RIGHT||b.which==f.BACKSPACE||b.which==f.DELETE||b.which==f.ENTER))g=h,b.which==f.LEFT&&l.length?g=l:b.which==f.RIGHT?g=i.length?i:null:b.which===f.BACKSPACE?(this.unselect(h.first()),this.search.width(10),g=l.length?l:i):b.which==f.DELETE?
(this.unselect(h.first()),this.search.width(10),g=i.length?i:null):b.which==f.ENTER&&(g=null),this.selectChoice(g),j(b),(!g||!g.length)&&this.open();else if((b.which===f.BACKSPACE&&1==this.keydowns||b.which==f.LEFT)&&0==d&&!g)this.selectChoice(a.find(".select2-search-choice:not(.select2-locked)").last()),j(b);else{this.selectChoice(null);if(this.opened())switch(b.which){case f.UP:case f.DOWN:this.moveHighlight(b.which===f.UP?-1:1);j(b);return;case f.ENTER:this.selectHighlighted();j(b);return;case f.TAB:this.selectHighlighted({noFocus:!0});
this.close();return;case f.ESC:this.cancel(b);j(b);return}b.which===f.TAB||f.isControl(b)||f.isFunctionKey(b)||b.which===f.BACKSPACE||b.which===f.ESC||b.which===f.ENTER&&(!1===this.opts.openOnEnter||b.altKey||b.ctrlKey||b.shiftKey||b.metaKey)||(this.open(),(b.which===f.PAGE_UP||b.which===f.PAGE_DOWN)&&j(b),b.which===f.ENTER&&j(b))}}}));this.search.on("keyup",this.bind(function(){this.keydowns=0;this.resizeSearch()}));this.search.on("blur",this.bind(function(a){this.container.removeClass("select2-container-active");
this.search.removeClass("select2-focused");this.selectChoice(null);this.opened()||this.clearSearch();a.stopImmediatePropagation();this.opts.element.trigger(e.Event("select2-blur"))}));this.container.on("click",".select2-choices",this.bind(function(a){this.isInterfaceEnabled()&&!(0<e(a.target).closest(".select2-search-choice").length)&&(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.open(),
this.focusSearch(),a.preventDefault())}));this.container.on("focus",".select2-choices",this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())}));this.initContainerWidth();this.opts.element.addClass("select2-offscreen");this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,
arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch());if(this.select||""!==this.opts.element.val()){var a=this;this.opts.initSelection.call(null,this.opts.element,function(b){if(b!==void 0&&b!==null){a.updateSelection(b);a.close();a.clearSearch()}})}},clearSearch:function(){var a=this.getPlaceholder(),b=this.getMaxSearchWidth();void 0!==a&&
0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(a).addClass("select2-default"),this.search.width(0<b?b:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder();this.resizeSearch();this.parent.opening.apply(this,arguments);this.focusSearch();this.updateResults(!0);this.search.focus();this.opts.element.trigger(e.Event("select2-open"))},
close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close();this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(a){var b=[],c=[],d=this;e(a).each(function(){0>k(d.id(this),b)&&(b.push(d.id(this)),c.push(this))});a=c;this.selection.find(".select2-search-choice").remove();e(a).each(function(){d.addSelectedChoice(this)});d.postprocessResults()},tokenize:function(){var a=this.search.val(),a=this.opts.tokenizer.call(this,
a,this.data(),this.bind(this.onSelect),this.opts);null!=a&&void 0!=a&&(this.search.val(a),0<a.length&&this.open())},onSelect:function(a,b){this.triggerSelect(a)&&(this.addSelectedChoice(a),this.opts.element.trigger({type:"selected",val:this.id(a),choice:a}),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(a,!1,!0===this.opts.closeOnSelect),this.opts.closeOnSelect?(this.close(),this.search.width(10)):0<this.countSelectableResults()?(this.search.width(10),this.resizeSearch(),0<this.getMaximumSelectionSize()&&
this.val().length>=this.getMaximumSelectionSize()&&this.updateResults(!0),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:a}),(!b||!b.noFocus)&&this.focusSearch())},cancel:function(){this.close();this.focusSearch()},addSelectedChoice:function(a){var b=!a.locked,c=e("<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"),d=e("<li class='select2-search-choice select2-locked'><div></div></li>"),
c=b?c:d,d=this.id(a),f=this.getVal(),h;h=this.opts.formatSelection(a,c.find("div"),this.opts.escapeMarkup);void 0!=h&&c.find("div").replaceWith("<div>"+h+"</div>");h=this.opts.formatSelectionCssClass(a,c.find("div"));void 0!=h&&c.addClass(h);if(b)c.find(".select2-search-choice-close").on("mousedown",j).on("click dblclick",this.bind(function(a){this.isInterfaceEnabled()&&(e(a.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(e(a.target));this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");
this.close();this.focusSearch()})).dequeue(),j(a))})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))}));c.data("select2-data",a);c.insertBefore(this.searchContainer);f.push(d);this.setVal(f)},unselect:function(a){var b=this.getVal(),c,d,a=a.closest(".select2-search-choice");if(0===a.length)throw"Invalid argument: "+a+". Must be .select2-search-choice";if(c=a.data("select2-data")){for(;0<=
(d=k(this.id(c),b));)b.splice(d,1),this.setVal(b),this.select&&this.postprocessResults();b=e.Event("select2-removing");b.val=this.id(c);b.choice=c;this.opts.element.trigger(b);b.isDefaultPrevented()||(a.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(c),choice:c}),this.triggerChange({removed:c}))}},postprocessResults:function(a,b,c){var d=this.getVal(),b=this.results.find(".select2-result"),e=this.results.find(".select2-result-with-children"),f=this;b.each2(function(a,b){var c=
f.id(b.data("select2-data"));0<=k(c,d)&&(b.addClass("select2-selected"),b.find(".select2-result-selectable").addClass("select2-selected"))});e.each2(function(a,b){!b.is(".select2-result-selectable")&&0===b.find(".select2-result-selectable:not(.select2-selected)").length&&b.addClass("select2-selected")});-1==this.highlight()&&!1!==c&&f.highlight(0);!this.opts.createSearchChoice&&0<!b.filter(".select2-result:not(.select2-selected)").length&&(!a||a&&!a.more&&0===this.results.find(".select2-no-results").length)&&
r(f.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+f.opts.formatNoMatches(f.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-(this.search.outerWidth(!1)-this.search.width())},resizeSearch:function(){var a,b,c,d,f=this.search.outerWidth(!1)-this.search.width();a=this.search;v||(c=a[0].currentStyle||window.getComputedStyle(a[0],null),v=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",
display:"none",fontSize:c.fontSize,fontFamily:c.fontFamily,fontStyle:c.fontStyle,fontWeight:c.fontWeight,letterSpacing:c.letterSpacing,textTransform:c.textTransform,whiteSpace:"nowrap"}),v.attr("class","select2-sizer"),e("body").append(v));v.text(a.val());a=v.width()+10;b=this.search.offset().left;c=this.selection.width();d=this.selection.offset().left;b=c-(b-d)-f;b<a&&(b=c-f);40>b&&(b=c-f);0>=b&&(b=a);this.search.width(Math.floor(b))},getVal:function(){var a;if(this.select)return a=this.select.val(),
null===a?[]:a;a=this.opts.element.val();return B(a,this.opts.separator)},setVal:function(a){var b;this.select?this.select.val(a):(b=[],e(a).each(function(){0>k(this,b)&&b.push(this)}),this.opts.element.val(0===b.length?"":b.join(this.opts.separator)))},buildChangeDetails:function(a,b){for(var b=b.slice(0),a=a.slice(0),c=0;c<b.length;c++)for(var d=0;d<a.length;d++)m(this.opts.id(b[c]),this.opts.id(a[d]))&&(b.splice(c,1),0<c&&c--,a.splice(d,1),d--);return{added:b,removed:a}},val:function(a,b){var c,
d=this;if(0===arguments.length)return this.getVal();c=this.data();c.length||(c=[]);if(!a&&0!==a)this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),b&&this.triggerChange({added:this.data(),removed:c});else{this.setVal(a);if(this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),b&&this.triggerChange(this.buildChangeDetails(c,this.data()));else{if(void 0===this.opts.initSelection)throw Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,
function(a){var f=e.map(a,d.id);d.setVal(f);d.updateSelection(a);d.clearSearch();b&&d.triggerChange(d.buildChangeDetails(c,d.data()))})}this.clearSearch()}},onSortStart:function(){if(this.select)throw Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0);this.searchContainer.hide()},onSortEnd:function(){var a=[],b=this;this.searchContainer.show();this.searchContainer.appendTo(this.searchContainer.parent());this.resizeSearch();
this.selection.find(".select2-search-choice").each(function(){a.push(b.opts.id(e(this).data("select2-data")))});this.setVal(a);this.triggerChange()},data:function(a,b){var c=this,d,f;if(0===arguments.length)return this.selection.find(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get();f=this.data();a||(a=[]);d=e.map(a,function(a){return c.opts.id(a)});this.setVal(d);this.updateSelection(a);this.clearSearch();b&&this.triggerChange(this.buildChangeDetails(f,this.data()))}});
e.fn.select2=function(){var a=Array.prototype.slice.call(arguments,0),b,c,d,f,h,j="val destroy opened open close focus isFocused container dropdown onSortStart onSortEnd enable disable readonly positionDropdown data search".split(" "),i=["opened","isFocused","container","dropdown"],m=["val","data"],o={search:"externalSearch"};this.each(function(){if(0===a.length||"object"===typeof a[0])b=0===a.length?{}:e.extend({},a[0]),b.element=e(this),"select"===b.element.get(0).tagName.toLowerCase()?h=b.element.prop("multiple"):
(h=b.multiple||!1,"tags"in b&&(b.multiple=h=!0)),c=h?new E:new D,c.init(b);else if("string"===typeof a[0]){if(0>k(a[0],j))throw"Unknown method: "+a[0];f=void 0;c=e(this).data("select2");if(void 0!==c&&(d=a[0],"container"===d?f=c.container:"dropdown"===d?f=c.dropdown:(o[d]&&(d=o[d]),f=c[d].apply(c,a.slice(1))),0<=k(a[0],i)||k(a[0],m)&&1==a.length))return!1}else throw"Invalid arguments to select2 plugin: "+a;});return void 0===f?this:f};e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,
openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(a,b,c,d){b=[];I(a.text,c.term,b,d);return b.join("")},formatSelection:function(a,b,c){return a?c(a.text):void 0},sortResults:function(a){return a},formatResultCssClass:function(){},formatSelectionCssClass:function(){},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(a,b){var c=b-a.length;return"Please enter "+c+" more character"+(1==c?"":"s")},formatInputTooLong:function(a,
b){var c=a.length-b;return"Please delete "+c+" character"+(1==c?"":"s")},formatSelectionTooBig:function(a){return"You can only select "+a+" item"+(1==a?"":"s")},formatLoadMore:function(){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(a){return a.id},matcher:function(a,b){return 0<=w(""+b).toUpperCase().indexOf(w(""+a).toUpperCase())},separator:",",tokenSeparators:[],
tokenizer:P,escapeMarkup:J,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(a){return a},adaptDropdownCssClass:function(){return null},nextSearchTerm:function(){}};e.fn.select2.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:!1,dataType:"json"}};window.Select2={query:{ajax:K,local:L,tags:M},util:{debounce:H,markMatch:I,escapeMarkup:J,stripDiacritics:w},"class":{"abstract":s,single:D,multi:E}}}return{}}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-select2', location = 'node_modules/@atlassian/aui/src/js/aui/select2.js' */
("undefined"===typeof window?global:window).__0d8267f32c62ec811936d03ae0ef7267=function(){"use strict";var b=__02fa0d2334b5d2f9701871403ba9d89a,d=b&&b.__esModule?b:{"default":b};__541108ffa7d92ccfa7bbf8536d20dbb0;var e=d.default.fn.select2;d.default.fn.auiSelect2=function(b){var c;if(d.default.isPlainObject(b)){var a=d.default.extend({},b);c=a.hasAvatar?" aui-has-avatar":"";a.containerCssClass="aui-select2-container"+c+(a.containerCssClass?" "+a.containerCssClass:"");a.dropdownCssClass="aui-select2-drop aui-dropdown2 aui-style-default"+
c+(a.dropdownCssClass?" "+a.dropdownCssClass:"");c=Array.prototype.slice.call(arguments,1);c.unshift(a)}else c=arguments.length?arguments:[{containerCssClass:"aui-select2-container",dropdownCssClass:"aui-select2-drop aui-dropdown2 aui-style-default"}];return e.apply(this,c)};return{}}.call(this);;
;
/* module-key = 'com.dolby.atlassian.jira.jirasu:launch-su-js', location = '/js/launchsu.js' */
console.log("SU launch.js loaded");function suHello(){alert("saying hello from the script")}function launchSuDialog(){var a=AJS.params.baseURL;AJS.$.get(a+"/rest/jirasu/latest/api/remoteDialog/showCondition",function(b){if(b=="ok"){popupSuDialog()}else{console.log("SU: no, due to: "+b)}})}function popupSuDialog(){var d=AJS.params.baseURL;var e=AJS.$("meta[name=atlassian-token]").attr("content");if(""+e=="undefined"){e=AJS.$("meta[name=atl_token]").attr("content")}AJS.$("#su-popup-dialog").remove();var b=new AJS.Dialog({width:400,height:200,id:"su-popup-dialog",closeOnOutsideClick:false});b.addHeader("SU - Be the user you seek!");var c="<form class='aui'>";c=c+"<input type='hidden' id='su-userpicker' style='width:250px' class='input-xlarge' />";c=c+"</form>";b.addPanel("User Picker",c,"panel-body");b.addButton("Submit",function(f){},"su-popup-button");b.addButton("Close",function(f){f.hide();AJS.$("#su-popup-dialog").remove()},"su-popup-cancel-button");b.show();var a=d+"/rest/api/2/user/picker";AJS.$("#su-userpicker").auiSelect2({placeholder:"Select a user",minimumInputLength:2,ajax:{url:a,placeholder:"Search for a user",dataType:"json",minimumInputLength:1,data:function(f,g){return{query:f,page_limit:10,}},results:function(g,f){return{results:g.users,text:function(h){return h.name},id:function(h){return h.key}}}},formatResult:function(g,f){return g.name},formatSelection:function(f){return f.name},id:function(f){return f.key}});AJS.tabs.setup();AJS.$(".su-popup-button").click(function(g){var f=AJS.$("#su-userpicker").val();window.location.href=d+"/user/JiraSU.jspa?name="+f+"&atl_token="+e;return false})};;
;
/* module-key = 'com.atlassian.whisper.atlassian-whisper-plugin:atlassian-whisper-bootstrap', location = '/js/bootstrap-init.js' */
require(["atlassian-whisper/bootstrap"],function(a){a()});;
;
/* module-key = 'com.atlassian.whisper.atlassian-whisper-plugin:atlassian-whisper-bootstrap', location = '/js/bootstrap.js' */
define("atlassian-whisper/bootstrap",["wrm/require"],function(a){return function(){var c=require("wrm/data").claim("com.atlassian.whisper.atlassian-whisper-plugin:atlassian-whisper-bootstrap.WhisperData");if(!c||c.hasMessages!==true){return}var b=function(){try{localStorage.setItem("hermes.config.delivery-url",AJS.contextPath()+"/rest/whisper/1/messages");localStorage.setItem("hermes.config.store-url",AJS.contextPath()+"/rest/whisper/1/properties")}catch(d){return}require(["atlassian-whisper/hermes-init"],function(e){e(c)},undefined,c.syncInit)};if(c.syncInit){b()}else{AJS.$(function(){a("wr!com.atlassian.whisper.atlassian-whisper-plugin:atlassian-whisper-hermes",b)})}}});;
;
/* module-key = 'com.atlassian.administration.atlassian-admin-quicksearch-jira:admin-quicksearch-webresources', location = 'com/atlassian/administration/quicksearch/jira/js/adminQuickNav.js' */
/**
 * Shifter group for admin search
 */
require([
    'jquery',
    'underscore',
    'jira/ajs/ajax/smart-ajax',
    'jira/shifter',
    'wrm/context-path'
], function (jQuery,
             _,
             SmartAjax,
             Shifter,
             contextPath) {
    Shifter.register(function () {
        var suggestionsDeferred = jQuery.Deferred();

        function formatItem(item) {
            return {
                label: item.label,
                value: item.linkUrl,
                keywords: item.aliases
            };
        }

        function getItemsInSection(section) {
            return _.map(section.items, formatItem).concat(_.map(section.sections, getItemsInSection));
        }

        function formatResponse(data) {
            return _.flatten(getItemsInSection(data));
        }

        SmartAjax.makeRequest({
            dataType: 'json',
            url: contextPath() + '/rest/adminquicksearch/latest/links/default'
        })
            .pipe(formatResponse)
            .done(function (suggestions) {
                suggestionsDeferred.resolve(suggestions);
            })
            .fail(function () {
                suggestionsDeferred.reject();
            });

        return {
            id: 'admin',
            name: "Administration",
            weight: 500,
            getSuggestions: function () {
                return suggestionsDeferred;
            },
            onSelection: function (value) {
                window.location = value;
                return jQuery.Deferred();
            }
        };
    });
});
;
;
/* module-key = 'com.atlassian.plugins.browser.metrics.browser-metrics-plugin:api', location = 'probe.js' */
!function(){var n,t,e,r,i,o,u,a,c,s,f,l,h,y,d,p,v;n=function(){return window}(),t=function(n){return!(!n.performance||!n.performance.now)}(n),e=[],r=function(n){return function(t){n.unshift({addReporter:t})}}(e),i=function(n){return function(t){for(;n.length;)t(n.splice(0,1)[0]);n.unshift=t,n.push=t}}(e),o=function(n,t){return function(e){n.push({end:{key:e.key,timestamp:t.performance.now()}})}}(e,n),u=function(n){return n.document}(n),a=function(n){return n.Promise}(n),c=function(){function n(){this._={}}var t=function(e){var r=e[0],i=e[1];i instanceof n?e.length>=3?Object.keys(i._).forEach(function(n){t([r,i._[n],n].concat(e.slice(2)))}):Object.keys(i._).forEach(function(n){t([r,i._[n],n])}):Array.isArray(i)&&r.apply(null,[i].concat(e.slice(2)))};n.prototype.forEach=function(n){t([n,this])},n.prototype.add=function(){for(var t=this,e=null,r=null,i=0;i<arguments.length;i++){if(r=arguments[i],i===arguments.length-1&&Array.isArray(t)){t.push(r);break}i<arguments.length-2&&!t._.hasOwnProperty(r)?t._[r]=new n:i!==arguments.length-2||t._.hasOwnProperty(r)||(t._[r]=[]),t=t._[r],e=r}};var e=function(n,t){if(0!==n.length){var r=n.pop(),i=r[0],o=r[1];i===t?e(n,i):o._.hasOwnProperty(t)&&delete o._[t],0===Object.keys(o).length&&e(n,i)}};return n.prototype.remove=function(){for(var n,t=!1,r=null,i=this,o=[[r,i]],u=null,a=0;a<arguments.length;a++)if(u=arguments[a],Array.isArray(i))n=i.indexOf(u),n>-1&&(i.splice(n,1),0===i.length&&o.length>1&&e(o,r),t=!0);else{if(!i._.hasOwnProperty(u))break;a===arguments.length-1&&(delete i._[u],0===Object.keys(i).length&&o.length>1&&e(o,r),t=!0),r=u,i=i._[u],o.push([r,i])}return t},n.prototype.get=function(n){return this._.hasOwnProperty(n)?this._[n]:[]},n}(),s=function(n,t,e,r){function i(n){return!n||null==n||"null"===n||"undefined"===n}function o(t,e,r){l||(c.observe(n,{attributes:!0,childList:!0,subtree:!0}),l=!0),s.add(t,e,r)}function u(t,e){var r=n.querySelectorAll(t);return r.length&&(i(e)||Array.prototype.every.call(r,function(n){return!n.querySelector(e)}))}function a(n,e){var r;n.forEach||(n=[n]),!i(e)&&Array.isArray(e)&&(e=e.join(", "));var a=new t(function(i,a){var c=[],f=[];n.forEach(function(n){var r,i;u(n,e)||(r=new t(function(t){o(n,e,t),i=function(){s.remove(n,e,t)},f.push(i)}),c.push(r))});var l=function(){f.forEach(function(n){n()})};t.all(c).then(l).then(i,a),r=function(){l(),a()}});return a.dismiss=r,a}var c,s,f=r.MutationObserver,l=!1;return f&&t?(s=new e,c=new f(function(){s.forEach(function(n,t,e){u(e,t)&&(n.forEach(function(n){n()}),s.remove(e,t))})}),a):void 0}(u,a,c,n),f=function(n){return!!n}(s),l=function(n){function t(){c(),n.body.classList.add(u)}function e(){function e(){n.body.classList.remove(u),n.removeEventListener(i,s),n.removeEventListener(o,c),r=null}if(r)return r;var c,s,f=!1;return r=new Promise(function(e,r){"visible"!==n.visibilityState?r():(s=function(){f=!0},c=function(n){n.animationName===a&&(f?r():e())},n.addEventListener(i,s),n.addEventListener(o,c),t())}),r.then(e,e),r}var r,i="visibilitychange",o="animationend",u="browser-metrics-visibility-test",a="browser-metrics-visibility-animation",c=function(){var t=n.createElement("style"),e=["."+u+" {","-webkit-animation-duration: 0.001s;","animation-duration: 0.001s;","-webkit-animation-name: "+a+";","animation-name: "+a+";","-webkit-animation-iteration-count: 1;","animation-iteration-count: 1;","}","@keyframes "+a+" {}","@-webkit-keyframes "+a+" {","from {}","to {}","}"].join("\n");t.type="text/css",t.styleSheet?t.styleSheet.cssText=e:t.appendChild(n.createTextNode(e)),n.head.appendChild(t),c=function(){}};return e}(u),h=function(n,t,e,r,i){function o(n){return Array.isArray(n)||(n=[n]),n.map(function(n){return"string"==typeof n?{selector:n,hasNone:null}:n})}function u(n){return Array.isArray(n)||"string"==typeof n}function a(n){return u(n)&&(n={rules:n}),n.rules=o(n.rules),n.requirePaint="undefined"==typeof n.requirePaint?!1:n.requirePaint,n}return function(i,o){if(n){i=a(i);var u=function(){},c=new e(function(n,r){var o=[],a=i.rules.map(function(n){var e=new t(n.selector,n.hasNone);return o.push(function(){e.dismiss()}),e});u=function(){o.forEach(function(n){n()}),r()},e.all(a).then(function(n){}).then(n,r)});return c.cancel=u,i.requirePaint&&(c=c.then(r)),"function"==typeof o&&c.then(o),c}}}(f,s,a,l,n),y=function(n,t){function e(){return r}var r=!1;return n.addEventListener("DOMContentLoaded",function(){t.setTimeout(function(){r=!0})}),e}(u,n),d=function(n,t,e,r,i,o,u){function a(){c=null}var c;return function(o){var s="isInitial"in o?o.isInitial:i()===!1,f="threshold"in o?o.threshold:1e3,l="reporters"in o?o.reporters:[];r.push({start:{key:o.key,isInitial:s,threshold:f,timestamp:s?0:u.performance.now(),reporters:Array.isArray(l)?l:[l]}}),c&&(c.cancel(),a()),o.ready&&e&&(c=n(o.ready),c.then(function(){t({key:o.key})}).then(a,a))}}(h,o,f,e,y,a,n),p=function(n){return function(t){n.push({subscribe:t})}}(e),v=function(n,t,e,r,i,o){var u=function(){};return{start:n?i:u,end:n?r:u,addReporter:n?t:u,delegateTo:n?e:u,subscribe:n?o:u}}(t,r,i,o,d,p),window["browser-metrics"]=v,window.define&&window.define("internal/browser-metrics",function(){return v})}();;
;
/* module-key = 'com.atlassian.plugins.browser.metrics.browser-metrics-plugin:api', location = 'internal/browser-metrics-aa-beacon.js' */
!function(){var n={};n=function(n){function e(n,e){Object.keys(e).forEach(function(r){n[r]=e[r]})}var r=[],t=[];return n.addUrlCleaner=function(n){t.push(n)},n.cleanUrl=function(n){return t.reduce(function(e,r){var t=r(n);return t.length>e.length?t:e},"")},n.addReportMarshaller=function(n){r.push(n)},n.beacon=function(n){var t={};r.forEach(function(r){var o=r(n);"object"==typeof o&&e(t,o)});var o={name:"browser.metrics.navigation",properties:t};AJS.EventQueue.push(o)},n}(n),window["browser-metrics-aa-beacon"]=n,window.define&&window.define("internal/browser-metrics-aa-beacon",function(){return n})}();;
;
/* module-key = 'com.atlassian.plugins.browser.metrics.browser-metrics-plugin:api', location = 'loader.js' */
!function(){var n={},r={},i={};n=function(n){var r=window;return r}(n),r=function(n,r){var i=r.WRM;return i}(r,n),i=function(n,r,i){function t(){u===c&&o&&(o(),o=null)}var u=0,c=0,o=null,e={install:function(n){u+=1,n(function(){c+=1,t()})}};return r["browser-metrics-plugin"]=e,i.require(["wrc!browser-metrics-plugin.contrib"],function(){r.require(["internal/browser-metrics-plugin/collector"],function(n){o=function(){n.install()},t()})}),n}(i,n,r)}();;
;
/* module-key = 'com.atlassian.jira.plugins.jira-browser-metrics:sensors', location = 'sensors.js' */
require(["internal/browser-metrics","jira/util/events"],function(e,i){var a={},o={},d={},t={};a=function(e,i,a){function o(){function e(e){return o.hasOwnProperty(e)?o[e]:null}var o={"bonfire_top_menu_dropdown-content":"jira.header.menu.capture","browse_link-content":"jira.header.menu.projects","find_link-content":"jira.header.menu.issues","greenhopper_menu-content":"jira.header.menu.agile","home_link-content":"jira.header.menu.dashboards","plugins-jira-webitem-main-content":"jira.header.menu.portfolio","servicedesk-section-content":"jira.header.menu.service-desk","system-admin-menu-content":"jira.header.menu.admin","system-help-menu-content":"jira.header.menu.help","user-options-content":"jira.header.menu.profile"};i.bind("aui-dropdown2-show-before",function(i){var o=i.target,d=e(o&&o.id);d&&a.start({key:d,isInitial:!1,threshold:250})}),i.bind("aui-dropdown2-show-after",function(i){var o=i.target,d=e(o&&o.id);d&&a.end({key:d})})}return e.init=o,e}(a,i,e),o=function(e){function i(e){var i;if(a.hasOwnProperty(e))return e;for(i=0;i<o.length;i++)if(e.match(o[i].pattern))return o[i].dialogId;return null}var a=["about-dialog","add-basicuser-dialog","add-developer-dialog","add-field-configuration-dialog","add-field-configuration-scheme-dialog","add-field-dialog","add-field-screen-dialog","add-field-screen-scheme-dialog","add-incoming-mail-handler-dialog","add-issue-type-dialog","add-issue-type-field-configuration-association-dialog","add-issue-type-screen-scheme-configuration-association-dialog","add-issue-type-screen-scheme-dialog","add-new-issue-type-to-scheme-dialog","add-screen-scheme-item-dialog","add-subtask-type-dialog","add-workflow-dialog","add_workflowscheme-dialog","assign-dialog","assign-issue-types-dialog","assign-to-me-link-handler","attach-file-dialog","attach-screenshot-dialog","auditing-settings-dialog","clone-issue-dialog","comment-add-dialog","configure_wallboard_dialog","confluence-page-search-dialog","copy_classic default workflow-dialog","copy-filter-dialog","copy_jira-dialog","create-issue-dialog","create-issue-dialog.issueType","create-issue-dialog.projectId","create-request-dialog","create-service-desk-dialog","create-status-dialog","create-story-dialog","create-story-dialog.issueType","create-story-dialog.projectId","create-subtask-dialog","create-subtask-dialog.issueType","create-team-dialog","create_user-dialog","credits-dialog","delete-attachment-dialog","delete-comment-dialog","delete-dshboard","delete-filter-dialog","delete-issue-dialog","delete-issue-link-dialog","delete-log-work-dialog","delete-metric","delete-queue","delete-status-dialog","deleteuser_link-dialog","devstatus-branch-detail-dialog","devstatus-build-detail-dialog","devstatus-commit-detail-dialog","devstatus-cta-dialog","devstatus-deployment-detail-dialog","devstatus-pullrequest-detail-dialog","devstatus-review-detail-dialog","discard-draft-dialog","discard_draft_workflow-dialog","edit-attachments-dialog","edit-comment","editgroups_admin-dialog","editgroups_link-dialog","editgroups_sysadmin-dialog","edit-issue-dialog","edit-labels-dialog","edit-log-work-dialog","edit-status-dialog","edituser_link_admin-dialog","edit-workflow-dialog","gh-rapidboard-dialog","inline-issue-create-dialog","invite_user-dialog","issue-actions-dialog","issue-tab-error-dialog","jim-create-project-dialog","keyboard-shortcuts-dialog","link-issue-dialog","log-work-dialog","manage-attachment-dialog","metric-pre-save-dialog","modal-field-view","permission-helper-dialog","project-avatar-cropper","project-avatar-picker","project-config-details-project-category-dialog","project-config-project-edit-dialog","project-config-project-edit-lead-and-default-assignee-dialog","project-email-dialog","publish_draft_workflow-dialog","queue-dirty-edits","QuickCreateIssue.error","QuickCreateIssue.success","QuickCreateSubtask.error","QuickCreateSubtask.success","QuickEdit.error","QuickEdit.success","remote-jira-search-dialog","rename-filter-dialog","report-dirty-edits","save-filter-dialog","sd-add-default-value","sd-add-remove-agent-dialog","sd-remove-field-dialog","server-error-dialog","report-delete-confirm","tempo-add-hours-issue-dialog","tempo-add-internal-activity-form","tempo-core-medium-form","tempo-delete-form-dialog","tempo-grace-form","tempo-large-form","tempo-medium-form","tempo-move-form-dialog","tempo-pdf-form","tempo-small-form","tempo-split-form-dialog","tempo-user-settings-dialog","user-avatar-picker","user-defaults-edit-dialog","versionsMergeDialog","view-workflow-dialog","view-workflow-dialog-project-admin","view-workflow-dialog-workflow-schemes","wait-migrate-dialog","whereismycf-dialog","workflow-text-view"].reduce(function(e,i){return e[i]=!0,e},{}),o=[{dialogId:"component-delete-dialog",pattern:/^component-\d+-delete-dialog$/i},{dialogId:"version-delete-dialog",pattern:/^version-\d+-delete-dialog$/i},{dialogId:"workflow-transition-dialog",pattern:/^workflow-transition-\d+-dialog$/i}];return i}(o),d=function(e,i,a,o){function d(){i.bind("beforeShow",function(e,i){if("string"==typeof i){var d=o(i);d&&a.start({key:"jira.dialog.open."+d,isInitial:!1,threshold:1e3})}}),i.bind("dialogContentReady",function(e,i){if("string"==typeof i.options.id){var d=o(i.options.id);d&&a.end({key:"jira.dialog.open."+d})}})}return e.init=d,e}(d,i,e,o),t=function(e,i,a){return i.init(),a.init(),e}(t,a,d)});;
;
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:analytics', location = 'util/analytics.js' */
define("jira-help-tips/util/analytics",["jira/analytics"],function(t){"use strict";function e(t){return t=""+(t||""),t.replace(/\./g,"-")}function i(i,n){if(n&&n.attributes.id){var r={},a=e(n.attributes.id),s="";n.attributes.eventPrefix&&(s=n.attributes.eventPrefix,"."!==s.charAt(s.length-1)&&(s+=".")),r.name=s+"helptips."+a+"."+i,r.properties={},t.send(r)}}return{clean:e,send:i}});;
;
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager', location = 'js/HelpTipManager.js' */
define("jira-help-tips/feature/help-tip-manager",["require"],function(s){"use strict";var e=s("underscore"),i=s("jquery"),t=s("jira/jquery/deferred"),n=s("wrm/context-path"),r=s("wrm/data"),d=n()+"/rest/helptips/1.0/tips",u=r.claim("com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager.JiraHelpTipData");return{dismissedTipIds:[],sequences:[],loaded:new t,url:function(){return d},sync:function(s,e){var n=new t;return s||(s="get"),e||(e=null),"get"===s&&u&&u.dismissed?n.resolve(u.dismissed):i.ajax(this.url(),{type:s,dataType:"json",contentType:"application/json",data:e&&JSON.stringify(e),processData:!1}).done(function(s){n.resolve(s)}).fail(function(){n.reject()}),n.promise()},fetch:function(){var s=this.sync();return s.done(i.proxy(function(s){i.merge(this.dismissedTipIds,s),this.loaded.resolve()},this)),s.promise()},show:function(s){this.loaded.done(s)},dismiss:function(s){var e=s.attributes.id;e?(this.dismissedTipIds.push(e),this.sync("post",{id:e})):s._dismissed=!0},undismiss:function(s){var e=s.attributes.id;e?(this.dismissedTipIds.splice(i.inArray(e,this.dismissedTipIds),1),this.sync("delete",{id:e})):s._dismissed=!1},isDismissed:function(s){var e=s.attributes.id;return e?i.inArray(e,this.dismissedTipIds)>=0:s._dismissed},clearSequences:function(){this.sequences=[]},hideSequences:function(){e.each(this.sequences,function(s){s.view.dismiss()})},showSequences:function(){if(!this._showStarted){var s=this,t=0;this._showStarted=!0,i.when(this.loaded).done(function(){s.sequences.sort(function(s,e){return s.attributes.weight-e.attributes.weight}),s.sequences=e.filter(s.sequences,function(i){var n=-1===e.indexOf(s.dismissedTipIds,i.attributes.id);return n&&(i.attributes.position=t++),n}),s.sequences.length>0&&(e.last(s.sequences).attributes.showCloseButton=!0,s.sequences[0].show({force:!0})),s._showStarted=!1})}}}});;
;
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:help-tip', location = 'templates/HelpTip.soy' */
// This file was automatically generated from HelpTip.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace AJS.Templates.HelpTip.
 */

if (typeof AJS == 'undefined') { var AJS = {}; }
if (typeof AJS.Templates == 'undefined') { AJS.Templates = {}; }
if (typeof AJS.Templates.HelpTip == 'undefined') { AJS.Templates.HelpTip = {}; }


AJS.Templates.HelpTip.tipContent = function(opt_data, opt_ignored) {
  return ((opt_data.title) ? '<h2 class="helptip-title">' + soy.$$escapeHtml(opt_data.title) + '</h2>' : '') + '<p class="helptip-body">' + soy.$$filterNoAutoescape(opt_data.bodyHtml) + '</p>' + ((opt_data.url) ? '<p><a class="helptip-link" href="' + soy.$$escapeHtml(opt_data.url) + '" target="_blank">' + ((opt_data.linkText) ? soy.$$escapeHtml(opt_data.linkText) : soy.$$escapeHtml("Learn more")) + '</a></p>' : '') + AJS.Templates.HelpTip.tipFooter(opt_data);
};
if (goog.DEBUG) {
  AJS.Templates.HelpTip.tipContent.soyTemplateName = 'AJS.Templates.HelpTip.tipContent';
}


AJS.Templates.HelpTip.tipFooter = function(opt_data, opt_ignored) {
  return '<form class="tip-footer">' + AJS.Templates.HelpTip.nextButton(opt_data) + AJS.Templates.HelpTip.closeButton(opt_data) + AJS.Templates.HelpTip.sequencePaging(opt_data) + '</form>';
};
if (goog.DEBUG) {
  AJS.Templates.HelpTip.tipFooter.soyTemplateName = 'AJS.Templates.HelpTip.tipFooter';
}


AJS.Templates.HelpTip.nextButton = function(opt_data, opt_ignored) {
  return '' + ((opt_data.showNextButton) ? '<button class="aui-button helptip-next" type="button">' + ((opt_data.nextButtonText) ? soy.$$escapeHtml(opt_data.nextButtonText) : soy.$$escapeHtml("Next")) + '</button>' : '');
};
if (goog.DEBUG) {
  AJS.Templates.HelpTip.nextButton.soyTemplateName = 'AJS.Templates.HelpTip.nextButton';
}


AJS.Templates.HelpTip.closeButton = function(opt_data, opt_ignored) {
  return '' + ((opt_data.showCloseButton) ? '<button class="aui-button ' + ((opt_data.showNextButton) ? ' aui-button-link ' : '') + ' helptip-close" type="button">' + ((opt_data.closeButtonText) ? soy.$$escapeHtml(opt_data.closeButtonText) : soy.$$escapeHtml("Close")) + '</button>' : '');
};
if (goog.DEBUG) {
  AJS.Templates.HelpTip.closeButton.soyTemplateName = 'AJS.Templates.HelpTip.closeButton';
}


AJS.Templates.HelpTip.sequencePaging = function(opt_data, opt_ignored) {
  return '' + ((opt_data.isSequence && opt_data.length > 1) ? '<span class="helptip-sequence-paging">' + soy.$$escapeHtml(opt_data.position + 1) + '/' + soy.$$escapeHtml(opt_data.length) + '</span>' : '');
};
if (goog.DEBUG) {
  AJS.Templates.HelpTip.sequencePaging.soyTemplateName = 'AJS.Templates.HelpTip.sequencePaging';
}
;
;
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:help-tip', location = 'js/HelpTip.js' */
define("jira-help-tips/feature/help-tip",["require"],function(i){"use strict";function t(){return!1}function e(){return!0}function s(){return"jira-help-tip-"+p+d++}var n=i("jquery"),o=i("underscore"),h=i("jira-help-tips/feature/help-tip-manager"),l=i("jira-help-tips/util/analytics"),r=i("aui/inline-dialog"),a=i("jira/jquery/deferred"),u=AJS.Popups,c=AJS.Templates.HelpTip,d=0,p=(new Date).getTime(),f=function(i,t){this.initialize(i,t)},b=function(i){this.initialize(i)},m=function(i){var t;this.attributes=n.extend({},i),this.attributes.id||(this.attributes.id=!1),this.attributes.callbacks||(this.attributes.callbacks={}),this.attributes.isSequence&&(this.attributes.weight||(this.attributes.weight=Number.MAX_VALUE),h.sequences.push(this)),this.attributes.body&&(this.attributes.bodyHtml=this.attributes.body,delete this.attributes.body),this.cid=s(),t=this.attributes.anchor,delete this.attributes.anchor,this.view=t?new f(this,t):new b(this)};return n.extend(m.prototype,{show:function(i){i=i||{};var t=this,e=new a;if(this.attributes.callbacks.beforeShow){var s=this.attributes.callbacks.beforeShow();s&&o.isFunction(s.done)?s.done(e.resolve):e.resolve()}else e.resolve();e.done(function(){h.show(function(){t.isDismissed()||(!i.force&&u&&u.DisplayController?u.DisplayController.request({name:t.id,weight:1e3,show:function(){t.view.show()}}):t.view.show(),l.send("shown",t))})})},dismiss:function(){var i=l.clean(arguments[0]||"programmatically");this.view.dismiss(),"close-button"===i&&this.attributes.isSequence&&h.clearSequences(),this.isDismissed()||(h.dismiss(this),l.send("dismissed."+i,this))},isVisible:function(){return this.view.$el.is(":visible")},isDismissed:function(){return h.isDismissed(this)},refresh:function(){this.isDismissed()||this.view.refresh()},hide:function(){this.isDismissed()||this.view.dismiss()},showNextHelpTipInSequence:function(){this.view.clickNext()}}),n.extend(f.prototype,{initialize:function(i,e){this.model=i,this.anchorSelector=e,this.anchor=n(e),this._initDialog(e),n(document).bind("showLayer",function(e,s,o){"inlineDialog"===s&&o.id===i.cid&&(r.current=null,n(document.body).unbind("click."+i.cid+".inline-dialog-check"),o._validateClickToClose=t,o.hide=t)})},show:function(){this.beforeHide=t,this.popup.show()},refresh:function(){var i=n(this.anchorSelector);i.is(":visible")?i.get(0)!==this.anchor.get(0)?this.changeAnchor(i):this.isVisible()?this.popup.refresh():this.show():this.dismiss()},changeAnchor:function(i){var t=this.isVisible();this.dismiss(),this.$el.remove(),this.anchor=i,this._initDialog(i),t&&this.show()},dismiss:function(){this.beforeHide=e,this._popupHide()},clickNext:function(){var i=n(this.$el).find(".helptip-next");i.length>0&&i.click()},isVisible:function(){return this.$el.is(":visible")},_initDialog:function(i){var e=this,s=this.model;this.popup=new r(n(i),s.cid,o.bind(this._createDialog,this),o.extend({container:"#content",noBind:!0,preHideCallback:function(){return e.beforeHide()},calculatePositions:function(i,t,e,s){var o=r.opts.calculatePositions(i,t,e,s),h=n(this.container),l=h.offset();return"auto"!==o.popupCss.left&&(o.popupCss.left-=l.left,o.popupCss.right="auto"),o.popupCss.top-=l.top,o},addActiveClass:!1,initCallback:s.attributes.callbacks.init,hideCallback:s.attributes.callbacks.hide,persistent:!0},s.attributes.inlineDialogOpts)),this._popupHide=this.popup.hide,this.popup.hide=t,this.$el=n(this.popup[0]),this.$el.addClass("jira-help-tip aui-help")},_createDialog:function(i,t,e){var s=this,r=h.sequences,a=this.model.attributes.position,u=this.model.attributes.isSequence;i.removeClass("contents"),i.html(n(c.tipContent(o.extend({showNextButton:u&&r.length>1&&a+1<r.length,length:r.length,position:a,showCloseButton:!0},this.model.attributes)))),i.unbind("mouseover mouseout"),i.find(".helptip-link").click(function(){l.send("learn-more.clicked",s.model)}),i.find(".helptip-close").click(function(i){i.preventDefault(),s.model.dismiss("close-button")}),i.find(".helptip-next").click(function(i){i.preventDefault(),s.model.dismiss("next-button");var t=a+1;r[t]&&r[t].show({force:!0})}),e()}}),n.extend(b.prototype,{initialize:function(){this.$el=n("<div></div>"),this.$el.addClass("jira-help-tip aui-help")},show:function(){},dismiss:function(){}}),m});;
;
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:initialiser', location = 'js/initialiser.js' */
define("jira-help-tips/page/initialiser",["jira-help-tips/feature/help-tip-manager","jira/util/users/logged-in-user","underscore"],function(e,i,n){"use strict";function r(){i.isAnonymous()||e.fetch()}return{init:n.once(r)}});;
;
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:common', location = 'js/legacy.js' */
!function(){"use strict";AJS.namespace("AJS.HelpTip",null,require("jira-help-tips/feature/help-tip")),AJS.namespace("AJS.HelpTip.Manager",null,require("jira-help-tips/feature/help-tip-manager")),require("jira-help-tips/page/initialiser").init()}();;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:events', location = 'util/Events.js' */
define("jira/components/util/events",["require"],function(c){var a=c("jira/util/events/types");var b=c("jira/components/libs/underscore");return b.extend({},a,{LAYOUT_RENDERED:"layoutRendered"})});AJS.namespace("JIRA.Events",null,require("jira/util/events/types"));;
;
/* module-key = 'jira.webresources:jquery-easing', location = '/includes/jquery/plugins/easing/jquery.easing.1.3.js' */
jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(n,e,t,u,a){return jQuery.easing[jQuery.easing.def](n,e,t,u,a)},easeInQuad:function(n,e,t,u,a){return u*(e/=a)*e+t},easeOutQuad:function(n,e,t,u,a){return-u*(e/=a)*(e-2)+t},easeInOutQuad:function(n,e,t,u,a){return(e/=a/2)<1?u/2*e*e+t:-u/2*(--e*(e-2)-1)+t},easeInCubic:function(n,e,t,u,a){return u*(e/=a)*e*e+t},easeOutCubic:function(n,e,t,u,a){return u*((e=e/a-1)*e*e+1)+t},easeInOutCubic:function(n,e,t,u,a){return(e/=a/2)<1?u/2*e*e*e+t:u/2*((e-=2)*e*e+2)+t},easeInQuart:function(n,e,t,u,a){return u*(e/=a)*e*e*e+t},easeOutQuart:function(n,e,t,u,a){return-u*((e=e/a-1)*e*e*e-1)+t},easeInOutQuart:function(n,e,t,u,a){return(e/=a/2)<1?u/2*e*e*e*e+t:-u/2*((e-=2)*e*e*e-2)+t},easeInQuint:function(n,e,t,u,a){return u*(e/=a)*e*e*e*e+t},easeOutQuint:function(n,e,t,u,a){return u*((e=e/a-1)*e*e*e*e+1)+t},easeInOutQuint:function(n,e,t,u,a){return(e/=a/2)<1?u/2*e*e*e*e*e+t:u/2*((e-=2)*e*e*e*e+2)+t},easeInSine:function(n,e,t,u,a){return-u*Math.cos(e/a*(Math.PI/2))+u+t},easeOutSine:function(n,e,t,u,a){return u*Math.sin(e/a*(Math.PI/2))+t},easeInOutSine:function(n,e,t,u,a){return-u/2*(Math.cos(Math.PI*e/a)-1)+t},easeInExpo:function(n,e,t,u,a){return 0==e?t:u*Math.pow(2,10*(e/a-1))+t},easeOutExpo:function(n,e,t,u,a){return e==a?t+u:u*(1-Math.pow(2,-10*e/a))+t},easeInOutExpo:function(n,e,t,u,a){return 0==e?t:e==a?t+u:(e/=a/2)<1?u/2*Math.pow(2,10*(e-1))+t:u/2*(2-Math.pow(2,-10*--e))+t},easeInCirc:function(n,e,t,u,a){return-u*(Math.sqrt(1-(e/=a)*e)-1)+t},easeOutCirc:function(n,e,t,u,a){return u*Math.sqrt(1-(e=e/a-1)*e)+t},easeInOutCirc:function(n,e,t,u,a){return(e/=a/2)<1?-u/2*(Math.sqrt(1-e*e)-1)+t:u/2*(Math.sqrt(1-(e-=2)*e)+1)+t},easeInElastic:function(n,e,t,u,a){var r=1.70158,i=0,s=u;if(0==e)return t;if(1==(e/=a))return t+u;if(i||(i=.3*a),s<Math.abs(u)){s=u;var r=i/4}else var r=i/(2*Math.PI)*Math.asin(u/s);return-s*Math.pow(2,10*(e-=1))*Math.sin((e*a-r)*(2*Math.PI)/i)+t},easeOutElastic:function(n,e,t,u,a){var r=1.70158,i=0,s=u;if(0==e)return t;if(1==(e/=a))return t+u;if(i||(i=.3*a),s<Math.abs(u)){s=u;var r=i/4}else var r=i/(2*Math.PI)*Math.asin(u/s);return s*Math.pow(2,-10*e)*Math.sin((e*a-r)*(2*Math.PI)/i)+u+t},easeInOutElastic:function(n,e,t,u,a){var r=1.70158,i=0,s=u;if(0==e)return t;if(2==(e/=a/2))return t+u;if(i||(i=a*(.3*1.5)),s<Math.abs(u)){s=u;var r=i/4}else var r=i/(2*Math.PI)*Math.asin(u/s);return e<1?s*Math.pow(2,10*(e-=1))*Math.sin((e*a-r)*(2*Math.PI)/i)*-.5+t:s*Math.pow(2,-10*(e-=1))*Math.sin((e*a-r)*(2*Math.PI)/i)*.5+u+t},easeInBack:function(n,e,t,u,a,r){return void 0==r&&(r=1.70158),u*(e/=a)*e*((r+1)*e-r)+t},easeOutBack:function(n,e,t,u,a,r){return void 0==r&&(r=1.70158),u*((e=e/a-1)*e*((r+1)*e+r)+1)+t},easeInOutBack:function(n,e,t,u,a,r){return void 0==r&&(r=1.70158),(e/=a/2)<1?u/2*(e*e*((1+(r*=1.525))*e-r))+t:u/2*((e-=2)*e*((1+(r*=1.525))*e+r)+2)+t},easeInBounce:function(n,e,t,u,a){return u-jQuery.easing.easeOutBounce(n,a-e,0,u,a)+t},easeOutBounce:function(n,e,t,u,a){return(e/=a)<1/2.75?u*(7.5625*e*e)+t:e<2/2.75?u*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?u*(7.5625*(e-=2.25/2.75)*e+.9375)+t:u*(7.5625*(e-=2.625/2.75)*e+.984375)+t},easeInOutBounce:function(n,e,t,u,a){return e<a/2?.5*jQuery.easing.easeInBounce(n,2*e,0,u,a)+t:.5*jQuery.easing.easeOutBounce(n,2*e-a,0,u,a)+.5*u+t}});;
;
/* module-key = 'jira.webresources:jquery-fancybox', location = '/includes/jquery/plugins/fancybox/jquery.fancybox-1.3.4.js' */
var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){var e,i,n,a,o,d,c,r,s,h,l,f,p,g=0,b={},u=[],y=0,w={},v=[],m=null,x=new Image,I=/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i,C=/[^\.]\.(swf)\s*$/i,k=1,O=0,j="",S=!1,T=t.extend(t("<div/>")[0],{prop:0}),A=t.browser.msie&&t.browser.version<7&&!window.XMLHttpRequest,D=function(){i.hide(),x.onerror=x.onload=null,m&&m.abort(),e.empty()},F=function(){if(!1===b.onError(u,g,b))return i.hide(),void(S=!1);b.titleShow=!1,b.width="auto",b.height="auto",e.html('<p id="fancybox-error">The requested content cannot be loaded.<br />Please try again later.</p>'),N()},E=function(){var n,a,o,c,r,s,h=u[g];if(D(),b=t.extend({},t.fn.fancybox.defaults,void 0===t(h).data("fancybox")?b:t(h).data("fancybox")),!1===(s=b.onStart(u,g,b)))return void(S=!1);if("object"==(void 0===s?"undefined":_typeof(s))&&(b=t.extend(b,s)),o=b.title||(h.nodeName?t(h).attr("title"):h.title)||"",h.nodeName&&!b.orig&&(b.orig=t(h).children("img:first").length?t(h).children("img:first"):t(h)),""===o&&b.orig&&b.titleFromAlt&&(o=b.orig.attr("alt")),n=b.href||(h.nodeName?t(h).attr("href"):h.href)||null,(/^(?:javascript)/i.test(n)||"#"==n)&&(n=null),b.type?(a=b.type,n||(n=b.content)):b.content?a="html":n&&(a=n.match(I)?"image":n.match(C)?"swf":t(h).hasClass("iframe")?"iframe":0===n.indexOf("#")?"inline":"ajax"),!a)return void F();switch("inline"==a&&(h=n.substr(n.indexOf("#")),a=t(h).length>0?"inline":"ajax"),b.type=a,b.href=n,b.title=o,b.autoDimensions&&("html"==b.type||"inline"==b.type||"ajax"==b.type?(b.width="auto",b.height="auto"):b.autoDimensions=!1),b.modal&&(b.overlayShow=!0,b.hideOnOverlayClick=!1,b.hideOnContentClick=!1,b.enableEscapeButton=!1,b.showCloseButton=!1),b.padding=parseInt(b.padding,10),b.margin=parseInt(b.margin,10),e.css("padding",b.padding+b.margin),t(".fancybox-inline-tmp").unbind("fancybox-cancel").bind("fancybox-change",function(){t(this).replaceWith(d.children())}),a){case"html":e.html(b.content),N();break;case"inline":if(!0===t(h).parent().is("#fancybox-content"))return void(S=!1);t('<div class="fancybox-inline-tmp" />').hide().insertBefore(t(h)).bind("fancybox-cleanup",function(){t(this).replaceWith(d.children())}).bind("fancybox-cancel",function(){t(this).replaceWith(e.children())}),t(h).appendTo(e),N();break;case"image":S=!1,t.fancybox.showActivity(),x=new Image,x.onerror=function(){F()},x.onload=function(){S=!0,x.onerror=x.onload=null,B()},x.src=n;break;case"swf":b.scrolling="no",c='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+b.width+'" height="'+b.height+'"><param name="movie" value="'+n+'"></param>',r="",t.each(b.swf,function(t,e){c+='<param name="'+t+'" value="'+e+'"></param>',r+=" "+t+'="'+e+'"'}),c+='<embed src="'+n+'" type="application/x-shockwave-flash" width="'+b.width+'" height="'+b.height+'"'+r+"></embed></object>",e.html(c),N();break;case"ajax":S=!1,t.fancybox.showActivity(),b.ajax.win=b.ajax.success,m=t.ajax(t.extend({},b.ajax,{url:n,data:b.ajax.data||{},error:function(t,e,i){t.status>0&&F()},success:function(t,a,o){if(200==("object"==(void 0===o?"undefined":_typeof(o))?o:m).status){if("function"==typeof b.ajax.win){if(!1===(s=b.ajax.win(n,t,a,o)))return void i.hide();"string"!=typeof s&&"object"!=(void 0===s?"undefined":_typeof(s))||(t=s)}e.html(t),N()}}}));break;case"iframe":P()}},N=function(){var i=b.width,n=b.height;i=i.toString().indexOf("%")>-1?parseInt((t(window).width()-2*b.margin)*parseFloat(i)/100,10)+"px":"auto"==i?"auto":i+"px",n=n.toString().indexOf("%")>-1?parseInt((t(window).height()-2*b.margin)*parseFloat(n)/100,10)+"px":"auto"==n?"auto":n+"px",e.wrapInner('<div style="width:'+i+";height:"+n+";overflow: "+("auto"==b.scrolling?"auto":"yes"==b.scrolling?"scroll":"hidden")+';position:relative;"></div>'),b.width=e.width(),b.height=e.height(),P()},B=function(){b.width=x.width,b.height=x.height,t("<img />").attr({id:"fancybox-img",src:x.src,alt:b.title}).appendTo(e),P()},P=function(){var o,l;return i.hide(),a.is(":visible")&&!1===w.onCleanup(v,y,w)?(t.event.trigger("fancybox-cancel"),void(S=!1)):(S=!0,t(d.add(n)).unbind(),t(window).unbind("resize.fb scroll.fb"),t(document).unbind("keydown.fb"),a.is(":visible")&&"outside"!==w.titlePosition&&a.css("height",a.height()),v=u,y=g,w=b,w.overlayShow?(n.css({"background-color":w.overlayColor,opacity:w.overlayOpacity,cursor:w.hideOnOverlayClick?"pointer":"auto",height:t(document).height()}),n.is(":visible")||(A&&t("select:not(#fancybox-tmp select)").filter(function(){return"hidden"!==this.style.visibility}).css({visibility:"hidden"}).one("fancybox-cleanup",function(){this.style.visibility="inherit"}),n.show())):n.hide(),p=W(),M(),a.is(":visible")?(t(c.add(s).add(h)).hide(),o=a.position(),f={top:o.top,left:o.left,width:a.width(),height:a.height()},l=f.width==p.width&&f.height==p.height,void d.fadeTo(w.changeFade,.3,function(){var i=function(){d.html(e.contents()).fadeTo(w.changeFade,1,z)};t.event.trigger("fancybox-change"),d.empty().removeAttr("filter").css({"border-width":w.padding,width:p.width-2*w.padding,height:b.autoDimensions?"auto":p.height-O-2*w.padding}),l?i():(T.prop=0,t(T).animate({prop:1},{duration:w.changeSpeed,easing:w.easingChange,step:R,complete:i}))})):(a.removeAttr("style"),d.css("border-width",w.padding),"elastic"==w.transitionIn?(f=Q(),d.html(e.contents()),a.show(),w.opacity&&(p.opacity=0),T.prop=0,void t(T).animate({prop:1},{duration:w.speedIn,easing:w.easingIn,step:R,complete:z})):("inside"==w.titlePosition&&O>0&&r.show(),d.css({width:p.width-2*w.padding,height:b.autoDimensions?"auto":p.height-O-2*w.padding}).html(e.contents()),void a.css(p).fadeIn("none"==w.transitionIn?0:w.speedIn,z))))},L=function(t){return!(!t||!t.length)&&("float"==w.titlePosition?'<table id="fancybox-title-float-wrap" cellpadding="0" cellspacing="0"><tr><td id="fancybox-title-float-left"></td><td id="fancybox-title-float-main">'+t+'</td><td id="fancybox-title-float-right"></td></tr></table>':'<div id="fancybox-title-'+w.titlePosition+'">'+t+"</div>")},M=function(){if(j=w.title||"",O=0,r.empty().removeAttr("style").removeClass(),!1===w.titleShow)return void r.hide();if(!(j=t.isFunction(w.titleFormat)?w.titleFormat(j,v,y,w):L(j))||""===j)return void r.hide();switch(r.addClass("fancybox-title-"+w.titlePosition).html(j).appendTo("body").show(),w.titlePosition){case"inside":r.css({width:p.width-2*w.padding,marginLeft:w.padding,marginRight:w.padding}),O=r.outerHeight(!0),r.appendTo(o),p.height+=O;break;case"over":r.css({marginLeft:w.padding,width:p.width-2*w.padding,bottom:w.padding}).appendTo(o);break;case"float":r.css("left",-1*parseInt((r.width()-p.width-40)/2,10)).appendTo(a);break;default:r.css({width:p.width-2*w.padding,paddingLeft:w.padding,paddingRight:w.padding}).appendTo(a)}r.hide()},_=function(){if((w.enableEscapeButton||w.enableKeyboardNav)&&t(document).bind("keydown.fb",function(e){27==e.keyCode&&w.enableEscapeButton?(e.preventDefault(),t.fancybox.close()):37!=e.keyCode&&39!=e.keyCode||!w.enableKeyboardNav||"INPUT"===e.target.tagName||"TEXTAREA"===e.target.tagName||"SELECT"===e.target.tagName||(e.preventDefault(),t.fancybox[37==e.keyCode?"prev":"next"]())}),!w.showNavArrows)return s.hide(),void h.hide();(w.cyclic&&v.length>1||0!==y)&&s.show(),(w.cyclic&&v.length>1||y!=v.length-1)&&h.show()},z=function(){t.support.opacity||(d.get(0).style.removeAttribute("filter"),a.get(0).style.removeAttribute("filter")),b.autoDimensions&&d.css("height","auto"),a.css("height","auto"),j&&j.length&&r.show(),w.showCloseButton&&c.show(),_(),w.hideOnContentClick&&d.bind("click",t.fancybox.close),w.hideOnOverlayClick&&n.bind("click",t.fancybox.close),t(window).bind("resize.fb",t.fancybox.resize),w.centerOnScroll&&t(window).bind("scroll.fb",t.fancybox.center),"iframe"==w.type&&t('<iframe id="fancybox-frame" name="fancybox-frame'+(new Date).getTime()+'" frameborder="0" hspace="0" '+(t.browser.msie?'allowtransparency="true""':"")+' scrolling="'+b.scrolling+'" src="'+w.href+'"></iframe>').appendTo(d),a.show(),S=!1,t.fancybox.center(),w.onComplete(v,y,w),H()},H=function(){var t,e;v.length-1>y&&void 0!==(t=v[y+1].href)&&t.match(I)&&(e=new Image,e.src=t),y>0&&void 0!==(t=v[y-1].href)&&t.match(I)&&(e=new Image,e.src=t)},R=function(t){var e={width:parseInt(f.width+(p.width-f.width)*t,10),height:parseInt(f.height+(p.height-f.height)*t,10),top:parseInt(f.top+(p.top-f.top)*t,10),left:parseInt(f.left+(p.left-f.left)*t,10)};void 0!==p.opacity&&(e.opacity=t<.5?.5:t),a.css(e),d.css({width:e.width-2*w.padding,height:e.height-O*t-2*w.padding})},K=function(){return[t(window).width()-2*w.margin,t(window).height()-2*w.margin,t(document).scrollLeft()+w.margin,t(document).scrollTop()+w.margin]},W=function(){var t,e=K(),i={},n=w.autoScale,a=2*w.padding;return w.width.toString().indexOf("%")>-1?i.width=parseInt(e[0]*parseFloat(w.width)/100,10):i.width=w.width+a,w.height.toString().indexOf("%")>-1?i.height=parseInt(e[1]*parseFloat(w.height)/100,10):i.height=w.height+a,n&&(i.width>e[0]||i.height>e[1])&&("image"==b.type||"swf"==b.type?(t=w.width/w.height,i.width>e[0]&&(i.width=e[0],i.height=parseInt((i.width-a)/t+a,10)),i.height>e[1]&&(i.height=e[1],i.width=parseInt((i.height-a)*t+a,10))):(i.width=Math.min(i.width,e[0]),i.height=Math.min(i.height,e[1]))),i.top=parseInt(Math.max(e[3]-20,e[3]+.5*(e[1]-i.height-40)),10),i.left=parseInt(Math.max(e[2]-20,e[2]+.5*(e[0]-i.width-40)),10),i},q=function(t){var e=t.offset();return e.top+=parseInt(t.css("paddingTop"),10)||0,e.left+=parseInt(t.css("paddingLeft"),10)||0,e.top+=parseInt(t.css("border-top-width"),10)||0,e.left+=parseInt(t.css("border-left-width"),10)||0,e.width=t.width(),e.height=t.height(),e},Q=function(){var e,i,n=!!b.orig&&t(b.orig),a={};return n&&n.length?(e=q(n),a={width:e.width+2*w.padding,height:e.height+2*w.padding,top:e.top-w.padding-20,left:e.left-w.padding-20}):(i=K(),a={width:2*w.padding,height:2*w.padding,top:parseInt(i[3]+.5*i[1],10),left:parseInt(i[2]+.5*i[0],10)}),a},X=function(){if(!i.is(":visible"))return void clearInterval(l);t("div",i).css("top",-40*k+"px"),k=(k+1)%12};t.fn.fancybox=function(e){return t(this).length?(t(this).data("fancybox",t.extend({},e,t.metadata?t(this).metadata():{})).unbind("click.fb").bind("click.fb",function(e){if(e.preventDefault(),!S){S=!0,t(this).blur(),u=[],g=0;var i=t(this).attr("rel")||"";i&&""!=i&&"nofollow"!==i?(u=t("a[rel="+i+"], area[rel="+i+"]"),g=u.index(this)):u.push(this),E()}}),this):this},t.fancybox=function(e){var i;if(!S){if(S=!0,i=void 0!==arguments[1]?arguments[1]:{},u=[],g=parseInt(i.index,10)||0,t.isArray(e)){for(var n=0,a=e.length;n<a;n++)"object"==_typeof(e[n])?t(e[n]).data("fancybox",t.extend({},i,e[n])):e[n]=t({}).data("fancybox",t.extend({content:e[n]},i));u=jQuery.merge(u,e)}else"object"==(void 0===e?"undefined":_typeof(e))?t(e).data("fancybox",t.extend({},i,e)):e=t({}).data("fancybox",t.extend({content:e},i)),u.push(e);(g>u.length||g<0)&&(g=0),E()}},t.fancybox.showActivity=function(){clearInterval(l),i.show(),l=setInterval(X,66)},t.fancybox.hideActivity=function(){i.hide()},t.fancybox.next=function(){return t.fancybox.pos(y+1)},t.fancybox.prev=function(){return t.fancybox.pos(y-1)},t.fancybox.pos=function(t){S||(t=parseInt(t),u=v,t>-1&&t<v.length?(g=t,E()):w.cyclic&&v.length>1&&(g=t>=v.length?0:v.length-1,E()))},t.fancybox.cancel=function(){S||(S=!0,t.event.trigger("fancybox-cancel"),D(),b.onCancel(u,g,b),S=!1)},t.fancybox.close=function(){function e(){n.fadeOut("fast"),r.empty().hide(),a.hide(),t.event.trigger("fancybox-cleanup"),d.empty(),w.onClosed(v,y,w),v=b=[],y=g=0,w=b={},S=!1}if(!S&&!a.is(":hidden")){if(S=!0,w&&!1===w.onCleanup(v,y,w))return void(S=!1);if(D(),t(c.add(s).add(h)).hide(),t(d.add(n)).unbind(),t(window).unbind("resize.fb scroll.fb"),t(document).unbind("keydown.fb"),d.find("iframe").attr("src",A&&/^https/i.test(window.location.href||"")?"javascript:void(false)":"about:blank"),"inside"!==w.titlePosition&&r.empty(),a.stop(),"elastic"==w.transitionOut){f=Q();var i=a.position();p={top:i.top,left:i.left,width:a.width(),height:a.height()},w.opacity&&(p.opacity=1),r.empty().hide(),T.prop=1,t(T).animate({prop:0},{duration:w.speedOut,easing:w.easingOut,step:R,complete:e})}else a.fadeOut("none"==w.transitionOut?0:w.speedOut,e)}},t.fancybox.resize=function(){n.is(":visible")&&n.css("height",t(document).height()),t.fancybox.center(!0)},t.fancybox.center=function(){var t,e;S||(e=!0===arguments[0]?1:0,t=K(),!e&&(a.width()>t[0]||a.height()>t[1])||a.stop().animate({top:parseInt(Math.max(t[3]-20,t[3]+.5*(t[1]-d.height()-40)-w.padding)),left:parseInt(Math.max(t[2]-20,t[2]+.5*(t[0]-d.width()-40)-w.padding))},"number"==typeof arguments[0]?arguments[0]:200))},t.fancybox.init=function(){t("#fancybox-wrap").length||(t("body").append(e=t('<div id="fancybox-tmp"></div>'),i=t('<div id="fancybox-loading"><div></div></div>'),n=t('<div id="fancybox-overlay"></div>'),a=t('<div id="fancybox-wrap"></div>')),o=t('<div id="fancybox-outer"></div>').append('<div class="fancybox-bg" id="fancybox-bg-n"></div><div class="fancybox-bg" id="fancybox-bg-ne"></div><div class="fancybox-bg" id="fancybox-bg-e"></div><div class="fancybox-bg" id="fancybox-bg-se"></div><div class="fancybox-bg" id="fancybox-bg-s"></div><div class="fancybox-bg" id="fancybox-bg-sw"></div><div class="fancybox-bg" id="fancybox-bg-w"></div><div class="fancybox-bg" id="fancybox-bg-nw"></div>').appendTo(a),o.append(d=t('<div id="fancybox-content"></div>'),c=t('<a id="fancybox-close"></a>'),r=t('<div id="fancybox-title"></div>'),s=t('<a href="javascript:;" id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"></span></a>'),h=t('<a href="javascript:;" id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"></span></a>')),c.click(t.fancybox.close),i.click(t.fancybox.cancel),s.click(function(e){e.preventDefault(),t.fancybox.prev()}),h.click(function(e){e.preventDefault(),t.fancybox.next()}),t.fn.mousewheel&&a.bind("mousewheel.fb",function(e,i){S?e.preventDefault():0!=t(e.target).get(0).clientHeight&&t(e.target).get(0).scrollHeight!==t(e.target).get(0).clientHeight||(e.preventDefault(),t.fancybox[i>0?"prev":"next"]())}),t.support.opacity||a.addClass("fancybox-ie"),A&&(i.addClass("fancybox-ie6"),a.addClass("fancybox-ie6"),t('<iframe id="fancybox-hide-sel-frame" src="'+(/^https/i.test(window.location.href||"")?"javascript:void(false)":"about:blank")+'" scrolling="no" border="0" frameborder="0" tabindex="-1"></iframe>').prependTo(o)))},t.fn.fancybox.defaults={padding:10,margin:40,opacity:!1,modal:!1,cyclic:!1,scrolling:"auto",width:560,height:340,autoScale:!0,autoDimensions:!0,centerOnScroll:!1,ajax:{},swf:{wmode:"transparent"},hideOnOverlayClick:!0,hideOnContentClick:!1,overlayShow:!0,overlayOpacity:.7,overlayColor:"#777",titleShow:!0,titlePosition:"float",titleFormat:null,titleFromAlt:!1,transitionIn:"fade",transitionOut:"fade",speedIn:300,speedOut:300,changeSpeed:300,changeFade:"fast",easingIn:"swing",easingOut:"swing",showCloseButton:!0,showNavArrows:!0,enableEscapeButton:!0,enableKeyboardNav:!0,onStart:function(){},onCancel:function(){},onComplete:function(){},onCleanup:function(){},onClosed:function(){},onError:function(){}},t(document).ready(function(){t.fancybox.init()})}(jQuery);;
;
/* module-key = 'jira.webresources:jquery-fancybox', location = '/includes/jquery/plugins/fancybox/jquery.fancybox.jira.js' */
AJS.$.fn.fancybox.defaults.titleFormat=function(t){if(t&&t.length)return t=AJS.escapeHtml(t),"float"==this.titlePosition?'<table id="fancybox-title-float-wrap" cellpadding="0" cellspacing="0"><tr><td id="fancybox-title-float-left"></td><td id="fancybox-title-float-main">'+t+'</td><td id="fancybox-title-float-right"></td></tr></table>':'<div id="fancybox-title-'+this.titlePosition+'">'+t+"</div>"};;
;
/* module-key = 'jira.webresources:jquery-livestamp', location = '/includes/jquery/plugins/livestamp/time.js' */
define("jira/jquery/plugins/livestamp/time",["jira/util/formatter","jquery","jira/moment","jira/util/data/meta"],function(e,t,n,o){"use strict";function r(e,t){this.key=e,this.isAge=t}function a(t,n,o){return t in I?e.format(I[t],o):null}function i(e){switch(e.key){case"short":case"shortAge":return"ll";case"long":case"longAge":return"LL";case"full":case"fullAge":case"timestamp":return"LLL";default:return null}}function u(e){return e.clone().hours(0).minutes(0).seconds(0).milliseconds(0)}function l(e,t){var n=u(e);return n.clone().subtract("d",1)<=t&&t<n}function m(e,t){var n=u(e).add("d",1),o=n.clone().add("d",1);return n<=t&&t<o}function s(e,t){return Math.floor(t.diff(e,"minutes",!0))}function c(e,t){var n=t.diff(e,"hours",!0);return Math.round(n)}function d(e,t){return Math.floor(t.diff(e,"days",!0))}function g(e,t){var n=i(t);return e.format(n)}function f(e,t,o){if(o=o||n(),e<=o){if(e>o.clone().subtract("m",1))return a("aMomentAgo",t);if(e>o.clone().subtract("m",2))return a("oneMinuteAgo",t);if(e>o.clone().subtract("m",50))return a("xMinutesAgo",t,s(e,o));if(e>o.clone().subtract("m",90))return a("oneHourAgo",t);if(l(o,e)&&e<o.clone().subtract("h",5))return a("oneDayAgo",t);if(e>o.clone().subtract("d",1))return a("xHoursAgo",t,c(e,o));if(e>o.clone().subtract("d",7))return a("xDaysAgo",t,Math.max(d(e,o),2));if(e>o.clone().subtract("d",8))return a("oneWeekAgo",t)}else{if(e<o.clone().add("m",1))return a("inAMoment",t);if(e<o.clone().add("m",2))return a("inOneMinute",t);if(e<o.clone().add("m",50))return a("inXMinutes",t,s(o,e));if(e<o.clone().add("m",90))return a("inOneHour",t);if(m(o,e)&&e>o.clone().add("h",5))return a("inOneDay",t);if(e<o.clone().add("d",1))return a("inXHours",t,c(o,e));if(e<o.clone().add("d",7))return a("inXDays",t,Math.max(d(o,e),2));if(e<o.clone().add("d",8))return a("inOneWeek",t)}return g(e,t)}var v={},x=o.getBoolean("date-relativize");r.types={};for(var A,h=["shortAge","longAge","fullAge","short","long","full","timestamp"],T=0,y=h.length;T<y;T++)A=h[T],r.types[A]=new r(A,-1!==A.toLowerCase().indexOf("age"));var I={};return v.FormatType=r,v.formatDate=function(e,t,n){return e&&t?(x||n)&&t.isAge?f(e,t):g(e,t):null},v.setRelativeTranslations=function(e){for(var t in e)I[t]=e[t]},v.restoreDefaultRelativeTranslations=function(){this.setRelativeTranslations({inAMoment:"Now",inOneMinute:"In 1 minute",inXMinutes:"In {0} minutes",inOneHour:"In 1 hour",inXHours:"In {0} hours",inOneDay:"Tomorrow",inXDays:"In {0} days",inOneWeek:"In 1 week",aMomentAgo:"Just now",oneMinuteAgo:"1 minute ago",xMinutesAgo:"{0} minutes ago",oneHourAgo:"1 hour ago",xHoursAgo:"{0} hours ago",oneDayAgo:"Yesterday",xDaysAgo:"{0} days ago",oneWeekAgo:"1 week ago"})},v.restoreDefaultRelativeTranslations(),v.formatDateWithRelativeAge=f,v.formatDateWithFormatString=g,v}),AJS.namespace("JIRA.Time",null,require("jira/jquery/plugins/livestamp/time"));;
;
/* module-key = 'jira.webresources:jquery-livestamp', location = '/includes/jquery/plugins/livestamp/livestamp.js' */
define("jira/jquery/plugins/livestamp/livestamp",["jquery","jira/moment","jira/util/data/meta","jira/jquery/plugins/livestamp/time"],function(t,e,a,i){"use strict";var r,n=a.getBoolean("date-relativize"),u=[],s=function(t,e){t.data("livestampdata",e),u.push(t)},l=function t(){clearTimeout(r),m(),r=setTimeout(t,6e3)},m=function(){u=t.grep(u,function(t){var a,r,u=t.data("livestampdata"),s=t.data("relativize");if(e.isMoment(u)&&t.closest("html").length){a=t.text();var l=t.data("datetime-format");l=l||"fullAge",n||s||(l=l.replace("Age","")),r=i.formatDate(u,i.FormatType.types[l],s),a!==r&&t.text(r)}else t.removeData("livestampdata");return!!t.data("livestampdata")})},o=function(a){return a.each(function(){var a=t(this),i=a.attr("datetime");if(i){var r=isNaN(i)?e(i).zone(i):e(parseInt(i,10));s(a,r)}}),l(),a};return t.fn.livestamp=function(){return o(this)},o}),function(){require("jira/jquery/plugins/livestamp/livestamp")}();;
;
/* module-key = 'com.atlassian.jira.jira-fileviewer-plugin:fileviewer', location = '/file-service.js' */
define("jira/fileviewer/file-service",["jira/featureflags/feature-manager","jquery"],function(featureManager,$){var selectors={image:["a[file-preview-type=image]"],document:[]};if(!featureManager.isFeatureEnabled("jira.fileviewer.disable.pdf")){selectors.document.push("a[file-preview-type=document]")}function getPreviewableFileSelector(){return Object.keys(selectors).map(function(k){return selectors[k].join(", ")}).join(", ")}function pushSingleOrArray(target,toPush){if(Array.isArray(toPush)){target.push.apply(target,toPush)}else{target.push(toPush)}}return{findFiles:function findPreviewableFiles(context){return $(context||document.body).find(getPreviewableFileSelector())},getFileSelector:getPreviewableFileSelector,getImageSelector:function getPreviewableImageSelector(){return selectors.image.join(", ")},addImageSelector:function addImageSelector(sel){pushSingleOrArray(selectors.image,sel)},getDocumentSelector:function getPreviewableDocumentSelector(){return selectors.document.join(", ")},addDocumentSelector:function addDocumentSelector(sel){pushSingleOrArray(selectors.document,sel)}}});;
;
/* module-key = 'com.atlassian.jira.jira-fileviewer-plugin:fileviewer', location = '/fileviewer.js' */
define("jira/fileviewer",["wrm/require","jira/fileviewer/file-service","jira/loading/loading","jira/ajs/keyboardshortcut/keyboard-shortcut-toggle","jquery","underscore"],function(wrmRequire,fileService,Loading,KeyboardShortcuts,$,_){var viewerReady;var viewer;function getDownloadUrl($fileElement){return $fileElement.data("download-url")||$fileElement.attr("href")}function initViewer(){if(!viewerReady){viewerReady=wrmRequire(["wr!com.atlassian.jira.jira-fileviewer-plugin:atlassian-fileviewer"]);viewerReady.done(function(){viewer=new FileViewer({enableMiniMode:true,viewers:["image","document"],moduleBackend:require("jira/fileviewer/module-backend/asynchronous"),analyticsBackend:require("jira/fileviewer/module-backend/analytics")});viewer.on("fv.open",KeyboardShortcuts.disable);viewer.on("fv.close",KeyboardShortcuts.enable)})}return viewerReady}function closeViewer(){if(viewer){viewer.close()}}function updateFiles(){var files=[];var imageSelector=fileService.getImageSelector();var documentSelector=fileService.getDocumentSelector();var $files=$(imageSelector+", "+documentSelector);$files.each(function(){var $el=$(this).closest("a");if($el.is(imageSelector)){files.push({type:"image/png",id:$el.attr("file-preview-id"),src:getDownloadUrl($el),title:$el.attr("file-preview-title"),thumbnail:$el.attr("file-preview-url")||$el.attr("data-download-url")||$el.find("img").attr("src")})}if($el.is(documentSelector)){files.push({type:"application/pdf",id:$el.attr("file-preview-id"),src:getDownloadUrl($el),title:$el.attr("file-preview-title")})}});var uniqFiles=_.uniq(files,false,function(el){return el.id});viewer.setFiles(uniqFiles);$files.off("simpleClick.fvOpen").on("simpleClick.fvOpen",function(e){e.preventDefault();viewer.open({id:$(this).attr("file-preview-id")})})}function initializePreviews(searchContext){if(!viewer){var $files=fileService.findFiles(searchContext);$files.off("simpleClick.fvInit").on("simpleClick.fvInit",function(e){e.preventDefault();var $file=$(this);Loading.showLoadingIndicator();AJS.dim();initViewer().done(function(){updateFiles();viewer.open({id:$file.attr("file-preview-id")})}).fail(function(){window.location=getDownloadUrl($file)}).always(function(){$files.off("simpleClick.fvInit");AJS.undim();Loading.hideLoadingIndicator()})})}else{updateFiles()}}return{attachToElements:initializePreviews,closeViewer:closeViewer,addImageSelector:function(sel){fileService.addImageSelector(sel)},addDocumentSelector:function(sel){fileService.addDocumentSelector(sel)}}});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/issuecomponents.soy' */
// This file was automatically generated from issuecomponents.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Issue.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Issue == 'undefined') { JIRA.Templates.Issue = {}; }


JIRA.Templates.Issue.watchersWithBrowse = function(opt_data, opt_ignored) {
  var output = '<form action="#" method="post" class="aui recipients-form"><a href="#" class="cancel" role="button"><span class="icon-default aui-icon aui-icon-small aui-iconfont-close-dialog">' + soy.$$escapeHtml("Close") + '</span></a><fieldset><label class="js-add-watchers-label">' + soy.$$escapeHtml("Add Watchers") + '</label><div class="autocomplete-user-target"><select id="watchers" name="watchers" data-description="' + soy.$$escapeHtml("Start Typing for Users") + '" class="watchers-user-picker hidden" multiple="multiple">';
  var watcherList10 = opt_data.watchers;
  var watcherListLen10 = watcherList10.length;
  for (var watcherIndex10 = 0; watcherIndex10 < watcherListLen10; watcherIndex10++) {
    var watcherData10 = watcherList10[watcherIndex10];
    output += '<option style="background-image:url(\'' + soy.$$escapeHtml(watcherData10.avatarUrls['16x16']) + '\')" selected="selected" value="' + soy.$$escapeHtml(watcherData10.name) + '">' + soy.$$escapeHtml(watcherData10.displayName) + '</option>';
  }
  output += '</select></div></fieldset></form>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Issue.watchersWithBrowse.soyTemplateName = 'JIRA.Templates.Issue.watchersWithBrowse';
}


JIRA.Templates.Issue.watchersNoBrowse = function(opt_data, opt_ignored) {
  var output = '<form action="#" method="post" class="aui recipients-form"><a href="#" class="cancel" role="button"><span class="icon-default aui-icon aui-icon-small aui-iconfont-close-dialog">' + soy.$$escapeHtml("Close") + '</span></a><fieldset><label for="watchers-multi-select">' + soy.$$escapeHtml("Add Watchers") + '</label><div><input type="text" class="text" id="watchers-nosearch" /><div class="description">' + soy.$$escapeHtml("Type username and press enter.") + '</div></div><div class="recipients"><ol class="watchers">';
  var watcherList28 = opt_data.watchers;
  var watcherListLen28 = watcherList28.length;
  for (var watcherIndex28 = 0; watcherIndex28 < watcherListLen28; watcherIndex28++) {
    var watcherData28 = watcherList28[watcherIndex28];
    output += JIRA.Templates.Fields.recipientUsername({username: watcherData28.name, icon: watcherData28.avatarUrls['16x16'], displayName: watcherData28.displayName, escape: true});
  }
  output += '</ol></div></fieldset></form>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Issue.watchersNoBrowse.soyTemplateName = 'JIRA.Templates.Issue.watchersNoBrowse';
}


JIRA.Templates.Issue.error = function(opt_data, opt_ignored) {
  var output = '<p>' + soy.$$escapeHtml(opt_data.msg) + '</p><ul>';
  var messageList40 = opt_data.errors;
  var messageListLen40 = messageList40.length;
  for (var messageIndex40 = 0; messageIndex40 < messageListLen40; messageIndex40++) {
    var messageData40 = messageList40[messageIndex40];
    output += '<li>' + soy.$$escapeHtml(messageData40) + '</li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Issue.error.soyTemplateName = 'JIRA.Templates.Issue.error';
}


JIRA.Templates.Issue.usersListReadOnly = function(opt_data, opt_ignored) {
  var output = '<form class="aui recipients-form"><a href="#" class="cancel" role="button"><span class="icon-default aui-icon aui-icon-small aui-iconfont-close-dialog">' + soy.$$escapeHtml("Close") + '</span></a><fieldset><div class="recipients"><ol class="voters">';
  var voterList50 = opt_data.users;
  var voterListLen50 = voterList50.length;
  for (var voterIndex50 = 0; voterIndex50 < voterListLen50; voterIndex50++) {
    var voterData50 = voterList50[voterIndex50];
    output += JIRA.Templates.Fields.recipientUsername({username: voterData50.name, icon: voterData50.avatarUrls['16x16'], displayName: voterData50.displayName, readOnly: true, escape: true});
  }
  output += '</ol></div></fieldset></form>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Issue.usersListReadOnly.soyTemplateName = 'JIRA.Templates.Issue.usersListReadOnly';
}
;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/entities/user-collection.js' */
define("jira/viewissue/watchers-voters/entities/user-collection",["require"],function(e){var r=e("jira/message"),s=e("backbone"),t=e("underscore"),o=e("jquery"),n=e("wrm/context-path"),i=e("jira/util/formatter"),a=JIRA.Templates.Issue,u=s.Model.extend({idAttribute:"key"});return s.Collection.extend({model:u,initialize:function(e){if(void 0===e)throw new Error("Must supply options");if(!e.issueKey)throw new Error("Must supply issue key");if(this.issueKey=e.issueKey,!e.endpoint)throw new Error("Must supply an endpoint");if(this.endpoint=e.endpoint,!e.modelKey)throw new Error("Must supply an model key");this.modelKey=e.modelKey},url:function(){return[n(),"rest/api/2/issue",this.issueKey,this.endpoint].join("/")},parse:function(e){return e&&e[this.modelKey]?e[this.modelKey]:[]},ajax:function(e){return e=t.extend({url:this.url(),headers:{"Content-Type":"application/json"},success:t.bind(function(){this.fetch()},this),error:t.bind(function(e){404!==e.status&&this.handleErrorResponse(e,"There was an error adding watcher")},this)},e),o.ajax(e)},getUser:function(e){return o.ajax({url:n()+"/rest/api/2/user?username="+encodeURIComponent(e),error:t.bind(function(e){404!==e.status&&this.handleErrorResponse(e,"There was an error adding watcher")},this)})},handleErrorResponse:function(e,s){var t=this._parseResponse(e.responseText);if(t.errorMessages){var o=a.error({msg:s,errors:t.errorMessages});r.showErrorMsg(o,{closeable:!0})}this.trigger("errorOccurred")},_parseResponse:function(e){try{return JSON.parse(e)}catch(e){return this._showFatalErrorMessage(),null}},_showFatalErrorMessage:function(){var e="<p>"+"Communications Breakdown"+"</p><p>"+"Close this dialog and press refresh in your browser"+"</p>";r.showErrorMsg(e,{closeable:!0})}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/entities/voters-user-collection.js' */
define("jira/viewissue/watchers-voters/entities/voters-user-collection",["jira/viewissue/watchers-voters/entities/user-collection"],function(e){return e.extend({initialize:function(t){var i={issueKey:t,endpoint:"votes",modelKey:"voters"};e.prototype.initialize.apply(this,[i])},vote:function(){return this.ajax({type:"POST"})},unvote:function(){return this.ajax({type:"DELETE"})}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/entities/watchers-user-collection.js' */
define("jira/viewissue/watchers-voters/entities/watchers-user-collection",["jira/viewissue/watchers-voters/entities/user-collection","jira/util/data/meta"],function(e,t){return e.extend({initialize:function(i){this.canBrowseUsers=t.get("can-search-users"),this.isReadOnly=!t.get("can-edit-watchers");var s={issueKey:i,endpoint:"watchers",modelKey:"watchers"};e.prototype.initialize.apply(this,[s])},addWatcher:function(e){return this.ajax({type:"POST",data:'"'+e+'"'})},removeWatcher:function(e){return this.ajax({type:"DELETE",url:this.url()+"?username="+e})}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/views/voters-view.js' */
define("jira/viewissue/watchers-voters/views/voters-view",["require"],function(e){var t=e("aui/message"),i=e("backbone"),r=e("underscore"),s=(e("jquery"),e("jira/jquery/deferred")),n=e("jira/util/formatter"),o=JIRA.Templates.Issue;return i.View.extend({$empty:void 0,initialize:function(e){this.collection=e.collection,this.collection.bind("replace reset add remove",this.render,this)},renderNoWatchers:function(){0===this.$(".recipients li").length?(this.$empty=t.info({closeable:!1,body:"There are no voters for this issue"}),this.$("fieldset").append(this.$empty)):this.$empty&&this.$empty.remove()},render:function(){var e=s();return this.collection.fetch().done(r.bind(function(){this.$el.html(o.usersListReadOnly({users:this.collection.toJSON()})),this.renderNoWatchers(),e.resolve(this.$el)},this)),e.promise()}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/views/abstract-watchers-view.js' */
define("jira/viewissue/watchers-voters/views/abstract-watchers-view",["require"],function(e){var t=e("aui/message"),i=e("backbone"),n=e("underscore"),r=e("jquery"),s=e("jira/jquery/deferred"),a=e("jira/util/formatter");return i.View.extend({$empty:void 0,renderNoWatchers:function(){0===this.$(".recipients li").length?(this.$empty=t.info({closeable:!1,body:"There are no watchers."}),this.$("fieldset").append(this.$empty)):this.$empty&&this.$empty.remove()},render:function(){var e=s();return this.collection.fetch().done(n.bind(function(){this._render(),this.renderNoWatchers(),e.resolve(this.$el),setTimeout(n.bind(function(){this.focus()},this),0)},this)),e.promise()},watch:function(){r("#watching-toggle").text("Stop watching this issue")},unwatch:function(){r("#watching-toggle").text("Start watching this issue")},focus:r.noop,_incrementWatcherCount:function(){var e=r("#watcher-data"),t=parseInt(e.text(),10);e.text(t+1),this.renderNoWatchers()},_decrementWatcherCount:function(){var e=r("#watcher-data"),t=parseInt(e.text(),10);e.text(t-1),this.renderNoWatchers()}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/views/watchers-view.js' */
define("jira/viewissue/watchers-voters/views/watchers-view",["require"],function(require){var AbstractWatchersView=require("jira/viewissue/watchers-voters/views/abstract-watchers-view");var MultiUserListPicker=MultiUserListPicker;var Meta=require("jira/util/data/meta");var _=require("underscore");var logger=require("jira/util/logger");var MultiUserListPicker=require("jira/field/multi-user-list-picker");var TEMPLATES=JIRA.Templates.Issue;var $=require("jquery");var SmartAjax=require("jira/ajs/ajax/smart-ajax");return AbstractWatchersView.extend({events:{selected:"addWatcherToModel",unselect:"removeWatcherFromModel"},_render:function _render(){this.$el.html(TEMPLATES.watchersWithBrowse({watchers:this.collection.toJSON()}));var picker=new MultiUserListPicker({element:this.$el.find(".watchers-user-picker"),width:220});this.$el.find(".js-add-watchers-label").attr("for",picker.$field.attr("id"))},focus:function focus(){this.$el.find("#watchers-textarea").focus()},addWatcherToModel:function addWatcherToModel(e,descriptor){e.preventDefault();this.collection.addWatcher(descriptor.value()).done(_.bind(function(){this._incrementWatcherCount();this._refreshWatchersList();if(descriptor.value()===Meta.get("remote-user")){this.watch()}},this))},removeWatcherFromModel:function removeWatcherFromModel(e,descriptor){this.collection.removeWatcher(descriptor.value()).done(_.bind(function(){this._decrementWatcherCount();this._refreshWatchersList();if(descriptor.value()===Meta.get("remote-user")){this.unwatch();logger.trace("jira.issue.watcher.deleted")}},this))},_refreshWatchersList:function(){var $el=$("#watcher-names");SmartAjax.makeRequest({url:contextPath+"/rest/rocket-rest/1.0/watchers/"+$("#watching-toggle").attr("rel"),dataType:"json",type:"GET",contentType:"application/json",complete:function(xhr,textStatus,smartAjaxResult){if(smartAjaxResult.successful){$el.empty().html(smartAjaxResult.data.watcherListHtml)}}})}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/views/watchers-no-browse-view.js' */
define("jira/viewissue/watchers-voters/views/watchers-no-browse-view",["require"],function(e){var t=e("jira/viewissue/watchers-voters/views/abstract-watchers-view"),r=e("jira/util/data/meta"),a=e("underscore"),i=e("jquery"),s=e("jira/util/logger"),n=e("jira/util/formatter"),o=JIRA.Templates.Issue;return t.extend({events:{"click .remove-recipient":"removeWatcher",submit:"addWatcher"},addWatcher:function(e){e.preventDefault(),this.removeInlineError();var t=i("#watchers-nosearch"),s=i.trim(t.val());t.attr("disabled","disabled"),this.hasUsername(s)?(t.removeAttr("disabled"),this.showInlineError(n.format("User {0} is already watching this issue",s)),t.val("")):this.collection.getUser(s).done(a.bind(function(e){var a=JIRA.Templates.Fields.recipientUsername({icon:e.avatarUrls["16x16"],username:e.name,displayName:e.displayName});s===r.get("remote-user")&&this.watch(),t.val(""),this.$(".watchers").append(a),this.collection.addWatcher(e.name),this._incrementWatcherCount()},this)).fail(a.bind(function(e){404===e.status&&this.showInlineError("User does not exist")},this)).always(function(){t.removeAttr("disabled").focus()})},hasUsername:function(e){var t=!1;return this.$(".watchers li").each(function(){if(i(this).attr("data-username")===e)return t=!0,!1}),t},removeInlineError:function(){this.$(".error").remove()},showInlineError:function(e){i("<div />").addClass("error").text(e).insertAfter(this.$(".description"))},focus:function(){i("#watchers-nosearch").focus()},removeWatcher:function(e){e.preventDefault();var t=i(e.target).closest("li"),a=t.attr("data-username");a&&(t.remove(),this.collection.removeWatcher(a),this._decrementWatcherCount(),a===r.get("remote-user")&&this.unwatch()),s.trace("jira.issue.watcher.deleted")},_render:function(){this.$el.html(o.watchersNoBrowse({watchers:this.collection.toJSON()}))}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/views/watchers-read-only-view.js' */
define("jira/viewissue/watchers-voters/views/watchers-read-only-view",["require"],function(e){var s=e("jira/viewissue/watchers-voters/views/abstract-watchers-view"),r=JIRA.Templates.Issue;return s.extend({_render:function(){this.$el.html(r.usersListReadOnly({users:this.collection.toJSON()}))}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/views/watchers-inline-dialog-view.js' */
define("jira/viewissue/watchers-voters/views/watchers-inline-dialog-view",["require"],function(e){var t=e("backbone"),i=e("jira/skate"),n=t.View.prototype.setElement;return t.View.extend({id:"inline-dialog-watchers",events:{"click .cancel":function(e){e.preventDefault(),this.hide()}},setElement:function(e){var s=e instanceof t.$?e.get(0):e;if(s)return this.el&&this.el.parentNode&&this.el!==s&&this.el.parentNode.removeChild(this.el),n.call(this,s),i.init(this.el),this},contents:function(e){this.$el.find(".aui-inline-dialog-contents").html(e)},show:function(){this.el.setAttribute("open","")},hide:function(){this.el.removeAttribute("open")},isVisible:function(){return!!this.el.hasAttribute("open")}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/watchers.js' */
define("jira/viewissue/watchers-voters/watchers",["require"],function(e){"use strict";function i(){return g||(g=new a({el:h("#inline-dialog-watchers").get(0)})),g}function s(e){return e.isReadOnly?n:e.canBrowseUsers?r:t}var n=e("jira/viewissue/watchers-voters/views/watchers-read-only-view"),t=e("jira/viewissue/watchers-voters/views/watchers-no-browse-view"),r=e("jira/viewissue/watchers-voters/views/watchers-view"),o=e("jira/viewissue/watchers-voters/entities/watchers-user-collection"),a=e("jira/viewissue/watchers-voters/views/watchers-inline-dialog-view"),c=e("jira/util/events"),l=e("jira/util/events/types"),w=e("jira/util/events/reasons"),u=e("jira/issue"),d=e("aui/inline-dialog"),v=e("jira/util/key-code"),h=e("jquery"),g=null;h(document).on("click","#view-watcher-list",function(e){e.preventDefault();var n=i(),t=h("#watching-toggle").next(".icon"),r=new o(u.getIssueKey());t.addClass("loading"),new(s(r))({collection:r}).render().done(function(e){t.removeClass("loading"),n.contents(e),n.show()}),r.on("errorOccurred",function(){n.hide()})}),h(document).on("keydown",function(e){g&&e.keyCode===v.ESCAPE&&d.current!==g.el&&g.isVisible()&&(d.current&&d.current.hide(),g.hide())}),h(document).on("click",function(e){if(g){0===h(e.target).closest("#inline-dialog-watchers, #watchers-suggestions").length&&g.isVisible()&&g.hide()}}),c.bind(l.NEW_CONTENT_ADDED,function(e,s,n){n===w.panelRefreshed&&s.is("#peoplemodule")&&i().setElement(s.find("#inline-dialog-watchers").get(0))})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/voters.js' */
define("jira/viewissue/watchers-voters/voters",["require"],function(e){"use strict";var i=e("jira/viewissue/watchers-voters/entities/voters-user-collection"),r=e("jira/viewissue/watchers-voters/views/voters-view"),t=e("jira/issue"),n=e("jira/ajs/layer/inline-layer"),s=e("aui/inline-dialog"),o=e("jira/util/key-code"),c=e("jquery"),u=s("#view-voter-list","voters",function(e,n,s){var o=c("#vote-toggle").next(".icon"),l=new i(t.getIssueKey());o.addClass("loading"),new r({collection:l}).render().done(function(i){e.html(i),e.find(".cancel").click(function(e){u.hide(),e.preventDefault()}),o.removeClass("loading"),s()}),l.on("errorOccurred",function(){u.hide()})},{width:240,useLiveEvents:!0,items:"#view-voters-list",preHideCallback:function(){return!n.current}});c(document).bind("keydown",function(e){e.keyCode===o.ESCAPE&&s.current!==u&&u.is(":visible")&&(s.current&&s.current.hide(),u.hide())}),c(document).click(function(e){var i=s.current;i&&"voters"===i.id&&(c(e.target).closest("#inline-dialog-voters").length||i.hide())})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/toggler.js' */
define("jira/viewissue/watchers-voters/toggler",["require"],function(require){var SmartAjax=require("jira/ajs/ajax/smart-ajax");var Messages=require("jira/flag");var $=require("jquery");var contextPath=require("wrm/context-path");var formatter=require("jira/util/formatter");var toggleVotingAndWatching=function toggleVotingAndWatching(trigger,className,resultContainer,issueOpTrigger,watcherList,i18n){var classNameOn=className+"-on";var classNameOff=className+"-off";var restPath="/voters";var spinner=trigger.next(".icon");var data;var method="POST";if(trigger.hasClass(classNameOn)){method="DELETE"}if(className.indexOf("watch")!==-1){restPath="/watchers"}trigger.removeClass(classNameOn).removeClass(classNameOff);if(method==="POST"){data={dummy:true}}$(SmartAjax.makeRequest({url:contextPath()+"/rest/api/1.0/issues/"+trigger.attr("rel")+restPath,type:method,dataType:"json",data:data,contentType:"application/json",complete:function complete(xhr,textStatus,smartAjaxResult){var optIn=method==="POST";if(smartAjaxResult.successful){if(optIn){trigger.addClass(classNameOn);trigger.text(i18n.titleOn);issueOpTrigger.attr("title",i18n.titleOn).text(i18n.textOn)}else{trigger.addClass(classNameOff);trigger.text(i18n.titleOff);issueOpTrigger.attr("title",i18n.titleOff).text(i18n.textOff)}resultContainer.text(smartAjaxResult.data.count);resultContainer[optIn?"addClass":"removeClass"](classNameOn);resultContainer[optIn?"removeClass":"addClass"](classNameOff);if(className.indexOf("watch")!==-1){$(SmartAjax.makeRequest({url:contextPath()+"/rest/rocket-rest/1.0/watchers/"+trigger.attr("rel"),dataType:"json",type:"GET",contentType:"application/json",complete:function(xhr,textStatus,smartAjaxResult){if(smartAjaxResult.successful){watcherList.empty().html(smartAjaxResult.data.watcherListHtml)}}}))}}else{if(!smartAjaxResult.aborted){displayErrorMessage(smartAjaxResult)}if(optIn){trigger.addClass(classNameOff);trigger.text(i18n.titleOff);issueOpTrigger.attr("title",i18n.titleOff).text(i18n.textOff)}else{trigger.addClass(classNameOn);trigger.text(i18n.titleOn);issueOpTrigger.attr("title",i18n.titleOn).text(i18n.textOn)}}}})).throbber({target:spinner})};var displayErrorMessage=function displayErrorMessage(smartAjaxResult){var message=SmartAjax.buildSimpleErrorContent(smartAjaxResult,{alert:true});if(smartAjaxResult.hasData){var data=JSON.parse(smartAjaxResult.data);if(data.errorMessages){message=data.errorMessages[0]}}Messages.showErrorMsg(message,{closeable:true})};$(document).delegate("#toggle-vote-issue","click",function(e){e.preventDefault();$("#vote-toggle").click()});$(document).delegate("#toggle-watch-issue","click",function(e){e.preventDefault();$("#watching-toggle").click()});var addI18nErrorCodes=function addI18nErrorCodes(i18n){$("input[type=hidden][id|=error]").each(function(index,elem){var i18n_id=elem.id.replace("error-","");i18n[i18n_id]=elem.value})};$(document).delegate("#vote-toggle","click",function(e){e.preventDefault();var i18n={titleOn:"Remove vote for this issue",titleOff:"Vote for this issue",textOn:"Remove vote",textOff:"Add vote",actionTextOff:"Vote",actionTextOn:"Voted"};var trigger=$(this);var resultContainer=$(document.querySelectorAll("#vote-data"));var issueOpTrigger=$(document.querySelectorAll("#toggle-vote-issue"));addI18nErrorCodes(i18n);toggleVotingAndWatching(trigger,"vote-state",resultContainer,issueOpTrigger,null,i18n)});$(document).delegate("#watching-toggle","click",function(e){e.preventDefault();var i18n={titleOn:"Stop watching this issue",titleOff:"Start watching this issue",textOn:"Stop watching",textOff:"Watch issue",actionTextOff:"Watch",actionTextOn:"Watching"};var trigger=$(this);var resultContainer=$(document.querySelectorAll("#watcher-data"));var issueOpTrigger=$(document.querySelectorAll("#toggle-watch-issue"));addI18nErrorCodes(i18n);toggleVotingAndWatching(trigger,"watch-state",resultContainer,issueOpTrigger,$("#watcher-names"),i18n)})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/initWatchersAndVoters.js' */
AJS.namespace("JIRA.VotersUsersCollection",null,require("jira/viewissue/watchers-voters/entities/voters-user-collection")),AJS.namespace("JIRA.WatchersUsersCollection",null,require("jira/viewissue/watchers-voters/entities/watchers-user-collection")),AJS.namespace("JIRA.VotersView",null,require("jira/viewissue/watchers-voters/views/voters-view")),AJS.namespace("JIRA.WatchersView",null,require("jira/viewissue/watchers-voters/views/watchers-view")),AJS.namespace("JIRA.WatchersNoBrowseView",null,require("jira/viewissue/watchers-voters/views/watchers-no-browse-view")),AJS.namespace("JIRA.WatchersReadOnly",null,require("jira/viewissue/watchers-voters/views/watchers-read-only-view"));;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/AnalyticsUtils.js' */
define("jira/viewissue/analytics-utils",["jira/util/data/meta","jira/issuenavigator/issue-navigator","jira/util/strings","wrm/context-path","jquery","exports"],function(n,t,e,i,r,s){function a(){return r(document.body).hasClass("navigator-issue-only")}function u(){return!!n.get("is-servicedesk-rendered")}function o(){return t.isNavigator()}function c(){return a()&&e.contains(location.search,"jql=")}function l(){return e.startsWith(location.pathname,i()+"/projects/")}s.context=function(){return c()?"fullscreen-issuenav":a()?"fullscreen":u()?"sd-queue":o()?"issuenav":l()?"project":"unknown"}});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/slideshow/slideshow-configuration.js' */
define("jira/viewissue/slideshow/slideshow-configuration",["jira/ajs/keyboardshortcut/keyboard-shortcut-toggle","jquery"],function(e,t){var i={type:"image",centerOnScroll:!0,onStart:e.disable,onClosed:e.enable};return t.extend({},i,{transitionIn:"elastic",transitionOut:"elastic"})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/element/image-wrap.js' */
define("jira/viewissue/element/image-wrap",["jira/fileviewer","jira/skate","jira/featureflags/feature-manager","underscore"],function(e,a,i,t){i.isFeatureEnabled("jira.fileviewer.disabled")||a("file-preview-type",{type:a.type.ATTRIBUTE,attached:t.debounce(function(){e.attachToElements()},0),detached:function(){e.closeViewer()}})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jquery/plugins/shorten/shorten.js' */
define("jira/ajs/shorten/shortener",["jira/util/formatter","jira/ajs/control","jira/data/local-storage","jquery"],function(t,e,i,n){return e.extend({_getDefaultOptions:function(){return{items:"a, span",numRows:1,shortenText:"hide",shortenOnInit:!0,persist:!0,expandButtonTooltip:"Click to view {0} more",collapseButtonTooltip:"Hide"}},init:function(t){"string"==typeof t&&(t={element:t}),t=t||{},this.options=n.extend(this._getDefaultOptions(),t),this._timerId=0,this.expanded=!1,this.$container=n(this.options.element),this._assignEvents("body",document.body),this._ready()},_isValid:function(){return!this.initialized&&this.$container.is(":visible")&&this.$container.children().length>0},_ready:function(){this._isValid()&&(this.$items=this.$container.children(this.options.items),this.$expandButton=this._render("expandButton"),this.$collapseButton=this._render("collapseButton"),this._assignEvents("expand-button",".shortener-expand"),this._assignEvents("collapse-button",".shortener-collapse"),(!n.browser.msie||n.browser.version>="9")&&this._assignEvents("resize-region",window),this._isCollapsedOnInit()?this.collapse():this.expand(),this.initialized=!0)},_renders:{expandButton:function(){return n("<a href='#' class='ellipsis shortener-expand'></a>").attr("title",this.options.expandButtonTooltip).add("<br>")},collapseButton:function(){return n("<a href='#' title='Hide' class='icon icon-hide shortener-collapse'></a>").append(n("<span>").text(this.options.collapseButtonTooltip))}},_events:{"expand-button":{click:function(t){t.currentTarget===this.$expandButton[0]&&(t.preventDefault(),this.expand(),this._saveState("expanded"))}},"collapse-button":{click:function(t){t.currentTarget===this.$collapseButton[0]&&(t.preventDefault(),this.collapse(),this._saveState("collapsed"),this.$container.scrollIntoView())}},"resize-region":{resize:function(){if(clearTimeout(this._timerId),!this.expanded){var t=this;this._timerId=setTimeout(function(){t.collapse()},400)}}},body:{tabSelect:function(){this._ready()}}},_saveState:function(t){try{i.setItem("AJS.Shortener#"+this.$container.closest("[id]").attr("id"),t)}catch(t){}},_loadState:function(){return i.getItem("AJS.Shortener#"+this.$container.closest("[id]").attr("id"))},_isCollapsedOnInit:function(){var t=this._loadState();return null!==t?"expanded"!==t:this.options.shortenOnInit},_removeButtons:function(){this.$expandButton.remove(),this.$collapseButton.remove()},_getOverflowIndex:function(){if(this.$items.length>1)for(var t=1,e=-1,i=0;i<this.$items.length;i++){var n=this.$items.eq(i).offset().left;if(n<=e&&++t>this.options.numRows)return i;e=n}return-1},expand:function(){this._removeButtons(),this._getOverflowIndex()>0&&(this.$collapseButton=this._render("collapseButton"),this.$container.append(this.$collapseButton),this.$container.css("height","auto"),n.browser.msie&&n.browser.version<"9"&&n("body").toggleClass("reflow")),this.expanded=!0},collapse:function(){this._removeButtons();var e=this._getOverflowIndex();if(e>0){this.$container.css({position:"absolute",visibility:"hidden",width:this.$container[0].clientWidth+"px"});var i=this.$expandButton.first();do{var s=this.$items.length-e;i.text("("+s+")"),this.$expandButton.insertBefore(this.$items[e]),e--;var o=this.$items.eq(e).offset(),r=this.$expandButton.offset();if(o.left<r.left&&r.top<o.top+10)break}while(e>0);var a=e<this.$items.length-1?this.$items.eq(e+1).offset().top-this.$container.offset().top+"px":"auto";this.$container.css({height:a,position:"static",visibility:"visible",width:"auto"}),i.attr("title",t.format(this.options.expandButtonTooltip,s)),n.browser.msie&&n.browser.version<"9"&&n("body").toggleClass("reflow")}else this.$container.css("height","auto");this.expanded=!1}})}),define("jira/jquery/plugins/shorten/shorten",["jira/ajs/shorten/shortener","jquery"],function(t,e){e.fn.shorten=function(e){var i=[];return e=e||{},this.each(function(){e.element=this,i.push(new t(e))}),i}}),AJS.namespace("AJS.Shortener",null,require("jira/ajs/shorten/shortener")),function(){require("jira/jquery/plugins/shorten/shorten")}();;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/element/shorten.js' */
define("jira/viewissue/element/shorten",["jira/ajs/shorten/shortener","jira/skate"],function(e,t){return t("shorten",{type:t.type.CLASSNAME,attached:function(t){var n={};n.element=t,new e(n)}})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/initToggleBlock.js' */
define("jira/viewissue/init-toggle-block",["jira/util/events","jira/util/events/types","jira/toggleblock/toggle-block"],function(e,t,i){new i({blockSelector:".toggle-wrap",triggerSelector:"#issue-content .mod-header .toggle-title",storageCollectionName:"block-states"}),t.ISSUE_REFRESHED&&e.bind(t.ISSUE_REFRESHED,function(){t.REFRESH_TOGGLE_BLOCKS&&e.trigger(t.REFRESH_TOGGLE_BLOCKS)})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/comment/CommentForm.js' */
define("jira/viewissue/comment/comment-form",["jira/util/formatter","jira/util/events","jira/util/events/types","jira/ajs/ajax/smart-ajax","jira/issue","jira/dialog/form-dialog","wrm/context-path","jira/jquery/deferred","jquery"],function(formatter,Events,Types,SmartAjax,IssueApi,FormDialog,wrmContextPath,Deferred,$){var contextPath=wrmContextPath();var commentForm={setCaretAtEndOfCommentField:function setCaretAtEndOfCommentField(){var $field=this.getField();var field=$field[0];var length;if($field.length){length=$field.val().length;$field.scrollTop($field.attr("scrollHeight"));if(field.setSelectionRange&&length>0){field.setSelectionRange(length,length)}}},disable:function disable(){this.getForm().find("textarea").attr("readonly","readonly");this.getForm().find("input[type=submit]").attr("disabled","disabled")},isDirty:function isDirty(){var field=this.getField();if(field.length){return field[0].value!==field[0].defaultValue}return false},handleBrowseAway:function handleBrowseAway(){if(!commentForm.isDirty()){return}var form=commentForm.getForm();var isVisible=form.length&&form.is(":visible");if(isVisible){return "You have entered a comment on this issue. If you navigate away from this page without first saving, the comment will be lost."}},isVisibilityAvailble:function isVisibilityAvailble(){return this.getForm().find("#commentLevel :selected").val()!="none"},setSubmitState:function setSubmitState(){if($.trim(this.getField().val()).length>0&&this.isVisibilityAvailble()){this.getForm().find("#issue-comment-add-submit").removeAttr("disabled")}else{this.getForm().find("#issue-comment-add-submit").attr("disabled","disabled")}},enable:function enable(){this.getForm().find("textarea").removeAttr("readonly");this.getForm().find("input[type=submit]").removeAttr("disabled")},getCommentVisibility:function getCommentVisibility(){var visibility=this.getForm().find("#commentLevel :selected").val();if(visibility){var split_v=visibility.split(":");return{type:split_v[0],value:this.getForm().find("#commentLevel :selected").text()}}return null},ajaxSubmit:function ajaxSubmit(){var $loading=$('<span class="icon throbber loading"></span>');var issueId=IssueApi.getIssueId();var issueKey=IssueApi.getIssueKey();var restURL=contextPath+"/rest/rocket-commentextra/1.0/additionalfields/"+issueId+"/addComment";var newComment={body:this.getField()[0].value.replace(/\r?\n/g,"\r\n")};var visibility=this.getCommentVisibility();if(visibility){newComment.visibility=visibility}var $additionalFields=$(".additionalCommentField");var additionalFieldsMap={};$.each($additionalFields,function(i,additionalField){var fieldId=additionalField.id;var fieldValue=$(additionalField).val().trim();if(fieldId=="additionalRecipient"||fieldId=="acf_additionalemailrecipients"||fieldId=="additionalRCPRecipient"||fieldId=="ccToCustomer"){additionalFieldsMap[fieldId]=fieldValue}else{if(fieldId=="acf_sendtoretain"||fieldId=="acf_sendcommenttocustomer"||fieldId=="acf_sendtorcp"||fieldId=="acf_notifycustomer"){if($(additionalField).prop("checked")){additionalFieldsMap[fieldId]=fieldValue}}}});$(".additional-errors").remove();var updateDone=Deferred();var result=$.ajax({url:restURL,type:"POST",contentType:"application/json",data:JSON.stringify({additionalFieldsMap:additionalFieldsMap,commentJsonBean:newComment}),success:function success(data){$(".additionalCommentField").val("");Events.trigger(Types.UNLOCK_PANEL_REFRESHING,["addcommentmodule"]);Events.trigger(Types.REFRESH_ISSUE_PAGE,[issueId,{complete:function complete(){var newCommentId="comment-"+data.id;$("#"+newCommentId).scrollIntoView({marginBottom:200,marginTop:200});var $focusedTabs=$("#issue_actions_container > .issue-data-block.focused");$focusedTabs.removeClass("focused");var $newfocusedTab=$("#"+newCommentId);$newfocusedTab.addClass("focused");$loading.remove();commentForm.enable();updateDone.resolve()}}])},error:function error(xhr){function buildErrorDialog(errorMessage){var errorContent="<h2>"+"Error"+'</h2><div class="ajaxerror"><div class="aui-message error"><span class="aui-icon icon-warning"/>'+errorMessage+"</div></div>";return $(errorContent)}var response=$.parseJSON(xhr.responseText);if(response&&response.errors){for(fieldId in response.errors){$("#"+fieldId+"-error-container").append('<div class="error additional-errors">'+response.errors[fieldId]+"</div>")}}else{var content;if(response&&response.errors&&response.errors.comment){content=buildErrorDialog(response.errors.comment)}else{content=SmartAjax.buildDialogErrorContent(xhr)}new FormDialog({content:content}).show()}$loading.remove();commentForm.enable();updateDone.reject()}});var $buttonContainer=this.getForm().find("input[type=submit]").parent();if($buttonContainer.is(".wiki-button-bar-content")){$loading.css("margin-right","10px").prependTo($buttonContainer)}else{$loading.appendTo($buttonContainer)}return $.when(result,updateDone)},getForm:function getForm(){var $form=$("form#issue-comment-add");if($form.length===1){this.$form=$form}return this.$form||$()},getField:function getField(){return this.getForm().find("#comment")},getSubmitButton:function getSubmitButton(){return this.getForm().find("#issue-comment-add-submit")},hide:function hide(cancel){if(cancel){this.cancel()}this.getForm().detach();if(Types.UNLOCK_PANEL_REFRESHING){Events.trigger(Types.UNLOCK_PANEL_REFRESHING,["addcommentmodule"])}},show:function show(){this.focus();if(Types.LOCK_PANEL_REFRESHING){Events.trigger(Types.LOCK_PANEL_REFRESHING,["addcommentmodule"])}},focus:function focus(){this.focusField();this.setCaretAtEndOfCommentField()},focusField:function focusField(){this.getField().focus().trigger("keyup");this.getSubmitButton().scrollIntoView({marginBottom:200})},showNoCommentMsg:function showNoCommentMsg(e){if(this.getField().val()===""){$("#emptyCommentErrMsg").show();return true}},cancel:function cancel(){var instance=this;setTimeout(function(){instance.getField().val("")},100);$("#comment-preview_link.selected").click()}};return commentForm});define("jira/viewissue/comment/footer-comment",["jira/viewissue/comment/comment-form","jquery"],function(commentForm,$){var commentFormIsBeingSubmitted=false;var isInPreviewMode=false;var footerComment={getModule:function getModule(){return $("#addcomment")},isActive:function isActive(){return this.getModule().hasClass("active")},hide:function hide(cancel){if(this.isActive()){var dirtyMessage=commentForm.handleBrowseAway();if(isInPreviewMode||commentFormIsBeingSubmitted||!dirtyMessage||confirm(dirtyMessage)){this.getModule().removeClass("active");commentForm.hide(cancel)}}},ajaxSubmit:function ajaxSubmit(){commentFormIsBeingSubmitted=true;commentForm.ajaxSubmit().then(function(){footerComment.hide(true)})},show:function show(){if(!this.isActive()){commentFormIsBeingSubmitted=false;this.getModule().addClass("active");this.appendForm();commentForm.show()}else{commentForm.focusField()}},appendForm:function appendForm(){this.getModule().find(".mod-content").append(commentForm.getForm())}};footerComment.setPreviewMode=function(isEnabled){isInPreviewMode=Boolean(isEnabled)};return footerComment});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/initJiraFooterComment.js' */
define("jira/viewissue/init-comment-areas",["require"],function(e){var t=e("jira/viewissue/comment/comment-form"),n=e("jira/viewissue/comment/footer-comment"),i=e("jira/issue"),o=e("jquery"),m=e("jira/libs/parse-uri"),r=window.onbeforeunload,a={};a.openFooterComment=function(){n.show(),t.getForm().find("#commentLevel").bind("change",function(){t.setSubmitState()}),t.setSubmitState()},o(document).delegate("#addcomment #issue-comment-add","submit",function(e){n.ajaxSubmit(),e.preventDefault()}).delegate(".issue-header #comment-issue","click",function(e){n.show(),e.preventDefault()}).delegate("#footer-comment-button","click",function(e){a.openFooterComment(),e.preventDefault()}).delegate("#addcomment .cancel","click",function(e){e.preventDefault(),n.hide(!0)}).delegate("#issue-comment-add","submit",function(){window.setTimeout(function(){t.disable()},0)}).delegate("#issue-comment-add #comment","input",function(){t.setSubmitState()}).delegate("#issue-comment-add input[type='submit']","click",function(e){t.showNoCommentMsg()&&e.preventDefault()}).bind("showWikiInput",function(){n.setPreviewMode(!1);var e=t.getField();e.is(":visible:enabled")&&(i.getStalker().trigger("stalkerHeightUpdated"),e.length>0&&e.focus(),t.setCaretAtEndOfCommentField())}).bind("showWikiPreview",function(){n.setPreviewMode(!0),i.getStalker().trigger("stalkerHeightUpdated")}),window.onbeforeunload=function(){var e=void 0;return o.isFunction(r)&&(e=r.apply(this,arguments)),e||t.handleBrowseAway.apply(this,arguments)},o(function(){"add-comment"===m(window.location.href).anchor&&a.openFooterComment()})}),define("jira/viewissue/invoke-comment-trigger",["jquery"],function(e){return function(){var t=e(".add-issue-comment");if(0!==t.length){var n=t.filter(".toolbar-trigger");n.length>0?n.click():t.click()}}}),function(){var e=require("jira/viewissue/comment/comment-form");AJS.namespace("JIRA.Issue.CommentForm",null,e),AJS.namespace("JIRA.Issue.getDirtyCommentWarning",null,e.handleBrowseAway),AJS.namespace("JIRA.Issue.invokeCommentTrigger",null,require("jira/viewissue/invoke-comment-trigger"))}();;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/initCustomFieldTabs.js' */
define("jira/viewissue/init-custom-field-tabs",["jira/util/logger","jira/util/events","jira/util/events/types","aui/tabs","jquery"],function(t,i,e,n,a){var r="#customfieldmodule",l=function(i){var e;"string"!=typeof i&&i.length>0||("#"!==i[0]&&(i="#"+i),t.log("activating tab",i),e=a("a[href='"+i+"']",r),e.length&&n.change(e))},u=function(t){var i=a(t.target).closest(".tabs-pane");i.length>0&&l(i.attr("id"))};a(function(){e.NEW_CONTENT_ADDED&&i.bind(e.NEW_CONTENT_ADDED,function(t,i){var e=i.find(r);e.unbind("reveal"),e.bind("reveal",u),n.setup()}),e.PANEL_REFRESHED&&i.bind(e.PANEL_REFRESHED,function(t,i,e,n){if("details-module"===i){var a=n.find(r).find(".active-tab");1===a.length&&l(a.find("a").attr("href"))}}),a(r).bind("reveal",u)})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/initSubtaskTimeLogging.js' */
define("jira/viewissue/init-subtask-time-logging",["jquery"],function(i){i(document).delegate("#tt_include_subtasks input","click",function(t){i(this).is(":checked")?(i("#tt_info_single").hide(),i("#tt_info_aggregate").show()):(i("#tt_info_aggregate").hide(),i("#tt_info_single").show())})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/ViewIssueTabs.soy' */
// This file was automatically generated from ViewIssueTabs.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Issue.Tabs.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Issue == 'undefined') { JIRA.Templates.Issue = {}; }
if (typeof JIRA.Templates.Issue.Tabs == 'undefined') { JIRA.Templates.Issue.Tabs = {}; }


JIRA.Templates.Issue.Tabs.label = function(opt_data, opt_ignored) {
  return '<strong>' + soy.$$escapeHtml(opt_data.text) + '</strong>';
};
if (goog.DEBUG) {
  JIRA.Templates.Issue.Tabs.label.soyTemplateName = 'JIRA.Templates.Issue.Tabs.label';
}


JIRA.Templates.Issue.Tabs.tab = function(opt_data, opt_ignored) {
  return '<a id="' + soy.$$escapeHtml(opt_data.id) + '" href="' + soy.$$escapeHtml(opt_data.href) + '" class="' + soy.$$escapeHtml(opt_data.linkClass) + '">' + JIRA.Templates.Issue.Tabs.label(opt_data) + '</a>';
};
if (goog.DEBUG) {
  JIRA.Templates.Issue.Tabs.tab.soyTemplateName = 'JIRA.Templates.Issue.Tabs.tab';
}
;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/ViewIssueTabsAnalytics.js' */
define("jira/viewissue/tabs/analytics",["jquery","jira/analytics","jira/util/strings","jira/viewissue/analytics-utils","underscore"],function(a,t,e,i,s){function n(a){return o.indexOf(a)>-1?a:e.hashCode(a)}function r(a){return{tab:n(a.attr("data-key")),tabPosition:a.index()}}function l(a,t){return{inNewWindow:a,keyboard:t,context:i.context()}}var o=["com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel","com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel","com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel","com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel","com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab"];return{tabClicked:function(a,e,i){var n=a.parent(),o=s.extend({},l(e,i),r(n));t.send({name:"jira.viewissue.tab.clicked",properties:o})},buttonClicked:function(a,e,i){if(a.is("[data-tab-sort]")){var n=a.data("order"),o=a.parents(".tabwrap").find("li.active");t.send({name:"jira.viewissue.tabsort.clicked",properties:s.extend({},l(e,i),r(o),{order:n})})}}}});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/ViewIssueTabs.js' */
define("jira/viewissue/tabs",["jira/util/logger","jira/util/formatter","jquery","jira/jquery/deferred","jira/util/data/meta","jira/dialog/form-dialog","jira/ajs/ajax/smart-ajax","jira/userhover/userhover","jira/viewissue/tabs/analytics"],function(t,e,a,i,n,r,s,o,u){function c(t){t=t||document,a.each(_,function(e,a){a(t)})}function l(t){var e=a(t).find(".issuePanelWrapper"),i=a(t).find("#issue_actions_container");k=i.length?i:k,C=e.length?e:C}function f(t,e){var a=new r({id:"issue-tab-error-dialog",widthClass:"small",content:s.buildDialogErrorContent(t,!1)});d(e),k.show(),a.show()}function d(t){a("#issue-tabs li").each(function(){var e=a(this),i=e.data("key"),n=e.data("label");if(i==t)e.addClass("active"),e.html(T.label({text:n}));else{e.removeClass("active");var r=e.data("id"),s=e.data("href");e.html(T.tab({id:r,href:s,linkClass:I,text:n}))}}),p(a("#issue-tabs"))}function h(t){d(t)}function v(t,e){var a=t.pageX,i=t.pageY,n=e.offset(),r=e.outerWidth(),s=e.outerHeight();return 0==a&&0==i||!(a>=n.left&&a<=n.left+r&&i>=n.top&&i<=n.top+s)}function p(t){var e=a(t).find("li.active").data("key");a(t).find(S).click(function(t){var i=a(this),n=v(t,i),r=i.parent().data("key"),s=t.metaKey;r?u.tabClicked(i,s,n):u.buttonClicked(i,s,n),s||(t.preventDefault(),r&&h(r),m(e,i.attr("href")).done(function(t){n&&(r?t.find("#"+i.attr("id")+" > :first-child").focus():t.find(".sortwrap  > :first-child").focus())}).done(c))})}function m(e,n){var r=i();q&&q.abort();var o=s.makeRequest({jqueryAjaxFn:R?a.pjax:a.ajax,headers:{"X-PJAX":!0},container:J,url:n,timeout:null,complete:function(i,n,s){if("abort"!=n){if(q=null,!s.successful)return void((s.status<300||s.status>=400)&&f(s,e));var o=a(this.container),u=document.createElement("div");u.innerHTML=s.data;var c=document.createDocumentFragment().appendChild(u);R||b(o,c),t.trace("jira.issue.tab.loaded"),r.resolve(o)}}});return a(o).throbber({target:C}),q=o,r}function b(t,e){var i=e.querySelectorAll(".tabwrap"),n=t.find(".tabwrap"),r=a(e.querySelectorAll("#issue_actions_container")).contents(),s=k.contents();if(i.length&&n.length&&r.length&&s.length){n.replaceWith(i),k.stop(!0,!0);var o=k.height();k.append(r);var u=k.height()-o,c=o-u;c>0?(k.css("height",u+c),s.remove(),g(u,c)):k.empty().append(r),a(e.querySelectorAll("script")).each(function(){a.globalEval(this.text||this.textContent||this.innerHTML||"")})}else t.empty().append(e)}function g(t,e){var a=Math.min(e/800*1e3,1e3);setTimeout(function(){k.animate({height:t+1},a,"easeOutQuart",function(){k.css("height","auto")})},150)}function j(t){a(t).find(S).each(function(){var t=a(this);t.attr("href",t.attr("href")+"#issue-tabs")})}function y(t){!R||a.support.pjax?p(t):j(t)}function w(t){a(t).bind("moveToFinished",function(t,e){a("a.twixi:visible",e).focus()})}function x(t){t.find("time.livestamp").livestamp()}function A(t){a.inArray(t,_)<0&&_.push(t)}var C,k,q,T=JIRA.Templates.Issue.Tabs,R=!1!==n.get("viewissue-use-history-api"),I="ajax-activity-content",J="#activitymodule div.mod-content",S=e.format("a.{0}",I),_=[];return A(l),A(y),A(w),A(o),A(x),{onTabReady:A,domReady:c}}),AJS.namespace("JIRA.ViewIssueTabs",null,require("jira/viewissue/tabs"));;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/initViewIssueTabs.js' */
define("jira/viewissue/init-view-issue-tabs",["require"],function(i){var e=i("jquery"),n=i("jira/util/events"),s=i("jira/util/events/types"),t=i("jira/viewissue/tabs");e(function(){s.PANEL_REFRESHED&&n.bind(s.PANEL_REFRESHED,function(i,e,n,s){if("activitymodule"===e){var t=s.find("#issue_actions_container > .issue-data-block.focused");1===t.length&&n.find("#"+t.attr("id")).addClass("focused")}})}),n.bind(s.NEW_CONTENT_ADDED,function(i,e){t.domReady(e)})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/initViewissue.js' */
require(["jira/viewissue/element/shorten","jira/viewissue/element/image-wrap","jira/viewissue/watchers-voters/watchers","jira/viewissue/watchers-voters/voters","jira/viewissue/watchers-voters/toggler","jira/viewissue/init-comment-areas","jira/viewissue/init-subtask-time-logging","jira/viewissue/init-toggle-block","jira/viewissue/init-custom-field-tabs","jira/viewissue/init-view-issue-tabs"],function(){});;
;
/* module-key = 'com.atlassian.plugin.jslibs:marionette-1.4.1-factory', location = 'factories/marionette/1.4.1/marionette-1.4.1-factory.js' */
(function(e){define("atlassian/libs/factories/marionette-1.4.1",function(){return function(d,k){var g=k.Marionette;e.call({_:d,Backbone:k});var h=k.Marionette;h.VERSION="1.4.1";k.Marionette=g;return h}})})(function(){var e=this.Backbone,d=this._,k=function(a){this._views={};this._indexByModel={};this._indexByCustom={};this._updateLength();d.each(a,this.add,this)};d.extend(k.prototype,{add:function(a,b){var f=a.cid;this._views[f]=a;a.model&&(this._indexByModel[a.model.cid]=f);b&&(this._indexByCustom[b]=
f);this._updateLength()},findByModel:function(a){return this.findByModelCid(a.cid)},findByModelCid:function(a){return this.findByCid(this._indexByModel[a])},findByCustom:function(a){return this.findByCid(this._indexByCustom[a])},findByIndex:function(a){return d.values(this._views)[a]},findByCid:function(a){return this._views[a]},remove:function(a){var b=a.cid;a.model&&delete this._indexByModel[a.model.cid];d.any(this._indexByCustom,function(a,c){if(a===b)return delete this._indexByCustom[c],!0},this);
delete this._views[b];this._updateLength()},call:function(a){this.apply(a,d.tail(arguments))},apply:function(a,b){d.each(this._views,function(f){d.isFunction(f[a])&&f[a].apply(f,b||[])})},_updateLength:function(){this.length=d.size(this._views)}});d.each("forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck".split(" "),function(a){k.prototype[a]=function(){var b=[d.values(this._views)].concat(d.toArray(arguments));
return d[a].apply(d,b)}});var g={},h=function(a){this.options=a;this._wreqrHandlers={};d.isFunction(this.initialize)&&this.initialize(a)};h.extend=e.Model.extend;d.extend(h.prototype,e.Events,{setHandlers:function(a){d.each(a,function(a,f){var c=null;d.isObject(a)&&!d.isFunction(a)&&(c=a.context,a=a.callback);this.setHandler(f,a,c)},this)},setHandler:function(a,b,f){this._wreqrHandlers[a]={callback:b,context:f};this.trigger("handler:add",a,b,f)},hasHandler:function(a){return!!this._wreqrHandlers[a]},
getHandler:function(a){var b=this._wreqrHandlers[a];if(!b)throw Error("Handler not found for '"+a+"'");return function(){var a=Array.prototype.slice.apply(arguments);return b.callback.apply(b.context,a)}},removeHandler:function(a){delete this._wreqrHandlers[a]},removeAllHandlers:function(){this._wreqrHandlers={}}});g.Handlers=h;h=function(a){this.options=a;this._commands={};d.isFunction(this.initialize)&&this.initialize(a)};d.extend(h.prototype,e.Events,{getCommands:function(a){var b=this._commands[a];
b||(b={command:a,instances:[]},this._commands[a]=b);return b},addCommand:function(a,b){this.getCommands(a).instances.push(b)},clearCommands:function(a){this.getCommands(a).instances=[]}});g.CommandStorage=h;h=g.Handlers.extend({storageType:g.CommandStorage,constructor:function(a){this.options=a||{};this._initializeStorage(this.options);this.on("handler:add",this._executeCommands,this);var b=Array.prototype.slice.call(arguments);g.Handlers.prototype.constructor.apply(this,b)},execute:function(a,b){a=
arguments[0];b=Array.prototype.slice.call(arguments,1);this.hasHandler(a)?this.getHandler(a).apply(this,b):this.storage.addCommand(a,b)},_executeCommands:function(a,b,f){var c=this.storage.getCommands(a);d.each(c.instances,function(a){b.apply(f,a)});this.storage.clearCommands(a)},_initializeStorage:function(a){a=a.storageType||this.storageType;this.storage=d.isFunction(a)?new a:a}});g.Commands=h;g.RequestResponse=g.Handlers.extend({request:function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,
1);return this.getHandler(a).apply(this,b)}});h=function(){};h.extend=e.Model.extend;d.extend(h.prototype,e.Events);g.EventAggregator=h;var l=function(a,b){var f=Error(a);f.name=b||"Error";throw f;},c={};e.Marionette=c;c.$=e.$;var i=Array.prototype.slice;c.extend=e.Model.extend;c.getOption=function(a,b){if(a&&b)return a.options&&b in a.options&&void 0!==a.options[b]?a.options[b]:a[b]};var p=function(a,b,f){return f.toUpperCase()},q=/(^|:)(\w)/gi;c.triggerMethod=function(a){var b=this["on"+a.replace(q,
p)];d.isFunction(this.trigger)&&this.trigger.apply(this,arguments);if(d.isFunction(b))return b.apply(this,d.tail(arguments))};var m=function(a){a._isShown&&a._isRendered&&d.isFunction(a.triggerMethod)&&a.triggerMethod("dom:refresh")};c.MonitorDOMRefresh=function(a){a.listenTo(a,"show",function(){a._isShown=!0;m(a)});a.listenTo(a,"render",function(){a._isRendered=!0;m(a)})};var r=function(a,b,f,c){c=c.split(/\s+/);d.each(c,function(c){var d=a[c];d||l("Method '"+c+"' was configured as an event handler, but does not exist.");
a.listenTo(b,f,d,a)})},s=function(a,b,c,d){a.listenTo(b,c,d,a)},t=function(a,b,c,j){j=j.split(/\s+/);d.each(j,function(d){a.stopListening(b,c,a[d],a)})},u=function(a,b,c,d){a.stopListening(b,c,d,a)},n=function(a,b,c,j,e){b&&c&&(d.isFunction(c)&&(c=c.call(a)),d.each(c,function(c,f){d.isFunction(c)?j(a,b,f,c):e(a,b,f,c)}))};c.bindEntityEvents=function(a,b,c){n(a,b,c,s,r)};c.unbindEntityEvents=function(a,b,c){n(a,b,c,u,t)};c.Callbacks=function(){this._deferred=c.$.Deferred();this._callbacks=[]};d.extend(c.Callbacks.prototype,
{add:function(a,b){this._callbacks.push({cb:a,ctx:b});this._deferred.done(function(c,d){b&&(c=b);a.call(c,d)})},run:function(a,b){this._deferred.resolve(b,a)},reset:function(){var a=this._callbacks;this._deferred=c.$.Deferred();this._callbacks=[];d.each(a,function(a){this.add(a.cb,a.ctx)},this)}});c.Controller=function(a){this.triggerMethod=c.triggerMethod;this.options=a||{};d.isFunction(this.initialize)&&this.initialize(this.options)};c.Controller.extend=c.extend;d.extend(c.Controller.prototype,
e.Events,{close:function(){this.stopListening();this.triggerMethod("close");this.unbind()}});c.Region=function(a){this.options=a||{};this.el=c.getOption(this,"el");if(!this.el){var b=Error("An 'el' must be specified for a region.");b.name="NoElError";throw b;}this.initialize&&(b=Array.prototype.slice.apply(arguments),this.initialize.apply(this,b))};d.extend(c.Region,{buildRegion:function(a,b){var c="string"===typeof a,j="string"===typeof a.selector,e="undefined"===typeof a.regionType,g="function"===
typeof a;if(!g&&!c&&!j)throw Error("Region must be specified as a Region type, a selector string or an object with selector property");var h,i;c&&(h=a);a.selector&&(h=a.selector);g&&(i=a);!g&&e&&(i=b);a.regionType&&(i=a.regionType);c=new i({el:h});a.parentEl&&(c.getEl=function(b){var c=a.parentEl;d.isFunction(c)&&(c=c());return c.find(b)});return c}});d.extend(c.Region.prototype,e.Events,{show:function(a){this.ensureEl();var b=a.isClosed||d.isUndefined(a.$el),f=a!==this.currentView;f&&this.close();
a.render();(f||b)&&this.open(a);this.currentView=a;c.triggerMethod.call(this,"show",a);c.triggerMethod.call(a,"show")},ensureEl:function(){if(!this.$el||0===this.$el.length)this.$el=this.getEl(this.el)},getEl:function(a){return c.$(a)},open:function(a){this.$el.empty().append(a.el)},close:function(){var a=this.currentView;a&&!a.isClosed&&(a.close?a.close():a.remove&&a.remove(),c.triggerMethod.call(this,"close"),delete this.currentView)},attachView:function(a){this.currentView=a},reset:function(){this.close();
delete this.$el}});c.Region.extend=c.extend;var o=c.Controller.extend({constructor:function(a){this._regions={};c.Controller.prototype.constructor.call(this,a)},addRegions:function(a,b){var c={};d.each(a,function(a,e){"string"===typeof a&&(a={selector:a});a.selector&&(a=d.defaults({},a,b));var g=this.addRegion(e,a);c[e]=g},this);return c},addRegion:function(a,b){var f;f=d.isObject(b);var j=d.isString(b),e=!!b.selector;f=j||f&&e?c.Region.buildRegion(b,c.Region):d.isFunction(b)?c.Region.buildRegion(b,
c.Region):b;this._store(a,f);this.triggerMethod("region:add",a,f);return f},get:function(a){return this._regions[a]},removeRegion:function(a){this._remove(a,this._regions[a])},removeRegions:function(){d.each(this._regions,function(a,b){this._remove(b,a)},this)},closeRegions:function(){d.each(this._regions,function(a){a.close()},this)},close:function(){this.removeRegions();var a=Array.prototype.slice.call(arguments);c.Controller.prototype.close.apply(this,a)},_store:function(a,b){this._regions[a]=
b;this._setLength()},_remove:function(a,b){b.close();delete this._regions[a];this._setLength();this.triggerMethod("region:remove",a,b)},_setLength:function(){this.length=d.size(this._regions)}});d.each("forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck".split(" "),function(a){o.prototype[a]=function(){var b=[d.values(this._regions)].concat(d.toArray(arguments));return d[a].apply(d,b)}});c.RegionManager=
o;c.TemplateCache=function(a){this.templateId=a};d.extend(c.TemplateCache,{templateCaches:{},get:function(a){var b=this.templateCaches[a];b||(b=new c.TemplateCache(a),this.templateCaches[a]=b);return b.load()},clear:function(){var a,b=i.call(arguments),c=b.length;if(0<c)for(a=0;a<c;a++)delete this.templateCaches[b[a]];else this.templateCaches={}}});d.extend(c.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var a=this.loadTemplate(this.templateId);return this.compiledTemplate=
this.compileTemplate(a)},loadTemplate:function(a){var b=c.$(a).html();(!b||0===b.length)&&l("Could not find template: '"+a+"'","NoTemplateError");return b},compileTemplate:function(a){return d.template(a)}});c.Renderer={render:function(a,b){if(!a){var d=Error("Cannot render the template since it's false, null or undefined.");d.name="TemplateNotFoundError";throw d;}return("function"===typeof a?a:c.TemplateCache.get(a))(b)}};c.View=e.View.extend({constructor:function(a){d.bindAll(this,"render");var b=
Array.prototype.slice.apply(arguments);this.options=d.extend({},this.options,a);this.events=this.normalizeUIKeys(d.result(this,"events"));e.View.prototype.constructor.apply(this,b);c.MonitorDOMRefresh(this);this.listenTo(this,"show",this.onShowCalled,this)},triggerMethod:c.triggerMethod,getTemplate:function(){return c.getOption(this,"template")},mixinTemplateHelpers:function(a){var a=a||{},b=c.getOption(this,"templateHelpers");d.isFunction(b)&&(b=b.call(this));return d.extend(a,b)},normalizeUIKeys:function(a){if("undefined"!==
typeof a)return d.each(d.keys(a),function(b){var c=b.split("@ui.");2===c.length&&(a[c[0]+this.ui[c[1]]]=a[b],delete a[b])},this),a},configureTriggers:function(){if(this.triggers){var a={},b=this.normalizeUIKeys(d.result(this,"triggers"));d.each(b,function(b,c){var e=d.isObject(b),g=e?b.event:b;a[c]=function(a){if(a){var c=a.preventDefault,d=a.stopPropagation,j=e?b.stopPropagation:d;(e?b.preventDefault:c)&&c&&c.apply(a);j&&d&&d.apply(a)}this.triggerMethod(g,{view:this,model:this.model,collection:this.collection})}},
this);return a}},delegateEvents:function(a){this._delegateDOMEvents(a);c.bindEntityEvents(this,this.model,c.getOption(this,"modelEvents"));c.bindEntityEvents(this,this.collection,c.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(a){a=a||this.events;d.isFunction(a)&&(a=a.call(this));var b={},c=this.configureTriggers();d.extend(b,a,c);e.View.prototype.delegateEvents.call(this,b)},undelegateEvents:function(){var a=Array.prototype.slice.call(arguments);e.View.prototype.undelegateEvents.apply(this,
a);c.unbindEntityEvents(this,this.model,c.getOption(this,"modelEvents"));c.unbindEntityEvents(this,this.collection,c.getOption(this,"collectionEvents"))},onShowCalled:function(){},close:function(){!this.isClosed&&!1!==this.triggerMethod("before:close")&&(this.isClosed=!0,this.triggerMethod("close"),this.unbindUIElements(),this.remove())},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var a=d.result(this,"_uiBindings");this.ui={};d.each(d.keys(a),function(b){this.ui[b]=
this.$(a[b])},this)}},unbindUIElements:function(){this.ui&&this._uiBindings&&(d.each(this.ui,function(a,b){delete this.ui[b]},this),this.ui=this._uiBindings,delete this._uiBindings)}});c.ItemView=c.View.extend({constructor:function(){c.View.prototype.constructor.apply(this,i.call(arguments))},serializeData:function(){var a={};this.model?a=this.model.toJSON():this.collection&&(a={items:this.collection.toJSON()});return a},render:function(){this.isClosed=!1;this.triggerMethod("before:render",this);
this.triggerMethod("item:before:render",this);var a=this.serializeData(),a=this.mixinTemplateHelpers(a),b=this.getTemplate(),a=c.Renderer.render(b,a);this.$el.html(a);this.bindUIElements();this.triggerMethod("render",this);this.triggerMethod("item:rendered",this);return this},close:function(){this.isClosed||(this.triggerMethod("item:before:close"),c.View.prototype.close.apply(this,i.call(arguments)),this.triggerMethod("item:closed"))}});c.CollectionView=c.View.extend({itemViewEventPrefix:"itemview",
constructor:function(a){this._initChildViewStorage();c.View.prototype.constructor.apply(this,i.call(arguments));this._initialEvents();this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment()},startBuffering:function(){this.initRenderBuffer();this.isBuffering=!0},endBuffering:function(){this.appendBuffer(this,this.elBuffer);this.initRenderBuffer();this.isBuffering=!1},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,
this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this.render,this))},addChildView:function(a){this.closeEmptyView();var b=this.getItemView(a),c=this.collection.indexOf(a);this.addItemView(a,b,c)},onShowCalled:function(){this.children.each(function(a){c.triggerMethod.call(a,"show")})},triggerBeforeRender:function(){this.triggerMethod("before:render",this);this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",
this);this.triggerMethod("collection:rendered",this)},render:function(){this.isClosed=!1;this.triggerBeforeRender();this._renderChildren();this.triggerRendered();return this},_renderChildren:function(){this.startBuffering();this.closeEmptyView();this.closeChildren();this.collection&&0<this.collection.length?this.showCollection():this.showEmptyView();this.endBuffering()},showCollection:function(){var a;this.collection.each(function(b,c){a=this.getItemView(b);this.addItemView(b,a,c)},this)},showEmptyView:function(){var a=
this.getEmptyView();if(a&&!this._showingEmptyView){this._showingEmptyView=!0;var b=new e.Model;this.addItemView(b,a,0)}},closeEmptyView:function(){this._showingEmptyView&&(this.closeChildren(),delete this._showingEmptyView)},getEmptyView:function(){return c.getOption(this,"emptyView")},getItemView:function(){var a=c.getOption(this,"itemView");a||l("An `itemView` must be specified","NoItemViewError");return a},addItemView:function(a,b,f){var e=c.getOption(this,"itemViewOptions");d.isFunction(e)&&(e=
e.call(this,a,f));a=this.buildItemView(a,b,e);this.addChildViewEventForwarding(a);this.triggerMethod("before:item:added",a);this.children.add(a);this.renderItemView(a,f);this._isShown&&c.triggerMethod.call(a,"show");this.triggerMethod("after:item:added",a)},addChildViewEventForwarding:function(a){var b=c.getOption(this,"itemViewEventPrefix");this.listenTo(a,"all",function(){var d=i.call(arguments);d[0]=b+":"+d[0];d.splice(1,0,a);c.triggerMethod.apply(this,d)},this)},renderItemView:function(a,b){a.render();
this.appendHtml(this,a,b)},buildItemView:function(a,b,c){a=d.extend({model:a},c);return new b(a)},removeItemView:function(a){a=this.children.findByModel(a);this.removeChildView(a);this.checkEmpty()},removeChildView:function(a){a&&(this.stopListening(a),a.close?a.close():a.remove&&a.remove(),this.children.remove(a));this.triggerMethod("item:removed",a)},checkEmpty:function(){(!this.collection||0===this.collection.length)&&this.showEmptyView()},appendBuffer:function(a,b){a.$el.append(b)},appendHtml:function(a,
b){a.isBuffering?a.elBuffer.appendChild(b.el):a.$el.append(b.el)},_initChildViewStorage:function(){this.children=new k},close:function(){this.isClosed||(this.triggerMethod("collection:before:close"),this.closeChildren(),this.triggerMethod("collection:closed"),c.View.prototype.close.apply(this,i.call(arguments)))},closeChildren:function(){this.children.each(function(a){this.removeChildView(a)},this);this.checkEmpty()}});c.CompositeView=c.CollectionView.extend({constructor:function(){c.CollectionView.prototype.constructor.apply(this,
i.call(arguments))},_initialEvents:function(){this.once("render",function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this._renderChildren,this))})},getItemView:function(){var a=c.getOption(this,"itemView")||this.constructor;a||l("An `itemView` must be specified","NoItemViewError");return a},serializeData:function(){var a={};this.model&&(a=this.model.toJSON());
return a},render:function(){this.isRendered=!0;this.isClosed=!1;this.resetItemViewContainer();this.triggerBeforeRender();var a=this.renderModel();this.$el.html(a);this.bindUIElements();this.triggerMethod("composite:model:rendered");this._renderChildren();this.triggerMethod("composite:rendered");this.triggerRendered();return this},_renderChildren:function(){this.isRendered&&(c.CollectionView.prototype._renderChildren.call(this),this.triggerMethod("composite:collection:rendered"))},renderModel:function(){var a=
{},a=this.serializeData(),a=this.mixinTemplateHelpers(a),b=this.getTemplate();return c.Renderer.render(b,a)},appendBuffer:function(a,b){this.getItemViewContainer(a).append(b)},appendHtml:function(a,b){a.isBuffering?a.elBuffer.appendChild(b.el):this.getItemViewContainer(a).append(b.el)},getItemViewContainer:function(a){if("$itemViewContainer"in a)return a.$itemViewContainer;var b;(b=c.getOption(a,"itemViewContainer"))?(b=d.isFunction(b)?b():b,b=a.$(b),0>=b.length&&l("The specified `itemViewContainer` was not found: "+
a.itemViewContainer,"ItemViewContainerMissingError")):b=a.$el;return a.$itemViewContainer=b},resetItemViewContainer:function(){this.$itemViewContainer&&delete this.$itemViewContainer}});c.Layout=c.ItemView.extend({regionType:c.Region,constructor:function(a){a=a||{};this._firstRender=!0;this._initializeRegions(a);c.ItemView.prototype.constructor.call(this,a)},render:function(){this.isClosed&&this._initializeRegions();this._firstRender?this._firstRender=!1:this.isClosed||this._reInitializeRegions();
var a=Array.prototype.slice.apply(arguments);return c.ItemView.prototype.render.apply(this,a)},close:function(){if(!this.isClosed){this.regionManager.close();var a=Array.prototype.slice.apply(arguments);c.ItemView.prototype.close.apply(this,a)}},addRegion:function(a,b){var c={};c[a]=b;return this._buildRegions(c)[a]},addRegions:function(a){this.regions=d.extend({},this.regions,a);return this._buildRegions(a)},removeRegion:function(a){delete this.regions[a];return this.regionManager.removeRegion(a)},
_buildRegions:function(a){var b=this,d={regionType:c.getOption(this,"regionType"),parentEl:function(){return b.$el}};return this.regionManager.addRegions(a,d)},_initializeRegions:function(a){this._initRegionManager();a=d.isFunction(this.regions)?this.regions(a):this.regions||{};this.addRegions(a)},_reInitializeRegions:function(){this.regionManager.closeRegions();this.regionManager.each(function(a){a.reset()})},_initRegionManager:function(){this.regionManager=new c.RegionManager;this.listenTo(this.regionManager,
"region:add",function(a,b){this[a]=b;this.trigger("region:add",a,b)});this.listenTo(this.regionManager,"region:remove",function(a,b){delete this[a];this.trigger("region:remove",a,b)})}});c.AppRouter=e.Router.extend({constructor:function(a){e.Router.prototype.constructor.apply(this,i.call(arguments));this.options=a||{};var b=c.getOption(this,"appRoutes"),d=this._getController();this.processAppRoutes(d,b)},appRoute:function(a,b){var c=this._getController();this._addAppRoute(c,a,b)},processAppRoutes:function(a,
b){if(b){var c=d.keys(b).reverse();d.each(c,function(c){this._addAppRoute(a,c,b[c])},this)}},_getController:function(){return c.getOption(this,"controller")},_addAppRoute:function(a,b,c){var e=a[c];if(!e)throw Error("Method '"+c+"' was not found on the controller");this.route(b,c,d.bind(e,a))}});c.Application=function(a){this._initRegionManager();this._initCallbacks=new c.Callbacks;this.vent=new g.EventAggregator;this.commands=new g.Commands;this.reqres=new g.RequestResponse;this.submodules={};d.extend(this,
a);this.triggerMethod=c.triggerMethod};d.extend(c.Application.prototype,e.Events,{execute:function(){var a=Array.prototype.slice.apply(arguments);this.commands.execute.apply(this.commands,a)},request:function(){var a=Array.prototype.slice.apply(arguments);return this.reqres.request.apply(this.reqres,a)},addInitializer:function(a){this._initCallbacks.add(a)},start:function(a){this.triggerMethod("initialize:before",a);this._initCallbacks.run(a,this);this.triggerMethod("initialize:after",a);this.triggerMethod("start",
a)},addRegions:function(a){return this._regionManager.addRegions(a)},closeRegions:function(){this._regionManager.closeRegions()},removeRegion:function(a){this._regionManager.removeRegion(a)},getRegion:function(a){return this._regionManager.get(a)},module:function(a,b){var d=i.call(arguments);d.unshift(this);return c.Module.create.apply(c.Module,d)},_initRegionManager:function(){this._regionManager=new c.RegionManager;this.listenTo(this._regionManager,"region:add",function(a,b){this[a]=b});this.listenTo(this._regionManager,
"region:remove",function(a){delete this[a]})}});c.Application.extend=c.extend;c.Module=function(a,b){this.moduleName=a;this.submodules={};this._setupInitializersAndFinalizers();this.app=b;this.startWithParent=!0;this.triggerMethod=c.triggerMethod};d.extend(c.Module.prototype,e.Events,{addInitializer:function(a){this._initializerCallbacks.add(a)},addFinalizer:function(a){this._finalizerCallbacks.add(a)},start:function(a){this._isInitialized||(d.each(this.submodules,function(b){b.startWithParent&&b.start(a)}),
this.triggerMethod("before:start",a),this._initializerCallbacks.run(a,this),this._isInitialized=!0,this.triggerMethod("start",a))},stop:function(){this._isInitialized&&(this._isInitialized=!1,c.triggerMethod.call(this,"before:stop"),d.each(this.submodules,function(a){a.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),c.triggerMethod.call(this,"stop"))},addDefinition:function(a,b){this._runModuleDefinition(a,b)},_runModuleDefinition:function(a,
b){if(a){var f=d.flatten([this,this.app,e,c,c.$,d,b]);a.apply(this,f)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new c.Callbacks;this._finalizerCallbacks=new c.Callbacks}});d.extend(c.Module,{create:function(a,b,c){var e=a,g=i.call(arguments);g.splice(0,3);var b=b.split("."),h=[];h[b.length-1]=c;d.each(b,function(b,c){var d=e;e=this._getModule(d,b,a);this._addModuleDefinition(d,e,h[c],g)},this);return e},_getModule:function(a,b,d){var e=a[b];e||(e=new c.Module(b,d),a[b]=
e,a.submodules[b]=e);return e},_addModuleDefinition:function(a,b,c,e){var g;d.isFunction(c)?(g=c,c=!0):d.isObject(c)?(g=c.define,c=c.startWithParent):c=!0;g&&b.addDefinition(g,e);b.startWithParent=b.startWithParent&&c;b.startWithParent&&!b.startWithParentIsConfigured&&(b.startWithParentIsConfigured=!0,a.addInitializer(function(a){b.startWithParent&&b.start(a)}))}});c.Wreqr=g;c.ChildViewContainer=k});;
;
/* module-key = 'com.atlassian.plugin.jslibs:underscore-1.5.2', location = 'libs/underscore/1.5.2/underscore-1.5.2.js' */
(function(l){define("atlassian/libs/underscore-1.5.2",function(){var o={};l.call(o);return o._.noConflict()})})(function(){(function(){var l=this,o=l._,p={},k=Array.prototype,q=Object.prototype,t=k.push,i=k.slice,r=k.concat,m=q.toString,L=q.hasOwnProperty,A=k.forEach,B=k.map,C=k.reduce,D=k.reduceRight,E=k.filter,F=k.every,G=k.some,s=k.indexOf,H=k.lastIndexOf,q=Array.isArray,M=Object.keys,u=Function.prototype.bind,b=function(a){if(a instanceof b)return a;if(!(this instanceof b))return new b(a);this._wrapped=
a};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=b),exports._=b):l._=b;b.VERSION="1.5.2";var j=b.each=b.forEach=function(a,c,d){if(a!=null)if(A&&a.forEach===A)a.forEach(c,d);else if(a.length===+a.length)for(var e=0,f=a.length;e<f;e++){if(c.call(d,a[e],e,a)===p)break}else for(var g=b.keys(a),e=0,f=g.length;e<f;e++)if(c.call(d,a[g[e]],g[e],a)===p)break};b.map=b.collect=function(a,c,b){var e=[];if(a==null)return e;if(B&&a.map===B)return a.map(c,b);
j(a,function(a,g,h){e.push(c.call(b,a,g,h))});return e};b.reduce=b.foldl=b.inject=function(a,c,d,e){var f=arguments.length>2;a==null&&(a=[]);if(C&&a.reduce===C){e&&(c=b.bind(c,e));return f?a.reduce(c,d):a.reduce(c)}j(a,function(a,b,N){if(f)d=c.call(e,d,a,b,N);else{d=a;f=true}});if(!f)throw new TypeError("Reduce of empty array with no initial value");return d};b.reduceRight=b.foldr=function(a,c,d,e){var f=arguments.length>2;a==null&&(a=[]);if(D&&a.reduceRight===D){e&&(c=b.bind(c,e));return f?a.reduceRight(c,
d):a.reduceRight(c)}var g=a.length;if(g!==+g)var h=b.keys(a),g=h.length;j(a,function(b,i,j){i=h?h[--g]:--g;if(f)d=c.call(e,d,a[i],i,j);else{d=a[i];f=true}});if(!f)throw new TypeError("Reduce of empty array with no initial value");return d};b.find=b.detect=function(a,c,b){var e;I(a,function(a,g,h){if(c.call(b,a,g,h)){e=a;return true}});return e};b.filter=b.select=function(a,c,b){var e=[];if(a==null)return e;if(E&&a.filter===E)return a.filter(c,b);j(a,function(a,g,h){c.call(b,a,g,h)&&e.push(a)});return e};
b.reject=function(a,c,d){return b.filter(a,function(a,b,g){return!c.call(d,a,b,g)},d)};b.every=b.all=function(a,c,d){c||(c=b.identity);var e=true;if(a==null)return e;if(F&&a.every===F)return a.every(c,d);j(a,function(a,b,h){if(!(e=e&&c.call(d,a,b,h)))return p});return!!e};var I=b.some=b.any=function(a,c,d){c||(c=b.identity);var e=false;if(a==null)return e;if(G&&a.some===G)return a.some(c,d);j(a,function(a,b,h){if(e||(e=c.call(d,a,b,h)))return p});return!!e};b.contains=b.include=function(a,c){return a==
null?false:s&&a.indexOf===s?a.indexOf(c)!=-1:I(a,function(a){return a===c})};b.invoke=function(a,c){var d=i.call(arguments,2),e=b.isFunction(c);return b.map(a,function(a){return(e?c:a[c]).apply(a,d)})};b.pluck=function(a,c){return b.map(a,function(a){return a[c]})};b.where=function(a,c,d){return b.isEmpty(c)?d?void 0:[]:b[d?"find":"filter"](a,function(a){for(var b in c)if(c[b]!==a[b])return false;return true})};b.findWhere=function(a,c){return b.where(a,c,true)};b.max=function(a,c,d){if(!c&&b.isArray(a)&&
a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);if(!c&&b.isEmpty(a))return-Infinity;var e={computed:-Infinity,value:-Infinity};j(a,function(a,b,h){b=c?c.call(d,a,b,h):a;b>e.computed&&(e={value:a,computed:b})});return e.value};b.min=function(a,c,d){if(!c&&b.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);if(!c&&b.isEmpty(a))return Infinity;var e={computed:Infinity,value:Infinity};j(a,function(a,b,h){b=c?c.call(d,a,b,h):a;b<e.computed&&(e={value:a,computed:b})});return e.value};
b.shuffle=function(a){var c,d=0,e=[];j(a,function(a){c=b.random(d++);e[d-1]=e[c];e[c]=a});return e};b.sample=function(a,c,d){return arguments.length<2||d?a[b.random(a.length-1)]:b.shuffle(a).slice(0,Math.max(0,c))};var v=function(a){return b.isFunction(a)?a:function(c){return c[a]}};b.sortBy=function(a,c,d){var e=v(c);return b.pluck(b.map(a,function(a,c,b){return{value:a,index:c,criteria:e.call(d,a,c,b)}}).sort(function(a,c){var b=a.criteria,d=c.criteria;if(b!==d){if(b>d||b===void 0)return 1;if(b<
d||d===void 0)return-1}return a.index-c.index}),"value")};var w=function(a){return function(c,d,e){var f={},g=d==null?b.identity:v(d);j(c,function(b,d){var i=g.call(e,b,d,c);a(f,i,b)});return f}};b.groupBy=w(function(a,c,d){(b.has(a,c)?a[c]:a[c]=[]).push(d)});b.indexBy=w(function(a,c,b){a[c]=b});b.countBy=w(function(a,c){b.has(a,c)?a[c]++:a[c]=1});b.sortedIndex=function(a,c,d,e){for(var d=d==null?b.identity:v(d),c=d.call(e,c),f=0,g=a.length;f<g;){var h=f+g>>>1;d.call(e,a[h])<c?f=h+1:g=h}return f};
b.toArray=function(a){return!a?[]:b.isArray(a)?i.call(a):a.length===+a.length?b.map(a,b.identity):b.values(a)};b.size=function(a){return a==null?0:a.length===+a.length?a.length:b.keys(a).length};b.first=b.head=b.take=function(a,c,b){return a==null?void 0:c==null||b?a[0]:i.call(a,0,c)};b.initial=function(a,c,b){return i.call(a,0,a.length-(c==null||b?1:c))};b.last=function(a,c,b){return a==null?void 0:c==null||b?a[a.length-1]:i.call(a,Math.max(a.length-c,0))};b.rest=b.tail=b.drop=function(a,b,d){return i.call(a,
b==null||d?1:b)};b.compact=function(a){return b.filter(a,b.identity)};var J=function(a,c,d){if(c&&b.every(a,b.isArray))return r.apply(d,a);j(a,function(a){b.isArray(a)||b.isArguments(a)?c?t.apply(d,a):J(a,c,d):d.push(a)});return d};b.flatten=function(a,b){return J(a,b,[])};b.without=function(a){return b.difference(a,i.call(arguments,1))};b.uniq=b.unique=function(a,c,d,e){if(b.isFunction(c)){e=d;d=c;c=false}var d=d?b.map(a,d,e):a,f=[],g=[];j(d,function(d,e){if(c?!e||g[g.length-1]!==d:!b.contains(g,
d)){g.push(d);f.push(a[e])}});return f};b.union=function(){return b.uniq(b.flatten(arguments,true))};b.intersection=function(a){var c=i.call(arguments,1);return b.filter(b.uniq(a),function(a){return b.every(c,function(c){return b.indexOf(c,a)>=0})})};b.difference=function(a){var c=r.apply(k,i.call(arguments,1));return b.filter(a,function(a){return!b.contains(c,a)})};b.zip=function(){for(var a=b.max(b.pluck(arguments,"length").concat(0)),c=Array(a),d=0;d<a;d++)c[d]=b.pluck(arguments,""+d);return c};
b.object=function(a,b){if(a==null)return{};for(var d={},e=0,f=a.length;e<f;e++)b?d[a[e]]=b[e]:d[a[e][0]]=a[e][1];return d};b.indexOf=function(a,c,d){if(a==null)return-1;var e=0,f=a.length;if(d)if(typeof d=="number")e=d<0?Math.max(0,f+d):d;else{e=b.sortedIndex(a,c);return a[e]===c?e:-1}if(s&&a.indexOf===s)return a.indexOf(c,d);for(;e<f;e++)if(a[e]===c)return e;return-1};b.lastIndexOf=function(a,b,d){if(a==null)return-1;var e=d!=null;if(H&&a.lastIndexOf===H)return e?a.lastIndexOf(b,d):a.lastIndexOf(b);
for(d=e?d:a.length;d--;)if(a[d]===b)return d;return-1};b.range=function(a,b,d){if(arguments.length<=1){b=a||0;a=0}for(var d=arguments[2]||1,e=Math.max(Math.ceil((b-a)/d),0),f=0,g=Array(e);f<e;){g[f++]=a;a=a+d}return g};var x=function(){};b.bind=function(a,c){var d,e;if(u&&a.bind===u)return u.apply(a,i.call(arguments,1));if(!b.isFunction(a))throw new TypeError;d=i.call(arguments,2);return e=function(){if(!(this instanceof e))return a.apply(c,d.concat(i.call(arguments)));x.prototype=a.prototype;var b=
new x;x.prototype=null;var g=a.apply(b,d.concat(i.call(arguments)));return Object(g)===g?g:b}};b.partial=function(a){var b=i.call(arguments,1);return function(){return a.apply(this,b.concat(i.call(arguments)))}};b.bindAll=function(a){var c=i.call(arguments,1);if(c.length===0)throw Error("bindAll must be passed function names");j(c,function(c){a[c]=b.bind(a[c],a)});return a};b.memoize=function(a,c){var d={};c||(c=b.identity);return function(){var e=c.apply(this,arguments);return b.has(d,e)?d[e]:d[e]=
a.apply(this,arguments)}};b.delay=function(a,b){var d=i.call(arguments,2);return setTimeout(function(){return a.apply(null,d)},b)};b.defer=function(a){return b.delay.apply(b,[a,1].concat(i.call(arguments,1)))};b.throttle=function(a,b,d){var e,f,g,h=null,i=0;d||(d={});var j=function(){i=d.leading===false?0:new Date;h=null;g=a.apply(e,f)};return function(){var k=new Date;!i&&d.leading===false&&(i=k);var K=b-(k-i);e=this;f=arguments;if(K<=0){clearTimeout(h);h=null;i=k;g=a.apply(e,f)}else!h&&d.trailing!==
false&&(h=setTimeout(j,K));return g}};b.debounce=function(a,b,d){var e,f,g,h,i;return function(){g=this;f=arguments;h=new Date;var j=function(){var k=new Date-h;if(k<b)e=setTimeout(j,b-k);else{e=null;d||(i=a.apply(g,f))}},k=d&&!e;e||(e=setTimeout(j,b));k&&(i=a.apply(g,f));return i}};b.once=function(a){var b=false,d;return function(){if(b)return d;b=true;d=a.apply(this,arguments);a=null;return d}};b.wrap=function(a,b){return function(){var d=[a];t.apply(d,arguments);return b.apply(this,d)}};b.compose=
function(){var a=arguments;return function(){for(var b=arguments,d=a.length-1;d>=0;d--)b=[a[d].apply(this,b)];return b[0]}};b.after=function(a,b){return function(){if(--a<1)return b.apply(this,arguments)}};b.keys=M||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var c=[],d;for(d in a)b.has(a,d)&&c.push(d);return c};b.values=function(a){for(var c=b.keys(a),d=c.length,e=Array(d),f=0;f<d;f++)e[f]=a[c[f]];return e};b.pairs=function(a){for(var c=b.keys(a),d=c.length,e=Array(d),f=0;f<
d;f++)e[f]=[c[f],a[c[f]]];return e};b.invert=function(a){for(var c={},d=b.keys(a),e=0,f=d.length;e<f;e++)c[a[d[e]]]=d[e];return c};b.functions=b.methods=function(a){var c=[],d;for(d in a)b.isFunction(a[d])&&c.push(d);return c.sort()};b.extend=function(a){j(i.call(arguments,1),function(b){if(b)for(var d in b)a[d]=b[d]});return a};b.pick=function(a){var b={},d=r.apply(k,i.call(arguments,1));j(d,function(d){d in a&&(b[d]=a[d])});return b};b.omit=function(a){var c={},d=r.apply(k,i.call(arguments,1)),
e;for(e in a)b.contains(d,e)||(c[e]=a[e]);return c};b.defaults=function(a){j(i.call(arguments,1),function(b){if(b)for(var d in b)a[d]===void 0&&(a[d]=b[d])});return a};b.clone=function(a){return!b.isObject(a)?a:b.isArray(a)?a.slice():b.extend({},a)};b.tap=function(a,b){b(a);return a};var y=function(a,c,d,e){if(a===c)return a!==0||1/a==1/c;if(a==null||c==null)return a===c;if(a instanceof b)a=a._wrapped;if(c instanceof b)c=c._wrapped;var f=m.call(a);if(f!=m.call(c))return false;switch(f){case "[object String]":return a==
String(c);case "[object Number]":return a!=+a?c!=+c:a==0?1/a==1/c:a==+c;case "[object Date]":case "[object Boolean]":return+a==+c;case "[object RegExp]":return a.source==c.source&&a.global==c.global&&a.multiline==c.multiline&&a.ignoreCase==c.ignoreCase}if(typeof a!="object"||typeof c!="object")return false;for(var g=d.length;g--;)if(d[g]==a)return e[g]==c;var g=a.constructor,h=c.constructor;if(g!==h&&(!b.isFunction(g)||!(g instanceof g&&b.isFunction(h)&&h instanceof h)))return false;d.push(a);e.push(c);
g=0;h=true;if(f=="[object Array]"){g=a.length;if(h=g==c.length)for(;g--;)if(!(h=y(a[g],c[g],d,e)))break}else{for(var i in a)if(b.has(a,i)){g++;if(!(h=b.has(c,i)&&y(a[i],c[i],d,e)))break}if(h){for(i in c)if(b.has(c,i)&&!g--)break;h=!g}}d.pop();e.pop();return h};b.isEqual=function(a,b){return y(a,b,[],[])};b.isEmpty=function(a){if(a==null)return true;if(b.isArray(a)||b.isString(a))return a.length===0;for(var c in a)if(b.has(a,c))return false;return true};b.isElement=function(a){return!!(a&&a.nodeType===
1)};b.isArray=q||function(a){return m.call(a)=="[object Array]"};b.isObject=function(a){return a===Object(a)};j("Arguments Function String Number Date RegExp".split(" "),function(a){b["is"+a]=function(b){return m.call(b)=="[object "+a+"]"}});b.isArguments(arguments)||(b.isArguments=function(a){return!(!a||!b.has(a,"callee"))});"function"!==typeof/./&&(b.isFunction=function(a){return typeof a==="function"});b.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))};b.isNaN=function(a){return b.isNumber(a)&&
a!=+a};b.isBoolean=function(a){return a===true||a===false||m.call(a)=="[object Boolean]"};b.isNull=function(a){return a===null};b.isUndefined=function(a){return a===void 0};b.has=function(a,b){return L.call(a,b)};b.noConflict=function(){l._=o;return this};b.identity=function(a){return a};b.times=function(a,b,d){for(var e=Array(Math.max(0,a)),f=0;f<a;f++)e[f]=b.call(d,f);return e};b.random=function(a,b){if(b==null){b=a;a=0}return a+Math.floor(Math.random()*(b-a+1))};var n={escape:{"&":"&amp;","<":"&lt;",
">":"&gt;",'"':"&quot;","'":"&#x27;"}};n.unescape=b.invert(n.escape);var O={escape:RegExp("["+b.keys(n.escape).join("")+"]","g"),unescape:RegExp("("+b.keys(n.unescape).join("|")+")","g")};b.each(["escape","unescape"],function(a){b[a]=function(b){return b==null?"":(""+b).replace(O[a],function(b){return n[a][b]})}});b.result=function(a,c){if(a!=null){var d=a[c];return b.isFunction(d)?d.call(a):d}};b.mixin=function(a){j(b.functions(a),function(c){var d=b[c]=a[c];b.prototype[c]=function(){var a=[this._wrapped];
t.apply(a,arguments);a=d.apply(b,a);return this._chain?b(a).chain():a}})};var P=0;b.uniqueId=function(a){var b=++P+"";return a?a+b:b};b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var z=/(.)^/,Q={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},R=/\\|'|\r|\n|\t|\u2028|\u2029/g;b.template=function(a,c,d){var e,d=b.defaults({},d,b.templateSettings),f=RegExp([(d.escape||z).source,(d.interpolate||z).source,(d.evaluate||
z).source].join("|")+"|$","g"),g=0,h="__p+='";a.replace(f,function(b,c,d,e,f){h=h+a.slice(g,f).replace(R,function(a){return"\\"+Q[a]});c&&(h=h+("'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"));d&&(h=h+("'+\n((__t=("+d+"))==null?'':__t)+\n'"));e&&(h=h+("';\n"+e+"\n__p+='"));g=f+b.length;return b});h=h+"';\n";d.variable||(h="with(obj||{}){\n"+h+"}\n");h="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+h+"return __p;\n";try{e=new Function(d.variable||"obj",
"_",h)}catch(i){i.source=h;throw i;}if(c)return e(c,b);c=function(a){return e.call(this,a,b)};c.source="function("+(d.variable||"obj")+"){\n"+h+"}";return c};b.chain=function(a){return b(a).chain()};b.mixin(b);j("pop push reverse shift sort splice unshift".split(" "),function(a){var c=k[a];b.prototype[a]=function(){var d=this._wrapped;c.apply(d,arguments);(a=="shift"||a=="splice")&&d.length===0&&delete d[0];return this._chain?b(d).chain():d}});j(["concat","join","slice"],function(a){var c=k[a];b.prototype[a]=
function(){var a=c.apply(this._wrapped,arguments);return this._chain?b(a).chain():a}});b.extend(b.prototype,{chain:function(){this._chain=true;return this},value:function(){return this._wrapped}})}).call(this)});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:underscore', location = 'libs/underscore.js' */
define("jira/components/libs/underscore",["require"],function(a){return a("atlassian/libs/underscore-1.5.2")});;
;
/* module-key = 'com.atlassian.plugin.jslibs:backbone-1.0.0-factory', location = 'factories/backbone/1.0.0/backbone-1.0.0-factory.js' */
(function(k){define("atlassian/libs/factories/backbone-1.0.0",function(){return function(t,i){var p={_:t,$:i};k.call(p);return p.Backbone.noConflict()}})})(function(){var k=this,t=k.Backbone,i=[],p=i.push,u=i.slice,C=i.splice,g;g="undefined"!==typeof exports?exports:k.Backbone={};g.VERSION="1.0.0";var e=k._;!e&&"undefined"!==typeof require&&(e=require("underscore"));g.$=k.jQuery||k.Zepto||k.ender||k.$;g.noConflict=function(){k.Backbone=t;return this};g.emulateHTTP=!1;g.emulateJSON=!1;var h=g.Events=
{on:function(a,b,c){if(!q(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});(this._events[a]||(this._events[a]=[])).push({callback:b,context:c,ctx:c||this});return this},once:function(a,b,c){if(!q(this,"once",a,[b,c])||!b)return this;var d=this,f=e.once(function(){d.off(a,f);b.apply(this,arguments)});f._callback=b;return this.on(a,f,c)},off:function(a,b,c){var d,f,v,g,j,w,l,h;if(!this._events||!q(this,"off",a,[b,c]))return this;if(!a&&!b&&!c)return this._events={},this;g=a?[a]:e.keys(this._events);
j=0;for(w=g.length;j<w;j++)if(a=g[j],v=this._events[a]){this._events[a]=d=[];if(b||c){l=0;for(h=v.length;l<h;l++)f=v[l],(b&&b!==f.callback&&b!==f.callback._callback||c&&c!==f.context)&&d.push(f)}d.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=u.call(arguments,1);if(!q(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;c&&x(c,b);d&&x(d,arguments);return this},stopListening:function(a,b,c){var d=this._listeners;if(!d)return this;
var f=!b&&!c;"object"===typeof b&&(c=this);a&&((d={})[a._listenerId]=a);for(var e in d)d[e].off(b,c,this),f&&delete this._listeners[e];return this}},y=/\s+/,q=function(a,b,c,d){if(!c)return!0;if("object"===typeof c){for(var f in c)a[b].apply(a,[f,c[f]].concat(d));return!1}if(y.test(c)){c=c.split(y);f=0;for(var e=c.length;f<e;f++)a[b].apply(a,[c[f]].concat(d));return!1}return!0},x=function(a,b){var c,d=-1,f=a.length,e=b[0],g=b[1],j=b[2];switch(b.length){case 0:for(;++d<f;)(c=a[d]).callback.call(c.ctx);
break;case 1:for(;++d<f;)(c=a[d]).callback.call(c.ctx,e);break;case 2:for(;++d<f;)(c=a[d]).callback.call(c.ctx,e,g);break;case 3:for(;++d<f;)(c=a[d]).callback.call(c.ctx,e,g,j);break;default:for(;++d<f;)(c=a[d]).callback.apply(c.ctx,b)}};e.each({listenTo:"on",listenToOnce:"once"},function(a,b){h[b]=function(b,d,f){var g=this._listeners||(this._listeners={}),o=b._listenerId||(b._listenerId=e.uniqueId("l"));g[o]=b;"object"===typeof d&&(f=this);b[a](d,f,this);return this}});h.bind=h.on;h.unbind=h.off;
e.extend(g,h);var n=g.Model=function(a,b){var c,d=a||{};b||(b={});this.cid=e.uniqueId("c");this.attributes={};e.extend(this,e.pick(b,D));b.parse&&(d=this.parse(d,b)||{});if(c=e.result(this,"defaults"))d=e.defaults({},d,c);this.set(d,b);this.changed={};this.initialize.apply(this,arguments)},D=["url","urlRoot","collection"];e.extend(n.prototype,h,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return e.clone(this.attributes)},sync:function(){return g.sync.apply(this,
arguments)},get:function(a){return this.attributes[a]},escape:function(a){return e.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,b,c){var d,f,g,o,j,h,l;if(null==a)return this;"object"===typeof a?(f=a,c=b):(f={})[a]=b;c||(c={});if(!this._validate(f,c))return!1;g=c.unset;o=c.silent;a=[];j=this._changing;this._changing=!0;j||(this._previousAttributes=e.clone(this.attributes),this.changed={});l=this.attributes;h=this._previousAttributes;this.idAttribute in f&&(this.id=
f[this.idAttribute]);for(d in f)b=f[d],e.isEqual(l[d],b)||a.push(d),e.isEqual(h[d],b)?delete this.changed[d]:this.changed[d]=b,g?delete l[d]:l[d]=b;if(!o){a.length&&(this._pending=!0);b=0;for(d=a.length;b<d;b++)this.trigger("change:"+a[b],this,l[a[b]],c)}if(j)return this;if(!o)for(;this._pending;)this._pending=!1,this.trigger("change",this,c);this._changing=this._pending=!1;return this},unset:function(a,b){return this.set(a,void 0,e.extend({},b,{unset:!0}))},clear:function(a){var b={},c;for(c in this.attributes)b[c]=
void 0;return this.set(b,e.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!e.isEmpty(this.changed):e.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?e.clone(this.changed):!1;var b,c=!1,d=this._changing?this._previousAttributes:this.attributes,f;for(f in a)if(!e.isEqual(d[f],b=a[f]))(c||(c={}))[f]=b;return c},previous:function(a){return null==a||!this._previousAttributes?null:this._previousAttributes[a]},previousAttributes:function(){return e.clone(this._previousAttributes)},
fetch:function(a){a=a?e.clone(a):{};void 0===a.parse&&(a.parse=!0);var b=this,c=a.success;a.success=function(d){if(!b.set(b.parse(d,a),a))return false;c&&c(b,d,a);b.trigger("sync",b,d,a)};r(this,a);return this.sync("read",this,a)},save:function(a,b,c){var d,f=this.attributes;null==a||"object"===typeof a?(d=a,c=b):(d={})[a]=b;if(d&&(!c||!c.wait)&&!this.set(d,c))return!1;c=e.extend({validate:!0},c);if(!this._validate(d,c))return!1;d&&c.wait&&(this.attributes=e.extend({},f,d));void 0===c.parse&&(c.parse=
!0);var g=this,h=c.success;c.success=function(a){g.attributes=f;var b=g.parse(a,c);c.wait&&(b=e.extend(d||{},b));if(e.isObject(b)&&!g.set(b,c))return false;h&&h(g,a,c);g.trigger("sync",g,a,c)};r(this,c);a=this.isNew()?"create":c.patch?"patch":"update";"patch"===a&&(c.attrs=d);a=this.sync(a,this,c);d&&c.wait&&(this.attributes=f);return a},destroy:function(a){var a=a?e.clone(a):{},b=this,c=a.success,d=function(){b.trigger("destroy",b,b.collection,a)};a.success=function(e){(a.wait||b.isNew())&&d();c&&
c(b,e,a);b.isNew()||b.trigger("sync",b,e,a)};if(this.isNew())return a.success(),!1;r(this,a);var f=this.sync("delete",this,a);a.wait||d();return f},url:function(){var a=e.result(this,"urlRoot")||e.result(this.collection,"url")||z();return this.isNew()?a:a+("/"===a.charAt(a.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(a){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(a){return this._validate({},e.extend(a||
{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;var a=e.extend({},this.attributes,a),c=this.validationError=this.validate(a,b)||null;if(!c)return!0;this.trigger("invalid",this,c,e.extend(b||{},{validationError:c}));return!1}});e.each("keys values pairs invert pick omit".split(" "),function(a){n.prototype[a]=function(){var b=u.call(arguments);b.unshift(this.attributes);return e[a].apply(e,b)}});var s=g.Collection=function(a,b){b||(b={});b.url&&(this.url=b.url);b.model&&
(this.model=b.model);void 0!==b.comparator&&(this.comparator=b.comparator);this._reset();this.initialize.apply(this,arguments);a&&this.reset(a,e.extend({silent:!0},b))},E={add:!0,remove:!0,merge:!0},F={add:!0,merge:!1,remove:!1};e.extend(s.prototype,h,{model:n,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return g.sync.apply(this,arguments)},add:function(a,b){return this.set(a,e.defaults(b||{},F))},remove:function(a,b){a=e.isArray(a)?
a.slice():[a];b||(b={});var c,d,f,g;c=0;for(d=a.length;c<d;c++)if(g=this.get(a[c]))delete this._byId[g.id],delete this._byId[g.cid],f=this.indexOf(g),this.models.splice(f,1),this.length--,b.silent||(b.index=f,g.trigger("remove",g,this,b)),this._removeReference(g);return this},set:function(a,b){b=e.defaults(b||{},E);b.parse&&(a=this.parse(a,b));e.isArray(a)||(a=a?[a]:[]);var c,d,f,g,h,j=b.at,k=this.comparator&&null==j&&!1!==b.sort,l=e.isString(this.comparator)?this.comparator:null,i=[],m=[],n={};c=
0;for(d=a.length;c<d;c++)if(f=this._prepareModel(a[c],b))(g=this.get(f))?(b.remove&&(n[g.cid]=!0),b.merge&&(g.set(f.attributes,b),k&&(!h&&g.hasChanged(l))&&(h=!0))):b.add&&(i.push(f),f.on("all",this._onModelEvent,this),this._byId[f.cid]=f,null!=f.id&&(this._byId[f.id]=f));if(b.remove){c=0;for(d=this.length;c<d;++c)n[(f=this.models[c]).cid]||m.push(f);m.length&&this.remove(m,b)}i.length&&(k&&(h=!0),this.length+=i.length,null!=j?C.apply(this.models,[j,0].concat(i)):p.apply(this.models,i));h&&this.sort({silent:!0});
if(b.silent)return this;c=0;for(d=i.length;c<d;c++)(f=i[c]).trigger("add",f,this,b);h&&this.trigger("sort",this,b);return this},reset:function(a,b){b||(b={});for(var c=0,d=this.models.length;c<d;c++)this._removeReference(this.models[c]);b.previousModels=this.models;this._reset();this.add(a,e.extend({silent:!0},b));b.silent||this.trigger("reset",this,b);return this},push:function(a,b){a=this._prepareModel(a,b);this.add(a,e.extend({at:this.length},b));return a},pop:function(a){var b=this.at(this.length-
1);this.remove(b,a);return b},unshift:function(a,b){a=this._prepareModel(a,b);this.add(a,e.extend({at:0},b));return a},shift:function(a){var b=this.at(0);this.remove(b,a);return b},slice:function(a,b){return this.models.slice(a,b)},get:function(a){return null==a?void 0:this._byId[null!=a.id?a.id:a.cid||a]},at:function(a){return this.models[a]},where:function(a,b){return e.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(b){for(var d in a)if(a[d]!==b.get(d))return!1;return!0})},findWhere:function(a){return this.where(a,
!0)},sort:function(a){if(!this.comparator)throw Error("Cannot sort a set without a comparator");a||(a={});e.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(e.bind(this.comparator,this));a.silent||this.trigger("sort",this,a);return this},sortedIndex:function(a,b,c){b||(b=this.comparator);var d=e.isFunction(b)?b:function(a){return a.get(b)};return e.sortedIndex(this.models,a,d,c)},pluck:function(a){return e.invoke(this.models,"get",
a)},fetch:function(a){a=a?e.clone(a):{};void 0===a.parse&&(a.parse=!0);var b=a.success,c=this;a.success=function(d){c[a.reset?"reset":"set"](d,a);b&&b(c,d,a);c.trigger("sync",c,d,a)};r(this,a);return this.sync("read",this,a)},create:function(a,b){b=b?e.clone(b):{};if(!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var c=this,d=b.success;b.success=function(e){b.wait&&c.add(a,b);d&&d(a,e,b)};a.save(null,b);return a},parse:function(a){return a},clone:function(){return new this.constructor(this.models)},
_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(a,b){if(a instanceof n)return a.collection||(a.collection=this),a;b||(b={});b.collection=this;var c=new this.model(a,b);return!c._validate(a,b)?(this.trigger("invalid",this,a,b),!1):c},_removeReference:function(a){this===a.collection&&delete a.collection;a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"===a||"remove"===a)&&c!==this||("destroy"===a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&
(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments))}});e.each("forEach each map collect reduce foldl inject reduceRight foldr find detect filter select reject every all some any include contains invoke max min toArray size first head take initial rest tail drop last without indexOf shuffle lastIndexOf isEmpty chain".split(" "),function(a){s.prototype[a]=function(){var b=u.call(arguments);b.unshift(this.models);return e[a].apply(e,b)}});
e.each(["groupBy","countBy","sortBy"],function(a){s.prototype[a]=function(b,c){var d=e.isFunction(b)?b:function(a){return a.get(b)};return e[a](this.models,d,c)}});var i=g.View=function(a){this.cid=e.uniqueId("view");this._configure(a||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()},G=/^(\S+)\s*(.*)$/,H="model collection el id attributes className tagName events".split(" ");e.extend(i.prototype,h,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},
render:function(){return this},remove:function(){this.$el.remove();this.stopListening();return this},setElement:function(a,b){this.$el&&this.undelegateEvents();this.$el=a instanceof g.$?a:g.$(a);this.el=this.$el[0];!1!==b&&this.delegateEvents();return this},delegateEvents:function(a){if(!a&&!(a=e.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var c=a[b];e.isFunction(c)||(c=this[a[b]]);if(c){var d=b.match(G),f=d[1],d=d[2],c=e.bind(c,this),f=f+(".delegateEvents"+this.cid);
if(""===d)this.$el.on(f,c);else this.$el.on(f,d,c)}}return this},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid);return this},_configure:function(a){this.options&&(a=e.extend({},e.result(this,"options"),a));e.extend(this,e.pick(a,H));this.options=a},_ensureElement:function(){if(this.el)this.setElement(e.result(this,"el"),!1);else{var a=e.extend({},e.result(this,"attributes"));this.id&&(a.id=e.result(this,"id"));this.className&&(a["class"]=e.result(this,"className"));a=g.$("<"+
e.result(this,"tagName")+">").attr(a);this.setElement(a,!1)}}});g.sync=function(a,b,c){var d=I[a];e.defaults(c||(c={}),{emulateHTTP:g.emulateHTTP,emulateJSON:g.emulateJSON});var f={type:d,dataType:"json"};c.url||(f.url=e.result(b,"url")||z());if(null==c.data&&b&&("create"===a||"update"===a||"patch"===a))f.contentType="application/json",f.data=JSON.stringify(c.attrs||b.toJSON(c));c.emulateJSON&&(f.contentType="application/x-www-form-urlencoded",f.data=f.data?{model:f.data}:{});if(c.emulateHTTP&&("PUT"===
d||"DELETE"===d||"PATCH"===d)){f.type="POST";c.emulateJSON&&(f.data._method=d);var h=c.beforeSend;c.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",d);if(h)return h.apply(this,arguments)}}"GET"!==f.type&&!c.emulateJSON&&(f.processData=!1);if("PATCH"===f.type&&window.ActiveXObject&&(!window.external||!window.external.msActiveXFilteringEnabled))f.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")};a=c.xhr=g.ajax(e.extend(f,c));b.trigger("request",b,a,c);return a};var I=
{create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};g.ajax=function(){return g.$.ajax.apply(g.$,arguments)};var A=g.Router=function(a){a||(a={});a.routes&&(this.routes=a.routes);this._bindRoutes();this.initialize.apply(this,arguments)},J=/\((.*?)\)/g,K=/(\(\?)?:\w+/g,L=/\*\w+/g,M=/[\-{}\[\]+?.,\\\^$|#\s]/g;e.extend(A.prototype,h,{initialize:function(){},route:function(a,b,c){e.isRegExp(a)||(a=this._routeToRegExp(a));e.isFunction(b)&&(c=b,b="");c||(c=this[b]);var d=this;g.history.route(a,
function(e){e=d._extractParameters(a,e);c&&c.apply(d,e);d.trigger.apply(d,["route:"+b].concat(e));d.trigger("route",b,e);g.history.trigger("route",d,b,e)});return this},navigate:function(a,b){g.history.navigate(a,b);return this},_bindRoutes:function(){if(this.routes){this.routes=e.result(this,"routes");for(var a,b=e.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){a=a.replace(M,"\\$&").replace(J,"(?:$1)?").replace(K,function(a,c){return c?a:"([^/]+)"}).replace(L,
"(.*?)");return RegExp("^"+a+"$")},_extractParameters:function(a,b){var c=a.exec(b).slice(1);return e.map(c,function(a){return a?decodeURIComponent(a):null})}});var m=g.History=function(){this.handlers=[];e.bindAll(this,"checkUrl");"undefined"!==typeof window&&(this.location=window.location,this.history=window.history)},B=/^[#\/]|\s+$/g,N=/^\/+|\/+$/g,O=/msie [\w.]+/,P=/\/$/;m.started=!1;e.extend(m.prototype,h,{interval:50,getHash:function(a){return(a=(a||this).location.href.match(/#(.*)$/))?a[1]:
""},getFragment:function(a,b){if(null==a)if(this._hasPushState||!this._wantsHashChange||b){var a=this.location.pathname,c=this.root.replace(P,"");a.indexOf(c)||(a=a.substr(c.length))}else a=this.getHash();return a.replace(B,"")},start:function(a){if(m.started)throw Error("Backbone.history has already been started");m.started=!0;this.options=e.extend({},{root:"/"},this.options,a);this.root=this.options.root;this._wantsHashChange=!1!==this.options.hashChange;this._wantsPushState=!!this.options.pushState;
this._hasPushState=!(!this.options.pushState||!this.history||!this.history.pushState);var a=this.getFragment(),b=document.documentMode,b=O.exec(navigator.userAgent.toLowerCase())&&(!b||7>=b);this.root=("/"+this.root+"/").replace(N,"/");b&&this._wantsHashChange&&(this.iframe=g.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(a));if(this._hasPushState)g.$(window).on("popstate",this.checkUrl);else if(this._wantsHashChange&&"onhashchange"in window&&
!b)g.$(window).on("hashchange",this.checkUrl);else this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval));this.fragment=a;a=this.location;b=a.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!b)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._wantsPushState&&(this._hasPushState&&b&&a.hash)&&(this.fragment=this.getHash().replace(B,
""),this.history.replaceState({},document.title,this.root+this.fragment+a.search));if(!this.options.silent)return this.loadUrl()},stop:function(){g.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);m.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(){var a=this.getFragment();a===this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe)));if(a===this.fragment)return!1;this.iframe&&
this.navigate(a);this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(a){var b=this.fragment=this.getFragment(a);return e.any(this.handlers,function(a){if(a.route.test(b))return a.callback(b),!0})},navigate:function(a,b){if(!m.started)return!1;if(!b||!0===b)b={trigger:b};a=this.getFragment(a||"");if(this.fragment!==a){this.fragment=a;var c=this.root+a;if(this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,c);else if(this._wantsHashChange)this._updateHash(this.location,
a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace));else return this.location.assign(c);b.trigger&&this.loadUrl(a)}},_updateHash:function(a,b,c){c?(c=a.href.replace(/(javascript:|#).*$/,""),a.replace(c+"#"+b)):a.hash="#"+b}});g.history=new m;n.extend=s.extend=A.extend=i.extend=m.extend=function(a,b){var c=this,d;d=a&&e.has(a,"constructor")?a.constructor:function(){return c.apply(this,
arguments)};e.extend(d,c,b);var f=function(){this.constructor=d};f.prototype=c.prototype;d.prototype=new f;a&&e.extend(d.prototype,a);d.__super__=c.prototype;return d};var z=function(){throw Error('A "url" property or function must be specified');},r=function(a,b){var c=b.error;b.error=function(d){c&&c(a,d,b);a.trigger("error",a,d,b)}}});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:backbone', location = 'libs/backbone.js' */
define("jira/components/libs/backbone",["require"],function(c){var a=c("atlassian/libs/factories/backbone-1.0.0");var b=c("jira/components/libs/underscore");var d=c("jquery");return a(b,d)});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:ajs-helper', location = 'util/ajshelper.js' */
define("jira/components/utils/ajshelper",[],function(){var a=window.AJS;return{escapeHtml:a.escapeHtml.bind(a),LEFT:a.LEFT,Templates:a.Templates,HIDE_REASON:a.HIDE_REASON,trigger:a.trigger.bind(a),log:a.log.bind(a),extractBodyFromResponse:a.extractBodyFromResponse,whenIType:function(){return a.whenIType},activeShortcuts:function(){return a.activeShortcuts}}});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'libs/marionette-1.4.1.js' */
define("jira/components/libs/marionette-1.4.1",["require"],function(b){var c=b("atlassian/libs/factories/marionette-1.4.1");var d=b("jira/components/libs/backbone");var a=b("jira/components/libs/underscore");return c(a,d)});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'libs/mariontte-1.4.1-mixins/Mixins.js' */
define("jira/components/libs/marionette-1.4.1/mixins",["require"],function(b){var a=b("jira/components/libs/underscore");return{listenAndRethrow:function(d,c){c=[].concat(c);a.each(c,function(e){this.listenTo(d,e,function(){this.trigger.apply(this,[e].concat(a.toArray(arguments)))},this)},this)},triggerPreventable:function(d,c){var e=a.defaults({},c||{},{isPrevented:false,emitter:this,preventDefault:function(){this.isPrevented=true}});this.trigger(d,e);return e}}});AJS.namespace("JIRA.Marionette.Mixins",null,require("jira/components/libs/marionette-1.4.1/mixins"));;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'libs/mariontte-1.4.1-mixins/LinkRegion.js' */
define("jira/components/libs/marionette-1.4.1/linkregion",["require"],function(a){var b=a("jira/components/libs/marionette-1.4.1");return b.Region.extend({open:function(c){this.$el.append(c.$el.children());c.setElement(this.$el)}})});AJS.namespace("JIRA.Marionette.LinkRegion",null,require("jira/components/libs/marionette-1.4.1/linkregion"));;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'libs/mariontte-1.4.1-mixins/ReplaceRegion.js' */
define("jira/components/libs/marionette-1.4.1/replaceregion",["require"],function(a){var b=a("jira/components/libs/marionette-1.4.1");return b.Region.extend({open:function(c){this.$el.replaceWith(c.el)}})});AJS.namespace("JIRA.Marionette.ReplaceRegion",null,require("jira/components/libs/marionette-1.4.1/replaceregion"));;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'libs/mariontte-1.4.1-mixins/Controller.js' */
define("jira/components/libs/marionette-1.4.1/controller",["require"],function(c){var b=c("jira/components/libs/underscore");var e=c("jira/components/libs/marionette-1.4.1");var a=c("jira/components/libs/marionette-1.4.1/mixins");var d=e.Controller.extend({});b.extend(d.prototype,a);return d});AJS.namespace("JIRA.Marionette.Controller",null,require("jira/components/libs/marionette-1.4.1/controller"));;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'libs/mariontte-1.4.1-mixins/ItemView.js' */
define("jira/components/libs/marionette-1.4.1/itemview",["require"],function(a){var b=a("jira/components/libs/marionette-1.4.1");return b.ItemView.extend({renderTemplate:function(){var e=this.serializeData();e=this.mixinTemplateHelpers(e);var d=this.getTemplate();var c=b.Renderer.render(d,e);return b.$(c)},applyToDom:function(){this.delegateEvents();this.bindUIElements();this.triggerMethod("applyToDom")},unwrapTemplate:function(){if(this.$el.parent().length){var c=this.$el.children();this.$el.replaceWith(c);this.setElement(c)}else{this.setElement(this.$el.children())}}})});AJS.namespace("JIRA.Marionette.ItemView",null,require("jira/components/libs/marionette-1.4.1/itemview"));;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'libs/mariontte-1.4.1-mixins/CollectionView.js' */
define("jira/components/libs/marionette-1.4.1/collectionview",["require"],function(a){var c=a("jira/components/libs/marionette-1.4.1");var b=a("jira/components/libs/marionette-1.4.1/itemview");return c.CollectionView.extend({_appendHtmlWithIndex:function(d,g,e){var f=d.children();var h=f.length;if(e<=0){d.prepend(g.$el)}else{if(!h||e>=h){d.append(g.$el)}else{g.$el.insertBefore(f.eq(e))}}},appendHtml:function(d,f,e){this._appendHtmlWithIndex(d.$el,f,e)},unwrapTemplate:function(){b.prototype.unwrapTemplate.call(this)}})});AJS.namespace("JIRA.Marionette.CollectionView",null,require("jira/components/libs/marionette-1.4.1/collectionview"));;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'libs/mariontte-1.4.1-mixins/CompositeView.js' */
define("jira/components/libs/marionette-1.4.1/compositeview",["require"],function(a){var d=a("jira/components/libs/marionette-1.4.1");var b=a("jira/components/libs/marionette-1.4.1/collectionview");var c=a("jira/components/libs/marionette-1.4.1/itemview");return d.CompositeView.extend({appendHtml:function(e,g,f){b.prototype._appendHtmlWithIndex(this.getItemViewContainer(e),g,f)},unwrapTemplate:function(){c.prototype.unwrapTemplate.call(this)}})});AJS.namespace("JIRA.Marionette.CompositeView",null,require("jira/components/libs/marionette-1.4.1/compositeview"));;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'libs/mariontte-1.4.1-mixins/Layout.js' */
define("jira/components/libs/marionette-1.4.1/layout",["require"],function(c){var b=c("jira/components/libs/underscore");var e=c("jira/components/libs/marionette-1.4.1");var a=c("jira/components/libs/marionette-1.4.1/mixins");var d=e.Layout.extend({applyToDom:function(){this.delegateEvents();this.bindUIElements();this._reInitializeRegions();this.triggerMethod("applyToDom")}});b.extend(d.prototype,a);return d});AJS.namespace("JIRA.Marionette.Layout",null,require("jira/components/libs/marionette-1.4.1/layout"));;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'libs/mariontte-1.4.1-mixins/Application.js' */
define("jira/components/libs/marionette-1.4.1/application",["require"],function(b){var a=b("jira/components/libs/underscore");var c=b("jira/components/libs/marionette-1.4.1");return c.Application.extend({constructor:function(d){c.Application.call(this,d)},start:function(d){if(!d||d.forceStop!==false){this.stop()}c.Application.prototype.start.call(this,d)},stop:function(){a.invoke(this.submodules,"stop")}})});AJS.namespace("JIRA.Marionette.Application",null,require("jira/components/libs/marionette-1.4.1/application"));;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'libs/mariontte-1.4.1-mixins/AppModule.js' */
define("jira/components/libs/marionette-1.4.1/appmodule",["require"],function(d){var c=d("jira/components/libs/underscore");var e=d("jira/components/libs/marionette-1.4.1");var a=d("jira/components/libs/marionette-1.4.1/mixins");var b=function(){this.definition=c.bind(this.definition,this)};b.extend=e.extend;c.extend(b.prototype,{create:function(){throw new Error("create() must be implemented by AppModules")},generateMasterRequest:false,name:"",commands:{},requests:{},events:[],definition:function(g,i){var h=this.name;var f=this;if(!h){throw new Error("'name' must be defined by AppModules")}g.addInitializer(function(){var k=f.create.apply(f,c.toArray(arguments));function m(o){if(c.isFunction(o)){o=o(k)}var p={};c.each(o,function(r,q){if(r===true){r=c.bind(k[q],k)}if(q&&h){q=h+":"+q}else{q=h}p[q]=r});return p}function l(p,o){if(c.isFunction(o)){o=o(k)}c.each(o,function(r){var q=h+":"+r;p.listenTo(k,r,function(){this.trigger.apply(this,[q].concat(c.toArray(arguments)))})})}var j=m(f.commands);var n=m(f.requests);if(f.generateMasterRequest){c.extend(n,m({"":function(){return k}}))}i.commands.setHandlers(j);i.reqres.setHandlers(n);l(i,f.events)})}});c.extend(b.prototype,a);return b});AJS.namespace("JIRA.Marionette.AppModule",null,require("jira/components/libs/marionette-1.4.1/appmodule"));;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'libs/mariontte-1.4.1-mixins/DialogView.js' */
define("jira/components/libs/marionette-1.4.1/dialogview",["require"],function(e){var i=e("jira/components/libs/underscore");var h=e("jira/components/libs/marionette-1.4.1");var g=e("jira/components/libs/marionette-1.4.1/itemview");var b=e("aui/message");var d=e("jira/dialog/form-dialog");var j=e("jquery");var a=e("jira/ajs/ajax/smart-ajax");var f=e("jira/dialog/dialog");var c=e("jira/components/utils/ajshelper");return g.extend({dialog:null,template:j.noop,_generateDialog:function(){var m=this.serializeData();var l=this.getTemplate();var n={id:this.id,content:function(o){o(l(m))},submitHandler:i.bind(this._generateSubmissionXHR,this)};var k=h.getOption(this,"dialogOptions");if(i.isFunction(k)){k=k.apply(this)}return new d(i.extend(n,k))},render:function(){this.isClosed=false;this.triggerMethod("before:render",this);this.dialog=this._generateDialog();this.dialog.show();this.$el=this.dialog.get$popup();j(this.dialog).on("Dialog.hide",i.bind(function(m,k,l){if(l===f.HIDE_REASON.cancel||l===f.HIDE_REASON.escape){this.close()}},this));this.triggerMethod("render",this);return this},close:function(){if(this.isClosed){return}var k=this.triggerMethod("before:close");if(k===false){return}j(this.dialog).off("Dialog.hide");this.dialog.hide(true);this.dialog.destroy();this.isClosed=true;this.triggerMethod("close");this.remove()},_generateSubmissionXHR:function(o,k){o.preventDefault();var m=this.dialog.$form;var n=h.getOption(this,"formToRequestData");if(i.isFunction(n)){n=n.call(this,m)}var l=a.makeRequest({type:m.attr("method"),url:m.attr("action"),contentType:"application/json",dataType:"json",processData:false,data:JSON.stringify(n)}).done(k).done(i.bind(this._onSubmitSuccess,this)).fail(i.bind(this._onSubmitError,this));return l},_onSubmitSuccess:function(k){this.triggerMethod("submit:success",k);this.close()},_onSubmitError:function(k){this.dialog.getButtonsContainer().find("input").removeAttr("disabled");this.dialog.hideFooterLoadingIndicator();this.dialog.$form.removeClass("submitting");this._showErrorFromXHR(k);this.triggerMethod("submit:error")},_displayFieldErrors:function(l){var k=this.dialog.$popup;i.each(l,function(m,n){k.find("#"+n).after("<div class='error'>"+c.escapeHtml(m)+"</div>")})},_displayGenericErrors:function(l){var k=this.dialog.$popup.find(".aui-messages");i.each(l,function(n){var m={closeable:true,timeout:5};m.body=c.escapeHtml(n);m.shadowed=false;b.error(k,m)})},_displayXHRErrors:function(l){var k=this.dialog.$popup.find(".aui-messages");k.append(a.buildDialogErrorContent(l,true))},_showErrorFromXHR:function(l){this._removeErrorMessages();var m;try{m=JSON.parse(l.responseText)}catch(k){m=null}if(m){this._displayFieldErrors(m.errors);this._displayGenericErrors(m.errorMessages)}else{this._displayXHRErrors(l)}},_removeErrorMessages:function(){this.dialog.$popup.find(".error").remove();this.dialog.$popup.find(".aui-messages").empty()}})});AJS.namespace("JIRA.Marionette.DialogView",null,require("jira/components/libs/marionette-1.4.1/dialogview"));;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'libs/mariontte-1.4.1-mixins/InlineDialogView.js' */
define("jira/components/libs/marionette-1.4.1/inlinedialogview",["require"],function(b){var a=b("jira/components/libs/underscore");var f=b("jira/components/libs/marionette-1.4.1");var d=b("jira/components/libs/marionette-1.4.1/itemview");var e=b("jquery");var c=b("aui/inline-dialog");return d.extend({dialog:null,template:e.noop,_getDialogOptions:function(){var h={noBind:true};var g=f.getOption(this,"dialogOptions")||{};if(a.isFunction(g)){g=g.apply(this)}g=a.extend({},h,g);g.hideCallback=a.bind(function(){this.close()},this);return g},_getTrigger:function(){var g=f.getOption(this,"trigger");if(a.isFunction(g)){g=g.apply(this)}return g},_generateDialog:function(){var j=this.serializeData();var i=this.getTemplate();var h=this._getDialogOptions();var g=this._getTrigger();return new c(g,this.id,function(l,k,m){l.html(i(j));m()},h)},render:function(){this.isClosed=false;this.triggerMethod("before:render",this);this.dialog=this._generateDialog();this.$el=this.dialog;this.id=this.dialog.id;this.dialog.show();this.triggerMethod("render",this);return this},close:function(){if(this.isClosed){return}var g=this.triggerMethod("before:close");if(g===false){return}this.dialog.hide();this.isClosed=true;this.triggerMethod("close");this.remove()}})});AJS.namespace("JIRA.Marionette.InlineDialogView",null,require("jira/components/libs/marionette-1.4.1/inlinedialogview"));;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:lib', location = 'namespaces.js' */
JIRA.Components=JIRA.Components||{};JIRA.Issues=JIRA.Issues||{};JIRA.Events=JIRA.Events||{};;
;
/* module-key = 'com.atlassian.plugin.jslibs:brace-2014.09.03-factory', location = 'factories/brace/2014.09.03/brace-2104.09.03-factory.js' */
(function(j){define("atlassian/libs/factories/brace-2014.09.03",function(){return function(n,g){var c={_:n,Backbone:g};j.call(c);c=c.Brace.noConflict();c.VERSION="2014.09.03";return c}})})(function(){var j=this,n=j.Brace,g,c=j._,i=j.Backbone,o=function(a){return c.isArray(a)?c.reduce(a,function(b,a){b[a]=null;return b},{}):a},m=function(a,b){if(!a||null==b||a===String&&c.isString(b)||a===Number&&c.isNumber(b)||a===Boolean&&c.isBoolean(b))return b;if("string"===typeof a||a instanceof String){if(typeof b!==
""+a)throw"The typeof "+b+" is "+typeof b+" but expected it to be "+a;return b}if(c.isArray(a)||a===Array){if(!c.has(b,"length")||b instanceof String||c.has({string:1,"function":1},typeof b)||b instanceof i.Collection)throw"Array type expected, but nonnull, non-Array value provided.";return a===Array||!a[0]?b:c.map(b,c.bind(m,null,a[0]))}if("function"!==typeof a)throw"Invalid expected type "+a+". Should be falsy, String, Array, Backbone.Collection constructor, or function.";return b instanceof a?
b:p(a)?new a(m([a.model],b)):new a(b)},p=function(a,b){return a&&(a.__super__ instanceof(b||i.Collection)||a.__super__===(b||i.Collection).prototype||a===(b||i.Collection))},x=function(a,b){var d={};c.each(a,function(a,c){if(!b[c]||q(a,b[c]))d[c]=a;else if(a&&!q(b[c],a))throw c+" has conflicted type descriptors.";});return d},q=function(a,b){return!b||b===a?!0:!a||"string"===typeof a?!1:a instanceof Array?b===Array||b instanceof Array&&q(a[0],b[0]):"function"!==typeof b?!1:p(b)?p(a,b):a.prototype instanceof
b};g=function(a){var b=a.extend(),d=a.extend;b.extend=function w(a,b){var h,g=c.extend({},a),i;a&&a.mixins&&(i=a.mixins,delete g.mixins);h=d.call(this,g,b);this.prototype.namedEvents&&f.Mixins.applyMixin(h,{namedEvents:this.prototype.namedEvents});this.prototype.namedAttributes&&f.Mixins.applyMixin(h,{namedAttributes:this.prototype.namedAttributes});i&&c.each(a.mixins,function(a){f.Mixins.applyMixin(h,a)});h.prototype.namedEvents&&f.Mixins.applyMixin(h,f.EventsMixinCreator.create(h.prototype.namedEvents));
h.prototype.namedAttributes&&(h.prototype.namedAttributes=o(h.prototype.namedAttributes),f.Mixins.applyMixin(h,f.AttributesMixinCreator.create(h.prototype.namedAttributes,h.prototype.idAttribute)));if(h.prototype.toJSON){var j=h.prototype.toJSON;h.prototype.toJSON=function(){var a;a=j.call(this);a=c.isObject(a)?c.reduce(a,function(a,b,d){b&&c.isFunction(b.toJSON)?a[d]=b.toJSON():c.isArray(b)&&(a[d]=c.map(b,function(a){return a&&c.isFunction(a.toJSON)?a.toJSON():a}));return a},a):a;return a}}h.extend=
w;return h};return b};var f={Mixins:{createMethodName:function(a,b){return a+b.charAt(0).toUpperCase()+b.substr(1)},applyMixin:function(a,b){c.forEach(c.keys(b),function(d){var e=a.prototype;if("initialize"===d){var f=e.initialize;e.initialize=function(){f&&f.apply(this,arguments);b.initialize.apply(this,arguments)}}else if("validate"===d){var g=e.validate;e.validate=function(){if(g){var a=g.apply(this,arguments);if(a)return a}return b.validate.apply(this,arguments)}}else if("defaults"===d){var e=
e.defaults||(e.defaults={}),d=b[d],k;for(k in d){if(e.hasOwnProperty(k))throw"Mixin error: class already has default '"+k+"' defined";e[k]=d[k]}}else if("namedAttributes"===d)k=o(e.namedAttributes)||{},d=o(b[d]),e.namedAttributes=c.extend(k,x(d,k));else if("namedEvents"===d){if(!c.isArray(b[d]))throw"Expects events member on mixin to be an array";e.namedEvents||(e.namedEvents=[]);e.namedEvents=c.uniq(e.namedEvents.concat(b[d]))}else{if(e.hasOwnProperty(d))throw"Mixin error: class already has property '"+
d+"' defined";e[d]=b[d]}},this)}}};f.AttributesMixinCreator={create:function(a,b){var d={};a||(a={});c.has(a,"id")||(a.id=null);c.each(a,function(a,b){var c=f.Mixins.createMethodName("set",b);d[c]=function(a,c){return this.set(b,a,c)};c=f.Mixins.createMethodName("get",b);d[c]=function(){return this.get(b)}});if("string"===typeof b&&"undefined"!==typeof a[b]&&"id"!==b){a.id=a[b];var e=f.Mixins.createMethodName("get",b),g=f.Mixins.createMethodName("set",b);d.getId=function(){return this[e]()};d.setId=
function(a,b){return this[g](a,b)}}return d},ensureType:m};f.EventsMixinCreator={create:function(a){var b={};c.each(a,c.bind(function(a){var e=f.Mixins.createMethodName("on",a);b[e]=function(){return this.on.apply(this,[a].concat(c.toArray(arguments)))};e=f.Mixins.createMethodName("trigger",a);b[e]=function(){return this.trigger.apply(this,[a].concat(c.toArray(arguments)))}},this));return b}};var l=f,r=i.Model,s=g(r),t=r.prototype,u=s.prototype,v=t.set;u.set=function(a,b,d){var e,f=this.namedAttributes;
if(!f||null==a)return v.apply(this,arguments);c.isObject(a)?(e=c.clone(a),d=b):(e={},e[a]=b);for(var g in e)if(c.has(e,g)){if(!c.has(f,g))throw"Attribute '"+g+"' does not exist";e[g]=m(f[g],e[g])}return v.call(this,e,d)};var y=t.get;u.get=function(a){if(this.namedAttributes&&!c.has(this.namedAttributes,a))throw"Attribute '"+a+"' does not exist";return y.apply(this,arguments)};var z=r.prototype.parse;s.prototype.parse=function(a,b){return c.pick(z(a,b),c.keys(this.namedAttributes))};l.Model=s;f.Collection=
g(i.Collection);f.View=g(i.View);f.Router=g(i.Router);l=function(){this.initialize.apply(this,arguments)};c.extend(l.prototype,i.Events,{initialize:function(){}});l.extend=i.Model.extend;f.Evented=g(l);g=f;g.noConflict=function(){j.Brace=n;return this};j.Brace=g});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:brace', location = 'libs/brace.js' */
define("jira/components/libs/brace",["require"],function(b){var c=b("atlassian/libs/factories/brace-2014.09.03");var d=b("jira/components/libs/backbone");var a=b("jira/components/libs/underscore");return c(a,d)});AJS.namespace("JIRA.Issues.Brace",null,require("jira/components/libs/brace"));;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:tipsy', location = 'lib/jquery.hoverIntent.min.js' */
// jshint ignore: start
/*eslint-disable*/
/**
* hoverIntent r6 // 2011.02.26 // jQuery 1.5.1+
* <http://cherne.net/brian/resources/jquery.hoverIntent.html>
* 
* @param  f  onMouseOver function || An object with configuration options
* @param  g  onMouseOut function  || Nothing (use configuration options object)
* @author    Brian Cherne brian(at)cherne(dot)net
*/
(function($){$.fn.hoverIntent=function(f,g){var cfg={sensitivity:7,interval:100,timeout:0};cfg=$.extend(cfg,g?{over:f,out:g}:f);var cX,cY,pX,pY;var track=function(ev){cX=ev.pageX;cY=ev.pageY};var compare=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);if((Math.abs(pX-cX)+Math.abs(pY-cY))<cfg.sensitivity){$(ob).unbind("mousemove",track);ob.hoverIntent_s=1;return cfg.over.apply(ob,[ev])}else{pX=cX;pY=cY;ob.hoverIntent_t=setTimeout(function(){compare(ev,ob)},cfg.interval)}};var delay=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);ob.hoverIntent_s=0;return cfg.out.apply(ob,[ev])};var handleHover=function(e){var ev=jQuery.extend({},e);var ob=this;if(ob.hoverIntent_t){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t)}if(e.type=="mouseenter"){pX=ev.pageX;pY=ev.pageY;$(ob).bind("mousemove",track);if(ob.hoverIntent_s!=1){ob.hoverIntent_t=setTimeout(function(){compare(ev,ob)},cfg.interval)}}else{$(ob).unbind("mousemove",track);if(ob.hoverIntent_s==1){ob.hoverIntent_t=setTimeout(function(){delay(ev,ob)},cfg.timeout)}}};return this.bind('mouseenter',handleHover).bind('mouseleave',handleHover)}})(jQuery);;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:tipsy', location = 'util/TipsyView.js' */
define("jira/issues/tipsy",["require"],function(b){var a=b("jira/components/libs/underscore");var c=b("jira/components/libs/brace");var e=b("jquery");if(!e.fn.tooltip){e.fn.tooltip=e.noop;e.fn.tipsy=e.noop}var d=c.View.extend({events:{click:"hide"},initialize:function(f){if(a.isFunction(f.showCondition)){this.shouldShow=f.showCondition}else{if(f.showCondition){this.shouldShow=a.bind(function(){return this.$el.filter(f.showCondition).length>0},this)}else{this.shouldShow=function(){return true}}}this.tipsy=this.$el.tooltip(a.extend({trigger:"manual"},f.tipsy));this.hoverIntent(f.intents)},hoverIntent:function(f){if(this.tipsy){this.tipsy.hoverIntent(a.extend({interval:200,over:a.bind(this.show,this),out:a.bind(this.hide,this)},f))}return this},show:function(){if(this.shouldShow()&&this.tipsy){this.$el.tipsy("show")}},hide:function(){if(this.tipsy){this.$el.tipsy("hide")}},remove:function(){this.hide();this.$el.removeData("tipsy")}});d.revalidate=function(){return e.fn.tipsy.revalidate()};d.autoBounds=function(){return e.fn.tipsy.autoBounds.apply(e.fn.tipsy,arguments)};return d});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:tipsy', location = 'util/namespace.js' */
AJS.namespace("JIRA.Issues.Tipsy",null,require("jira/issues/tipsy"));;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:jqueryutils', location = 'util/jquery/CatchExceptions.js' */
(function(b){var a=function(c){return function(){try{c.apply(this,arguments)}catch(d){}return this}};b.fn.htmlCatchExceptions=a(b.fn.html);b.fn.appendCatchExceptions=a(b.fn.append);b.fn.prependCatchExceptions=a(b.fn.prepend);b.catchExceptions=function(c){return b("<div>").htmlCatchExceptions(c).children()}})(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:jqueryutils', location = 'util/jquery/RecurringPromise.js' */
(function(){jQuery.RecurringPromise=function(a){if(!(this instanceof jQuery.RecurringPromise)){return new jQuery.RecurringPromise()}this._parent=a;this._doneCallbacks=new jQuery.Callbacks();this._failCallbacks=new jQuery.Callbacks();this._alwaysCallbacks=new jQuery.Callbacks()};jQuery.RecurringPromise.prototype={add:function(b){var a=new jQuery.Deferred();a.original=b;var c=this._getPending();this._abortIfPending(c);this._setPending(a);b.done(_.bind(function(){if(a===this._getPending()){a.resolveWith(this,arguments);this._doneCallbacks.fireWith(this,arguments)}},this));b.fail(_.bind(function(){if(a===this._getPending()){a.rejectWith(this,arguments);this._failCallbacks.fireWith(this,arguments)}},this));b.always(_.bind(function(){if(a===this._getPending()){this._alwaysCallbacks.fireWith(this,arguments)}},this));return a.promise()},done:function(a){this._doneCallbacks.add(a);return this},fail:function(a){this._failCallbacks.add(a);return this},always:function(a){this._alwaysCallbacks.add(a);return this},reset:function(){this._abortIfPending(this._getPending());this._setPending(null)},sub:function(){return new jQuery.RecurringPromise(this)},_getPending:function(){return this._parent?this._parent._getPending():this._pending},_setPending:function(a){if(this._parent){this._parent._setPending(a)}else{this._pending=a}},_abortIfPending:function(a){if(a&&a.state()==="pending"){a.reject("abort");if(jQuery.isFunction(a.original.abort)){a.original.abort()}}}}}());;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:jqueryutils', location = 'util/jquery/ConcurrentDeferred.js' */
jQuery.ConcurrentDeferred=function(c){var b=new jQuery.Deferred();var d;var a=function(e){d=e;e.done(function(){if(d===e){b.resolve.apply(b,arguments)}}).fail(function(){if(d===e){b.reject.apply(b,arguments)}})};a(c);jQuery.extend(b,{update:function(e){if(!this.isPending()){throw"Cannot update non-pending ConcurrentDeferred"}var f=d;a(e);if(jQuery.isFunction(f.abort)){f.abort()}return this},isPending:function(){return this.state()==="pending"}});return b};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:jqueryutils', location = 'util/jquery/ScrollLock.js' */
(function(b){var a=30;b.fn.scrollLock=function(c,d){if(typeof c!=="string"){d=c;c=null}if(!d){d=a}this.on("DOMMouseScroll mousewheel",c,function(f){f.preventDefault();var g;if(f.originalEvent.wheelDelta){g=f.originalEvent.wheelDelta/120}if(f.originalEvent.detail){g=-f.originalEvent.detail/3}if(b.isNumeric(g)){this.scrollTop-=g*d}})}})(AJS.$);;
;
/* module-key = 'com.atlassian.plugin.jslibs:uri-1.14.1', location = 'libs/uri/1.14.1/uri-1.14.1.js' */
(function(n){define("atlassian/libs/uri-1.14.1",function(){var q={};n.call(q);return q.URI.noConflict()})})(function(){var n=this.punycode,q=this.IPv6,p=this.SecondLevelDomains,k=this,e=function(a,b){if(!(this instanceof e))return new e(a,b);void 0===a&&(a="undefined"!==typeof location?location.href+"":"");this.href(a);return void 0!==b?this.absoluteTo(b):this},o=function(a){return a.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},t=function(a){return void 0===a?"Undefined":String(Object.prototype.toString.call(a)).slice(8,
-1)},j=function(a){return"Array"===t(a)},s=function(a,b){var c,e;if(j(b)){c=0;for(e=b.length;c<e;c++)if(!s(a,b[c]))return!1;return!0}var h=t(b);c=0;for(e=a.length;c<e;c++)if("RegExp"===h){if("string"===typeof a[c]&&a[c].match(b))return!0}else if(a[c]===b)return!0;return!1},w=function(a,b){if(!j(a)||!j(b)||a.length!==b.length)return!1;a.sort();b.sort();for(var c=0,e=a.length;c<e;c++)if(a[c]!==b[c])return!1;return!0},A=function(a){return escape(a)},u=function(a){return encodeURIComponent(a).replace(/[!'()*]/g,
A).replace(/\*/g,"%2A")},r=function(a){return function(b,c){if(void 0===b)return this._parts[a]||"";this._parts[a]=b||null;this.build(!c);return this}},x=function(a,b){return function(c,e){if(void 0===c)return this._parts[a]||"";null!==c&&(c+="",c.charAt(0)===b&&(c=c.substring(1)));this._parts[a]=c;this.build(!e);return this}},B=k&&k.URI;e.version="1.14.1";var d=e.prototype,m=Object.prototype.hasOwnProperty;e._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,
port:null,path:null,query:null,fragment:null,duplicateQueryParameters:e.duplicateQueryParameters,escapeQuerySpace:e.escapeQuerySpace}};e.duplicateQueryParameters=!1;e.escapeQuerySpace=!0;e.protocol_expression=/^[a-z][a-z0-9.+-]*$/i;e.idn_expression=/[^a-z0-9\.-]/i;e.punycode_expression=/(xn--)/i;e.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/;e.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/;
e.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u2018\u2019]))/ig;e.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u201e\u2018\u2019]+$/};e.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"};e.invalid_hostname_characters=
/[^a-zA-Z0-9\.-]/;e.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"};e.getDomAttribute=function(a){if(a&&a.nodeName){var b=a.nodeName.toLowerCase();return"input"===b&&"image"!==a.type?void 0:e.domAttributes[b]}};e.encode=u;e.decode=decodeURIComponent;e.iso8859=function(){e.encode=escape;e.decode=unescape};e.unicode=function(){e.encode=u;e.decode=
decodeURIComponent};e.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/ig,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",",
"%3B":";","%3D":"="}}}};e.encodeQuery=function(a,b){var c=e.encode(a+"");void 0===b&&(b=e.escapeQuerySpace);return b?c.replace(/%20/g,"+"):c};e.decodeQuery=function(a,b){a+="";void 0===b&&(b=e.escapeQuerySpace);try{return e.decode(b?a.replace(/\+/g,"%20"):a)}catch(c){return a}};e.recodePath=function(a){for(var a=(a+"").split("/"),b=0,c=a.length;b<c;b++)a[b]=e.encodePathSegment(e.decode(a[b]));return a.join("/")};e.decodePath=function(a){for(var a=(a+"").split("/"),b=0,c=a.length;b<c;b++)a[b]=e.decodePathSegment(a[b]);
return a.join("/")};var y={encode:"encode",decode:"decode"},v,z=function(a,b){return function(c){try{return e[b](c+"").replace(e.characters[a][b].expression,function(c){return e.characters[a][b].map[c]})}catch(f){return c}}};for(v in y)e[v+"PathSegment"]=z("pathname",y[v]);e.encodeReserved=z("reserved","encode");e.parse=function(a,b){var c;b||(b={});c=a.indexOf("#");-1<c&&(b.fragment=a.substring(c+1)||null,a=a.substring(0,c));c=a.indexOf("?");-1<c&&(b.query=a.substring(c+1)||null,a=a.substring(0,
c));"//"===a.substring(0,2)?(b.protocol=null,a=a.substring(2),a=e.parseAuthority(a,b)):(c=a.indexOf(":"),-1<c&&(b.protocol=a.substring(0,c)||null,b.protocol&&!b.protocol.match(e.protocol_expression)?b.protocol=void 0:"//"===a.substring(c+1,c+3)?(a=a.substring(c+3),a=e.parseAuthority(a,b)):(a=a.substring(c+1),b.urn=!0)));b.path=a;return b};e.parseHost=function(a,b){var c=a.indexOf("/"),e;-1===c&&(c=a.length);"["===a.charAt(0)?(e=a.indexOf("]"),b.hostname=a.substring(1,e)||null,b.port=a.substring(e+
2,c)||null,"/"===b.port&&(b.port=null)):a.indexOf(":")!==a.lastIndexOf(":")?(b.hostname=a.substring(0,c)||null,b.port=null):(e=a.substring(0,c).split(":"),b.hostname=e[0]||null,b.port=e[1]||null);b.hostname&&"/"!==a.substring(c).charAt(0)&&(c++,a="/"+a);return a.substring(c)||"/"};e.parseAuthority=function(a,b){a=e.parseUserinfo(a,b);return e.parseHost(a,b)};e.parseUserinfo=function(a,b){var c=a.indexOf("/"),f=a.lastIndexOf("@",-1<c?c:a.length-1);-1<f&&(-1===c||f<c)?(c=a.substring(0,f).split(":"),
b.username=c[0]?e.decode(c[0]):null,c.shift(),b.password=c[0]?e.decode(c.join(":")):null,a=a.substring(f+1)):(b.username=null,b.password=null);return a};e.parseQuery=function(a,b){if(!a)return{};a=a.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"");if(!a)return{};for(var c={},f=a.split("&"),h=f.length,d,i,l=0;l<h;l++)d=f[l].split("="),i=e.decodeQuery(d.shift(),b),d=d.length?e.decodeQuery(d.join("="),b):null,m.call(c,i)?("string"===typeof c[i]&&(c[i]=[c[i]]),c[i].push(d)):c[i]=d;return c};e.build=function(a){var b=
"";a.protocol&&(b+=a.protocol+":");if(!a.urn&&(b||a.hostname))b+="//";b+=e.buildAuthority(a)||"";"string"===typeof a.path&&("/"!==a.path.charAt(0)&&"string"===typeof a.hostname&&(b+="/"),b+=a.path);"string"===typeof a.query&&a.query&&(b+="?"+a.query);"string"===typeof a.fragment&&a.fragment&&(b+="#"+a.fragment);return b};e.buildHost=function(a){var b="";if(a.hostname)b=e.ip6_expression.test(a.hostname)?b+("["+a.hostname+"]"):b+a.hostname;else return"";a.port&&(b+=":"+a.port);return b};e.buildAuthority=
function(a){return e.buildUserinfo(a)+e.buildHost(a)};e.buildUserinfo=function(a){var b="";a.username&&(b+=e.encode(a.username),a.password&&(b+=":"+e.encode(a.password)),b+="@");return b};e.buildQuery=function(a,b,c){var f="",h,d,i,l;for(d in a)if(m.call(a,d)&&d)if(j(a[d])){h={};i=0;for(l=a[d].length;i<l;i++)void 0!==a[d][i]&&void 0===h[a[d][i]+""]&&(f+="&"+e.buildQueryParameter(d,a[d][i],c),!0!==b&&(h[a[d][i]+""]=!0))}else void 0!==a[d]&&(f+="&"+e.buildQueryParameter(d,a[d],c));return f.substring(1)};
e.buildQueryParameter=function(a,b,c){return e.encodeQuery(a,c)+(null!==b?"="+e.encodeQuery(b,c):"")};e.addQuery=function(a,b,c){if("object"===typeof b)for(var f in b)m.call(b,f)&&e.addQuery(a,f,b[f]);else if("string"===typeof b)void 0===a[b]?a[b]=c:("string"===typeof a[b]&&(a[b]=[a[b]]),j(c)||(c=[c]),a[b]=(a[b]||[]).concat(c));else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");};e.removeQuery=function(a,b,c){var f;if(j(b)){c=0;for(f=b.length;c<f;c++)a[b[c]]=
void 0}else if("object"===typeof b)for(f in b)m.call(b,f)&&e.removeQuery(a,f,b[f]);else if("string"===typeof b)if(void 0!==c)if(a[b]===c)a[b]=void 0;else{if(j(a[b])){f=a[b];var d={},g,i;if(j(c)){g=0;for(i=c.length;g<i;g++)d[c[g]]=!0}else d[c]=!0;g=0;for(i=f.length;g<i;g++)void 0!==d[f[g]]&&(f.splice(g,1),i--,g--);a[b]=f}}else a[b]=void 0;else throw new TypeError("URI.addQuery() accepts an object, string as the first parameter");};e.hasQuery=function(a,b,c,f){if("object"===typeof b){for(var d in b)if(m.call(b,
d)&&!e.hasQuery(a,d,b[d]))return!1;return!0}if("string"!==typeof b)throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter");switch(t(c)){case "Undefined":return b in a;case "Boolean":return a=Boolean(j(a[b])?a[b].length:a[b]),c===a;case "Function":return!!c(a[b],b,a);case "Array":return!j(a[b])?!1:(f?s:w)(a[b],c);case "RegExp":return!j(a[b])?Boolean(a[b]&&a[b].match(c)):!f?!1:s(a[b],c);case "Number":c=String(c);case "String":return!j(a[b])?a[b]===c:!f?!1:s(a[b],c);default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter");
}};e.commonPath=function(a,b){var c=Math.min(a.length,b.length),e;for(e=0;e<c;e++)if(a.charAt(e)!==b.charAt(e)){e--;break}if(1>e)return a.charAt(0)===b.charAt(0)&&"/"===a.charAt(0)?"/":"";if("/"!==a.charAt(e)||"/"!==b.charAt(e))e=a.substring(0,e).lastIndexOf("/");return a.substring(0,e+1)};e.withinString=function(a,b,c){c||(c={});var f=c.start||e.findUri.start,d=c.end||e.findUri.end,g=c.trim||e.findUri.trim,i=/[a-z0-9-]=["']?$/i;for(f.lastIndex=0;;){var l=f.exec(a);if(!l)break;l=l.index;if(c.ignoreHtml){var j=
a.slice(Math.max(l-3,0),l);if(j&&i.test(j))continue}var j=l+a.slice(l).search(d),k=a.slice(l,j).replace(g,"");if(!c.ignore||!c.ignore.test(k))j=l+k.length,k=b(k,l,j,a),a=a.slice(0,l)+k+a.slice(j),f.lastIndex=l+k.length}f.lastIndex=0;return a};e.ensureValidHostname=function(a){if(a.match(e.invalid_hostname_characters)){if(!n)throw new TypeError('Hostname "'+a+'" contains characters other than [A-Z0-9.-] and Punycode.js is not available');if(n.toASCII(a).match(e.invalid_hostname_characters))throw new TypeError('Hostname "'+
a+'" contains characters other than [A-Z0-9.-]');}};e.noConflict=function(a){if(a)return a={URI:this.noConflict()},k.URITemplate&&"function"===typeof k.URITemplate.noConflict&&(a.URITemplate=k.URITemplate.noConflict()),k.IPv6&&"function"===typeof k.IPv6.noConflict&&(a.IPv6=k.IPv6.noConflict()),k.SecondLevelDomains&&"function"===typeof k.SecondLevelDomains.noConflict&&(a.SecondLevelDomains=k.SecondLevelDomains.noConflict()),a;k.URI===this&&(k.URI=B);return this};d.build=function(a){if(!0===a)this._deferred_build=
!0;else if(void 0===a||this._deferred_build)this._string=e.build(this._parts),this._deferred_build=!1;return this};d.clone=function(){return new e(this)};d.valueOf=d.toString=function(){return this.build(!1)._string};d.protocol=r("protocol");d.username=r("username");d.password=r("password");d.hostname=r("hostname");d.port=r("port");d.query=x("query","?");d.fragment=x("fragment","#");d.search=function(a,b){var c=this.query(a,b);return"string"===typeof c&&c.length?"?"+c:c};d.hash=function(a,b){var c=
this.fragment(a,b);return"string"===typeof c&&c.length?"#"+c:c};d.pathname=function(a,b){if(void 0===a||!0===a){var c=this._parts.path||(this._parts.hostname?"/":"");return a?e.decodePath(c):c}this._parts.path=a?e.recodePath(a):"/";this.build(!b);return this};d.path=d.pathname;d.href=function(a,b){var c;if(void 0===a)return this.toString();this._string="";this._parts=e._parts();var f=a instanceof e,d="object"===typeof a&&(a.hostname||a.path||a.pathname);a.nodeName&&(d=e.getDomAttribute(a),a=a[d]||
"",d=!1);!f&&(d&&void 0!==a.pathname)&&(a=a.toString());if("string"===typeof a||a instanceof String)this._parts=e.parse(String(a),this._parts);else if(f||d)for(c in f=f?a._parts:a,f)m.call(this._parts,c)&&(this._parts[c]=f[c]);else throw new TypeError("invalid input");this.build(!b);return this};d.is=function(a){var b=!1,c=!1,f=!1,d=!1,g=!1,i=!1,j=!1,k=!this._parts.urn;this._parts.hostname&&(k=!1,c=e.ip4_expression.test(this._parts.hostname),f=e.ip6_expression.test(this._parts.hostname),b=c||f,g=
(d=!b)&&p&&p.has(this._parts.hostname),i=d&&e.idn_expression.test(this._parts.hostname),j=d&&e.punycode_expression.test(this._parts.hostname));switch(a.toLowerCase()){case "relative":return k;case "absolute":return!k;case "domain":case "name":return d;case "sld":return g;case "ip":return b;case "ip4":case "ipv4":case "inet4":return c;case "ip6":case "ipv6":case "inet6":return f;case "idn":return i;case "url":return!this._parts.urn;case "urn":return!!this._parts.urn;case "punycode":return j}return null};
var C=d.protocol,D=d.port,E=d.hostname;d.protocol=function(a,b){if(void 0!==a&&a&&(a=a.replace(/:(\/\/)?$/,""),!a.match(e.protocol_expression)))throw new TypeError('Protocol "'+a+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return C.call(this,a,b)};d.scheme=d.protocol;d.port=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0!==a&&(0===a&&(a=null),a&&(a+="",":"===a.charAt(0)&&(a=a.substring(1)),a.match(/[^0-9]/))))throw new TypeError('Port "'+a+'" contains characters other than [0-9]');
return D.call(this,a,b)};d.hostname=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0!==a){var c={};e.parseHost(a,c);a=c.hostname}return E.call(this,a,b)};d.host=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a)return this._parts.hostname?e.buildHost(this._parts):"";e.parseHost(a,this._parts);this.build(!b);return this};d.authority=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a)return this._parts.hostname?e.buildAuthority(this._parts):
"";e.parseAuthority(a,this._parts);this.build(!b);return this};d.userinfo=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a){if(!this._parts.username)return"";var c=e.buildUserinfo(this._parts);return c.substring(0,c.length-1)}"@"!==a[a.length-1]&&(a+="@");e.parseUserinfo(a,this._parts);this.build(!b);return this};d.resource=function(a,b){var c;if(void 0===a)return this.path()+this.search()+this.hash();c=e.parse(a);this._parts.path=c.path;this._parts.query=c.query;this._parts.fragment=
c.fragment;this.build(!b);return this};d.subdomain=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var c=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,c)||""}c=this._parts.hostname.length-this.domain().length;c=this._parts.hostname.substring(0,c);c=RegExp("^"+o(c));a&&"."!==a.charAt(a.length-1)&&(a+=".");a&&e.ensureValidHostname(a);this._parts.hostname=this._parts.hostname.replace(c,
a);this.build(!b);return this};d.domain=function(a,b){if(this._parts.urn)return void 0===a?"":this;"boolean"===typeof a&&(b=a,a=void 0);if(void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var c=this._parts.hostname.match(/\./g);if(c&&2>c.length)return this._parts.hostname;c=this._parts.hostname.length-this.tld(b).length-1;c=this._parts.hostname.lastIndexOf(".",c-1)+1;return this._parts.hostname.substring(c)||""}if(!a)throw new TypeError("cannot set domain empty");e.ensureValidHostname(a);
!this._parts.hostname||this.is("IP")?this._parts.hostname=a:(c=RegExp(o(this.domain())+"$"),this._parts.hostname=this._parts.hostname.replace(c,a));this.build(!b);return this};d.tld=function(a,b){if(this._parts.urn)return void 0===a?"":this;"boolean"===typeof a&&(b=a,a=void 0);if(void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var c=this._parts.hostname.lastIndexOf("."),c=this._parts.hostname.substring(c+1);return!0!==b&&p&&p.list[c.toLowerCase()]?p.get(this._parts.hostname)||c:c}if(a)if(a.match(/[^a-zA-Z0-9-]/))if(p&&
p.is(a))c=RegExp(o(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(c,a);else throw new TypeError('TLD "'+a+'" contains characters other than [A-Z0-9]');else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");c=RegExp(o(this.tld())+"$");this._parts.hostname=this._parts.hostname.replace(c,a)}else throw new TypeError("cannot set TLD empty");this.build(!b);return this};d.directory=function(a,b){if(this._parts.urn)return void 0===a?
"":this;if(void 0===a||!0===a){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var c=this._parts.path.length-this.filename().length-1,c=this._parts.path.substring(0,c)||(this._parts.hostname?"/":"");return a?e.decodePath(c):c}c=this._parts.path.length-this.filename().length;c=this._parts.path.substring(0,c);c=RegExp("^"+o(c));this.is("relative")||(a||(a="/"),"/"!==a.charAt(0)&&(a="/"+a));a&&"/"!==a.charAt(a.length-1)&&(a+="/");a=e.recodePath(a);this._parts.path=
this._parts.path.replace(c,a);this.build(!b);return this};d.filename=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a||!0===a){if(!this._parts.path||"/"===this._parts.path)return"";var c=this._parts.path.lastIndexOf("/"),c=this._parts.path.substring(c+1);return a?e.decodePathSegment(c):c}c=!1;"/"===a.charAt(0)&&(a=a.substring(1));a.match(/\.?\//)&&(c=!0);var f=RegExp(o(this.filename())+"$"),a=e.recodePath(a);this._parts.path=this._parts.path.replace(f,a);c?this.normalizePath(b):
this.build(!b);return this};d.suffix=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a||!0===a){if(!this._parts.path||"/"===this._parts.path)return"";var c=this.filename(),f=c.lastIndexOf(".");if(-1===f)return"";c=c.substring(f+1);c=/^[a-z0-9%]+$/i.test(c)?c:"";return a?e.decodePathSegment(c):c}"."===a.charAt(0)&&(a=a.substring(1));if(c=this.suffix())f=a?RegExp(o(c)+"$"):RegExp(o("."+c)+"$");else{if(!a)return this;this._parts.path+="."+e.recodePath(a)}f&&(a=e.recodePath(a),
this._parts.path=this._parts.path.replace(f,a));this.build(!b);return this};d.segment=function(a,b,c){var e=this._parts.urn?":":"/",d=this.path(),g="/"===d.substring(0,1),d=d.split(e);void 0!==a&&"number"!==typeof a&&(c=b,b=a,a=void 0);if(void 0!==a&&"number"!==typeof a)throw Error('Bad segment "'+a+'", must be 0-based integer');g&&d.shift();0>a&&(a=Math.max(d.length+a,0));if(void 0===b)return void 0===a?d:d[a];if(null===a||void 0===d[a])if(j(b))for(var d=[],a=0,i=b.length;a<i;a++){if(b[a].length||
d.length&&d[d.length-1].length)d.length&&!d[d.length-1].length&&d.pop(),d.push(b[a])}else{if(b||"string"===typeof b)""===d[d.length-1]?d[d.length-1]=b:d.push(b)}else b?d[a]=b:d.splice(a,1);g&&d.unshift("");return this.path(d.join(e),c)};d.segmentCoded=function(a,b,c){var d,h;"number"!==typeof a&&(c=b,b=a,a=void 0);if(void 0===b){a=this.segment(a,b,c);if(j(a)){d=0;for(h=a.length;d<h;d++)a[d]=e.decode(a[d])}else a=void 0!==a?e.decode(a):void 0;return a}if(j(b)){d=0;for(h=b.length;d<h;d++)b[d]=e.decode(b[d])}else b=
"string"===typeof b||b instanceof String?e.encode(b):b;return this.segment(a,b,c)};var F=d.query;d.query=function(a,b){if(!0===a)return e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"===typeof a){var c=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace),d=a.call(this,c);this._parts.query=e.buildQuery(d||c,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);this.build(!b);return this}return void 0!==a&&"string"!==typeof a?(this._parts.query=e.buildQuery(a,
this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!b),this):F.call(this,a,b)};d.setQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("string"===typeof a||a instanceof String)d[a]=void 0!==b?b:null;else if("object"===typeof a)for(var h in a)m.call(a,h)&&(d[h]=a[h]);else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");this._parts.query=e.buildQuery(d,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);
"string"!==typeof a&&(c=b);this.build(!c);return this};d.addQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);e.addQuery(d,a,void 0===b?null:b);this._parts.query=e.buildQuery(d,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);"string"!==typeof a&&(c=b);this.build(!c);return this};d.removeQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);e.removeQuery(d,a,b);this._parts.query=e.buildQuery(d,this._parts.duplicateQueryParameters,
this._parts.escapeQuerySpace);"string"!==typeof a&&(c=b);this.build(!c);return this};d.hasQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return e.hasQuery(d,a,b,c)};d.setSearch=d.setQuery;d.addSearch=d.addQuery;d.removeSearch=d.removeQuery;d.hasSearch=d.hasQuery;d.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()};
d.normalizeProtocol=function(a){"string"===typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!a));return this};d.normalizeHostname=function(a){this._parts.hostname&&(this.is("IDN")&&n?this._parts.hostname=n.toASCII(this._parts.hostname):this.is("IPv6")&&q&&(this._parts.hostname=q.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!a));return this};d.normalizePort=function(a){"string"===typeof this._parts.protocol&&
this._parts.port===e.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!a));return this};d.normalizePath=function(a){if(this._parts.urn||!this._parts.path||"/"===this._parts.path)return this;var b,c=this._parts.path,d="",h,g;"/"!==c.charAt(0)&&(b=!0,c="/"+c);c=c.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/");b&&(d=c.substring(1).match(/^(\.\.\/)+/)||"")&&(d=d[0]);for(;;){h=c.indexOf("/..");if(-1===h)break;else if(0===h){c=c.substring(3);continue}g=c.substring(0,h).lastIndexOf("/");
-1===g&&(g=h);c=c.substring(0,g)+c.substring(h+3)}b&&this.is("relative")&&(c=d+c.substring(1));c=e.recodePath(c);this._parts.path=c;this.build(!a);return this};d.normalizePathname=d.normalizePath;d.normalizeQuery=function(a){"string"===typeof this._parts.query&&(this._parts.query.length?this.query(e.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!a));return this};d.normalizeFragment=function(a){this._parts.fragment||(this._parts.fragment=null,this.build(!a));
return this};d.normalizeSearch=d.normalizeQuery;d.normalizeHash=d.normalizeFragment;d.iso8859=function(){var a=e.encode,b=e.decode;e.encode=escape;e.decode=decodeURIComponent;this.normalize();e.encode=a;e.decode=b;return this};d.unicode=function(){var a=e.encode,b=e.decode;e.encode=u;e.decode=unescape;this.normalize();e.encode=a;e.decode=b;return this};d.readable=function(){var a=this.clone();a.username("").password("").normalize();var b="";a._parts.protocol&&(b+=a._parts.protocol+"://");a._parts.hostname&&
(a.is("punycode")&&n?(b+=n.toUnicode(a._parts.hostname),a._parts.port&&(b+=":"+a._parts.port)):b+=a.host());a._parts.hostname&&(a._parts.path&&"/"!==a._parts.path.charAt(0))&&(b+="/");b+=a.path(!0);if(a._parts.query){for(var c="",d=0,h=a._parts.query.split("&"),g=h.length;d<g;d++){var i=(h[d]||"").split("="),c=c+("&"+e.decodeQuery(i[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"));void 0!==i[1]&&(c+="="+e.decodeQuery(i[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}b+="?"+c.substring(1)}return b+=
e.decodeQuery(a.hash(),!0)};d.absoluteTo=function(a){var b=this.clone(),c=["protocol","username","password","hostname","port"],d,h;if(this._parts.urn)throw Error("URNs do not have any generally defined hierarchical components");a instanceof e||(a=new e(a));b._parts.protocol||(b._parts.protocol=a._parts.protocol);if(this._parts.hostname)return b;for(d=0;h=c[d];d++)b._parts[h]=a._parts[h];b._parts.path?".."===b._parts.path.substring(-2)&&(b._parts.path+="/"):(b._parts.path=a._parts.path,b._parts.query||
(b._parts.query=a._parts.query));"/"!==b.path().charAt(0)&&(a=a.directory(),b._parts.path=(a?a+"/":"")+b._parts.path,b.normalizePath());b.build();return b};d.relativeTo=function(a){var b=this.clone().normalize(),c,d,h,g;if(b._parts.urn)throw Error("URNs do not have any generally defined hierarchical components");a=(new e(a)).normalize();c=b._parts;d=a._parts;h=b.path();g=a.path();if("/"!==h.charAt(0))throw Error("URI is already relative");if("/"!==g.charAt(0))throw Error("Cannot calculate a URI relative to another relative URI");
c.protocol===d.protocol&&(c.protocol=null);if(!(c.username!==d.username||c.password!==d.password)&&!(null!==c.protocol||null!==c.username||null!==c.password)&&c.hostname===d.hostname&&c.port===d.port)c.hostname=null,c.port=null;else return b.build();if(h===g)return c.path="",b.build();a=e.commonPath(b.path(),a.path());if(!a)return b.build();d=d.path.substring(a.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");c.path=d+c.path.substring(a.length);return b.build()};d.equals=function(a){var b=this.clone(),
a=new e(a),c={},d={},h={},g;b.normalize();a.normalize();if(b.toString()===a.toString())return!0;c=b.query();d=a.query();b.query("");a.query("");if(b.toString()!==a.toString()||c.length!==d.length)return!1;c=e.parseQuery(c,this._parts.escapeQuerySpace);d=e.parseQuery(d,this._parts.escapeQuerySpace);for(g in c)if(m.call(c,g)){if(j(c[g])){if(!w(c[g],d[g]))return!1}else if(c[g]!==d[g])return!1;h[g]=!0}for(g in d)if(m.call(d,g)&&!h[g])return!1;return!0};d.duplicateQueryParameters=function(a){this._parts.duplicateQueryParameters=
!!a;return this};d.escapeQuerySpace=function(a){this._parts.escapeQuerySpace=!!a;return this};this.URI=e});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:uri', location = 'libs/uri.js' */
define("jira/components/libs/uri",["require"],function(a){return a("atlassian/libs/uri-1.14.1")});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:scrollintoview', location = 'lib/scrollintoview-1.8.js' */
/*!
 * jQuery scrollintoview() plugin and :scrollable selector filter
 *
 * Version 1.8 (14 Jul 2011)
 * Requires jQuery 1.4 or newer
 *
 * Copyright (c) 2011 Robert Koritnik
 * Licensed under the terms of the MIT license
 * http://www.opensource.org/licenses/mit-license.php
 */
(function(f){var c={vertical:{x:false,y:true},horizontal:{x:true,y:false},both:{x:true,y:true},x:{x:true,y:false},y:{x:false,y:true}};var b={duration:0,direction:"y"};var e=/^(?:html)$/i;var g=function(k,j){j=j||(document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(k,null):k.currentStyle);var i=document.defaultView&&document.defaultView.getComputedStyle?true:false;var h={top:(parseFloat(i?j.borderTopWidth:f.css(k,"borderTopWidth"))||0),left:(parseFloat(i?j.borderLeftWidth:f.css(k,"borderLeftWidth"))||0),bottom:(parseFloat(i?j.borderBottomWidth:f.css(k,"borderBottomWidth"))||0),right:(parseFloat(i?j.borderRightWidth:f.css(k,"borderRightWidth"))||0)};return{top:h.top,left:h.left,bottom:h.bottom,right:h.right,vertical:h.top+h.bottom,horizontal:h.left+h.right}};var d=function(h){var j=f(window);var i=e.test(h[0].nodeName);return{border:i?{top:0,left:0,bottom:0,right:0}:g(h[0]),scroll:{top:(i?j:h).scrollTop(),left:(i?j:h).scrollLeft()},scrollbar:{right:i?0:h.innerWidth()-h[0].clientWidth,bottom:i?0:h.innerHeight()-h[0].clientHeight},rect:(function(){var k=h[0].getBoundingClientRect();return{top:i?0:k.top,left:i?0:k.left,bottom:i?h[0].clientHeight:k.bottom,right:i?h[0].clientWidth:k.right}})()}};f.fn.extend({scrollIntoViewForAuto:function(j){j=f.extend({},b,j);j.direction=c[typeof(j.direction)==="string"&&j.direction.toLowerCase()]||c.both;var n="";if(j.direction.x===true){n="horizontal"}if(j.direction.y===true){n=n?"both":"vertical"}var l=this.eq(0);var i=l.closest(":scrollable("+n+")");if(i.length>0){i=i.eq(0);var m={e:d(l),s:d(i)};var h={top:m.e.rect.top-(m.s.rect.top+m.s.border.top),bottom:m.s.rect.bottom-m.s.border.bottom-m.s.scrollbar.bottom-m.e.rect.bottom,left:m.e.rect.left-(m.s.rect.left+m.s.border.left),right:m.s.rect.right-m.s.border.right-m.s.scrollbar.right-m.e.rect.right};var k={};if(j.direction.y===true){if(h.top<0){k.scrollTop=m.s.scroll.top+h.top-30}else{if(h.top>0&&h.bottom<0){k.scrollTop=m.s.scroll.top+Math.min(h.top,-h.bottom)+30}}}if(j.direction.x===true){if(h.left<0){k.scrollLeft=m.s.scroll.left+h.left}else{if(h.left>0&&h.right<0){k.scrollLeft=m.s.scroll.left+Math.min(h.left,-h.right)}}}if(!f.isEmptyObject(k)){if(e.test(i[0].nodeName)){i=f("html,body")}i.animate(k,j.duration).eq(0).queue(function(o){f.isFunction(j.complete)&&j.complete.call(i[0]);o()})}else{f.isFunction(j.complete)&&j.complete.call(i[0])}}return this}});var a={auto:true,scroll:true,visible:false,hidden:false};f.extend(f.expr[":"],{scrollable:function(k,i,n,h){var m=c[typeof(n[3])==="string"&&n[3].toLowerCase()]||c.both;var l=(document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(k,null):k.currentStyle);var o={x:a[l.overflowX.toLowerCase()]||false,y:a[l.overflowY.toLowerCase()]||false,isRoot:e.test(k.nodeName)};if(!o.x&&!o.y&&!o.isRoot){return false}var j={height:{scroll:k.scrollHeight,client:k.clientHeight},width:{scroll:k.scrollWidth,client:k.clientWidth},scrollableX:function(){return(o.x||o.isRoot)&&this.width.scroll>this.width.client},scrollableY:function(){return(o.y||o.isRoot)&&this.height.scroll>this.height.client}};return m.y&&j.scrollableY()||m.x&&j.scrollableX()}})})(jQuery);;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:browser', location = 'util/Browser.js' */
define("jira/components/util/browser",function(){return{locationReload:function(a){window.location.reload(a)}}});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:events-issueactions', location = 'util/IssueActionsEvents.js' */
define("jira/components/util/events/issue-actions",function(){var a={};a.DELETE="delete";a.UPDATE="update";a.INLINE_EDIT="inlineEdit";a.ROW_UPDATE="rowUpdate";return a});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/entities/PanelModel.js' */
define("jira/components/issueviewer/entities/panel",["require"],function(c){var b=c("jira/components/libs/underscore");var d=c("jira/components/libs/brace");var a=c("jira/util/events");var e=c("jira/components/issueviewer/eventtypes");return d.Model.extend({namedAttributes:["entity","updateLocked"],initialize:function(){a.bind(e.LOCK_PANEL_REFRESHING,b.bind(function(f,g){if(g===this.getEntity().id){this.set("updateLocked",true)}},this));a.bind(e.UNLOCK_PANEL_REFRESHING,b.bind(function(f,g){if(g===this.getEntity().id){this.set("updateLocked",false)}},this))},update:function(h,f,g){if(!this.getUpdateLocked()){this.set("entity",h);this.trigger("updated",f,g)}}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/entities/PanelsCollection.js' */
define("jira/components/issueviewer/entities/panels",["require"],function(b){var a=b("jira/components/libs/underscore");var c=b("jira/components/libs/brace");var d=b("jira/components/issueviewer/entities/panel");return c.Collection.extend({model:d,update:function(f,e){this.each(function(g){var h=g.id;var i=a.any(f,function(j){return j.id===h});if(!i){this.remove(g)}},this);a.each(f,function(h,i){var g=this.get(h.id);if(g){g.update(h,e.fieldsInProgress,e.fieldsSaved)}else{this.add({id:h.id,entity:h},{at:i})}},this)}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/entities/PanelsGroupModel.js' */
define("jira/components/issueviewer/entities/panelsgroup",["require"],function(b){var c=b("jira/components/libs/brace");var a=b("jira/components/issueviewer/entities/panels");return c.Model.extend({namedAttributes:["leftPanels","rightPanels","infoPanels"],defaults:function(){return{leftPanels:new a([]),rightPanels:new a([]),infoPanels:new a([])}},update:function(e,d){this.get("leftPanels").update(e.leftPanels,d);this.get("rightPanels").update(e.rightPanels,d);this.get("infoPanels").update(e.infoPanels,d)}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/entities/IssueModel.js' */
define("jira/components/issueviewer/entities/issue",["require"],function(a){var b=a("jira/components/libs/brace");var c=a("jira/components/issueviewer/entities/panelsgroup");return b.Model.extend({namedEvents:["updated"],namedAttributes:["entity","id","key","panels","projectKey","projectType","projectId"],defaults:function(){return{entity:{},panels:new c()}},update:function(f,e){var d=false;if(f.issue){this.updateFromEntity(f.issue);d=true}if(f.panels){this.getPanels().update(f.panels,e);d=true}if(d){this.trigger("updated",e)}},resetToDefault:function(){this.clear();this.set(this.defaults())},updateFromEntity:function(d){this.set({id:d.id,key:d.key,entity:d,projectKey:d.project?d.project.key:null,projectType:d.project?d.project.projectType:null,projectId:d.project?d.project.id:null})},isCurrentIssue:function(d){return this.get("id")===d},hasIssue:function(){return this.has("id")},updateIssueQuery:function(d){if(!this.hasIssue()){return}this.getEntity().viewIssueQuery=d},getIssueInfo:function(){return{issueId:this.getId(),issueKey:this.getKey(),projectId:this.getProjectId(),projectKey:this.getProjectKey(),projectType:this.getProjectType()}}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/views/issue/IssuePanelView.js' */
define("jira/components/issueviewer/views/issuepanel",["require"],function(b){var a=b("jira/components/libs/underscore");var f=b("jira/components/issueviewer/legacy/issuefieldutil");var d=b("jquery");var e=b("jira/components/libs/marionette-1.4.1/itemview");var c=b("jira/components/issueviewer/templates");return e.extend({template:c.Body.issuePanel,modelEvents:{updated:"update"},update:function(g,o){var h=this.renderTemplate();var j=this.$el;var n=this;if(h.html()===j.html()){return}function l(){return a.any(g,function(p){return j.find(f.getFieldSelector(p)).length===1})}function i(){var p=j.find(document.activeElement).length>0;var s=!!d.browser.msie&&d.browser.version<=8;if(!s){j.replaceWith(h)}else{var r=j[0].nextSibling;var q=j[0].parentNode;j.remove();if(r){d(r).before(h)}else{d(q).append(h)}}if(p){n.trigger("replacedFocusedPanel")}n.setElement(h)}function k(q){var r=n.model.id;var p=n.$el;n.trigger("panelRendered",r,p,j);a.each(q,function(s){n.trigger("individualPanelRendered",s)})}if(!l()){i();k([n.$el])}else{var m=[];a.each(o,function(r){var q=j.find(f.getFieldSelector(r));if(q.length===1){var p=h.find(f.getFieldSelector(r));if(p.length===1){q.replaceWith(p);m.push(p)}else{q.closest("li, dl").remove()}}});k(m)}this.bindUIElements()},onRender:function(){this.setElement(this.$el.children());var g=this.model.getEntity().styleClass;if(g){this.$el.addClass(g)}this.trigger("individualPanelRendered",this.$el)},applyToDom:function(){this.trigger("individualPanelRendered",this.$el)},serializeData:function(){return this.model.getEntity()}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/views/issue/IssuePanelsView.js' */
define("jira/components/issueviewer/views/issuepanels",["require"],function(c){var d=c("jira/components/libs/marionette-1.4.1/collectionview");var a=c("jira/components/issueviewer/views/issuepanel");var b=c("jira/components/issueviewer/entities/panel");return d.extend({itemView:a,_updatingFromDom:false,appendHtml:function(e,h,f){var g=e.$el.children();var i=g.length;if(f<=0){e.$el.prepend(h.$el)}else{if(!i||f>=i){e.$el.append(h.$el)}else{h.$el.insertBefore(g.eq(f))}}},applyToDom:function(){var e=this;this._updatingFromDom=true;this.$el.children().filter(".module").each(function(){var f=this.id;if(f==="addcomment"){f="addcommentmodule"}e.collection.add(new b({id:f,entity:{id:f}}))});this._updatingFromDom=false},renderItemView:function(e){if(!this._updatingFromDom){d.prototype.renderItemView.apply(this,arguments)}else{e.applyToDom()}},buildItemView:function(f){var e=d.prototype.buildItemView.apply(this,arguments);if(this._updatingFromDom){e.setElement(document.getElementById(f.id))}return e}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/views/issue/IssueBodyView.js' */
define("jira/components/issueviewer/views/issuebody",["require"],function(a){var c=a("jira/components/libs/marionette-1.4.1/layout");var d=a("jira/components/libs/marionette-1.4.1/linkregion");var b=a("jira/components/issueviewer/templates");return c.extend({tagName:"div",className:"issue-body-content",regions:{leftPanels:{selector:".issue-main-column",regionType:d},rightPanels:{selector:".issue-side-column",regionType:d},infoPanels:{selector:".issue-body",regionType:d}},template:b.Body.issueBody})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/views/issue/IssueOpsbarView.js' */
define("jira/components/issueviewer/views/issueopsbar",["require"],function(c){var e=c("jira/components/libs/marionette-1.4.1/itemview");var d=c("jira/components/issueviewer/templates");var b=c("jira/issues/tipsy");var a=c("jira/components/issueviewer/analytics/issueopsbar");return e.extend({template:d.Header.opsbar,ui:{shareButton:".viewissue-share",exportButton:"#viewissue-export",loginButton:"#ops-login-lnk",commentButton:"#comment-issue"},serializeData:function(){return{issue:this.model.getEntity()}},onApplyToDom:function(){this.onRender()},onRender:function(){new a(this);this.ui.loginButton.hide();this.ui.commentButton.addClass("inline-comment");new b({el:this.ui.shareButton,showCondition:":not(.active)"});new b({el:this.ui.exportButton,showCondition:":not(.active)",tipsy:{gravity:"ne"}})}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/views/issue/IssueHeaderView.js' */
define("jira/components/issueviewer/views/issueheader",["require"],function(c){var h=c("jira/components/libs/marionette-1.4.1/layout");var d=c("jira/components/issueviewer/templates");var b=c("jira/components/issueviewer/services/darkfeatures");var a=c("jira/components/libs/underscore");var f=c("jira/components/issueviewer/views/issueopsbar");var e=c("jira/util/data/meta");var g=c("jquery");return h.extend({className:"issue-header js-stalker",id:"stalker",tagName:"header",template:d.Header.issueHeader,modelEvents:{updated:"update"},regions:{opsbar:".command-bar",pager:"#issue-header-pager"},serializeData:function(){return{issue:this.model.getEntity(),hasProjectShortcut:b.PROJECT_SHORTCUTS.enabled()}},update:function(i){if(i.initialize){this._updateWindowTitle()}else{var j=a.include(i.fieldsInProgress,"summary");if(j){this.renderOpsBar()}else{this.render()}}this.trigger("updated")},onApplyToDom:function(){var i=new f({model:this.model});i.setElement(this.opsbar.el);this.opsbar.attachView(i);this.opsbar.currentView.applyToDom();this._updateWindowTitle()},onBeforeRender:function(){this.previousElement=this.$el},onRender:function(){this.renderOpsBar();this._updateWindowTitle();this.trigger("panelRendered","header",this.$el,this.previousElement||g(""))},renderOpsBar:function(){this.opsbar.show(new f({model:this.model}));this.trigger("individualPanelRendered",this.$el)},_updateWindowTitle:function(){var i=this.model.getEntity();var k=i.key;var j=i.summary;var l=e.get("app-title");if(l&&j&&k){document.title="["+k+"] "+j+" - "+l}},focus:function(){this.$el.find("a").eq(0).focus()}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/views/issue/IssueView.js' */
define("jira/components/issueviewer/views/issue",["require"],function(a){var e=a("jira/components/libs/marionette-1.4.1/layout");var b=a("jira/components/issueviewer/templates");var f=a("jira/components/libs/marionette-1.4.1/replaceregion");var c=a("jira/components/issueviewer/actions");var d=a("jquery");return e.extend({template:b.layout,className:"issue-container",regions:{header:{selector:".issue-header-container",regionType:f},body:{selector:".issue-body-container",regionType:f}},modelEvents:{updated:"update"},showLoading:function(){this.$el.addClass("loading")},hideLoading:function(){this.$el.removeClass("loading")},focusComment:function(g){this.$("#activitymodule .focused").removeClass("focused");this.$("#comment-"+g).addClass("focused");this.$(".js-stalker").trigger("refresh")},update:function(g){this._closeDropdowns();if(g.initialize){this.render()}if(g.reason&&g.reason.action===c.EDIT_COMMENT){this.focusComment(g.reason.meta.commentId)}this._bringViewIssueElementIntoView()},remove:function(){this.stopListening();this.$el.empty();return this},onRender:function(){this.$el.addClass(this.className);this.$el.attr("tabindex","-1");this._bringViewIssueElementIntoView()},onApplyToDom:function(){this._bringViewIssueElementIntoView();this.trigger("render")},_bringViewIssueElementIntoView:function(){var g=this.model.get("entity").viewIssueQuery;if(g){var h;if(g.focusedCommentId){h="#comment-"+g.focusedCommentId}else{if(g.attachmentSortBy||g.attachmentOrder||g.attachmentViewMode){h="#attachmentmodule"}}if(h){d(h).scrollIntoView({marginBottom:200,marginTop:200})}}},_closeDropdowns:function(){this.$el.find(".aui-dropdown2-trigger.active").trigger("aui-button-invoke")}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/views/error/ErrorView.js' */
define("jira/components/issueviewer/views/error",["require"],function(a){var b=a("jira/components/libs/marionette-1.4.1/layout");return b.extend({className:"issue-container",regions:{pager:"#issue-header-pager"},remove:function(){this.stopListening();this.$el.empty();return this},onRender:function(){this.$el.addClass(this.className);this.$el.attr("tabindex","-1")}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/views/error/ErrorGenericView.js' */
define("jira/components/issueviewer/views/errorgeneric",["require"],function(b){var a=b("jira/components/issueviewer/views/error");var c=b("jira/components/issueviewer/templates");var d=b("jira/components/util/browser");return a.extend({template:c.Error.Generic,events:{"click #issue-error-reload-button":function(){d.locationReload()}}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/views/error/ErrorNotFoundView.js' */
define("jira/components/issueviewer/views/errornotfound",["require"],function(c){var a=c("jira/components/issueviewer/views/error");var d=c("jira/components/issueviewer/templates");var b=c("jira/components/libs/underscore");return a.extend({template:d.Error.DoesNotExist,initialize:function(e){e=e||{};this.showReturnToSearchOnError=e.showReturnToSearchOnError},triggers:{"click #return-to-search":"returnToSearch"},serializeData:function(){var e=this.showReturnToSearchOnError;if(b.isFunction(e)){e=e()}return{hideReturnToSearch:!e}}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/controllers/IssueController.js' */
define("jira/components/issueviewer/controllers/issue",["require"],function(a){var g=a("jira/issue");var c=a("jira/components/issueviewer/views/issuebody");var b=a("jira/components/issueviewer/views/issueheader");var d=a("jira/components/issueviewer/views/issuepanels");var f=a("jira/components/issueviewer/views/issue");var h=a("jira/components/libs/marionette-1.4.1/controller");var i=a("jira/components/libs/underscore");var e=g.CommentForm;return h.extend({initialize:function(j){this.model=j.model},_createViews:function(){this.view=this._createMainView();this.bodyView=this._createBodyView();this.headerView=this._createHeaderView();this.leftPanelsView=this._createPanelsView(this.model.getPanels().getLeftPanels());this.rightPanelsView=this._createPanelsView(this.model.getPanels().getRightPanels());this.infoPanelsView=this._createPanelsView(this.model.getPanels().getInfoPanels())},_createMainView:function(){var j=new f({model:this.model,el:this.$el});this.listenTo(j,{render:function(){this.trigger("renderMainView",j.$el)}});return j},_createBodyView:function(){return new c({model:this.model})},_createHeaderView:function(){var j=new b({model:this.model});this.listenAndRethrow(j,"panelRendered");this.listenTo(j,{updated:function(){this.trigger("render",{pager:this.view.$(this.headerView.pager.el)},this.model.getIssueInfo())},individualPanelRendered:function(k){this.trigger("individualPanelRendered",k)}});return j},_createPanelsView:function(k){var j=new d({collection:k});this.listenTo(j,{"itemview:replacedFocusedPanel":function(){this.trigger("replacedFocusedPanel")},"itemview:panelRendered":function(l,o,n,m){this.trigger("panelRendered",o,n,m)},"itemview:individualPanelRendered":function(l,m){this.trigger("individualPanelRendered",m)}});return j},createView:function(){this._createViews();this.listenTo(this.view,"render",function(){this.view.header.show(this.headerView);this.view.body.show(this.bodyView);this.bodyView.leftPanels.show(this.leftPanelsView);this.bodyView.rightPanels.show(this.rightPanelsView);this.bodyView.infoPanels.show(this.infoPanelsView);this.trigger("render",{pager:this.view.$(this.headerView.pager.el)},i.extend(this.model.getIssueInfo(),{loadedFromDom:false}))})},createViewFromDom:function(){this._createViews();this.listenTo(this.view,"applyToDom",function(){function j(m,k,l){k.setElement(l);k.applyToDom();m.attachView(k)}j(this.view.body,this.bodyView,this.view.$el.find(".issue-body-content"));j(this.view.body,this.headerView,this.view.$el.find("#stalker"));j(this.bodyView.leftPanels,this.leftPanelsView,this.bodyView.$el.find(this.bodyView.leftPanels.el));j(this.bodyView.rightPanels,this.rightPanelsView,this.bodyView.$el.find(this.bodyView.rightPanels.el));j(this.bodyView.infoPanels,this.infoPanelsView,this.bodyView.$el.find(this.bodyView.infoPanels.el));this.trigger("render",{pager:this.view.$(this.headerView.pager.el)},i.extend(this.model.getIssueInfo(),{loadedFromDom:true}))})},setElement:function(j){this.$el=j;if(this.view){this.view.setElement(j)}},applyToDom:function(j){j.id=+j.id;this.model.updateFromEntity(j);this.createViewFromDom();this.view.applyToDom()},show:function(){if(!this.view){this.createView();this.view.render()}else{this.trigger("render",{pager:this.view.$(this.headerView.pager.el)},i.extend(this.model.getIssueInfo(),{loadedFromDom:false}))}this.view.hideLoading()},close:function(){if(this.view){this.view.close()}this.hideLoading();delete this.view},hideLoading:function(){if(this.view){this.view.hideLoading()}},showLoading:function(){if(this.view){this.view.showLoading()}},canDismissComment:function(){var k;var j=e;if(!j.getForm().data("dismissed")){k=j.handleBrowseAway();if(k){if(!confirm(k)){j.focus();return false}else{j.getForm().data("dismissed",true)}}}return true},applyResponsiveDesign:function(){if(!this.$el){return}var j=this.$el.width();this.$el.toggleClass("skinny",j<900);this.$el.toggleClass("very-skinny",j<600)},focus:function(){if(this.view){this.headerView.focus()}}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/controllers/ErrorController.js' */
define("jira/components/issueviewer/controllers/error",["require"],function(d){var c=d("jira/components/issueviewer/views/errorgeneric");var b=d("jira/components/issueviewer/views/errornotfound");var a=d("jira/components/libs/marionette-1.4.1/controller");var e=d("jira/components/issueviewer/utils");return a.extend({initialize:function(f){this.contextPath=f.contextPath;this.showReturnToSearchOnError=f.showReturnToSearchOnError},render:function(g,f){switch(g){case"auth":this._renderErrorAuth(f);break;case"forbidden":case"notfound":this._renderErrorView(new b({showReturnToSearchOnError:this.showReturnToSearchOnError}));break;case"generic":default:this._renderErrorView(new c());break}},applyToDom:function(g,f){switch(g){case"auth":this._renderErrorAuth(f);break;case"forbidden":case"notfound":this._renderErrorViewFromDom(new b({showReturnToSearchOnError:this.showReturnToSearchOnError}));break;case"generic":default:this._renderErrorViewFromDom(new c());break}},close:function(){if(this.view){this.view.close();delete this.view}},setElement:function(f){this._$el=f;if(this.view){this.view.setElement(f)}},_renderErrorAuth:function(g){var f=this.contextPath+"/login.jsp?os_destination="+encodeURIComponent("/browse/"+g);window.location.replace(f)},_renderErrorView:function(f){this.trigger("before:render");e.hideDropdown();this.view=f;this.view.setElement(this._$el);this.view.render();this.listenAndRethrow(this.view,"returnToSearch");this.trigger("render",{pager:this.view.$(this.view.pager.el),isError:true},{loadedFromDom:false,issueId:null})},_renderErrorViewFromDom:function(f){this.trigger("before:render");e.hideDropdown();this.view=f;this.view.setElement(this._$el);this.view.applyToDom();this.listenAndRethrow(this.view,"returnToSearch");this.trigger("render",{pager:this.view.$(this.view.pager.el),isError:true},{loadedFromDom:true,issueId:null})},isRendered:function(){return Boolean(this.view)}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/services/IssueLoaderService.js' */
define("jira/components/issueviewer/services/issueloader",["require"],function(c){var a=c("jira/components/libs/marionette-1.4.1/controller");var b=c("jira/components/libs/underscore");var d=c("jquery");var e=c("jira/components/issueviewer/legacy/issuefieldutil");return a.extend({initialize:function(){this._promiseManager=new d.RecurringPromise();this._updatingPromise=this._promiseManager.sub();this._updatingPromise.done(b.bind(this._onUpdatingDone,this)).fail(b.bind(this._onUpdatingError,this));this._loadingPromise=this._promiseManager.sub();this._loadingPromise.done(b.bind(this._onLoadingDone,this)).fail(b.bind(this._onLoadingError,this))},cancel:function(){this._promiseManager.reset()},update:function(k){var i=k.issueEntity;var h=k.mergeIntoCurrent;var m=k.viewIssueData;var l=!!k.detailView;var j=new d.Deferred();var g;function f(n){return function(){return{taskKey:n,data:arguments,startIssueLoad:new Date()}}}g=this._updatingPromise.add(m.get(i.key,true,{issueEntity:i,loadingDeferred:j,mergeIntoCurrent:h,startIssueLoad:new Date(),detailView:l}).pipe(f("issue"),f("issue")));g.fail(function(){j.reject.apply(j,arguments)});return j.promise()},load:function(h){var f=h.issueEntity;var j=h.viewIssueData;var i=!!f.detailView;this._currentlyLoading=true;var g=new d.Deferred();this._loadingPromise.add(j.get(f.key,false,{issueEntity:f,loadFields:false,loadingDeferred:g,startIssueLoad:new Date(),detailView:i}));return g.promise()},isLoading:function(){return this._currentlyLoading},_onLoadingDone:function(h,i,g){var f=g.issueEntity;f.id=h.issue.id;f.key=h.issue.key;if(!h.pager){h.pager=f.pager}e.transformFieldHtml(h);this._currentlyLoading=false;i.loadDuration=new Date()-g.startIssueLoad;this.trigger("issueLoaded",h,i,g);g.loadingDeferred.resolve(h,i,g)},_onUpdatingDone:function(f){var g=f.data[1];if(g){g.isUpdate=true}this._onLoadingDone.apply(this,f.data)},_onLoadingError:function(i,k,g){var f=g.issueEntity;var h={issueId:f.id,issueKey:f.key,response:i};this._currentlyLoading=false;var j;switch(i.status){case 401:j="auth";break;case 403:j="forbidden";break;case 404:j="notfound";break;default:j="generic";break}this.trigger("error",j,h);g.loadingDeferred.reject()},_onUpdatingError:function(f){this._onLoadingError.apply(this,f.data)}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/services/MetadataService.js' */
define("jira/components/issueviewer/services/metadataservice",["require"],function(b){var c=b("jira/util/data/meta");var a=b("jira/components/libs/underscore");return{removeIssueMetadata:function(e){var d=e.getEntity();if(d.metadata){a.each(d.metadata,function(g,f){c.set(f,null)})}else{if(c.get("issue-key")){c.set("issue-key",null)}}},addIssueMetadata:function(e){var d=e.getEntity();a.each(d.metadata,function(g,f){c.set(f,g)})}}});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/services/DarkFeatures.js' */
define("jira/components/issueviewer/services/darkfeatures",["require"],function(c){var a=c("jira/lib/class");var b=c("jira/ajs/dark-features");var e=c("wrm/data");var d=e.claim("com.atlassian.jira.jira-issue-nav-components:issueviewer.features");return(function(){var g=a.extend({init:function(i,h){this.featureKey=i;this.featureOffKey=h},enabled:function(){return(!this.featureKey||b.isEnabled(this.featureKey))&&!(this.featureOffKey&&b.isEnabled(this.featureOffKey))}});var f=g.extend({enabled:function(){return d[this.featureKey]}});return{NO_PREFETCH:new g("ka.NO_PREFETCH"),PROJECT_SHORTCUTS:new g("rotp.project.shortcuts"),REDIRECT_FROM_GLOBAL_TO_PROJECT:new g(null,"ka.REDIRECT_FROM_GLOBAL_TO_PROJECT_OFF"),HTTP_SESSIONS_DISABLED:new g("ka.HTTP_SESSIONS_DISABLED"),RTE_ENABLED:new f("rteEnabled")}})()});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/services/LinksCapturer.js' */
define("jira/components/issueviewer/linkscapturer",["require"],function(d){var g=d("jira/components/libs/underscore");var h=d("jira/util/events");var b=d("jira/ajs/layer/inline-layer");var i=d("jquery");var f=d("jira/components/libs/marionette-1.4.1/controller");var c=d("jira/message");var a=d("jira/ajs/ajax/smart-ajax");var e=d("jira/components/libs/uri");return f.extend({initialize:function(){g.bindAll(this,"_onRefineViewEvents","_offRefineViewEvents","_handleReviewViewEvents")},capture:function(j){if(j===this.el){return}this.el=j;this.linksToOtherIssues();this.linksToReorderSubtasks();this.viewOptionsForCurrentIssue()},linksToOtherIssues:function(){i(this.el).on("simpleClick","a.issue-link[data-issue-key]",g.bind(function(k){k.preventDefault();var j=i(k.target).closest("a").data("issue-key");this.trigger("linkToIssue",{issueKey:j})},this))},linksToReorderSubtasks:function(){i(this.el).on("simpleClick",".subtask-reorder a",g.bind(function(j){if(!j.target.href){return}j.preventDefault();i.ajax({type:"GET",data:{disableRedirect:true},url:j.target.href}).done(g.bind(function(){this.trigger("reorderSubtasks")},this)).fail(function(k){c.showErrorMsg(a.buildSimpleErrorContent(k),{closeable:true})})},this))},_handleReviewViewEvents:function(m){var l=m.currentTarget;i(l).parents("ul").find("a.aui-checked").removeClass("aui-checked");i(l).addClass("aui-checked");var k=new e(l.href).query(true);var j=this.triggerPreventable("refineViewer",{query:k});if(j.isPrevented){m.preventDefault()}},_onRefineViewEvents:function(k,j){i(j).on("simpleClick",["#attachment-sorting-options a","#attachment-sorting-order-options a","#attachment-view-mode-options a","#subtasks-show-all","#subtasks-show-open"].join(","),this._handleReviewViewEvents)},_offRefineViewEvents:function(k,j){i(j).off("simpleClick",["#attachment-sorting-options a","#attachment-sorting-order-options a","#attachment-view-mode-options a","#subtasks-show-all","#subtasks-show-open"].join(","),this._handleReviewViewEvents)},viewOptionsForCurrentIssue:function(){h.bind(b.EVENTS.show,this._onRefineViewEvents);h.bind(b.EVENTS.hide,this._offRefineViewEvents)},destroy:function(){h.unbind(b.EVENTS.show,this._onRefineViewEvents);h.unbind(b.EVENTS.hide,this._offRefineViewEvents)}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/legacy/IssueEventBus.js' */
define("jira/components/issueviewer/legacy/issueeventbus",["require"],function(a){var b=a("jira/components/libs/brace");return b.Model.extend({namedAttributes:["issueId"],namedEvents:["save","saveSuccess","savingStarted","saveError","panelRendered","replacedFocusedPanel","fieldSubmitted","dismiss","refreshIssue","issueRefreshed","updateFromDom","updateStatusColor","quickEditKeyPressed","openFocusShifter"]})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/legacy/AsyncData.js' */
define("jira/components/issueviewer/legacy/asyncdata",["require"],function(b){var c=b("jira/components/libs/brace");var a=b("jira/components/libs/underscore");var d=b("jquery");return c.Evented.extend({namedEvents:["change"],initialize:function(e){this.data={};this.pendings={};this.accessIndex=0;if(e){this.disableCache=e.disableCache;this.maxCacheSize=e.maxCacheSize}},get:function(f,e,m){var k=new d.Deferred();var h=this.disableCache?{}:this.data;var j=a.bind(function(q,p){var o=this._set(h,f,a.defaults(q,{accessIndex:this.accessIndex++}),true,m);var n=a.defaults({changed:o},p,h[f]);if(m&&m.mergeIntoCurrent){n.mergeIntoCurrent=true}if(h[f]&&!h[f].error){k.resolve(h[f].value,n,m)}else{k.reject(h[f]&&h[f].value,n,m)}},this);var g=a.bind(function(n){var o=this.fetch(f,m);this.setPending(f,o,function(p){j({value:p,error:false,updated:new Date()},{initialLoad:n})},function(p){var q={error:true,updated:new Date()};if(p!==undefined){q.value=p}j(q,{initialLoad:n,error:true})})},this);var i=function(){j({},{fromCache:true})};var l=a.bind(function(){this.pendings[f].always(a.bind(j,this,{},{initialLoad:true}))},this);if(e||this.disableCache){g(false)}else{if(this.hasCached(f)){i()}else{if(this.hasPending(f)){l()}else{g(true)}}}return k.promise()},setPending:function(h,f,e,g){if(this.hasPending(h)){this.pendings[h].update(f)}else{this.pendings[h]=new d.ConcurrentDeferred(f)}return this.pendings[h].done(function(i){e(i)}).fail(function(i){g(i)})},getIdByValue:function(e){var f;for(f in this.data){if(this.data[f].value===e){return f}}return null},getMeta:function(e){return this.data[e]||{}},getAllCached:function(){var e={};a.each(this.data,function(f,g){e[g]=f.value});return e},hasCached:function(f){var e=this.getMeta(f);return e.value!==undefined||e.error===true},hasError:function(f){var e=this.getMeta(f);return e.error===true},hasPending:function(f){var e=this.pendings[f];return e?e.isPending():false},set:function(f,e){return this._set(this.data,f,{value:e,updated:new Date()},true)},remove:function(e){if(this.data[e]){delete this.data[e];this.triggerChange();return true}return false},setError:function(g,e){var f={error:true,updated:new Date()};if(e!==undefined){f.value=e}return this._set(this.data,g,f,true)},setMultiple:function(f){var e=new Date();var g=false;a.each(f,a.bind(function(h,i){h=a.pick(h,"value","error");h.updated=e;if(this._set(this.data,i,h,false)){g=true}},this));if(g){this.triggerChange()}return g},reset:function(e){this.data={};this.pendings={};this.accessIndex=0;if(e){this.setMultiple(e)}else{this.triggerChange()}},_set:function(i,k,j,g,f){if(this.disableCache&&i===this.data){i={}}var h=i[k]?a.clone(i[k]):{};var e=this.mergeFetchedAndCached(h,j,f?f:{},i[k]);if(g&&(!i[k]||e||i[k].error!==h.error)&&i===this.data){this.triggerChange()}if(!i[k]&&this.maxCacheSize&&a.keys(i).length===this.maxCacheSize){if(j.accessIndex){this._dropItem(i);i[k]=h}}else{i[k]=h}return e},_dropItem:function(g){var e=null;for(var f in g){if(!g[f].accessIndex){e=f;break}else{if(e===null||g[f].accessIndex<g[e].accessIndex){e=f}}}if(e!==null){delete g[e]}},fetch:function(g){var f=this.getMeta(g);var e=new d.Deferred();if(!this.hasCached(g)||f.error){e.reject(f.value)}else{e.resolve(f.value)}return e.promise()},mergeFetchedAndCached:function(f,h,e,g){a.extend(f,h);return !g||g.value!==f.value||g.error!==f.error}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/legacy/ViewIssueData.js' */
define("jira/components/issueviewer/legacy/viewissuedata",["require"],function(d){var c=d("jira/components/libs/underscore");var g=d("jira/components/issueviewer/legacy/asyncdata");var b=d("jira/components/issueviewer/services/darkfeatures");var e=d("jira/util/data/meta");var f=d("jquery");var a=window.AJS.contextPath();return g.extend({initialize:function(h){g.prototype.initialize.call(this,c.defaults(h||{},{disableCache:b.NO_PREFETCH.enabled(),maxCacheSize:e.get("viewissue-max-cache-size")}))},fetch:function(l,k){var o={issueKey:l,decorator:"none",prefetch:!!k.prefetch};o.shouldUpdateCurrentProject=!k.detailView;if(k.mergeIntoCurrent){if(this.data&&this.data[l]&&this.data[l].value&&this.data[l].value.issue){o.lastReadTime=this.data[l].value.readTime;o.fields=[];c.each(this.data[l].value.fields,function(p){o.fields.push(p.id+":"+p.contentId)});o.issue=["summary:"+this.data[l].value.issue.summaryContentId];o.links=[];var n=function(p){c.each(p.links,function(q){o.links.push(q.id+":"+q.contentId)});c.each(p.groups,function(q){n(q)})};c.each(this.data[l].value.issue.operations.linkGroups,function(p){n(p)});o.panels=[];var h=this;var i=function(p){c.each(h.data[l].value.panels[p],function(q){o.panels.push(q.completeKey+":"+q.contentId)})};i("leftPanels");i("rightPanels");i("infoPanels")}}if("loadFields" in k){o.loadFields=k.loadFields}if(k.issueEntity){c.defaults(o,k.issueEntity.viewIssueQuery)}var m=f.ajax({url:a+"/secure/AjaxIssueAction!default.jspa",headers:{"X-SITEMESH-OFF":true},data:o,type:k.mergeIntoCurrent?"POST":"GET"});var j=m.pipe(function(p){return p},function(p){return c.pick(p,"status","responseText","statusText")});j.abort=function(){m.abort.apply(m,arguments)};return j},mergeFetchedAndCached:function(l,t,u){if(this._skipMerging(l,t,u)){c.extend(l,t);return null}c.each(c.pairs(t),function(v){if(v[0]!=="value"){l[v[0]]=v[1]}});var m=t.value;var s=[];var k=[];var r=[];c.each(m.removedContentIds,function(x,w){var v;if(w==="fields"){v=s}else{if(w==="panels"){v=k}else{if(w==="links"){v=r}}}if(v){c.each(x,function(y){v.push(y)})}});var o=m.fields;var n=m.issue.operations.linkGroups;var q=m.panels;var p=m.issue.summary;if(this._nothingChanged(s,k,r,o,q,n,p)){return null}var i={updated:{},added:{},deleted:{}};var j=l.value;var h=this._comparator;if(s.length>0||o.length>0){this._mergeFields(o,j,i,s)}if(k.length>0||q.leftPanels.length>0||q.rightPanels.length>0||q.infoPanels.length>0){this._mergePanels(q,j,i,k,h)}if(r.length>0||n.length>0){this._mergeLinks(n,j,i,r,h)}if(p){this._mergeSummary(m,j,i)}return i},_skipMerging:function(j,i,h){return c.isEmpty(j)||!h.mergeIntoCurrent||!j.value||!j.value.issue||i.error===true},_nothingChanged:function(l,h,n,i,k,j,m){return l.length===0&&h.length===0&&n.length===0&&i.length===0&&j.length===0&&k.leftPanels.length===0&&k.rightPanels.length===0&&k.infoPanels.length===0&&!m},_mergeFields:function(j,l,k,h){k.added.fields=[];k.updated.fields=[];k.deleted.fields=[];c.each(j,function(m){var n=c.find(l.fields,function(o){return o.id===m.id});if(n){k.updated.fields.push(m.id)}else{k.added.fields.push(m.id)}});var i=j;c.each(l.fields,function(m){if(c.contains(h,m.id)){k.deleted.fields.push(m.id)}else{if(!c.contains(k.updated.fields,m.id)){i.push(m)}}});l.fields=i},_mergeSummary:function(j,i,h){h.updated.issue=["summary"];i.issue.summary=j.issue.summary;i.issue.summaryContentId=j.issue.summaryContentId},_mergePanels:function(l,k,j,h,i){j.added.panels={};j.updated.panels={};j.deleted.panels={};var m=function(n){j.added.panels[n]=[];j.updated.panels[n]=[];j.deleted.panels[n]=[];c.each(l[n],function(p){var q=c.find(k.panels[n],function(r){return r.id===p.id});if(q){j.updated.panels[n].push(p.id)}else{j.added.panels[n].push(p.id)}});var o=l[n];c.each(k.panels[n],function(p){if(c.contains(h,p.completeKey)){j.deleted.panels[n].push(p.id)}else{if(!c.contains(j.updated.panels[n],p.id)){o.push(p)}}});o.sort(i);k.panels[n]=o};m("leftPanels");m("rightPanels");m("infoPanels")},_mergeLinks:function(l,k,j,h,i){j.added.groups={};j.updated.groups={};j.deleted.groups={};var m=[];this._mergeOperationsLinks(l,k,m,j,h,i);this._mergeToolsLinks(l,k,m,j,h,i);k.issue.operations.linkGroups=m},_mergeOperationsLinks:function(q,k,j,h,r,i){h.added.groups["view.issue.opsbar"]=[];h.updated.groups["view.issue.opsbar"]=[];h.deleted.groups["view.issue.opsbar"]=[];var p=c.find(k.issue.operations.linkGroups,function(s){return"view.issue.opsbar"===s.id});var o=c.find(q,function(s){return"view.issue.opsbar"===s.id});var n={};var l={};if(o){c.each(o.groups,function(s){var t=c.find(p.groups,function(v){return s.id===v.id});if(t){h.updated.groups["view.issue.opsbar"].push(s.id)}else{h.added.groups["view.issue.opsbar"].push(s.id)}c.each(s.links,function(v){n[v.id]=v;l[v.id]=s.id});if(s.groups&&s.groups.length>0){var u=s.groups[0];c.each(u.groups,function(v){c.each(v.links,function(w){n[w.id]=w;l[w.id]=v.id})})}})}if(p){var m=[];if(o){c.each(o.groups,function(s){if(c.contains(h.added.groups["view.issue.opsbar"],s.id)){m.push(s)}})}c.each(p.groups,function(x){var w=[];var t=null;if(o){t=c.find(o.groups,function(A){return x.id===A.id});if(t){c.each(t.links,function(A){var B=c.find(x.links,function(C){return A.id===C.id});if(!B){w.push(A)}})}}var u=false;var s=function(B,A){c.each(B.links,function(C){var D=l[C.id];if(D&&D!==B.id){u=true}else{if(n[C.id]){A.push(n[C.id])}else{if(!c.contains(r,C.id)){A.push(C)}else{u=true}}}})};s(x,w);w.sort(i);x.links=w;var v=null;if(t&&t.groups&&t.groups.length>0){v=t.groups[0]}var z=null;if(x.groups&&x.groups.length>0){z=x.groups[0];var y=[];if(v){c.each(v.groups,function(A){var B=c.find(z.groups,function(C){return A.id===C.id});if(!B){y.push(A)}})}c.each(z.groups,function(C){var B=[];if(v){var A=c.find(v.groups,function(D){return D.id===C.id});if(A){c.each(A.links,function(D){var E=c.find(C.links,function(F){return D.id===F.id});if(!E){B.push(D)}})}}s(C,B);if(B.length>0){B.sort(i);C.links=B;y.push(C)}});if(y.length>0){y.sort(i);z.groups=y}else{z=null;u=true}}else{if(v){z=t.groups[0]}}x.groups=[];if(z){x.groups[0]=z}if(w.length>0||z){m.push(x);if(u&&!c.contains(h.updated.groups["view.issue.opsbar"],x.id)){h.updated.groups["view.issue.opsbar"].push(x.id)}}else{h.deleted.groups["view.issue.opsbar"].push(x.id)}});if(m.length>0){m.sort(i);p.groups=m;j.push(p)}}else{if(o){j.push(o)}}h.added.groups["view.issue.opsbar"].sort();h.deleted.groups["view.issue.opsbar"].sort();h.updated.groups["view.issue.opsbar"].sort()},_mergeToolsLinks:function(q,n,m,h,r,i){h.updated.groups["jira.issue.tools"]=false;var t=c.find(n.issue.operations.linkGroups,function(u){return"jira.issue.tools"===u.id});var s=c.find(q,function(u){return"jira.issue.tools"===u.id});var o={};if(s){h.updated.groups["jira.issue.tools"]=true;c.each(s.links,function(u){o[u.id]=u});if(s.groups&&s.groups.length>0){c.each(s.groups[0].links,function(u){o[u.id]=u})}}if(t){var j=[];if(s){c.each(s.links,function(u){var v=c.find(t.links,function(w){return u.id===w.id});if(!v){j.push(u)}})}c.each(t.links,function(u){if(o[u.id]){j.push(o[u.id])}else{if(!c.contains(r,u.id)){j.push(u)}}});j.sort(i);t.links=j;var p=null;if(s&&s.groups&&s.groups.length>0){p=s.groups[0]}if(t.groups&&t.groups.length>0){var l=t.groups[0];var k=[];if(p){c.each(p.links,function(u){var v=c.find(l.links,function(w){return u.id===w.id});if(!v){k.push(u)}})}c.each(l.links,function(u){if(o[u.id]){k.push(o[u.id])}else{if(!c.contains(r,u.id)){k.push(u)}}});t.groups=[];if(k.length>0){k.sort(i);l.links=k;t.groups[0]=l}}else{if(p){t.groups=[p]}}m.push(t)}else{if(s){m.push(s)}}},_comparator:function(i,h){if(i.weight&&h.weight){if(i.weight>h.weight){return 1}if(i.weight<h.weight){return -1}return 0}if(i.weight&&!h.weight){return 1}if(!i.weight&&h.weight){return -1}return 0},updateIssue:function(h,j){var i=this.getMeta(h);if(i&&i.value){i.value.fields=j.fields||{}}}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/legacy/IssueFieldUtil.js' */
define("jira/components/issueviewer/legacy/issuefieldutil",["require"],function(b){var a=b("jira/components/libs/underscore");var d=b("jquery");var c={getFieldSelector:function(e){if(e==="issuetype"){return"#type-val"}else{if(e==="fixVersions"){return"#fixfor-val"}else{if(e==="summary"){return"#summary-val"}else{if(e==="labels"){return"#wrap-labels .value"}else{if(e==="duedate"){return"#due-date"}else{return"#"+e+"-val"}}}}}},matchesFieldSelector:function(e){return d(c.getFieldSelector(e)).length===1},transformFieldHtml:function(e){e.fields=a.map(e.fields,function(g){var f=d("<div />").htmlCatchExceptions(g.editHtml);if(f.find("input.radio,input.checkbox").length!==0){f.find("legend").eq(0).remove()}else{f.find("label").eq(0).remove()}return{id:g.id,label:g.label,editHtml:f.html(),required:g.required,contentId:g.contentId}});return e},getAccessKeyModifier:function(){var f=d("#home_link_drop").attr("title");var e=/\(([\w\+]+)\+\w\)/i;if(e.test(f)){return e.exec(f)[1]}else{return"Alt"}},isWikifield:function(g){try{var f=new DOMParser().parseFromString(g,"text/html");return f.body.querySelector(".jira-wikifield")}catch(h){return false}}};return c});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/Utils.js' */
define("jira/components/issueviewer/utils",["require"],function(b){var c=b("aui/inline-dialog");var a=b("jira/ajs/layer/inline-layer");var d=b("jquery");return{hideLightbox:function(){d.fancybox.close()},hideDropdown:function(){if(c.current&&c.current.id!=="column-picker-dialog"){c.current.hide()}if(a.current){var e=a.current.options.offsetTarget();if(e instanceof d){if(!e.is(":visible")){a.current.hide()}}}}}});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/actions.js' */
define("jira/components/issueviewer/actions",["require"],function(c){var b=c("jira/components/libs/underscore");var a=c("jira/components/util/events/issue-actions");return b.extend({},a,{EDIT_COMMENT:"editComment"})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/eventtypes.js' */
define("jira/components/issueviewer/eventtypes",["require"],function(a){var b=a("jira/util/events/types");b.ISSUE_REFRESHED="issueRefreshed";b.PANEL_REFRESHED="panelRefreshed";return b});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/analytics/IssueOpsbar.js' */
define("jira/components/issueviewer/analytics/issueopsbar",["require"],function(d){var c=d("jira/components/libs/underscore");var f=d("jquery");var e=d("jira/viewissue/analytics-utils");var a=d("jira/components/utils/ajshelper");var b=function(g){this.issueId=g.model.get("id");this.$el=g.$el;this.bindEventsToOpsbar()};b.prototype.triggerEvent=function(g){a.trigger("analyticsEvent",{name:"kickass.opsbar.operation",data:g})};b.prototype._getParamsButtonMain=function(i,h,g){return c.extend(this._getParamsCommon(i),{issueId:this.issueId,id:h.attr("id"),idx:g})};b.prototype._getParamsButtonSubmenu=function(h,k,g,j,i){return c.extend(this._getParamsCommon(h),{issueId:this.issueId,id:k.attr("id"),idx:g,parentId:j.attr("id"),parentIdx:i})};b.prototype._getParamsCommon=function(){return{context:e.context()}};b.prototype.bindEventsToOpsbar=function(){var g=this.$el.find("div.ops-menus li.toolbar-item");g.each(function(l,h){var n=f(h);if(n.hasClass("toolbar-dropdown")){var m=n.find("a.toolbar-trigger");m.click(function(i){this.triggerEvent(this._getParamsButtonMain(i,m,l))}.bind(this));var j=n.find(".aui-list a");j.each(function(o,i){var p=f(i);p.click(function(q){this.triggerEvent(this._getParamsButtonSubmenu(q,p,o,m,l))}.bind(this))}.bind(this))}else{var k=n.find("a");k.click(function(i){this.triggerEvent(this._getParamsButtonMain(i,k,l))}.bind(this))}}.bind(this))};return b});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/IssueViewer.js' */
define("jira/components/issueviewer",["require"],function(h){var v=h("jira/components/libs/underscore");var w=h("jira/components/issueviewer/actions");var u=h("jira/components/issueviewer/services/darkfeatures");var r=h("jira/components/issueviewer/controllers/error");var m=h("jira/util/events");var s=h("jira/components/issueviewer/controllers/issue");var f=h("jira/components/issueviewer/legacy/issueeventbus");var k=h("jira/components/issueviewer/services/issueloader");var q=h("jira/components/issueviewer/entities/issue");var j=h("jquery");var d=h("jira/components/issueviewer/linkscapturer");var g=h("jira/components/libs/marionette-1.4.1/controller");var p=h("jira/util/data/meta");var e=h("jira/components/issueviewer/services/metadataservice");var i=h("jira/util/events/reasons");var b=window.JIRA;var n=h("jira/components/issueviewer/eventtypes");var c=h("jira/components/issueviewer/utils");var t=h("jira/components/issueviewer/legacy/viewissuedata");var a=h("wrm/data");var l=window.AJS.contextPath();var o=function(){b.trace.apply(b,arguments)};return g.extend({namedEvents:["loadComplete","loadError","close","replacedFocusedPanel","linkToIssue"],initialize:function(x){x=x||{};x.useJIRAEvents=x.useJIRAEvents!==false;this.model=new q();this.eventBus=new f();this.viewIssueData=new t();this._buildIssueLoader();this._buildLinksCapturer();this._buildErrorController({showReturnToSearchOnError:x.showReturnToSearchOnError});this._buildIssueController();m.bind(n.REFRESH_ISSUE_PAGE,v.bind(function(z,A,y){if(this.model.isCurrentIssue(A)){this.refreshIssue(y)}},this))},_buildIssueLoader:function(){this.issueLoader=new k();this.listenTo(this.issueLoader,"error",function(y,x){this.trigger("loadError",x);this.errorController.render(y,x.issueKey);this.removeIssueMetadata();o("jira.issue.refreshed",{id:x.issueId});if(this.options.useJIRAEvents){m.trigger(n.ISSUE_REFRESHED,[x.issueId])}});this.listenTo(this.issueLoader,"issueLoaded",this._onIssueLoaded)},_buildLinksCapturer:function(){this.linksCapturer=new d();this.listenTo(this.linksCapturer,{linkToIssue:function(x){this.trigger("linkToIssue",x)},refineViewer:function(x){this.trigger("refineViewer",x)},reorderSubtasks:function(){this.issueController.showLoading();this.refreshIssue({reason:w.UPDATE}).always(v.bind(function(){this.issueController.hideLoading()},this))}})},_buildErrorController:function(x){x=x||{};this.errorController=new r({contextPath:l,showReturnToSearchOnError:x.showReturnToSearchOnError});this.listenTo(this.errorController,"before:render",function(){this.issueController.close()});this.listenTo(this.errorController,"returnToSearch",function(){this.trigger("close")});this.listenAndRethrow(this.errorController,"render")},_buildIssueController:function(){this.issueController=new s({model:this.model});this.listenAndRethrow(this.issueController,"replacedFocusedPanel");this.listenTo(this.issueController,{render:function(y,x){c.hideDropdown();this.errorController.close();this.trigger("render",y,x);o("jira.psycho.issue.refreshed",{id:this.model.getId()})},renderMainView:function(x){if(this.options.useJIRAEvents){m.trigger(n.NEW_CONTENT_ADDED,[x,i.pageLoad]);m.trigger(n.REFRESH_TOGGLE_BLOCKS,[this.model.getId()])}this.trigger("renderMainView",x,this.model.getId())},panelRendered:function(z,y,x){this.eventBus.triggerPanelRendered(z,y);if(this.options.useJIRAEvents){m.trigger(n.PANEL_REFRESHED,[z,y,x])}this.trigger("panelRendered",z,y,x)},close:function(){c.hideDropdown()},individualPanelRendered:function(x){if(this.options.useJIRAEvents){m.trigger(n.NEW_CONTENT_ADDED,[x,i.panelRefreshed])}this.trigger("individualPanelRendered",x)}})},_updateModel:function(y,x){this.model.update(y,x)},_onIssueLoaded:function(x,E,F){var D=!u.NO_PREFETCH.enabled();var B=F.issueEntity;var y=!E.mergeIntoCurrent&&F.initialize!==false;var C=!this.model.isCurrentIssue(B.id);var z=!!B.detailView;if(!E.isUpdate||y){this.model.resetToDefault();this.errorController.close()}this._updateModel(x,{initialize:y,changed:E.changed,mergeIntoCurrent:E.mergeIntoCurrent});if(!E.isUpdate||y){this.issueController.close()}this.issueController.show();if(D&&E.fromCache){this.refreshIssue(B,{fromCache:true,mergeIntoCurrent:!E.error,detailView:z})}e.addIssueMetadata(this.model);if(B.bringToFocus){B.bringToFocus()}this._triggerLoadComplete(C,E,B);var A={id:B.id};if(E.fromCache){o("jira.issue.loadFromCache",A)}else{o("jira.issue.loadFromServer",A)}o("jira.issue.refreshed",A);if(this.options.useJIRAEvents){m.trigger(n.ISSUE_REFRESHED,[B.id])}},_triggerLoadComplete:function(x,z,y){this.trigger("loadComplete",this.model,{isNewIssue:x,issueId:y.id,issueKey:y.key,duration:z.loadDuration,loadReason:z.fromCache?"issues-cache-refresh":undefined,fromCache:z.fromCache,issueRefreshedEvent:!!this.options.useJIRAEvents})},abortPending:function(){this.issueLoader.cancel()},canDismissComment:function(){return this.issueController.canDismissComment()},beforeHide:function(){c.hideLightbox();c.hideDropdown();this.abortPending();this.removeIssueMetadata()},beforeShow:function(){e.addIssueMetadata(this.model)},getIssueId:function(){return this.model.getEntity().id||null},getIssueKey:function(){return this.model.getEntity().key||null},getProjectKey:function(){return this.model.get("projectKey")||null},getProjectType:function(){return this.model.get("projectType")||null},getProjectId:function(){return this.model.get("projectId")||null},_loadIssueFromDom:function(x){if(!x.id||x.id===-1){this.errorController.applyToDom("notfound",x.key);this.trigger("loadError")}else{this.issueController.applyToDom(v.extend({id:-1},x))}p.set("serverRenderedViewIssue",null);var y={id:this.getIssueId()};o("jira.issue.refreshed",y)},loadIssue:function(x){var y=p.get("serverRenderedViewIssue");if(y){x.project={id:a.claim("projectId"),key:a.claim("projectKey"),projectType:a.claim("projectType")};return this.loadIssueRenderedByTheServer(x)}else{if(!this.canDismissComment()||!x.key){return new j.Deferred().reject()}this.issueController.showLoading();return this.issueLoader.load({issueEntity:x,viewIssueData:this.viewIssueData})}},loadIssueRenderedByTheServer:function(y){var x=j("#key-val");var z=j("#summary-val");y.id=x.attr("rel")||-1;y.summary=z.text();this._loadIssueFromDom(y);this.trigger("loadComplete",this.model,{isNewIssue:false,issueId:y.id,issueKey:y.key,duration:0,loadReason:undefined,fromCache:false});return new j.Deferred().resolve().promise()},refreshIssue:function(x){var y;x=v.defaults({},x,{mergeIntoCurrent:true});if(this.model.hasIssue()){y=this.issueLoader.update({viewIssueData:this.viewIssueData,issueEntity:this.model.getEntity(),mergeIntoCurrent:x.mergeIntoCurrent,detailView:x.detailView});if(x.complete){y=y.done(x.complete).fail(x.complete)}this.issueController.showLoading()}else{y=new j.Deferred().resolve().promise()}return y},removeIssueMetadata:function(){e.removeIssueMetadata(this.model)},setContainer:function(x){this.linksCapturer.capture(x);this.errorController.setElement(x);this.issueController.setElement(x)},isCurrentlyLoading:function(){return this.issueLoader.isLoading()},updateIssueWithQuery:function(x){this.issueController.showLoading();this.model.updateIssueQuery(x);this.issueLoader.update({viewIssueData:this.viewIssueData,issueEntity:this.model.getEntity(),mergeIntoCurrent:true})},dismiss:function(){this.model.resetToDefault();this.errorController.close();this.issueController.close();this.linksCapturer.destroy()},close:function(){if(this.canDismissComment()){this.dismiss();this.trigger("close")}},applyResponsiveDesign:function(){this.issueController.applyResponsiveDesign()},isShowingError:function(){return this.errorController.isRendered()},focus:function(){this.issueController.focus()}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/IssueViewerAppModule.js' */
define("jira/components/issueviewer/appmodule",["require"],function(d){var c=d("jira/components/libs/underscore");var a=d("jira/components/issueviewer");var b=d("jira/components/libs/marionette-1.4.1/appmodule");return b.extend({name:"issueViewer",generateMasterRequest:true,create:function(e){e=c.defaults({},e,{showReturnToSearchOnError:function(){return false}});return new a({showReturnToSearchOnError:e.showReturnToSearchOnError})},commands:function(){return{abortPending:true,beforeHide:true,beforeShow:true,removeIssueMetadata:true,updateIssueWithQuery:true,close:true,setContainer:true,dismiss:true}},requests:function(){return{loadIssue:true,canDismissComment:true,getIssueId:true,getIssueKey:true,refreshIssue:true,isCurrentlyLoading:true}},events:function(){return["loadComplete","loadError","close","render","replacedFocusedPanel","linkToIssue","refineViewer"]}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/templates/Issue.soy' */
// This file was automatically generated from Issue.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Components.IssueViewer.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Components == 'undefined') { JIRA.Components = {}; }
if (typeof JIRA.Components.IssueViewer == 'undefined') { JIRA.Components.IssueViewer = {}; }
if (typeof JIRA.Components.IssueViewer.Templates == 'undefined') { JIRA.Components.IssueViewer.Templates = {}; }


JIRA.Components.IssueViewer.Templates.layout = function(opt_data, opt_ignored) {
  return '<div id="issue-content" class="issue-edit-form">' + ((opt_data.serverRenderedViewIssue) ? '<header id="stalker" class="issue-header js-stalker">' + JIRA.Components.IssueViewer.Templates.Header.issueHeader(opt_data) + '</header><div class="issue-body-content">' + JIRA.Components.IssueViewer.Templates.Body.issueBodyWithPanels(opt_data) + '</div>' : '<div class="issue-header-container"></div><div class="issue-body-container"></div>') + '</div>';
};
if (goog.DEBUG) {
  JIRA.Components.IssueViewer.Templates.layout.soyTemplateName = 'JIRA.Components.IssueViewer.Templates.layout';
}
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/templates/IssueHeader.soy' */
// This file was automatically generated from IssueHeader.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Components.IssueViewer.Templates.Header.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Components == 'undefined') { JIRA.Components = {}; }
if (typeof JIRA.Components.IssueViewer == 'undefined') { JIRA.Components.IssueViewer = {}; }
if (typeof JIRA.Components.IssueViewer.Templates == 'undefined') { JIRA.Components.IssueViewer.Templates = {}; }
if (typeof JIRA.Components.IssueViewer.Templates.Header == 'undefined') { JIRA.Components.IssueViewer.Templates.Header = {}; }


JIRA.Components.IssueViewer.Templates.Header.opsbar = function(opt_data, opt_ignored) {
  var output = '<div class="ops-cont"><div class="ops-menus aui-toolbar">';
  if (opt_data.issue.operations) {
    var linkGroupList6 = opt_data.issue.operations.linkGroups;
    var linkGroupListLen6 = linkGroupList6.length;
    for (var linkGroupIndex6 = 0; linkGroupIndex6 < linkGroupListLen6; linkGroupIndex6++) {
      var linkGroupData6 = linkGroupList6[linkGroupIndex6];
      if (linkGroupData6.id && linkGroupData6.id == 'view.issue.opsbar') {
        output += '<div class="toolbar-split toolbar-split-left">';
        var subGroupList10 = linkGroupData6.groups;
        var subGroupListLen10 = subGroupList10.length;
        for (var subGroupIndex10 = 0; subGroupIndex10 < subGroupListLen10; subGroupIndex10++) {
          var subGroupData10 = subGroupList10[subGroupIndex10];
          output += JIRA.Components.IssueViewer.Templates.Header.linkGroup({group: subGroupData10, parentGroup: linkGroupData6});
        }
        output += '</div>';
      } else if (linkGroupData6.id && linkGroupData6.id == 'jira.issue.tools') {
        output += '<div class="toolbar-split toolbar-split-right">' + JIRA.Components.IssueViewer.Templates.Header.linkGroup({group: linkGroupData6}) + '</div>';
      }
    }
  }
  output += '</div></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Components.IssueViewer.Templates.Header.opsbar.soyTemplateName = 'JIRA.Components.IssueViewer.Templates.Header.opsbar';
}


JIRA.Components.IssueViewer.Templates.Header.legacyIssueHeader = function(opt_data, opt_ignored) {
  return '<div class="issue-header-content"><div id="issue-header-pager">' + ((opt_data.pager) ? JIRA.Components.IssueViewer.Templates.Header.pager(opt_data.pager) : '') + '</div><div id="heading-avatar"><img id="project-avatar" alt="" class="project-avatar-48" height="48" src="' + soy.$$escapeHtml(opt_data.issue.project.avatarUrls['48x48']) + '" width="48"></div><ul class="breadcrumbs"><li><a id="project-name-val" href="' + soy.$$escapeHtml("") + '/browse/' + soy.$$escapeHtml(opt_data.issue.project.key) + '">' + soy.$$escapeHtml(opt_data.issue.project.name) + '</a> </li>' + ((opt_data.issue.parent && opt_data.issue.parent.id) ? '<li><a class="issue-link" data-issue-key="' + soy.$$escapeHtml(opt_data.issue.parent.key) + '" href="' + soy.$$escapeHtml("") + '/browse/' + soy.$$escapeHtml(opt_data.issue.parent.key) + '" id="parent_issue_summary" title="' + soy.$$escapeHtml(opt_data.issue.parent.summary) + '">' + soy.$$escapeHtml(opt_data.issue.parent.key) + ' ' + soy.$$escapeHtml(opt_data.issue.parent.summary) + '</a> </li>' : '') + '<li><a class="issue-link" data-issue-key="' + soy.$$escapeHtml(opt_data.issue.key) + '" href="' + soy.$$escapeHtml("") + '/browse/' + soy.$$escapeHtml(opt_data.issue.key) + '" id="key-val" rel="' + soy.$$escapeHtml(opt_data.issue.id) + '">' + soy.$$escapeHtml(opt_data.issue.key) + '</a></li></ul><h1 id="summary-val">' + soy.$$escapeHtml(opt_data.issue.summary) + '</h1><div class="command-bar">' + ((opt_data.serverRenderedViewIssue) ? JIRA.Components.IssueViewer.Templates.Header.opsbar(opt_data) : '') + '</div></div>';
};
if (goog.DEBUG) {
  JIRA.Components.IssueViewer.Templates.Header.legacyIssueHeader.soyTemplateName = 'JIRA.Components.IssueViewer.Templates.Header.legacyIssueHeader';
}


JIRA.Components.IssueViewer.Templates.Header.issueHeader = function(opt_data, opt_ignored) {
  return '<div class="issue-header-content">' + aui.page.pageHeader({content: '' + ((opt_data.issue.project) ? aui.page.pageHeaderImage({content: '' + JIRA.Templates.Headers.projectAvatar({id: '' + soy.$$escapeHtml(opt_data.issue.project.id), projectKey: '' + soy.$$escapeHtml(opt_data.issue.project.key), projectName: '' + soy.$$escapeHtml(opt_data.issue.project.name), avatarUrl: '' + soy.$$escapeHtml(opt_data.issue.project.avatarUrls['48x48']), avatarAlt: '' + soy.$$escapeHtml(opt_data.issue.project.name), isSystemAvatar: opt_data.issue.project.systemAvatar, hasProjectShortcut: opt_data.hasProjectShortcut})}) + aui.page.pageHeaderMain({content: '<ol class="aui-nav aui-nav-breadcrumbs"><li><a id="project-name-val" href="' + soy.$$escapeHtml("") + '/browse/' + soy.$$escapeHtml(opt_data.issue.project.key) + '">' + soy.$$escapeHtml(opt_data.issue.project.name) + '</a></li>' + ((opt_data.issue.parent && opt_data.issue.parent.id) ? '<li><a class="issue-link" data-issue-key="' + soy.$$escapeHtml(opt_data.issue.parent.key) + '" href="' + soy.$$escapeHtml("") + '/browse/' + soy.$$escapeHtml(opt_data.issue.parent.key) + '" id="parent_issue_summary" title="' + soy.$$escapeHtml(opt_data.issue.parent.summary) + '">' + soy.$$escapeHtml(opt_data.issue.parent.key) + ' ' + soy.$$escapeHtml(opt_data.issue.parent.summary) + '</a></li>' : '') + '<li><a class="issue-link" data-issue-key="' + soy.$$escapeHtml(opt_data.issue.key) + '" href="' + soy.$$escapeHtml("") + '/browse/' + soy.$$escapeHtml(opt_data.issue.key) + '" id="key-val" rel="' + soy.$$escapeHtml(opt_data.issue.id) + '">' + soy.$$escapeHtml(opt_data.issue.key) + '</a></li></ol><h1 id="summary-val">' + soy.$$escapeHtml(opt_data.issue.summary) + '</h1>'}) : '') + aui.page.pageHeaderActions({content: '<div id="issue-header-pager">' + ((opt_data.pager) ? JIRA.Components.IssueViewer.Templates.Header.pager(opt_data.pager) : '') + '</div>'})}) + '<div class="command-bar">' + ((opt_data.serverRenderedViewIssue) ? JIRA.Components.IssueViewer.Templates.Header.opsbar(opt_data) : '') + '</div></div>';
};
if (goog.DEBUG) {
  JIRA.Components.IssueViewer.Templates.Header.issueHeader.soyTemplateName = 'JIRA.Components.IssueViewer.Templates.Header.issueHeader';
}


JIRA.Components.IssueViewer.Templates.Header.linkGroup = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.group.header && opt_data.group.header.label) {
    output += (opt_data.group.links.length > 0 || opt_data.group.groups.length > 0) ? JIRA.Components.IssueViewer.Templates.Header.dropdownLink(opt_data.group) : '';
  } else {
    output += '<ul ' + ((opt_data.group.id) ? 'id="opsbar-' + soy.$$escapeHtml(opt_data.group.id) + '" ' : '') + 'class="toolbar-group pluggable-ops">';
    var linkList155 = opt_data.group.links;
    var linkListLen155 = linkList155.length;
    for (var linkIndex155 = 0; linkIndex155 < linkListLen155; linkIndex155++) {
      var linkData155 = linkList155[linkIndex155];
      output += JIRA.Components.IssueViewer.Templates.Header.toolbarItem({link: linkData155});
    }
    if (opt_data.group.groups.length == 1 && opt_data.group.groups[0].links.length == 0 && opt_data.group.groups[0].groups.length == 1 && opt_data.group.groups[0].groups[0].links.length == 1) {
      output += JIRA.Components.IssueViewer.Templates.Header.toolbarItem({link: opt_data.group.groups[0].groups[0].links[0]});
    } else {
      var subGroupList164 = opt_data.group.groups;
      var subGroupListLen164 = subGroupList164.length;
      for (var subGroupIndex164 = 0; subGroupIndex164 < subGroupListLen164; subGroupIndex164++) {
        var subGroupData164 = subGroupList164[subGroupIndex164];
        output += JIRA.Components.IssueViewer.Templates.Header.linkGroup({group: subGroupData164});
      }
    }
    output += '</ul>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Components.IssueViewer.Templates.Header.linkGroup.soyTemplateName = 'JIRA.Components.IssueViewer.Templates.Header.linkGroup';
}


JIRA.Components.IssueViewer.Templates.Header.dropdownLink = function(opt_data, opt_ignored) {
  var output = '<li class="toolbar-item"><div><a href="#"' + ((opt_data.header.id) ? 'id="' + soy.$$escapeHtml(opt_data.header.id) + '"' : '') + ((opt_data.header.id) ? 'aria-owns="' + soy.$$escapeHtml(opt_data.header.id) + '_drop"' : '') + 'aria-haspopup="true"' + JIRA.Components.IssueViewer.Templates.Header.titleAttr({title: opt_data.header.title, label: opt_data.header.label}) + 'class="toolbar-trigger aui-button aui-style-default' + ((opt_data.links.length > 0 || opt_data.groups.length > 0) ? ' aui-dropdown2-trigger' : '') + ((opt_data.header.styleClass) ? ' ' + soy.$$escapeHtml(opt_data.header.styleClass) : '') + '">' + ((opt_data.header.iconClass) ? '<span class="icon ' + soy.$$escapeHtml(opt_data.header.iconClass) + '"></span> ' : '') + '<span class="dropdown-text">' + soy.$$truncate(soy.$$escapeHtml(opt_data.header.label), 25, true) + '</span></a><div ' + ((opt_data.header.id) ? 'id="' + soy.$$escapeHtml(opt_data.header.id) + '_drop"' : '') + ' class="aui-style-default aui-dropdown2">';
  if (opt_data.links.length > 0) {
    output += '<ul>';
    var linkList212 = opt_data.links;
    var linkListLen212 = linkList212.length;
    for (var linkIndex212 = 0; linkIndex212 < linkListLen212; linkIndex212++) {
      var linkData212 = linkList212[linkIndex212];
      output += JIRA.Components.IssueViewer.Templates.Header.dropdownItem(linkData212);
    }
    output += '</ul>';
  }
  var groupList216 = opt_data.groups;
  var groupListLen216 = groupList216.length;
  for (var groupIndex216 = 0; groupIndex216 < groupListLen216; groupIndex216++) {
    var groupData216 = groupList216[groupIndex216];
    output += '<div class="aui-dropdown2-section"><ul>';
    var linkList218 = groupData216.links;
    var linkListLen218 = linkList218.length;
    for (var linkIndex218 = 0; linkIndex218 < linkListLen218; linkIndex218++) {
      var linkData218 = linkList218[linkIndex218];
      output += JIRA.Components.IssueViewer.Templates.Header.dropdownItem(linkData218);
    }
    output += '</ul></div>';
  }
  output += '</div></div></li>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Components.IssueViewer.Templates.Header.dropdownLink.soyTemplateName = 'JIRA.Components.IssueViewer.Templates.Header.dropdownLink';
}


JIRA.Components.IssueViewer.Templates.Header.dropdownItem = function(opt_data, opt_ignored) {
  return '<li class="aui-list-item"><a  href="' + ((opt_data.href) ? soy.$$escapeHtml(opt_data.href) : '#') + '"' + ((opt_data.styleClass) ? 'class="' + soy.$$escapeHtml(opt_data.styleClass) + '"' : '') + JIRA.Components.IssueViewer.Templates.Header.titleAttr(opt_data) + ((opt_data.id) ? 'id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + '><span class="trigger-label">' + soy.$$truncate(soy.$$escapeHtml(opt_data.label), 25, true) + '</span></a></li>';
};
if (goog.DEBUG) {
  JIRA.Components.IssueViewer.Templates.Header.dropdownItem.soyTemplateName = 'JIRA.Components.IssueViewer.Templates.Header.dropdownItem';
}


JIRA.Components.IssueViewer.Templates.Header.toolbarItem = function(opt_data, opt_ignored) {
  return '<li class="toolbar-item"><a id="' + soy.$$escapeHtml(opt_data.link.id) + '"' + JIRA.Components.IssueViewer.Templates.Header.titleAttr({title: opt_data.link.title, label: opt_data.link.label}) + 'class="toolbar-trigger' + ((opt_data.link.styleClass) ? ' ' + soy.$$escapeHtml(opt_data.link.styleClass) : '') + '" href="' + ((opt_data.link.href) ? soy.$$escapeHtml(opt_data.link.href) : '#') + '">' + ((opt_data.link.iconClass) ? '<span class="icon ' + soy.$$escapeHtml(opt_data.link.iconClass) + '"></span> <span class="trigger-label">' + soy.$$truncate(soy.$$escapeHtml(opt_data.link.label), 25, true) + '</span>' : '<span class="trigger-label">' + soy.$$truncate(soy.$$escapeHtml(opt_data.link.label), 25, true) + '</span>') + '</a></li>';
};
if (goog.DEBUG) {
  JIRA.Components.IssueViewer.Templates.Header.toolbarItem.soyTemplateName = 'JIRA.Components.IssueViewer.Templates.Header.toolbarItem';
}


JIRA.Components.IssueViewer.Templates.Header.titleAttr = function(opt_data, opt_ignored) {
  return '' + ((opt_data.title) ? 'title="' + soy.$$escapeHtml(opt_data.title) + '"' : (opt_data.label && opt_data.label.length && opt_data.label.length > 25) ? 'title="' + soy.$$escapeHtml(opt_data.label) + '"' : '');
};
if (goog.DEBUG) {
  JIRA.Components.IssueViewer.Templates.Header.titleAttr.soyTemplateName = 'JIRA.Components.IssueViewer.Templates.Header.titleAttr';
}
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/templates/IssueBody.soy' */
// This file was automatically generated from IssueBody.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Components.IssueViewer.Templates.Body.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Components == 'undefined') { JIRA.Components = {}; }
if (typeof JIRA.Components.IssueViewer == 'undefined') { JIRA.Components.IssueViewer = {}; }
if (typeof JIRA.Components.IssueViewer.Templates == 'undefined') { JIRA.Components.IssueViewer.Templates = {}; }
if (typeof JIRA.Components.IssueViewer.Templates.Body == 'undefined') { JIRA.Components.IssueViewer.Templates.Body = {}; }


JIRA.Components.IssueViewer.Templates.Body.issueBody = function(opt_data, opt_ignored) {
  return '' + JIRA.Components.IssueViewer.Templates.Body.issueBodyWithPanels({panels: false, serverRenderedViewIssue: false});
};
if (goog.DEBUG) {
  JIRA.Components.IssueViewer.Templates.Body.issueBody.soyTemplateName = 'JIRA.Components.IssueViewer.Templates.Body.issueBody';
}


JIRA.Components.IssueViewer.Templates.Body.issueBodyWithPanels = function(opt_data, opt_ignored) {
  var output = '<div class="aui-group issue-body"><div class="aui-item issue-main-column">';
  if (opt_data.serverRenderedViewIssue) {
    var panelList10 = opt_data.panels.leftPanels;
    var panelListLen10 = panelList10.length;
    for (var panelIndex10 = 0; panelIndex10 < panelListLen10; panelIndex10++) {
      var panelData10 = panelList10[panelIndex10];
      output += JIRA.Components.IssueViewer.Templates.Body.issuePanel(panelData10);
    }
  }
  output += '</div><div id="viewissuesidebar" class="aui-item issue-side-column">';
  if (opt_data.serverRenderedViewIssue) {
    var panelList16 = opt_data.panels.rightPanels;
    var panelListLen16 = panelList16.length;
    for (var panelIndex16 = 0; panelIndex16 < panelListLen16; panelIndex16++) {
      var panelData16 = panelList16[panelIndex16];
      output += JIRA.Components.IssueViewer.Templates.Body.issuePanel(panelData16);
    }
  }
  output += '</div></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Components.IssueViewer.Templates.Body.issueBodyWithPanels.soyTemplateName = 'JIRA.Components.IssueViewer.Templates.Body.issueBodyWithPanels';
}


JIRA.Components.IssueViewer.Templates.Body.issuePanel = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.renderHeader) {
    output += '<div id=' + soy.$$escapeHtml(opt_data.id) + ' class="module toggle-wrap"><div id="' + soy.$$escapeHtml(opt_data.id) + '_heading" class="mod-header"><ul class="ops">';
    var linkList28 = opt_data.headerLinks.links;
    var linkListLen28 = linkList28.length;
    for (var linkIndex28 = 0; linkIndex28 < linkListLen28; linkIndex28++) {
      var linkData28 = linkList28[linkIndex28];
      output += '<li>' + JIRA.Components.IssueViewer.Templates.Body.simpleLink({link: linkData28}) + '</li>';
    }
    if (opt_data.headerLinks.groups.length > 0) {
      output += '<li class="drop"><div class="aui-dd-parent"><a href="#" class="icon drop-menu js-default-dropdown" title="' + soy.$$escapeHtml("Options") + '"><span>' + soy.$$escapeHtml("Options") + '</span></a><div class="aui-dropdown-content aui-list">';
      var groupList41 = opt_data.headerLinks.groups;
      var groupListLen41 = groupList41.length;
      for (var groupIndex41 = 0; groupIndex41 < groupListLen41; groupIndex41++) {
        var groupData41 = groupList41[groupIndex41];
        output += ((groupData41.header && groupData41.header.label) ? '<h5>' + soy.$$escapeHtml(groupData41.header.label) + '</h5>' : '') + '<ul ' + ((groupData41.header && groupData41.header.id) ? 'id="' + soy.$$escapeHtml(groupData41.header.id) + '"' : '') + 'class="aui-list-section' + ((groupData41.header && groupData41.header.styleClass) ? ' ' + soy.$$escapeHtml(groupData41.header.styleClass) : '') + ((groupIndex41 == 0) ? ' aui-first' : '') + ((groupIndex41 == groupListLen41 - 1) ? ' aui-last' : '') + '">';
        var linkList65 = groupData41.links;
        var linkListLen65 = linkList65.length;
        for (var linkIndex65 = 0; linkIndex65 < linkListLen65; linkIndex65++) {
          var linkData65 = linkList65[linkIndex65];
          output += '<li class="aui-list-item">' + JIRA.Components.IssueViewer.Templates.Body.simpleLink({link: linkData65, additionalStyleClass: 'aui-list-item-link'}) + '</li>';
        }
        output += '</ul>';
      }
      output += '</div></div></li>';
    }
    output += '</ul>';
    if (opt_data.subpanelHtmls.length > 0) {
      output += '<div class="mod-header-panels">';
      var subPanelList79 = opt_data.subpanelHtmls;
      var subPanelListLen79 = subPanelList79.length;
      for (var subPanelIndex79 = 0; subPanelIndex79 < subPanelListLen79; subPanelIndex79++) {
        var subPanelData79 = subPanelList79[subPanelIndex79];
        output += '<div class="mod-header-panel">' + soy.$$filterNoAutoescape(subPanelData79) + '</div>';
      }
      output += '</div>';
    }
    output += '<h2 class="toggle-title">' + soy.$$escapeHtml(opt_data.label) + '</h2></div><div class="mod-content">' + soy.$$filterNoAutoescape(opt_data.html) + '</div></div>';
  } else {
    output += soy.$$filterNoAutoescape(opt_data.html);
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Components.IssueViewer.Templates.Body.issuePanel.soyTemplateName = 'JIRA.Components.IssueViewer.Templates.Body.issuePanel';
}


JIRA.Components.IssueViewer.Templates.Body.errorsLoading = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '' + ((opt_data.isTimeout) ? soy.$$escapeHtml("The JIRA server could not be contacted. This may be a temporary glitch or the server may be down.") : soy.$$escapeHtml("There were errors loading the issue."));
  if (opt_data.errorMessages) {
    output += '<ul>';
    var msgList104 = opt_data.errorMessages;
    var msgListLen104 = msgList104.length;
    for (var msgIndex104 = 0; msgIndex104 < msgListLen104; msgIndex104++) {
      var msgData104 = msgList104[msgIndex104];
      output += '<li>' + soy.$$escapeHtml(msgData104) + '</li>';
    }
    output += '</ul>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Components.IssueViewer.Templates.Body.errorsLoading.soyTemplateName = 'JIRA.Components.IssueViewer.Templates.Body.errorsLoading';
}


JIRA.Components.IssueViewer.Templates.Body.focusShifter = function(opt_data, opt_ignored) {
  return '<div class="aui-message closeable" id="focus-shifter"><label><span>' + soy.$$escapeHtml("viewissue.focusshifter") + '</span><div id="focus-shifter-content"></div></label><span class="aui-icon icon-close"></span></div>';
};
if (goog.DEBUG) {
  JIRA.Components.IssueViewer.Templates.Body.focusShifter.soyTemplateName = 'JIRA.Components.IssueViewer.Templates.Body.focusShifter';
}


JIRA.Components.IssueViewer.Templates.Body.simpleLink = function(opt_data, opt_ignored) {
  return '<a' + ((opt_data.link.id) ? ' id="' + soy.$$escapeHtml(opt_data.link.id) + '"' : '') + 'href="' + ((opt_data.link.href) ? soy.$$escapeHtml(opt_data.link.href) : '#') + '"' + ((opt_data.link.styleClass || opt_data.additionalStyleClass) ? 'class="' + soy.$$escapeHtml(opt_data.link.styleClass) + ((opt_data.additionalStyleClass) ? ' ' + soy.$$escapeHtml(opt_data.additionalStyleClass) : '') + '"' : '') + ((opt_data.link.title) ? 'title="' + soy.$$escapeHtml(opt_data.link.title) + '"' : '') + '><span>' + soy.$$escapeHtml(opt_data.link.label) + '</span></a>';
};
if (goog.DEBUG) {
  JIRA.Components.IssueViewer.Templates.Body.simpleLink.soyTemplateName = 'JIRA.Components.IssueViewer.Templates.Body.simpleLink';
}
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/templates/IssueError.soy' */
// This file was automatically generated from IssueError.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Components.IssueViewer.Templates.Error.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Components == 'undefined') { JIRA.Components = {}; }
if (typeof JIRA.Components.IssueViewer == 'undefined') { JIRA.Components.IssueViewer = {}; }
if (typeof JIRA.Components.IssueViewer.Templates == 'undefined') { JIRA.Components.IssueViewer.Templates = {}; }
if (typeof JIRA.Components.IssueViewer.Templates.Error == 'undefined') { JIRA.Components.IssueViewer.Templates.Error = {}; }


JIRA.Components.IssueViewer.Templates.Error.NoPermission = function(opt_data, opt_ignored) {
  return '' + JIRA.Components.IssueViewer.Templates.Error.Generic(null);
};
if (goog.DEBUG) {
  JIRA.Components.IssueViewer.Templates.Error.NoPermission.soyTemplateName = 'JIRA.Components.IssueViewer.Templates.Error.NoPermission';
}


JIRA.Components.IssueViewer.Templates.Error.DoesNotExist = function(opt_data, opt_ignored) {
  return '' + JIRA.Components.IssueViewer.Templates.Error.fancyViewIssueError({title: "This issue can\x27t be viewed", body: "The issue you\x27re trying to view can\x27t be displayed.", bodyAfter: "It may have been deleted or you don\x27t have permission to view it right now.", error: 'canNotBeViewed', showReloadButton: false});
};
if (goog.DEBUG) {
  JIRA.Components.IssueViewer.Templates.Error.DoesNotExist.soyTemplateName = 'JIRA.Components.IssueViewer.Templates.Error.DoesNotExist';
}


JIRA.Components.IssueViewer.Templates.Error.Generic = function(opt_data, opt_ignored) {
  return '' + JIRA.Components.IssueViewer.Templates.Error.fancyViewIssueError({title: "This issue can\x27t be displayed right now", body: "It could be for a variety of reasons, like a network or application error.", bodyAfter: "Try reloading the page.", error: 'genericError', showReloadButton: true});
};
if (goog.DEBUG) {
  JIRA.Components.IssueViewer.Templates.Error.Generic.soyTemplateName = 'JIRA.Components.IssueViewer.Templates.Error.Generic';
}


JIRA.Components.IssueViewer.Templates.Error.fancyViewIssueError = function(opt_data, opt_ignored) {
  return '' + JIRA.Components.IssueViewer.Templates.Error.baseViewIssueError({header: '<header class="aui-page-header"><div class="aui-page-header-inner"><div class="aui-page-header-actions"><div id="issue-header-pager"></div></div></div></header>', body: '<div class="issue-error"><span class="error-image error-image-' + soy.$$escapeHtml(opt_data.error) + '"></span><h1>' + soy.$$escapeHtml(opt_data.title) + '</h1><p>' + soy.$$escapeHtml(opt_data.body) + '<br />' + soy.$$escapeHtml(opt_data.bodyAfter) + '</p>' + ((opt_data.showReloadButton) ? '<p><button id="issue-error-reload-button" class="aui-button aui-button-primary">Reload</button></p>' : '') + '</div>'});
};
if (goog.DEBUG) {
  JIRA.Components.IssueViewer.Templates.Error.fancyViewIssueError.soyTemplateName = 'JIRA.Components.IssueViewer.Templates.Error.fancyViewIssueError';
}


JIRA.Components.IssueViewer.Templates.Error.viewIssueError = function(opt_data, opt_ignored) {
  return '' + JIRA.Components.IssueViewer.Templates.Error.baseViewIssueError({header: '<header class="aui-page-header"><div class="aui-page-header-inner"><div class="aui-page-header-main"><h1>' + soy.$$escapeHtml(opt_data.title) + '</h1></div><div class="aui-page-header-actions"><div id="issue-header-pager"></div></div></div></header>', body: '<div class="aui-message ' + soy.$$escapeHtml(opt_data.error) + '"><span class="aui-icon icon-' + soy.$$escapeHtml(opt_data.error) + '"></span><p>' + soy.$$escapeHtml(opt_data.body) + '</p><p>' + soy.$$escapeHtml("If you think this message is wrong, please contact your") + ' <a href="' + soy.$$escapeHtml("") + '/secure/ContactAdministrators!default.jspa">' + soy.$$escapeHtml("JIRA administrators") + '</a>.</p>' + ((opt_data.returnToSearch) ? '<p><a id="return-to-search" class="push-state" href="' + soy.$$escapeHtml("") + '/issues/" title="' + soy.$$escapeHtml("Return to search") + '">' + soy.$$escapeHtml("Return to search") + '</a></p>' : '') + '</div>'});
};
if (goog.DEBUG) {
  JIRA.Components.IssueViewer.Templates.Error.viewIssueError.soyTemplateName = 'JIRA.Components.IssueViewer.Templates.Error.viewIssueError';
}


JIRA.Components.IssueViewer.Templates.Error.baseViewIssueError = function(opt_data, opt_ignored) {
  return '<div id="issue-content"><header class="issue-header issue-error-header"><div class="issue-header-content">' + soy.$$filterNoAutoescape(opt_data.header) + '</div></header><div class="issue-body-content issue-error-content">' + soy.$$filterNoAutoescape(opt_data.body) + '</div></div>';
};
if (goog.DEBUG) {
  JIRA.Components.IssueViewer.Templates.Error.baseViewIssueError.soyTemplateName = 'JIRA.Components.IssueViewer.Templates.Error.baseViewIssueError';
}
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/templates/amd-wrapper.js' */
define("jira/components/issueviewer/templates",function(){return JIRA.Components.IssueViewer.Templates});AJS.namespace("JIRA.Components.IssueViewer.Templates",null,require("jira/components/issueviewer/templates"));;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/namespace.js' */
AJS.namespace("JIRA.Components.IssueViewer",null,require("jira/components/issueviewer"));AJS.namespace("JIRA.Components.IssueViewer.AppModule",null,require("jira/components/issueviewer/appmodule"));AJS.namespace("JIRA.Components.IssueViewer.Utils",null,require("jira/components/issueviewer/utils"));AJS.namespace("JIRA.Components.IssueViewer.Controllers.Error",null,require("jira/components/issueviewer/controllers/error"));AJS.namespace("JIRA.Components.IssueViewer.Controllers.Issue",null,require("jira/components/issueviewer/controllers/issue"));AJS.namespace("JIRA.Components.IssueViewer.Models.Issue",null,require("jira/components/issueviewer/entities/issue"));AJS.namespace("JIRA.Components.IssueViewer.Models.Panel",null,require("jira/components/issueviewer/entities/panel"));AJS.namespace("JIRA.Components.IssueViewer.Collections.Panels",null,require("jira/components/issueviewer/entities/panels"));AJS.namespace("JIRA.Components.IssueViewer.Models.PanelsGroup",null,require("jira/components/issueviewer/entities/panelsgroup"));AJS.namespace("JIRA.Components.IssueViewer.Legacy.AsyncData",null,require("jira/components/issueviewer/legacy/asyncdata"));AJS.namespace("JIRA.Components.IssueViewer.Legacy.IssueEventBus",null,require("jira/components/issueviewer/legacy/issueeventbus"));AJS.namespace("JIRA.Components.IssueViewer.Legacy.IssueFieldUtil",null,require("jira/components/issueviewer/legacy/issuefieldutil"));AJS.namespace("JIRA.Components.IssueViewer.Legacy.ViewIssueData",null,require("jira/components/issueviewer/legacy/viewissuedata"));AJS.namespace("JIRA.Components.IssueViewer.Services.DarkFeatures",null,require("jira/components/issueviewer/services/darkfeatures"));AJS.namespace("JIRA.Components.IssueViewer.Services.IssueLoader",null,require("jira/components/issueviewer/services/issueloader"));AJS.namespace("JIRA.Components.IssueViewer.Services.Metadata",null,require("jira/components/issueviewer/services/metadataservice"));AJS.namespace("JIRA.Components.IssueViewer.Views.ErrorGeneric",null,require("jira/components/issueviewer/views/errorgeneric"));AJS.namespace("JIRA.Components.IssueViewer.Views.ErrorNotFound",null,require("jira/components/issueviewer/views/errornotfound"));AJS.namespace("JIRA.Components.IssueViewer.Views.Error",null,require("jira/components/issueviewer/views/error"));AJS.namespace("JIRA.Components.IssueViewer.Views.IssueBody",null,require("jira/components/issueviewer/views/issuebody"));AJS.namespace("JIRA.Components.IssueViewer.Views.IssueHeader",null,require("jira/components/issueviewer/views/issueheader"));AJS.namespace("JIRA.Components.IssueViewer.Views.IssueOpsbar",null,require("jira/components/issueviewer/views/issueopsbar"));AJS.namespace("JIRA.Components.IssueViewer.Views.IssuePanels",null,require("jira/components/issueviewer/views/issuepanels"));AJS.namespace("JIRA.Components.IssueViewer.Views.IssuePanel",null,require("jira/components/issueviewer/views/issuepanel"));AJS.namespace("JIRA.Components.IssueViewer.Views.Issue",null,require("jira/components/issueviewer/views/issue"));AJS.namespace("JIRA.Components.IssueViewer.Templates",null,require("jira/components/issueviewer/templates"));;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/IssueEditor.js' */
define("jira/components/issueeditor",["require"],function(g){var r=g("jira/components/libs/underscore");var q=g("jira/components/issueviewer/services/darkfeatures");var p=g("jira/components/issueeditor/controllers/editissue");var j=g("jira/util/events");var o=g("jira/components/issueeditor/eventtypes");var h=g("jira/components/issueeditor/controllers/fields");var k=g("jira/components/issueeditor/services/fieldsloader");var f=g("jira/components/issueeditor/services/issuesaver");var c=g("jira/components/issueviewer");var m=g("jira/util/data/meta");var d=g("jira/components/issueeditor/views/modalfield");var n=g("jira/components/issueeditor/views/saveerror");var e=g("jira/components/issueeditor/services/saveinprogressmanager");var a=window.JIRA;var b=g("jira/components/issueeditor/services/unloadinterceptor");var i=window.AJS.contextPath();var l=function(){a.trace.apply(a,arguments)};return c.extend({namedEvents:["loadComplete","loadError","returnToSearch","saveSuccess","saveError","editField","editFieldCancel","fieldSubmitted","replacedFocusedPanel","fieldsLoaded"],initialize:function(s){c.prototype.initialize.call(this,s);this._buildFieldsLoader();this._buildIssueSaver();this._buildEditIssueController();this._buildFieldsController();this._handleUnload();this.listenAndRethrow(this.eventBus,"fieldSubmitted")},_buildFieldsLoader:function(){this.fieldsLoader=new k({contextPath:i});this.listenTo(this.fieldsLoader,"fieldsLoaded",function(s){this.viewIssueData.updateIssue(s.issueKey,s);s.issueId=Number(s.issueId);var t=s.fields&&s.fields.length;if(t){this.editIssueController.update(s)}else{this.editIssueController.reset()}this.trigger("fieldsLoaded");l("jira.issue.fields.loaded",{id:s.issueId})});this.listenTo(this.fieldsLoader,"fieldsError",function(s){this.fieldsController.showError(s.errorCollection,s.isTimeout);l("jira.issue.fields.loaded",{id:s.issueId})})},_buildIssueSaver:function(){this.saveInProgressManager=new e();this.issueSaver=new f({saveInProgressManager:this.saveInProgressManager,model:this.model});this.listenTo(this.issueSaver,"error",function(v){var x=v.issueId;var u=v.attemptedSavedIds;var t=v.response;var w=v.duration;if(!this.model.isCurrentIssue(x)){this._showSaveError({issueId:x,issueKey:v.issueKey,response:t});return}this.eventBus.triggerSaveError(x,u,t);var s=t&&t.fields&&t.fields.length;if(!s&&t){this.editIssueController.reset();this.model.update(t,{fieldsSaved:[],fieldsInProgress:[]})}this.trigger("saveError",{issueId:x,duration:w,deferred:false});l("jira.issue.refreshed",{id:x})});this.listenTo(this.issueSaver,"saveStarted",function(s,t){this.eventBus.triggerSavingStarted(t)});this.listenTo(this.issueSaver,"save",function(A){var y=A.issueId;var u=A.issueKey;var x=A.savedFieldIds;var s=A.savedFieldTypes;var w=A.response;var z=A.shouldSkipSaveIssueSuccessHandler;var v=A.duration;if(this.model.isCurrentIssue(y)&&!z){this.eventBus.triggerSaveSuccess(y,u,x,w);this.viewIssueData.set(u,w);this.model.update(w,{fieldsSaved:x,fieldsInProgress:this.editIssueController.getEditsInProgress()});l("jira.psycho.issue.refreshed",{id:y});var t=w.fields&&w.fields.length;if(t){this.editIssueController.update({fields:w.fields,issueId:y,issueKey:u},{editable:true,editIssueController:this.editIssueController,issueModel:this.model,issueId:y,fieldsSaved:x,initialize:false,fieldsInProgress:this.editIssueController.getEditsInProgress()})}l("jira.issue.refreshed",{id:y})}this.trigger("saveSuccess",{issueId:y,issueKey:u,savedFieldIds:x,savedFieldTypes:s,duration:v})})},_buildEditIssueController:function(){this.editIssueController=new p({issueEventBus:this.eventBus});this.listenTo(this.editIssueController,"save",function(x,t,v,w,u,s){this.issueSaver.setSkipSaveIssueSuccessHandler(false);this.issueSaver.save(x,t,v,w,u,s)});this.listenAndRethrow(this.editIssueController,"editField");this.listenAndRethrow(this.editIssueController,"editFieldCancel")},_buildFieldsController:function(){this.fieldsController=new h()},_onIssueLoaded:function(v,w,t){if(v.issue.isEditable){var u=!q.NO_PREFETCH.enabled();if(u&&!w.error&&!w.fromCache){this.fieldsLoader.load({viewIssueData:this.viewIssueData,issueEntity:t.issueEntity})}}var s=!w.mergeIntoCurrent&&t.initialize!==false;if(!w.isUpdate||s){this.editIssueController.reset()}c.prototype._onIssueLoaded.call(this,v,w,t);if(v.fields){this.editIssueController.update({fields:v.fields,issueId:v.issue.id,issueKey:v.issue.key});l("jira.issue.fields.loaded",{id:v.issue.id})}},_handleUnload:function(){var s=r.bind(function(){var t;if(this.editIssueController.getDirtyEditsInProgress().length>0){t="You are still editing this page. Are you sure you want to leave?"}return t},this);this.unloadInterceptor=new b();this.unloadInterceptor.addAfterEvent(s);this.on("destroy",function(){this.unloadInterceptor.removeAfterEvent(s)})},_updateModel:function(u,s){var t=u.fields&&u.fields.length;if(t){this.editIssueController.update(u.fields,{fieldsInProgress:this.editIssueController.getEditsInProgress(),changed:s.changed})}s=r.extend({},s,{fieldsInProgress:this.editIssueController.getEditsInProgress()});c.prototype._updateModel.call(this,u,s)},_loadIssueFromDom:function(s){if(m.get("server-view-issue-is-editable")){this.editIssueController.setIssueId(s.id);this.editIssueController.setIssueKey(s.key);this.fieldsLoader.load({viewIssueData:this.viewIssueData,issueEntity:s});m.set("server-view-issue-is-editable",null)}c.prototype._loadIssueFromDom.call(this,s)},editField:function(u){if(!u.isEditable()){return}var s=this.model.getEntity();var t=r.bind(function(){if(u.matchesFieldSelector()){u.edit()}else{new d({issueEventBus:this.eventBus,model:u,issue:s}).show()}},this);if(!u.getSaving()){t()}else{j.one(o.ISSUE_REFRESHED,function(){t()})}},abortPending:function(){this.fieldsLoader.cancel();c.prototype.abortPending.call(this)},beforeHide:function(){this.issueSaver.setSkipSaveIssueSuccessHandler(true);c.prototype.beforeHide.call(this)},setContainer:function(s){this.editIssueController.setIssueViewContext(s);c.prototype.setContainer.call(this,s)},dismiss:function(){this.editIssueController.reset();c.prototype.dismiss.call(this)},getFields:function(){return this.editIssueController.getFields()},hasSavesInProgress:function(){return this.saveInProgressManager.hasSavesInProgress()},_showSaveError:function(t){var u;var s;u=new n(t).render();s=r.partial(this.stopListening,u);this.listenTo(u,{close:s,issueLinkClick:function(v){var w={isPrevented:false,preventDefault:function(){this.isPrevented=true},isDefaultPrevented:function(){return this.isPrevented===true},issueData:v};this.trigger("linkInErrorMessage",w);if(!w.isDefaultPrevented()){this.loadIssue(v)}}})}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/IssueEditorAppModule.js' */
define("jira/components/issueeditor/appmodule",["require"],function(c){var b=c("jira/components/libs/underscore");var d=c("jira/components/issueeditor");var a=c("jira/components/issueviewer/appmodule");return a.extend({name:"issueEditor",generateMasterRequest:true,create:function(e){e=b.defaults({},e,{showReturnToSearchOnError:function(){return false}});return new d({showReturnToSearchOnError:e.showReturnToSearchOnError})},commands:function(e){var f=a.prototype.commands.call(this,e);return b.extend(f,{editField:true})},requests:function(e){var f=a.prototype.requests.call(this,e);return b.extend(f,{fields:function(){return e.getFields()},hasSavesInProgress:true})},events:function(f){var e=a.prototype.events.call(this,f);return e.concat(["saveSuccess","saveError","editField","editFieldCancel","fieldSubmitted","fieldsLoaded"])}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/NoInlineAppModule.js' */
define("jira/components/issueeditor/noinlineappmodule",["require"],function(c){var b=c("jira/components/libs/underscore");var a=c("jira/components/issueviewer/appmodule");return a.extend({name:"issueEditor",requests:function(d){var e=a.prototype.requests.call(this,d);return b.extend(e,{fields:function(){return[]},hasSavesInProgress:function(){return false}})}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/templates/Fields.soy' */
// This file was automatically generated from Fields.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.IssueEditor.Fields.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.IssueEditor == 'undefined') { JIRA.Templates.IssueEditor = {}; }
if (typeof JIRA.Templates.IssueEditor.Fields == 'undefined') { JIRA.Templates.IssueEditor.Fields = {}; }


JIRA.Templates.IssueEditor.Fields.saveErrorMessage = function(opt_data, opt_ignored) {
  var output = '';
  var issueLink__soy3 = '<a class="issue" href="' + soy.$$escapeHtml("") + '/browse/' + soy.$$escapeHtml(opt_data.issueKey) + '">' + soy.$$escapeHtml(opt_data.issueKey) + '</a>';
  output += soy.$$filterNoAutoescape(AJS.format("Saving of \x3cstrong\x3e{0}\x3c/strong\x3e failed!",issueLink__soy3));
  if (opt_data.errors.length > 0) {
    output += '<ul>';
    var messageList16 = opt_data.errors;
    var messageListLen16 = messageList16.length;
    for (var messageIndex16 = 0; messageIndex16 < messageListLen16; messageIndex16++) {
      var messageData16 = messageList16[messageIndex16];
      output += '<li>' + soy.$$escapeHtml(messageData16) + '</li>';
    }
    output += '</ul>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.IssueEditor.Fields.saveErrorMessage.soyTemplateName = 'JIRA.Templates.IssueEditor.Fields.saveErrorMessage';
}


JIRA.Templates.IssueEditor.Fields.field = function(opt_data, opt_ignored) {
  return '<form id="' + soy.$$escapeHtml(opt_data.issue.id) + '-form" class="ajs-dirty-warning-exempt aui" action= "#"><div class="inline-edit-fields ' + ((opt_data.showButtonBar) ? 'show-button-bar' : '') + '">' + soy.$$filterNoAutoescape(opt_data.issue.editHtml) + '</div><span class="overlay-icon throbber" />' + ((opt_data.showButtonBar) ? JIRA.Templates.IssueEditor.Fields.saveButtons(opt_data) : JIRA.Templates.IssueEditor.Fields.saveOptions(opt_data)) + '</form>';
};
if (goog.DEBUG) {
  JIRA.Templates.IssueEditor.Fields.field.soyTemplateName = 'JIRA.Templates.IssueEditor.Fields.field';
}


JIRA.Templates.IssueEditor.Fields.saveOptions = function(opt_data, opt_ignored) {
  return '<div class="save-options"><button type="submit" class="aui-button submit" accessKey="' + soy.$$escapeHtml("s") + '" title="' + soy.$$escapeHtml(AJS.format("Press {1}+{0} to submit this form","s",opt_data.accessKey)) + '"><span class="aui-icon aui-icon-small aui-iconfont-success">' + soy.$$escapeHtml("Save") + '</span></button><button type="cancel" class="aui-button cancel" accessKey="' + soy.$$escapeHtml("`") + '" title="' + soy.$$escapeHtml(AJS.format("Press {1}+{0} to cancel","`",opt_data.accessKey)) + '"><span class="aui-icon aui-icon-small aui-iconfont-close-dialog">' + soy.$$escapeHtml("Cancel") + '</span></button></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.IssueEditor.Fields.saveOptions.soyTemplateName = 'JIRA.Templates.IssueEditor.Fields.saveOptions';
}


JIRA.Templates.IssueEditor.Fields.saveButtons = function(opt_data, opt_ignored) {
  return '<div class="save-options show-button-bar"><button type="submit" class="aui-button aui-button-light submit" accessKey="' + soy.$$escapeHtml("s") + '" title="' + soy.$$escapeHtml(AJS.format("Press {1}+{0} to submit this form","s",opt_data.accessKey)) + '">' + soy.$$escapeHtml("Save") + '</button><button type="cancel" class="aui-button aui-button-link cancel" accessKey="' + soy.$$escapeHtml("`") + '" title="' + soy.$$escapeHtml(AJS.format("Press {1}+{0} to cancel","`",opt_data.accessKey)) + '">' + soy.$$escapeHtml("Cancel") + '</button></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.IssueEditor.Fields.saveButtons.soyTemplateName = 'JIRA.Templates.IssueEditor.Fields.saveButtons';
}


JIRA.Templates.IssueEditor.Fields.modalField = function(opt_data, opt_ignored) {
  return '<div class="aui-dialog-content"><h2 class="dialog-title">' + soy.$$escapeHtml(AJS.format("Edit {0} for {1}",opt_data.field.label,opt_data.issue.key)) + '</h2><form action="" class="aui" method="post"><div class="form-body">' + soy.$$filterNoAutoescape(opt_data.field.editHtml) + '</div><div class="buttons-container form-footer"><div class="buttons"><input class="button" type="submit" value="' + soy.$$escapeHtml("Submit") + '"/><a class="cancel" href="#">' + soy.$$escapeHtml("Cancel") + '</a></div></div></form></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.IssueEditor.Fields.modalField.soyTemplateName = 'JIRA.Templates.IssueEditor.Fields.modalField';
}


JIRA.Templates.IssueEditor.Fields.modalFieldGeneralErrors = function(opt_data, opt_ignored) {
  var output = '<div class="error">';
  if (opt_data.messages.length == 1) {
    output += soy.$$escapeHtml(opt_data.messages[0]);
  } else if (opt_data.messages.length > 0) {
    output += '<ul>';
    var messageList85 = opt_data.messages;
    var messageListLen85 = messageList85.length;
    for (var messageIndex85 = 0; messageIndex85 < messageListLen85; messageIndex85++) {
      var messageData85 = messageList85[messageIndex85];
      output += '<li>' + soy.$$escapeHtml(messageData85) + '</li>';
    }
    output += '</ul>';
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.IssueEditor.Fields.modalFieldGeneralErrors.soyTemplateName = 'JIRA.Templates.IssueEditor.Fields.modalFieldGeneralErrors';
}


JIRA.Templates.IssueEditor.Fields.errorsLoading = function(opt_data, opt_ignored) {
  var output = '' + ((opt_data.isTimeout) ? soy.$$escapeHtml("The JIRA server could not be contacted. This may be a temporary glitch or the server may be down.") : soy.$$escapeHtml("There were errors loading the issue."));
  if (opt_data.errorMessages) {
    output += '<ul>';
    var msgList101 = opt_data.errorMessages;
    var msgListLen101 = msgList101.length;
    for (var msgIndex101 = 0; msgIndex101 < msgListLen101; msgIndex101++) {
      var msgData101 = msgList101[msgIndex101];
      output += '<li>' + soy.$$escapeHtml(msgData101) + '</li>';
    }
    output += '</ul>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.IssueEditor.Fields.errorsLoading.soyTemplateName = 'JIRA.Templates.IssueEditor.Fields.errorsLoading';
}
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/templates/amd-wrapper.js' */
define("jira/components/issueeditor/templates",function(){return JIRA.Templates.IssueEditor.Fields});AJS.namespace("JIRA.Templates.IssueEditor.Fields",null,require("jira/components/issueeditor/templates"));;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/entities/FieldModel.js' */
define("jira/components/issueeditor/entities/field",["require"],function(a){var f=a("jira/components/libs/underscore");var e=a("jira/components/libs/brace");var g=a("jira/util/events");var d=a("jira/components/issueviewer/legacy/issuefieldutil");var i=a("jquery");var c=a("jira/skate");var j=a("jira/components/issueeditor/templates");var b=a("jira/components/issueeditor/eventtypes");var h=a("jira/components/issueviewer/services/darkfeatures");return e.Model.extend({namedEvents:["editingStarted","focusRequested","editingCancelled","save","saveError","savingStarted","saveComplete","saveSuccess","updateRequired","validationError","modelDestroyed"],namedAttributes:["id","initParams","params","editHtml","viewHtml","required","fieldType","editing","saving","error","label","contentId"],initialize:function(){if(this.collection){var k=this;this.collection.on("reset",function(){k.triggerModelDestroyed()})}this.on("change:viewHtml",function(){var l=this.previous("viewHtml");if(l){i.cleanData(l)}});this.onModelDestroyed(function(){var l=this.getViewHtml();if(l){i.cleanData(l)}})},blurEdit:function(){if(this.getEditing()){if(this.isDirty()||this.hasValidationError()){this.save()}else{this.cancelEdit()}}},setValidationError:function(m,l,k){this.setSaving(false);this.setError(l);this.edit({ignoreBlur:true});this.triggerSaveError();this.triggerValidationError(m,k)},handleSaveError:function(){this.setSaving(false);this.triggerSaveError()},cancelEdit:function(l){if(!this.cancelLocked){var k=new i.Event(b.BEFORE_INLINE_EDIT_CANCEL);g.trigger(k,[this.getId(),this.getFieldType(),l]);if(!k.isDefaultPrevented()){this.cancelLocked=true;if(this.getEditing()||this.getSaving()){this.setEditing(false);this.setSaving(false);this.unset("params");this.unset("initParams");this.triggerEditingCancelled();this.unset("viewHtml")}delete this.cancelLocked}}},edit:function(k){if(!this.getEditing()){this.setEditing(true);this.triggerEditingStarted(this,k)}else{if(!k||!k.ignoreBlur){this.triggerFocusRequested(this,k)}}},getCurrentParams:function(){this.triggerUpdateRequired();var m={};if(this.getParams()){m=this.getParams()}else{if(this.getInitParams()){m=this.getInitParams()}else{var l=i("<div />").html(this.getEditHtml());this.setInitParams(this._serializeObject(l));m=this.getInitParams()}}var k={};f.each(m,function(o,n){k[n]=o});return k},isEditable:function(){if(this.getEditHtml()){return i(this.getEditHtml()).find("textarea, :text,:radio,:checkbox, select").length!==0}return false},hasValidationError:function(){return !!this.getError()},switchElToEdit:function(k){if(!this.getViewHtml()){this.setViewHtml(k.contents())}k.contents().detach();k.html(j.field({issue:this.toJSON(),accessKey:d.getAccessKeyModifier(),showButtonBar:h.RTE_ENABLED.enabled()&&d.isWikifield(this.getEditHtml())}));k.each(function(){c.init(this)});if(!this.getInitParams()){this.setInitParams(this._serializeObject(k))}this.setEditing(true)},update:function(k){if(this.getEditing()){this.setParams(this._serializeObject(k))}},handleSaveSuccess:function(){this.setSaving(false);this.setEditing(false);this.unset("viewHtml");this.unset("initParams");this.setError(null);this.triggerSaveSuccess()},handleSaveStarted:function(){this.setSaving(true);this.triggerSavingStarted()},save:function(){if(!this.getSaving()){this.triggerUpdateRequired();this.triggerSave(this)}},isDirty:function(){this.triggerUpdateRequired();return this._isDirty(this.getCurrentParams())},_isDirty:function(k){return JSON.stringify(k)!==JSON.stringify(this.getInitParams())},matchesFieldSelector:function(){return d.matchesFieldSelector(this.id)},_serializeObject:function(l){var m={};var k=i(l).find(":input").serializeArray();i.each(k,function(){if(m[this.name]){if(!m[this.name].push){m[this.name]=[m[this.name]]}m[this.name].push(this.value||"")}else{m[this.name]=this.value||""}});return m}},{IS_EDITABLE:function(k){return k.isEditable()}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/entities/FieldCollection.js' */
define("jira/components/issueeditor/entities/fields",["require"],function(b){var a=b("jira/components/libs/underscore");var c=b("jira/components/libs/brace");var d=b("jira/components/issueeditor/entities/field");return c.Collection.extend({model:d,initialize:function(){this.on("editingStarted",this._handleEditingStarted,this)},_handleEditingStarted:function(f,e){e=e||{};if(e.ignoreBlur){return}this.each(function(g){if(f!==g&&g.getEditing()){g.blurEdit()}})},update:function(i,g){var e=this;if(g&&g.changed){var f=g.changed;var j=f.updated?f.updated.fields:[];var h=f.added?f.added.fields:[];a.each(i,function(l){if(a.contains(j,l.id)){var k=e.get(l.id);if(k){if(k.hasValidationError()){delete l.editHtml}k.set(l,{silent:true});e.trigger("updated",k)}else{e.add(l)}}else{if(a.contains(h,l.id)){e.add(l)}}})}else{a.each(i,function(l){var k=e.get(l.id);if(k){if(k.hasValidationError()){delete l.editHtml}k.set(l,{silent:true});e.trigger("updated",k)}else{e.add(l)}})}},cancelEdit:function(){this.each(function(e){e.cancelEdit()})},isDirty:function(){return this.any(function(e){return e.isDirty()})},getDirtyFields:function(){return this.filter(function(e){return e.isDirty()})}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/views/FieldView.js' */
define("jira/components/issueeditor/views/field",["require"],function(c){var b=c("jira/components/issueeditor/cancelreasons");var h=c("jira/util/events");var e=c("jira/components/issueviewer/legacy/issuefieldutil");var j=c("jquery");var a=c("jira/components/libs/marionette-1.4.1/itemview");var g=c("jira/util/events/reasons");var k=c("jira/components/issueeditor/templates");var d=c("jira/components/issueeditor/eventtypes");var f=c("jira/components/issueeditor/analytics/viewissue");var i=c("jira/components/issueviewer/services/darkfeatures");return a.extend({events:{"click .cancel":"onClickCancel",keyup:"onKeyCancel","click .submit":"onSubmit",click:"onEdit",mousedown:"saveSelectedText","submit form":"onSubmit",'keydown select[multiple="multiple"]':"_enterToSubmitMultiSelect","keypress select":"_enterToSubmitSelect","beforeBlurInput *":"_preventBlurByEsc"},initialize:function(m){this.model.on("validationError",this.handleValidationError,this);this.model.on("editingStarted",this.switchToEdit,this);this.model.on("focusRequested",this.focus,this);this.model.on("editingCancelled",this.switchToRead,this);this.model.on("saveError",this.handleSaveError,this);this.model.on("updateRequired",this.updateModel,this);this.model.on("savingStarted",this.handleSavingStarted,this);this.model.on("modelDestroyed",this.destroy,this);this.decorate();this.issueEventBus=m.issueEventBus;this.issueEventBus.on("panelRendered",this.handlePanelRendered,this);this.model.setFieldType(this.$el.data("fieldtypecompletekey"));this._editDelay=0;var l=this;h.bind(d.INLINE_EDIT_BLURRED,function(o,n){if(n===l.model.getId()){l._onPossibleBlur()}});h.bind(d.INLINE_EDIT_REQUESTED,function(o,n){if(n!==l.model.getId()&&l._editDelay!==0){clearTimeout(l._editDelay);l._editDelay=0}})},destroy:function(){this.issueEventBus.off("panelRendered",this.handlePanelRendered)},decorate:function(){if(this.model.isEditable()&&!this.model.getEditing()){this.$el.addClass("editable-field inactive");this.$el.append('<span class="overlay-icon aui-icon aui-icon-small aui-iconfont-edit" />');this._addToolTip()}},getEditElements:function(){return this.$el.find(".inline-edit-fields")},_addToolTip:function(){this.$el.attr("title","Click to edit");j("a:not([title])",this.$el).attr("title","Follow link")},_removeToolTip:function(){this.$el.removeAttr("title")},_stealAccessKeys:function(){j("[accessKey='"+"s"+"']").attr("accessKey","_s");j("[accessKey='"+"`"+"']").attr("accessKey","_x")},_returnAccessKeys:function(){j("[accessKey=_s]").attr("accessKey","s");j("[accessKey=_x]").attr("accessKey","`")},_handleEditingStarted:function(l){var m=this.$el.find(".field-tools");h.trigger(d.NEW_CONTENT_ADDED,[this.$el,g.inlineEditStarted]);h.trigger(d.INLINE_EDIT_STARTED,[this.model.getId(),this.model.getFieldType(),this.getEditElements(),this.$el]);this.$el.find(".textarea").css("height",Math.max(this._originalHeight,60)).expandOnInput(window.innerHeight-j("#stalker").height()-100);if(l){this.$el.find(":input:visible:first").focus()}if(!this.$el.find(".error").size()){this.$el.find("select.aui-ss-select").each(function(){var n=j(this);if(n.data("static-suggestions")){n.trigger("showSuggestions")}})}this.$el.find(".save-options").attr("tabindex",1).prepend(m)},handleValidationError:function(m,l){this.$el.html(k.field({issue:{id:this.model.id,editHtml:m},accessKey:e.getAccessKeyModifier(),showButtonBar:i.RTE_ENABLED.enabled()&&e.isWikifield(m)}));this.$el.find(".error").addClass("inline-edit-error").attr("data-field",this.model.id);this._handleEditingStarted(l)},handlePanelRendered:function(l,m){var n=j(e.getFieldSelector(this.model.id),m);if(n.length===1){this.$el=n;this.el=this.$el[0];this.decorate();this.delegateEvents()}},handleSaveError:function(){this.$el.find(":input").removeAttr("disabled").trigger("enable");this.$el.removeClass("saving saving-"+this.model.id)},handleSavingStarted:function(){this.$el.find(":input").attr("disabled","disabled").trigger("disable");this.$el.addClass("saving saving-"+this.model.id)},updateModel:function(){this.model.update(this.$el)},reveal:function(){var l=40;this.$el.scrollIntoView({direction:"y",marginBottom:l,marginTop:j("#stalker").outerHeight(true)+l});this.$el.trigger("reveal")},focus:function(){this.reveal();this.$el.find(":input").removeAttr("disabled");if(j(".aui-blanket[aria-hidden='false']").length===0){var l=this.$el.find(":input:visible:first");l.focus();if(!this.$el.hasClass("field-ignore-highlight")){l.select()}}},switchToEdit:function(){this.trigger("editField",{fieldId:this.model.getId()});this._stealAccessKeys();this._removeToolTip();this.$el.removeClass("inactive saving").addClass("active");this._originalHeight=this.$el.height();this.model.switchElToEdit(this.$el);this._handleEditingStarted();this.focus()},switchToRead:function(){this.trigger("editFieldCancel",{fieldId:this.model.getId()});this._addToolTip();this.$el.addClass("inactive").removeClass("active");this.$el.html(this.model.getViewHtml());this.$el.closest("form").unbind("submit",this.onSubmit);this._returnAccessKeys()},onKeyCancel:function(l){if(l.keyCode===27){this.model.cancelEdit(b.escPressed);l.preventDefault()}},onClickCancel:function(l){this.model.cancelEdit();l.preventDefault()},onSubmit:function(m){var l=new j.Event("before-submit");this.$el.find("form").trigger(l);if(!l.isDefaultPrevented()){this.$el.find(":focus").blur();this.issueEventBus.triggerFieldSubmitted();this.model.save();this._returnAccessKeys()}m.preventDefault()},onEdit:function(q){var p=j(q.target).is(".overlay-icon.aui-iconfont-edit");var n=j(q.target).closest("a, .uneditable").length===0&&this.$el.hasClass("inactive");var o=this._getCurrentlySelectedText()===""&&!this._previouslySelectedText;var m=n&&(p||o);if(this._editDelay!==0){f.triggerEditableFieldDoubleClick();clearTimeout(this._editDelay);this._editDelay=0}else{if(m){h.trigger(d.INLINE_EDIT_REQUESTED,[this.model.getId()]);var l=this;if(p){f.triggerEditableFieldClickPencilIcon();j(document).one("click",function(r){if(!r.isDefaultPrevented()){l.model.edit()}})}else{this._editDelay=setTimeout(function(){if(!q.isDefaultPrevented()&&l.$el.hasClass("inactive")&&l._getCurrentlySelectedText()===""){f.triggerEditableFieldSingleClick();l.model.edit()}l._editDelay=0},250)}}}},_onPossibleBlur:function(){if(this.model.getSaving()){return}if(j(".aui-blanket[aria-hidden='false']").length>0){return}this.model.blurEdit()},_preventBlurByEsc:function(l){l.preventDefault()},_getCurrentlySelectedText:function(){if(j(document.activeElement).is(":input")){return""}if(document.selection&&document.selection.createRange){return document.selection.createRange().text||""}if(window.getSelection){return window.getSelection().toString()}return""},_enterToSubmitSelect:function(l){if(!l.isDefaultPrevented()){if(l.which===13){l.preventDefault();j(l.target).closest("form").submit()}}},_enterToSubmitMultiSelect:function(l){if(!l.isDefaultPrevented()){if(l.which===13){j(l.target).blur()}}},saveSelectedText:function(){this._previouslySelectedText=this._getCurrentlySelectedText()}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/views/ModalFieldView.js' */
define("jira/components/issueeditor/views/modalfield",["require"],function(c){var b=c("jira/components/libs/underscore");var a=c("jira/util/events");var e=c("jira/dialog/form-dialog");var f=c("jira/components/libs/marionette-1.4.1/itemview");var d=c("jira/components/issueeditor/templates");return f.extend({errorsTemplate:d.modalFieldGeneralErrors,template:d.modalField,initialize:function(g){b.bindAll(this,"_onHide","_onSubmit","_remove","_showGeneralError","_showValidationError","_updateModel");a.bind("Dialog.hide",this._onHide);this.issueEventBus=g.issueEventBus;this.issueEventBus.on("saveError",this._showGeneralError);this.model.onSaveSuccess(this._remove);this.model.onUpdateRequired(this._updateModel);this.model.onValidationError(this._showValidationError)},_enable:function(){var h=this._getDialog();h.hideFooterLoadingIndicator();var g=h.$popup;g.find(":input").removeAttr("disabled").trigger("enable");g.find(":input:first").focus().select();g.find(":submit").removeAttr("disabled")},_getDialog:function(){if(!this._dialog){this._dialog=new e({id:"modal-field-view",submitHandler:this._onSubmit,content:b.bind(function(g){g(this.template({field:this.model.toJSON(),issue:this.options.issue}))},this)});this._dialog.get$popup().data("field-id",this.model.getId())}return this._dialog},_onHide:function(g,h){if(h===this._getDialog().get$popup()){this._remove()}},_onSubmit:function(i,h){i.preventDefault();this.model.save();h();var g=this._getDialog();g.showFooterLoadingIndicator();g.$popup.find(":input").attr("disabled","disabled").trigger("disable")},close:function(){this._remove()},_remove:function(){var g=this._getDialog();if(g.get$popup().is(":visible")){g.hide()}g.destroy();this.model.cancelEdit();a.unbind("Dialog.hide",this._onHide);this.issueEventBus.off("saveError",this._showGeneralError);this.model.off("saveSuccess",this._remove);this.model.off("updateRequired",this._updateModel);this.model.off("validationError",this._showValidationError)},show:function(){this.model.edit();this._getDialog().show()},_showGeneralError:function(l,h,g){this._enable();var j=this._getDialog().$popup;var m=g&&g.errorCollection;if(m){var i=!b.isEmpty(m.errors);var k=!b.isEmpty(m.errorMessages);if(!i&&k){j.find(".form-body").append(this.errorsTemplate({messages:m.errorMessages}))}}},_showValidationError:function(g){this._enable();this._getDialog().$popup.find(".form-body").html(g)},_updateModel:function(){this.model.update(this._getDialog().$popup)}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/views/LoadingError.js' */
define("jira/components/issueeditor/views/loadingerror",["require"],function(a){var d=a("jira/components/libs/marionette-1.4.1/itemview");var c=a("jira/message");var b=a("jira/components/issueeditor/templates");return d.extend({template:b.errorsLoading,initialize:function(f,e){this.errorMessages=f;this.isTimeout=e},serializeData:function(){return{errorMessages:this.errorMessages,isTimeout:this.isTimeout}},onRender:function(){this.setElement(c.showErrorMsg(this.$el.html(),{closeable:true,timeout:0}))}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/views/SaveError.js' */
define("jira/components/issueeditor/views/saveerror",["require"],function(b){var a=b("jira/components/libs/underscore");var e=b("jira/components/libs/marionette-1.4.1/itemview");var d=b("jira/message");var c=b("jira/components/issueeditor/templates");return e.extend({events:{"simpleClick .issue":"onIssueLinkClick"},template:c.saveErrorMessage,getErrorMessages:function(){var f;var g=[];f=this.options.response.errorCollection;if(f){g=f.errorMessages.concat(a.values(f.errors))}return g},onIssueLinkClick:function(g){var f;f={id:this.options.issueId,key:this.options.issueKey};g.preventDefault();this.trigger("issueLinkClick",f);this.close()},onRender:function(){this.setElement(d.showErrorMsg(this.$el.html(),{closeable:true,timeout:0}))},serializeData:function(){return{errors:this.getErrorMessages(),issueKey:this.options.issueKey}}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/controllers/EditIssueController.js' */
define("jira/components/issueeditor/controllers/editissue",["require"],function(b){var g=b("jira/components/libs/underscore");var f=b("jira/components/libs/brace");var c=b("jira/components/issueeditor/entities/fields");var e=b("jira/components/issueeditor/views/field");var d=b("jira/components/issueviewer/legacy/issuefieldutil");var i=b("jquery");var a=b("jira/message");var h=b("jira/components/issueeditor/templates");return f.Model.extend({namedAttributes:["issueId","issueKey","issueViewContext","fields","issueEventBus"],namedEvents:["save","editField","editFieldCancel"],initialize:function(){g.bindAll(this,"_handleSaveError","_handleSaveSuccess","_handleSavingStarted","cancelUneditedFields","createFieldView","handleFieldUpdate","save");this.set({fields:new c()},{silent:true});this.getFields().bind("add",this.createFieldView).bind("updated",this.handleFieldUpdate).bind("save",this.save);this.getIssueEventBus().onSavingStarted(this._handleSavingStarted);this.getIssueEventBus().onSaveSuccess(this._handleSaveSuccess);this.getIssueEventBus().onSaveError(this._handleSaveError);this.getIssueEventBus().onSave(this.save);this.getIssueEventBus().onSave(this.cancelUneditedFields)},_saveById:function(k){var j=this.getFields().get(k);if(j){j.blurEdit()}},_handleSaveError:function(m,l,k){var j=this;if(k){this.applyErrors(k)}else{g.each(l,function(o){var n=j.getFields().get(o);if(n){n.handleSaveError()}})}},_handleSavingStarted:function(j){this.getFields().each(function(k){if(g.include(j,k.id)){k.handleSaveStarted()}})},handleFieldUpdate:function(k){var j=i(d.getFieldSelector(k.id));if(!j.hasClass("editable-field")){this.createFieldView(k)}},applyErrors:function(m,l){var j=m.errorCollection;if(j&&j.errors){this.getFields().each(function(n){if(j.errors[n.id]){var o=g.find(m.fields,function(p){return p.id===n.id});if(o){n.setValidationError(o.editHtml,j.errors[n.id],l);l=false}}})}if(j.errorMessages&&j.errorMessages.length){var k=h.saveErrorMessage({errors:j.errorMessages,issueKey:this.getIssueKey()});a.showErrorMsg(k,{closeable:true})}},reset:function(){this.getFields().reset()},cancelEdit:function(){this.getFields().each(function(j){j.cancelEdit()})},_handleSaveSuccess:function(l,j,m){var k=this.getFields().filter(function(n){return g.indexOf(m,n.id)>=0});g.each(k,function(n){n.handleSaveSuccess()})},getDirtyEditsInProgress:function(){return g.pluck(this.getFields().filter(function(j){return j.getEditing()&&j.isDirty()}),"id")},getEditsInProgress:function(){return g.pluck(this.getFields().filter(function(j){return j.getEditing()}),"id")},save:function(k,j){var o={};var n=[];var m=[];var l=[k];if(!k){l=this.getFields().filter(function(p){return !p.getSaving()&&p.getEditing()&&p.isDirty()})}else{if(!k.getEditing()||k.getSaving()){return}}g.each(l,function(p){n.push(p.getId());m.push(p.getFieldType()||"");g.extend(o,p.getCurrentParams())});if(n.length>0){this.triggerSave(this.getIssueId(),this.getIssueKey(),n,o,j,m)}},cancelUneditedFields:function(){this.getFields().each(function(j){if(j.getEditing()&&!j.isDirty()&&!j.hasValidationError()){j.cancelEdit()}})},update:function(k,j){if(k.fields){if(j&&j.fieldsInProgress){g.each(k.fields,function(l){if(g.contains(j.fieldsInProgress,l.id)){l.editing=true}})}this.getFields().update(k.fields,j)}if(k.issueId){this.setIssueId(k.issueId)}if(k.issueKey){this.setIssueKey(k.issueKey)}},createFieldView:function(k){var j=i(d.getFieldSelector(k.id),this.getIssueViewContext());if(j.length===1){var m=new e({model:k,el:j,issueEventBus:this.getIssueEventBus()});var l=function(n){var o={issueId:this.getIssueId(),issueKey:this.getIssueKey(),fieldId:k.getId(),fieldType:k.attributes.fieldType};n=g.extend(o,n);return n}.bind(this);m.on("editField",g.bind(function(n){this.trigger("editField",l(n))},this));m.on("editFieldCancel",g.bind(function(n){this.trigger("editFieldCancel",l(n))},this))}}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/controllers/FieldsController.js' */
define("jira/components/issueeditor/controllers/fields",["require"],function(c){var a=c("jira/components/issueeditor/views/loadingerror");var b=c("jira/components/libs/marionette-1.4.1/controller");return b.extend({showError:function(e,d){if(e||d){this.close();this.triggerMethod("before:render");this.view=new a(e,d);this.view.render();this.listenTo(this.view,"close",this.close);this.triggerMethod("render")}},close:function(){if(this.view){this.view.close();this.stopListening(this.view);delete this.view}}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/services/FieldsLoaderService.js' */
define("jira/components/issueeditor/services/fieldsloader",["require"],function(c){var b=c("jira/components/libs/underscore");var e=c("jira/components/issueviewer/legacy/issuefieldutil");var d=c("jquery");var a=c("jira/components/libs/marionette-1.4.1/controller");return a.extend({initialize:function(f){this.recurringPromise=new d.RecurringPromise().sub();this.recurringPromise.done(b.bind(function(g){this.trigger("fieldsLoaded",g)},this)).fail(b.bind(function(g){this.trigger("fieldsError",g)},this));this.contextPath=f.contextPath},load:function(g){var f=this._buildUpdateTask(g);this.recurringPromise.add(f)},cancel:function(){this.recurringPromise.reset()},_getFieldsData:function(i,f){var h=d.ajax({url:this.contextPath+"/secure/AjaxIssueEditAction!default.jspa?decorator=none",headers:{"X-SITEMESH-OFF":true},data:{issueId:i}});var g=h.pipe(function(j){var k=e.transformFieldHtml(j);return{issueId:i,issueKey:f,fields:k.fields}},function(n){var k={};var l;switch(n.status){case 400:l=false;try{var j=JSON.parse(n.responseText)||{};k=j.errorCollection}catch(m){}break;case 401:l=false;k=null;break;default:l=true;k={};break}return{issueId:i,fields:null,errorCollection:k,isTimeout:"timeout"===n.statusText,fatalError:l}});g.abort=function(){h.abort.apply(h,arguments)};return g},_buildUpdateTask:function(h){var i=h.viewIssueData;var f=h.issueEntity;var g=new d.Deferred();i.setPending(f.id,this._getFieldsData(f.id,f.key),function(j){g.resolve(j)},function(j){if(j.fatalError){g.reject(j)}else{g.resolve(j)}});return g.promise()}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/services/IssueSaverService.js' */
define("jira/components/issueeditor/services/issuesaver",["require"],function(c){var b=c("jira/components/libs/underscore");var d=c("jira/components/issueviewer/legacy/issuefieldutil");var a=c("jira/components/libs/marionette-1.4.1/controller");return a.extend({initialize:function(e){this.saveInProgressManager=e.saveInProgressManager;this.model=e.model;this._saveStarted=[];this.saveInProgressManager.onSavingStarted(b.bind(function(f,g){this._saveStarted.push((new Date()).getTime());this.trigger("saveStarted",f,g)},this));this.saveInProgressManager.onSaveSuccess(b.bind(function(i,f,j,g,h){if(g&&g.fields){d.transformFieldHtml(g)}this.trigger("save",{issueId:i,issueKey:f,savedFieldIds:j,savedFieldTypes:h,response:g,shouldSkipSaveIssueSuccessHandler:this._shouldSkipSaveIssueSuccessHandler,duration:(new Date()).getTime()-this._saveStarted.shift()})},this));this.saveInProgressManager.onSaveError(b.bind(function(i,f,h,g){if(g&&g.fields){d.transformFieldHtml(g)}this.trigger("error",{issueId:i,issueKey:f,attemptedSavedIds:h,response:g,duration:(new Date()).getTime()-this._saveStarted.shift()})},this))},setSkipSaveIssueSuccessHandler:function(e){this._shouldSkipSaveIssueSuccessHandler=e},save:function(j,e,h,i,f,g){this.saveInProgressManager.saveIssue(j,e,h,i,f,g)}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/services/SaveInProgressManager.js' */
define("jira/components/issueeditor/services/saveinprogressmanager",["require"],function(e){var i=e("jira/components/libs/underscore");var h=e("jira/components/libs/brace");var d=window.AJS.contextPath();var k=e("jira/util/events");var g=e("jira/components/issueviewer/legacy/issuefieldutil");var f=e("jira/dialog/form-dialog");var l=e("jquery");var b=e("jira/message");var a=e("jira/ajs/ajax/smart-ajax");var j=e("jira/components/issueeditor/eventtypes");var c=e("jira/components/utils/ajshelper");return h.Model.extend({namedAttributes:["savesInProgress"],namedEvents:["beforeSaving","savingStarted","saveSuccess","saveError"],initialize:function(){this.setSavesInProgress([])},saveIssue:function(t,n,p,o,u,r){this.triggerBeforeSaving();var v=this;var m;var q;q=i.extend(o,{issueId:t,atl_token:atl_token(),singleFieldEdit:true,fieldsToForcePresent:p});var s=i.extend({type:"POST",url:d+"/secure/AjaxIssueAction.jspa?decorator=none",headers:{"X-SITEMESH-OFF":true},error:function(w){v._handleSaveError(t,n,p,w)},success:function(A,y,z,w){var x=w.data;if(typeof x==="string"){v._handleHtmlResponse(t,n,p,x,r)}else{g.transformFieldHtml(x);v.triggerSaveSuccess(t,n,p,x,r)}},complete:function(){v.removeSaveInProgress(m);k.trigger(j.INLINE_EDIT_SAVE_COMPLETE)},data:q},u);m=a.makeRequest(s);this.addSaveInProgress(m);this.triggerSavingStarted(t,p,o)},hasSavesInProgress:function(){return this.getSavesInProgress().length>0},removeSaveInProgress:function(m){this.setSavesInProgress(i.without(this.getSavesInProgress(),m))},addSaveInProgress:function(m){var n=this.getSavesInProgress();n.push(m);this.setSavesInProgress(n)},_handleHtmlResponse:function(t,o,p,m,r){var u=this;var n=l(c.extractBodyFromResponse(m));var q=n.find("#atl_token").val();if(q){l("#atlassian-token").attr("content",q)}var s=new f({offsetTarget:"body",content:n});this.triggerSaveError(t,o,p);s._handleServerSuccess=function(v){s.hide();var w=u._parseResponse(v);if(w){g.transformFieldHtml(w);u.triggerSaveSuccess(t,o,p,w,r)}};s._handleServerError=function(w){s.hide();var v=u._parseResponse(w.responseText);if(v){g.transformFieldHtml(v);u.triggerSaveError(t,o,p,v)}};s.show()},_handleSaveError:function(q,m,n,p){var o=this._parseResponse(p.responseText);if(o){g.transformFieldHtml(o);this.triggerSaveError(q,m,n,o)}},_parseResponse:function(m){try{return JSON.parse(m)}catch(n){this._showFatalErrorMessage();return null}},_showFatalErrorMessage:function(){var m="<p>"+"Communications Breakdown"+"</p><p>"+"Close this dialog and press refresh in your browser"+"</p>";b.showErrorMsg(m,{closeable:true})}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/services/UnloadInterceptor.js' */
define("jira/components/issueeditor/services/unloadinterceptor",["require"],function(c){var b=c("jira/components/libs/underscore");var a=c("jira/components/libs/marionette-1.4.1/controller");return a.extend({initialize:function(){this._afterEventHandlers=[];this.originalBeforeUnload=window.onbeforeunload;window.onbeforeunload=b.bind(this.onBeforeUnload,this)},addAfterEvent:function(d){this._afterEventHandlers.push(d)},removeAfterEvent:function(d){this._afterEventHandlers=b.without(this._afterEventHandlers,d)},onBeforeUnload:function(){var d;var e=arguments;if(b.isFunction(this.originalBeforeUnload)){d=this.originalBeforeUnload.apply(window,e)}if(!d){d=b.reduce(this._afterEventHandlers,function(f,g){if(f){return f}return g.apply(window,e)},d)}return d}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/InlineEditUtils.js' */
define("jira/components/issueeditor/inlineeditutils",["require"],function(d){var b=d("jira/util/events");var c=d("jira/components/issueeditor/eventtypes");var a={};a.BLUR_FOCUS_TIMEOUT=50;a.BlurTriggers={Default:function(h,l){l=l.nextAll(".save-options").andSelf();var k=":input, a[href], [tabindex]";var j;var i=e(l);var g={focus:function(){if(!i){i=true;b.trigger(c.INLINE_EDIT_FOCUSED,[h])}},blur:function(){if(j){clearTimeout(j)}j=setTimeout(f,a.BLUR_FOCUS_TIMEOUT)}};l.attr("tabindex",1).bind(g).delegate(k,g);function f(){if(!e(l)){i=false;b.trigger(c.INLINE_EDIT_BLURRED,[h])}}}};function e(g){var f=document.activeElement;return g.find(f).length>0||g.filter(f).length>0}a.BlurTriggerMapping={system:{summary:a.BlurTriggers.Default,priority:a.BlurTriggers.Default,issuetype:a.BlurTriggers.Default,components:a.BlurTriggers.Default,versions:a.BlurTriggers.Default,fixVersions:a.BlurTriggers.Default,assignee:a.BlurTriggers.Default,reporter:a.BlurTriggers.Default,environment:a.BlurTriggers.Default,description:a.BlurTriggers.Default,labels:a.BlurTriggers.Default,duedate:a.BlurTriggers.Default},custom:{"com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect":a.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:datepicker":a.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:datetime":a.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:float":a.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:grouppicker":a.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:labels":a.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes":a.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:multigrouppicker":a.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:multiselect":a.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker":a.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:multiversion":a.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:project":a.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:select":a.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons":a.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:textarea":a.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:textfield":a.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:url":a.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:userpicker":a.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:version":a.BlurTriggers.Default}};b.bind(c.INLINE_EDIT_STARTED,function(j,g,f,k){var i;if(f){i=a.BlurTriggerMapping.custom[f];if(!i){var h=f.replace(/.+:(.+)/,"$1");i=a.BlurTriggerMapping.custom[h]}}else{i=a.BlurTriggerMapping.system[g]}if(i){i(g,k)}});return a});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/eventtypes.js' */
define("jira/components/issueeditor/eventtypes",["require"],function(a){var b=a("jira/components/issueviewer/eventtypes");b.INLINE_EDIT_SAVE_COMPLETE="inlineEditSaveComplete";b.INLINE_EDIT_STARTED="inlineEditStarted";b.BEFORE_INLINE_EDIT_CANCEL="inlineEditCancelled";b.INLINE_EDIT_BLURRED="inlineEditBlurred";b.INLINE_EDIT_FOCUSED="inlineEditFocused";b.INLINE_EDIT_REQUESTED="inlineEditRequested";b.LOCK_PANEL_REFRESHING="lockPanelRefreshing";b.UNLOCK_PANEL_REFRESHING="unlockPanelRefreshing";b.REFRESH_ISSUE_PAGE="refreshIssuePage";return b});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/cancelreasons.js' */
define("jira/components/issueeditor/cancelreasons",function(){return{escPressed:"escPressed"}});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/analytics/ViewIssue.js' */
define("jira/components/issueeditor/analytics/viewissue",["require"],function(b){var a=b("jira/components/utils/ajshelper");return{triggerEditableFieldDoubleClick:function(){a.trigger("analyticsEvent",{name:"jira.viewissue.editable-field.double-click"})},triggerEditableFieldSingleClick:function(){a.trigger("analyticsEvent",{name:"jira.viewissue.editable-field.single-click"})},triggerEditableFieldClickPencilIcon:function(){a.trigger("analyticsEvent",{name:"jira.viewissue.editable-field.click.pencil-icon"})}}});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/namespace.js' */
AJS.namespace("JIRA.Components.IssueEditor",null,require("jira/components/issueeditor"));AJS.namespace("JIRA.Components.IssueEditor.AppModule",null,require("jira/components/issueeditor/appmodule"));AJS.namespace("JIRA.Components.IssueEditor.NoInlineAppModule",null,require("jira/components/issueeditor/noinlineappmodule"));AJS.namespace("JIRA.Components.IssueEditor.Controllers.EditIssue",null,require("jira/components/issueeditor/controllers/editissue"));AJS.namespace("JIRA.Components.IssueEditor.Controllers.Fields",null,require("jira/components/issueeditor/controllers/fields"));AJS.namespace("JIRA.Components.IssueEditor.Collections.Fields",null,require("jira/components/issueeditor/entities/fields"));AJS.namespace("JIRA.Components.IssueEditor.Models.Field",null,require("jira/components/issueeditor/entities/field"));AJS.namespace("JIRA.Components.IssueEditor.Services.FieldsLoader",null,require("jira/components/issueeditor/services/fieldsloader"));AJS.namespace("JIRA.Components.IssueEditor.Services.IssueSaver",null,require("jira/components/issueeditor/services/issuesaver"));AJS.namespace("JIRA.Components.IssueEditor.Services.SaveInProgressManager",null,require("jira/components/issueeditor/services/saveinprogressmanager"));AJS.namespace("JIRA.Components.IssueEditor.Services.UnloadInterceptor",null,require("jira/components/issueeditor/services/unloadinterceptor"));AJS.namespace("JIRA.Components.IssueEditor.Views.FieldView",null,require("jira/components/issueeditor/views/field"));AJS.namespace("JIRA.Components.IssueEditor.Views.LoadingError",null,require("jira/components/issueeditor/views/loadingerror"));AJS.namespace("JIRA.Components.IssueEditor.Views.ModalFieldView",null,require("jira/components/issueeditor/views/modalfield"));AJS.namespace("JIRA.Components.IssueEditor.Views.SaveError",null,require("jira/components/issueeditor/views/saveerror"));AJS.namespace("JIRA.Components.IssueEditor.InlineEditUtils",null,require("jira/components/issueeditor/inlineeditutils"));AJS.namespace("JIRA.Issues.InlineEdit.BlurTriggers",null,require("jira/components/issueeditor/inlineeditutils").BlurTriggers);AJS.namespace("JIRA.Issues.InlineEdit.BlurTriggerMapping",null,require("jira/components/issueeditor/inlineeditutils").BlurTriggerMapping);AJS.namespace("JIRA.Issues.CANCEL_REASON",null,require("jira/components/issueeditor/cancelreasons"));;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:inlineeditparams', location = 'util/InlineEditParams.js' */
define("jira/components/util/inlineeditparams",["require"],function(b){var c=b("wrm/data");var a=null;function d(){var e=c.claim("com.atlassian.jira.jira-issue-nav-components:inline-edit-enabled");a=e===undefined?true:Boolean(e)}return{isEnabled:function(){if(a===null){d()}return a}}});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issuecomponentresolver', location = 'issuecomponentresolver/IssueComponentResolver.js' */
define("jira/components/issuecomponentresolver",["require"],function(c){var b=c("jira/components/util/inlineeditparams");var a=c("jira/components/issueviewer");var d=c("jira/components/issueeditor");return{resolve:function(){return b.isEnabled()?d:a}}});;
;
/* module-key = 'com.atlassian.plugin.jslibs:marionette-2.1.0-factory', location = 'factories/marionette/2.1.0/marionette-2.1.0-factory.js' */
(function(i){define("atlassian/libs/factories/marionette-2.1.0",function(){return function(n,o){var k={_:n,Backbone:o};i.call(k);return k.Marionette.noConflict()}})})(function(){var i=this,n=function(i,f,d){function j(a,b){var c=Error(a);c.name=b||"Error";throw c;}var n=f.ChildViewContainer,k=function(a){this._views={};this._indexByModel={};this._indexByCustom={};this._updateLength();d.each(a,this.add,this)};d.extend(k.prototype,{add:function(a,b){var c=a.cid;this._views[c]=a;a.model&&(this._indexByModel[a.model.cid]=
c);b&&(this._indexByCustom[b]=c);this._updateLength();return this},findByModel:function(a){return this.findByModelCid(a.cid)},findByModelCid:function(a){return this.findByCid(this._indexByModel[a])},findByCustom:function(a){return this.findByCid(this._indexByCustom[a])},findByIndex:function(a){return d.values(this._views)[a]},findByCid:function(a){return this._views[a]},remove:function(a){var b=a.cid;a.model&&delete this._indexByModel[a.model.cid];d.any(this._indexByCustom,function(a,d){if(a===b)return delete this._indexByCustom[d],
!0},this);delete this._views[b];this._updateLength();return this},call:function(a){this.apply(a,d.tail(arguments))},apply:function(a,b){d.each(this._views,function(c){d.isFunction(c[a])&&c[a].apply(c,b||[])})},_updateLength:function(){this.length=d.size(this._views)}});d.each("forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck".split(" "),function(a){k.prototype[a]=function(){var b=[d.values(this._views)].concat(d.toArray(arguments));
return d[a].apply(d,b)}});f.ChildViewContainer=k;f.ChildViewContainer.VERSION="0.1.4";f.ChildViewContainer.noConflict=function(){f.ChildViewContainer=n;return this};var o=f.Wreqr,h=f.Wreqr={};f.Wreqr.VERSION="1.3.1";f.Wreqr.noConflict=function(){f.Wreqr=o;return this};var g=function(a){this.options=a;this._wreqrHandlers={};d.isFunction(this.initialize)&&this.initialize(a)};g.extend=f.Model.extend;d.extend(g.prototype,f.Events,{setHandlers:function(a){d.each(a,function(a,c){var e=null;d.isObject(a)&&
!d.isFunction(a)&&(e=a.context,a=a.callback);this.setHandler(c,a,e)},this)},setHandler:function(a,b,c){this._wreqrHandlers[a]={callback:b,context:c};this.trigger("handler:add",a,b,c)},hasHandler:function(a){return!!this._wreqrHandlers[a]},getHandler:function(a){var b=this._wreqrHandlers[a];if(b)return function(){var a=Array.prototype.slice.apply(arguments);return b.callback.apply(b.context,a)}},removeHandler:function(a){delete this._wreqrHandlers[a]},removeAllHandlers:function(){this._wreqrHandlers=
{}}});h.Handlers=g;g=function(a){this.options=a;this._commands={};d.isFunction(this.initialize)&&this.initialize(a)};d.extend(g.prototype,f.Events,{getCommands:function(a){var b=this._commands[a];b||(b={command:a,instances:[]},this._commands[a]=b);return b},addCommand:function(a,b){this.getCommands(a).instances.push(b)},clearCommands:function(a){this.getCommands(a).instances=[]}});h.CommandStorage=g;g=h.Handlers.extend({storageType:h.CommandStorage,constructor:function(a){this.options=a||{};this._initializeStorage(this.options);
this.on("handler:add",this._executeCommands,this);var b=Array.prototype.slice.call(arguments);h.Handlers.prototype.constructor.apply(this,b)},execute:function(a,b){a=arguments[0];b=Array.prototype.slice.call(arguments,1);this.hasHandler(a)?this.getHandler(a).apply(this,b):this.storage.addCommand(a,b)},_executeCommands:function(a,b,c){var e=this.storage.getCommands(a);d.each(e.instances,function(a){b.apply(c,a)});this.storage.clearCommands(a)},_initializeStorage:function(a){a=a.storageType||this.storageType;
this.storage=d.isFunction(a)?new a:a}});h.Commands=g;h.RequestResponse=h.Handlers.extend({request:function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1);if(this.hasHandler(a))return this.getHandler(a).apply(this,b)}});g=function(){};g.extend=f.Model.extend;d.extend(g.prototype,f.Events);h.EventAggregator=g;g=function(a){this.vent=new h.EventAggregator;this.reqres=new h.RequestResponse;this.commands=new h.Commands;this.channelName=a};d.extend(g.prototype,{reset:function(){this.vent.off();
this.vent.stopListening();this.reqres.removeAllHandlers();this.commands.removeAllHandlers();return this},connectEvents:function(a,b){this._connect("vent",a,b);return this},connectCommands:function(a,b){this._connect("commands",a,b);return this},connectRequests:function(a,b){this._connect("reqres",a,b);return this},_connect:function(a,b,c){if(b){var c=c||this,e="vent"===a?"on":"setHandler";d.each(b,function(b,f){this[a][e](f,d.bind(b,c))},this)}}});h.Channel=g;g=function(){this._channels={};this.vent=
{};this.commands={};this.reqres={};this._proxyMethods()};d.extend(g.prototype,{channel:function(a){if(!a)throw Error("Channel must receive a name");return this._getChannel(a)},_getChannel:function(a){var b=this._channels[a];b||(b=new h.Channel(a),this._channels[a]=b);return b},_proxyMethods:function(){d.each(["vent","commands","reqres"],function(a){d.each(t[a],function(b){var c=this;this[a][b]=function(d){var e=c._getChannel(d)[a],f=Array.prototype.slice.call(arguments,1);return e[b].apply(e,f)}},
this)},this)}});var t={vent:"on off trigger once stopListening listenTo listenToOnce".split(" "),commands:["execute","setHandler","setHandlers","removeHandler","removeAllHandlers"],reqres:["request","setHandler","setHandlers","removeHandler","removeAllHandlers"]},g=new g;h.radio=g;var u=f.ChildViewContainer.noConflict(),v=f.Wreqr.noConflict(),w=i.Marionette,e=f.Marionette={};e.VERSION="2.1.0";e.noConflict=function(){i.Marionette=w;return this};f.Marionette=e;e.Deferred=f.$.Deferred;var l=Array.prototype.slice;
e.extend=f.Model.extend;e.getOption=function(a,b){if(a&&b)return a.options&&void 0!==a.options[b]?a.options[b]:a[b]};e.proxyGetOption=function(a){return e.getOption(this,a)};e.normalizeMethods=function(a){var b={};d.each(a,function(a,e){d.isFunction(a)||(a=this[a]);a&&(b[e]=a)},this);return b};e.normalizeUIKeys=function(a,b){if("undefined"!==typeof a)return d.each(d.keys(a),function(c){var d=/@ui\.[a-zA-Z_$0-9]*/g;c.match(d)&&(a[c.replace(d,function(a){return b[a.slice(4)]})]=a[c],delete a[c])}),
a};e.actAsCollection=function(a,b){d.each("forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck".split(" "),function(c){a[c]=function(){var a=[d.values(d.result(this,b))].concat(d.toArray(arguments));return d[c].apply(d,a)}})};var x=function(a,b,c){return c.toUpperCase()},y=/(^|:)(\w)/gi;e.triggerMethod=function(a){var b=this["on"+a.replace(y,x)],c;d.isFunction(b)&&(c=b.apply(this,d.tail(arguments)));d.isFunction(this.trigger)&&
this.trigger.apply(this,arguments);return c};var z=document.documentElement,q=function(a){a._isShown&&a._isRendered&&f.$.contains(z,a.el)&&d.isFunction(a.triggerMethod)&&a.triggerMethod("dom:refresh")};e.MonitorDOMRefresh=function(a){a.listenTo(a,"show",function(){a._isShown=!0;q(a)});a.listenTo(a,"render",function(){a._isRendered=!0;q(a)})};var A=function(a,b,c,e){e=e.split(/\s+/);d.each(e,function(d){var e=a[d];e||j('Method "'+d+'" was configured as an event handler, but does not exist.');a.listenTo(b,
c,e)})},B=function(a,b,c,d){a.listenTo(b,c,d)},C=function(a,b,c,e){e=e.split(/\s+/);d.each(e,function(d){a.stopListening(b,c,a[d])})},D=function(a,b,c,d){a.stopListening(b,c,d)},r=function(a,b,c,e,f){b&&c&&(d.isFunction(c)&&(c=c.call(a)),d.each(c,function(c,g){d.isFunction(c)?e(a,b,g,c):f(a,b,g,c)}))};e.bindEntityEvents=function(a,b,c){r(a,b,c,B,A)};e.unbindEntityEvents=function(a,b,c){r(a,b,c,D,C)};e.proxyBindEntityEvents=function(a,b){return e.bindEntityEvents(this,a,b)};e.proxyUnbindEntityEvents=
function(a,b){return e.unbindEntityEvents(this,a,b)};e.Callbacks=function(){this._deferred=e.Deferred();this._callbacks=[]};d.extend(e.Callbacks.prototype,{add:function(a,b){var c=d.result(this._deferred,"promise");this._callbacks.push({cb:a,ctx:b});c.then(function(c){b&&(c.context=b);a.call(c.context,c.options)})},run:function(a,b){this._deferred.resolve({options:a,context:b})},reset:function(){var a=this._callbacks;this._deferred=e.Deferred();this._callbacks=[];d.each(a,function(a){this.add(a.cb,
a.ctx)},this)}});e.Controller=function(a){this.options=a||{};d.isFunction(this.initialize)&&this.initialize(this.options)};e.Controller.extend=e.extend;d.extend(e.Controller.prototype,f.Events,{destroy:function(){var a=l.call(arguments);this.triggerMethod.apply(this,["before:destroy"].concat(a));this.triggerMethod.apply(this,["destroy"].concat(a));this.stopListening();this.off();return this},triggerMethod:e.triggerMethod,getOption:e.proxyGetOption});e.Object=function(a){this.options=d.extend({},d.result(this,
"options"),a);this.initialize(this.options)};e.Object.extend=e.extend;d.extend(e.Object.prototype,{initialize:function(){},destroy:function(){this.triggerMethod("before:destroy");this.triggerMethod("destroy");this.stopListening()},triggerMethod:e.triggerMethod,getOption:e.proxyGetOption,bindEntityEvents:e.proxyBindEntityEvents,unbindEntityEvents:e.proxyUnbindEntityEvents});d.extend(e.Object.prototype,f.Events);e.Region=function(a){this.options=a||{};this.el=this.getOption("el");(this.el=this.el instanceof
f.$?this.el[0]:this.el)||j('An "el" must be specified for a region.',"NoElError");this.$el=this.getEl(this.el);if(this.initialize){var b=l.apply(arguments);this.initialize.apply(this,b)}};d.extend(e.Region,{buildRegion:function(a,b){if(d.isString(a))return this._buildRegionFromSelector(a,b);if(a.selector||a.el||a.regionClass)return this._buildRegionFromObject(a,b);if(d.isFunction(a))return this._buildRegionFromRegionClass(a);j("Improper region configuration type. Please refer to http://marionettejs.com/docs/marionette.region.html#region-configuration-types")},
_buildRegionFromSelector:function(a,b){return new b({el:a})},_buildRegionFromObject:function(a,b){var c=a.regionClass||b,e=d.omit(a,"selector","regionClass");a.selector&&!e.el&&(e.el=a.selector);c=new c(e);a.parentEl&&(c.getEl=function(b){if(d.isObject(b))return f.$(b);var c=a.parentEl;d.isFunction(c)&&(c=c());return c.find(b)});return c},_buildRegionFromRegionClass:function(a){return new a}});d.extend(e.Region.prototype,f.Events,{show:function(a,b){this._ensureElement();var c=b||{},e=a!==this.currentView,
f=!!c.forceShow,g=!!this.currentView;!c.preventDestroy&&e&&this.empty();if(e||f)a.once("destroy",d.bind(this.empty,this)),a.render(),g&&this.triggerMethod("before:swap",a),this.triggerMethod("before:show",a),d.isFunction(a.triggerMethod)?a.triggerMethod("before:show"):this.triggerMethod.call(a,"before:show"),this.attachHtml(a),this.currentView=a,g&&this.triggerMethod("swap",a),this.triggerMethod("show",a),d.isFunction(a.triggerMethod)?a.triggerMethod("show"):this.triggerMethod.call(a,"show");return this},
_ensureElement:function(){d.isObject(this.el)||(this.$el=this.getEl(this.el),this.el=this.$el[0]);(!this.$el||0===this.$el.length)&&j('An "el" '+this.$el.selector+" must exist in DOM")},getEl:function(a){return f.$(a)},attachHtml:function(a){this.el.innerHTML="";this.el.appendChild(a.el)},empty:function(){var a=this.currentView;if(a)return this.triggerMethod("before:empty",a),this._destroyView(),this.triggerMethod("empty",a),delete this.currentView,this},_destroyView:function(){var a=this.currentView;
a.destroy&&!a.isDestroyed?a.destroy():a.remove&&a.remove()},attachView:function(a){this.currentView=a;return this},hasView:function(){return!!this.currentView},reset:function(){this.empty();this.$el&&(this.el=this.$el.selector);delete this.$el;return this},getOption:e.proxyGetOption,triggerMethod:e.triggerMethod});e.Region.extend=e.extend;g=e.Controller.extend({constructor:function(a){this._regions={};e.Controller.call(this,a)},addRegions:function(a,b){d.isFunction(a)&&(a=a.apply(this,arguments));
var c={};d.each(a,function(a,e){d.isString(a)&&(a={selector:a});a.selector&&(a=d.defaults({},a,b));var f=this.addRegion(e,a);c[e]=f},this);return c},addRegion:function(a,b){var c;c=d.isObject(b);var p=d.isString(b),f=!!b.selector;c=p||c&&f?e.Region.buildRegion(b,e.Region):d.isFunction(b)?e.Region.buildRegion(b,e.Region):b;this.triggerMethod("before:add:region",a,c);this._store(a,c);this.triggerMethod("add:region",a,c);return c},get:function(a){return this._regions[a]},getRegions:function(){return d.clone(this._regions)},
removeRegion:function(a){var b=this._regions[a];this._remove(a,b);return b},removeRegions:function(){var a=this.getRegions();d.each(this._regions,function(a,c){this._remove(c,a)},this);return a},emptyRegions:function(){var a=this.getRegions();d.each(a,function(a){a.empty()},this);return a},destroy:function(){this.removeRegions();return e.Controller.prototype.destroy.apply(this,arguments)},_store:function(a,b){this._regions[a]=b;this._setLength()},_remove:function(a,b){this.triggerMethod("before:remove:region",
a,b);b.empty();b.stopListening();delete this._regions[a];this._setLength();this.triggerMethod("remove:region",a,b)},_setLength:function(){this.length=d.size(this._regions)}});e.actAsCollection(g.prototype,"_regions");e.RegionManager=g;e.TemplateCache=function(a){this.templateId=a};d.extend(e.TemplateCache,{templateCaches:{},get:function(a){var b=this.templateCaches[a];b||(b=new e.TemplateCache(a),this.templateCaches[a]=b);return b.load()},clear:function(){var a,b=l.call(arguments),c=b.length;if(0<
c)for(a=0;a<c;a++)delete this.templateCaches[b[a]];else this.templateCaches={}}});d.extend(e.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var a=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(a)},loadTemplate:function(a){var b=f.$(a).html();(!b||0===b.length)&&j('Could not find template: "'+a+'"',"NoTemplateError");return b},compileTemplate:function(a){return d.template(a)}});e.Renderer={render:function(a,b){a||
j("Cannot render the template since its false, null or undefined.","TemplateNotFoundError");return("function"===typeof a?a:e.TemplateCache.get(a))(b)}};e.View=f.View.extend({constructor:function(a){d.bindAll(this,"render");this.options=d.extend({},d.result(this,"options"),d.isFunction(a)?a.call(this):a);this.events=this.normalizeUIKeys(d.result(this,"events"));d.isObject(this.behaviors)&&new e.Behaviors(this);f.View.apply(this,arguments);e.MonitorDOMRefresh(this);this.listenTo(this,"show",this.onShowCalled)},
getTemplate:function(){return this.getOption("template")},serializeModel:function(a){return a.toJSON.apply(a,l.call(arguments,1))},mixinTemplateHelpers:function(a){var a=a||{},b=this.getOption("templateHelpers");d.isFunction(b)&&(b=b.call(this));return d.extend(a,b)},normalizeUIKeys:function(a){var b=d.result(this,"ui"),c=d.result(this,"_uiBindings");return e.normalizeUIKeys(a,c||b)},configureTriggers:function(){if(this.triggers){var a={},b=this.normalizeUIKeys(d.result(this,"triggers"));d.each(b,
function(b,e){var f=d.isObject(b),g=f?b.event:b;a[e]=function(a){if(a){var d=a.preventDefault,e=a.stopPropagation,p=f?b.stopPropagation:e;(f?b.preventDefault:d)&&d&&d.apply(a);p&&e&&e.apply(a)}this.triggerMethod(g,{view:this,model:this.model,collection:this.collection})}},this);return a}},delegateEvents:function(a){this._delegateDOMEvents(a);this.bindEntityEvents(this.model,this.getOption("modelEvents"));this.bindEntityEvents(this.collection,this.getOption("collectionEvents"));return this},_delegateDOMEvents:function(a){a=
a||this.events;d.isFunction(a)&&(a=a.call(this));var a=this.normalizeUIKeys(a),b={},c=d.result(this,"behaviorEvents")||{},e=this.configureTriggers();d.extend(b,c,a,e);f.View.prototype.delegateEvents.call(this,b)},undelegateEvents:function(){var a=l.call(arguments);f.View.prototype.undelegateEvents.apply(this,a);this.unbindEntityEvents(this.model,this.getOption("modelEvents"));this.unbindEntityEvents(this.collection,this.getOption("collectionEvents"));return this},onShowCalled:function(){},_ensureViewIsIntact:function(){if(this.isDestroyed){var a=
Error("Cannot use a view thats already been destroyed.");a.name="ViewDestroyedError";throw a;}},destroy:function(){if(!this.isDestroyed){var a=l.call(arguments);this.triggerMethod.apply(this,["before:destroy"].concat(a));this.isDestroyed=!0;this.triggerMethod.apply(this,["destroy"].concat(a));this.unbindUIElements();this.remove();return this}},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var a=d.result(this,"_uiBindings");this.ui={};d.each(d.keys(a),function(b){this.ui[b]=
this.$(a[b])},this)}},unbindUIElements:function(){this.ui&&this._uiBindings&&(d.each(this.ui,function(a,b){delete this.ui[b]},this),this.ui=this._uiBindings,delete this._uiBindings)},triggerMethod:e.triggerMethod,normalizeMethods:e.normalizeMethods,getOption:e.proxyGetOption,bindEntityEvents:e.proxyBindEntityEvents,unbindEntityEvents:e.proxyUnbindEntityEvents});e.ItemView=e.View.extend({constructor:function(){e.View.apply(this,arguments)},serializeData:function(){var a={};this.model?a=d.partial(this.serializeModel,
this.model).apply(this,arguments):this.collection&&(a={items:d.partial(this.serializeCollection,this.collection).apply(this,arguments)});return a},serializeCollection:function(a){return a.toJSON.apply(a,l.call(arguments,1))},render:function(){this._ensureViewIsIntact();this.triggerMethod("before:render",this);this._renderTemplate();this.bindUIElements();this.triggerMethod("render",this);return this},_renderTemplate:function(){var a=this.getTemplate();if(!1!==a){a||j("Cannot render the template since it is null or undefined.",
"UndefinedTemplateError");var b=this.serializeData(),b=this.mixinTemplateHelpers(b),a=e.Renderer.render(a,b,this);this.attachElContent(a);return this}},attachElContent:function(a){this.$el.html(a);return this},destroy:function(){if(!this.isDestroyed)return e.View.prototype.destroy.apply(this,arguments)}});e.CollectionView=e.View.extend({childViewEventPrefix:"childview",constructor:function(a){var b=a||{};this.sort=d.isUndefined(b.sort)?!0:b.sort;this._initChildViewStorage();e.View.apply(this,arguments);
this._initialEvents();this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment();this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer();this.isBuffering=!0},endBuffering:function(){this.isBuffering=!1;this._triggerBeforeShowBufferedChildren();this.attachBuffer(this,this.elBuffer);this._triggerShowBufferedChildren();this.initRenderBuffer()},_triggerBeforeShowBufferedChildren:function(){this._isShown&&d.invoke(this._bufferedChildren,"triggerMethod",
"before:show")},_triggerShowBufferedChildren:function(){this._isShown&&(d.each(this._bufferedChildren,function(a){d.isFunction(a.triggerMethod)?a.triggerMethod("show"):e.triggerMethod.call(a,"show")}),this._bufferedChildren=[])},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this.render),this.sort&&this.listenTo(this.collection,"sort",this._sortViews))},
_onCollectionAdd:function(a){this.destroyEmptyView();var b=this.getChildView(a),c=this.collection.indexOf(a);this.addChild(a,b,c)},_onCollectionRemove:function(a){a=this.children.findByModel(a);this.removeChildView(a);this.checkEmpty()},onShowCalled:function(){this.children.each(function(a){d.isFunction(a.triggerMethod)?a.triggerMethod("show"):e.triggerMethod.call(a,"show")})},render:function(){this._ensureViewIsIntact();this.triggerMethod("before:render",this);this._renderChildren();this.triggerMethod("render",
this);return this},resortView:function(){this.render()},_sortViews:function(){this.collection.find(function(a,b){var c=this.children.findByModel(a);return!c||c._index!==b},this)&&this.resortView()},_renderChildren:function(){this.destroyEmptyView();this.destroyChildren();this.isEmpty(this.collection)?this.showEmptyView():(this.triggerMethod("before:render:collection",this),this.startBuffering(),this.showCollection(),this.endBuffering(),this.triggerMethod("render:collection",this))},showCollection:function(){var a;
this.collection.each(function(b,c){a=this.getChildView(b);this.addChild(b,a,c)},this)},showEmptyView:function(){var a=this.getEmptyView();if(a&&!this._showingEmptyView){this.triggerMethod("before:render:empty");this._showingEmptyView=!0;var b=new f.Model;this.addEmptyView(b,a);this.triggerMethod("render:empty")}},destroyEmptyView:function(){this._showingEmptyView&&(this.destroyChildren(),delete this._showingEmptyView)},getEmptyView:function(){return this.getOption("emptyView")},addEmptyView:function(a,
b){var c=this.getOption("emptyViewOptions")||this.getOption("childViewOptions");d.isFunction(c)&&(c=c.call(this));c=this.buildChildView(a,b,c);this._isShown&&this.triggerMethod.call(c,"before:show");this.children.add(c);this.renderChildView(c,-1);this._isShown&&this.triggerMethod.call(c,"show")},getChildView:function(){var a=this.getOption("childView");a||j('A "childView" must be specified',"NoChildViewError");return a},addChild:function(a,b,c){var e=this.getOption("childViewOptions");d.isFunction(e)&&
(e=e.call(this,a,c));a=this.buildChildView(a,b,e);this._updateIndices(a,!0,c);this._addChildView(a,c);return a},_updateIndices:function(a,b,c){this.sort&&(b?(a._index=c,this.children.each(function(b){b._index>=a._index&&b._index++})):this.children.each(function(b){b._index>=a._index&&b._index--}))},_addChildView:function(a,b){this.proxyChildEvents(a);this.triggerMethod("before:add:child",a);this.children.add(a);this.renderChildView(a,b);this._isShown&&!this.isBuffering&&(d.isFunction(a.triggerMethod)?
a.triggerMethod("show"):e.triggerMethod.call(a,"show"));this.triggerMethod("add:child",a)},renderChildView:function(a,b){a.render();this.attachHtml(this,a,b);return a},buildChildView:function(a,b,c){a=d.extend({model:a},c);return new b(a)},removeChildView:function(a){a&&(this.triggerMethod("before:remove:child",a),a.destroy?a.destroy():a.remove&&a.remove(),this.stopListening(a),this.children.remove(a),this.triggerMethod("remove:child",a),this._updateIndices(a,!1));return a},isEmpty:function(){return!this.collection||
0===this.collection.length},checkEmpty:function(){this.isEmpty(this.collection)&&this.showEmptyView()},attachBuffer:function(a,b){a.$el.append(b)},attachHtml:function(a,b,c){a.isBuffering?(a.elBuffer.appendChild(b.el),a._bufferedChildren.push(b)):a._insertBefore(b,c)||a._insertAfter(b)},_insertBefore:function(a,b){var c;this.sort&&b<this.children.length-1&&(c=this.children.find(function(a){return a._index===b+1}));return c?(c.$el.before(a.el),!0):!1},_insertAfter:function(a){this.$el.append(a.el)},
_initChildViewStorage:function(){this.children=new u},destroy:function(){if(!this.isDestroyed)return this.triggerMethod("before:destroy:collection"),this.destroyChildren(),this.triggerMethod("destroy:collection"),e.View.prototype.destroy.apply(this,arguments)},destroyChildren:function(){var a=this.children.map(d.identity);this.children.each(this.removeChildView,this);this.checkEmpty();return a},proxyChildEvents:function(a){var b=this.getOption("childViewEventPrefix");this.listenTo(a,"all",function(){var c=
l.call(arguments),e=c[0],f=this.normalizeMethods(d.result(this,"childEvents"));c[0]=b+":"+e;c.splice(1,0,a);"undefined"!==typeof f&&d.isFunction(f[e])&&f[e].apply(this,c.slice(1));this.triggerMethod.apply(this,c)},this)}});e.CompositeView=e.CollectionView.extend({constructor:function(){e.CollectionView.apply(this,arguments)},_initialEvents:function(){this.once("render",function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),
this.listenTo(this.collection,"reset",this._renderChildren),this.sort&&this.listenTo(this.collection,"sort",this._sortViews))})},getChildView:function(){var a=this.getOption("childView")||this.constructor;a||j('A "childView" must be specified',"NoChildViewError");return a},serializeData:function(){var a={};this.model&&(a=d.partial(this.serializeModel,this.model).apply(this,arguments));return a},render:function(){this._ensureViewIsIntact();this.isRendered=!0;this.resetChildViewContainer();this.triggerMethod("before:render",
this);this._renderTemplate();this._renderChildren();this.triggerMethod("render",this);return this},_renderChildren:function(){this.isRendered&&e.CollectionView.prototype._renderChildren.call(this)},_renderTemplate:function(){var a={},a=this.serializeData(),a=this.mixinTemplateHelpers(a);this.triggerMethod("before:render:template");var b=this.getTemplate(),a=e.Renderer.render(b,a,this);this.attachElContent(a);this.bindUIElements();this.triggerMethod("render:template")},attachElContent:function(a){this.$el.html(a);
return this},attachBuffer:function(a,b){this.getChildViewContainer(a).append(b)},_insertAfter:function(a){this.getChildViewContainer(this).append(a.el)},getChildViewContainer:function(a){if("$childViewContainer"in a)return a.$childViewContainer;var b;(b=e.getOption(a,"childViewContainer"))?(b=d.isFunction(b)?b.call(a):b,b="@"===b.charAt(0)&&a.ui?a.ui[b.substr(4)]:a.$(b),0>=b.length&&j('The specified "childViewContainer" was not found: '+a.childViewContainer,"ChildViewContainerMissingError")):b=a.$el;
return a.$childViewContainer=b},resetChildViewContainer:function(){this.$childViewContainer&&delete this.$childViewContainer}});e.LayoutView=e.ItemView.extend({regionClass:e.Region,constructor:function(a){a=a||{};this._firstRender=!0;this._initializeRegions(a);e.ItemView.call(this,a)},render:function(){this._ensureViewIsIntact();this._firstRender?this._firstRender=!1:this._reInitializeRegions();return e.ItemView.prototype.render.apply(this,arguments)},destroy:function(){if(this.isDestroyed)return this;
this.regionManager.destroy();return e.ItemView.prototype.destroy.apply(this,arguments)},addRegion:function(a,b){this.triggerMethod("before:region:add",a);var c={};c[a]=b;return this._buildRegions(c)[a]},addRegions:function(a){this.regions=d.extend({},this.regions,a);return this._buildRegions(a)},removeRegion:function(a){this.triggerMethod("before:region:remove",a);delete this.regions[a];return this.regionManager.removeRegion(a)},getRegion:function(a){return this.regionManager.get(a)},getRegions:function(){return this.regionManager.getRegions()},
_buildRegions:function(a){var b=this,c={regionClass:this.getOption("regionClass"),parentEl:function(){return b.$el}};return this.regionManager.addRegions(a,c)},_initializeRegions:function(a){var b;this._initRegionManager();b=d.isFunction(this.regions)?this.regions(a):this.regions||{};var c=this.getOption.call(a,"regions");d.isFunction(c)&&(c=c.call(this,a));d.extend(b,c);this.addRegions(b)},_reInitializeRegions:function(){this.regionManager.emptyRegions();this.regionManager.each(function(a){a.reset()})},
getRegionManager:function(){return new e.RegionManager},_initRegionManager:function(){this.regionManager=this.getRegionManager();this.listenTo(this.regionManager,"before:add:region",function(a){this.triggerMethod("before:add:region",a)});this.listenTo(this.regionManager,"add:region",function(a,b){this[a]=b;this.triggerMethod("add:region",a,b)});this.listenTo(this.regionManager,"before:remove:region",function(a){this.triggerMethod("before:remove:region",a)});this.listenTo(this.regionManager,"remove:region",
function(a,b){delete this[a];this.triggerMethod("remove:region",a,b)})}});g=function(a,b){this.view=b;this.defaults=d.result(this,"defaults")||{};this.options=d.extend({},this.defaults,a);this.$=function(){return this.view.$.apply(this.view,arguments)};this.initialize.apply(this,arguments)};d.extend(g.prototype,f.Events,{initialize:function(){},destroy:function(){this.stopListening()},triggerMethod:e.triggerMethod,getOption:e.proxyGetOption,bindEntityEvents:e.proxyBindEntityEvents,unbindEntityEvents:e.proxyUnbindEntityEvents});
g.extend=e.extend;e.Behavior=g;var m=function(a,b){b=m.parseBehaviors(a,b||d.result(a,"behaviors"));m.wrap(a,b,d.keys(s))},s={setElement:function(a,b){a.apply(this,d.tail(arguments,2));d.each(b,function(a){a.$el=this.$el;a.el=this.el},this);return this},destroy:function(a,b){var c=d.tail(arguments,2);a.apply(this,c);d.invoke(b,"destroy",c);return this},bindUIElements:function(a,b){a.apply(this);d.invoke(b,a)},unbindUIElements:function(a,b){a.apply(this);d.invoke(b,a)},triggerMethod:function(a,b){var c=
d.tail(arguments,2);a.apply(this,c);d.each(b,function(b){a.apply(b,c)})},delegateEvents:function(a,b){var c=d.tail(arguments,2);a.apply(this,c);d.each(b,function(a){e.bindEntityEvents(a,this.model,e.getOption(a,"modelEvents"));e.bindEntityEvents(a,this.collection,e.getOption(a,"collectionEvents"))},this);return this},undelegateEvents:function(a,b){var c=d.tail(arguments,2);a.apply(this,c);d.each(b,function(a){e.unbindEntityEvents(a,this.model,e.getOption(a,"modelEvents"));e.unbindEntityEvents(a,this.collection,
e.getOption(a,"collectionEvents"))},this);return this},behaviorEvents:function(a,b){var c={},f=d.result(this,"ui");d.each(b,function(a,b){var g={},h=d.clone(d.result(a,"events"))||{},i=d.result(a,"ui"),i=d.extend({},f,i),h=e.normalizeUIKeys(h,i);d.each(d.keys(h),function(c){var e=Array(b+2).join(" "),e=c+e,c=d.isFunction(h[c])?h[c]:a[h[c]];g[e]=d.bind(c,a)});c=d.extend(c,g)});return c}};d.extend(m,{behaviorsLookup:function(){throw Error("You must define where your behaviors are stored.See https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.behaviors.md#behaviorslookup");
},getBehaviorClass:function(a,b){return a.behaviorClass?a.behaviorClass:d.isFunction(m.behaviorsLookup)?m.behaviorsLookup.apply(this,arguments)[b]:m.behaviorsLookup[b]},parseBehaviors:function(a,b){return d.chain(b).map(function(b,e){var f=new (m.getBehaviorClass(b,e))(b,a),g=m.parseBehaviors(a,d.result(f,"behaviors"));return[f].concat(g)}).flatten().value()},wrap:function(a,b,c){d.each(c,function(c){a[c]=d.partial(s[c],a[c],b)})}});e.Behaviors=m;e.AppRouter=f.Router.extend({constructor:function(a){f.Router.apply(this,
arguments);this.options=a||{};var b=this.getOption("appRoutes"),c=this._getController();this.processAppRoutes(c,b);this.on("route",this._processOnRoute,this)},appRoute:function(a,b){var c=this._getController();this._addAppRoute(c,a,b)},_processOnRoute:function(a,b){var c=d.invert(this.getOption("appRoutes"))[a];if(d.isFunction(this.onRoute))this.onRoute(a,c,b)},processAppRoutes:function(a,b){if(b){var c=d.keys(b).reverse();d.each(c,function(c){this._addAppRoute(a,c,b[c])},this)}},_getController:function(){return this.getOption("controller")},
_addAppRoute:function(a,b,c){var e=a[c];e||j('Method "'+c+'" was not found on the controller');this.route(b,c,d.bind(e,a))},getOption:e.proxyGetOption});e.Application=function(a){this._initializeRegions(a);this._initCallbacks=new e.Callbacks;this.submodules={};d.extend(this,a);this._initChannel()};d.extend(e.Application.prototype,f.Events,{execute:function(){this.commands.execute.apply(this.commands,arguments)},request:function(){return this.reqres.request.apply(this.reqres,arguments)},addInitializer:function(a){this._initCallbacks.add(a)},
start:function(a){this.triggerMethod("before:start",a);this._initCallbacks.run(a,this);this.triggerMethod("start",a)},addRegions:function(a){return this._regionManager.addRegions(a)},emptyRegions:function(){return this._regionManager.emptyRegions()},removeRegion:function(a){return this._regionManager.removeRegion(a)},getRegion:function(a){return this._regionManager.get(a)},getRegions:function(){return this._regionManager.getRegions()},module:function(a,b){var c=e.Module.getClass(b),d=l.call(arguments);
d.unshift(this);return c.create.apply(c,d)},getRegionManager:function(){return new e.RegionManager},_initializeRegions:function(a){var b=d.isFunction(this.regions)?this.regions(a):this.regions||{};this._initRegionManager();var c=e.getOption(a,"regions");d.isFunction(c)&&(c=c.call(this,a));d.extend(b,c);this.addRegions(b);return this},_initRegionManager:function(){this._regionManager=this.getRegionManager();this.listenTo(this._regionManager,"before:add:region",function(a){this.triggerMethod("before:add:region",
a)});this.listenTo(this._regionManager,"add:region",function(a,b){this[a]=b;this.triggerMethod("add:region",a,b)});this.listenTo(this._regionManager,"before:remove:region",function(a){this.triggerMethod("before:remove:region",a)});this.listenTo(this._regionManager,"remove:region",function(a,b){delete this[a];this.triggerMethod("remove:region",a,b)})},_initChannel:function(){this.channelName=d.result(this,"channelName")||"global";this.channel=d.result(this,"channel")||v.radio.channel(this.channelName);
this.vent=d.result(this,"vent")||this.channel.vent;this.commands=d.result(this,"commands")||this.channel.commands;this.reqres=d.result(this,"reqres")||this.channel.reqres},triggerMethod:e.triggerMethod,getOption:e.proxyGetOption});e.Application.extend=e.extend;e.Module=function(a,b,c){this.moduleName=a;this.options=d.extend({},this.options,c);this.initialize=c.initialize||this.initialize;this.submodules={};this._setupInitializersAndFinalizers();this.app=b;this.startWithParent=!0;d.isFunction(this.initialize)&&
this.initialize(a,b,this.options)};e.Module.extend=e.extend;d.extend(e.Module.prototype,f.Events,{initialize:function(){},addInitializer:function(a){this._initializerCallbacks.add(a)},addFinalizer:function(a){this._finalizerCallbacks.add(a)},start:function(a){this._isInitialized||(d.each(this.submodules,function(b){b.startWithParent&&b.start(a)}),this.triggerMethod("before:start",a),this._initializerCallbacks.run(a,this),this._isInitialized=!0,this.triggerMethod("start",a))},stop:function(){this._isInitialized&&
(this._isInitialized=!1,this.triggerMethod("before:stop"),d.each(this.submodules,function(a){a.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),this.triggerMethod("stop"))},addDefinition:function(a,b){this._runModuleDefinition(a,b)},_runModuleDefinition:function(a,b){if(a){var c=d.flatten([this,this.app,f,e,f.$,d,b]);a.apply(this,c)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new e.Callbacks;this._finalizerCallbacks=
new e.Callbacks},triggerMethod:e.triggerMethod});d.extend(e.Module,{create:function(a,b,c){var e=a,f=l.call(arguments);f.splice(0,3);var b=b.split("."),g=[];g[b.length-1]=c;d.each(b,function(b,d){var h=e;e=this._getModule(h,b,a,c);this._addModuleDefinition(h,e,g[d],f)},this);return e},_getModule:function(a,b,c,e){var f=d.extend({},e),e=this.getClass(e),g=a[b];g||(g=new e(b,c,f),a[b]=g,a.submodules[b]=g);return g},getClass:function(a){var b=e.Module;return!a?b:a.prototype instanceof b?a:a.moduleClass||
b},_addModuleDefinition:function(a,b,c,d){var e=this._getDefine(c),c=this._getStartWithParent(c,b);e&&b.addDefinition(e,d);this._addStartWithParent(a,b,c)},_getStartWithParent:function(a,b){var c;return d.isFunction(a)&&a.prototype instanceof e.Module?(c=b.constructor.prototype.startWithParent,d.isUndefined(c)?!0:c):d.isObject(a)?(c=a.startWithParent,d.isUndefined(c)?!0:c):!0},_getDefine:function(a){return d.isFunction(a)&&!(a.prototype instanceof e.Module)?a:d.isObject(a)?a.define:null},_addStartWithParent:function(a,
b,c){b.startWithParent=b.startWithParent&&c;b.startWithParent&&!b.startWithParentIsConfigured&&(b.startWithParentIsConfigured=!0,a.addInitializer(function(a){b.startWithParent&&b.start(a)}))}});return e};if("function"===typeof define&&define.amd)define(["backbone","underscore"],function(k,f){return i.Marionette=n(i,k,f)});else if("undefined"!==typeof exports){var o=require("backbone"),k=require("underscore");module.exports=n(i,o,k)}else i.Marionette=n(i,i.Backbone,i._)});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-2.1.0', location = 'libs/marionette-2.1.0.js' */
define("jira/components/libs/marionette-2.1.0",["require"],function(d){var e=d("atlassian/libs/factories/marionette-2.1.0");var h=d("jira/components/libs/backbone");var c=d("jira/components/libs/underscore");var g=e(c,h);function f(j,i){var k=c.defaults({},i||{},{isPrevented:false,emitter:this,preventDefault:function(){this.isPrevented=true}});this.trigger(j,k);return k}function b(j,i){var k=this.triggerPreventable(j,i);if(k.isPrevented){i.preventDefault()}}c.extend(g.View.prototype,{unwrapTemplate:function a(j){if(j&&!this.$el.hasClass(j)){return}if(this.$el.parent().length){var i=this.$el.children();this.$el.replaceWith(i);this.setElement(i)}else{this.setElement(this.$el.children())}},triggerPreventable:f,retriggerPreventable:b});c.extend(g.Controller.prototype,{triggerPreventable:f,retriggerPreventable:b});g.ViewManager=g.Object.extend({constructor:function(){this.views={};g.Controller.apply(this,arguments)},hideView:function(j){var i=this.views[j];if(i){this.stopListening(i);if(!i.isDestroyed){i.destroy()}delete this.views[j]}},showView:function(k,j){var i=this.buildView(k,j);i.render()},buildView:function(k,j){var i=this.views[k];if(!i){i=j.call(this);this.listenTo(i,"destroy",function(){this.hideView(k)});this.views[k]=i}return i},getView:function(i){return this.views[i]},onDestroy:function(){c.each(this.views,function(i,j){this.hideView(j)},this)}});return g});define("jira/components/lib/marionette-2.1.0",["require"],function(a){return a("jira/components/libs/marionette-2.1.0")});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:functional-utils', location = 'util/FunctionalUtils.js' */
define("jira/components/util/functionalutils",["require"],function(b){var a=b("jira/components/libs/underscore");return{lambda:function(c){return function(){return c}},isNotBlank:function(c){return !!c},bindObjectTo:function(d,c){a.map(d,function(f,e){if(a.isFunction(f)){d[e]=a.bind(f,c)}})}}});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:issue-utils', location = 'content/js/util/Utils.js' */
AJS.namespace("JIRA.Issues.Actions",null,require("jira/components/util/events/issue-actions"));define("jira/issue/utils/xsrf-token-header",[],function(){return{"X-Atlassian-Token":"no-check"}});AJS.namespace("JIRA.Issues.XsrfTokenHeader",null,require("jira/issue/utils/xsrf-token-header"));define("jira/issue/utils",["require"],function(b){var c=b("jira/dialog/dialog-register");var a=b("underscore");return{isIssueDialog:function(d){return !!d.issueId||a.include(c,d)},isDeleteDialog:function(d){return d.options.id==="delete-issue-dialog"},isEditCommentDialog:function(d){return d.options.id==="edit-comment"},getEffectiveIssueKeyForDialog:function(d){var e=d&&d.$activeTrigger&&d.$activeTrigger.data("issuekey");if(e){return e}else{return JIRA.Issues.Api.getSelectedIssue().getKey()}},getEffectiveIssueIdForDialog:function(d){if(d.issueId){return d.issueId}else{return JIRA.Issues.Api.getSelectedIssue().getId()}},getAction:function(d){if(this.isDeleteDialog(d)){return JIRA.Issues.Actions.DELETE}else{if(this.isEditCommentDialog(d)){return JIRA.Issues.Actions.EDIT_COMMENT}else{return JIRA.Issues.Actions.UPDATE}}},getMessage:function(d){if(!this.isEditCommentDialog(d)){return d.options.issueMsg||"thanks_issue_updated"}},getMeta:function(d){if(this.isEditCommentDialog(d)){return{commentId:d.$activeTrigger.attr("id").replace("edit_comment_","")}}else{return{}}},getUpdateCommandForDialog:function(e){var d=this;if(this.isIssueDialog(e)){return{key:d.getEffectiveIssueKeyForDialog(e),id:d.getEffectiveIssueIdForDialog(e),action:d.getAction(e),message:d.getMessage(e),meta:d.getMeta(e)}}},debounce:function(d,f){var e=Array.prototype.slice.call(arguments,2);if(!d){console.error("JIRA.Issues.Utils.debounce: ctx must be defined")}clearTimeout(d[f+"DebounceTimeout"]);d[f].apply(d,e);if(!d[f+"DebounceTimeout"]){d[f+"Original"]=d[f];d[f]=a.debounce(function(){return d[f+"Original"].apply(d,arguments)},300)}d[f+"DebounceTimeout"]=setTimeout(function(){d[f]=d[f+"Original"];d[f+"DebounceTimeout"]=null},500)},waitForDeferreds:function(h,g,d){d=d||window;var f=[];var e=new jQuery.Deferred();a.each(h,function(){var i=g.apply(d,arguments);if(i&&i.promise){f.push(i)}});if(f.length){jQuery.when.apply(jQuery,f).then(function(){e.resolveWith(d)})}else{e.resolveWith(d)}return e.promise()},resolvedPromise:function(){return new jQuery.Deferred().resolve().promise()},patch:function(e,d,h){var i=e.hasOwnProperty(d);var f=e[d];e[d]=h;return function g(){if(i){e[d]=f}else{delete e[d]}}},isEmptyOrWhitespace:function(d){return d===undefined||d===null||a.isEmpty(d.trim())}}});AJS.namespace("JIRA.Issues.Utils",null,require("jira/issue/utils"));;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:backbone-ext', location = 'content/js/base/AttributesMixinCreator.js' */
define("jira/issues/attributesmixincreator",["require"],function(b){var a=b("underscore");var c=b("jira/issues/mixins");return{create:function(e){var d={};if(a.indexOf(e,"id")===-1){e.unshift("id")}a.each(e,function(g){var h=c.createMethodName("set",g);d[h]=function(k,i){var j={};j[g]=k;this.set(j,i);return this};var f=c.createMethodName("get",g);d[f]=function(){return this.get(g)}});return d}}});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:backbone-ext', location = 'content/js/base/EventsMixinCreator.js' */
define("jira/issues/eventsmixincreator",["require"],function(b){var a=b("underscore");var c=b("jira/issues/mixins");return{create:function(e){var d={};var f=function(h){var g=c.createMethodName("bind",h);d[g]=function(){return this.bind.apply(this,[h].concat(a.toArray(arguments)))};var j=c.createMethodName("unbind",h);d[j]=function(){return this.unbind.apply(this,[h].concat(a.toArray(arguments)))};var i=c.createMethodName("trigger",h);d[i]=function(){return this.trigger.apply(this,[h].concat(a.toArray(arguments)))};var k=c.createMethodName("one",h);d[k]=function(){var l=this;var m=arguments[0];var o=function(){l.unbind(h,o);m(arguments)};var n=a.toArray(arguments).slice(1);return this.bind.apply(this,[h,o].concat(n))}};a.each(e,a.bind(f,this));return d}}});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:backbone-ext', location = 'content/js/base/Extensions.js' */
define("jira/issue/extensions",["require"],function(b){var l=b("underscore");var a=b("jira/issues/eventsmixincreator");var d=b("jira/issues/attributesmixincreator");function j(n,m){l.forEach(l.keys(m),function(r){var s=n.prototype;if("initialize"===r){var p=s.initialize;s.initialize=function(){m.initialize.apply(this,arguments);if(p){p.apply(this,arguments)}};return}if("validate"===r){var q=s.validate;s.validate=function(){var v=m.validate.apply(this,arguments);if(v){return v}if(q){return q.apply(this,arguments)}};return}if("defaults"===r){var t=s.defaults||(s.defaults={});var o=m[r];for(var u in o){if(t.hasOwnProperty(u)){throw"Mixin error: object "+n+" already has default "+u+" defined for mixin "+m}t[u]=o[u]}return}if("properties"===r){if(!l.isArray(m[r])){throw"Expects properties member on mixin to be an array"}if(!s.properties){s.properties=[]}s.properties=s.properties.concat(m[r]);return}if("namedEvents"===r){if(!l.isArray(m[r])){throw"Expects events member on mixin to be an array"}if(!s.namedEvents){s.namedEvents=[]}s.namedEvents=s.namedEvents.concat(m[r]);return}if(s.hasOwnProperty(r)){throw"Mixin error: object "+n+" already has property "+r+" for mixin "+m}s[r]=m[r]},this)}function e(n){return function m(q,r){var s;var p=l.extend({},q);var o;if(q&&q.mixins){o=q.mixins;delete p.mixins}s=n.call(this,p,r);if(o){l.each(q.mixins,function(t){j(s,t)})}if(s.prototype.namedEvents){j(s,a.create(s.prototype.namedEvents))}if(s.prototype.properties){j(s,d.create(s.prototype.properties))}s.extend=m;return s}}function h(p,n){var o=p.prototype;var m=n.prototype;m.set=function(t,u){var r;var s=this.properties;if(s){if(l.isObject(t)||t==null){r=t}else{r={};r[t]=u}for(var q in r){if(l.indexOf(s,q)<0){throw"Property '"+q+"' does not exist"}}}return o.set.apply(this,arguments)};m.get=function(q){if(this.properties&&l.indexOf(this.properties,q)<0){throw"Property '"+q+"' does not exist"}return o.get.apply(this,arguments)}}function f(o,n){var m=n.prototype;m.addListener=function(w,p,z,q){if(arguments.length<3){throw"The 'other', 'event', and 'callback' arguments are mandatory"}var u=p.charAt(0).toUpperCase()+p.slice(1);var y="on"+u;var v="off"+u;var x="bind"+u;var s="unbind"+u;var r;var t;if(w[y]){r=y;t=v||s;if(typeof w[r]!=="function"){throw"object does not have method "+y+"'"}if(typeof w[t]!=="function"){throw"object does not have method "+v+"'"}}else{r=x;t=s;if(typeof w[r]!=="function"){throw"object does not have event ["+p+"] registered'"}}w[r](z,q);this._cleanerUppers=this._cleanerUppers||[];this._cleanerUppers.push(function(){w[t](z,q)})};m.removeListeners=function(){if(this._cleanerUppers){l.each(this._cleanerUppers,function(p){p()})}}}function g(p,o){var m=o.prototype;var n=p.prototype.remove;m.remove=function(){this.removeListeners();return n.apply(this,arguments)};m.deactivate=function(){this.undelegateEvents();this.removeListeners()}}function c(m){var o=m.extend();var n=m.extend;o.extend=e(n);return o}function k(m){var n=c(m);h(m,n);return n}function i(m){var n=c(m);f(m,n);g(m,n);return n}return{applyModelExtensions:k,applyExtensions:c,applyViewExtensions:i}});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:backbone-ext', location = 'content/js/base/BaseCollection.js' */
define("jira/issues/basecollection",["require"],function(b){var c=b("backbone");var a=b("jira/issue/extensions");return a.applyExtensions(c.Collection)});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:backbone-ext', location = 'content/js/base/BaseEvented.js' */
define("jira/issues/baseevented",["require"],function(c){var e=c("backbone");var b=c("underscore");var a=c("jira/issue/extensions");var d=function(){this.initialize.apply(this,arguments)};b.extend(d.prototype,e.Events,{initialize:function(){}});d.extend=e.Model.extend;return a.applyExtensions(d)});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:backbone-ext', location = 'content/js/base/BaseModel.js' */
define("jira/issues/basemodel",["require"],function(b){var c=b("backbone");var a=b("jira/issue/extensions");return a.applyModelExtensions(c.Model)});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:backbone-ext', location = 'content/js/base/BaseRouter.js' */
define("jira/issues/baserouter",["require"],function(b){var c=b("backbone");var a=b("jira/issue/extensions");return a.applyExtensions(c.Router)});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:backbone-ext', location = 'content/js/base/BaseView.js' */
define("jira/issues/baseview",["require"],function(b){var c=b("backbone");var a=b("jira/issue/extensions");return a.applyViewExtensions(c.View)});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:backbone-ext', location = 'content/js/base/Mixins.js' */
define("jira/issues/mixins",function(){return{createMethodName:function(a,b){return a+b.charAt(0).toUpperCase()+b.substr(1)}}});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:backbone-ext', location = 'content/js/base/ModelUtils.js' */
define("jira/issues/modelutils",["require"],function(c){var i=c("underscore");var h=c("backbone");var e=c("jira/issue/utils");var b;function d(){this.modelEvents={}}d.prototype.captureEvent=function(l,k){var j=k[0];if(!this.modelEvents[l.cid]){this.modelEvents[l.cid]={model:l,events:{}}}this.modelEvents[l.cid].events[j]=k};d.prototype.replayEvents=function(){i.each(this.modelEvents,function(j){i.each(j.events,function(k){h.Events.trigger.apply(j.model,k)})})};function f(k){var j=this;if(k==="change"||k.indexOf("change:")===0){b.log.captureEvent(j,i.toArray(arguments))}else{h.Events.trigger.apply(j,arguments)}}var g=function(){if(b){return{commit:function(){}}}b={log:new d()};var j=e.patch(h.Model.prototype,"trigger",f);return{commit:function(){j();b.log.replayEvents();b=null}}};var a={transaction:function(l,k){var j=g();try{return l.apply(k)}finally{j.commit()}},makeTransactional:function(k){var l=function(m){return function(){var n=arguments;return a.transaction(function(){return m.apply(this,n)},this)}};var j=Array.prototype.slice.call(arguments,1);if(j.length===0){j=i.functions(k)}i.each(j,function(m){if(m.indexOf("_")!==0){k[m]=l(k[m])}})}};return a});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:backbone-ext', location = 'content/js/base/namespace.js' */
AJS.namespace("JIRA.Issues.AttributesMixinCreator",null,require("jira/issues/attributesmixincreator"));AJS.namespace("JIRA.Issues.BaseCollection",null,require("jira/issues/basecollection"));AJS.namespace("JIRA.Issues.BaseEvented",null,require("jira/issues/baseevented"));AJS.namespace("JIRA.Issues.BaseModel",null,require("jira/issues/basemodel"));AJS.namespace("JIRA.Issues.BaseRouter",null,require("jira/issues/baserouter"));AJS.namespace("JIRA.Issues.BaseView",null,require("jira/issues/baseview"));AJS.namespace("JIRA.Issues.EventsMixinCreator",null,require("jira/issues/eventsmixincreator"));AJS.namespace("JIRA.Issues.Mixins",null,require("jira/issues/mixins"));AJS.namespace("JIRA.Issues.ModelUtils",null,require("jira/issues/modelutils"));;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:backbone-ext', location = 'content/js/base/init.js' */
(function(){var b=require("jira/components/util/functionalutils");var a=require("underscore");a.mixin({lambda:b.lambda,isNotBlank:b.isNotBlank,bindObjectTo:b.bindObjectTo})})();;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:orderby', location = 'orderby/orderby.soy' */
// This file was automatically generated from orderby.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.OrderBy.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.OrderBy == 'undefined') { JIRA.Templates.OrderBy = {}; }


JIRA.Templates.OrderBy.orderBy = function(opt_data, opt_ignored) {
  return ((opt_data.sortBy && opt_data.sortBy.fieldId) ? '<a class="order-by ' + ((opt_data.sortBy.order == 'ASC') ? 'ascending' : 'descending') + '" data-field-id="' + soy.$$escapeHtml(opt_data.sortBy.fieldId) + '" data-direction="' + soy.$$escapeHtml(opt_data.sortBy.order) + '" href="#" title="' + soy.$$escapeHtml(AJS.format("Order by {0}",opt_data.sortBy.fieldName)) + '"><span>' + soy.$$escapeHtml(AJS.format("Order by {0}",opt_data.sortBy.fieldName)) + '</span><span class="aui-icon aui-icon-small aui-iconfont-' + ((opt_data.sortBy.order == 'ASC') ? 'up' : 'down') + '"></span></a>' : '<a class="order-by" title="' + soy.$$escapeHtml("Order by") + '"><span>' + soy.$$escapeHtml("Order by") + '</span></a>') + '<a class="order-options" title="' + soy.$$escapeHtml("Select the field that issues are ordered by.") + '">' + soy.$$escapeHtml("Select the field that issues are ordered by.") + '</a>';
};
if (goog.DEBUG) {
  JIRA.Templates.OrderBy.orderBy.soyTemplateName = 'JIRA.Templates.OrderBy.orderBy';
}


JIRA.Templates.OrderBy.orderByOptions = function(opt_data, opt_ignored) {
  var output = '<select id="order-by-options" multiple="multiple" class="hidden"><optgroup data-footer-text="' + soy.$$escapeHtml(opt_data.footer) + '">';
  var optionList41 = opt_data.options;
  var optionListLen41 = optionList41.length;
  for (var optionIndex41 = 0; optionIndex41 < optionListLen41; optionIndex41++) {
    var optionData41 = optionList41[optionIndex41];
    output += '<option title="' + soy.$$escapeHtml(optionData41.fieldName) + '" value="' + soy.$$escapeHtml(optionData41.fieldId) + '" data-meta="' + soy.$$escapeHtml(optionData41.meta) + '">' + soy.$$escapeHtml(optionData41.fieldName) + '</option>';
  }
  output += '</optgroup></select>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.OrderBy.orderByOptions.soyTemplateName = 'JIRA.Templates.OrderBy.orderByOptions';
}
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:orderby', location = 'orderby/OrderByModel.js' */
define("jira/components/orderby/orderbymodel",["require"],function(c){var b=c("jira/components/libs/underscore");var d=c("jira/components/libs/brace");var e=c("jquery");var a=c("wrm/context-path");return d.Model.extend({namedEvents:["sort"],namedAttributes:["sortBy","jql"],initialize:function(){this.on("change:jql",this.updateSelectedSort,this)},updateSelectedSort:function(){e.ajax({type:"POST",url:a()+"/rest/orderbycomponent/latest/orderByOptions/primary",data:JSON.stringify({jql:this.getJql()}),contentType:"application/json",success:b.bind(function(f){this.setSortBy(f)},this)})},toggleSort:function(){this.setJql(this.getSortBy().toggleJql);this.triggerSort(this.getJql())},doSort:function(f){this.setJql(f);this.triggerSort(this.getJql())}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:orderby', location = 'orderby/OrderByView.js' */
define("jira/components/orderby/orderbyview",["require"],function(c){var b=c("jira/components/libs/underscore");var e=c("jira/components/libs/brace");var h=c("jquery");var a=c("jira/util/events");var d=c("jira/components/orderby/eventtypes");var g=c("jira/components/orderby/templates");var f=c("jira/components/orderby/orderbydropdownview");return e.View.extend({template:g.orderBy,events:{"click a.order-by":"_onClickOrderBy","click a.order-options":"_toggleShowDropDown"},initialize:function(){this.model.on("change:sortBy",this.render,this)},render:function(){this.$el.html(this.template(this.model.toJSON()));return this},deactivate:function(){if(this.orderByDropDown){this.orderByDropDown.deactivate()}this.undelegateEvents()},_onClickOrderBy:function(k){var j=new h.Event(d.ISSUE_TABLE_REORDER);a.trigger(j);if(!j.isDefaultPrevented()){var i=h(k.currentTarget).data("field-id");if(i){this.model.toggleSort()}}k.preventDefault()},_toggleShowDropDown:function(i){if(!this.orderByDropDown){this.orderByDropDown=new f({model:this.model,offsetTarget:this.$("a.order-by"),onHideCallback:b.bind(function(){this.orderByDropDown=null},this)})}this.orderByDropDown.toggle();i.preventDefault()}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:orderby', location = 'orderby/OrderByDropDownView.js' */
define("jira/components/orderby/orderbydropdownview",["require"],function(b){var l=b("jira/components/libs/underscore");var i=b("jira/components/libs/brace");var o=b("jquery");var n=b("jira/util/events");var m=b("jira/components/orderby/eventtypes");var g=b("jira/components/orderby/templates");var a=b("jira/ajs/layer/inline-layer");var d=b("jira/ajs/select/checkbox-multi-select");var h=b("jira/ajs/select/suggestions/select-suggest-handler");var k=b("jira/ajs/list/group-descriptor");var j=b("jira/ajs/list/item-descriptor");var f=b("jira/issues/baseview");var c=b("jira/issues/tipsy");var e=b("wrm/context-path");return i.View.extend({initialize:function(p){l.bindAll(this,"_onDropdownHidden","_onDropdownShown");this.offsetTarget=p.offsetTarget;this._onHideCallback=p.onHideCallback;this._pending=null;this._inlineLayer=null},deactivate:function(){if(this._inlineLayer){this._inlineLayer.hide()}f.prototype.deactivate.apply(this,arguments)},toggle:function(){if(!this._inlineLayer){this._pending=o.ajax(this._ajaxDefaults());this._inlineLayer=this._createInlineLayer(this._pending);this._inlineLayer.bind(a.EVENTS.show,this._onDropdownShown);this._inlineLayer.bind(a.EVENTS.hide,this._onDropdownHidden);this._inlineLayer.show()}else{this._inlineLayer.hide()}},_createInlineLayer:function(p){var q=l.bind(function(s){this._deferredAddTipsyToFooter(s);return this._renderInitialContent(s)},this);var r=new a({offsetTarget:this.offsetTarget,content:function(){return p.pipe(q)},width:218});if(this._onHideCallback){r.bind(a.EVENTS.hide,this._onHideCallback)}return r},_initSingleSelect:function(q){var r=q.find("select");r.bind("selected",l.bind(this._onFieldSelected,this));this.selectControl=new d({element:r,itemAttrDisplayed:"label",suggestionsHandler:h,ajaxOptions:this._ajaxDefaults({data:l.bind(function(s){return JSON.stringify(this._ajaxOptionsData(s))},this),query:true,minQueryLength:0,formatResponse:l.bind(function(s){this._removeTipsy();var u=new k();l.each(s.fields,function(v){u.addItem(new j({title:v.fieldName,value:v.fieldId,label:v.fieldName,meta:{sortJql:v.sortJql}}))});var t=this._getFooterText(s);if(t){u.footerText(t);this._deferredAddTipsyToFooter(s)}return[u]},this)})});var p=q.find("#order-by-options-input");p.focus()},_ajaxDefaults:function(q){var p={url:e()+"/rest/orderbycomponent/latest/orderByOptions",type:"POST",contentType:"application/json",data:JSON.stringify(this._ajaxOptionsData())};return l.extend(p,q)},_ajaxOptionsData:function(q){var p=this.model.getJql();var r=this.model.getSortBy();return{query:q,jql:p?p:undefined,sortBy:r?r.fieldId:undefined}},_renderInitialContent:function(p){var q=l.map(p.fields,function(r){return l.extend({},r,{meta:JSON.stringify({sortJql:r.sortJql})})});return o("<div></div>").addClass("order-dropdown").html(g.orderByOptions({options:q,footer:this._getFooterText(p)}))},_onDropdownShown:function(q,p){this._initSingleSelect(p)},_onDropdownHidden:function(){this._removeTipsy();o("div.order-dropdown").remove();this._inlineLayer=null},_onFieldSelected:function(r,q){var p=new o.Event(m.ISSUE_TABLE_REORDER);n.trigger(p);if(!p.isDefaultPrevented()){l.defer(l.bind(function(){if(this.selectControl.outstandingRequest){this.selectControl.outstandingRequest.reject()}a.current.hide();var s=q.meta();this.model.doSort(s.sortJql)},this))}},_getFooterText:function(p){if(typeof p.matchesCount==="number"&&typeof p.maxResults==="number"){var q=p.matchesCount-p.maxResults;if(q>0){return AJS.format("{0} more fields...",q)}}return""},_deferredAddTipsyToFooter:function(s){if(this._inlineLayer){var q=s.matchesCount;var t=Math.min(s.matchesCount,s.maxResults);var r=AJS.format("Showing {0} of {1} matching fields. Find more fields by typing in the search box.",t,q);var p=this;l.defer(function(){p._tipsyTrigger=new c({el:p._inlineLayer.$layer.find(".aui-list-section-footer"),tipsy:{title:function(){return r},className:"tipsy-front"}})})}},_removeTipsy:function(){if(this._tipsyTrigger){this._tipsyTrigger.hide();this._tipsyTrigger=null}}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:orderby', location = 'orderby/OrderBy.js' */
define("jira/components/orderby",["require"],function(b){var c=b("jira/components/orderby/orderbyview");var a=b("jira/components/orderby/orderbymodel");return{create:function(f){var e;var d;f=f||{};e=new a({sortBy:f.sortBy,jql:f.jql});d=new c({model:e});return{onSort:function(){e.onSort.apply(e,arguments);return this},offSort:function(g){e.off("sort",g);return this},render:function(){d.render();return this},setElement:function(g){d.setElement(g);return this},getJql:function(){return e.getJql()},setJql:function(g){e.setJql(g);return this},setSortBy:function(g){e.setSortBy(g);return this}}}}});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:orderby', location = 'orderby/eventtypes.js' */
define("jira/components/orderby/eventtypes",[],function(){return{ISSUE_TABLE_REORDER:"issueTableReorder"}});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:orderby', location = 'orderby/amd-wrapper.js' */
define("jira/components/orderby/templates",function(){return JIRA.Templates.OrderBy});AJS.namespace("JIRA.Templates.OrderBy",null,require("jira/components/orderby/templates"));;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:orderby', location = 'orderby/namespace.js' */
AJS.namespace("JIRA.Components.OrderBy",null,require("jira/components/orderby"));AJS.namespace("JIRA.Issues.OrderByDropDownView",null,require("jira/components/orderby/orderbydropdownview"));AJS.namespace("JIRA.Issues.OrderByView",null,require("jira/components/orderby/orderbyview"));AJS.namespace("JIRA.Issues.OrderByModel",null,require("jira/components/orderby/orderbymodel"));;
;
/* module-key = 'com.atlassian.plugin.jslibs:backbone.paginator-2.0.2-factory', location = 'factories/backbone.paginator/2.0.2/backbone.paginator-2.0.2-factory.js' */
(function(p){define("atlassian/libs/factories/backbone.paginator-2.0.2",function(){return function(q,l){p.call({_:q,Backbone:l});var r=l.PageableCollection.noConflict();r.VERSION="2.0.2";return r}})})(function(){var p=function(k,l){function n(a,b){if(!k.isNumber(a)||k.isNaN(a)||!k.isFinite(a)||~~a!==a)throw new TypeError("`"+b+"` must be a finite integer");return a}function p(a,b,d){if((a=a._events[b])&&a.length){var c=a[a.length-1],e=c.callback;c.callback=function(){try{e.apply(this,arguments),d()}catch(a){throw a;
}finally{c.callback=e}}}else d()}var m=k.extend,u=k.omit,v=k.clone,s=k.each,q=k.pick,r=k.contains,E=k.isEmpty,F=k.pairs,H=k.invert,A=k.isArray,B=k.isFunction,I=k.isObject,y=k.keys,z=k.isUndefined,w=Math.ceil,J=Math.floor,G=Math.max,C=l.Collection.prototype,K=/[\s'"]/g,M=/[<>\s'"]/g,L=l.PageableCollection=l.Collection.extend({state:{firstPage:1,lastPage:null,currentPage:null,pageSize:25,totalPages:null,totalRecords:null,sortKey:null,order:-1},mode:"server",queryParams:{currentPage:"page",pageSize:"per_page",
totalPages:"total_pages",totalRecords:"total_entries",sortKey:"sort_by",order:"order",directions:{"-1":"asc",1:"desc"}},constructor:function(a,b){C.constructor.apply(this,arguments);var b=b||{},d=this.mode=b.mode||this.mode||x.mode,c=m({},x.queryParams,this.queryParams,b.queryParams||{});c.directions=m({},x.queryParams.directions,this.queryParams.directions,c.directions||{});this.queryParams=c;c=this.state=m({},x.state,this.state,b.state||{});c.currentPage=null==c.currentPage?c.firstPage:c.currentPage;
A(a)||(a=a?[a]:[]);a=a.slice();"server"!=d&&(null==c.totalRecords&&!E(a))&&(c.totalRecords=a.length);this.switchMode(d,m({fetch:!1,resetState:!1,models:a},b));var e=b.comparator;c.sortKey&&!e&&this.setSorting(c.sortKey,c.order,b);if("server"!=d&&(d=this.fullCollection,e&&b.full&&(this.comparator=null,d.comparator=e),b.full&&d.sort(),a&&!E(a)))this.reset(a,m({silent:!0},b)),this.getPage(c.currentPage),a.splice.apply(a,[0,a.length].concat(this.models));this._initState=v(this.state)},_makeFullCollection:function(a,
b){var d=["url","model","sync","comparator"],c=this.constructor.prototype,e,f,h,g={};e=0;for(f=d.length;e<f;e++)h=d[e],z(c[h])||(g[h]=c[h]);g=new (l.Collection.extend(g))(a,b);e=0;for(f=d.length;e<f;e++)h=d[e],this[h]!==c[h]&&(g[h]=this[h]);return g},_makeCollectionEventHandler:function(a,b){return function(d,c,e,f){var h=a._handlers;s(y(h),function(d){var c=h[d];a.off(d,c);b.off(d,c)});var g=v(a.state),o=g.firstPage,i=g.pageSize,j=(0===o?g.currentPage:g.currentPage-1)*i,t=j+i;if("add"==d){var k,
l,q,D,f=f||{};e==b?(l=b.indexOf(c),l>=j&&l<t&&(D=a,k=q=l-j)):(k=a.indexOf(c),D=b,q=!z(f.at)?f.at+j:j+k);f.onRemove||(++g.totalRecords,delete f.onRemove);a.state=a._checkState(g);if(D){D.add(c,m({},f||{},{at:q}));var r=k>=i?c:!z(f.at)&&q<t&&a.length>i?a.at(i):null;r&&p(e,d,function(){a.remove(r,{onAdd:true})})}}if("remove"==d)if(f.onAdd)delete f.onAdd;else{--g.totalRecords?(k=g.totalPages=w(g.totalRecords/i),g.lastPage=0===o?k-1:k||o,g.currentPage>k&&(g.currentPage=g.lastPage)):(g.totalRecords=null,
g.totalPages=null);a.state=a._checkState(g);var n,o=f.index;e==a?((n=b.at(t))?p(a,d,function(){a.push(n,{onRemove:true})}):!a.length&&g.totalRecords&&a.reset(b.models.slice(j-i,t-i),m({},f,{parse:!1})),b.remove(c)):o>=j&&o<t&&((n=b.at(t-1))&&p(a,d,function(){a.push(n,{onRemove:true})}),a.remove(c),!a.length&&g.totalRecords&&a.reset(b.models.slice(j-i,t-i),m({},f,{parse:!1})))}if("reset"==d)if(f=e,e=c,e==a&&null==f.from&&null==f.to)g=b.models.slice(0,j),i=b.models.slice(j+a.models.length),b.reset(g.concat(a.models).concat(i),
f);else if(e==b){if(!(g.totalRecords=b.models.length))g.totalRecords=null,g.totalPages=null;"client"==a.mode&&(g.lastPage=g.currentPage=g.firstPage);a.state=a._checkState(g);a.reset(b.models.slice(j,t),m({},f,{parse:!1}))}"sort"==d&&(f=e,c===b&&a.reset(b.models.slice(j,t),m({},f,{parse:!1})));s(y(h),function(d){var c=h[d];s([a,b],function(a){a.on(d,c);a=a._events[d]||[];a.unshift(a.pop())})})}},_checkState:function(a){var b=this.mode,d=this.links,c=a.totalRecords,e=a.pageSize,f=a.currentPage,h=a.firstPage,
g=a.totalPages;if(null!=c&&null!=e&&null!=f&&null!=h&&("infinite"==b?d:1)){c=n(c,"totalRecords");e=n(e,"pageSize");f=n(f,"currentPage");h=n(h,"firstPage");if(1>e)throw new RangeError("`pageSize` must be >= 1");g=a.totalPages=w(c/e);if(0>h||1<h)throw new RangeError("`firstPage must be 0 or 1`");a.lastPage=0===h?G(0,g-1):g||h;if("infinite"==b){if(!d[f+""])throw new RangeError("No link found for page "+f);}else if(f<h||0<g&&(h?f>g:f>=g))throw new RangeError("`currentPage` must be firstPage <= currentPage "+
(h?">":">=")+" totalPages if "+h+"-based. Got "+f+".");}return a},setPageSize:function(a,b){var a=n(a,"pageSize"),b=b||{first:!1},d=this.state,c=w(d.totalRecords/a),e=c?G(d.firstPage,J(c*d.currentPage/d.totalPages)):d.firstPage,d=this.state=this._checkState(m({},d,{pageSize:a,currentPage:b.first?d.firstPage:e,totalPages:c}));return this.getPage(d.currentPage,u(b,["first"]))},switchMode:function(a,b){if(!r(["server","client","infinite"],a))throw new TypeError('`mode` must be one of "server", "client" or "infinite"');
var b=b||{fetch:!0,resetState:!0},d=this.state=b.resetState?v(this._initState):this._checkState(m({},this.state));this.mode=a;var c=this,e=this.fullCollection,f=this._handlers=this._handlers||{},h;if("server"!=a&&!e){e=this._makeFullCollection(b.models||[],b);e.pageableCollection=this;this.fullCollection=e;var g=this._makeCollectionEventHandler(this,e);s(["add","remove","reset","sort"],function(a){f[a]=h=k.bind(g,{},a);c.on(a,h);e.on(a,h)});e.comparator=this._fullComparator}else"server"==a&&e&&(s(y(f),
function(a){h=f[a];c.off(a,h);e.off(a,h)}),delete this._handlers,this._fullComparator=e.comparator,delete this.fullCollection);if("infinite"==a)for(var o=this.links={},i=d.firstPage,j=w(d.totalRecords/d.pageSize),i=0===i?G(0,j-1):j||i,d=d.firstPage;d<=i;d++)o[d]=this.url;else this.links&&delete this.links;return b.fetch?this.fetch(u(b,"fetch","resetState")):this},hasPreviousPage:function(){var a=this.state,b=a.currentPage;return"infinite"!=this.mode?b>a.firstPage:!!this.links[b-1]},hasNextPage:function(){var a=
this.state,b=this.state.currentPage;return"infinite"!=this.mode?b<a.lastPage:!!this.links[b+1]},getFirstPage:function(a){return this.getPage("first",a)},getPreviousPage:function(a){return this.getPage("prev",a)},getNextPage:function(a){return this.getPage("next",a)},getLastPage:function(a){return this.getPage("last",a)},getPage:function(a,b){var d=this.mode,c=this.fullCollection,b=b||{fetch:!1},e=this.state,f=e.firstPage,h=e.currentPage,g=e.lastPage,o=e.pageSize,i=a;switch(a){case "first":i=f;break;
case "prev":i=h-1;break;case "next":i=h+1;break;case "last":i=g;break;default:i=n(a,"index")}this.state=this._checkState(m({},e,{currentPage:i}));b.from=h;b.to=i;e=(0===f?i:i-1)*o;c=c&&c.length?c.models.slice(e,e+o):[];if(("client"==d||"infinite"==d&&!E(c))&&!b.fetch)return this.reset(c,u(b,"fetch")),this;"infinite"==d&&(b.url=this.links[i]);return this.fetch(u(b,"fetch"))},getPageByOffset:function(a,b){if(0>a)throw new RangeError("`offset must be > 0`");var a=n(a),d=J(a/this.state.pageSize);0!==
this.state.firstPage&&d++;d>this.state.lastPage&&(d=this.state.lastPage);return this.getPage(d,b)},sync:function(a,b,d){var c=this;if("infinite"==c.mode){var e=d.success,f=c.state.currentPage;d.success=function(a,b,o){var i=c.links,j=c.parseLinks(a,m({xhr:o},d));j.first&&(i[c.state.firstPage]=j.first);j.prev&&(i[f-1]=j.prev);j.next&&(i[f+1]=j.next);e&&e(a,b,o)}}return(C.sync||l.sync).call(c,a,b,d)},parseLinks:function(a,b){var d={},c=b.xhr.getResponseHeader("Link");if(c){var e=["first","prev","next"];
s(c.split(","),function(a){var a=a.split(";"),b=a[0].replace(M,""),a=a.slice(1);s(a,function(a){var c=a.split("="),a=c[0].replace(K,""),c=c[1].replace(K,"");"rel"==a&&r(e,c)&&(d[c]=b)})})}return d},parse:function(a,b){var d=this.parseState(a,v(this.queryParams),v(this.state),b);d&&(this.state=this._checkState(m({},this.state,d)));return this.parseRecords(a,b)},parseState:function(a,b,d){if(a&&2===a.length&&I(a[0])&&A(a[1])){var c=v(d),e=a[0];s(F(u(b,"directions")),function(a){var b=a[0],a=a[1],d=
e[a];!z(d)&&!k.isNull(d)&&(c[b]=e[a])});e.order&&(c.order=1*H(b.directions)[e.order]);return c}},parseRecords:function(a){return a&&2===a.length&&I(a[0])&&A(a[1])?a[1]:a},fetch:function(a){var a=a||{},b=this._checkState(this.state),d=this.mode;"infinite"==d&&!a.url&&(a.url=this.links[b.currentPage]);var c=a.data||{},e=a.url||this.url||"";B(e)&&(e=e.call(this));var f=e.indexOf("?");if(-1!=f){for(var h=e.slice(f+1),g,k,i={},j=decodeURIComponent,l=h.split("&"),n=0,r=l.length;n<r;n++)g=l[n].split("="),
h=g[0],g=g[1]||!0,h=j(h),g=j(g),k=i[h],A(k)?k.push(g):i[h]=k?[k,g]:g;m(c,i);e=e.slice(0,f)}a.url=e;a.data=c;h="client"==this.mode?q(this.queryParams,"sortKey","order"):u(q(this.queryParams,y(x.queryParams)),"directions");n=F(h);e=v(this);for(f=0;f<n.length;f++)i=n[f],l=i[0],j=i[1],j=B(j)?j.call(e):j,null!=b[l]&&null!=j&&(c[j]=b[l]);b.sortKey&&b.order?(f=B(h.order)?h.order.call(e):h.order,c[f]=this.queryParams.directions[b.order+""]):b.sortKey||delete c[h.order];b=F(u(this.queryParams,y(x.queryParams)));
for(f=0;f<b.length;f++)i=b[f],j=i[1],j=B(j)?j.call(e):j,null!=j&&(c[i[0]]=j);if("server"!=d){var p=this,s=this.fullCollection,w=a.success;a.success=function(b,c,e){e=e||{};z(a.silent)?delete e.silent:e.silent=a.silent;var f=b.models;if(d=="client")s.reset(f,e);else{s.add(f,m({at:s.length},m(e,{parse:false})));p.trigger("reset",p,e)}w&&w(b,c,e)};return C.fetch.call(this,m({},a,{silent:!0}))}return C.fetch.call(this,a)},_makeComparator:function(a,b,d){var c=this.state,a=a||c.sortKey,b=b||c.order;if(a&&
b)return d||(d=function(a,b){return a.get(b)}),function(c,f){var h=d(c,a),g=d(f,a),k;1===b&&(k=h,h=g,g=k);return h===g?0:h<g?-1:1}},setSorting:function(a,b,d){var c=this.state;c.sortKey=a;c.order=b=b||c.order;var c=this.fullCollection,e=!1,f=!1;a||(e=f=!0);var h=this.mode,d=m({side:"client"==h?h:"server",full:!0},d),a=this._makeComparator(a,b,d.sortValue),b=d.full,d=d.side;"client"==d?b?(c&&(c.comparator=a),e=!0):(this.comparator=a,f=!0):"server"==d&&!b&&(this.comparator=a);e&&(this.comparator=null);
f&&c&&(c.comparator=null);return this}}),x=L.prototype;return L},q=this._,l=this.Backbone;if("object"==typeof exports)module.exports=p(require("underscore"),require("backbone"));else if("function"==typeof define&&define.amd)define(["underscore","backbone"],p);else if("undefined"!==typeof q&&"undefined"!==typeof l){var r=l.PageableCollection,H=p(q,l);l.PageableCollection.noConflict=function(){l.PageableCollection=r;return H}}});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:backbone.paginator', location = 'libs/backbone.paginator.js' */
define("jira/components/libs/backbone.paginator",["require"],function(b){var c=b("atlassian/libs/factories/backbone.paginator-2.0.2");var d=b("jira/components/libs/backbone");var a=b("jira/components/libs/underscore");return c(a,d)});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:latest-search-store', location = 'search/LatestSearchStore.js' */
define("jira/components/search/latestStorage",["require"],function(c){var d=c("jquery");var b=c("jira/data/local-storage");var a="jira.issue.navigator.latest.search";return{get:function(){try{var h=b.getItem(a);if(h){var f=d.parseJSON(h);if(f.jql||f.filter){return f}}}catch(g){return{}}},save:function(f){try{b.setItem(a,JSON.stringify(f))}catch(e){}}}});AJS.namespace("JIRA.Issues.LatestSearch",null,require("jira/components/search/latestStorage"));;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:search', location = 'search/Search.js' */
define("jira/components/search",["require"],function(e){var b=e("wrm/context-path");var g=e("jira/components/libs/backbone");var d=e("jira/components/libs/underscore");var f=e("jquery");var c=e("jira/components/search/results");var a=e("jira/components/search/latestStorage");return g.Collection.extend({url:function(){return b()+"/rest/issueNav/1/issueTable"},searchParams:{jql:"",filterId:null,columnConfig:"explicit",columns:[],layoutKey:"split-view",startIndex:0},sync:function(){var h=d.toArray(arguments);var i=h[2];i.type="POST";i.headers={"X-Atlassian-Token":"no-check"};i.data={};d.each(d.keys(this.searchParams),function(j){if(this.searchParams[j]!==null){i.data[j]=this.searchParams[j]}},this);return g.Collection.prototype.sync.apply(this,h)},parse:function(i){var h=i&&i.issueTable;if(!h||!h.issueIds){return[]}return d.map(h.issueIds,function(k,j){return{id:k,key:h.issueKeys[j]}})},update:function(h){this.set(this.parse(h))},setPreloadedData:function(h){this.preloadedData=h;this.reset(h.response,{parse:true});return this.parseResults(h.jql,h.response)},parseResults:function(h,i){a.save({jql:h});return new c([],{issues:this.toJSON(),pageSize:i.issueTable.pageSize,totalRecordsInDB:i.issueTable.total,totalRecordsInSearch:this.length,jql:h})},search:function(h){this.searchParams.jql=h;var i=new f.Deferred();if(this.preloadedData&&this.preloadedData.jql===h){this.reset(this.preloadedData.response,{parse:true});i.resolve(this.parseResults(h,this.preloadedData.response));delete this.preloadedData}else{this.fetch({reset:true,success:d.bind(function(k,j){i.resolve(this.parseResults(k.searchParams.jql,j))},this),error:function(k,j){i.reject(j)}})}return i.promise()}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:search', location = 'search/SearchResult.js' */
define("jira/components/search/result",["require"],function(b){var a=b("wrm/context-path");var c=b("jira/components/libs/backbone");return c.Model.extend({initialize:function(){this.url=function(){return a()+"/rest/api/2/issue/"+this.id+"?fields=summary,status,issuetype"}},parse:function(e){var d={};if(!e.inaccessible){d.id=parseInt(e.id,10);d.key=e.key;if(e.fields){d.summary=e.fields.summary;d.status=e.fields.status.name;d.type={description:e.fields.issuetype.description,iconUrl:e.fields.issuetype.iconUrl,name:e.fields.issuetype.name}}else{d.status=e.status;d.summary=e.summary;d.type=e.type}}else{d.id=parseInt(e.id,10);d.key=e.key;d.inaccessible=true}return d}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:search', location = 'search/SearchResults.js' */
define("jira/components/search/results",["require"],function(d){var a=d("wrm/context-path");var g=d("jira/components/libs/backbone.paginator");var c=d("jira/components/libs/underscore");var f=d("jquery");var h=d("jira/components/search/result");var e=d("jira/legacy/deprecator");var b=g.extend({initialize:function(j,i){i=i||{};this.allIssues=i.issues;this.state.pageSize=i.pageSize;this.state.totalRecords=i.totalRecordsInSearch;this.totalRecordsInDB=i.totalRecordsInDB;this.allowNoSelection=i.allowNoSelection;this.jql=i.jql},model:h,url:function(){return a()+"/rest/issueNav/1/issueTable/stable"},state:{firstPage:0,currentPage:0},queryParams:{currentPage:null,pageSize:null,totalPages:null,totalRecords:null,sortKey:null,directions:null},sync:function(){var i=c.toArray(arguments);var j=i[2];j.type="POST";j.headers={"X-Atlassian-Token":"no-check"};j.data.layoutKey="split-view";j.data.id=this._getStableKeys();return g.prototype.sync.apply(this,i)},isAtTheEndOfStableSearch:function(){var i=this.state.currentPage===this.state.lastPage;var j=this.totalRecordsInDB>this.state.totalRecords;return i&&j},setPreloadedData:function(i){this.preloadedData=i;this.reset(i.response,{parse:true})},_getStableKeys:function(i){var j=typeof i==="undefined"?this._getStartIndex():i;return c.pluck(this.allIssues,"id").slice(j,j+this.state.pageSize)},_getStartIndex:function(){return this.state.pageSize*this.state.currentPage},_loadPageAndSelect:function(i,l){var j=new f.Deferred();var k={fetch:true,reset:true};this.trigger("before:loadpage",{pageToLoad:i});this.getPage(i,k).done(c.bind(function(){this.select(l);j.resolve(this.length)},this)).fail(c.bind(function(m){j.reject(m);this.trigger("error:loadpage",m)},this));return j.promise()},fetch:function(i){var j;if(this.preloadedData&&c.isEqual(this.preloadedData.ids,this._getStableKeys(this.state.pageSize*i.to))){this.reset(this.preloadedData.response,{parse:true});j=new f.Deferred().resolve().promise();delete this.preloadedData}else{j=g.prototype.fetch.call(this,i)}return j},jumpToPage:function(j){var i=new f.Deferred();this._loadPageAndSelect(j,"first").done(i.resolve).fail(i.reject);return i.promise()},jumpToPageForIssue:function(q){var n=new f.Deferred();var m=(typeof q==="number");var p=(typeof q==="string");var l;var k;for(var o=0,j=this.allIssues.length;o<j&&!k;o++){if((m&&this.allIssues[o].id===q)||(p&&this.allIssues[o].key===q)){k=this.allIssues[o];l=Math.floor(o/this.state.pageSize)}}if(typeof l==="number"&&isFinite(l)){this._loadPageAndSelect(l,k.id).done(n.resolve)}else{if(this.allowNoSelection){this._loadPageAndSelect("first",null).done(c.bind(function(){this.trigger("selectIssueNotInList",new h({id:m?q:undefined,key:p?q:undefined}))},this)).done(n.resolve)}else{this._loadPageAndSelect("first","first").done(n.resolve)}}return n.promise()},parse:function(m,k){var j=k.data;var l=m&&m.issueTable;var i=this.allIssues;c.each(l.table,function(n,o){if(n===null){var q=j.id[o];var p=c.findWhere(i,{id:q});if(p){l.table[o]={id:p.id,key:p.key,inaccessible:true}}}});return g.prototype.parse.call(this,l)},parseState:function(){return{}},parseRecords:function(i){if(i.table){return i.table}else{return[]}},select:function(i){if(typeof i==="string"){switch(i){case"first":i=this.at(0);break;case"last":i=this.at(this.length-1);break;default:i=this.findWhere({key:i});break}}else{if(typeof i==="number"){i=this.get(i)}}if(this.selected!==i){this.unselect()}if(!i){return}this.selected=i;this.selected.trigger("select",this.selected)},unselect:function(){if(this.selected){this.selected.trigger("unselect",this.selected)}this.selected=null},navigate:function(l){var j=this.indexOf(this.selected);var k=j+l;var i=this.at(k);if(i){this.select(i)}else{if(l>0&&this.hasNextPage()){this._loadPageAndSelect("next","first")}else{if(l<0&&this.hasPreviousPage()){this._loadPageAndSelect("prev","last")}}}return{current:k,total:this.length}},selectNext:function(){return this.navigate(1)},selectPrev:function(){return this.navigate(-1)},_getIssueByNavigation:function(m){var k=this.indexOf(this.selected);var l=k+m;var j=this.at(l);var i=new f.Deferred();if(j){this.select(j);i.resolve(j)}else{if(m>0&&this.hasNextPage()){this._loadPageAndSelect("next","first").done(function(){i.resolve(this.selected)}.bind(this))}else{if(m<0&&this.hasPreviousPage()){this._loadPageAndSelect("prev","last").done(function(){i.resolve(this.selected)}.bind(this))}else{i.reject()}}}return i.promise()},getNextIssue:function(){return this._getIssueByNavigation(1)},getPreviousIssue:function(){return this._getIssueByNavigation(-1)},updateSelectedIssue:function(){if(this.selected){this.selected.fetch()}},updateIssue:function(j){var i=this.get(j);if(i){i.fetch()}},hasIssueInSearch:function(i){return !!c.where(this.allIssues,{key:i}).length},isEmptySearch:function(){return !this.allIssues.length},removeAndUpdateSelectionIfNeeded:function(n){var l=n.get("key");var j;var q=c.chain(this.allIssues).map(function(i){return i.key}).value();var p=c.indexOf(q,l);var k=p+1<q.length;var o=p-1>=0;if(k){j=q[p+1]}else{if(o){j=q[p-1]}else{j=null}}for(var m=0;m<this.allIssues.length;m++){var r=this.allIssues[m];if(r.key===l){this.allIssues.splice(m,1);break}}this.state.totalRecords=this.state.totalRecords-1;this.totalRecordsInDB=this.totalRecordsInDB-1;this.unselect();this.remove(n);if(j){return this.jumpToPageForIssue(j).done(c.bind(function(){this.trigger("issueDeleted")},this))}else{return new f.Deferred().resolve(0).promise().done(c.bind(function(){this.trigger("issueDeleted")},this))}},getIssueKeyForIndex:function(j){var i=this.allIssues[j];if(!i){return}return i.key},getIssueAtGlobalIndex:function(i){return this.allIssues[i]},getPositionOfIssueInSearchResults:function(j){var i=c.indexOf(c.pluck(this.allIssues,"id"),j);if(i>-1){return i}else{return null}},getPositionOfIssueInPage:function(k){var j=this.get(k);var i=this.indexOf(j);if(i>-1){return i}else{return null}},getTotalIssues:function(){return this.getTotalIssuesInSearch()},getTotalIssuesInSearch:function(){return this.allIssues.length},getTotalIssuesInDb:function(){return this.totalRecordsInDB}});e.prop(b.prototype,"getTotalIssues",{removeInVersion:"8.0",alternativeName:"jira/components/search/results#getTotalIssuesInSearch()",sinceVersion:"7.1",displayName:"Method jira/components/search/results#getTotalIssues()"});return b});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:underscore', location = '/inline-issue-create/lib/underscore/underscore-amd.js' */
define("jira/inline-issue-create/lib/underscore",["atlassian/libs/underscore-1.5.2"],function(a){return a});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:backbone', location = '/inline-issue-create/lib/backbone/backbone-amd.js' */
define("jira/inline-issue-create/lib/backbone",["atlassian/libs/factories/backbone-1.0.0","jira/inline-issue-create/lib/underscore","jquery"],function(a,b,c){return a(b,c)});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:brace', location = '/inline-issue-create/lib/backbone.brace/backbone.brace-amd.js' */
define("jira/inline-issue-create/lib/brace",["jira/inline-issue-create/lib/backbone","jira/inline-issue-create/lib/underscore","atlassian/libs/factories/brace-2014.09.03"],function(c,a,b){return b(a,c)});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:marionette', location = '/inline-issue-create/lib/backbone.marionette/backbone.marionette-amd.js' */
define("jira/inline-issue-create/lib/marionette",["jquery","jira/util/logger","jira/inline-issue-create/lib/backbone","jira/inline-issue-create/lib/underscore","atlassian/libs/factories/marionette-2.1.0"],function(f,c,h,b,e){var g=e(b,h);var d={unwrapTemplate:function a(){var i=this.$el.children();if(i.length>1){c.warn("[IIC] Unwrapping template with more than one child - some content will be lost")}var j=f(i.get(0));if(this.$el.parent().length){this.$el.replaceWith(j);this.setElement(j)}else{this.setElement(j)}}};b.extend(g.ItemView.prototype,d);b.extend(g.CompositeView.prototype,d);b.extend(g.CollectionView.prototype,d);b.extend(g.LayoutView.prototype,d);return g});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:placeholder', location = '/inline-issue-create/lib/jquery-placeholder.js' */
/*! MIT License - https://github.com/mathiasbynens/jquery-placeholder/blob/master/LICENSE-MIT.txt */
/*! http://mths.be/placeholder v2.0.8 by @mathias */
(function(i,k,f){var b=Object.prototype.toString.call(i.operamini)=="[object OperaMini]";var a="placeholder" in k.createElement("input")&&!b;var g="placeholder" in k.createElement("textarea")&&!b;var l=f.fn;var e=f.valHooks;var c=f.propHooks;var n;var m;if(a&&g){m=l.placeholder=function(){return this};m.input=m.textarea=true}else{m=l.placeholder=function(){var p=this;p.filter((a?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":d,"blur.placeholder":h}).data("placeholder-enabled",true).trigger("blur.placeholder");return p};m.input=a;m.textarea=g;n={get:function(q){var p=f(q);var r=p.data("placeholder-password");if(r){return r[0].value}return p.data("placeholder-enabled")&&p.hasClass("placeholder")?"":q.value},set:function(q,s){var p=f(q);var r=p.data("placeholder-password");if(r){return r[0].value=s}if(!p.data("placeholder-enabled")){return q.value=s}if(s==""){q.value=s;if(q!=o()){h.call(q)}}else{if(p.hasClass("placeholder")){d.call(q,true,s)||(q.value=s)}else{q.value=s}}return p}};if(!a){e.input=n;c.value=n}if(!g){e.textarea=n;c.value=n}f(function(){f(k).delegate("form","submit.placeholder",function(){var p=f(".placeholder",this).each(d);setTimeout(function(){p.each(h)},10)})});f(i).bind("beforeunload.placeholder",function(){f(".placeholder").each(function(){this.value=""})})}function j(q){var p={};var r=/^jQuery\d+$/;f.each(q.attributes,function(t,s){if(s.specified&&!r.test(s.name)){p[s.name]=s.value}});return p}function d(q,r){var p=this;var s=f(p);if(p.value==s.attr("placeholder")&&s.hasClass("placeholder")){if(s.data("placeholder-password")){s=s.hide().next().show().attr("id",s.removeAttr("id").data("placeholder-id"));if(q===true){return s[0].value=r}s.focus()}else{p.value="";s.removeClass("placeholder");p==o()&&p.select()}}}function h(){var t;var p=this;var s=f(p);var r=this.id;if(p.value==""){if(p.type=="password"){if(!s.data("placeholder-textinput")){try{t=s.clone().attr({type:"text"})}catch(q){t=f("<input>").attr(f.extend(j(this),{type:"text"}))}t.removeAttr("name").data({"placeholder-password":s,"placeholder-id":r}).bind("focus.placeholder",d);s.data({"placeholder-textinput":t,"placeholder-id":r}).before(t)}s=s.removeAttr("id").hide().prev().attr("id",r).show()}s.addClass("placeholder");s[0].value=s.attr("placeholder")}else{s.removeClass("placeholder")}}function o(){try{return k.activeElement}catch(p){}}}(this,document,jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:util', location = '/inline-issue-create/util/util.js' */
define("jira/inline-issue-create/util",["jira/util/logger","jira/inline-issue-create/lib/underscore","jquery"],function(m,k,g){var j=(document.body||document.documentElement).style;var d=["oAnimationEnd","MSAnimationEnd","mozAnimationEnd","webkitAnimationEnd","animationend"];var l;return{cssAnimationsSupport:j.transition!==undefined||j.WebkitTransition!==undefined||j.MozTransition!==undefined||j.MsTransition!==undefined||j.OTransition!==undefined,addClassAndRemoveOnAnimationEnd:function c(q,p,n){var o;q=g(q);function r(){for(o=0;o<d.length;o++){q.off(d[o],r)}q.removeClass(p)}if(this.cssAnimationsSupport){for(o=0;o<d.length;o++){q.on(d[o],r)}}else{setTimeout(function(){q.removeClass(p)},n||1000)}q.addClass(p)},scrollElementToView:function h(s,n){var o=s[0].getBoundingClientRect();var r=n[0].getBoundingClientRect();var q=s.scrollTop();var p=0;if(r.top<o.top){p=r.top-o.top}else{if(o.bottom<r.bottom){p=r.bottom-o.bottom}}if(p!==0){s.scrollTop(q+p)}},keyCode:{ENTER:13,ESC:27},after:function b(o,q,n){if(!k.isFunction(n)){throw"Body is not a function"}o[q]=k.wrap(o[q],function p(s){var t=Array.prototype.slice.call(arguments,1);var r=s.apply(o,t);n.apply(this,k.union([r],t));return r})},error:function i(o){var n=Array.prototype.slice.call(arguments,1);if(k.isString(n[0])){n[0]="[IIC]"+n[0]}m.error.apply(m,n)},debug:function a(o){if(this.shouldDisplay(o)){var n=Array.prototype.slice.call(arguments,1);if(k.isString(n[0])){n[0]="[IIC]"+n[0]}m.debug.apply(m,n)}},trace:function f(o){if(this.shouldDisplay(o)){var n=Array.prototype.slice.call(arguments,1);if(k.isString(n[0])){n[0]="[IIC]"+n[0]}m.debug.apply(m,n)}},shouldDisplay:function(n){if(l==="all"||n===l){return true}return false},showLogsFor:function e(n){l=n}}});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:analytics', location = '/inline-issue-create/components/inline-issue-create-widget/inline-issue-create-analytics.js' */
define("jira/inline-issue-create/analytics",["jira/inline-issue-create/lib/underscore","jira/analytics","jira/inline-issue-create/lib/marionette"],function(g,e,d){return d.Controller.extend({initialize:function c(j){this.loadTimestamp=new Date().getTime();var k=j.widget;this.widgetId=k.model.cid.substring(1);this.projects=k.projects;this.listenTo(k,"issueCreated",this.onIssueCreated);this.listenTo(k,"openCreateIssueDialog",this.onOpenCreateIssueDialog);this.listenTo(k,"activated",this.onActivated);this.listenTo(k,"deactivated",this.onDeactivated)},triggerAnalytics:function b(l,n){var j="";var m="";if(this.projects&&this.projects.size()>0){var o=this.projects.first();j=o.get("id");m=o.get("type")}var k=g.defaults({},n,{instance:this.widgetId,timestarted:this.loadTimestamp,projectId:j,projectType:m});e.send({name:"jira.inlinecreate."+l,data:k})},onOpenCreateIssueDialog:function i(j){this.triggerAnalytics("openDialog",{reason:j.reason})},onIssueCreated:function a(j,l,m,k){if(k.source==="inline"){this.triggerAnalytics("issueCreatedInline")}else{this.triggerAnalytics("issueCreatedDialog")}},onDeactivated:function f(){this.triggerAnalytics("deactivated")},onActivated:function h(){this.triggerAnalytics("activated")}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-preffilable-create-issue-dialog', location = '/inline-issue-create/components/prefillable-create-issue-dialog/custom-form-container-factory.js' */
define("jira/inline-issue-create/prefillable-create-issue-dialog/custom-form-container-factory",["jira/jquery/deferred","jquery","jira/inline-issue-create/lib/underscore"],function(b,c,a){var d=function(){var g=JIRA.Forms.Container;return g.extend({lazyInit:function f(){var h=this.options.call(this);this.prefilledValues=h.prefilledValues;this.prefilledValues.fieldsToRetain=a.keys(h.prefilledValues);this.prefilledValues=c.param(h.prefilledValues);this.options=function i(){return h};return this._super()},render:function e(){var h=this;var i=new b();this.lazyInit();if(a.isFunction(h.model.markFieldAsDirty)){Object.keys(this.options().prefilledValues).forEach(function(l){h.model.markFieldAsDirty(l)})}h.model.getUseConfigurableForm().done(function k(l){if(l===true){h.configurableForm.render(h.prefilledValues).done(function m(o,n){i.resolveWith(h,[h.$element]);h.$element.append(n)})}else{h.unconfigurableForm.render(h.prefilledValues).done(function m(o,n){i.resolveWith(h,[h.$element,n]);h.$element.append(n)})}}).fail(function j(){i.resolveWith(h,[h.$element])});return i.promise()}})};return{build:d}});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-preffilable-create-issue-dialog', location = '/inline-issue-create/components/prefillable-create-issue-dialog/prefillable-create-issue-dialog-init-form.js' */
define("jira/inline-issue-create/prefillable-create-issue-dialog/init-form",["jira/util/formatter","jira/inline-issue-create/lib/underscore","jira/inline-issue-create/prefillable-create-issue-dialog/custom-form-container-factory"],function(c,b,a){return function(u,n){if(!b.isObject(n)){throw new Error("You must provide promise that will resolve with fieldValues to create this form. Use standard create issue form if you have none.")}var l=JIRA.Forms.CreateIssueModel;var q=JIRA.Forms.ConfigurableCreateIssueForm;var m=JIRA.Forms.UnconfigurableCreateIssueForm;var f=JIRA.Forms.CreateIssueError;var e=JIRA.applyErrorsToForm;var j=JIRA.applyErrorMessageToForm;var t;n.done(function o(v){t=v;t.prefilledFields=t.prefilledFields||{};t.errors=t.errors||{};t.errorMessages=t.errorMessages||{}}).fail(function k(){t={prefilledFields:{},errors:{},errorMessages:{}}});var g=a.build();var d=new g(function r(){var y={title:"Create Issue",id:"prefillable-create-issue-dialog",globalEventNamespaces:["PrefillableCreateIssueDialog"],issueType:undefined};var v=new l({projectId:undefined,issueType:undefined});var x=new q({model:v,title:y.title,globalEventNamespaces:y.globalEventNamespaces});var w=new m({model:v,title:y.title,globalEventNamespaces:y.globalEventNamespaces});return{globalEventNamespaces:y.globalEventNamespaces,model:v,errorHandler:new f(),configurableForm:x,unconfigurableForm:w,prefilledValues:t.prefilledFields}});var p=d.asDialog({windowTitle:"Create Issue",id:"prefillable-create-issue-dialog"});p.options.delayShowUntil=function i(){return n};d.asDialog=function h(){return d.dialog};p.onContentReady(function s(){if(b.keys(t.errors).length){t.errorMessages.unshift("Please fix the fields marked below.");e(d.$element,t.errors)}if(t.errorMessages.length){j(d.$element,t.errorMessages.join("<br/>"))}});u.resolve(d)}});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-preffilable-create-issue-dialog', location = '/inline-issue-create/components/prefillable-create-issue-dialog/prefillable-create-issue-dialog.js' */
define("jira/inline-issue-create/prefillable-create-issue-dialog",["jira/util/formatter","jira/jquery/deferred","wrm/require","jira/loading/loading","jira/flag","jira/inline-issue-create/prefillable-create-issue-dialog/init-form"],function(h,f,d,g,k,e){var a=AJS.dim;var i=AJS.undim;var c=function(){a();g.showLoadingIndicator()};var b=function(){i();g.hideLoadingIndicator()};var j=function j(m,n){var l=new f();if(n){c()}d(["wr!com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue"],e.bind(undefined,l,m)).fail(function(){if(n){b()}k.showErrorMsg(null,"The JIRA server could not be contacted. This may be a temporary glitch or the server may be down.")});return l.promise()};return{createPrefillableCreateIssueForm:j}});define("jira/inline-issue-create/prefillable-create-issue-dialog/custom-form-container-factory",["jira/jquery/deferred","jquery","jira/inline-issue-create/lib/underscore"],function(b,c,a){var e=JIRA.Forms.Container;var d=function(){return e.extend({lazyInit:function g(){var h=this.options.call(this);this.prefilledValues=h.prefilledValues;this.prefilledValues.fieldsToRetain=a.keys(h.prefilledValues);this.prefilledValues=c.param(h.prefilledValues);this.options=function i(){return h};return this._super()},render:function f(){var h=this;var i=new b();this.lazyInit();if(a.isFunction(h.model.markFieldAsDirty)){Object.keys(this.options().prefilledValues).forEach(function(l){h.model.markFieldAsDirty(l)})}h.model.getUseConfigurableForm().done(function k(l){if(l===true){h.configurableForm.render(h.prefilledValues).done(function m(o,n){i.resolveWith(h,[h.$element]);h.$element.append(n)})}else{h.unconfigurableForm.render(h.prefilledValues).done(function m(o,n){i.resolveWith(h,[h.$element,n]);h.$element.append(n)})}}).fail(function j(){i.resolveWith(h,[h.$element])});return i.promise()}})};return{build:d}});define("jira/inline-issue-create/prefillable-create-issue-dialog/ondone",["jira/util/formatter","jira/inline-issue-create/lib/underscore","jira/inline-issue-create/prefillable-create-issue-dialog/custom-form-container-factory"],function(e,f,i){var d=JIRA.Forms.CreateIssueModel;var g=JIRA.Forms.ConfigurableCreateIssueForm;var c=JIRA.Forms.UnconfigurableCreateIssueForm;var h=JIRA.Forms.CreateIssueError;var a=JIRA.applyErrorsToForm;var b=JIRA.applyErrorMessageToForm;return function(t,l){if(!f.isObject(l)){throw new Error("You must provide promise that will resolve with fieldValues to create this form. Use standard create issue form if you have none.")}var n;l.done(function q(v){n=v;n.prefilledFields=n.prefilledFields||{};n.errors=n.errors||{};n.errorMessages=n.errorMessages||{}}).fail(function k(){n={prefilledFields:{},errors:{},errorMessages:{}}});var o=i.build();var j=new o(function s(){var y={title:"Create Issue",id:"prefillable-create-issue-dialog",globalEventNamespaces:["PrefillableCreateIssueDialog"],issueType:undefined};var v=new d({projectId:undefined,issueType:undefined});var x=new g({model:v,title:y.title,globalEventNamespaces:y.globalEventNamespaces});var w=new c({model:v,title:y.title,globalEventNamespaces:y.globalEventNamespaces});return{globalEventNamespaces:y.globalEventNamespaces,model:v,errorHandler:new h(),configurableForm:x,unconfigurableForm:w,prefilledValues:n.prefilledFields}});var p=j.asDialog({windowTitle:"Create Issue",id:"prefillable-create-issue-dialog"});p.options.delayShowUntil=function m(){return l};j.asDialog=function r(){return j.dialog};p.onContentReady(function u(){if(f.keys(n.errors).length){n.errorMessages.unshift("Please fix the fields marked below.");a(j.$element,n.errors)}if(n.errorMessages.length){b(j.$element,n.errorMessages.join("<br/>"))}});t.resolve(j)}});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/inline-issue-create-widget.soy' */
// This file was automatically generated from inline-issue-create-widget.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.InlineIssueCreate.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.InlineIssueCreate == 'undefined') { JIRA.Templates.InlineIssueCreate = {}; }


JIRA.Templates.InlineIssueCreate.trigger = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="iic' + ((opt_data.cssClass) ? ' ' + soy.$$escapeHtml(opt_data.cssClass) : '') + '"><div class="iic-trigger"><button type="button">' + soy.$$escapeHtml("Create issue") + '</button></div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.InlineIssueCreate.trigger.soyTemplateName = 'JIRA.Templates.InlineIssueCreate.trigger';
}


JIRA.Templates.InlineIssueCreate.widget = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="iic-widget' + ((opt_data.cssClass) ? ' ' + soy.$$escapeHtml(opt_data.cssClass) : '') + '"><form action="#" method="POST" class="iic-widget__form aui"><div class="iic-widget__issue-type-selector-container"></div><div><textarea name="summary" rows="1" cols="50" maxlength="255" class="iic-widget__summary" placeholder="' + soy.$$escapeHtml("What needs to be done?") + '">' + ((opt_data.summary) ? soy.$$escapeHtml(opt_data.summary) : '') + '</textarea><div class="iic-widget__footer"><div class="iic-widget__description-container"></div><button type="button" class="aui-button aui-button-subtle iic-widget__more" title="' + soy.$$escapeHtml("Open create dialog") + '"><span class="aui-icon aui-icon-small aui-iconfont-more">' + soy.$$escapeHtml("More") + '</span></button><button type="button" class="aui-button aui-button-link iic-widget__cancel">' + soy.$$escapeHtml("Cancel") + '</button></div></div></form></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.InlineIssueCreate.widget.soyTemplateName = 'JIRA.Templates.InlineIssueCreate.widget';
}


JIRA.Templates.InlineIssueCreate.issueTypeSelector = function(opt_data, opt_ignored) {
  return '<div class="iic-widget__issue-type-selector"><button type="button" class="iic-widget__issue-type-selector__trigger aui-dropdown2-trigger" aria-owns="iic-issue-type-dropdown-' + soy.$$escapeHtml(opt_data.widgetId) + '" aria-haspopup="true">' + ((! opt_data.isLocked) ? '<img src="' + soy.$$escapeHtml(opt_data.issueTypeIconUrl) + '" width="16" height="16" />' : '<img src="data:image/gif;base64,R0lGODlhEAAQAMQAAP///+7u7t3d3bu7u6qqqpmZmYiIiHd3d2ZmZlVVVURERDMzMyIiIhEREQARAAAAAP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFBwAQACwAAAAAEAAQAAAFdyAkQgGJJOWoQgIjBM8jkKsoPEzgyMGsCjPDw7ADpkQBxRDmSCRetpRA6Rj4kFBkgLC4IlUGhbNQIwXOYYWCXDufzYPDMaoKGBoKb886OjAKdgZAAgQkfCwzAgsDBAUCgl8jAQkHEAVkAoA1AgczlyIDczUDA2UhACH5BAUHABAALAAAAAAPABAAAAVjICSO0IGIATkqIiMKDaGKC8Q49jPMYsE0hQdrlABCGgvT45FKiRKQhWA0mPKGPAgBcTjsspBCAoH4gl+FmXNEUEBVAYHToJAVZK/XWoQQDAgBZioHaX8igigFKYYQVlkCjiMhACH5BAUHABAALAAAAAAQAA8AAAVgICSOUGGQqIiIChMESyo6CdQGdRqUENESI8FAdFgAFwqDISYwPB4CVSMnEhSej+FogNhtHyfRQFmIol5owmEta/fcKITB6y4choMBmk7yGgSAEAJ8JAVDgQFmKUCCZnwhACH5BAUHABAALAAAAAAQABAAAAViICSOYkGe4hFAiSImAwotB+si6Co2QxvjAYHIgBAqDoWCK2Bq6A40iA4yYMggNZKwGFgVCAQZotFwwJIF4QnxaC9IsZNgLtAJDKbraJCGzPVSIgEDXVNXA0JdgH6ChoCKKCEAIfkEBQcAEAAsAAAAABAADgAABUkgJI7QcZComIjPw6bs2kINLB5uW9Bo0gyQx8LkKgVHiccKVdyRlqjFSAApOKOtR810StVeU9RAmLqOxi0qRG3LptikAVQEh4UAACH5BAUHABAALAAAAAAQABAAAAVxICSO0DCQKBQQonGIh5AGB2sYkMHIqYAIN0EDRxoQZIaC6bAoMRSiwMAwCIwCggRkwRMJWKSAomBVCc5lUiGRUBjO6FSBwWggwijBooDCdiFfIlBRAlYBZQ0PWRANaSkED1oQYHgjDA8nM3kPfCmejiEAIfkEBQcAEAAsAAAAABAAEAAABWAgJI6QIJCoOIhFwabsSbiFAotGMEMKgZoB3cBUQIgURpFgmEI0EqjACYXwiYJBGAGBgGIDWsVicbiNEgSsGbKCIMCwA4IBCRgXt8bDACkvYQF6U1OADg8mDlaACQtwJCEAIfkEBQcAEAAsAAABABAADwAABV4gJEKCOAwiMa4Q2qIDwq4wiriBmItCCREHUsIwCgh2q8MiyEKODK7ZbHCoqqSjWGKI1d2kRp+RAWGyHg+DQUEmKliGx4HBKECIMwG61AgssAQPKA19EAxRKz4QCVIhACH5BAUHABAALAAAAAAQABAAAAVjICSOUBCQqHhCgiAOKyqcLVvEZOC2geGiK5NpQBAZCilgAYFMogo/J0lgqEpHgoO2+GIMUL6p4vFojhQNg8rxWLgYBQJCASkwEKLC17hYFJtRIwwBfRAJDk4ObwsidEkrWkkhACH5BAUHABAALAAAAQAQAA8AAAVcICSOUGAGAqmKpjis6vmuqSrUxQyPhDEEtpUOgmgYETCCcrB4OBWwQsGHEhQatVFhB/mNAojFVsQgBhgKpSHRTRxEhGwhoRg0CCXYAkKHHPZCZRAKUERZMAYGMCEAIfkEBQcAEAAsAAABABAADwAABV0gJI4kFJToGAilwKLCST6PUcrB8A70844CXenwILRkIoYyBRk4BQlHo3FIOQmvAEGBMpYSop/IgPBCFpCqIuEsIESHgkgoJxwQAjSzwb1DClwwgQhgAVVMIgVyKCEAIfkECQcAEAAsAAAAABAAEAAABWQgJI5kSQ6NYK7Dw6xr8hCw+ELC85hCIAq3Am0U6JUKjkHJNzIsFAqDqShQHRhY6bKqgvgGCZOSFDhAUiWCYQwJSxGHKqGAE/5EqIHBjOgyRQELCBB7EAQHfySDhGYQdDWGQyUhADs=" width="16" height="16" />') + '</button><div id="iic-issue-type-dropdown-' + soy.$$escapeHtml(opt_data.widgetId) + '" data-aui-alignment="top left" class="aui-dropdown2 aui-style-default iic-widget__issue-type-selector__dropdown"><div class="aui-dropdown2-section"><ul class="aui-list-truncate"></ul></div></div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.InlineIssueCreate.issueTypeSelector.soyTemplateName = 'JIRA.Templates.InlineIssueCreate.issueTypeSelector';
}


JIRA.Templates.InlineIssueCreate.issueTypeSelectorItem = function(opt_data, opt_ignored) {
  return '<li><a href="#" class="aui-icon-container" data-id="' + soy.$$escapeHtml(opt_data.id) + '" style="background-image: url(\'' + soy.$$escapeHtml(opt_data.iconUrl) + '\');">' + soy.$$escapeHtml(opt_data.name) + '</a></li>';
};
if (goog.DEBUG) {
  JIRA.Templates.InlineIssueCreate.issueTypeSelectorItem.soyTemplateName = 'JIRA.Templates.InlineIssueCreate.issueTypeSelectorItem';
}


JIRA.Templates.InlineIssueCreate.description = function(opt_data, opt_ignored) {
  return '<div class="iic-widget__description' + ((! opt_data.issueTypeName) ? ' iic-widget__description_invisible' : '') + '">' + soy.$$escapeHtml("New") + ' <span class="iic-widget__description__selected-issue-type-name">' + ((opt_data.issueTypeName) ? soy.$$escapeHtml(opt_data.issueTypeName) : '') + '</span></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.InlineIssueCreate.description.soyTemplateName = 'JIRA.Templates.InlineIssueCreate.description';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/possibleValues.js' */
define("jira/inline-issue-create/entities/possible-values",["jira/inline-issue-create/lib/backbone","jira/inline-issue-create/lib/underscore","wrm/context-path","jira/inline-issue-create/lib/brace"],function(k,l,d,h){return h.Collection.extend({url:function b(){var n=l.map(this.jqls,function(o){return"query="+encodeURIComponent(o)+"&"});return d()+"/rest/inline-create/1.0/context/possibleValues/"+this.getEntityName()+"?".concat.apply("?",n)},getEntityName:undefined,initialize:function e(n,o){this._initializeState(n,o)},_initializeState:function j(n,o){if(o&&o.jqls){this.jqls=o.jqls}else{this.jqls=undefined}this.fetching=false;this.initialized=false},parse:function c(n){return n.values},setJQLs:function f(n){if(l.isEqual(this.jqls,n)){return}this.jqls=n;this.fetch({reset:true})},reset:function g(){this.fetching=false;this.initialized=true;return k.Collection.prototype.reset.apply(this,arguments)},fetch:function a(o){var q=this;function n(){q.fetching=false;q.initialized=true;q.trigger("fetch:finished")}o=o||{};if(o.success){o.success=l.wrap(o.success,function p(r){n();return r.apply(q,Array.prototype.slice.call(arguments,1))})}else{o.success=n}this.trigger("fetch:started");this.fetching=true;return k.Collection.prototype.fetch.call(this,o)},isInitialized:function i(){return this.initialized},isFetching:function m(){return this.fetching}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/issueType.js' */
define("jira/inline-issue-create/entities/issue-type",["jira/inline-issue-create/lib/brace"],function(a){var b=a.Model.extend({namedAttributes:{id:"string",name:"string",description:"string",iconUrl:"string",subtask:"boolean"}});return b});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/issueTypes.js' */
define("jira/inline-issue-create/entities/issue-types",["jira/inline-issue-create/entities/possible-values","jira/inline-issue-create/entities/issue-type"],function(a,b){return a.extend({model:b,getEntityName:function(){return"issuetype"}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/project.js' */
define("jira/inline-issue-create/entities/project",["jira/inline-issue-create/lib/brace"],function(a){return a.Model.extend({namedAttributes:{id:"number",type:"string"}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/projects.js' */
define("jira/inline-issue-create/entities/projects",["jira/inline-issue-create/entities/possible-values","jira/inline-issue-create/entities/project"],function(b,c){return b.extend({model:c,comparator:function a(d){return d.getId()},getEntityName:function(){return"project"}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/inlineIssue.js' */
define("jira/inline-issue-create/entities/inline-issue",["jquery","wrm/context-path","jira/inline-issue-create/lib/brace"],function(f,b,c){return c.Model.extend({initialize:function a(){this._isSaving=false},save:function e(){var g=this;var h=f.ajax(b()+"/rest/inline-create/1.0/issue",{data:JSON.stringify(this.toJSON()),contentType:"application/json",type:"POST"});this._isSaving=true;return h.always(function i(){g._isSaving=false})},isSaving:function d(){return this._isSaving}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/inlineBootstrap.js' */
define("jira/inline-issue-create/entities/inline-bootstrap",["jira/inline-issue-create/lib/backbone","jira/inline-issue-create/lib/underscore","wrm/context-path","jira/util/logger","jira/inline-issue-create/lib/brace","jira/inline-issue-create/entities/projects","jira/inline-issue-create/entities/issue-types"],function(m,n,f,o,j,i,e){return j.Model.extend({issueTypesCollectionType:e,projectsCollectionType:i,namedAttributes:{hasCreateIssuePermission:"boolean",hasScheduleIssuePermission:"boolean"},initialize:function g(){this.issueTypes=new this.issueTypesCollectionType();this.projects=new this.projectsCollectionType()},url:function c(){var q=n.map(this.jqls,function(r){return"query="+encodeURIComponent(r)+"&"});return f()+"/rest/inline-create/1.0/context/bootstrap"+"?".concat.apply("?",q)},_initializeState:function l(q,r){if(r&&r.jqls){this.jqls=r.jqls}else{this.jqls=undefined}this.fetching=false;this.initialized=false},setJQLs:function b(q){if(n.isEqual(this.jqls,q)){return}this.jqls=q;this.fetch({reset:true})},parse:function d(r){var q=this;var t=n.map(r.issueTypes.values,function(u){return n.pick(u,n.keys(q.issueTypes.model.prototype.namedAttributes))});this.issueTypes.reset(t);var s=n.map(r.projects.values,function(u){return n.pick(u,n.keys(q.projects.model.prototype.namedAttributes))});this.projects.reset(s);return n.pick(r,"hasCreateIssuePermission","hasScheduleIssuePermission")},fetch:function a(s){var r=this;function q(){r.fetching=false;r.initialized=true;o.trace("inline.create.bootstrap.fetched")}s=s||{};if(s.success){s.success=n.wrap(s.success,function t(u){q();return u.apply(r,Array.prototype.slice.call(arguments,1))})}else{s.success=q}this.fetching=true;o.trace("inline.create.bootstrap.fetching");return m.Model.prototype.fetch.call(this,s)},isInitialized:function k(){return this.initialized},isFetching:function p(){return this.fetching},fireWhenInitialized:function h(q){if(this.isInitialized()&&(!this.isFetching())){q()}else{this.listenToOnce(this,"sync",q)}}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/views/description.js' */
define("jira/inline-issue-create/views/description",["jira/inline-issue-create/lib/marionette"],function(e){var a=e.ItemView.extend({template:JIRA.Templates.InlineIssueCreate.description,ui:{selectedIssueTypeName:".iic-widget__description__selected-issue-type-name"},modelEvents:{"change:selectedIssueType":function c(){var f=(this.model.getSelectedIssueType()&&this.model.getSelectedIssueType().getName())||"";if(f){this.$el.removeClass("iic-widget__description_invisible");this.ui.selectedIssueTypeName.text(f)}else{this.$el.addClass("iic-widget__description_invisible")}}},serializeData:function b(){var f={};if(this.model.getSelectedIssueType()){f=this.model.getSelectedIssueType().toJSON()}return{issueTypeName:f.name}},onRender:function d(){this.unwrapTemplate()}});return a});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/views/issueTypeDropdown.js' */
define("jira/inline-issue-create/views/issue-type-dropdown",["jira/inline-issue-create/lib/underscore","jquery","jira/inline-issue-create/lib/marionette","jira/inline-issue-create/views/issue-type-dropdown-item"],function(k,c,j,g){var a=j.CompositeView.extend({childView:g,childViewOptions:function l(o,n){return{model:o,dropdownModel:this.model}},template:JIRA.Templates.InlineIssueCreate.issueTypeSelector,childViewContainer:".aui-list-truncate",ui:{trigger:".iic-widget__issue-type-selector__trigger",issueTypeIcon:".iic-widget__issue-type-selector__trigger img",issueTypeDropdown:".iic-widget__issue-type-selector__dropdown"},modelEvents:{"change:selectedIssueType":function d(){if(this.model.getSelectedIssueType()){this.ui.issueTypeIcon.attr("src",this.model.getSelectedIssueType().getIconUrl())}},"change:lockState":function f(n,o){this.render();if(o===this.model.constants.STATE_LOCK_SENDING){this.ui.trigger.attr("aria-disabled",true)}else{this.ui.trigger.attr("aria-disabled",false)}}},initialize:function b(){this.isDropdownShown=false;k.bindAll(this,"onDropdownShow")},serializeData:function i(){var n={};if(this.model.getSelectedIssueType()){n=this.model.getSelectedIssueType().toJSON()}return{widgetId:this.options.widgetId,isLocked:this.model.getLockState()!==this.model.constants.STATE_LOCK_UNLOCKED,issueTypeIconUrl:n.iconUrl}},onRender:function m(){this.unwrapTemplate();this.ui.issueTypeDropdown.on("aui-dropdown2-show",this.onDropdownShow)},onDropdownShow:function e(){var s=this.ui.issueTypeDropdown;s.appendTo(this.$el);var n=this.ui.issueTypeIcon.offset();var r=this.ui.issueTypeIcon.position();var o=this.ui.issueTypeIcon.outerHeight();var p=s.height();var q=c("body").outerHeight(true)<n.top+o+p;s.css({left:r.left,top:(q?r.top-p:r.top+o)+"px"})},onChildviewSelected:function h(n){this.trigger("issueTypeSelected",n.model)}});return a});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/views/issueTypeDropdownItem.js' */
define("jira/inline-issue-create/views/issue-type-dropdown-item",["jira/inline-issue-create/lib/marionette"],function(e){var b=e.ItemView.extend({template:JIRA.Templates.InlineIssueCreate.issueTypeSelectorItem,initialize:function a(f){this.dropdownModel=f.dropdownModel},events:{"click a":function d(f){f.preventDefault();this.trigger("selected")}},onRender:function c(){this.unwrapTemplate()}});return b});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/views/defaultTrigger.js' */
define("jira/inline-issue-create/views/default-trigger",["jira/inline-issue-create/lib/marionette"],function(g){var d=g.ItemView.extend({template:JIRA.Templates.InlineIssueCreate.trigger,ui:{trigger:" .iic-trigger"},events:{"click @ui.trigger":function f(h){h.preventDefault();this.trigger("selected")}},initialize:function a(h){this.widget=h.widget;this.listenTo(this.widget,"activated",this.hide);this.listenTo(this.widget,"deactivated",this.show)},onRender:function e(){this.unwrapTemplate();if(this.widget.model.getState()===this.widget.model.constants.STATE_ACTIVE){this.hide()}},hide:function c(){this.ui.trigger.addClass("iic-trigger_hidden")},show:function b(){this.ui.trigger.removeClass("iic-trigger_hidden")}});return d});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/widget.js' */
define("jira/inline-issue-create/entities/widget-constants",[],function(){var a={STATE_CLOSED:"STATE_CLOSED",STATE_ACTIVE:"STATE_ACTIVE",STATE_LOCK_TEMP_INACTIVE:"STATE_LOCK_TEMP_INACTIVE",STATE_LOCK_SENDING:"STATE_LOCK_SENDING",STATE_LOCK_PERM_INACTIVE:"STATE_LOCK_PERM_INACTIVE",STATE_LOCK_UNLOCKED:"STATE_LOCK_UNLOCKED"};Object.freeze(a);return a});define("jira/inline-issue-create/entities/widget",["jira/inline-issue-create/lib/brace","jira/inline-issue-create/entities/issue-types","jira/inline-issue-create/entities/issue-type","jira/inline-issue-create/entities/widget-constants"],function(f,c,j,e){var a="iic.slectedIssueType";var k=e;var h=f.Model.extend({constants:k,defaults:{state:k.STATE_CLOSED,lockState:k.STATE_LOCK_UNLOCKED},namedAttributes:{summary:"",selectedIssueType:j,issueTypes:c,state:"",lastState:"",lockState:""},initialize:function d(m){var q;var o;if(!m||!m.selectedIssueType){if(localStorage){q=JSON.parse(localStorage.getItem(a))||{};q=q||{};o=this.getIssueTypes()&&this.getIssueTypes().find(function l(r){return r.getId()===q.id})}if(o){this.setSelectedIssueType(o)}else{if(this.getIssueTypes()){this.setSelectedIssueType(this.getIssueTypes().at(0))}}}this.on("change:selectedIssueType",function p(s){var r=this.getSelectedIssueType();if(r){localStorage.setItem(a,JSON.stringify(r.toJSON()))}});this.listenTo(this.getIssueTypes(),"reset",function n(){var r=this.getSelectedIssueType()&&this.getSelectedIssueType().getId();var s;if(!r){r=q.id}if(r!==undefined){s=this.getIssueTypes().get(r);if(s){this.setSelectedIssueType(s)}else{this.setSelectedIssueType(this.getIssueTypes().at(0))}}else{this.setSelectedIssueType(this.getIssueTypes().at(0))}})},changeState:function g(l){if(l===this.getState()){return}this.setLastState(this.getState());this.setState(l)},setSelectedIssueTypeIfAvailable:function i(m){if(m){var l=this.getIssueTypes().get(m.getId());if(l){this.setSelectedIssueType(l)}}},toIssueData:function b(){return{summary:this.getSummary(),issueTypeId:this.getSelectedIssueType()&&this.getSelectedIssueType().getId()}}});return h});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/views/widget.js' */
define("jira/inline-issue-create/views/widget",["jquery","jira/inline-issue-create/lib/underscore","jira/inline-issue-create/lib/marionette","jira/inline-issue-create/util"],function(j,x,m,a){var i=500;var b=m.LayoutView.extend({template:JIRA.Templates.InlineIssueCreate.widget,regions:{issueTypeSelector:".iic-widget__issue-type-selector-container",description:".iic-widget__description-container"},ui:{summary:".iic-widget__summary",more:".iic-widget__more",cancel:".iic-widget__cancel",form:".iic-widget__form",withTitle:"[title]"},events:{"input @ui.summary":"onSummaryChange","change @ui.summary":"onSummaryChange","keyup @ui.summary":function(A){var z=this.ui.summary.val();if(z.length>255){this.ui.summary.val(z.substr(0,255))}this.onSummaryChange(A)},"keydown @ui.summary":function p(A){var z=this.ui.summary.val();if(A.keyCode===a.keyCode.ENTER){A.preventDefault();if(z!==""&&z.length<=255){if(this.model.getLockState()===this.model.constants.STATE_LOCK_UNLOCKED){this.ui.summary.blur();this.trigger("createIssue")}else{a.addClassAndRemoveOnAnimationEnd(this.$(".issue-type-selector"),"iic-error",i)}}else{a.addClassAndRemoveOnAnimationEnd(this.ui.summary,"iic-error",i)}}else{if(A.keyCode===a.keyCode.ESC){this.trigger("deactivate",{reason:"keypress"})}else{if(z.length>255){a.addClassAndRemoveOnAnimationEnd(this.ui.summary,"iic-error",i)}}}},"click @ui.cancel":function y(z){z.preventDefault();if(this.model.getLockState()!==this.model.constants.STATE_LOCK_SENDING){this.trigger("deactivate",{reason:"cancel"})}},"click @ui.more":function t(z){z.preventDefault();if(this.model.getLockState()!==this.model.constants.STATE_LOCK_SENDING){this.trigger("openFullIssueDialog")}}},modelEvents:{"change:summary":function r(){this.ui.summary.val(this.model.getSummary());this.adjustSummarySize()},"change:state":function s(z,A){if(A===this.model.constants.STATE_ACTIVE){this.activate()}else{if(A===this.model.constants.STATE_CLOSED){this.deactivate()}}},"change:lockState":function h(z,A){if(this.ui.summary.prop){if(A===this.model.constants.STATE_LOCK_SENDING){this.ui.summary.prop("disabled",true)}else{this.ui.summary.prop("disabled",false)}}}},initialize:function c(z){this.cssClass=z.cssClass||"";this.listenTo(this.issueTypeSelector,"show",function(){this.listenTo(this.issueTypeSelector.currentView,"issueTypeSelected",function(){this.focusSummary()})});x.bindAll(this,"adjustSummarySize","onBodyClick")},onClose:function g(){j(document).off("click.iic",this.onBodyClick)},onBodyClick:function l(z){if(!this.$el.is(z.target)&&this.$el.has(z.target).length===0){if(this.ui.summary.val()===""){this.trigger("deactivate",{reason:"cancel"})}else{if(this.ui.summary.is(":focus")){this.ui.summary.blur()}}}},serializeData:function n(){return{summary:this.model.getSummary(),cssClass:this.cssClass}},onRender:function k(){this.unwrapTemplate();this.ui.withTitle.tooltip({aria:true});var A=this;this.ui.summary.on("change cut paste drop keydown input",function z(){x.defer(A.adjustSummarySize)});x.defer(A.adjustSummarySize);this.ui.summary.placeholder();if(this.model.getState()===this.model.constants.STATE_ACTIVE){this.activate()}else{this.deactivate()}},adjustSummarySize:function d(){this.ui.summary.css("height","auto");var A=this.ui.summary.outerHeight();var z=Math.max(A+this.ui.summary.prop("scrollHeight")-this.ui.summary.prop("clientHeight"),A);if(z){this.ui.summary.height(z+"px")}},reset:function v(){this.ui.summary.attr("style","")},hide:function o(){this.$el.addClass("iic-widget_hidden");j(document).off("click.iic",this.onBodyClick)},show:function u(){this.$el.removeClass("iic-widget_hidden");this.adjustSummarySize();var z=this;x.defer(function(){j(document).off("click.iic",z.onBodyClick);j(document).on("click.iic",z.onBodyClick)})},focusSummary:function w(){this.ui.summary.focus()},activate:function f(){this.show();this.trigger("activated")},focus:function q(){this.focusSummary();this.trigger("focused")},deactivate:function e(){this.hide();this.trigger("deactivated")},onSummaryChange:function r(z){this.trigger("summaryChanged",this.ui.summary.val())}});return b});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/inline-issue-create-widget.js' */
define("jira/inline-issue-create/widget",["jira/util/formatter","wrm/context-path","jira/jquery/deferred","jquery","jira/inline-issue-create/lib/underscore","jira/util/logger","jira/inline-issue-create/lib/marionette","jira/inline-issue-create/util","jira/inline-issue-create/entities/widget","jira/inline-issue-create/entities/issue-types","jira/inline-issue-create/entities/projects","jira/inline-issue-create/entities/inline-issue","jira/inline-issue-create/views/widget","jira/inline-issue-create/views/issue-type-dropdown","jira/inline-issue-create/views/description","jira/inline-issue-create/prefillable-create-issue-dialog","jira/inline-issue-create/analytics"],function(f,C,g,x,L,t,E,b,r,J,i,a,z,q,K,m,d){function I(M){if(L.isFunction(M.parameter)){M.context[M.fieldName]=new M.parameter(M.defaultOptions)}else{if(L.isObject(M.parameter)){M.context[M.fieldName]=M.parameter}else{if(undefined===M.parameter){M.context[M.fieldName]=new M.defaultConstructor(M.defaultOptions)}}}}var A=E.Controller.extend({initialize:function e(M){this._initializeComponents(M);if(M.jqls){this.setCurrentJQLs(M.jqls)}if(M.container){this.attach(M.container)}this._initializeEvents(M)},_initializeComponents:function G(M){if(L.isFunction(M.issueTypes)){this.issueTypes=new M.issueTypes(undefined,{jqls:M.jqls})}else{if(L.isObject(M.issueTypes)){this.issueTypes=M.issueTypes}else{this.issueTypes=new J(undefined,{jqls:M.jqls})}}if(L.isFunction(M.projects)){this.projects=new M.projects(undefined,{jqls:M.jqls})}else{if(L.isObject(M.projects)){this.projects=M.projects}else{this.projects=new i(undefined,{jqls:M.jqls})}}I({context:this,fieldName:"model",defaultOptions:{issueTypes:this.issueTypes},parameter:M.model,defaultConstructor:r});I({context:this,fieldName:"dropdownView",defaultOptions:{model:this.model,collection:this.issueTypes,widgetId:this.model.cid},parameter:M.dropdownView,defaultConstructor:q});I({context:this,fieldName:"descriptionView",defaultOptions:{model:this.model,widgetId:this.model.cid},parameter:M.descriptionView,defaultConstructor:K});this.view=new z({model:this.model,cssClass:M.cssClass});this.analytics=new d({widget:this});this._currentInlineIssue=undefined},_initializeEvents:function H(M){this.listenTo(this.view,"summaryChanged",function O(Q){this.model.setSummary(Q)});this.listenTo(this.view,"createIssue",this.createIssue);this.listenTo(this.view,"deactivate",this.deactivate);this.listenTo(this.view,"openFullIssueDialog",function P(){this.trigger("openCreateIssueDialog",{reason:"manual"});this.openCreateIssueDialog()});this.listenTo(this.model,"change:state",this.onStateChange);this.listenTo(this.model,"change:lockState",this.onLockStateChange);this.listenTo(this.issueTypes,"reset",this.checkWidgetLocked);this.listenTo(this.projects,"reset",this.checkWidgetLocked);this.on("issueCreated",function N(){this.model.setSummary("")});this.checkWidgetLocked()},render:function w(){this.view.issueTypeSelector.attachView(undefined);this.view.description.attachView(undefined);this.view.render();this.view.issueTypeSelector.show(this.dropdownView);this.view.description.show(this.descriptionView);this.listenTo(this.dropdownView,"issueTypeSelected",function(M){this.model.setSelectedIssueType(M)})},onStateChange:function(M,N){if(N===this.model.constants.STATE_ACTIVE){this.trigger("activated")}else{if(N===this.model.constants.STATE_CLOSED){this.trigger("deactivated")}}},onLockStateChange:function h(M,N){if(N===this.model.constants.STATE_LOCK_PERM_INACTIVE){if(this.model.getState()===this.model.constants.STATE_ACTIVE){this.deactivate()}}},activate:function l(){if(this.model.getLockState()!==this.model.constants.STATE_LOCK_PERM_INACTIVE){this.model.changeState(this.model.constants.STATE_ACTIVE);return true}else{return false}},deactivate:function c(){this.model.changeState(this.model.constants.STATE_CLOSED)},checkWidgetLocked:function y(){if(this.issueTypes.isFetching()||!this.issueTypes.isInitialized()){return this.model.setLockState(this.model.constants.STATE_LOCK_TEMP_INACTIVE)}if(this.projects.isFetching()||!this.projects.isInitialized()){return this.model.setLockState(this.model.constants.STATE_LOCK_TEMP_INACTIVE)}if(this._currentInlineIssue&&this._currentInlineIssue.isSaving()){return this.model.setLockState(this.model.constants.STATE_LOCK_SENDING)}if(!this.issueTypes.length){return this.model.setLockState(this.model.constants.STATE_LOCK_PERM_INACTIVE)}if(this.projects.length!==1){return this.model.setLockState(this.model.constants.STATE_LOCK_PERM_INACTIVE)}this.model.setLockState(this.model.constants.STATE_LOCK_UNLOCKED)},focus:function F(){this.view.focus()},reset:function B(){this.model.setSummary("");this.view.reset()},attach:function p(M){var N=x(M);N.append(this.view.el)},setCurrentJQLs:function s(M){this.jqls=M},setSummary:function D(M){this.model.setSummary(M)},getSummary:function o(){return this.model.getSummary()},setSelectedIssueTypeIfAvailable:function k(M){this.model.setSelectedIssueTypeIfAvailable(M)},getSelectedIssueType:function u(){return this.model.getSelectedIssueType()},setOverrides:function n(M){this.overrides=M},createIssue:function v(){var M=this;var Q={summary:this.model.getSummary(),contexts:this.jqls,issueTypeId:this.model.getSelectedIssueType().getId(),overrides:L.clone(this.overrides)};this.trigger("beforeIssueCreated",M,Q);this._currentInlineIssue=new a(Q);this._currentInlineIssue.save().done(function P(R){M.trigger("issueCreated",R.issue,R.prefilledFields,M,{source:"inline"});t.trace("inline.create.issue.created")}).fail(function N(R){var V=new g();M.openCreateIssueDialog(V);try{var U=JSON.parse(R.responseText);V.resolve({errors:U.errors,errorMessages:U.generalErrors,prefilledFields:U.prefilledFields})}catch(T){b.error(M,"Could not parse response: "+T,R);var S="Unfortunately, there is an internal communication error, so you must use the full dialog to create the issue. Please contact your administrator if this error keeps appearing.";V.resolve({errors:{},errorMessages:[S],prefilledFields:{}})}M.trigger("openCreateIssueDialog",{reason:"createFailed"})}).always(function O(){M.checkWidgetLocked()});this.checkWidgetLocked()},openCreateIssueDialog:function j(Q){var M=this;var N=this.model.toIssueData();if(this.projects.size()===1){N.project=this.projects.at(0).toJSON()}var O={summary:N.summary,contexts:this.jqls,issueTypeId:this.model.getSelectedIssueType()?this.model.getSelectedIssueType().getId():undefined,overrides:L.clone(this.overrides)};this.trigger("beforeIssueCreated",M,O);if(!Q){Q=this._resolveInlineContext(O,M)}var P=m.createPrefillableCreateIssueForm(Q.promise(),true);return P.pipe(function(T){var S=T.asDialog();function R(V,U){M.trigger("issueCreated",U,U.fields,M,{source:"dialog"});t.trace("inline.create.issue.created")}T.bind("initialized",function(){this.unconfigurableForm.bind("issueCreated",R);this.configurableForm.bind("issueCreated",R)});S.show();return S})},_resolveInlineContext:function(P,M){var Q=new g();var R=x.ajax(C()+"/rest/inline-create/1.0/context/resolve",{data:JSON.stringify(P),contentType:"application/json",type:"POST"});R.done(function N(S){Q.resolve({prefilledFields:S.createIssueInput})}).fail(function O(){Q.resolve({prefilledFields:{summary:P.summary?P.summary:"",issuetype:M.model.getSelectedIssueType()?M.model.getSelectedIssueType().getId():undefined}})});return Q}});return A});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/inline-issue-create-widget-group.js' */
define("jira/inline-issue-create/widget-group",["jira/inline-issue-create/lib/underscore","jira/inline-issue-create/lib/marionette","jira/inline-issue-create/widget","jira/inline-issue-create/entities/inline-bootstrap"],function WidgetGroup(h,g,j,c){var d=g.Controller.extend({initialize:function e(k){this.TriggerView=k.TriggerView;this.Widget=j;this.widgets={};this.currentJQLs=undefined;this.createdCallback=k.createdCallback;this.activeWidget=undefined;this.inlineBootstrap=k.inlineBootstrap||new c();this.widgetOptions=h.defaults(k.widgetOptions||{},{issueTypes:this.inlineBootstrap.issueTypes,projects:this.inlineBootstrap.projects})},getWidget:function a(k){if(!this.widgets[k]){this.widgets[k]=this._createNewWidget(k)}return this.widgets[k]},setCurrentJqls:function i(k){this.currentJQLs=k;h.each(this.widgets,function l(m){m.widget.setCurrentJQLs(k)});this.inlineBootstrap.setJQLs(k)},activateWidget:function b(m){if(this.activeWidget===m){m.focus();return}var n=this.activeWidget;this.activeWidget=undefined;h.each(this.widgets,function l(o){if(o!==m){o.widget.deactivate()}});var k=m.activate();if(k){m.focus();this.activeWidget=m;this.trigger("widget:activated",m,n);if(n){m.setSummary(n.getSummary());m.setSelectedIssueTypeIfAvailable(n.getSelectedIssueType());n.reset()}}return k},_createNewWidget:function f(p){var m=this;var o=new this.Widget(this.widgetOptions);o.on("deactivated",function k(){if(m.activeWidget===o){m.activeWidget=undefined;o.reset()}});if(this.createdCallback){this.createdCallback(o,p)}if(this.currentJQLs){o.setCurrentJQLs(this.currentJQLs)}var l=new m.TriggerView({widget:o});l.on("selected",function(){m.activateWidget(o)});return{widget:o,trigger:l,render:function n(q){l.render();q.append(l.$el);o.attach(l.$el);o.render();m.trigger("widget:rendered",o,l,q)}}}});return d});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:inline-issue-create', location = 'inline-issue-create/InlineIssueCreate.js' */
define("jira/components/inline-issue-create",["require"],function(c){var b=c("jira/components/libs/underscore");var f=c("jira/components/libs/marionette-2.1.0");var e=c("jira/inline-issue-create/widget");var a=c("jira/inline-issue-create/views/default-trigger");var d=c("jira/inline-issue-create/entities/inline-bootstrap");return f.Object.extend({_buildBootstrap:function(){this.bootstrap=new d();this.listenTo(this.bootstrap,{sync:function(){this.widget.setCurrentJQLs(this.bootstrap.jqls)}})},_buildWidget:function(){this.widget=new e({issueTypes:this.bootstrap.issueTypes,projects:this.bootstrap.projects});this.listenTo(this.widget,{issueCreated:function(h,g){this.trigger("issueCreated",{issue:h,fields:g})},activated:function(){this.trigger("activated")},deactivated:function(){this.trigger("deactivated")}})},_buildTrigger:function(){this.widgetTrigger=new a({widget:this.widget});this.listenTo(this.widgetTrigger,{selected:function(){this.activate();this.trigger("inlineIssueCreateOpened")}})},initialize:function(){this._buildBootstrap();this._buildWidget();this._buildTrigger();this.render()},setJQL:function(g){this.bootstrap.setJQLs([g])},render:function(){this.widgetTrigger.render();this.widget.render()},show:function(g){this.render();g.append(this.widgetTrigger.$el);this.widget.attach(g)},activate:function(){if(this.bootstrap.projects.length){var g=this.widget.activate();if(g){this.widget.focus()}}else{this.widget.openCreateIssueDialog()}},activateWithJQL:function(g){this.bootstrap.jqls=[g];this.bootstrap.fetch({reset:true}).done(b.bind(function(){if(this.bootstrap.projects.length){var h=this.widget.activate();if(h){this.widget.focus()}}},this))}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/SimpleIssueList.js' */
define("jira/components/simpleissuelist",["require"],function(b){var c=b("jira/components/simpleissuelist/controllers/list");var e=b("jira/components/simpleissuelist/services/api");var d=b("jira/components/simpleissuelist/services/inline-issue-create");var g=b("jira/components/libs/marionette-2.1.0");var a=b("jira/components/libs/underscore");var f=b("jquery");return g.Object.extend({initialize:function(){if(this.options.displayInlineIssueCreate){this.inlineIssueCreate=new d();this.listenTo(this.inlineIssueCreate,{issueCreated:function(i){this.trigger("issueCreated",i)},"activated deactivated":function(){a.defer(a.bind(function(){this.list.adjustSize()},this))}})}this.list=new c({baseURL:this.options.baseURL,inlineIssueCreate:this.inlineIssueCreate});this.listenTo(this.list,{goToPreviousPage:function(){this.trigger("list:pagination");this.searchResults.jumpToPage("prev")},goToNextPage:function(){this.trigger("list:pagination");this.searchResults.jumpToPage("next")},goToPage:function(i){this.trigger("list:pagination");this.searchResults.jumpToPage(i)},refresh:function(){this.trigger("refresh")},selectIssue:function(i){this.trigger("list:select",{id:i.id,key:i.key,absolutePosition:this.searchResults.getPositionOfIssueInSearchResults(i.id),relativePosition:this.searchResults.getPositionOfIssueInPage(i.id)});this.searchResults.select(i.id)},sort:function(i){this.trigger("sort",i)},update:function(){this.trigger("update")}});var h=a.extend({},AJS.namespace("JIRA.API.Issues"),e.init(this));AJS.namespace("JIRA.API.Issues",null,h)},load:function(h,i){if(this.searchResults){this.stopListening(this.searchResults);delete this.searchResults}this.searchResults=h;if(this.options.displayInlineIssueCreate){this.inlineIssueCreate.setJQL(this.searchResults.jql)}this.listenTo(this.searchResults,{"before:loadpage":function(){this.trigger("before:loadpage")},"error:loadpage":function(j){this.trigger("error:loadpage",j)},reset:function(){this.list.update(this.searchResults)},unselect:function(j){this.list.unselectIssue(j.get("id"))},select:function(j){var k=j.get("id")||null;if(k){this.list.selectIssue(j.get("id"))}this.trigger("select",{id:k,key:j.get("key")})},change:function(j){this.list.updateIssue(j)}});if(i){h.jumpToPageForIssue(i)}else{h.jumpToPage("first")}},show:function(h){this.list.render({el:h})},selectNext:function(){if(!this.searchResults){return}return this.searchResults.selectNext()},selectPrevious:function(){if(!this.searchResults){return}return this.searchResults.selectPrev()},selectIssue:function(h){this.searchResults.select(h)},_getIssueById:function(h){if(!this.searchResults){return}return this.searchResults.get(h)},refreshIssue:function(i){var h=this._getIssueById(i);if(!h){return}h.fetch()},updateIssue:function(j,i){var h=this._getIssueById(j);if(!h){return}h.set(i)},adjustSize:function(){this.list.adjustSize()},disableIssue:function(i){var h=this._getIssueById(i);if(!h){return}h.set("inaccessible",true)},removeIssue:function(i){var h=this._getIssueById(i);if(!h){return new f.Deferred().reject().promise()}return this.searchResults.removeAndUpdateSelectionIfNeeded(h)},onDestroy:function(){this.list.destroy()},focus:function(){this.list.focus()}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/controllers/List.js' */
define("jira/components/simpleissuelist/controllers/list",["require"],function(b){var h=b("jira/components/simpleissuelist/views/pagination");var e=b("jira/components/simpleissuelist/views/issuelist");var a=b("jira/components/simpleissuelist/views/endstablesearch");var i=b("jira/components/simpleissuelist/views/layout");var g=b("jira/components/simpleissuelist/views/loading");var c=b("jira/components/simpleissuelist/views/refresh");var f=b("jira/components/libs/marionette-2.1.0");var d=b("jira/components/orderby");return f.ViewManager.extend({_buildPagination:function(){return this.buildView("pagination",function(){var j=new h({baseURL:this.baseURL});this.listenTo(j,{prev:function(){this.trigger("goToPreviousPage")},next:function(){this.trigger("goToNextPage")},"goto":function(k){this.trigger("goToPage",k)}});return j})},_buildList:function(){return this.buildView("list",function(){var j=new e();this.listenTo(j,{"childview:select":function(k){var l=k.model;this.trigger("selectIssue",{id:l.get("id"),key:l.get("key")})},update:function(){this.trigger("update")}});return j})},_buildEndStableSearch:function(){return this.buildView("endOfStableSearch",function(){return new a()})},_buildRefresh:function(){return this.buildView("refresh",function(){var j=new c();this.listenTo(j,{refresh:function(){this.trigger("refresh")}});return j})},_buildLayout:function(){return this.buildView("layout",function(){var j=new i();this.listenTo(j,{render:function(){this.getView("layout").getRegion("pagination").show(this.getView("pagination"));this.getView("layout").getRegion("searchResults").show(this.getView("list"));this.getView("layout").getRegion("refresh").show(this.getView("refresh"));this.getView("layout").getRegion("orderBy")._ensureElement();this.orderBy.setElement(this.getView("layout").getRegion("orderBy").$el);this.orderBy.render();if(this.inlineIssueCreate){this.getView("layout").inlineIssueCreateContainer._ensureElement();this.inlineIssueCreate.show(this.getView("layout").inlineIssueCreateContainer.$el)}}});return j})},_buildOrderBy:function(){this.orderBy=d.create();this.orderBy.onSort(function(j){this.trigger("sort",j)},this);return this.orderBy},_buildViews:function(){this._buildLayout();this._buildPagination();this._buildList();this._buildRefresh();this._buildEndStableSearch();this.getView("layout").render()},initialize:function(j){this._buildOrderBy();this.baseURL=j.baseURL;this.inlineIssueCreate=j.inlineIssueCreate;this._buildViews()},render:function(j){j=j||{};var k=j.el;k.append(this.getView("layout").$el);this.getView("layout").setElement(k)},onDestroy:function(){this.hideView("layout")},update:function(j){if(j.isAtTheEndOfStableSearch()){this.getView("layout").getRegion("endOfStableMessageContainer").show(this.getView("endOfStableSearch"))}else{this.getView("layout").getRegion("endOfStableMessageContainer").empty()}this.getView("list").update(j);this.getView("refresh").render();this.getView("pagination").update(j);this.orderBy.setElement(this.getView("layout").getRegion("orderBy").$el);this.orderBy.render();this.orderBy.setJql(j.jql);if(this.inlineIssueCreate){this.inlineIssueCreate.render()}this.adjustSize()},hideLoading:function(){this.hideView("loading")},showLoading:function(){this.showView("loading",function(){var j=new g();this.listenTo(j,{render:function(){this.getView("layout").$el.prepend(j.$el)}});return j})},updateIssue:function(j){this.getView("list").updateIssue(j)},unselectIssue:function(j){this.getView("list").unselectIssue(j)},selectIssue:function(j){this.getView("list").selectIssue(j)},adjustSize:function(){if(!this.getView("layout")){return}if(!this.getView("list")){return}var l=this.getView("layout").ui.listPanel;var m=this.getView("list").$el;var j=this.getView("layout").getRegion("pagination").$el;var k=m.offset().top+l.scrollTop();var q=(j?j.outerHeight():0);var p=window.innerHeight;var o=(!this.getView("endOfStableSearch")?0:this.getView("endOfStableSearch").$el.outerHeight());var n=this.getView("layout").inlineIssueCreateContainer.$el.outerHeight()||0;l.css("height",p-k-o-q-n);this.getView("list").scrollSelectedIssueIntoView()},focus:function(){if(this.getView("list")){this.getView("list").focus()}}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/services/API.js' */
define("jira/components/simpleissuelist/services/api",function(){return{init:function(a){return{nextIssue:function(){a.selectNext()},previousIssue:function(){a.selectPrevious()}}}}});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/services/InlineIssueCreate.js' */
define("jira/components/simpleissuelist/services/inline-issue-create",["require"],function(a){return a("jira/components/inline-issue-create")});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/templates/endofstablesearch.soy' */
// This file was automatically generated from endofstablesearch.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Components.SimpleIssueList.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Components == 'undefined') { JIRA.Components = {}; }
if (typeof JIRA.Components.SimpleIssueList == 'undefined') { JIRA.Components.SimpleIssueList = {}; }
if (typeof JIRA.Components.SimpleIssueList.Templates == 'undefined') { JIRA.Components.SimpleIssueList.Templates = {}; }


JIRA.Components.SimpleIssueList.Templates.endStableSearch = function(opt_data, opt_ignored) {
  return '<div class="end-of-stable-message"><p>' + soy.$$escapeHtml("Too many search results to display. Refine your search criteria and try again.") + '</p></div>';
};
if (goog.DEBUG) {
  JIRA.Components.SimpleIssueList.Templates.endStableSearch.soyTemplateName = 'JIRA.Components.SimpleIssueList.Templates.endStableSearch';
}
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/templates/issue.soy' */
// This file was automatically generated from issue.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Components.SimpleIssueList.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Components == 'undefined') { JIRA.Components = {}; }
if (typeof JIRA.Components.SimpleIssueList == 'undefined') { JIRA.Components.SimpleIssueList = {}; }
if (typeof JIRA.Components.SimpleIssueList.Templates == 'undefined') { JIRA.Components.SimpleIssueList.Templates = {}; }


JIRA.Components.SimpleIssueList.Templates.issue = function(opt_data, opt_ignored) {
  return '<li title="' + soy.$$escapeHtml(opt_data.summary) + '" data-key="' + soy.$$escapeHtml(opt_data.key) + '"><a class="splitview-issue-link" href="' + soy.$$escapeHtml("") + '/browse/' + soy.$$escapeHtml(opt_data.key) + '"><span class="issue-link-key"><img height="16" width="16" alt="' + soy.$$escapeHtml(opt_data.typeName) + '" title="' + soy.$$escapeHtml(opt_data.typeName) + ' - ' + soy.$$escapeHtml(opt_data.typeDescription) + '" src="' + soy.$$escapeHtml(opt_data.typeIcon) + '" />&nbsp;' + soy.$$escapeHtml(opt_data.key) + '</span><span class="issue-link-summary">' + soy.$$escapeHtml(opt_data.summary) + '</span></a></li>';
};
if (goog.DEBUG) {
  JIRA.Components.SimpleIssueList.Templates.issue.soyTemplateName = 'JIRA.Components.SimpleIssueList.Templates.issue';
}


JIRA.Components.SimpleIssueList.Templates.inaccessibleIssue = function(opt_data, opt_ignored) {
  return '<li class="inaccessible-issue" data-key="' + soy.$$escapeHtml(opt_data.key) + '">' + soy.$$escapeHtml("This issue can no longer be opened") + '</li>';
};
if (goog.DEBUG) {
  JIRA.Components.SimpleIssueList.Templates.inaccessibleIssue.soyTemplateName = 'JIRA.Components.SimpleIssueList.Templates.inaccessibleIssue';
}
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/templates/issuelist.soy' */
// This file was automatically generated from issuelist.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Components.SimpleIssueList.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Components == 'undefined') { JIRA.Components = {}; }
if (typeof JIRA.Components.SimpleIssueList == 'undefined') { JIRA.Components.SimpleIssueList = {}; }
if (typeof JIRA.Components.SimpleIssueList.Templates == 'undefined') { JIRA.Components.SimpleIssueList.Templates = {}; }


JIRA.Components.SimpleIssueList.Templates.issueList = function(opt_data, opt_ignored) {
  return '<div class="list-content"><ol class="issue-list"></ol></div>';
};
if (goog.DEBUG) {
  JIRA.Components.SimpleIssueList.Templates.issueList.soyTemplateName = 'JIRA.Components.SimpleIssueList.Templates.issueList';
}
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/templates/layout.soy' */
// This file was automatically generated from layout.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Components.SimpleIssueList.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Components == 'undefined') { JIRA.Components = {}; }
if (typeof JIRA.Components.SimpleIssueList == 'undefined') { JIRA.Components.SimpleIssueList = {}; }
if (typeof JIRA.Components.SimpleIssueList.Templates == 'undefined') { JIRA.Components.SimpleIssueList.Templates = {}; }


JIRA.Components.SimpleIssueList.Templates.layout = function(opt_data, opt_ignored) {
  return '<div class="simple-issue-list"><div class="list-panel"><div class="list-ordering"></div><div class="search-results"></div></div><div class="end-of-stable-message-container"></div><div class="inline-issue-create-container"></div><div class="aui-group pagination-view count-pagination"><div class="refresh-container aui-item"></div><div class="pagination-container aui-item"></div></div></div>';
};
if (goog.DEBUG) {
  JIRA.Components.SimpleIssueList.Templates.layout.soyTemplateName = 'JIRA.Components.SimpleIssueList.Templates.layout';
}


JIRA.Components.SimpleIssueList.Templates.loading = function(opt_data, opt_ignored) {
  return '<div class="loading"></div>';
};
if (goog.DEBUG) {
  JIRA.Components.SimpleIssueList.Templates.loading.soyTemplateName = 'JIRA.Components.SimpleIssueList.Templates.loading';
}
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/templates/pagination.soy' */
// This file was automatically generated from pagination.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Components.SimpleIssueList.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Components == 'undefined') { JIRA.Components = {}; }
if (typeof JIRA.Components.SimpleIssueList == 'undefined') { JIRA.Components.SimpleIssueList = {}; }
if (typeof JIRA.Components.SimpleIssueList.Templates == 'undefined') { JIRA.Components.SimpleIssueList.Templates = {}; }


JIRA.Components.SimpleIssueList.Templates.pagination = function(opt_data, opt_ignored) {
  var output = '<div class="pagination" data-displayable-total="' + soy.$$escapeHtml(opt_data.displayableTotal) + '">';
  var MAX_PAGES_DISPLAYED__soy6 = 5;
  var lastPage__soy7 = Math.floor((opt_data.displayableTotal - 1) / opt_data.pageSize);
  var pageNumber__soy8 = Math.floor(opt_data.startIndex / opt_data.pageSize);
  var urlFragment__soy9 = '' + ((opt_data.hasQueryString) ? soy.$$filterNoAutoescape(opt_data.searchQuery) + '&startIndex=' : soy.$$filterNoAutoescape(opt_data.searchQuery) + '?startIndex=');
  var prevStartIndex__soy19 = opt_data.startIndex - opt_data.pageSize;
  output += ((prevStartIndex__soy19 >= 0) ? '<a href="' + soy.$$escapeHtml(urlFragment__soy9) + soy.$$escapeHtml(prevStartIndex__soy19) + '" data-start-index="' + soy.$$escapeHtml(prevStartIndex__soy19) + '" class="icon icon-previous" title="' + soy.$$escapeHtml(AJS.format("Go to page {0} of {1}",pageNumber__soy8,lastPage__soy7 + 1)) + '"><span>&lt;&lt; ' + soy.$$escapeHtml("Previous") + '</span></a>' : '') + JIRA.Components.SimpleIssueList.Templates.numberLinksLogicBranch({startPage: pageNumber__soy8 - Math.floor(MAX_PAGES_DISPLAYED__soy6 / 2), endPage: pageNumber__soy8 + Math.floor(MAX_PAGES_DISPLAYED__soy6 / 2), lastPage: lastPage__soy7, urlFragment: urlFragment__soy9, currentPage: pageNumber__soy8 + 1, maxPagesDisplayed: MAX_PAGES_DISPLAYED__soy6, pageSize: opt_data.pageSize, displayableTotal: opt_data.displayableTotal});
  var nextStartIndex__soy41 = Math.min(opt_data.startIndex + opt_data.pageSize, opt_data.displayableTotal);
  output += ((nextStartIndex__soy41 < opt_data.displayableTotal) ? '<a href="' + soy.$$escapeHtml(urlFragment__soy9) + soy.$$escapeHtml(nextStartIndex__soy41) + '" data-start-index="' + soy.$$escapeHtml(nextStartIndex__soy41) + '" class="icon icon-next" title="' + soy.$$escapeHtml(AJS.format("Go to page {0} of {1}",pageNumber__soy8 + 2,lastPage__soy7 + 1)) + '"><span>' + soy.$$escapeHtml("Next") + ' &gt;&gt;</span></a>' : '') + '</div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Components.SimpleIssueList.Templates.pagination.soyTemplateName = 'JIRA.Components.SimpleIssueList.Templates.pagination';
}


JIRA.Components.SimpleIssueList.Templates.numberLinksLogicBranch = function(opt_data, opt_ignored) {
  return '' + ((opt_data.lastPage < opt_data.maxPagesDisplayed) ? JIRA.Components.SimpleIssueList.Templates.numberLinks(soy.$$augmentMap(opt_data, {startPage: 0, endPage: opt_data.lastPage})) : (opt_data.startPage < 0) ? JIRA.Components.SimpleIssueList.Templates.numberLinks(soy.$$augmentMap(opt_data, {startPage: 0, endPage: opt_data.endPage - opt_data.startPage})) : (opt_data.endPage > opt_data.lastPage) ? JIRA.Components.SimpleIssueList.Templates.numberLinks(soy.$$augmentMap(opt_data, {startPage: opt_data.startPage - (opt_data.endPage - opt_data.lastPage), endPage: opt_data.lastPage})) : JIRA.Components.SimpleIssueList.Templates.numberLinks(opt_data));
};
if (goog.DEBUG) {
  JIRA.Components.SimpleIssueList.Templates.numberLinksLogicBranch.soyTemplateName = 'JIRA.Components.SimpleIssueList.Templates.numberLinksLogicBranch';
}


JIRA.Components.SimpleIssueList.Templates.numberLinks = function(opt_data, opt_ignored) {
  var output = '';
  var size__soy76 = opt_data.endPage - opt_data.startPage + 1;
  if (size__soy76 > 1) {
    var iLimit79 = Math.round(size__soy76);
    for (var i79 = 0; i79 < iLimit79; i79++) {
      var pageIndex__soy80 = i79 + opt_data.startPage;
      var pageNumber__soy81 = pageIndex__soy80 + 1;
      var pageStartIndex__soy82 = pageIndex__soy80 * opt_data.pageSize;
      var pageEndIndex__soy83 = Math.min(pageStartIndex__soy82 + opt_data.pageSize, opt_data.displayableTotal);
      var pageBoundaries__soy84 = '' + soy.$$escapeHtml(AJS.format("Issues {0} - {1}",pageStartIndex__soy82 + 1,pageEndIndex__soy83));
      output += ' ' + ((pageNumber__soy81 == opt_data.currentPage) ? '<strong title="' + soy.$$escapeHtml(pageBoundaries__soy84) + '">' + soy.$$escapeHtml(pageNumber__soy81) + '</strong>' : '<a href="' + soy.$$escapeHtml(opt_data.urlFragment) + soy.$$escapeHtml(pageStartIndex__soy82) + '" data-page="' + soy.$$escapeHtml(pageNumber__soy81) + '" data-start-index="' + soy.$$escapeHtml(pageStartIndex__soy82) + '" title="' + soy.$$escapeHtml(pageBoundaries__soy84) + '">' + soy.$$escapeHtml(pageNumber__soy81) + '</a>');
    }
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Components.SimpleIssueList.Templates.numberLinks.soyTemplateName = 'JIRA.Components.SimpleIssueList.Templates.numberLinks';
}
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/templates/refresh.soy' */
// This file was automatically generated from refresh.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Components.SimpleIssueList.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Components == 'undefined') { JIRA.Components = {}; }
if (typeof JIRA.Components.SimpleIssueList == 'undefined') { JIRA.Components.SimpleIssueList = {}; }
if (typeof JIRA.Components.SimpleIssueList.Templates == 'undefined') { JIRA.Components.SimpleIssueList.Templates = {}; }


JIRA.Components.SimpleIssueList.Templates.refresh = function(opt_data, opt_ignored) {
  return '<a href="#" class="refresh-table" title="' + soy.$$escapeHtml("Refresh results") + '"><span class="aui-icon aui-icon-small aui-iconfont-refresh-small">' + soy.$$escapeHtml("Refresh results") + '</span></a>';
};
if (goog.DEBUG) {
  JIRA.Components.SimpleIssueList.Templates.refresh.soyTemplateName = 'JIRA.Components.SimpleIssueList.Templates.refresh';
}
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/templates/amd-wrapper.js' */
define("jira/components/simpleissuelist/templates",function(){return JIRA.Components.SimpleIssueList.Templates});AJS.namespace("JIRA.Components.SimpleIssueList.Templates",null,require("jira/components/simpleissuelist/templates"));;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/views/EndStableSearch.js' */
define("jira/components/simpleissuelist/views/endstablesearch",["require"],function(a){var c=a("jira/components/libs/marionette-2.1.0");var b=a("jira/components/simpleissuelist/templates");return c.ItemView.extend({template:b.endStableSearch})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/views/Issue.js' */
define("jira/components/simpleissuelist/views/issue",["require"],function(a){var c=a("jira/components/libs/marionette-2.1.0");var b=a("jira/components/simpleissuelist/templates");return c.ItemView.extend({template:b.issue,ui:{link:"a"},events:{simpleClick:function(d){d.preventDefault();this.trigger("select")}},serializeData:function(){var d=this.model;return{id:d.get("id"),key:d.get("key"),summary:d.get("summary"),typeName:d.get("type").name,typeDescription:d.get("type").description,typeIcon:d.get("type").iconUrl}},onRender:function(){this.unwrapTemplate()},highlight:function(){this.$el.addClass("focused");this.focus();this.scrollIntoView()},unhighlight:function(){this.$el.removeClass("focused")},scrollIntoView:function(){this.$el.scrollIntoViewForAuto()},focus:function(){this.ui.link.focus()}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/views/InaccessibleIssue.js' */
define("jira/components/simpleissuelist/views/inaccessibleissue",["require"],function(a){var c=a("jira/components/simpleissuelist/views/issue");var b=a("jira/components/simpleissuelist/templates");return c.extend({template:b.inaccessibleIssue,triggers:{click:"select"},serializeData:function(){var d=this.model;return{key:d.get("key")}}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/views/IssueList.js' */
define("jira/components/simpleissuelist/views/issuelist",["require"],function(a){var e=a("jira/components/libs/marionette-2.1.0");var d=a("jira/components/simpleissuelist/views/inaccessibleissue");var c=a("jira/components/simpleissuelist/views/issue");var b=a("jira/components/simpleissuelist/templates");return e.CompositeView.extend({template:b.issueList,childViewContainer:"ol",getChildView:function(f){if(f.get("inaccessible")){return d}else{return c}},_initialEvents:function(){},onUpdate:function(){if(this.collection.selected){var f=this.children.findByModel(this.collection.selected);if(f){f.highlight()}}},onRender:function(){this.unwrapTemplate()},update:function(f){this.collection=f;this.render();this.triggerMethod("update")},updateIssue:function(h){var f=this.children.findByModel(h);if(!f){return}this.removeChildView(f);var i=this.getChildView(h);var g=this.collection.indexOf(h);this.addChild(h,i,g);this.triggerMethod("update")},unselectIssue:function(h){if(!this.collection){return}var g=this.collection.get(h);if(!g){return}var f=this.children.findByModel(g);if(!f){return}f.unhighlight()},selectIssue:function(h){if(!this.collection){return}var g=this.collection.get(h);if(!g){return}var f=this.children.findByModel(g);if(!f){return}f.highlight()},scrollSelectedIssueIntoView:function(){if(!this.collection){return}var g=this.collection.selected;if(!g){return}var f=this.children.findByModel(g);if(!f){return}f.scrollIntoView()},focus:function(){if(!this.children||this.children.length<1){return}this.children.findByIndex(0).focus()}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/views/Layout.js' */
define("jira/components/simpleissuelist/views/layout",["require"],function(a){var c=a("jira/components/libs/marionette-2.1.0");var b=a("jira/components/simpleissuelist/templates");return c.LayoutView.extend({template:b.layout,regions:{pagination:".pagination-container",refresh:".refresh-container",searchResults:".search-results",orderBy:".list-ordering",endOfStableMessageContainer:".end-of-stable-message-container",inlineIssueCreateContainer:".inline-issue-create-container"},ui:{listPanel:".list-panel"},showLoading:function(){this.ui.listPanel.addClass("loading")},hideLoading:function(){this.ui.listPanel.removeClass("loading")}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/views/Loading.js' */
define("jira/components/simpleissuelist/views/loading",["require"],function(a){var c=a("jira/components/libs/marionette-2.1.0");var b=a("jira/components/simpleissuelist/templates");return c.ItemView.extend({template:b.loading,onRender:function(){this.unwrapTemplate()}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/views/Pagination.js' */
define("jira/components/simpleissuelist/views/pagination",["require"],function(b){var d=b("jira/components/libs/marionette-2.1.0");var a=b("jira/components/libs/uri");var c=b("jira/components/simpleissuelist/templates");return d.ItemView.extend({template:c.pagination,ui:{prev:".icon-previous",next:".icon-next",page:"a[data-page]"},triggers:{"click @ui.prev":"prev","click @ui.next":"next"},onRender:function(){this.unwrapTemplate()},events:{"click @ui.page":function(f){var g=f.target.getAttribute("data-page");f.preventDefault();this.trigger("goto",parseInt(g,10)-1)}},update:function(e){this.collection=e;this.render()},serializeData:function(){if(!this.collection){return}var f=new a(this.options.baseURL);var e=f.query().length>0;return{startIndex:this.collection.state.pageSize*this.collection.state.currentPage,pageSize:this.collection.state.pageSize,searchQuery:f.toString(),hasQueryString:e,displayableTotal:this.collection.state.totalRecords}}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/views/Refresh.js' */
define("jira/components/simpleissuelist/views/refresh",["require"],function(a){var c=a("jira/components/libs/marionette-2.1.0");var b=a("jira/components/simpleissuelist/templates");return c.ItemView.extend({template:b.refresh,triggers:{click:"refresh"},onRender:function(){this.unwrapTemplate()}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:pager', location = 'pager/templates/pager.soy' */
// This file was automatically generated from pager.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Components.Pager.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Components == 'undefined') { JIRA.Components = {}; }
if (typeof JIRA.Components.Pager == 'undefined') { JIRA.Components.Pager = {}; }
if (typeof JIRA.Components.Pager.Templates == 'undefined') { JIRA.Components.Pager.Templates = {}; }


JIRA.Components.Pager.Templates.Pager = function(opt_data, opt_ignored) {
  return '<ul class="pager"><li class="previous">' + ((opt_data.previousIssue && opt_data.position != 1) ? '<a data-id="' + soy.$$escapeHtml(opt_data.previousIssue.id) + '" data-key="' + soy.$$escapeHtml(opt_data.previousIssue.key) + '" href="' + soy.$$escapeHtml("") + '/browse/' + soy.$$escapeHtml(opt_data.previousIssue.key) + '" rel="' + soy.$$escapeHtml(opt_data.previousIssue.key) + '" title="' + soy.$$escapeHtml("Previous Issue") + ' \'' + soy.$$escapeHtml(opt_data.previousIssue.key) + '\'"><span class="icon icon-page-prev"><span>' + soy.$$escapeHtml("Previous Issue") + ' \'' + soy.$$escapeHtml(opt_data.previousIssue.key) + '\'</span></span></a>' : (opt_data.position && opt_data.resultCount) ? '<span class="icon icon-page-prev-deactivated" title="' + soy.$$escapeHtml("Not available - this is the first issue") + '"></span>' : '') + '</li><li class="showing">' + ((opt_data.position && opt_data.resultCount) ? soy.$$escapeHtml(AJS.format("{0} of {1}",opt_data.position,opt_data.resultCount)) : '') + '</li><li class="next">' + ((opt_data.nextIssue && opt_data.position != opt_data.resultCount) ? '<a data-id="' + soy.$$escapeHtml(opt_data.nextIssue.id) + '" data-key="' + soy.$$escapeHtml(opt_data.nextIssue.key) + '" href="' + soy.$$escapeHtml("") + '/browse/' + soy.$$escapeHtml(opt_data.nextIssue.key) + '" id="next-issue" rel="' + soy.$$escapeHtml(opt_data.nextIssue.key) + '" title="' + soy.$$escapeHtml("Next Issue") + ' \'' + soy.$$escapeHtml(opt_data.nextIssue.key) + '\'"><span class="icon icon-page-next"><span>' + soy.$$escapeHtml("Next Issue") + ' \'' + soy.$$escapeHtml(opt_data.nextIssue.key) + '\'</span></span></a>' : (opt_data.position && opt_data.resultCount) ? (opt_data.isAtTheEndOfStableSearch) ? '<span class="icon icon-page-next-deactivated" title="' + soy.$$escapeHtml(AJS.format("Whoa, you\x27\x27ve got quite a few issues there. We can show you the first {0}, but you should refine your search to return fewer issues.",opt_data.stableSearchCount)) + '"></span>' : '<span class="icon icon-page-next-deactivated" title="' + soy.$$escapeHtml("Not available - this is the last issue") + '"></span>' : '') + '</li></ul>';
};
if (goog.DEBUG) {
  JIRA.Components.Pager.Templates.Pager.soyTemplateName = 'JIRA.Components.Pager.Templates.Pager';
}
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:pager', location = 'pager/templates/amd-wrapper.js' */
define("jira/components/pager/templates",function(){return JIRA.Components.Pager.Templates});AJS.namespace("JIRA.Components.Pager.Templates",null,require("jira/components/pager/templates"));;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:pager', location = 'pager/views/PagerView.js' */
define("jira/components/pager/views/pager",["require"],function(b){var d=b("jira/components/libs/marionette-2.1.0");var c=b("jira/components/pager/templates");var a=b("jira/components/utils/ajshelper");return d.ItemView.extend({getTemplate:function(){if(this.searchResults&&this.searchResults.selected){return c.Pager}else{return false}},ui:{next:".next a",previous:".previous a",nextIcon:".next span.icon"},triggers:{"simpleClick @ui.next":"next","simpleClick @ui.previous":"previous"},update:function(e){this.searchResults=e;this.undelegateEvents();this.render();this.delegateEvents()},onRender:function(){if(this.searchResults&&this.searchResults.selected){var f=this.searchResults.getIssueAtGlobalIndex(this.searchResults.allIssues.length-1);if(f.id===this.searchResults.selected.id&&this.searchResults.isAtTheEndOfStableSearch()){this.ui.nextIcon.tooltip({gravity:"ne"})}}var e=a.activeShortcuts();if(e){if(e.j&&this.ui.next.length){e.j._addShortcutTitle(this.ui.next)}if(e.k&&this.ui.previous.length){e.k._addShortcutTitle(this.ui.previous)}}},serializeData:function(){var e=this.searchResults;var h=e.selected;if(!h){return}var g=this.searchResults.getPositionOfIssueInSearchResults(this.searchResults.selected.id);var f={position:g+1,resultCount:this.searchResults.getTotalIssuesInDb()};var j=this.searchResults.getIssueAtGlobalIndex(g+1);if(j){f.nextIssue={id:j.id,key:j.key}}else{if(this.searchResults.isAtTheEndOfStableSearch()){f.isAtTheEndOfStableSearch=true;f.stableSearchCount=this.searchResults.allIssues.length}}var i=this.searchResults.getIssueAtGlobalIndex(g-1);if(i){f.previousIssue={id:i.id,key:i.key}}return f}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:pager', location = 'pager/Pager.js' */
define("jira/components/pager",["require"],function(a){var b=a("jira/components/pager/views/pager");var c=a("jira/components/libs/marionette-2.1.0");return c.ViewManager.extend({_buildSearchResults:function(d){this._destroySearchResults();this.searchResults=d;this.listenTo(this.searchResults,{"select reset":function(){this.getView("view").update(this.searchResults)}})},_destroySearchResults:function(){if(!this.searchResults){return}this.stopListening(this.searchResults);delete this.searchResults},_buildView:function(){this.buildView("view",function(){var d=new b({el:this.el});this.listenTo(d,{next:function(){this.trigger("next")},previous:function(){this.trigger("previous")}});return d})},initialize:function(d){this.el=d.el;this._buildView()},onDestroy:function(){c.ViewManager.prototype.onDestroy.call(this);this._destroySearchResults()},load:function(d){this._buildSearchResults(d)},update:function(d){this.load(d);this.getView("view").update(d)},show:function(d){this.hideView("view");this.showView("view",function(){var e=new b({el:d});this.listenTo(e,{next:function(){this.trigger("next")},previous:function(){this.trigger("previous")}});return e})}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:detailslayout', location = 'lib/jquery.ui.sidebar.js' */
/*!
 * jQuery UI Sidebar
 * http://jqueryui.com
 *
 * Depends:
 *   jquery.ui.widget.js
 */
(function(a){a.widget("ui.sidebar",{version:"0.1",options:{minWidth:function(b){return 50},maxWidth:function(b){return window.innerWidth},resize:a.noop,easeOff:0},_create:function(){_.bindAll(this,"_handleDrag","_persist","_setContainment","_setHandlePosition","updatePosition");if(this.options.easeOff){this.updatePosition=_.debounce(this.updatePosition,this.options.easeOff)}if(!this.options.id){console.error("ui.sidebar: You must specify an id")}this._addHandle();this._restore();a(window).resize(_.debounce(this.updatePosition,30))},_restore:function(){if(window.localStorage){var b=localStorage.getItem("ui.sidebar."+this.options.id);if(b){this._setWidth(b)}}},_persist:function(){if(window.localStorage){localStorage.setItem("ui.sidebar."+this.options.id,this.element.outerWidth())}},_setContainment:function(){var b=window.innerHeight;this._elementLeft=this.element.offset().left;this._minLeft=this._elementLeft+this.options.minWidth(this);this._maxLeft=Math.max(this._minLeft,this._elementLeft+this.options.maxWidth(this));this.handle.draggable({containment:[this._minLeft,b,this._maxLeft,b]})},_handleDrag:function(d,b){var c=b.position.left-this._elementLeft;this._setWidth(c,true)},_setWidth:function(e,d){if(!d){var c=this.options.maxWidth(this);var b=this.options.minWidth(this);if(e>c){e=c}else{if(e<b){e=b}}}e-=this.element.outerWidth()-this.element.width();this.element.width(e);this.options.resize(e)},_addHandle:function(){var b=document.createElement("div");b.setAttribute("class","ui-sidebar");this.handle=a(b).appendTo(this.element);this.handle.draggable({axis:"x",drag:this._handleDrag,stop:this._persist});this.handle.mousedown(this._setContainment);_.defer(this._setHandlePosition)},_setHandlePosition:function(){this._setContainment();if(this._minLeft===this._maxLeft){this.handle.hide()}else{var c=this.element.offset();var b=c.left+this.element.outerWidth();this.handle.css({top:c.top,left:b,height:this.element.outerHeight()}).show()}},updatePosition:function(){this._setHandlePosition();this._setWidth(this.handle.offset().left-this._elementLeft-window.pageXOffset);this._persist()}})})(jQuery);;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:detailslayout', location = 'detailslayout/templates/detailslayout.soy' */
// This file was automatically generated from detailslayout.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Components.DetailsLayout.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Components == 'undefined') { JIRA.Components = {}; }
if (typeof JIRA.Components.DetailsLayout == 'undefined') { JIRA.Components.DetailsLayout = {}; }
if (typeof JIRA.Components.DetailsLayout.Templates == 'undefined') { JIRA.Components.DetailsLayout.Templates = {}; }


JIRA.Components.DetailsLayout.Templates.container = function(opt_data, opt_ignored) {
  return '<div class="details-layout"></div>';
};
if (goog.DEBUG) {
  JIRA.Components.DetailsLayout.Templates.container.soyTemplateName = 'JIRA.Components.DetailsLayout.Templates.container';
}


JIRA.Components.DetailsLayout.Templates.layout = function(opt_data, opt_ignored) {
  return '<div class="aui-group split-view"><div class="aui-item list-results-panel"></div><div class="aui-item detail-panel"><div class="issue-container"></div><div class="tools-container"></div></div></div>';
};
if (goog.DEBUG) {
  JIRA.Components.DetailsLayout.Templates.layout.soyTemplateName = 'JIRA.Components.DetailsLayout.Templates.layout';
}


JIRA.Components.DetailsLayout.Templates.empty = function(opt_data, opt_ignored) {
  return '<div><div class="navigator-content empty-results"><div class="jira-adbox jira-adbox-medium no-results no-results-message"><h3>' + soy.$$escapeHtml("No issues were found to match your search") + '</h3><p class="no-results-hint">' + soy.$$filterNoAutoescape(AJS.format("Try modifying your search criteria or {0}creating a new issue{1}",'<a class="create-issue" href="' + "" + '/secure/CreateIssue!default.jspa">','</a>')) + '</p></div></div></div>';
};
if (goog.DEBUG) {
  JIRA.Components.DetailsLayout.Templates.empty.soyTemplateName = 'JIRA.Components.DetailsLayout.Templates.empty';
}


JIRA.Components.DetailsLayout.Templates.loading = function(opt_data, opt_ignored) {
  return '<div class="loading"></div>';
};
if (goog.DEBUG) {
  JIRA.Components.DetailsLayout.Templates.loading.soyTemplateName = 'JIRA.Components.DetailsLayout.Templates.loading';
}


JIRA.Components.DetailsLayout.Templates.tools = function(opt_data, opt_ignored) {
  return '<div class="issue-tools"><div class="pager-container"></div><div class="expand-container"></div></div>';
};
if (goog.DEBUG) {
  JIRA.Components.DetailsLayout.Templates.tools.soyTemplateName = 'JIRA.Components.DetailsLayout.Templates.tools';
}


JIRA.Components.DetailsLayout.Templates.expand = function(opt_data, opt_ignored) {
  return '<button title="' + soy.$$escapeHtml(AJS.format("Expand issue ( {0} )",opt_data.expandShortcutKey ? opt_data.expandShortcutKey : '')) + '" class="aui-button aui-button-subtle expand"><span class="aui-icon aui-icon-small aui-iconfont-focus">' + soy.$$escapeHtml(AJS.format("Expand issue ( {0} )",opt_data.expandShortcutKey ? opt_data.expandShortcutKey : '')) + '</span></button>';
};
if (goog.DEBUG) {
  JIRA.Components.DetailsLayout.Templates.expand.soyTemplateName = 'JIRA.Components.DetailsLayout.Templates.expand';
}
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:detailslayout', location = 'detailslayout/templates/amd-wrapper.js' */
define("jira/components/detailslayout/templates",function(){return JIRA.Components.DetailsLayout.Templates});AJS.namespace("JIRA.Components.DetailsLayout.Templates",null,require("jira/components/detailslayout/templates"));;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:detailslayout', location = 'detailslayout/controllers/Tools.js' */
define("jira/components/detailslayout/controllers/tools",["require"],function(a){var d=a("jira/components/libs/marionette-2.1.0");var c=a("jira/components/pager");var b=a("jira/components/detailslayout/views/tools");return d.ViewManager.extend({initialize:function(e){this.showExpand=e.showExpand;this._buildTools();this._buildPager()},show:function(e){this.toolsView.setElement(e);this.toolsView.render()},load:function(e){this.pager.update(e)},onDestroy:function(){this.pager.destroy();d.ViewManager.prototype.onDestroy.call(this)},_buildTools:function(){this.toolsView=this.buildView("toolsView",function(){var e=new b({showExpand:this.showExpand});this.listenTo(e,{render:function(){e.pager._ensureElement();this.pager.show(e.pager.$el)},expand:function(){this.trigger("expand")}});return e})},_buildPager:function(){this.pager=new c();this.listenTo(this.pager,{next:function(){this.trigger("pager:next")},previous:function(){this.trigger("pager:previous")}})}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:detailslayout', location = 'detailslayout/views/Container.js' */
define("jira/components/detailslayout/views/container",["require"],function(a){var c=a("jira/components/libs/marionette-2.1.0");var b=a("jira/components/detailslayout/templates");return c.ItemView.extend({template:b.container,onRender:function(){this.unwrapTemplate()},showView:function(d){this.$el.append(d.$el)},showLoading:function(d){this.$el.prepend(d.$el)},hideLoading:function(d){d.$el.detach()}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:detailslayout', location = 'detailslayout/views/Empty.js' */
define("jira/components/detailslayout/views/empty",["require"],function(a){var c=a("jira/components/libs/marionette-2.1.0");var b=a("jira/components/detailslayout/templates");return c.ItemView.extend({template:b.empty,onRender:function(){this.unwrapTemplate()}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:detailslayout', location = 'detailslayout/views/Tools.js' */
define("jira/components/detailslayout/views/tools",["require"],function(a){var e=a("jira/components/libs/marionette-2.1.0");var c=a("jira/components/detailslayout/templates");var d=a("jira/ajs/keyboardshortcut/keyboard-shortcut");var b=e.ItemView.extend({template:c.expand,triggers:{click:"expand"},serializeData:function(){return{expandShortcutKey:d.getKeyboardShortcutKeys("fullscreen.issue")}},onRender:function(){this.unwrapTemplate();this.$el.tooltip({gravity:"e"})},onDestroy:function(){if(this.$el.tooltip){this.$el.tooltip("hide")}}});return e.LayoutView.extend({initialize:function(f){this.showExpand=f.showExpand||false;this._initSubview()},template:c.tools,regions:{pager:".pager-container",expand:".expand-container"},_initSubview:function(){this._expandSubview=new b();this.listenTo(this._expandSubview,"expand",function(){this.trigger("expand")}.bind(this))},onRender:function(){if(this.showExpand){this.expand.show(this._expandSubview);if(d.initialised&&!d.initialised.isResolved()){d.initialised.then(function(){this._expandSubview.render()}.bind(this))}}}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:detailslayout', location = 'detailslayout/views/Layout.js' */
define("jira/components/detailslayout/views/layout",["require"],function(b){var d=b("jira/components/libs/marionette-2.1.0");var a=b("jira/components/libs/underscore");var c=b("jira/components/detailslayout/templates");return d.LayoutView.extend({template:c.layout,regions:{issuesList:".list-results-panel",issueComponent:".issue-container",tools:".tools-container"},ui:{detailPanel:".detail-panel"},onRender:function(){this.issuesList._ensureElement()},maximizeDetailPanelHeight:function(){var e=this.ui.detailPanel.offset().top;this.ui.detailPanel.css("height",window.innerHeight-e)},showDraggable:function(){var e=0;this.issuesList.$el.sidebar({id:"layoutview-draggable",minWidth:function(){return 250},maxWidth:a.bind(function(){return this.$el.width()-500},this),resize:a.bind(function(f){if(f!==e){e=f;this.trigger("resize")}},this)})},updateDraggable:function(){this.issuesList.$el.sidebar("updatePosition")}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:detailslayout', location = 'detailslayout/views/Loading.js' */
define("jira/components/detailslayout/views/loading",["require"],function(a){var c=a("jira/components/libs/marionette-2.1.0");var b=a("jira/components/detailslayout/templates");return c.ItemView.extend({template:b.loading,onRender:function(){this.unwrapTemplate()}})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:detailslayout', location = 'detailslayout/DetailsLayout.js' */
define("jira/components/detailslayout",["require"],function(b){var k=b("jira/components/libs/underscore");var f=b("jira/components/issuecomponentresolver");var g=b("jira/components/libs/marionette-2.1.0");var d=b("jira/components/simpleissuelist");var i=b("jira/components/detailslayout/views/container");var a=b("jira/components/detailslayout/views/empty");var j=b("jira/components/detailslayout/views/layout");var h=b("jira/components/detailslayout/views/loading");var c=b("jira/components/detailslayout/controllers/tools");function e(n,m,l){var p;var o=m;return function(){var q=arguments;clearTimeout(p);p=setTimeout(function(){n.apply(this,q);o=m},o);o=l}}return g.ViewManager.extend({_buildIssueComponent:function(){var n=f.resolve();var m=this.issueComponent=new n();var l=this.options;this._loadIssueInViewerComponent=e(k.bind(function(o){m.loadIssue({id:o.id,key:o.key,detailView:!l.shouldUpdateCurrentProject}).always(k.bind(function(){this.hideLoading()},this))},this),100,500);this.listenTo(m,{loadError:function(o){this.simpleIssueList.disableIssue(o.issueId);this.trigger("editorError")},loadComplete:function(o,p){this.adjustSize();this.simpleIssueList.updateIssue(o.id,{key:o.get("entity").key,summary:o.get("entity").summary,status:o.get("entity").status.name});var q={issueKey:o.get("entity").key,issueId:o.id,issueEditorOptions:p,projectId:o.get("projectId"),projectKey:o.get("projectKey"),projectType:o.get("projectType")};if(p&&p.loadReason==="issues-cache-refresh"){this.trigger("editorLoadedFromCache",q)}else{this.trigger("editorLoaded",q)}},fieldsLoaded:function(){this.trigger("editorFieldsLoaded")},saveSuccess:function(o){this.simpleIssueList.refreshIssue(o.issueId);this.trigger("editor:saveSuccess",{event:o.issueId,savedFieldIds:o.savedFieldIds,savedFieldTypes:o.savedFieldTypes,duration:o.duration})},editField:function(o){this.trigger("editor:editField",o)},editFieldCancel:function(o){this.trigger("editor:editFieldCancel",o)},linkToIssue:function(o){this.trigger("linkToIssue",o)},refineViewer:function(o){o.preventDefault();this.updateIssueComponent(o.query)},linkInErrorMessage:function(o){o.preventDefault();this.simpleIssueList.selectIssue(o.issueData.id)},individualPanelRendered:function(o){this.trigger("individualPanelRendered",o)}})},_buildSimpleIssueList:function(){this.simpleIssueList=new d({baseURL:this.baseURL,displayInlineIssueCreate:this.options.displayInlineIssueCreate});this.listenTo(this.simpleIssueList,{select:function(l){this.trigger("select",l)},update:function(){this.trigger("list:update")},refresh:function(){this.trigger("list:refresh")},sort:function(l){this.trigger("list:sort",l)},"list:select":function(l){this.trigger("list:select",{id:l.id,key:l.key,absolutePosition:l.absolutePosition,relativePosition:l.relativePosition})},"list:pagination":function(){this.trigger("list:pagination")},"before:loadpage":function(){this.showLoading()},"error:loadpage":function(l){this.hideLoading();this.trigger("error:loadpage",l)},issueCreated:function(l){this.trigger("issueCreated",l)}})},_buildContainerView:function(){this.containerView=this.buildView("containerView",function(){var l=new i();this.listenTo(l,{render:function(){this.getView("layoutView").render();this.getView("emptyView").render();this.getView("loadingView").render();l.$el.prepend(this.getView("layoutView").$el)}});return l})},_buildEmptyView:function(){this.emptyView=this.buildView("emptyView",function(){var l;if(typeof this.options.emptyViewFactory==="function"){l=this.options.emptyViewFactory()}else{l=new a()}this.listenTo(l,{render:function(){this.containerView.$el.append(l.$el);this.adjustSize();this.trigger("empty")}});return l})},_showEmptyView:function(){this.layoutView.$el.detach();this.containerView.$el.empty();this.containerView.showView(this.emptyView);this.adjustSize();this.trigger("empty")},_buildTools:function(){this.tools=new c({showExpand:this.useExpand});this.listenTo(this.tools,{expand:function(){this.trigger("expand")},"pager:next":function(){var l=this.selectNext();this.trigger("pager:next",l)},"pager:previous":function(){var l=this.selectPrevious();this.trigger("pager:previous",l)}})},_buildLayoutView:function(){this.layoutView=this.buildView("layoutView",function(){var l=new j();this.listenTo(l,{render:function(){l.issueComponent._ensureElement();this.issueComponent.setContainer(l.issueComponent.$el);l.issuesList._ensureElement();this.simpleIssueList.show(l.issuesList.$el);l.tools._ensureElement();this.tools.show(l.tools.$el)},resize:function(){this.adjustSize()}});return l})},_buildLoadingView:function(){this.loadingView=this.buildView("loadingView",function(){return new h()})},_buildComponents:function(){this._buildIssueComponent();this._buildSimpleIssueList();this._buildTools()},_buildViews:function(){this._buildLayoutView();this._buildEmptyView();this._buildLoadingView();this._buildContainerView();this.containerView.render()},initialize:function(l){this.baseURL=l.baseURL;this.useExpand=l.useExpand||false;this._buildComponents();this._buildViews()},_showLoadingView:function(){this.containerView.showLoading(this.loadingView)},_hideLoadingView:function(){this.containerView.hideLoading(this.loadingView)},_showLayoutView:function(){this.emptyView.$el.detach();this.containerView.showView(this.layoutView);this.layoutView.showDraggable();this.adjustSize()},show:function(l){l.replaceWith(this.containerView.$el);return this.containerView.$el},onDestroy:function(){this.tools.destroy();this.issueComponent.close();this.simpleIssueList.destroy();g.ViewManager.prototype.onDestroy.call(this)},showLoading:function(){this._showLoadingView()},hideLoading:function(){this._hideLoadingView()},load:function(l,m){if(this.searchResults){this.stopListening(this.searchResults);delete this.searchResults}this.searchResults=l;this.listenTo(this.searchResults,{issueDeleted:function(){if(!this.searchResults.length){this._showEmptyView()}},"select selectIssueNotInList":function(n){this.showLoading();this._loadIssueInViewerComponent({id:n.id,key:n.get("key")})}});if(this.searchResults.isEmptySearch()){this._showEmptyView()}else{this.simpleIssueList.load(this.searchResults,m);this.tools.load(this.searchResults);this._showLayoutView()}this.trigger("list:render")},adjustSize:function(){k.defer(k.bind(function(){if(this.getView("layoutView")){this.simpleIssueList.adjustSize();this.getView("layoutView").maximizeDetailPanelHeight();this.issueComponent.applyResponsiveDesign();this.getView("layoutView").updateDraggable()}if(this.getView("emptyView")){var m=this.getView("emptyView").$el;var l=m.length&&m.offset().top;m.css("height",window.innerHeight-l)}},this))},refreshIssue:function(l){this.simpleIssueList.refreshIssue(l);return this.issueComponent.refreshIssue()},removeIssue:function(l){this.showLoading();return this.simpleIssueList.removeIssue(l).always(k.bind(function(){this.hideLoading()},this)).done(k.bind(function(m){if(m===0){this._showEmptyView()}},this))},getActiveIssueId:function(){return this.issueComponent.getIssueId()},getActiveIssueKey:function(){return this.issueComponent.getIssueKey()},getActiveProjectId:function(){return this.issueComponent.getProjectId()},getActiveProjectKey:function(){return this.issueComponent.getProjectKey()},getActiveProjectType:function(){return this.issueComponent.getProjectType()},selectNext:function(){return this.simpleIssueList.selectNext()},selectPrevious:function(){return this.simpleIssueList.selectPrevious()},updateIssueComponent:function(l){this.showLoading();this.listenToOnce(this.issueComponent,"loadComplete",function(){this.hideLoading()});this.issueComponent.updateIssueWithQuery(l)},isLoading:function(){return this.issueComponent.isCurrentlyLoading()},hasSavesInProgress:function(){if("hasSavesInProgress" in this.issueComponent){return this.issueComponent.hasSavesInProgress()}else{return false}},canDismissComment:function(){return this.issueComponent.canDismissComment()},getEditorFields:function(){if("getFields" in this.issueComponent){return this.issueComponent.getFields()}else{return undefined}},abortPending:function(){return this.issueComponent.abortPending()},beforeHide:function(){return this.issueComponent.beforeHide()},beforeShow:function(){return this.issueComponent.beforeShow()},removeIssueMetadata:function(){return this.issueComponent.removeIssueMetadata()},editField:function(l){if("editField" in this.issueComponent){return this.issueComponent.editField(l)}},focusList:function(){this.simpleIssueList.focus()},focusEditor:function(){this.issueComponent.focus()}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:marionette', location = '/sidebar/lib/backbone.marionette.mixins.js' */
define("jira/projects/libs/marionette-mixins",[],function(){return function a(d,f){function e(i,h){var g=this;var j=d.defaults({},h||{},{isPrevented:false,emitter:this,preventDefault:function(){this.isPrevented=true;g.trigger(i+":prevented",this)}});this.trigger(i,j);return j}function c(h,g){var i=this.triggerPreventable(h,g);if(i.isPrevented){g.preventDefault()}}d.extend(f.View.prototype,{unwrapTemplate:function b(){if(this.$el.parent().length){var g=this.$el.children();this.$el.replaceWith(g);this.setElement(g)}else{this.setElement(this.$el.children())}},triggerPreventable:e,retriggerPreventable:c});d.extend(f.Controller.prototype,{triggerPreventable:e,retriggerPreventable:c});f.ViewManager=f.Controller.extend({constructor:function(){f.Controller.apply(this,arguments);this.views={}},hideView:function(h){var g=this.views[h];if(g){this.stopListening(g);if(!g.isDestroyed){g.destroy()}delete this.views[h]}},showView:function(i,h){var g=this.buildView(i,h);g.render()},buildView:function(i,h){var g=this.views[i];if(!g){g=h.call(this);this.listenTo(g,"destroy",function(){this.hideView(i)});this.views[i]=g}return g},getView:function(g){return this.views[g]}});return f}});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:marionette', location = '/sidebar/lib/backbone.marionette.adapter.js' */
define("jira/projects/libs/marionette",["backbone","underscore","atlassian/libs/factories/marionette-2.1.0","jira/projects/libs/marionette-mixins"],function(e,b,c,a){var d;d=c(b,e);d=a(b,d);return d});AJS.namespace("JIRA.Projects.Libs.Marionette",null,require("jira/projects/libs/marionette"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = '/static/components/subnavigator/templates/templates.soy' */
// This file was automatically generated from templates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Projects.Subnavigator.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Projects == 'undefined') { JIRA.Projects = {}; }
if (typeof JIRA.Projects.Subnavigator == 'undefined') { JIRA.Projects.Subnavigator = {}; }
if (typeof JIRA.Projects.Subnavigator.Templates == 'undefined') { JIRA.Projects.Subnavigator.Templates = {}; }


JIRA.Projects.Subnavigator.Templates.content = function(opt_data, opt_ignored) {
  var output = '<div id="subnav-opts' + ((opt_data.idSuffix) ? '-' + soy.$$escapeHtml(opt_data.idSuffix) : '') + '" class="subnav-opts subnavigator-content aui-dropdown2 aui-style-default">';
  var itemGroupList9 = opt_data.itemGroups;
  var itemGroupListLen9 = itemGroupList9.length;
  for (var itemGroupIndex9 = 0; itemGroupIndex9 < itemGroupListLen9; itemGroupIndex9++) {
    var itemGroupData9 = itemGroupList9[itemGroupIndex9];
    output += JIRA.Projects.Subnavigator.Templates.itemSection({items: itemGroupData9});
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Projects.Subnavigator.Templates.content.soyTemplateName = 'JIRA.Projects.Subnavigator.Templates.content';
}


JIRA.Projects.Subnavigator.Templates.itemSection = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.items.length > 0) {
    output += '<div class="aui-dropdown2-section"><ul class="aui-list-truncate">';
    var itemList18 = opt_data.items;
    var itemListLen18 = itemList18.length;
    for (var itemIndex18 = 0; itemIndex18 < itemListLen18; itemIndex18++) {
      var itemData18 = itemList18[itemIndex18];
      output += JIRA.Projects.Subnavigator.Templates.item({item: itemData18});
    }
    output += '</ul></div>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Projects.Subnavigator.Templates.itemSection.soyTemplateName = 'JIRA.Projects.Subnavigator.Templates.itemSection';
}


JIRA.Projects.Subnavigator.Templates.item = function(opt_data, opt_ignored) {
  return '<li' + ((opt_data.item.description) ? ' title="' + soy.$$escapeHtml(opt_data.item.description) + '"' : '') + '>' + ((opt_data.item.link) ? '<a data-item-id="' + soy.$$escapeHtml(opt_data.item.id) + '" href="' + soy.$$escapeHtml(opt_data.item.link) + '">' + soy.$$escapeHtml(opt_data.item.label) + '</a>' : '<a class="aui-dropdown2-radio' + ((opt_data.item.selected) ? ' checked' : '') + '" data-item-id="' + soy.$$escapeHtml(opt_data.item.id) + '">' + soy.$$escapeHtml(opt_data.item.label) + '</a>') + '</li>';
};
if (goog.DEBUG) {
  JIRA.Projects.Subnavigator.Templates.item.soyTemplateName = 'JIRA.Projects.Subnavigator.Templates.item';
}


JIRA.Projects.Subnavigator.Templates.trigger = function(opt_data, opt_ignored) {
  return '' + ((opt_data.renderAsButton) ? '<button id="subnav-trigger' + ((opt_data.idSuffix) ? '-' + soy.$$escapeHtml(opt_data.idSuffix) : '') + '" class="subnav-trigger subnavigator-trigger aui-button aui-button-link aui-dropdown2-trigger" aria-owns="subnav-opts' + ((opt_data.idSuffix) ? '-' + soy.$$escapeHtml(opt_data.idSuffix) : '') + '" role="menu" aria-haspopup="true">' + soy.$$escapeHtml(opt_data.label) + '</button>' : '<span id="subnav-trigger' + ((opt_data.idSuffix) ? '-' + soy.$$escapeHtml(opt_data.idSuffix) : '') + '" class="subnav-trigger subnavigator-trigger">' + soy.$$escapeHtml(opt_data.label) + '</button>');
};
if (goog.DEBUG) {
  JIRA.Projects.Subnavigator.Templates.trigger.soyTemplateName = 'JIRA.Projects.Subnavigator.Templates.trigger';
}


JIRA.Projects.Subnavigator.Templates.title = function(opt_data, opt_ignored) {
  return '<span class="subnavigator-title" title="' + soy.$$escapeHtml(opt_data.title) + '">' + soy.$$escapeHtml(opt_data.title) + '</span>';
};
if (goog.DEBUG) {
  JIRA.Projects.Subnavigator.Templates.title.soyTemplateName = 'JIRA.Projects.Subnavigator.Templates.title';
}
;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = '/static/components/subnavigator/templates/templates.js' */
(function(){var a=JIRA.Projects.Subnavigator.Templates;define("jira/projects/components/subnavigator/templates",[],function(){return a})})();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = '/static/components/subnavigator/views/Content.js' */
define("jira/projects/components/subnavigator/views/content",["jira/projects/components/subnavigator/templates","underscore","jira/projects/libs/marionette","jquery"],function(b,a,d,c){return d.ItemView.extend({template:b.content,tooltipTimer:null,ui:{item:"li"},initialize:function(){this.tooltipTimeout=this.options.tooltipTimeout||600;this.hideSelectedItem=this.options.hideSelectedItem===false},_hideTooltips:function(){clearTimeout(this.tooltipTimer);c(".tipsy").remove()},events:{"aui-dropdown2-item-check":function(g){this._hideTooltips();var f=c(g.target).attr("data-item-id");this.trigger("click",f)},"mouseenter @ui.item":function(e){this._hideTooltips();this.tooltipTimer=setTimeout(function(){c(e.currentTarget).tipsy("show")},this.tooltipTimeout)},"mouseleave @ui.item":"_hideTooltips","aui-dropdown2-hide":"_hideTooltips"},serializeData:function(){var e=this.model.get("selectedItem");var g=this.model.get("itemGroups");var f=this.hideSelectedItem;if(e){g=a.map(g,function(h){if(f){return a.map(h,function(j){var i=a.clone(j);if(i.id===e.id){i.selected=true}return i})}else{return a.reject(h,function(i){return i.id===e.id})}})}return{itemGroups:g,idSuffix:this.options.id||""}},onRender:function(){this.unwrapTemplate();this._hideTooltips();c(this.ui.item).tooltip({gravity:"w",trigger:"manual"})}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = '/static/components/subnavigator/views/Trigger.js' */
define("jira/projects/components/subnavigator/views/trigger",["jira/projects/components/subnavigator/templates","jira/projects/libs/marionette"],function(a,b){return b.ItemView.extend({template:a.trigger,serializeData:function(){return{label:this.model.get("selectedItem").label,renderAsButton:this.model.getAllItems().length>1,idSuffix:this.options.id||""}},onRender:function(){this.unwrapTemplate()}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = '/static/components/subnavigator/views/StaticTrigger.js' */
define("jira/projects/components/subnavigator/views/static-trigger",["jira/projects/components/subnavigator/views/trigger"],function(a){return a.extend({serializeData:function(){return{label:this.options.label,renderAsButton:true,idSuffix:this.options.id||""}},onRender:function(){this.unwrapTemplate();this.$el.removeClass("subnav-trigger")}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = '/static/components/subnavigator/views/Title.js' */
define("jira/projects/components/subnavigator/views/title",["jira/projects/components/subnavigator/templates","jira/projects/libs/marionette"],function(a,b){return b.ItemView.extend({template:a.title,serializeData:function(){var c=this.model.get("selectedItem");return{title:c.label}}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = '/static/components/subnavigator/entities/Items.js' */
define("jira/projects/components/subnavigator/entities/items",["underscore","backbone"],function(a,b){return b.Model.extend({defaults:{itemGroups:[],selectedItem:null},isEmpty:function(){return a.isEmpty(this.getAllItems())},selectItem:function(d){var c=this.getAllItems();this.set("selectedItem",a.find(c,function(e){return e.id===d})||a.first(c))},getAllItems:function(){return a.flatten(this.get("itemGroups"))}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = '/static/components/subnavigator/Subnavigator.js' */
define("jira/projects/components/subnavigator/subnavigator",["jira/projects/components/subnavigator/views/trigger","jira/projects/components/subnavigator/views/title","jira/projects/components/subnavigator/views/static-trigger","jira/projects/components/subnavigator/views/content","jira/projects/components/subnavigator/entities/items","jira/projects/libs/marionette","jira/util/browser","underscore","jquery"],function(h,e,a,b,c,f,d,g,i){return f.Controller.extend({_shouldShow:function(){return !this.model.isEmpty()},_shouldShowTriggerView:function(){if(this.options.changeViewText){var j=this.model.getAllItems().length;return j>1}else{return true}},_sanitizeItems:function(){var j=this.options.itemGroups;if(j&&j[0]){if(!g.isArray(j[0])){return[j]}}return j},_buildModel:function(){this.model=new c({itemGroups:this._sanitizeItems()});this.model.selectItem(this.options.selectedItem);this.listenTo(this.model,"change:selectedItem",this.show)},_buildTitleView:function(){this.titleView=new e({model:this.model});this.titleView.setElement(i(this.options.titlePlaceholder))},_buildTriggerView:function(){if(this.options.changeViewText){this.triggerView=new a({model:this.model,id:this.options.id,label:this.options.changeViewText})}else{this.triggerView=new h({model:this.model,id:this.options.id})}this.triggerView.setElement(i(this.options.triggerPlaceholder))},_buildContentView:function(){this.contentView=new b({model:this.model,id:this.options.id,hideSelectedItem:this.options.hideSelectedItem});this.contentView.setElement(i(this.options.contentPlaceholder));this.listenTo(this.contentView,"click",function(l){this.model.selectItem(l);var k=this.model.get("selectedItem");var j=this.triggerPreventable("itemSelected",{item:k});if(j.isPrevented){return}if(k.link){d.reloadViaWindowLocation(k.link)}}.bind(this))},initialize:function(){this._buildModel();if(this._shouldShow()){this._buildTriggerView();this._buildContentView();if(this.options.titlePlaceholder){this._buildTitleView()}}},show:function(){if(this._shouldShow()){if(this._shouldShowTriggerView()){this.triggerView.render();this.contentView.render()}if(this.titleView){this.titleView.render()}}},selectItem:function(j){if(this._shouldShow()){this.model.selectItem(j)}}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = '/static/components/subnavigator/Subnavigator-namespaces.js' */
AJS.namespace("JIRA.Projects.Subnavigator",null,require("jira/projects/components/subnavigator/subnavigator"));AJS.namespace("JIRA.Projects.Subnavigator.Views.Content",null,require("jira/projects/components/subnavigator/views/content"));AJS.namespace("JIRA.Projects.Subnavigator.Views.StaticTrigger",null,require("jira/projects/components/subnavigator/views/static-trigger"));AJS.namespace("JIRA.Projects.Subnavigator.Views.Title",null,require("jira/projects/components/subnavigator/views/title"));AJS.namespace("JIRA.Projects.Subnavigator.Views.Trigger",null,require("jira/projects/components/subnavigator/views/trigger"));AJS.namespace("JIRA.Projects.Subnavigator.Entities.Items",null,require("jira/projects/components/subnavigator/entities/items"));AJS.namespace("JIRA.Projects.Subnavigator.Templates",null,require("jira/projects/components/subnavigator/templates"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:data', location = 'data/web-resource-manager.js' */
define("jira/projects/data/WRM",window.WRM);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:projects-api', location = 'page/projects-api.js' */
define("jira/api/projects",["wrm/data"],function(d){var a=d.claim("project-key");var c=d.claim("project-id");var b=d.claim("project-name");var e=d.claim("project-type");return{getCurrentProjectId:function(){return c},getCurrentProjectKey:function(){return a},getCurrentProjectName:function(){return b},getCurrentProjectType:function(){return e}}});AJS.namespace("JIRA.API.Projects",null,require("jira/api/projects"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:apis', location = 'js/apis/projects.js' */
define("jira/projectissuenavigator/apis/projects",["jira/api/projects"],function(a){return a});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:libs-uri', location = 'js/libs/uri.js' */
define("jira/projectissuenavigator/libs/uri",["require"],function(a){return a("atlassian/libs/uri-1.14.1")});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:libs-underscore', location = 'js/libs/underscore.js' */
define("jira/projectissuenavigator/libs/underscore",["require"],function(a){return a("underscore")});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:libs-backbone', location = 'js/libs/backbone.js' */
define("jira/projectissuenavigator/libs/backbone",["require"],function(a){var b=a("backbone");return b});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:libs-marionette', location = 'js/libs/marionette.js' */
define("jira/projectissuenavigator/libs/marionette",["require"],function(a){return a("jira/components/libs/marionette-2.1.0")});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:libs-ajshelper', location = 'js/libs/ajshelper.js' */
define("jira/projectissuenavigator/libs/ajshelper",[],function(){var a=window.AJS;return{format:a.format.bind(a),trigger:a.trigger.bind(a)}});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:metrics', location = 'content/js/util/metrics.js' */
define("jira/issues/navigator/metrics",["internal/browser-metrics"],function(a){function b(c,e){var f=document.querySelectorAll(c);for(var d=0;d<f.length;d++){f[d].classList.add(e)}}return{notifyIssueView:function(d){d=Boolean(d);var e="#key-val";var c=".issue-body-content:not(.browser-metrics-stale)";if(!d){b(c,"browser-metrics-stale")}a.start({isInitial:d,key:"jira.issue.view",ready:[{selector:e,requireUpdate:false},{selector:c,requireUpdate:false}]})},notifyIssueNavList:function(){var c=".navigator-content";var d="#issuetable:not(.browser-metrics-stale), .error:not(.browser-metrics-stale), .no-results-hint:not(.browser-metrics-stale), #errorPageContainer:not(.browser-metrics-stale)";b(d,"browser-metrics-stale");a.start({key:"jira.issue.nav-list",ready:[{selector:c,requireUpdate:false},{selector:d,requireUpdate:false}]})}}});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'templates/issuesearch.soy' */
// This file was automatically generated from issuesearch.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Issues.Projects.IssueSearch.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Issues == 'undefined') { JIRA.Issues = {}; }
if (typeof JIRA.Issues.Projects == 'undefined') { JIRA.Issues.Projects = {}; }
if (typeof JIRA.Issues.Projects.IssueSearch == 'undefined') { JIRA.Issues.Projects.IssueSearch = {}; }
if (typeof JIRA.Issues.Projects.IssueSearch.Templates == 'undefined') { JIRA.Issues.Projects.IssueSearch.Templates = {}; }


JIRA.Issues.Projects.IssueSearch.Templates.defaultEmptyState = function(opt_data, opt_ignored) {
  return '<div class="jira-adbox jira-adbox-medium no-results no-results-message"><h3>' + soy.$$escapeHtml("No issues were found to match your search") + '</h3><p class="no-results-hint">' + soy.$$escapeHtml("Try modifying your filter or creating a new issue below") + '</p></div>';
};
if (goog.DEBUG) {
  JIRA.Issues.Projects.IssueSearch.Templates.defaultEmptyState.soyTemplateName = 'JIRA.Issues.Projects.IssueSearch.Templates.defaultEmptyState';
}


JIRA.Issues.Projects.IssueSearch.Templates.emptyState = function(opt_data, opt_ignored) {
  return '<div><div class="navigator-content empty-results">' + soy.$$filterNoAutoescape(opt_data.content) + '<div class="inline-issue-create-container"></div></div></div>';
};
if (goog.DEBUG) {
  JIRA.Issues.Projects.IssueSearch.Templates.emptyState.soyTemplateName = 'JIRA.Issues.Projects.IssueSearch.Templates.emptyState';
}


JIRA.Issues.Projects.IssueSearch.Templates.issueCreatedFlag = function(opt_data, opt_ignored) {
  var output = '';
  var link__soy14 = '<a class="issue-created-key issue-link" data-issue-key="' + opt_data.issueKey + '" href="' + "" + '/projects/' + opt_data.projectKey + '/issues/' + opt_data.issueKey + '">' + opt_data.issueKey + ' - ' + opt_data.summary + '</a>';
  output += AJS.format("{0} {1} has been successfully created.","Issue",link__soy14);
  return output;
};
if (goog.DEBUG) {
  JIRA.Issues.Projects.IssueSearch.Templates.issueCreatedFlag.soyTemplateName = 'JIRA.Issues.Projects.IssueSearch.Templates.issueCreatedFlag';
}


JIRA.Issues.Projects.IssueSearch.Templates.issueSearch = function(opt_data, opt_ignored) {
  return '<div class="issue-search"><header class="aui-page-header"><div class="aui-page-header-inner"><div class="aui-group aui-group-split"><div class="aui-item subnavigation"><h1><span id="issues-subnavigation-title" class="subnavigator-title"></span><span id="issues-subnavigation-trigger"></span></h1><span id="issues-subnavigation-content"></span></div><div class="aui-item"><div id="full-issue-navigator"><a href="' + soy.$$escapeHtml("") + '/issues/">' + soy.$$escapeHtml("View all issues and filters") + '</a></div></div></div></div></header><div class="details-layout"></div></div>';
};
if (goog.DEBUG) {
  JIRA.Issues.Projects.IssueSearch.Templates.issueSearch.soyTemplateName = 'JIRA.Issues.Projects.IssueSearch.Templates.issueSearch';
}
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'templates/issueview.soy' */
// This file was automatically generated from issueview.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Issues.Projects.IssueView.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Issues == 'undefined') { JIRA.Issues = {}; }
if (typeof JIRA.Issues.Projects == 'undefined') { JIRA.Issues.Projects = {}; }
if (typeof JIRA.Issues.Projects.IssueView == 'undefined') { JIRA.Issues.Projects.IssueView = {}; }
if (typeof JIRA.Issues.Projects.IssueView.Templates == 'undefined') { JIRA.Issues.Projects.IssueView.Templates = {}; }


JIRA.Issues.Projects.IssueView.Templates.issueView = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="issue-view"><div class="navigation-tools"><div class="pager-container"></div><div class="collapse-container"></div></div><div class="issue-container">' + ((opt_data.serverRenderedViewIssue) ? JIRA.Components.IssueViewer.Templates.layout(opt_data) : '') + '</div></div>';
};
if (goog.DEBUG) {
  JIRA.Issues.Projects.IssueView.Templates.issueView.soyTemplateName = 'JIRA.Issues.Projects.IssueView.Templates.issueView';
}


JIRA.Issues.Projects.IssueView.Templates.issueCollapse = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<button title="' + soy.$$escapeHtml(AJS.format("Collapse issue ( {0} )",opt_data.collapseShortcutKey ? opt_data.collapseShortcutKey : '')) + '" class="aui-button aui-button-subtle collapse"><span class="aui-icon aui-icon-small aui-iconfont-unfocus">' + soy.$$escapeHtml(AJS.format("Collapse issue ( {0} )",opt_data.collapseShortcutKey ? opt_data.collapseShortcutKey : '')) + '</span></button>';
};
if (goog.DEBUG) {
  JIRA.Issues.Projects.IssueView.Templates.issueCollapse.soyTemplateName = 'JIRA.Issues.Projects.IssueView.Templates.issueCollapse';
}
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/ProjectIssueNavigator.js' */
define("jira/projectissuenavigator",["require"],function(h){var s=h("jira/projectissuenavigator/libs/underscore");var j=h("jira/projectissuenavigator/services/analytics");var o=h("jira/projectissuenavigator/services/api");var t=h("jira/projectissuenavigator/services/filters");var c=h("jira/projectissuenavigator/services/dialogscleaner");var l=h("jira/projectissuenavigator/pages/issuesearch");var n=h("jira/projectissuenavigator/pages/issueview");var k=h("jquery");var f=h("jira/projectissuenavigator/libs/marionette");var e=h("jira/projectissuenavigator/services/metrics");var q=h("jira/projectissuenavigator/services/router");var m=h("jira/projectissuenavigator/entities/navigatorstate");var p=h("jira/projectissuenavigator/services/traces");var d=h("jira/projectissuenavigator/services/jiraevents");var a=h("wrm/data");var g=h("jira/components/search");var r=h("jira/projectissuenavigator/services/keyboardshortcuts");var i=h("jira/projectissuenavigator/services/urlhelper");var b=h("jira/projectissuenavigator/services/browser");return f.Object.extend({_initializedFromPageLoad:true,initialize:function(u){u=s.defaults({},u,{el:k("<div></div>"),canCreateIssues:false,emptyViewContent:""});this.el=u.el;this.canCreateIssues=u.canCreateIssues;this.emptyViewContent=u.emptyViewContent},_buildSearch:function(){this.searchService=new g();var w=a.claim("com.atlassian.jira.jira-issue-navigator-components:search-data");if(w){var u=this.searchService.setPreloadedData(w);var v=a.claim("com.atlassian.jira.jira-issue-navigator-components:search-results");if(v){u.setPreloadedData(v)}this.state.set("searchResults",u)}},_buildIssueView:function(){this.issueView=new n({state:this.state,search:this.searchService,showCollapse:this.state.has("filter")});this.listenTo(this.issueView,{collapse:function(u){e.startIssueSearch();j.collapseIssue({source:u});this._showIssueSearch()},linkToIssue:function(){e.startIssueView()},issueDelete:function(w){e.startIssueSearch();var v=this.state.get("searchResults");if(!v){this._destroyIssueView();this._showIssueSearch()}else{var u=v.get(w.issueId);v.removeAndUpdateSelectionIfNeeded(u).done(function(){if(v.selected){this.state.set("issue",v.selected.get("key"))}this._destroyIssueView();this._showIssueSearch()}.bind(this))}},updateUrl:function(u){this.router.updateURL({project:this.state.get("project"),issue:u.issueKey,filter:this.state.get("filter"),orderby:this.state.get("orderby"),replaceHistory:this._initializedFromPageLoad,keepParameters:this._initializedFromPageLoad,isIssueView:true});this._initializedFromPageLoad=false},editorFieldsLoaded:this._notifyIssueViewEditorFieldsLoaded.bind(this),loadError:function(u){u=u||[];this.jiraEvents.triggerRefreshIssuePage(u.issueId)},individualPanelRendered:function(u){this.jiraEvents.triggerNewContentAddedFromPanelRefreshed(u)},viewRendered:function(u,v){this.jiraEvents.triggerNewContentAddedFromPageLoad(u);this.jiraEvents.triggerRefreshToggleBlocks(v)},panelRendered:function(w,v,u){this.jiraEvents.triggerPanelRefreshed(w,v,u)}})},_buildKeyboardShortuts:function(){var u=new r();this.listenTo(u,{focusIssueList:function(){if(this.issueSearch){this.issueSearch.focusIssueList()}},focusIssueEditor:function(){if(this.issueSearch){this.issueSearch.focusIssueEditor()}else{if(this.issueView){this.issueView.focusIssueEditor()}}}})},_notifyIssueViewEditorLoadedAndInThePage:function(u){u=u||{};this.jiraEvents.triggerNewContentAddedFromPanelRefreshed(this.issueView.el);if(!u.existingMarkup){this.jiraEvents.triggerRefreshIssuePage(this.issueView.getIssueId())}p.traceEditorLoaded();j.triggerProjectNavViewIssue({issueId:this.issueView.getIssueId(),issueKey:this.issueView.getIssueKey(),projectId:this.issueView.getProjectId(),projectKey:this.issueView.getProjectKey(),projectType:this.issueView.getProjectType()});e.endIssueView()},_notifyIssueViewEditorFieldsLoaded:function(){p.traceEditorFieldsLoaded()},_notifyIssueSearchEditorLoadedAndInThePage:function(u){u=u||{};this.jiraEvents.triggerNewContentAddedFromPanelRefreshed(this.issueSearch.el);if(!u.issueRefreshedEvent){this.jiraEvents.triggerRefreshIssuePage(this.issueSearch.getIssueId())}j.triggerProjectNavViewIssue({issueId:this.issueSearch.getIssueId(),issueKey:this.issueSearch.getIssueKey(),projectId:this.issueSearch.getProjectId(),projectKey:this.issueSearch.getProjectKey(),projectType:this.issueSearch.getProjectType()});p.traceEditorLoaded()},_showIssueView:function(u){this._buildIssueView();o.useImplementation(this._getAPIImplementation(this.issueView));function v(w){this.listenTo(this.issueView,{editorLoaded:this._notifyIssueViewEditorLoadedAndInThePage.bind(this)});w=s.defaults({},w,{existingMarkup:false});this._notifyIssueViewEditorLoadedAndInThePage(w);this.issueView.adjustSize();this.issueView.focusIssueEditor()}if(u.existingMarkup===true){this.issueView.attach(this.el.find(".issue-view"));this.issueView.loadFromPage(u.issueKey).always(function(){v.call(this,{existingMarkup:true})}.bind(this))}else{this.issueView.render();this.issueView.load(u.issueKey).always(function(){this._activateIssueViewPage();v.call(this,{existingMarkup:false})}.bind(this))}},_destroyIssueView:function(){if(this.issueView){this.issueView.destroy();this.stopListening(this.issueView);delete this.issueView}},_buildIssueSearch:function(){this.issueSearch=new l({canCreateIssues:this.canCreateIssues,emptyViewContent:this.emptyViewContent,state:this.state,search:this.searchService});this.listenTo(this.issueSearch,{linkToIssue:function(u){e.startIssueView();this.state.unset("searchResults");this.state.unset("filter");this._showIssueView({issueKey:u.issueKey})},expand:function(u){e.startIssueView();j.expandIssue({source:u});this._stateBeforeExpand=new m({filter:this.state.get("filter"),searchResults:this.state.get("searchResults"),issue:this.state.get("issue")});this._showIssueView({issueKey:this.issueSearch.getIssueKey()})},filterSelected:function(u){j.filterSelect(u)},goToFullIssueNavigator:function(){j.goToFullIssueNavigator()},issueSelectedInList:function(u){j.issueSelectedInList(u)},manageFilters:function(){j.manageFilters()},"list:update":function(){p.traceListLoaded()},editorLoaded:function(u){this._notifyIssueSearchEditorLoadedAndInThePage(u)},editorFieldsLoaded:function(){this._notifyIssueViewEditorFieldsLoaded()},editorError:function(){p.traceEditorError()},"pager:next":function(u){j.pager("next",u)},"pager:previous":function(u){j.pager("previous",u)},"issue:select issue:empty":function(){this.router.updateURL({project:this.state.get("project"),issue:this.state.get("issue"),filter:this.state.get("filter"),orderby:this.state.get("orderby"),replaceHistory:this._initializedFromPageLoad});this._initializedFromPageLoad=false},"editor:saveSuccess":function(u){j.editorFieldSaved(u)},"editor:editField":function(u){j.editFieldStarted(u)},"editor:editFieldCancel":function(u){j.editFieldCancelled(u)}})},_activateIssueSearchPage:function(){this._destroyIssueView();this._activatePage(this.issueSearch)},_activateIssueViewPage:function(){this._destroyIssueSearch();this._activatePage(this.issueView)},_showIssueSearch:function(u){u=u||{};if(!this.issueSearch){this._buildIssueSearch();this._activateIssueSearchPage();o.useImplementation(this._getAPIImplementation(this.issueSearch));this.issueSearch.show()}if(this.state.has("searchResults")){this.issueSearch.load()}else{if(this._stateBeforeExpand){this.state.set({searchResults:this._stateBeforeExpand.get("searchResults"),issue:this._stateBeforeExpand.get("issue"),filter:this._stateBeforeExpand.get("filter")});delete this._stateBeforeExpand;this.issueSearch.load()}else{this.issueSearch.search({filter:u.filter||t.getDefaultFilterId(),issue:u.issue||null,orderby:u.orderby||null,startIndex:u.startIndex||null})}}},_destroyIssueSearch:function(){if(this.issueSearch){this.issueSearch.destroy();this.stopListening(this.issueSearch);delete this.issueSearch}},_activatePage:function(u){this.el.find(".content").empty().append(u.el)},_scrollToAnchor:function(){var u=i.getAnchor();b.scrollIntoView(u)},_buildRouter:function(){this.router=new q();this.listenTo(this.router,{"route:browse:initial":function(u){e.startIssueViewFromPageLoad();this.state.update(u);this._showIssueView({existingMarkup:a.claim("com.atlassian.jira.jira-projects-issue-navigator:server-rendered"),issueKey:u.issue});this._scrollToAnchor()},"route:browse":function(u){e.startIssueView();if(!u.filter){this.state.unset("searchResults")}this.state.update(u);this._showIssueView({existingMarkup:false,issueKey:u.issue});c.clean();this._scrollToAnchor()},"route:issues:initial":function(u){e.startIssueSearchFromPageLoad();u.filter=t.sanitiseFilter(u.filter);this.state.update(u);this._showIssueSearch(u);j.filterSelect({filterId:u.filter,source:"url"})},"route:issues":function(u){e.startIssueSearch();this.state.unset("searchResults");u.filter=t.sanitiseFilter(u.filter);this.state.update(u);this._showIssueSearch(u);j.filterSelect({filterId:u.filter,source:"url"});c.clean()}})},_getAPIImplementation:function(v){var w=this;var u={viewSelectedIssue:function(){if(!w.issueView){e.startIssueView();w.state.unset("searchResults");w.state.unset("filter");w._showIssueView({issueKey:w.issueSearch.getIssueKey()})}},returnToSearch:function(){if(!w.issueSearch){e.startIssueSearch();w._showIssueSearch({issue:w.state.get("issue")})}},isFullScreenIssueVisible:function(){return Boolean(w.issueView)},isQueryValid:function(){return true}};return s.extend({},o.getDefaultImplementation(),v.getAPIImplementation(),u)},start:function(){k(document.body).addClass("page-type-split page-issue-navigator");this._buildRouter();this.state=new m();this.jiraEvents=new d();this._buildSearch();this._buildKeyboardShortuts();t.initialize();o.init();this.router.start();var u;k(window).on("scroll resize",s.bind(function(){if(!u){u=requestAnimationFrame(s.bind(function(){this.adjustSize();u=null},this))}},this));this.adjustSize()},adjustSize:function(){if(this.issueView){this.issueView.adjustSize()}if(this.issueSearch){this.issueSearch.adjustSize()}}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/Analytics.js' */
define("jira/projectissuenavigator/services/analytics",function(){var a=require("jira/projectissuenavigator/libs/ajshelper");return{filterSelect:function(b){a.trigger("analyticsEvent",{name:"jira.project.sidebar.issue.filter.select",data:{filterId:b.filterId,source:b.source}})},goToFullIssueNavigator:function(){a.trigger("analyticsEvent",{name:"jira.project.sidebar.issue.load.full.issue.nav"})},expandIssue:function(b){a.trigger("analyticsEvent",{name:"jira.project.sidebar.issue.expand",data:{source:b.source}})},collapseIssue:function(b){a.trigger("analyticsEvent",{name:"jira.project.sidebar.issue.collapse",data:{source:b.source}})},issueSelectedInList:function(b){a.trigger("analyticsEvent",{name:"jira.project.sidebar.issue.select.issue",data:{issueKey:b.key,source:"list",sameProject:true}})},triggerProjectNavViewIssue:function(b){a.trigger("analyticsEvent",{name:"jira.project.sidebar.issue.view.issue",data:{issueId:b.issueId,projectId:b.projectId,projectType:b.projectType,issueMatchesProjectContext:b.issueKey==null?false:b.issueKey.indexOf(b.projectKey+"-")===0}})},manageFilters:function(){a.trigger("analyticsEvent",{name:"jira.project.sidebar.issue.filter.manage"})},pager:function(c,b){a.trigger("analyticsEvent",{name:"jira.project.sidebar.issue.pager",data:{current:b.current,total:b.total,direction:c}})},editorFieldSaved:function(b){a.trigger("analyticsEvent",{name:"kickass.inlineEdit",data:{issueId:b.issueId,savedFieldIds:b.savedFieldIds,savedFieldTypes:b.savedFieldTypes,source:"jira.projectissuenav.global"}})},editFieldStarted:function(b){a.trigger("analyticsEvent",{name:"kickass.inlineEdit.start",data:{issueId:b.issueId,fieldId:b.fieldId,fieldType:b.fieldType,source:"jira.projectissuenav.global"}})},editFieldCancelled:function(b){a.trigger("analyticsEvent",{name:"kickass.inlineEdit.cancel",data:{issueId:b.issueId,fieldId:b.fieldId,fieldType:b.fieldType,source:"jira.projectissuenav.global"}})}}});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/API.js' */
define("jira/projectissuenavigator/services/api",["require"],function(d){var c=d("jira/projectissuenavigator/libs/underscore");var a=function(){};var b={nextIssue:a,previousIssue:a,getActiveIssueId:a,getActiveIssueKey:a,refreshActiveIssue:a,refreshIssue:a,editField:a,getFields:a,isSaving:a,isLoading:a,hasAccessibleIssue:a,showLoadError:a,waitForSavesToComplete:a,viewSelectedIssue:a,returnToSearch:a,focusSearch:a,toggleFilterPanel:a,isQueryValid:a,isFullScreenIssueVisible:a,switchLayouts:a,openFocusShifter:a,toggleFullscreenIssue:a};var f=b;function h(i){var j={};i.forEach(function(k){j[k]=function(){return f[k].apply(f,arguments)}});return j}function g(){var i=h(["nextIssue","previousIssue","getActiveIssueId","getActiveIssueKey","refreshActiveIssue","refreshIssue","editField","getFields","isSaving","isLoading","hasAccessibleIssue","showLoadError","waitForSavesToComplete","viewSelectedIssue","returnToSearch","focusSearch","toggleFilterPanel","isQueryValid","isFullScreenIssueVisible","switchLayouts","openFocusShifter","toggleFullscreenIssue"],f);return i}function e(j){var i={viewSelectedIssue:function(){j.viewSelectedIssue()},nextIssue:function(){j.nextIssue()},returnToSearch:function(){j.returnToSearch()},focusSearch:function(){j.focusSearch()},toggleFilterPanel:function(){j.toggleFilterPanel()},isQueryValid:function(){return j.isQueryValid()},isFullScreenIssueVisible:function(){return j.isFullScreenIssueVisible()},switchLayouts:function(){j.switchLayouts()},openFocusShifter:function(){j.openFocusShifter()},waitForSavesToComplete:function(){j.waitForSavesToComplete()},prevIssue:function(){j.previousIssue()},getSelectedIssueId:function(){return j.getActiveIssueId()},getSelectedIssueKey:function(){return j.getActiveIssueKey()},refreshSelectedIssue:function(){return j.refreshActiveIssue()},editFieldOnSelectedIssue:function(k){return j.editField(k)},getFieldsOnSelectedIssue:function(){return j.getFields()},hasSavesInProgress:function(){return j.isSaving()},isCurrentlyLoadingIssue:function(){return j.isLoading()},isSelectedIssueAccessible:function(){return j.hasAccessibleIssue()},issueIsVisible:function(){return j.hasAccessibleIssue()},showInlineIssueLoadError:function(){return j.showLoadError()},updateIssue:function(k){k=k||{};return j.refreshIssue(k.id)},toggleFullscreenIssue:function(){j.toggleFullscreenIssue()}};AJS.namespace("JIRA.Issues.Api",null,i)}return{getDefaultImplementation:function(){return c.clone(b)},init:function(){var i=g();e(i);AJS.namespace("JIRA.API.IssueSearch",null,i)},useImplementation:function(i){f=i}}});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/Browser.js' */
define("jira/projectissuenavigator/services/browser",function(){return{getCurrentUrl:function(){return document.location.href},hasPushState:function(){return !!(window.history&&window.history.pushState)},locationReplace:function(a){return window.location.replace(a)},locationAssign:function(a){return window.location.assign(a)},getDocument:function(){return document},scrollIntoView:function(b){var a=document.getElementById(b);if(a){a.scrollIntoView()}}}});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/Filters.js' */
define("jira/projectissuenavigator/services/filters",["require"],function(d){var e=d("wrm/context-path")();var j=d("jira/projectissuenavigator/libs/underscore");var g=d("wrm/data");var c=d("jira/projectissuenavigator/libs/ajshelper");var b=d("jira/projectissuenavigator/apis/projects");var a;var l;var k;var f;var i;function h(m){return j.indexBy(j.flatten(m),"id")}return{initialize:function(){a=g.claim("com.atlassian.jira.jira-projects-issue-navigator:generic-filters")||[];l=g.claim("com.atlassian.jira.jira-projects-issue-navigator:project-filters")||[];k=g.claim("com.atlassian.jira.jira-projects-issue-navigator:can-manage-filters");i=g.claim("com.atlassian.jira.jira-projects-issue-navigator:default-filter-priority")||[this.getAllIssuesFilterId()];f=b.getCurrentProjectId()},getExtraLinks:function(){return[{id:"manage",label:"Manage Filters",link:e+"/secure/ManageFilters.jspa?searchShareType=project&projectShare="+f+"&Search=Search&filterView=search"}]},getAvailableFilters:function(m){var n=[];if(a&&a.length){n.push(a)}if(l&&l.length){n.push(l);if(m&&k){n.push(this.getExtraLinks())}}return n},getDefaultFilterId:function(){return j.find(i,j.bind(function(m){return !!j.findWhere(j.flatten(this.getAvailableFilters()),{id:m})},this))},getJQL:function(n,m,p){var o=j.findWhere(j.flatten(this.getAvailableFilters()),{id:n});if(o){return c.format(o.jql,m,p||o.defaultOrderby)}},getAllIssuesFilterId:function(){return"allissues"},sanitiseFilter:function(m){if(j.some(j.flatten(this.getAvailableFilters()),function(n){return n.id===m})){return m}return this.getDefaultFilterId()},filterSupportsInlineIssueCreate:function(m){var o=h(this.getAvailableFilters(false));var n=o[m];return Boolean(n&&n.supportsInlineIssueCreate)}}});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/DialogsOverrider.js' */
define("jira/projectissuenavigator/services/dialogsoverrider",["require"],function(d){var i=d("jira/dialog/dialog");var k=d("jira/util/events");var c=d("jira/dialog/form-dialog");var l=d("jquery");var f=d("jira/dialog/labels-dialog");var h=d("jira/projectissuenavigator/libs/marionette");function a(m){return function(){var n=i.current;m.trigger("quickEdit",{issueId:n.issueId,issueKey:n.issueKey,message:n.options.issueMsg||"thanks_issue_updated"})}}function b(m){return function(){var n=i.current;m.trigger("quickCreateSubtask",{issueId:n.issueId,issueKey:n.issueKey,message:n.options.issueMsg||"thanks_issue_updated"})}}function g(m){return(typeof m.isIssueDialog==="boolean"&&m.isIssueDialog)||(l.isFunction(m.isIssueDialog)&&m.isIssueDialog())}function j(n,o,m){return function(r,q,p){if(p){p.issueId=o(p);p.issueKey=m(p);if(g(p)&&p.options.id!=="clone-issue-dialog"){p._performRedirect=function(){this.redirected=false};p.options.onDialogFinished=function(){p.hide();var s;if(p.options.id==="delete-issue-dialog"){s="issueDelete"}else{s="issueUpdate"}n.trigger(s,{issueId:p.issueId,issueKey:p.issueKey,message:p.options.issueMsg||"thanks_issue_updated"})}}}}}function e(){return function(){l("body").css("overflow","")}}return h.Object.extend({_overrideLabelsDialogSubmitResponse:function(){this.oldLabelsDialogSubmitReponse=f.prototype._handleSubmitResponse;f.prototype._handleSubmitResponse=function(){return c.prototype._handleSubmitResponse.apply(this,arguments)};this.currentLabelsDialogSubmitResponse=f.prototype._handleSubmitResponse},_restoreLabelsDialogSubmitResponse:function(){if(f.prototype._handleSubmitResponse!==this.currentLabelsDialogSubmitResponse){return}f.prototype._handleSubmitResponse=this.oldLabelsDialogSubmitReponse},initialize:function(m){this._overrideLabelsDialogSubmitResponse();this.handlerDialogShow=j(this,m.getIssueId,m.getIssueKey);this.handlerDialogHide=e(this,m.getIssueId,m.getIssueKey);k.bind("Dialog.show",this.handlerDialogShow);k.bind("Dialog.hide",this.handlerDialogHide);this.handlerQuickEditSuccess=a(this);k.bind("QuickEdit.sessionComplete",this.handlerQuickEditSuccess);this.handlerQuickCreateSubtaskSuccess=b(this);k.bind("QuickCreateSubtask.sessionComplete",this.handlerQuickCreateSubtaskSuccess)},destroy:function(){this._restoreLabelsDialogSubmitResponse();k.unbind("Dialog.show",this.handlerDialogShow);k.unbind("Dialog.hide",this.handlerDialogHide);k.unbind("QuickEdit.sessionComplete",this.handlerQuickEditSuccess);k.unbind("QuickCreateSubtask.sessionComplete",this.handlerQuickCreateSubtaskSuccess)}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/DialogsCleaner.js' */
define("jira/projectissuenavigator/services/dialogscleaner",["require"],function(b){var a=b("jira/dialog/dialog");return{clean:function(){if(a.current){a.current.hide()}}}});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/FocusShifter.js' */
define("jira/projectissuenavigator/services/focusshifter",["require"],function(e){var g=e("jira/projectissuenavigator/libs/marionette");var f=e("jquery");var d=e("jira/projectissuenavigator/libs/underscore");var c=e("jira/shifter");function b(h){return d.chain(h.models).filter(function(i){return i.id!=="comment"&&i.isEditable()}).map(function(i){return{label:i.getLabel(),value:i.id}}).value()}function a(h){return function(){var j=h.getFields();var i=j?b(j):[];return{id:"edit-fields",name:"Edit Fields",context:h.getIssueKey(),weight:100,getSuggestions:function(){return new f.Deferred().resolve(i)},onSelection:function(k){var l=h.getFields().get(k);h.editField(l)}}}}return g.Object.extend({initialize:function(h){this.provider=a(h);c.register(this.provider)},onDestroy:function(){c.unregister(this.provider)},show:function(){c.show()}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/InlineIssueCreate.js' */
define("jira/projectissuenavigator/services/inline-issue-create",["require"],function(a){var b=a("jira/components/inline-issue-create");return b});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/JiraEvents.js' */
define("jira/projectissuenavigator/services/jiraevents",["require"],function(e){var c=e("jira/util/events");var d=e("jira/util/events/types");var b=e("jira/components/issueviewer/eventtypes");var a=e("jira/util/events/reasons");var f=e("jquery");var g=e("jira/projectissuenavigator/libs/marionette");return g.Object.extend({initialize:function(){this.deferredEvents=[];this.isDeferring=true;f(function(){setTimeout(this._drainDeferredEvents.bind(this),0)}.bind(this))},triggerNewContentAddedFromPanelRefreshed:function(h){this.trigger(d.NEW_CONTENT_ADDED,[f(h),a.panelRefreshed])},triggerRefreshIssuePage:function(h){this.trigger(b.ISSUE_REFRESHED,[h])},triggerNewContentAddedFromPageLoad:function(h){this.trigger(d.NEW_CONTENT_ADDED,[f(h),a.pageLoad])},triggerRefreshToggleBlocks:function(h){this.trigger(d.REFRESH_TOGGLE_BLOCKS,[h])},triggerPanelRefreshed:function(j,i,h){this.trigger(b.PANEL_REFRESHED,[j,i,h])},_drainDeferredEvents:function(){this.isDeferring=false;this.deferredEvents.forEach(function(h){this.trigger(h[0],h[1])}.bind(this));this.deferredEvents.length=0},trigger:function(h,i){if(this.isDeferring){this.deferredEvents.push([h,i])}else{c.trigger(h,i)}}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/KeyboardShortcuts.js' */
define("jira/projectissuenavigator/services/keyboardshortcuts",["require"],function(a){var f=a("jira/projectissuenavigator/services/browser");var i=a("jquery");var h=a("jira/ajs/keyboardshortcut/keyboard-shortcut-toggle");var c=a("jira/projectissuenavigator/libs/marionette");function e(){return i(f.getDocument()).find("div.aui-blanket").length>0}function b(j){return(j.which===i.ui.keyCode.LEFT||j.which===i.ui.keyCode.RIGHT)}function g(){return !h.areKeyboardShortcutsDisabled()}function d(k){if(g()&&!e()&&b(k)){var j=i(k.target);var l=j.is(":not(:input)");if(j==null||l){if(k.which===i.ui.keyCode.LEFT){this.trigger("focusIssueList")}else{if(k.which===i.ui.keyCode.RIGHT){this.trigger("focusIssueEditor")}}}}}return c.Object.extend({initialize:function(){i(f.getDocument()).on("keydown",d.bind(this))}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/LinksCapturer.js' */
define("jira/projectissuenavigator/services/linkscapturer",["require"],function(b){var c=b("jquery");var a=b("jira/projectissuenavigator/libs/underscore");var d=b("jira/projectissuenavigator/libs/marionette");return d.Object.extend({initialize:function(e){e=e||{};this.el=c(e.el);this.linkHandler=a.bind(function(){this.trigger("linkToFullIssueNavigator")},this);this.linkToFullIssueNavigator()},linkToFullIssueNavigator:function(){this.el.on("click","#full-issue-navigator",this.linkHandler)},destroy:function(){this.el.off("click","#full-issue-navigator",this.linkHandler)}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/Metrics.js' */
define("jira/projectissuenavigator/services/metrics",["require"],function(a){var b=a("internal/browser-metrics");return{startIssueView:function(){b.start({key:"jira.project.issue.view-issue"})},startIssueSearch:function(){b.start({key:"jira.project.issue.nav-detail"})},startIssueViewFromPageLoad:function(){b.start({key:"jira.project.issue.view-issue",isInitial:true,ready:[{selector:"#key-val",requireUpdate:false},".issue-body-content"]})},startIssueSearchFromPageLoad:function(){b.start({key:"jira.project.issue.nav-detail",isInitial:true})},endIssueView:function(){b.end({key:"jira.project.issue.view-issue"})},endIssueSearch:function(){b.end({key:"jira.project.issue.nav-detail"})}}});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/Notifications.js' */
define("jira/projectissuenavigator/services/notifications",["require"],function(b){var c=b("jira/message");var a=b("jira/projectissuenavigator/libs/ajshelper");var d={thanks_issue_updated:"{0} has been updated.",thanks_issue_transitioned:"{0} has been updated.",thanks_issue_assigned:"{0} has been assigned.",thanks_issue_commented:"{0} has been updated with your comment.",thanks_issue_worklogged:"Work has been logged on {0}.",thanks_issue_voted:"Your vote on {0} has been updated.",thanks_issue_watched:"Your watcher status on {0} has been updated.",thanks_issue_moved:"{0} has been moved.",thanks_issue_linked:"The links on {0} have been updated.",thanks_issue_cloned:"{0} has been cloned.",thanks_issue_labelled:"The labels on {0} have been updated.",thanks_issue_deleted:"{0} has been deleted.",thanks_issue_attached:"The file(s) have been attached to {0}."};return{show:function(f,e){var g=d[f||"thanks_issue_updated"];if(g&&e){g=a.format(g,e)}c.showSuccessMsg(g||f,{closeable:true})}}});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/Router.js' */
define("jira/projectissuenavigator/services/router",["require"],function(d){var h=d("jira/projectissuenavigator/libs/backbone");var f=d("jira/projectissuenavigator/services/urlhelper");var g=d("jira/projectissuenavigator/services/browser");var e=d("jira/util/data/meta");var c=d("wrm/context-path")();var b=d("jira/projectissuenavigator/libs/uri");var a=d("jira/projectissuenavigator/libs/underscore");return h.Router.extend({initialize:function(){this._isFirstLoad=true;this.route(/.*/,function(){var j=f.extractStateFromCurrentUrl();var k={issue:j.issue,filter:j.filter,orderby:j.orderby,startIndex:j.startIndex,project:j.project};var i=(function(l,m){if(this._isFirstLoad){this._isFirstLoad=false;this.trigger(m,k)}else{this.trigger(l,k)}}.bind(this));if(f.isBrowseUrl()){i("route:browse","route:browse:initial")}else{i("route:issues","route:issues:initial")}})},updateURL:function(l){l=l||{};this._updatePermalinkState(l);var j={issue:l.issue,project:l.project,filter:l.filter,orderby:l.orderby};var k=l.isIssueView?f.generateBrowseUrl(j):f.generateUrl(j);var i=new b(k);var n=new b(g.getCurrentUrl());var m=new b({path:n.path(),query:n.query(),fragment:n.fragment()});if(i.equals(m)){return}if(l.keepParameters){i.search(a.extend(m.search(true),i.search(true)));i.hash(m.hash());k=i.toString()}this.navigate(k,{trigger:false,replace:!!l.replaceHistory})},goTo:function(i){i=i||{};g.locationAssign(f.generateUrl({project:i.project,issue:i.issue,filter:i.filter,orderby:i.orderby}))},_getBaseurl:function(){return b.build(a.extend(a.pick(b.parse(g.getCurrentUrl()),"protocol","hostname","port","username","password"),{path:c}))},_getServerBaseurl:function(){var i=e.get("jira-base-url");if(i){return i}return this._getBaseurl()},_updatePermalinkState:function(i){if(i.issue){e.set("viewissue-permlink",new b(this._getServerBaseurl()+"/browse/"+i.issue).normalize().toString())}},start:function(){var i=f.generateRootUrl();var l=g.hasPushState();var k=f.getApplicationUrl();var j=k&&!f.isHashUrl();if(!l&&j){g.locationReplace(i+k.replace(/^\//,"#"));return}h.history.start({root:"",pushState:true})}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/Traces.js' */
define("jira/projectissuenavigator/services/traces",function(){return{traceListLoaded:function(){JIRA.trace("sidebarissuenavigator.list.loaded");JIRA.trace("jira.search.finished")},traceEditorLoaded:function(){JIRA.trace("sidebarissuenavigator.editor.loaded")},traceEditorFieldsLoaded:function(){JIRA.trace("sidebarissuenavigator.editorfields.loaded")},traceEditorError:function(){JIRA.trace("sidebarissuenavigator.editor.error")},traceIssueViewRender:function(){JIRA.trace("jira.project.issueview.render")},traceIssueUpdated:function(){JIRA.trace("jira.issue.update")}}});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/URLHelper.js' */
define("jira/projectissuenavigator/services/urlhelper",["require"],function(a){var e=a("wrm/context-path")();var j=a("jira/projectissuenavigator/services/browser");var i=a("jira/projectissuenavigator/libs/uri");function c(l,m){var k=l.search(true).filter;if(k){m.filter=k}else{m.filter=null}}function h(k,m){var l=k.search(true).orderby;if(l){m.orderby=l}else{m.orderby=null}}function d(l,m){var k=l.filename();if(k){m.issue=k}}function b(k,l){var m=k.search(true).startIndex;if(m){l.startIndex=m}else{l.startIndex=null}}function g(k){var l=new i("");if(k.issue){l.filename(k.issue)}if(k.filter){l.setSearch("filter",k.filter)}else{l.removeSearch("filter")}if(k.orderby){l.setSearch("orderby",k.orderby)}else{l.removeSearch("orderby")}return l.toString()}function f(l){var k=new i("");if(l){k.path(e+"/projects/"+l+"/issues")}return k.toString()}return{extractProjectKeyFromCurrentUrl:function(){var l=new i(j.getCurrentUrl()).pathname();var k;if(this.isBrowseUrl(l)){k=l.match(/\/([A-Z0-9]+)\-[0-9]+$/)}else{k=l.match(/\/projects\/([^\/]+?)\/issues/)}if(k){return k[1]}else{return null}},extractIssueKeyFromCurrentUrl:function(){var l=new i(j.getCurrentUrl()).pathname();var k=l.match(/\/([A-Z0-9]+\-[0-9]+)$/);if(k){return k[1]}else{return null}},generateUrl:function(l){var k=f(l.project);var n=g(l);var m=j.hasPushState()?"/":"#";return k+m+n},generateBrowseUrl:function(l){var k=new i("");k.path(e+"/browse/");var m=g(l);return k.toString()+m},extractStateFromCurrentUrl:function(){var k=new i(this.getApplicationUrl());if(this.isHashUrl()){k=new i(k.fragment())}var l={};c(k,l);h(k,l);d(k,l);b(k,l);l.project=this.extractProjectKeyFromCurrentUrl();return l},generateRootUrl:function(k){k=k||this.extractProjectKeyFromCurrentUrl();return f(k)},getApplicationUrl:function(){var k=j.getCurrentUrl();var l=new RegExp(this.isBrowseUrl(k)?"^.*/browse/":"^.*"+this.generateRootUrl()+"");return k.replace(l,"")},isBrowseUrl:function(k){k=k||j.getCurrentUrl();return k.indexOf("/browse/")>-1},isHashUrl:function(){var l=this.getApplicationUrl();var k=l.match(/^#/);return !!k},getAnchor:function(){return new i(j.getCurrentUrl()).fragment()}}});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/pages/issueview/views/IssueView.js' */
define("jira/projectissuenavigator/pages/issueview/views/issue",["require"],function(b){var e=b("jira/projectissuenavigator/libs/marionette");var c=b("jira/projectissuenavigator/pages/issueview/templates");var d=b("jira/ajs/keyboardshortcut/keyboard-shortcut");var a=e.ItemView.extend({template:c.issueCollapse,rendered:false,triggers:{click:"collapse"},onRender:function(){this.unwrapTemplate();this.$el.tooltip({gravity:"e"})},onDestroy:function(){if(this.$el.tooltip){this.$el.tooltip("hide")}},serializeData:function(){return{collapseShortcutKey:d.getKeyboardShortcutKeys("fullscreen.issue")}}});return e.LayoutView.extend({template:c.issueView,className:"wrapper",rendered:false,regions:{issueContainer:".issue-container",pager:".pager-container",collapse:".collapse-container"},initialize:function(f){this.showCollapse=f.showCollapse||false;this._initSubview()},_initSubview:function(){this._collapseSubview=new a();this.listenTo(this._collapseSubview,"collapse",function(){this.trigger("collapse")}.bind(this))},maximizeHeight:function(){this.$el.css("height",window.innerHeight-this.$el.offset().top)},onRender:function(){if(this.showCollapse){this.collapse.show(this._collapseSubview);if(d.initialised&&!d.initialised.isResolved()){d.initialised.then(function(){this._collapseSubview.render()}.bind(this))}}this.unwrapTemplate(this.className);this.rendered=true},attach:function(f){this.setElement(f);this.bindUIElements();this.triggerMethod("render")},templateHelpers:function(){return this.options}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/pages/issueview/IssueView.js' */
define("jira/projectissuenavigator/pages/issueview",["require"],function(b){var m=b("jira/projectissuenavigator/libs/underscore");var p=b("jira/components/issueviewer/services/darkfeatures");var g=b("jira/projectissuenavigator/services/dialogsoverrider");var k=b("jira/projectissuenavigator/services/focusshifter");var c=b("jira/components/issuecomponentresolver");var j=b("jira/projectissuenavigator/pages/issueview/views/issue");var h=b("jira/components/issueviewer/templates");var l=b("jira/flag");var o=b("jquery");var i=b("jira/projectissuenavigator/libs/marionette");var d=b("jira/projectissuenavigator/services/metrics");var f=b("jira/projectissuenavigator/services/notifications");var a=b("jira/components/pager");var n=b("jira/projectissuenavigator/services/traces");var e=b("wrm/data");return i.Object.extend({initialize:function(q){this.showCollapse=q.showCollapse||false;this.state=q.state;this._buildIssueView();this._buildIssueComponent();this._buildDialogsOverrider();this._buildFocusShifter();this._buildPager()},onDestroy:function(){this.issueComponent.close();this.issueView.destroy();this.dialogsOverrider.destroy();this.focusShifter.destroy();this._destroyPager();if(this.el){this.el.remove()}},_destroyPager:function(){if(this.pager){this.pager.destroy();this.stopListening(this.pager);delete this.pager}},render:function(){this.issueView.render();this.el=this.issueView.$el},attach:function(q){this.issueView.attach(q);this.el=this.issueView.$el},loadFromPage:function(q){this._updateState(q);this._updateURL(q);this._updatePager();return this.issueComponent.loadIssueRenderedByTheServer({key:q,project:{id:e.claim("projectId"),key:e.claim("projectKey"),projectType:e.claim("projectType")},detailView:false})},load:function(q){this._updateState(q);this._updateURL(q);this._updatePager();return this.issueComponent.loadIssue({key:q,detailView:false})},_updateURL:function(q){if(p.REDIRECT_FROM_GLOBAL_TO_PROJECT.enabled()){this.trigger("updateUrl",{issueKey:q})}},_updatePager:function(){var r=this.state.get("searchResults");var q=this.state.get("issue");if(r&&r.hasIssueInSearch(q)){if(!r.selected||r.selected.get("key")!==q){r.select(q)}this.pager.update(r)}else{this._destroyPager()}},_updateState:function(q){this.state.set("issue",q)},adjustSize:function(){this.issueView.maximizeHeight();this.issueComponent.applyResponsiveDesign()},_buildIssueView:function(){this.issueView=new j({showCollapse:this.showCollapse});this.listenTo(this.issueView,{render:function(){this.issueView.issueContainer._ensureElement();this.issueComponent.setContainer(this.issueView.issueContainer.$el);if(this.pager){this.issueView.pager._ensureElement();this.pager.show(this.issueView.pager.$el)}},collapse:function(){this.trigger("collapse","ui-button")}})},_buildIssueComponent:function(){var q=c.resolve();this.issueComponent=new q({useJIRAEvents:false});this.listenTo(this.issueComponent,{fieldsLoaded:function(){this.trigger("editorFieldsLoaded")},loadError:function(r){this.trigger("loadError",r)},loadComplete:function(r,s){this.trigger("editorLoaded",s)},linkToIssue:function(r){this.trigger("linkToIssue",r);this.state.unset("searchResults");this.state.unset("filter");this.load(r.issueKey)},individualPanelRendered:function(r){this.trigger("individualPanelRendered",r)},renderMainView:function(r,s){this.trigger("viewRendered",r,s)},panelRendered:function(t,s,r){this.trigger("panelRendered",t,s,r)},refineViewer:function(r){r.preventDefault();this.issueComponent.updateIssueWithQuery(r.query)}})},_buildDialogsOverrider:function(){function q(t,s,r){return r&&r.$activeTrigger&&r.$activeTrigger.data(t)||(typeof s==="function")&&s()}this.dialogsOverrider=new g({getIssueId:m.partial(q,"issueid",this.issueComponent.getIssueId.bind(this.issueComponent)),getIssueKey:m.partial(q,"issuekey",this.issueComponent.getIssueKey.bind(this.issueComponent))});this.listenTo(this.dialogsOverrider,{"quickEdit quickCreateSubtask issueUpdate":function(r){this.issueComponent.refreshIssue().done(function(){f.show(r.message,r.issueKey);n.traceIssueUpdated()})},issueDelete:function(r){f.show(r.message,r.issueKey);if(r.issueKey===this.state.get("issue")){this.trigger("issueDelete",r)}else{this.issueComponent.refreshIssue()}}})},_buildFocusShifter:function(){this.focusShifter=new k(this.issueComponent)},getIssueId:function(){return this.issueComponent.getIssueId()},getIssueKey:function(){return this.issueComponent.getIssueKey()},getProjectId:function(){return this.issueComponent.getProjectId()},getProjectKey:function(){return this.issueComponent.getProjectKey()},getProjectType:function(){return this.issueComponent.getProjectType()},_buildPager:function(){this.pager=new a();this.listenTo(this.pager,{next:function(){this._loadNextIssue()},previous:function(){this._loadPreviousIssue()}})},_loadNextIssue:function(){var q=this.state.get("searchResults");if(!q){return}q.getNextIssue().done(function(r){this._loadIssueFromPager(r,"pager:next")}.bind(this))},_loadPreviousIssue:function(){var q=this.state.get("searchResults");if(!q){return}q.getPreviousIssue().done(function(r){this._loadIssueFromPager(r,"pager:previous")}.bind(this))},_loadIssueFromPager:function(q,r){var s=this.state.get("searchResults");this.trigger(r,{current:s.getPositionOfIssueInSearchResults(q.id),total:s.length});this.load(q.get("key"))},getAPIImplementation:function(){var q=this;return{nextIssue:function(){var r=q.state.get("searchResults");if(!r){return}d.startIssueSearch();return q._loadNextIssue()},previousIssue:function(){var r=q.state.get("searchResults");if(!r){return}d.startIssueSearch();return q._loadPreviousIssue()},getActiveIssueId:function(){return q.issueComponent.getIssueId()},getActiveIssueKey:function(){return q.issueComponent.getIssueKey()},refreshActiveIssue:function(){d.startIssueSearch();return q.issueComponent.refreshIssue()},refreshIssue:function(){d.startIssueSearch();return q.issueComponent.refreshIssue()},editField:function(s){if(!("getFields" in q.issueComponent)){return false}var r=q.issueComponent.getFields();var t=r&&r.get(s);var u=t&&t.isEditable();if(u){q.issueComponent.editField(t)}return u},getFields:function(){if(!("getFields" in q.issueComponent)){return undefined}var r=q.issueComponent.getFields();return r.length?r:undefined},isSaving:function(){if(!("hasSavesInProgress" in q.issueComponent)){return false}return q.issueComponent.hasSavesInProgress()},isLoading:function(){return q.issueComponent.isCurrentlyLoading()},hasAccessibleIssue:function(){return !q.issueComponent.isShowingError()},showLoadError:function(){return l.showErrorMsg("",h.Body.errorsLoading(),{persistent:false})},waitForSavesToComplete:function(){if(!("hasSavesInProgress" in q.issueComponent)){return new o.Deferred().resolve().promise()}var s=new o.Deferred();if(!q.issueComponent.hasSavesInProgress()){s.resolve()}else{var r=function(){m.defer(function(){if(!q.issueComponent.hasSavesInProgress()){s.resolve()}})};q.issueComponent.once("saveSuccess",r)}return s.promise()},openFocusShifter:function(){q.focusShifter.show()},toggleFullscreenIssue:function(){if(q.showCollapse){q.trigger("collapse","kb-shortcut")}}}},focusIssueEditor:function(){this.issueComponent.focus()}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/pages/issuesearch/IssueSearch.js' */
define("jira/projectissuenavigator/pages/issuesearch",["require"],function(k){var v=k("jira/projectissuenavigator/libs/underscore");var o=k("jira/components/detailslayout");var e=k("jira/projectissuenavigator/services/dialogsoverrider");var n=k("jira/projectissuenavigator/pages/issuesearch/views/empty");var w=k("jira/projectissuenavigator/services/filters");var p=k("jira/projectissuenavigator/services/focusshifter");var s=k("jira/projectissuenavigator/services/inline-issue-create");var c=k("jira/util/events");var h=k("jira/flag");var m=k("jquery");var d=k("jira/projectissuenavigator/services/linkscapturer");var i=k("jira/projectissuenavigator/libs/marionette");var a=k("jira/message");var r=k("jira/util/data/meta");var g=k("jira/projectissuenavigator/services/metrics");var b=k("jira/projectissuenavigator/services/notifications");var t=k("jira/ajs/ajax/smart-ajax");var f=k("jira/projectissuenavigator/pages/issuesearch/templates");var q=k("jira/components/util/events");var j=k("jira/projectissuenavigator/libs/uri");var l=k("jira/projectissuenavigator/services/urlhelper");var u=JIRA.Projects.Subnavigator;return i.Object.extend({initialize:function(x){this.el=m(f.issueSearch());this._buildState(x.state);this._buildSearch(x.search);this._buildSubnavigation();if(x.canCreateIssues){this._buildInlineIssueCreate()}this._buildDetailsLayout();this._buildLinksCapturer();this._buildDialogsOverrider();this._buildFocusShifter()},_buildState:function(x){this.state=x},_setTitleText:function(x){var z=w.getAvailableFilters(true);var y=v.chain(z).flatten().findWhere({id:x}).value();var A=this.el.find("#issues-subnavigation-title");A.text((y&&y.label)||"")},_buildSubnavigation:function(){var x=this.state.get("filter")||w.getDefaultFilterId();this._setTitleText(x);this.subnavigation=new u({triggerPlaceholder:this.el.find("#issues-subnavigation-trigger"),contentPlaceholder:this.el.find("#issues-subnavigation-content"),itemGroups:w.getAvailableFilters(true),selectedItem:x,hideSelectedItem:false,changeViewText:"Switch filter"});this.listenTo(this.subnavigation,{itemSelected:function(y){if(y.item.id==="manage"){this.trigger("manageFilters")}else{if(y.item.jql){g.startIssueSearch();y.preventDefault();this._setTitleText(y.item.id);this.search({filter:y.item.id,issue:null,orderby:null});this.trigger("filterSelected",{filterId:y.item.id,source:"subnavigator"})}}}})},_buildInlineIssueCreate:function(){this.inlineIssueCreate=new s();this.listenTo(this.inlineIssueCreate,{issueCreated:function(x){g.startIssueSearch();this.search({issue:x.issue.issueKey})}})},_buildDetailsLayout:function(){var x={baseURL:l.generateRootUrl(this.state.get("project")),useExpand:true};if(this.options.canCreateIssues){x.displayInlineIssueCreate=true;x.emptyViewFactory=v.bind(function(){this.emptyView=new n({emptyViewContent:this.options.emptyViewContent});return this.emptyView},this)}this.detailsLayout=new o(x);this.listenTo(this.detailsLayout,{select:function(y){this.state.set("issue",y.key);this.trigger("issue:select",{issue:y.key})},empty:function(){this.state.unset("issue");if(this.options.canCreateIssues){this.emptyView.inlineIssueCreateContainer._ensureElement();this.inlineIssueCreate.show(this.emptyView.inlineIssueCreateContainer.$el);this.inlineIssueCreate.activateWithJQL(this.state.get("searchResults").jql)}this.trigger("issue:empty")},"list:update":function(){this.trigger("list:update")},"list:sort":function(y){g.startIssueSearch();var z=y.match(/ORDER +BY +(.*)$/i);if(!z){return}this.search({orderby:z[1]})},"list:refresh":function(){g.startIssueSearch();this.search({issue:null})},"list:select":function(y){g.startIssueSearch();this.trigger("issueSelectedInList",y)},render:function(){c.trigger(q.LAYOUT_RENDERED)},"editorLoadedFromCache editorLoaded":function(y){g.endIssueSearch();r.set("viewissue-permlink",this._getFullScreenURL(y.issueKey));this.trigger("editorLoaded",{issueRefreshedEvent:(y.issueEditorOptions||{}).issueRefreshedEvent||false})},linkToIssue:function(y){this.trigger("linkToIssue",y)},"list:pagination":function(){g.startIssueSearch()},"error:loadpage":function(y){this.showErrorFlagFromResponse(y)},"editor:saveSuccess":function(y){this.trigger("editor:saveSuccess",{issueId:y.event,savedFieldIds:y.savedFieldIds,savedFieldTypes:y.savedFieldTypes,duration:y.duration})},"editor:editField":function(y){this.trigger("editor:editField",y)},"editor:editFieldCancel":function(y){this.trigger("editor:editFieldCancel",y)},"pager:next":function(y){g.startIssueSearch();this.trigger("pager:next",y)},"pager:previous":function(y){g.startIssueSearch();this.trigger("pager:previous",y)},expand:function(){this.trigger("expand","ui-button")},editorError:function(){this.trigger("editorError")},editorFieldsLoaded:function(){this.trigger("editorFieldsLoaded")},individualPanelRendered:function(y){this.trigger("individualPanelRendered",y)}});if(this.options.canCreateIssues){this.listenTo(this.detailsLayout,{issueCreated:function(y){if(w.filterSupportsInlineIssueCreate(this.state.get("filter"))){g.startIssueSearch();this.search({issue:y.issue.issueKey})}else{a.showSuccessMsg(f.issueCreatedFlag({issueKey:y.issue.issueKey,projectKey:this.state.get("project"),summary:y.fields.summary}),{closeable:true})}}})}},_buildSearch:function(x){this.searchService=x},_buildLinksCapturer:function(){this.linksCapturer=new d({el:this.el});this.listenTo(this.linksCapturer,{linkToFullIssueNavigator:function(){this.trigger("goToFullIssueNavigator")}})},_buildDialogsOverrider:function(){function x(A,z,y){return y&&y.$activeTrigger&&y.$activeTrigger.data(A)||(typeof z==="function")&&z()}this.dialogsOverrider=new e({getIssueId:v.partial(x,"issueid",v.bind(this.detailsLayout.getActiveIssueId,this.detailsLayout)),getIssueKey:v.partial(x,"issuekey",v.bind(this.detailsLayout.getActiveIssueKey,this.detailsLayout))});this.listenTo(this.dialogsOverrider,{"quickEdit quickCreateSubtask issueUpdate":function(y){this.detailsLayout.refreshIssue(y.issueId).done(v.bind(function(){b.show(y.message,y.issueKey)},this))},issueDelete:function(y){this.removeIssue(y.issueId).done(v.bind(function(){b.show(y.message,y.issueKey)},this))}})},_buildFocusShifter:function(){this.focusShifter=new p(this.detailsLayout.issueComponent)},_getFullScreenURL:function(x){var y=r.get("jira-base-url");return new j(y+"/browse/"+x).normalize().toString()},load:function(){var z=this.state.get("searchResults");var y=this.state.get("filter");var A=w.getAllIssuesFilterId()===y;var x=this.state.get("issue");var B=z.hasIssueInSearch(x);this._setTitleText(y);this.subnavigation.selectItem(y);if(!x){this.detailsLayout.load(z);return}if(B){this.detailsLayout.load(z,x);return}if(!A){this.search({filter:w.getAllIssuesFilterId()});this.trigger("filterSelected",{filterId:w.getAllIssuesFilterId(),source:"issueFilterMismatch"});return}this.detailsLayout.load(z)},search:function(y){y=y||{};this.state.update({issue:y.issue,filter:y.filter,orderby:y.orderby});this.detailsLayout.showLoading();var x=w.getJQL(this.state.get("filter"),this.state.get("project"),this.state.get("orderby"));this.searchService.search(x).done(v.bind(function(z){this.state.update({searchResults:z});if(!this.state.has("issue")&&y.startIndex){this.state.update({issue:z.getIssueKeyForIndex(y.startIndex)})}this.load()},this)).fail(v.bind(function(z){this.detailsLayout.hideLoading();this.showErrorFlagFromResponse(z)},this))},show:function(){this.subnavigation.show();this.detailsLayout.show(m(this.el).find(".details-layout"))},onDestroy:function(){this.subnavigation.destroy();if(this.inlineIssueCreate){this.inlineIssueCreate.destroy()}this.detailsLayout.destroy();this.linksCapturer.destroy();this.dialogsOverrider.destroy();this.focusShifter.destroy()},adjustSize:function(){this.detailsLayout.adjustSize()},showErrorFlagFromResponse:function(x){if(typeof x==="undefined"||x.statusText===t.SmartAjaxResult.TIMEOUT||x.status===401||x.hasData){return this.showErrorFlag(t.buildSimpleErrorContent(x))}else{var y=JSON.parse(x.responseText);if(x.status===400&&y.errorMessages.length>0){return this.showErrorFlag(y.errorMessages[0])}else{return this.showErrorFlag(t.buildSimpleErrorContent(x))}}},showErrorFlag:function(y){var x=AJS.escapeHtml(y);return h.showErrorMsg("",x,{persistent:false})},removeIssue:function(x){return this.detailsLayout.removeIssue(x)},getIssueId:function(){return this.detailsLayout.getActiveIssueId()},getIssueKey:function(){return this.detailsLayout.getActiveIssueKey()},getProjectId:function(){return this.detailsLayout.getActiveProjectId()},getProjectKey:function(){return this.detailsLayout.getActiveProjectKey()},getProjectType:function(){return this.detailsLayout.getActiveProjectType()},getAPIImplementation:function(){var x=this;return{nextIssue:function(){g.startIssueSearch();return x.detailsLayout.selectNext()},previousIssue:function(){g.startIssueSearch();return x.detailsLayout.selectPrevious()},getActiveIssueId:function(){return x.getIssueId()},getActiveIssueKey:function(){return x.getIssueKey()},refreshActiveIssue:function(){g.startIssueSearch();var y=x.detailsLayout.getActiveIssueId();return x.detailsLayout.refreshIssue(y)},refreshIssue:function(y){g.startIssueSearch();return x.detailsLayout.refreshIssue(y)},editField:function(z){var y=x.detailsLayout.issueComponent.getFields();var A=y&&y.get(z);var B=A&&A.isEditable();if(B){x.detailsLayout.issueComponent.editField(A)}return B},getFields:function(){var y=x.detailsLayout.issueComponent.getFields();return y.length?y:undefined},isSaving:function(){return x.detailsLayout.issueComponent.hasSavesInProgress()},isLoading:function(){return x.detailsLayout.isLoading()},hasAccessibleIssue:function(){return Boolean(x.detailsLayout.searchResults&&x.detailsLayout.searchResults.length&&x.detailsLayout.searchResults.selected&&!x.detailsLayout.searchResults.selected.get("inaccessible"))},showLoadError:function(){return x.showErrorFlag(JIRA.Components.IssueViewer.Templates.Body.errorsLoading())},waitForSavesToComplete:function(){var z=new m.Deferred();if(!x.detailsLayout.issueComponent.hasSavesInProgress()){z.resolve()}else{var y=function(){v.defer(function(){if(!x.detailsLayout.issueComponent.hasSavesInProgress()){z.resolve()}})};x.once("editor:saveSuccess",y)}return z.promise()},openFocusShifter:function(){x.focusShifter.show()},toggleFullscreenIssue:function(){x.trigger("expand","kb-shortcut")}}},focusIssueList:function(){this.detailsLayout.focusList()},focusIssueEditor:function(){this.detailsLayout.focusEditor()}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/pages/issuesearch/views/Empty.js' */
define("jira/projectissuenavigator/pages/issuesearch/views/empty",["require"],function(a){var c=a("jira/projectissuenavigator/libs/marionette");var b=a("jira/projectissuenavigator/pages/issuesearch/templates");return c.LayoutView.extend({initialize:function(){this.content=this.options.emptyViewContent||b.defaultEmptyState()},template:b.emptyState,regions:{inlineIssueCreateContainer:".inline-issue-create-container"},serializeData:function(){return{content:this.content}},onRender:function(){this.unwrapTemplate()}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/entities/NavigatorState.js' */
define("jira/projectissuenavigator/entities/navigatorstate",["require"],function(b){var a=b("jira/projectissuenavigator/libs/underscore");var c=b("jira/projectissuenavigator/libs/backbone");return c.Model.extend({defaults:{project:undefined,issue:undefined,filter:undefined,orderby:undefined,searchResults:undefined,startIndex:undefined},update:function(d){a.each(d,function(f,e){if(f===null){this.unset(e)}else{if(f!==undefined){this.set(e,f)}}}.bind(this))}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/templates/amd-wrapper.js' */
define("jira/projectissuenavigator/templates",function(){return JIRA.Issues.Projects.Templates});define("jira/projectissuenavigator/pages/issuesearch/templates",function(){return JIRA.Issues.Projects.IssueSearch.Templates});define("jira/projectissuenavigator/pages/issueview/templates",function(){return JIRA.Issues.Projects.IssueView.Templates});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:commons_runtime', location = 'dist/runtime.2b5c20a5cb281e3afb54.js' */
/******/ (function(modules) { // webpackBootstrap
/******/ 	// install a JSONP callback for chunk loading
/******/ 	var parentJsonpFunction = window["jiraDevelopmentIntegrationPluginJsonp"];
/******/ 	window["jiraDevelopmentIntegrationPluginJsonp"] = function webpackJsonpCallback(chunkIds, moreModules, executeModules) {
/******/ 		// add "moreModules" to the modules object,
/******/ 		// then flag all "chunkIds" as loaded and fire callback
/******/ 		var moduleId, chunkId, i = 0, resolves = [], result;
/******/ 		for(;i < chunkIds.length; i++) {
/******/ 			chunkId = chunkIds[i];
/******/ 			if(installedChunks[chunkId]) {
/******/ 				resolves.push(installedChunks[chunkId][0]);
/******/ 			}
/******/ 			installedChunks[chunkId] = 0;
/******/ 		}
/******/ 		for(moduleId in moreModules) {
/******/ 			if(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {
/******/ 				modules[moduleId] = moreModules[moduleId];
/******/ 			}
/******/ 		}
/******/ 		if(parentJsonpFunction) parentJsonpFunction(chunkIds, moreModules, executeModules);
/******/ 		while(resolves.length) {
/******/ 			resolves.shift()();
/******/ 		}
/******/ 		if(executeModules) {
/******/ 			for(i=0; i < executeModules.length; i++) {
/******/ 				result = __webpack_require__(__webpack_require__.s = executeModules[i]);
/******/ 			}
/******/ 		}
/******/ 		return result;
/******/ 	};
/******/
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// objects to store loaded and loading chunks
/******/ 	var installedChunks = {
/******/ 		"runtime": 0
/******/ 	};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/ 	// This file contains only the entry chunk.
/******/ 	// The chunk loading function for additional chunks
/******/ 	__webpack_require__.e = function requireEnsure(chunkId) {
/******/ 		var installedChunkData = installedChunks[chunkId];
/******/ 		if(installedChunkData === 0) {
/******/ 			return new Promise(function(resolve) { resolve(); });
/******/ 		}
/******/
/******/ 		// a Promise means "currently loading".
/******/ 		if(installedChunkData) {
/******/ 			return installedChunkData[2];
/******/ 		}
/******/
/******/ 		// setup Promise in chunk cache
/******/ 		var promise = new Promise(function(resolve, reject) {
/******/ 			installedChunkData = installedChunks[chunkId] = [resolve, reject];
/******/ 		});
/******/ 		installedChunkData[2] = promise;
/******/
/******/ 		// start chunk loading
/******/ 		var head = document.getElementsByTagName('head')[0];
/******/
/******/ 		var WRMChildChunkIds = {"0":true,"1":true,"2":true,"3":true,"4":true,"5":true,"6":true,"7":true,"8":true,"9":true,"10":true,"11":true,"12":true,"13":true,"14":true};
/******/ 		if (WRMChildChunkIds[chunkId]) {
/******/ 		    WRM.require('wrc!com.atlassian.jira.plugins.jira-development-integration-plugin:' + chunkId)
/******/ 		    return promise;
/******/ 		}
/******/ 		var script = document.createElement('script');
/******/ 		script.type = 'text/javascript';
/******/ 		script.charset = 'utf-8';
/******/ 		script.async = true;
/******/ 		script.timeout = 120000;
/******/
/******/ 		if (__webpack_require__.nc) {
/******/ 			script.setAttribute("nonce", __webpack_require__.nc);
/******/ 		}
/******/ 		script.src = __webpack_require__.p + "" + ({"column-module":"column-module","devstatus-admin":"devstatus-admin","devstatus-admin-summary":"devstatus-admin-summary","devstatus-triggers":"devstatus-triggers","devstatus-view-issue":"devstatus-view-issue","releasereport":"releasereport","smart-commits":"smart-commits"}[chunkId]||chunkId) + "." + {"0":"7f570cc4c61b26b49624","1":"660b14cc82ae7ae52c56","2":"a3fac2a00aca3645e0f0","3":"659282880869414d5800","4":"698357a96693f89539af","5":"3baf307a4455cdd0fe4f","6":"6c2af02eb6395c7af2a3","7":"b07d5a9e621f56dc5380","8":"64567d428119bc70457e","9":"4731de44e1f635bef8ff","10":"8fe3f79d315453699d36","11":"9696a01896bdeaedf9b1","12":"b774db5e64988590d35c","13":"c42da6ada5b8288f6a0b","14":"91df11ac76eb51e751ca","column-module":"33178721490845798e45","devstatus-admin":"23b9358cb358b1b587ae","devstatus-admin-summary":"f2742d13f3e2154471a0","devstatus-triggers":"67541c17affe2a758e8b","devstatus-view-issue":"db31d611e52e0febdb0b","releasereport":"16c4d2c166489c1ead04","smart-commits":"736e9a39c16dd40e2e49"}[chunkId] + ".js";
/******/ 		var timeout = setTimeout(onScriptComplete, 120000);
/******/ 		script.onerror = script.onload = onScriptComplete;
/******/ 		function onScriptComplete() {
/******/ 			// avoid mem leaks in IE.
/******/ 			script.onerror = script.onload = null;
/******/ 			clearTimeout(timeout);
/******/ 			var chunk = installedChunks[chunkId];
/******/ 			if(chunk !== 0) {
/******/ 				if(chunk) {
/******/ 					chunk[1](new Error('Loading chunk ' + chunkId + ' failed.'));
/******/ 				}
/******/ 				installedChunks[chunkId] = undefined;
/******/ 			}
/******/ 		};
/******/ 		head.appendChild(script);
/******/
/******/ 		return promise;
/******/ 	};
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// on error function for async loading
/******/ 	__webpack_require__.oe = function(err) { console.error(err); throw err; };
/******/ 	if (typeof AJS !== "undefined") {
/******/ 	    __webpack_require__.p = AJS.contextPath() + "/download/resources/com.atlassian.jira.plugins.jira-development-integration-plugin:assets-DEV_PSEUDO_HASH/";
/******/ 	}
/******/ })
/************************************************************************/
/******/ ([]);
//# sourceMappingURL=runtime.2b5c20a5cb281e3afb54.js.map;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:entrypoint-devstatus-view-issue', location = 'dist/devstatus-view-issue.db31d611e52e0febdb0b.js' */
jiraDevelopmentIntegrationPluginJsonp(["devstatus-view-issue"],{

/***/ "./js/util/DevStatusNavigation.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";
var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;

/**
 * This is an attempt to avoid direct interaction with the 'window' object in Javascript land.
 * This also includes all interactions with objects such as 'location' or 'document', because they are simply a reference
 *    from 'window.location' and 'window.document' respectively.
 *
 * There are 2 main reasons for doing this:
 * 1. To allow the JS code to be QUnit testable. 'window' object is not mock-able, hence does not respond well
 *    when testing modules that refresh or navigate away from the page.
 * 2. To avoid the incident where important JS events are not run when the browser navigates away from the current page.
 *    This will allow the currently queue-ed up events to be completed first before the browser trashes the Javascript state
 *    and navigates away.
 */
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__("jira.webresources:wrm-context-path/require('wrm/context-path')"), __webpack_require__("jira.webresources:ajs-underscorejs-amd-shim/require('underscore')")], __WEBPACK_AMD_DEFINE_RESULT__ = function (wrmContextPath, _) {
    return {
        getUrl: function getUrl() {
            return window.location.href;
        },
        reload: function reload() {
            _.defer(function () {
                window.location.reload();
            });
        },
        navigate: function navigate(url) {
            _.defer(function () {
                window.location = url;
            });
        },
        redirectToLogin: function redirectToLogin() {
            this.navigate(wrmContextPath() + '/login.jsp?permissionViolation=true&os_destination=' + encodeURIComponent(window.location.href));
        }
    };
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));

/***/ }),

/***/ "./js/util/DevStatusURLUtils.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";
var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;

!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__("jira.webresources:jquery/require('jquery')"), __webpack_require__("jira.webresources:ajs-underscorejs-amd-shim/require('underscore')"), __webpack_require__, __webpack_require__("jira.webresources:parse-uri/require('jira/libs/parse-uri')")], __WEBPACK_AMD_DEFINE_RESULT__ = function ($, _, require, parseUri) {
    var devStatusNavigate = __webpack_require__("./js/util/DevStatusNavigation.js");
    return {
        getDetailDialogParam: function getDetailDialogParam() {
            var url = this._removeKickAssIHashFromUrl(devStatusNavigate.getUrl());
            var parsedUri = parseUri(url);
            return parsedUri && parsedUri.queryKey && parsedUri.queryKey['devStatusDetailDialog'];
        },
        getUrlWithDetailDialogParam: function getUrlWithDetailDialogParam(summaryType) {
            var currentUrl = this._removeKickAssIHashFromUrl(devStatusNavigate.getUrl());
            var parsedUri = parseUri(currentUrl);

            /**
            * Insert/replace devStatusDetailDialog param/query into the url
            */
            parsedUri.queryKey['devStatusDetailDialog'] = encodeURIComponent(summaryType);
            return this.createUrlFromParsedUri(parsedUri);
        },

        getCreateReviewDetailUrl: function getCreateReviewDetailUrl(applicationType) {
            return this.getUrlWithDetailDialogParam('create-review-' + applicationType);
        },

        isCreateReviewDetailDialogLink: function isCreateReviewDetailDialogLink(dialogToOpen) {
            return dialogToOpen && dialogToOpen.lastIndexOf && dialogToOpen.lastIndexOf('create-review-', 0) === 0;
        },

        getCreateReviewDetailDialogApplicationType: function getCreateReviewDetailDialogApplicationType(dialogToOpen) {
            return dialogToOpen.substring('create-review-'.length);
        },

        _removeKickAssIHashFromUrl: function _removeKickAssIHashFromUrl(url) {
            /**
            * In order to support single page app behaviour for issue nav/view issue in IE,
            * KickAss appended 'i#' prefix between the base URL and the KA url, because IE doesn't support push state
            * For example: http://localhost:2990/jira/i#browse/DEV-1
            *
            * parseUri and the logic in getUrlWithDetailDialogParam simply wouldn't work with an URL format like the above,
            * instead, we need to remove the i# prefix to get the regular non-IE-specific URL
            *
            * KA will automatically redirect from a regular URL to a i# url for IE.
            */
            return url.replace('i#', '');
        },
        /**
        * Copied from JIRA Agile.
        * See https://stash.atlassian.com/projects/JAG/repos/jira-agile/browse/greenhopper/src/main/resources/includes/js/lib/ajs-future.js#118
        *
        * Transformed the uri object from {@code parseUri} into url string
        *
        * @param uri object from {@code parseUri}
        * @returns {string}
        */
        createUrlFromParsedUri: function createUrlFromParsedUri(uri) {
            var params = [];
            $.each(uri.queryKey, function (name, value) {
                if (_.isObject(value)) {
                    $.each(value, function (index, innerVal) {
                        params.push(name + '=' + innerVal);
                    });
                } else {
                    params.push(name + '=' + value);
                }
            });

            var url = '';
            if (uri.protocol) {
                url += uri.protocol + '://';
            }
            if (uri.authority) {
                url += uri.authority;
            }
            if (uri.path) {
                url += uri.path;
            }
            if (params.length > 0) {
                url += '?' + params.join('&');
            }
            if (uri.anchor) {
                url += '#' + uri.anchor;
            }
            return url;
        }
    };
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));

/***/ }),

/***/ "./js/viewissue/DevStatusInit.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var devStatusStatePersist = __webpack_require__("./js/viewissue/DevStatusStatePersist.js");
var jQuery = __webpack_require__("jira.webresources:jquery/require('jquery')");

devStatusStatePersist.setDetailDialogParam();

jQuery(function () {
    return __webpack_require__.e/* require */(0).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__("./js/viewissue/DevStatusApp.js")]; (function (devStatusApp) {
        return devStatusApp.documentReadyInit(jQuery(document));
    }.apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__));}).catch(__webpack_require__.oe);
});

/***/ }),

/***/ "./js/viewissue/DevStatusStatePersist.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";
var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;

!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__("jira.webresources:jira-metadata/require('jira/util/data/meta')"), __webpack_require__("./js/util/DevStatusURLUtils.js")], __WEBPACK_AMD_DEFINE_RESULT__ = function (Meta, devStatusURL) {
    return {
        setDetailDialogParam: function setDetailDialogParam() {
            /**
             * Attempt to get the summary type data from url parameter to automatically open the detail dialog.
             *
             * This is done on 'page load' as opposed to 'document ready' because KickAss will immediately strip off
             * non-KA parameter from the URL (the only KA parameter is jql and startIndex).
             *
             * Data is stored in AJS.Meta with key "fusion-open-detail-dialog", which will be later read by DevStatusModule
             * after all summary data has been loaded
             */
            Meta.set('fusion-open-detail-dialog', devStatusURL.getDetailDialogParam());
        }
    };
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));

/***/ }),

/***/ "jira.webresources:ajs-underscorejs-amd-shim/require('underscore')":
/***/ (function(module, exports) {

module.exports = require('underscore');

/***/ }),

/***/ "jira.webresources:jira-metadata/require('jira/util/data/meta')":
/***/ (function(module, exports) {

module.exports = require('jira/util/data/meta');

/***/ }),

/***/ "jira.webresources:jquery/require('jquery')":
/***/ (function(module, exports) {

module.exports = require('jquery');

/***/ }),

/***/ "jira.webresources:parse-uri/require('jira/libs/parse-uri')":
/***/ (function(module, exports) {

module.exports = require('jira/libs/parse-uri');

/***/ }),

/***/ "jira.webresources:wrm-context-path/require('wrm/context-path')":
/***/ (function(module, exports) {

module.exports = require('wrm/context-path');

/***/ })

},["./js/viewissue/DevStatusInit.js"]);
//# sourceMappingURL=devstatus-view-issue.db31d611e52e0febdb0b.js.map;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-dialog2', location = 'node_modules/@atlassian/aui/src/js/aui/dialog2.js' */
("undefined"===typeof window?global:window).__abec049fae3e0e24b94d659c3600ba01=function(){function f(a){return a&&a.__esModule?a:{"default":a}}function e(a){var c=this.$el=a?(0,g.default)(a):(0,g.default)(aui.dialog.dialog2({}));g.default.each(i,function(a,b){var d="data-"+a;c[0].hasAttribute(d)||c.attr(d,b)})}var h={};"use strict";Object.defineProperty(h,"__esModule",{value:!0});var g=f(__02fa0d2334b5d2f9701871403ba9d89a),j=f(__8f23956215d754ca94df621efa6b0438),k=f(__fb27ffae84b96c14bf339e62cefcf116),
b=f(__b16464bbf0aa314bacb753553ada098e),l=f(__ecaadce486e7be7002d8453fc51f9873),i={"aui-focus":"false","aui-blanketed":"true"};e.prototype.on=function(a,c){(0,b.default)(this.$el).on(a,c);return this};e.prototype.off=function(a,c){(0,b.default)(this.$el).off(a,c);return this};e.prototype.show=function(){(0,b.default)(this.$el).show();return this};e.prototype.hide=function(){(0,b.default)(this.$el).hide();return this};e.prototype.remove=function(){(0,b.default)(this.$el).remove();return this};e.prototype.isVisible=
function(){return(0,b.default)(this.$el).isVisible()};var d=(0,l.default)("dialog2",e);d.on=function(a,c){b.default.on(a,".aui-dialog2",c);return this};d.off=function(a,c){b.default.off(a,".aui-dialog2",c);return this};(0,g.default)(document).on("click",".aui-dialog2-header-close",function(a){a.preventDefault();d((0,g.default)(this).closest(".aui-dialog2")).hide()});d.on("show",function(a,c){var b;[".aui-dialog2-content",".aui-dialog2-footer",".aui-dialog2-header"].some(function(a){b=c.find(a+" :aui-tabbable");
return b.length});b&&b.first().focus()});d.on("hide",function(a,c){var d=(0,b.default)(c);c.data("aui-remove-on-hide")&&d.remove()});(0,j.default)("aui/dialog2",d);(0,k.default)("dialog2",d);h.default=d;return h=h["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:dialog2', location = 'src/soy/dialog2.soy' */
// This file was automatically generated from dialog2.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.dialog.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.dialog == 'undefined') { aui.dialog = {}; }


aui.dialog.dialog2 = function(opt_data, opt_ignored) {
  return '' + aui.dialog.dialog2Chrome({id: opt_data.id, titleId: opt_data.id ? opt_data.id + '-dialog-title' : null, modal: opt_data.modal, tagName: opt_data.tagName, removeOnHide: opt_data.removeOnHide, visible: opt_data.visible, size: opt_data.size, extraClasses: opt_data.extraClasses, extraAttributes: opt_data.extraAttributes, content: '' + aui.dialog.dialog2Content({id: null, titleText: opt_data.titleText, titleContent: opt_data.titleContent, headerActionContent: opt_data.headerActionContent, headerSecondaryContent: opt_data.headerSecondaryContent, modal: opt_data.modal, content: opt_data.content, footerHintText: opt_data.footerHintText, footerHintContent: opt_data.footerHintContent, footerActionContent: opt_data.footerActionContent})});
};
if (goog.DEBUG) {
  aui.dialog.dialog2.soyTemplateName = 'aui.dialog.dialog2';
}


aui.dialog.dialog2Chrome = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'section') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ((opt_data.titleId) ? ' aria-labelledby="' + soy.$$escapeHtml(opt_data.titleId) + '"' : '') + ' role="dialog" class=" aui-layer aui-dialog2 aui-dialog2-' + soy.$$escapeHtml(opt_data.size ? opt_data.size : 'medium') + aui.renderExtraClasses(opt_data) + '"' + ((opt_data.modal) ? 'data-aui-modal="true"' : '') + ((opt_data.removeOnHide) ? 'data-aui-remove-on-hide="true"' : '') + ((opt_data.visible != true) ? 'aria-hidden="true"' : '') + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'section') + '>';
};
if (goog.DEBUG) {
  aui.dialog.dialog2Chrome.soyTemplateName = 'aui.dialog.dialog2Chrome';
}


aui.dialog.dialog2Content = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + aui.dialog.dialog2Header({titleId: opt_data.id ? opt_data.id + '-dialog-title' : null, titleText: opt_data.titleText, titleContent: opt_data.titleContent, actionContent: opt_data.headerActionContent, secondaryContent: opt_data.headerSecondaryContent, modal: opt_data.modal}) + aui.dialog.dialog2Panel(opt_data) + aui.dialog.dialog2Footer({hintText: opt_data.footerHintText, hintContent: opt_data.footerHintContent, actionContent: opt_data.footerActionContent});
};
if (goog.DEBUG) {
  aui.dialog.dialog2Content.soyTemplateName = 'aui.dialog.dialog2Content';
}


aui.dialog.dialog2Header = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<header' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-dialog2-header' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '><h2 ' + ((opt_data.titleId) ? ' id="' + soy.$$escapeHtml(opt_data.titleId) + '"' : '') + ' class="aui-dialog2-header-main">' + ((opt_data.titleText) ? soy.$$escapeHtml(opt_data.titleText) : '') + ((opt_data.titleContent) ? soy.$$filterNoAutoescape(opt_data.titleContent) : '') + '</h2>' + ((opt_data.actionContent) ? '<div class="aui-dialog2-header-actions">' + soy.$$filterNoAutoescape(opt_data.actionContent) + '</div>' : '') + ((opt_data.secondaryContent) ? '<div class="aui-dialog2-header-secondary">' + soy.$$filterNoAutoescape(opt_data.secondaryContent) + '</div>' : '') + ((opt_data.modal != true) ? '<a class="aui-dialog2-header-close"><span class="aui-icon aui-icon-small aui-iconfont-close-dialog">' + soy.$$escapeHtml("Close") + '</span></a>' : '') + '</header>';
};
if (goog.DEBUG) {
  aui.dialog.dialog2Header.soyTemplateName = 'aui.dialog.dialog2Header';
}


aui.dialog.dialog2Footer = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<footer' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-dialog2-footer' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.actionContent) ? '<div class="aui-dialog2-footer-actions">' + soy.$$filterNoAutoescape(opt_data.actionContent) + '</div>' : '') + ((opt_data.hintText || opt_data.hintContent) ? '<div class="aui-dialog2-footer-hint">' + ((opt_data.hintText) ? soy.$$escapeHtml(opt_data.hintText) : '') + ((opt_data.hintContent) ? soy.$$filterNoAutoescape(opt_data.hintContent) : '') + '</div>' : '') + '</footer>';
};
if (goog.DEBUG) {
  aui.dialog.dialog2Footer.soyTemplateName = 'aui.dialog.dialog2Footer';
}


aui.dialog.dialog2Panel = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-dialog2-content' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + '</div>';
};
if (goog.DEBUG) {
  aui.dialog.dialog2Panel.soyTemplateName = 'aui.dialog.dialog2Panel';
}
;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-form-notification', location = 'node_modules/@atlassian/aui/src/js/aui/form-notification.js' */
("undefined"===typeof window?global:window).__1e855e59e13e8847a5ed5441e3fd1919=function(){function l(a){return a&&a.__esModule?a:{"default":a}}function m(a){var b=n(a),a=b?a.attr(b):"",c;if(""===a)c=a;else{try{c=JSON.parse(a)}catch(d){c=[a]}c=1===c.length?c[0]:"<ul><li>"+c.join("</li><li>")+"</li></ul>"}return c}function n(a){var b;s.some(function(c){if(a.is("["+c+"]"))return b=c,!0});return b}function h(a){return a.is(":aui-focusable")}function t(a){f(a).tipsy("show");if(h(a))i(a).on("keydown",function(b){var c=
o(i(a).find(":aui-tabbable").last()),d=o(i(a).find(":aui-tabbable").first());b.keyCode===p.default.TAB&&(!b.shiftKey&&!b.altKey)&&c&&c&&a.focus();b.keyCode===p.default.TAB&&b.shiftKey&&d&&d&&(a.focus(),b.preventDefault())})}function j(a){f(a).tipsy("hide")}function i(a){a=f(a);if(a.data("tipsy"))return a.data("tipsy").$tip}function z(a){var a=a.data(A)||"side",b={side:"w",top:"se",bottom:"ne"}[a];b||(b="w",q.warn('Invalid notification position: "'+a+'". Valid options are "side", "bottom, "top"'));
return b}function f(a){return a.next("."+u)}function o(a){return(a=a instanceof d.default?a[0]:a)&&a===document.activeElement}function v(a){a=(0,d.default)(a);if(a.hasClass(r)){var b=n(a);b===w?f(a).addClass("aui-icon-wait"):f(a).removeClass("aui-icon-wait");b?(b=m(a),(d.default.contains(a[0],document.activeElement)||o(a)||!h(a))&&b?t(a):j(a)):j(a)}}"use strict";var d=l(__02fa0d2334b5d2f9701871403ba9d89a);__cc64a0d7c308ad5954e00f06c2bcc6ed;var q;var e=__8139e9a1368a0224fc430963d21930c8;if(e&&e.__esModule)q=
e;else{var g={};if(null!=e)for(var k in e)Object.prototype.hasOwnProperty.call(e,k)&&(g[k]=e[k]);g.default=e;q=g}var e=l(__8f23956215d754ca94df621efa6b0438),p=l(__d92d89c196b4703777e79d25a9f94b7f),g=l(__da172e72afc5a7088e3034df761062a6),r="_aui-form-notification-initialised",u="aui-icon-notification",w="data-aui-notification-wait",A="aui-form-notification-position",s=["data-aui-notification-error","data-aui-notification-success",w,"data-aui-notification-info"],x=[],B=["text","url","email","tel","password"];
document.addEventListener("focus",function(a){x.forEach(function(b){var b=(0,d.default)(b),c=i(b);if(h(b)){var e=c&&d.default.contains(c[0],a.target),f=b.is(a.target),g=0<(0,d.default)(a.target).closest(b).length;f||g?t(b):c&&!e&&j(b)}})},!0);document.addEventListener("mousedown",function(a){if(!(0,d.default)(a.target).is("a"))if(!(0<(0,d.default)(a.target).closest(".aui-form-notification-tooltip").length))(0,d.default)("[data-aui-notification-field]").each(function(){var b=(0,d.default)(this),c=
b.is(a.target),e=0<(0,d.default)(a.target).closest(b).length;!c&&!e&&j(b);h(b)&&j(b)})});k=(0,g.default);var y={};s.forEach(function(a){y[a]=v});k("data-aui-notification-field",{attached:function(a){var b=(0,d.default)(a);if(!b.hasClass(r)){b.addClass(r);a=(0,d.default)('<span class="aui-icon aui-icon-small '+u+'"/>');b.after(a);f(b).tipsy({gravity:z(b),title:function(){return m(b)},trigger:"manual",offset:-1!==B.indexOf(b.attr("type"))?9:3,opacity:1,className:function(){var a=n(b);return"aui-form-notification-tooltip "+
("data-aui-notification-error"===a?"aui-form-notification-tooltip-error":"data-aui-notification-info"===a?"aui-form-notification-tooltip-info":void 0)},html:!0});if(h(b))b.on("keydown",function(a){if(a.keyCode===p.default.TAB&&(!a.shiftKey&&!a.altKey)&&""!==m(b)){var d=i(b).find(":aui-tabbable").first();d.length&&(d.focus(),a.preventDefault())}});v(b)}x.push(b)},attributes:y,type:g.default.type.ATTRIBUTE});(0,e.default)("aui/form-notification");return{}}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-form-validation-validator-register', location = 'node_modules/@atlassian/aui/src/js/aui/form-validation/validator-register.js' */
("undefined"===typeof window?global:window).__cb2668f6be8871c04f859d8f8e5a8ab1=function(){var d={};"use strict";Object.defineProperty(d,"__esModule",{value:!0});var a=__02fa0d2334b5d2f9701871403ba9d89a,h=a&&a.__esModule?a:{"default":a},e;if((a=__8139e9a1368a0224fc430963d21930c8)&&a.__esModule)e=a;else{var f={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(f[b]=a[b]);f.default=a;e=f}b=(b=__8f23956215d754ca94df621efa6b0438)&&b.__esModule?b:{"default":b};var i=["displayfield",
"watchfield","when","novalidate","state"],g=[],a={register:function(a,b){var c;if("string"===typeof a)c=a;else{var d=!1;a.some(function(a){var b=-1!==h.default.inArray(a,i);b&&(d=a);return b});if(c=d)return e.warn('Validators cannot be registered with the argument "'+c+'", as it is a reserved argument.'),!1;c="[data-aui-validation-"+a.join("],[data-aui-validation-")+"]"}c={validatorFunction:b,validatorTrigger:c};g.push(c);return c},validators:function(){return g}};(0,b.default)("aui/form-validation/validator-register",
a);d.default=a;return d=d["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-form-validation-basic-validators', location = 'node_modules/@atlassian/aui/src/js/aui/form-validation/basic-validators.js' */
("undefined"===typeof window?global:window).__fd675ae360bd5d9c547d27c9176b93ea=function(){function h(a){return a&&a.__esModule?a:{"default":a}}function i(a){var b=a.el.value.length,d=0===b,c=parseInt(a.args("minlength"),10),e=parseInt(a.args("maxlength"),10);c&&e&&c===e&&!d&&b!==c?(b=f("exactlength",a.args,[c]),a.invalidate(b)):c&&b<c&&!d?(b=f("minlength",a.args),a.invalidate(b)):e&&b>e?(b=f("maxlength",a.args),a.invalidate(b)):a.validate()}function j(a,b){var d=a.match(b);return!d?!1:a===d[0]}function k(a){var b=
f("pattern",a.args);j(a.el.value,RegExp(a.args("pattern")))?a.validate():a.invalidate(b)}function l(a){var b=f("required",a.args);a.el.value?a.validate():a.invalidate(b)}function m(a){var b=f("validnumber",a.args),d=parseInt(a.el.value,10);if(isNaN(d))a.invalidate(b);else{var b=a.args("min"),c=a.args("max");b&&d<parseInt(b,10)?a.invalidate(f("min",a.args)):c&&d>parseInt(c,10)?a.invalidate(f("max",a.args)):a.validate()}}function f(a,b,d){var c;c=void 0!==AJS.I18n.keys?AJS.I18n.keys["aui.validation.message."+
a]:n[a];var e=d;d||(e=[b(a)]);c=(a=b(a+"-msg"))?[a].concat(e):[c].concat(e);return AJS.format.apply(null,c)}"use strict";var o=h(__02fa0d2334b5d2f9701871403ba9d89a),p=h(__8f23956215d754ca94df621efa6b0438);h(__0d2ce34ae8c23f21d43215f7cc5928d7);h(__ff21a71b857b101095156bf4ff8b27ac);var g=h(__cb2668f6be8871c04f859d8f8e5a8ab1);g.default.register(["maxlength","minlength"],i);g.default.register("[maxlength],[minlength]",i);g.default.register(["matchingfield"],function(a){var b=a.el.value,d=document.getElementById(a.args("matchingfield")),
c=d.value,e=f("matchingfield",a.args,[b,c]);if("password"===a.el.getAttribute("type")||"password"===d.getAttribute("type"))e=f("matchingfield-novalue",a.args);!b||!c?a.validate():c!==b?a.invalidate(e):a.validate()});g.default.register(["doesnotcontain"],function(a){var b=f("doesnotcontain",a.args);-1===a.el.value.indexOf(a.args("doesnotcontain"))?a.validate():a.invalidate(b)});g.default.register(["pattern"],k);g.default.register("[pattern]",k);g.default.register(["required"],l);g.default.register("[required]",
l);g.default.register(["min","max"],m);g.default.register("[min],[max]",m);g.default.register(["dateformat"],function(a){var b=a.args("dateformat"),d=f("dateformat",a.args),c={Y:"[0-9]{4}",y:"[0-9]{2}",m:"(0?[1-9]|10|11|12)",M:"[Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec]",D:"[Mon|Tue|Wed|Thu|Fri|Sat|Sun]",d:"([0-2]?[1-9]|10|20|30|31)"},e="";b.split("").forEach(function(a){e=c.hasOwnProperty(a)?e+c[a]:e+a});j(a.el.value,RegExp(e+"$","i"))?a.validate():a.invalidate(d)});g.default.register(["minchecked",
"maxchecked"],function(a){var b=(0,o.default)(a.el).find(":checked").length,d=!a.args("minchecked")||b>=a.args("minchecked"),b=!a.args("maxchecked")||b<=a.args("maxchecked"),c=f("minchecked",a.args),e=f("maxchecked",a.args);d&&b?a.validate():d?b||a.invalidate(e):a.invalidate(c)});var n={minlength:"Must be greater than or equal to {0} characters",maxlength:"Must be fewer than or equal to {0} characters",exactlength:"Must be exactly {0} characters",matchingfield:"{0} and {1} do not match.",
"matchingfield-novalue":"These fields do not match.",doesnotcontain:"Do not include the phrase {0} in this field",pattern:"This field does not match the required format",required:"This is a required field",validnumber:"Please enter a valid number",min:"Enter a value greater than {0}",max:"Enter a value less than {0}",dateformat:"Enter a valid date",
minchecked:"Tick at least {0}.",maxchecked:"Tick at most {0}."};(0,p.default)("aui/form-validation/basic-validators");return{}}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-form-validation', location = 'node_modules/@atlassian/aui/src/js/aui/form-validation.js' */
("undefined"===typeof window?global:window).__2635f44381995ca51e130dad1479fffd=function(){function k(a){return a&&a.__esModule?a:{"default":a}}function y(a){if(p(a,"novalidate"))l(a,m);else{s(t(a),"none");var b=[];u.default.validators().forEach(function(c,d){a.is(c.validatorTrigger)&&b.push(d)});l(a,g);var c=[];b.forEach(function(b){var b=u.default.validators()[b].validatorFunction,d=new f.default.Deferred,e={validate:function(){d.resolve()},invalidate:function(b){l(a,h,b);d.reject()},args:function(b){return a.attr("data-"+
z+b)||a.attr(b)},el:a[0],$el:a};v.prop(e,"$el",{sinceVersion:"5.9.0",removeInVersion:"8.0.0",alternativeName:"el",extraInfo:"See https://ecosystem.atlassian.net/browse/AUI-3263."});b(e);c.push(d)});var d=f.default.when.apply(f.default,c);d.done(function(){l(a,m)});return d}}function p(a,b){var c={when:"change"},d=a.attr("data-"+z+b);d||(d=c[b]);return d}function l(a,b,c){a.attr("data-"+n,b);if(b!==i){a.trigger(f.default.Event(A));var d=t(a),e={};e[g]="wait";e[h]="error";e[m]="success";e=e[b];b===
g?setTimeout(function(){a.attr("data-"+n)===g&&s(a,"wait")},500):s(d,e,c)}}function s(a,b,c){var d=a.is("["+j+"wait]");a.removeAttr(j+"wait");a.removeAttr(j+"success");if("success"!==b||d)"none"===b?a.removeAttr(j+"error"):(d=a.attr(j+b)||"[]",c?(c=JSON.parse(d).concat([c]),c=JSON.stringify(c)):c="",a.attr(j+b,c))}function t(a){var b=p(a,"displayfield");return void 0===b?a:(0,f.default)("#"+b)}function B(a,b){b.preventDefault();a.one(A,function(){a.trigger("submit")})}var q={};"use strict";Object.defineProperty(q,
"__esModule",{value:!0});var f=k(__02fa0d2334b5d2f9701871403ba9d89a);__1e855e59e13e8847a5ed5441e3fd1919;__fd675ae360bd5d9c547d27c9176b93ea;var C=k(__8f23956215d754ca94df621efa6b0438),v;var e=__9ea35e3451360b72ebe8cb8006239936;if(e&&e.__esModule)v=e;else{var w={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(w[o]=e[o]);w.default=e;v=w}o=k(__fb27ffae84b96c14bf339e62cefcf116);var x=k(__da172e72afc5a7088e3034df761062a6),u=k(__cb2668f6be8871c04f859d8f8e5a8ab1),z="aui-validation-",
j="data-aui-notification-",n="aui-validation-state",h="invalid",m="valid",g="validating",i="unvalidated",A="_aui-internal-field-state-changed";(0,f.default)(document).on("submit",function(a){var b=a.target,b=(0,f.default)(b),c;c=b.find("._aui-form-validation-initialised");var d=f.default.map(c,function(a){return(0,f.default)(a).attr("data-"+n)});c=-1!==d.indexOf(h);var e=-1!==d.indexOf(i),d=-1!==d.indexOf(g);c=c?h:e?i:d?g:m;c===i?(B(b,a),b.find("[data-"+n+"="+i+"]").each(function(a,b){r.validate((0,
f.default)(b))})):c===g?B(b,a):c===h?(a.preventDefault(),b.find("[data-"+n+"="+h+"]").first().focus()):c===m&&(c=f.default.Event("aui-valid-submit"),b.trigger(c),c.isDefaultPrevented()&&a.preventDefault())});var r={register:u.default.register,validate:function(a){a=(0,f.default)(a);y(a)}};(0,x.default)("data-aui-validation-field",{attached:function(a){a.form&&a.form.setAttribute("novalidate","novalidate");var b=(0,f.default)(a);if(!b.hasClass("_aui-form-validation-initialised")){t(b).attr("data-aui-notification-field",
"");b.addClass("_aui-form-validation-initialised");var c,d=function(){b.trigger("aui-stop-typing")};b.on("keyup",function(){clearTimeout(c);c=setTimeout(d,1500)});var e=p(b,"when"),g=p(b,"watchfield");(g?b.add("#"+g):b).on(e,function(){y(b)});l(b,i)}x.default.init(a)},type:x.default.type.ATTRIBUTE});(0,C.default)("aui/form-validation",r);(0,o.default)("formValidation",r);q.default=r;return q=q["default"]}.call(this);;
;
/* module-key = 'com.pyxis.greenhopper.jira:split-issue-context-menu-action', location = 'includes/js/rapid/ui/plan/contextmenu/SplitIssueDialogView.soy' */
// This file was automatically generated from SplitIssueDialogView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.plan.contextmenu.splitissue.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.plan == 'undefined') { GH.tpl.plan = {}; }
if (typeof GH.tpl.plan.contextmenu == 'undefined') { GH.tpl.plan.contextmenu = {}; }
if (typeof GH.tpl.plan.contextmenu.splitissue == 'undefined') { GH.tpl.plan.contextmenu.splitissue = {}; }


GH.tpl.plan.contextmenu.splitissue.dialogView = function(opt_data, opt_ignored) {
  var output = '';
  var issue__soy3 = opt_data.model.issue;
  var issueDestinations__soy4 = opt_data.model.issueDestinations;
  output += '<section role="dialog" class="ghx-split-issue-dialog aui-layer aui-dialog2 ' + ((issueDestinations__soy4.length > 0) ? 'aui-dialog2-large' : 'aui-dialog2-medium') + '" aria-hidden="true" data-aui-remove-on-hide="true"><header class="aui-dialog2-header"><h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml(AJS.format("Split issue: {0}",issue__soy3.key)) + '</h2></header><div class="aui-dialog2-content"><form class="aui" id="split-issue-form"><table class="aui"><thead><tr><th class="no-width"></th><th>' + soy.$$escapeHtml("Summary") + '</th>' + ((issue__soy3.estimateFieldId) ? '<th class="no-width one-liner">' + soy.$$escapeHtml("Estimate") + '</th>' : '') + ((issueDestinations__soy4.length > 0) ? '<th class="no-width">' + soy.$$escapeHtml("Send to") + '</th>' : '') + '<th class="no-width"></th></tr></thead><tbody id="ghx-split-issues-rows">' + GH.tpl.plan.contextmenu.splitissue.issueRow({model: opt_data.model, isNewIssueRow: false}) + GH.tpl.plan.contextmenu.splitissue.issueRow({model: opt_data.model, isNewIssueRow: true}) + '</tbody></table><button class="ghx-split-issues-add-row aui-button aui-button-subtle" type="button"><span class="aui-icon aui-icon-small aui-iconfont-add"></span>' + soy.$$escapeHtml("Add another") + '</button></form></div><footer class="aui-dialog2-footer"><div class="aui-dialog2-footer-actions"><div class="spinner"></div><div class="button-container"><button id="split-issue-dialog-submit-button" title="' + soy.$$escapeHtml("You need at least one new issue with a non-empty summary") + '" class="aui-button aui-button-primary">' + soy.$$escapeHtml("Split") + '</button><button id="split-issue-dialog-close-button" class="aui-button aui-button-link">' + soy.$$escapeHtml("Cancel") + '</button></div></div></footer></section>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.plan.contextmenu.splitissue.dialogView.soyTemplateName = 'GH.tpl.plan.contextmenu.splitissue.dialogView';
}


GH.tpl.plan.contextmenu.splitissue.issueRow = function(opt_data, opt_ignored) {
  var output = '';
  var issue__soy43 = opt_data.model.issue;
  var issueDestinations__soy44 = opt_data.model.issueDestinations;
  var rowClass__soy45 = opt_data.isNewIssueRow ? 'ghx-split-new-issue' : 'ghx-split-original-issue';
  output += '<tr class="' + soy.$$escapeHtml(rowClass__soy45) + '"><td class="ghx-type"><img src="' + soy.$$escapeHtml(issue__soy43.typeUrl) + '" width="16" height="16"></td><td class="one-liner"><input class="ghx-split-summary text long-field" type="text" data-aui-validation-field data-aui-validation-nonempty data-aui-validation-when="change validate_input"' + ((! opt_data.isNewIssueRow) ? 'value="' + soy.$$escapeHtml(issue__soy43.summary) + '"' : '') + '></td>' + ((issue__soy43.estimateFieldId) ? '<td class="one-liner"><input class="ghx-split-estimate text short-field" data-aui-validation-field data-aui-validation-when="change validate_input"' + ((issue__soy43.estimateStatisticRequired) ? 'data-aui-validation-nonempty' : '') + ((! opt_data.isNewIssueRow) ? ' value="' + soy.$$escapeHtml(issue__soy43.estimate) + '" ' : '') + '></td>' : '');
  if (issueDestinations__soy44.length > 0) {
    var selectedItem__soy71 = issue__soy43.containingSprint;
    output += '<td>' + GH.tpl.component.sprintselect.renderSelectElement({items: issueDestinations__soy44, selectedItem: selectedItem__soy71, cssClass: 'select destination-single-select'}) + '</td><td class="destination-warning"><span title="' + soy.$$escapeHtml("Sprint scope will be affected by this action.") + '" class="icon aui-icon aui-icon-small aui-iconfont-warning destination-warning-hidden"></span></td>';
  }
  output += '<td>' + ((opt_data.isNewIssueRow) ? '<button class="ghx-split-issues-delete-row aui-button aui-button-subtle" tabindex="-1" type="button"><span class="aui-icon aui-icon-small aui-iconfont-delete"></span></button>' : '') + '</td></tr>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.plan.contextmenu.splitissue.issueRow.soyTemplateName = 'GH.tpl.plan.contextmenu.splitissue.issueRow';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:split-issue-context-menu-action', location = 'includes/js/rapid/ui/plan/contextmenu/SplitIssueDialogView.js' */
define("jira-agile/rapid/ui/plan/contextmenu/split-issue-dialog-view",["require"],function(e){"use strict";var i=e("backbone"),t=e("jira/ajs/select/single-select");return AJS.formValidation.register(["nonempty"],function(e){var i=e.el.value;i&&i.trim()?e.validate():e.invalidate("This is a required field")}),i.View.extend({el:"body",initialize:function(e){this.model=e,this.issue=e.issue},events:{"click #split-issue-dialog-close-button":"hide","click #split-issue-dialog-submit-button":"onSubmit","click .ghx-split-issues-add-row":"addRow","click .ghx-split-issues-delete-row":"deleteRow","change .ghx-split-original-issue .ghx-split-estimate":"evaluateEstimateChange","change .destination-single-select":"evaluateEstimateChange","keyup .ghx-split-summary":"onKeyPress","keyup .ghx-split-estimate":"onKeyPress"},render:function(){var e=this;this.$el.append(GH.tpl.plan.contextmenu.splitissue.dialogView({model:this.model})),AJS.dialog2(".ghx-split-issue-dialog").show(),AJS.dialog2(".ghx-split-issue-dialog").on("hide",this.undelegateEvents.bind(this)),this.$(".ghx-split-issue-dialog .select").each(function(){new t({element:this,itemAttrDisplayed:"label"})}),this.$("#split-issue-form").on("submit",function(i){return i.preventDefault(),e.onSubmit(),!1})},hide:function(){AJS.dialog2(".ghx-split-issue-dialog").hide()},processValidationErrors:function(e){var i=this.getFields();for(var t in e)if({}.hasOwnProperty.call(e,t)){var s=e[t];s.errorMessageForSummary&&(i[s.index].summary[0].dataAuiNotificationError=s.errorMessageForSummary),s.errorMessageForEstimate&&(i[s.index].estimate[0].dataAuiNotificationError=s.errorMessageForEstimate)}this.setWaitModeEnabled(!1)},onKeyPress:function(e){13==e.keyCode&&this.onSubmit()},isInputValid:function(){var e=function(e,i){var t=function(e){return!e||!e.trim()};if(t(e(i.issue)))return!0;var s=i.getSubmitModel();for(var n in s.newIssues)if(s.newIssues.hasOwnProperty(n)){var a=s.newIssues[n];if(t(e(a)))return!0}return!1};return!(e(function(e){return e.summary},this)||this.model.estimateStatisticRequired&&e(function(e){return e.estimate},this))},setWaitModeEnabled:function(e){e?(this.$(".spinner").spin(),this.$("#split-issue-dialog-submit-button").prop("disabled","disabled")):(this.$(".spinner").spinStop(),this.$("#split-issue-dialog-submit-button").removeProp("disabled"))},onSubmit:function(){this.isInputValid()?(this.setWaitModeEnabled(!0),this.trigger("submit",this.getSubmitModel())):this.getFields().forEach(function(e){e.summary.trigger("validate_input"),e.estimate&&e.estimate.trigger("validate_input")})},addRow:function(){var e=this.$("#ghx-split-issues-rows");e.append(GH.tpl.plan.contextmenu.splitissue.issueRow({model:this.model,isNewIssueRow:!0})),new t({element:e.find(".ghx-split-new-issue .select").last(),itemAttrDisplayed:"label"}),this.$(".ghx-split-summary").last().focus()},deleteRow:function(e){this.$(e.target).closest(".ghx-split-new-issue").remove()},checkIfEstimateChanged:function(e,i){var t=e.find(".ghx-split-estimate"),s=t.val().trim(),n=e.hasClass("ghx-split-new-issue"),a=parseInt(i.val()[0]);return n?this.model.issueDestinations.some(function(e){return e.id===a&&"ACTIVE"===e.state}):s!==this.issue.estimate||a!==this.issue.containingSprint.id},toggleWarning:function(e,i){var t="destination-warning-hidden",s=e.find(".destination-warning span");i?s.removeClass(t):s.addClass(t)},evaluateEstimateChange:function(e){var i=this.$(e.target).closest("tr"),t=i.find(".destination-single-select");t.length&&this.toggleWarning(i,this.checkIfEstimateChanged(i,t))},getSubmitModel:function(){var e=this.getFields(),i=this.extractNewIssues(this.issue.estimateFieldId);return{originalIssue:{summary:e[0].summary.val(),estimate:e[0].estimate.val(),estimateFieldId:this.issue.estimateFieldId,destinationId:e[0].destination.val()?e[0].destination.val()[0]:void 0},newIssues:i}},extractNewIssues:function(e){return this.getFields().slice(1).map(function(i){return{summary:i.summary.val(),estimate:i.estimate.val(),estimateFieldId:e,destinationId:i.destination.val()?i.destination.val()[0]:void 0}})},getFields:function(){for(var e=function(e){return{summary:e.find(".ghx-split-summary"),estimate:e.find(".ghx-split-estimate"),destination:e.find(".select")}},i=[e(this.$(".ghx-split-original-issue"))],t=this.$(".ghx-split-new-issue"),s=0;s<t.length;s++)i.push(e(this.$(t[s])));return i}})});;
;
/* module-key = 'com.pyxis.greenhopper.jira:split-issue-context-menu-action', location = 'includes/js/rapid/ui/plan/contextmenu/SplitIssueDialogController.js' */
define("jira-agile/rapid/ui/plan/contextmenu/split-issue-dialog-controller",function(){"use strict";function i(i,t){this.issue=i,this.backlogController=t}function t(i,t){return GH.Ajax.put({url:"/issue/"+i+"/split",data:t})}return i.prototype.bind=function(i){this.view=i,this.view.on("submit",this.onSubmit,this)},i.prototype.onSubmit=function(i){t(this.issue.id,i).done(function(i){i.success.errors?this.view.processValidationErrors(i.success.errors):(this.view.hide(),this.backlogController.loadData())}.bind(this)).fail(function(){this.view.hide()}.bind(this)),AJS.trigger("analytics",{name:"gh.issue.ctx.menu.action.split.submit",data:{newIssueCount:i.newIssues.length}})},i});;
;
/* module-key = 'com.pyxis.greenhopper.jira:split-issue-context-menu-action', location = 'includes/js/rapid/ui/plan/contextmenu/SplitIssueAction.js' */
define("jira-agile/rapid/ui/plan/contextmenu/split-issue-action",["require"],function(i){"use strict";function e(i){return GH.Features.SPLIT_ISSUE.isEnabled()&&1===i.selectedIssues.length&&!i.hasSubtasks&&GH.RapidBoard.State.isPlanMode()}function t(i){return d.sprintModels.length>0}function n(i,e){var t=c.Deferred();return GH.Ajax.get({url:"/issue/"+i.id+"/split",data:{rapidViewId:GH.RapidBoard.State.getRapidViewId(),getIssueDestinations:e}}).done(function(i){i.userHasPermissionToSplit?t.resolve(i):(GH.Notification.showError("We can\'t split this issue","Please ensure you have permissions to create, edit, link, and schedule issues",!0),t.reject())}),t}function s(i){var e,t="";return i.estimateStatistic&&"issueCount"!==i.estimateStatistic.statFieldId&&(e=i.estimateStatistic.statFieldId,t=i.estimateStatistic.statFieldValue.text||""),{issue:{key:i.key,id:i.id,summary:i.summary,estimateFieldId:e,estimate:t,estimateStatisticRequired:i.estimateStatisticRequired,typeUrl:i.typeUrl}}}function a(i){var e=[i.containingSprint].concat(i.issueDestinations);e.forEach(function(i){if(i.state){var e="ACTIVE"===i.state?"Active sprint":"Future sprint";i.name+=" ("+e+")"}})}function r(i){var e=t(i),r=n(i,e),o=s(i);o.displaysIssueDestinationSelector=e;var u=c.Deferred();return r.done(function(i){e&&a(i),o.issueDestinations=i.issueDestinations,o.defaultDestinationForNewIssue=i.issueDestinations.find(function(i){return i.id===-1}),o.issue.containingSprint=i.containingSprint,u.resolve(o)}),r.fail(function(){return console.log("failed to obtain view model"),u.reject()}),u}function o(i){var e=r(i);e.done(function(e){var t=new g(e),n=new f(i,l);n.bind(t),t.render(),AJS.trigger("analytics",{name:"gh.issue.ctx.menu.action.split"})})}function u(i){return{id:"ghx-issue-ctx-action-split-issue",name:"split-issue",label:"Split issue",actionFn:function(){var e=i.selectedIssuesData[0];o(e)}}}var l,d,c=i("jquery"),p=i("jira-agile/rapid/global-events"),g=i("jira-agile/rapid/ui/plan/contextmenu/split-issue-dialog-view"),f=i("jira-agile/rapid/ui/plan/contextmenu/split-issue-dialog-controller");p.on("pre-initialization",function(){l=i("jira-agile/rapid/ui/plan/backlog-controller"),d=i("jira-agile/rapid/ui/plan/backlog-model")});var m={};return m.appendMenuItem=function(i,t){e(i)&&t.push({actions:[u(i)]})},m});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-details-view-resources', location = 'includes/js/rapid/ui/detail/DetailsViewResources.js' */
define("jira-agile/rapid/ui/detail/detail-view-resources",["wrm/require"],function(e){return e("wrc!com.pyxis.greenhopper.jira:gh-rapid-inline-editable")});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/rapid/Events.js' */
define("jira-agile/rapid/events",["require"],function(t){function n(t){return t?e.extend(t,n.prototype):t=this,t._bindings=[],t}var e=t("underscore");return n.prototype={on:function(t,n,e){return e&&this._off({type:t,context:e}),this._bindings.push({type:t,handler:n,context:e}),this},off:function(t){return e.isString(t)?this._off({type:t}):e.isFunction(t)?this._off({handler:t}):e.isObject(t)&&this._off({context:t}),this},_off:function(t){this._bindings=e.reject(this._bindings,function(n){var e=!t.type||t.type===n.type,i=!t.context||t.context===n.context,r=!t.handler||t.handler===n.handler;return e&&i&&r})},trigger:function(t){var n=Array.prototype.slice.call(arguments,1);return e.each(this._bindings,function(e){e.type===t&&e.handler.apply(e.context,n)}),this}},n}),AJS.namespace("GH.Events",null,require("jira-agile/rapid/events"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/rapid/GlobalEvents.js' */
define("jira-agile/rapid/global-events",["require"],function(e){"use strict";var i=e("jira-agile/rapid/events");return new i});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/gh-namespace.js' */
AJS.namespace("GH.namespace",null,AJS.namespace);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/gh-config.js' */
define("jira-agile/config",[],function(){"use strict";var i={};return i.isSampleDataAvailable=!1,i}),AJS.namespace("GH.Config",null,require("jira-agile/config"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/rapid/Ajax.js' */
define("jira-agile/rapid/ajax",["jira/util/formatter","jira/ajs/ajax/smart-ajax","jira/util/data/meta","underscore","wrm/context-path","jquery","jira/jquery/deferred"],function(e,r,t,n,o,a,s){var u={};return u.CONTEXT_PATH=o(),u.REST_URL_BASE="/rest/greenhopper/1.0",u.PUBLIC_REST_URL_BASE="/rest/agile/1.0",u.xhrRegistery={},u.stallTimeout=300,u.get=function(e,r){a.extend(e,{type:"GET",headers:{"X-Atlassian-GreenHopper-Gadget":!n.isUndefined(GH.gadget)}});var t=u._executeGet(e,r);return t.pipe(function(e,r,t){return s().resolveWith(this,[e.success,r,t])})},u.post=function(e){return e=u._getSettings(e,!0),a.extend(e,{type:"POST",contentType:"application/json"}),u._executeStore(e)},u.put=function(e){return e=u._getSettings(e,!0),e.type="PUT",u._executeStore(e)},u.del=function(e){return e=u._getSettings(e,!0),e.type="DELETE",u._executeStore(e)},u._getSettings=function(e,r){return!e.bareUrl&&e.url&&(e.bareUrl=u.buildRestUrl(e.url)),e.bareUrl&&(e.url=e.bareUrl),e.dataType||(e.dataType="json"),e.data&&r&&(e.data=JSON.stringify(e.data)),e.contentType="application/json",e},u._getXhrData=function(e){var r={timestamp:0};return e&&(r=u.xhrRegistery[e]?u.xhrRegistery[e]:u.xhrRegistery[e]=r),r},u._executeGet=function(e,r){e=u._getSettings(e);var t=u._getXhrData(r);t.xhr&&(GH.log("aborting request for "+r,GH.Logger.Contexts.ajax),t.xhr.abort(),delete t.xhr,delete t.xhrAbort,delete t.timeoutId);var n=t.timestamp;if(t.timestamp=(new Date).getTime(),t.timestamp-n<u.stallTimeout){GH.log("stalling request for "+r+", time since last request: "+(t.timestamp-n),GH.Logger.Contexts.ajax);var o,a=s(),i=function(){o=u._executeGet(e,r),o.then(a.resolve,a.reject)};t.timeoutId=window.setTimeout(i,u.stallTimeout),t.xhr=a.promise(),t.xhr.abort=function(){o?o.abort.apply(o,arguments):clearTimeout(t.timeoutId)}}else GH.log("executing request for "+r,GH.Logger.Contexts.ajax),t.xhr=u.makeRequest(e);return t.xhrAbort=t.xhr.abort,t.xhr.abort=function(){var e=t.xhr,r=t.xhrAbort;if(e&&r)return r.apply(e,arguments)},t.xhr.done(function(){t.xhr&&delete t.xhr}).fail(function(){t.xhr&&delete t.xhr}),t.xhr},u._executeStore=function(e){if(e=e||{},e.data&&"string"==typeof e.data&&/\?\?/.test(e.data)){var r="\\u003F\\u003F";e.data=e.data.replace(/\?\?/g,r)}return e.dataType="json",u.makeRequest(e)},u.makeRequest=function(e){var t=s();e=n.extend(e,{success:function(){t.resolveWith(this,arguments)},error:function(){t.rejectWith(this,arguments)}});var o=t.promise(r.makeRequest(e)),a=o.abort;o.abort=function(e){return o.abortMarker="timeout"!=e,a.apply(o,arguments)};var i=o.pipe(u._generateDoneInterceptor(),u._generateFailInterceptor(e.errorsNoAutoEscape));return e.deferErrorHandling||i.fail(u._generateErrorHandler(e.onGlobalError,e.errorContextMap,e.contextualErrorRenderer,e.globalErrorDismissable)),i},u._generateDoneInterceptor=function(){return function(e,r,t){return e=e||{},e=u._createExtendedResult(e),u.matchesCurrentUser(t)?e.isSuccess()?s().resolveWith(this,[e,r,t]):s().rejectWith(this,[e,t,r,null]):u._handleCurrentUserChanged(t)}},u._generateFailInterceptor=function(e){return function(r,t,n){if(r.abortMarker)return s();if(!u.matchesCurrentUser(r))return u._handleCurrentUserChanged(r);var o={},a=null;if(r.responseText)try{o=JSON.parse(r.responseText)}catch(e){}return o.errors||o.errorMessages?a=u._convertJiraErrors(o,e):o.message&&(a=u._convertFrameworkErrors(o)),a||(a=u._convertGenericErrors(r,n)),s().rejectWith(this,[a,r,t,n])}},u.handleContextualErrors=function(e,r,t){return r=r||{},!!e.hasContextualErrors()&&(a(e.getContextualErrors()).each(function(n,o){var s=r[o.contextId];if(s)if(a.isFunction(s))s(o,e);else{s=a(s),s.siblings(".ghx-error").remove();var u;u=t?t(o):GH.tpl.rapid.notification.renderContextualErrors({errors:o.errors}),s.after(u)}else a(o.errors).each(function(r,t){e.addGlobalError(t)})}),!0)},u.handleGlobalErrors=function(e,r,t){return!!e.hasGlobalErrors()&&(GH.Notification.showErrors({errors:e.getGlobalErrors()},t),r&&r instanceof Function&&r(e),!0)},u.buildRestUrl=function(e){return 0!==e.indexOf("/")&&(e="/"+e),u.buildBareRestUrl(u.REST_URL_BASE+e)},u.buildPublicRestUrl=function(e){return 0!==e.indexOf("/")&&(e="/"+e),u.buildBareRestUrl(u.PUBLIC_REST_URL_BASE+e)},u.buildBareRestUrl=function(e){return 0!==e.indexOf("/")&&(e="/"+e),u.CONTEXT_PATH+e},u._createExtendedResult=function(e){return e?u._extendResult({success:e}):u._extendResult({success:!0})},u._extendResult=function(e){return a.extend(e,{getGlobalErrors:function(){return e.error?e.error.errors:null},getContextualErrors:function(){return e.error?e.error.contextualErrors:null},hasGlobalErrors:function(){return e.error&&e.error.errors&&e.error.errors.length>0},hasContextualErrors:function(){return e.error&&e.error.contextualErrors},addGlobalError:function(r){e.error||(e.error={}),e.error.errors||(e.error.errors=[]),e.error.errors[e.error.errors.length]=r},getSuccessObject:function(){return e.success},isSuccess:function(){return!e.error}})},u._generateErrorHandler=function(e,r,t,n){return function(o){u.handleContextualErrors(o,r,t),u.handleGlobalErrors(o,e,n)}},u._convertJiraErrors=function(e,r){var t=e.errorMessages?e.errorMessages:[];t=n.map(t,function(e){return{message:e,noAutoescape:r}});var o=e.errors?e.errors:{};o=n.map(o,function(e,t){return{contextId:t,errors:[{message:e,noAutoescape:r}]}});var a={error:{errors:t,contextualErrors:o}};return u._extendResult(a)},u._convertFrameworkErrors=function(e){var r={error:{errors:[{message:e.message}],contextualErrors:[]}};return u._extendResult(r)},u._convertGenericErrors=function(r,t){var n=u._extendResult({});return r.responseText&&GH.log("Got an error response with text that we don't know how to parse: "+r.responseText),504===r.status||0===r.status&&a.contains(["abort","timeout"],t)?n.addGlobalError({status:504,message:"Request timed out"}):t?n.addGlobalError({status:r.status,message:t}):GH.log("Got an Ajax request error response with empty 'errorThrown' value. Silently logging"),n},u._hasUsernameResponseHeader=function(e){return!!e.getResponseHeader("X-AUSERNAME")},u._getUserForResponse=function(e){return e.getResponseHeader("X-AUSERNAME")?decodeURIComponent(e.getResponseHeader("X-AUSERNAME")):"anonymous"},u.getUserFromAJS=function(){var e=t.get("remote-user");return e?e:"anonymous"},u.matchesCurrentUser=function(e){return!e.getResponseHeader||!e.getAllResponseHeaders||!u._hasUsernameResponseHeader(e)||u.getUserFromAJS()===u._getUserForResponse(e)||204===e.status&&!e.getAllResponseHeaders()&&a.browser.msie},u._handleCurrentUserChanged=function(e){var r=u.getUserFromAJS(),t=u._getUserForResponse(e);return"anonymous"!==r&&"anonymous"===t?(GH.log("User changed. original: "+r+" new: "+t+". Redirecting to the login page"),location.href=GH.Navigation.getLoginUrl()):(GH.log("User changed. original: "+r+" new: "+t+". Reloading the page"),location.reload()),s()},u}),AJS.namespace("GH.Ajax",null,require("jira-agile/rapid/ajax"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/rapid/Logger.js' */
define("jira-agile/rapid/logger",["jira/util/logger","underscore"],function(e,t){var a={};return a.Contexts={},a.Contexts.ajax="ajax",a.Contexts.event="event",a.Contexts.state="state",a.Contexts.ui="ui",a.Contexts.callback="callback",a.Contexts.refresh="refresh",a.enabledContexts=[a.Contexts.ajax,a.Contexts.event,a.Contexts.state,a.Contexts.ui,a.Contexts.callback,a.Contexts.refresh],a.log=function(n,o){if(!o||t.contains(a.enabledContexts,o)){var i=o?a.pad(o,6)+": "+n:n;e.log(i)}},a.pad=function(e,t){return e.length<t?e+"                               ".substr(0,t-e.length):e},a.timeMap={},a.timeStart=function(e){if(!e)throw"start: If starting a timer manually a name must be set";a.timeMap[e]=(new Date).getTime()},a.timeStop=function(e){if(!(e in a.timeMap))throw"stop:"+e+" not found";var t=(new Date).getTime()-a.timeMap[e];delete a.timeMap[e],a.log(t+"ms on "+e,a.Contexts.ui)},a}),AJS.namespace("GH.Logger",null,require("jira-agile/rapid/logger")),AJS.namespace("GH.log",null,require("jira-agile/rapid/logger").log);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/rapid/state/storage.js' */
define("jira-agile/rapid/state/storage",[],function(){"use strict";var e={};return e.get=function(e,t){var r=void 0;if(r=t?sessionStorage.getItem(e):localStorage.getItem(e),"string"!=typeof r)return r;try{return JSON.parse(r)}catch(e){return GH.log("GH.storage: Caught error: "+e),void GH.log("GH.storage: Cannot parse json string retrieved from "+(t?"session":"local")+" storage. Ignoring value "+r)}},e.put=function(e,t,r){if(null===t||void 0===t)r?sessionStorage.removeItem(e):localStorage.removeItem(e);else try{r?sessionStorage.setItem(e,JSON.stringify(t)):localStorage.setItem(e,JSON.stringify(t))}catch(e){return!1}return!0},window.localStorage&&window.sessionStorage||(e.get=function(){return null},e.put=function(){return!1}),e}),AJS.namespace("GH.storage",null,require("jira-agile/rapid/state/storage"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/rapid/Validation.js' */
define("jira-agile/rapid/validation",["jira/util/formatter","jquery"],function(r,t){var n={};return n.notBlank=function(r,e,a){var i=n.applyRules(r,e,a,function(){return t.trim(t(r).val()).length>0});return i},n.maxLength=function(r,e,a,i){var o=n.applyRules(r,a,i,function(){return t.trim(t(r).val()).length<=e});return o},n.isPositiveInteger=function(r,e,a){var i=n.applyRules(r,e,a,function(){return/^\d*$/.test(t.trim(t(r).val()))});return i},n.applyRules=function(r,e,a,i){r=t(r);var o=a?t(a):r,l=i.call(this);return!!l||(n.showContextualErrors(o,e),!1)},n.showContextualErrors=function(t,e,a,i,o){n.clearContextualErrors(t),t.after(GH.tpl.rapid.notification.renderContextualErrors({errors:[{message:r.I18n.getText(e,a,i,o)}]}))},n.clearContextualErrors=function(r){r=t(r),r.find(".ghx-error").remove(),r.siblings(".ghx-error").remove()},n}),AJS.namespace("GH.Validation",null,require("jira-agile/rapid/validation"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/gh-helppaths.js' */
AJS.namespace("GH.HelpPaths"),GH.HelpPaths.getHelpPath=function(e){return null};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/gh-message.js' */
define("jira-agile/message",["jira/util/logger"],function(e){"use strict";var a={};return a.showIssueMessage=function(){e.warn("[deprecated] GH.Message.showIssueMessage has no effect, @see module:jira-agile/rapid/ui/notification")},a.showSuccess=function(){e.warn("[deprecated] GH.Message.showSuccess has no effect, @see module:jira-agile/rapid/ui/notification")},a.showWarning=function(){e.warn("[deprecated] GH.Message.showWarning has no effect, @see module:jira-agile/rapid/ui/notification")},a.showPersistentWarning=function(){e.warn("[deprecated] GH.Message.showPersistentWarning has no effect, @see module:jira-agile/rapid/ui/notification")},a}),AJS.namespace("GH.Message",null,require("jira-agile/message"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/rapid/Util.js' */
define("jira-agile/rapid/util",["underscore","jquery"],function(e,r){var n={};return n.getPluginKey=function(){return r('meta[name="ghx-plugin-key"]').attr("content")},n.wrapPreventDefault=function(e,r){return function(n){return n.preventDefault(),e.apply(r||this,arguments)}},n.andThenSplice=function(){return{_needsSplice:Array.prototype.slice.call(arguments)}},n.andThen=function(n){var t=[{trigger:"resolveWith",on:"done",filter:arguments[1]},{trigger:"rejectWith",on:"fail",filter:arguments[2]},{trigger:"notifyWith",on:"progress",filter:arguments[3]}];return r.Deferred(function(r){e.each(t,function(t){var i=t.on,a=t.trigger,o=e.isFunction(t.filter)&&t.filter;n[i](function(){var n=o&&o.apply(this,arguments);if(n&&e.isFunction(n.promise))n.promise().done(r.resolve).fail(r.reject).progress(r.notify);else{var t;t=n&&e.isArray(n._needsSplice)?n._needsSplice:o?[n]:arguments,r[a](e.isFunction(this.promise)?r.promise():this,t)}})})}).promise()},r._OriginalDeferred=r.Deferred,r.Deferred=function(e){return r._OriginalDeferred(function(r){r.andThen=function(){var e=Array.prototype.slice.call(arguments);return e.unshift(r),n.andThen.apply(this,e)};var t=r.promise;r.promise=function(){var e=t.apply(this,arguments);return e.andThen=function(){var r=Array.prototype.slice.call(arguments);return r.unshift(e),n.andThen.apply(this,r)},e},e&&e.call(r,r)})},n.indexOf=function(r,n,t){var i=-1;return t&&(r=r.slice().reverse()),e.some(r,function(e,a){return!!n(e,a)&&(i=t?r.length-1-a:a,!0)}),i},n.swapArrayItems=function(e,r,n){var t;return!!(e&&r!==n&&Math.min(r,n)>=0&&Math.max(r,n)<e.length)&&(t=e[n],e[n]=e[r],e[r]=t,!0)},n.roundToDecimalPlaces=function(e,r){if("number"!=typeof e||e===Math.round(e))return e;if(0===r)return Math.round(e);var n=e.toString();if(n.indexOf("e")>=0)return e;var t=e<0,i=n.split("."),a=+i[1].charAt(r);if(i[1]=i[1].substr(0,r),a>5||!t&&5===a){var o=/^0*/.exec(i[1])[0];i[1]=o+(+i[1]+1),i[1].length>r&&(o?i[1]=i[1].substr(i[1].length-r):(i[0]=+i[0]+1,i[1]=0))}return parseFloat(i.join("."))},n}),AJS.namespace("GH.Util",null,require("jira-agile/rapid/util"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/rapid/UserData.js' */
define("jira-agile/rapid/user-data",["jira/util/data/meta"],function(e){var r={};return r.remoteUser=e.get("remote-user"),r.loggedIn=!!r.remoteUser,r.hasUser=function(){return r.loggedIn},r.getUserName=function(){return r.remoteUser},r.canCreateProject=function(){return r.userConfig.canCreateProject},r.setGlobalConfig=function(e){r.quickCreateDefaultIssueTypeId=e.quickCreateDefaultIssueTypeId,r.userConfig=e.userConfig,r.userConfig&&r.userConfig.canCreateProject&&(r.userConfig.canCreateProject=!GH.Features.DISABLE_CREATE_PROJECT.isEnabled())},r}),AJS.namespace("GH.UserData",null,require("jira-agile/rapid/user-data"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/gh-features.js' */
define("jira-agile/gh-features",["jira/ajs/dark-features"],function(e){"use strict";function a(e){this.featureKey=e,this.featureEmergencyDisabledKey=e+".emergencyDisabled"}return a.prototype.isEnabled=function(){return e.isEnabled(this.featureKey)&&!e.isEnabled(this.featureEmergencyDisabledKey)},Object.freeze({DISABLE_CREATE_PROJECT:new a("jag.DISABLE_CREATE_PROJECT"),EDITABLE_DETAIL_VIEW_ENABLED:new a("com.atlassian.jira.agile.darkfeature.editable.detailsview"),SPLIT_ISSUE:new a("com.atlassian.jira.agile.darkfeature.splitissue")})}),AJS.namespace("GH.Features",null,require("jira-agile/gh-features"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/gh/navigation/Navigation.js' */
AJS.namespace("GH.Navigation"),GH.Navigation={},GH.Navigation.gotoDefaultRapidBoardPage=function(a,i){window.location.href=GH.Navigation.getDefaultRapidBoardPageUrl(a,i)},GH.Navigation.getDefaultRapidBoardPageUrl=function(a,i){var n=_.isUndefined(i)?"":"&view="+i;return GH.Navigation.getCanonicRapidBoardPageUrl(a)+n},GH.Navigation.getCanonicRapidBoardPageUrl=function(a){return GH.Ajax.CONTEXT_PATH+"/secure/RapidBoard.jspa?rapidView="+a},GH.Navigation.getLoginUrl=function(){return GH.Ajax.CONTEXT_PATH+"/login.jsp?os_destination="+encodeURIComponent(window.location.href)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-dialog', location = 'includes/js/dialog/dialog.js' */
AJS.namespace("GH.Dialog"),GH.Dialog.baseExtension={_getDefaultOptions:function(){return AJS.$.extend(this._super(),{onDialogFinished:function(){this.handleSuccess()}})},_performRedirect:function(){this.redirected=!0,this.handleSuccess()},hide:function(e,n){return JIRA.Dialog.current===this&&(this._super(e),void(n===!0||!n||n.reason!==JIRA.Dialog.HIDE_REASON.escape&&n.reason!==JIRA.Dialog.HIDE_REASON.cancel||this.doCancelCleanup()))},doCancelCleanup:function(){},handleSuccess:function(){}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-dialog', location = 'includes/js/rapid/ops/DialogExtension.js' */
AJS.namespace("GH.Dialog.XBoardExtension"),GH.Dialog.XBoardExtension.getActionInfo=function(e){var t="workflow-transition-",a=e.options.id;return a.substring(0,t.length)===t?{formId:a,isTransition:!0,transitionId:a.substring(t.length)}:{formId:a,isTransition:!1}},GH.Dialog.XBoardExtension.handleSuccess=function(){GH.IssueOperationShortcuts.clearOverrideSelectedIssue(),this.hide(!0,!0),this._hideloadingIndicator();var e=GH.Dialog.XBoardExtension.getActionInfo(this),t=GH.IssueOperationShortcuts.getSelectedIssueId(),a=GH.IssueOperationShortcuts.getSelectedIssueKey();GH.WorkController.isActive()?GH.Dialog.handleWorkModeUpdate(t,a,e):GH.PlanController.isActive()&&GH.Dialog.handlePlanModeUpdate(t,a,e),GH.Notification.showIssueMessage(t),GH.WorkDragAndDrop.transitionTargetStatus=void 0},GH.Dialog.handlePlanModeUpdate=function(e,t,a){if(!GH.IssueOperationShortcuts.isOverrideSelectedIssueActive()){var o=0,r=null,s=GH.BacklogModel.findModelWithIssue(t);s&&(GH.SprintModel.isSprintModel(s)&&(r=s.getSprintId()),o=s.getIssueList().getIssueIndex(t)),GH.PlanController.reload(function(){var e=GH.BacklogSelectionController.getSelectedIssueKey();if(!e){var t=null;r&&(t=GH.BacklogModel.getSprintModel(r)),t||(t=GH.BacklogModel.getBacklogModel2()),GH.BacklogSelectionController.selectIssue(t.getIssueList().getIssueKeyAtIndex(o))}})}},GH.Dialog.handleWorkModeUpdate=function(e,t,a){var o=GH.Dialog.createParentCompletedCheckCallback(t),r=GH.Dialog.createSelectMostAppropriateIssueCallback(t);if(a.isTransition)if(GH.WorkDragAndDrop.transitionTargetStatus){var s=GH.WorkDragAndDrop.transitionTargetStatus,n=GH.GridDataController.getModel(),l=n.getIssueDataByKey(t),i=n.getIssuePositionByKey(t),d=n.getColumns(),u=i.columnId,c=GH.GridColumnsData.getColumnIdForStatus(d,s);n.moveIssueToColumn(t,u,c),l.status=s,n.updateIssueData(l),GH.SwimlaneView.rerenderCell(i.swimlaneId,u),GH.SwimlaneView.rerenderCell(i.swimlaneId,c),o()}else GH.CallbackManager.registerCallback(GH.WorkController.CALLBACK_POOL_LOADED,"ParentWithAllSubsCompletedCheck",o);GH.CallbackManager.registerCallback(GH.WorkController.CALLBACK_POOL_LOADED,"SelectMostAppropriateIssueCallback",r),GH.WorkController.reload()},GH.Dialog.createParentCompletedCheckCallback=function(e){return function(){var t=GH.GridDataController.getModel();if(!_.isUndefined(t.data.issues[e])&&!_.isUndefined(t.data.issues[e].parentKey)){var a=t.data.issues[e].parentKey;if(_.contains(t.data.columnIssueMapping[_.last(t.data.columns).id],e)){var o=t.data.columnIssueMapping[_.last(t.data.columns).id],r=_.reduce(_.toArray(t.data.issues),function(e){return!_.contains(o,e)}),s=_.find(r,function(e){return t.data.issues[e].parentKey===a});s||GH.WorkController.resolveParentTask(t.data.issues[a])}}}},GH.Dialog.createSelectMostAppropriateIssueCallback=function(e){var t=GH.GridDataController.getModel().getIssuePositionByKey(e);return function(){var a=GH.GridDataController.getModel().getIssueDataByKey(e);if(!a){var o=GH.GridDataController.getModel().getIssueKeyAtPosition(t);o?(GH.WorkSelectionController.selectIssue(o,{pushState:!1,dontUpdateUI:!0}),GH.RapidBoard.State.replaceState()):(GH.WorkSelectionController.selectIssue(void 0,{pushState:!1,dontUpdateUI:!0}),GH.RapidBoard.State.replaceState())}}},GH.Dialog.XBoardExtension.doCancelCleanup=function(){GH.IssueOperationShortcuts.clearOverrideSelectedIssue(),GH.WorkDragAndDrop.transitionTargetStatus=void 0};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-dialog', location = 'includes/js/dialog/form-dialog.js' */
AJS.namespace("GH.FormDialog"),GH.FormDialog=JIRA.FormDialog.extend(GH.Dialog.baseExtension),GH.FormDialog=GH.FormDialog.extend(GH.Dialog.XBoardExtension);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-dialog', location = 'includes/js/dialog/labels-dialog.js' */
define("jira-agile/dialog/labels-dialog",["jira/dialog/labels-dialog"],function(i){var n=i.extend(GH.Dialog.baseExtension);return n=n.extend(GH.Dialog.XBoardExtension),n=n.extend({_handleSubmitResponse:function(i,n,t){this.serverIsDone&&(this.options.onSuccessfulSubmit&&this.options.onSuccessfulSubmit.call(this,i,n,t),this.options.autoClose&&this.hide(),this.options.onDialogFinished&&this.options.onDialogFinished.call(this,i,n,t))},decorateContent:function(){this._super();var i=this.get$popupContent(),n=i.find("input[name=customFieldId]");if(1===n.length){var t=i.find("#hint");t.hide()}}})});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-dialog', location = 'includes/js/rapid/ui/dialog/DialogUtil.js' */
AJS.namespace("GH.Dialog"),GH.Dialog.create=function(n){AJS.$("#"+n.id).remove(),n=_.defaults(n,{bindEscape:!0});var e=new AJS.Dialog(n),i=e.show,a=function(){GH.Dialog.preShow(),i.call(e);var a=AJS.$("#"+n.id).find(".dialog-button-panel .aui-button");a.is(":enabled")&&a.focus(),AJS.$("#"+n.id).addClass("ghx-dialog")};return _.extend(e,{dispose:GH.Dialog.generateCloseHandler(e),cancel:GH.Dialog.generateCloseHandler(e,n.onCancelFn),submit:GH.Dialog.generateCloseHandler(e,n.onConfirmFn),show:a,disableControls:GH.Dialog.generateDisableControlsFn(e),enableControls:GH.Dialog.generateEnableControlsFn(e),showSpinner:GH.Dialog.generateShowSpinnerFn(e),hideSpinner:GH.Dialog.generateHideSpinnerFn(e)}),GH.Dialog.bindEscapeHandler(e,!n.bindEscape),e},GH.Dialog.addCancelButton=function(n){n.addCancel("Cancel",function(e){n.cancel(n)})},GH.Dialog.bindEscapeHandler=function(n,e){e?JIRA.bind("Dialog.beforeHide",function(e,i,a,o){o===n.id&&a===JIRA.Dialog.HIDE_REASON.escape&&e.preventDefault()}):AJS.$(document).bind("keyup."+n.id,function(e){27==e.keyCode&&n.cancel(n)})},GH.Dialog.generateCloseHandler=function(n,e){return function(){return n.remove(),GH.Dialog.undim(),AJS.$(document).unbind("keyup."+n.id),AJS.unbind("remove.dialog"),e&&e(n),!1}},GH.Dialog.generateDisableControlsFn=function(n){return function(){AJS.$("#"+n.id+" button").attr("disabled","disabled")}},GH.Dialog.generateEnableControlsFn=function(n){return function(){AJS.$("#"+n.id+" button").removeAttr("disabled")}},GH.Dialog.generateShowSpinnerFn=function(n){return function(){AJS.$("#"+n.id).find(".button-panel-cancel-link").css("visibility","hidden").before('<span class="ghx-spinner"/>')}},GH.Dialog.generateHideSpinnerFn=function(n){return function(){AJS.$("#"+n.id).find(".ghx-spinner").remove().end().find(".button-panel-cancel-link").css("visibility","visible")}},GH.Dialog.sanitizeAJSDim=function(){var n=AJS.dim;AJS.dim=function(){try{n.apply(this,arguments)}catch(n){}}},GH.Dialog.registerDialog=function(n,e,i){AJS.$(document).undelegate(n,"click").delegate(n,"click",function(n){var a=AJS.$(this);a.hasClass("disabled")||(n.preventDefault(),e(n,i))})},GH.Dialog.dim=function(){AJS.dim(),AJS.$(".aui-blanket").html('<span class="ghx-wait"></span>')},GH.Dialog.undim=function(){AJS.undim(),AJS.$(".aui-blanket").empty()},GH.Dialog.preShow=function(){AJS.$(".aui-blanket").empty()};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-underscore', location = 'includes/js/lib/underscore-overrides.js' */
define("_",["underscore"],function(e){return e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-persistent-messages', location = 'includes/js/rapid/ui/persistent-messages/CreateViewMessage.js' */
AJS.namespace("GH.PersistentMessages.CreateViewMessage"),GH.PersistentMessages.CreateViewMessage={},GH.PersistentMessages.CreateViewMessage.setView=function(e,s,a,t){var r={id:e,name:s,type:a,subType:t};GH.storage.put("gh.createViewMessage",r,!0)},GH.PersistentMessages.CreateViewMessage.clear=function(){GH.storage.put("gh.createViewMessage",null,!0)},GH.PersistentMessages.CreateViewMessage.renderMessage=function(e){e&&GH.log(e.type+" handled","GH.PersistentMessages.CreateViewMessage.renderMessage");var s=GH.storage.get("gh.createViewMessage",!0);if(s){var a=null;s.name=AJS.escapeHTML(String(s.name));var t;"advanced"==s.type?t=GH.tpl.board.x.renderCreateViewMessage:"kanban"==s.subType?t=GH.tpl.board.x.renderWelcomeViewMessageKanban:"scrum"==s.subType&&(t=GH.tpl.board.x.renderWelcomeViewMessageScrum),a=t({rapidView:s,url:AJS.parseUri(window.location.href)}),GH.Notification.showSuccess(a,{title:"Success",timeout:1e4}),GH.PersistentMessages.CreateViewMessage.clear()}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-persistent-messages', location = 'includes/js/rapid/ui/persistent-messages/WelcomeMessage.js' */
AJS.namespace("GH.PersistentMessages.WelcomeMessage"),GH.PersistentMessages.WelcomeMessage={},GH.PersistentMessages.WelcomeMessage.show=function(e){GH.storage.put("gh.welcomeMessage",e,!0)},GH.PersistentMessages.WelcomeMessage.renderMessage=function(){var e=GH.storage.get("gh.welcomeMessage",!0);if(e){var s=null;e.rapidView.name=AJS.escapeHTML(String(e.rapidView.name)),e.project.name=AJS.escapeHTML(String(e.project.name));var a=null;/kanban/.test(e.preset)?a=e.sample?GH.tpl.board.x.renderWelcomeProjectSampleMessageKanban:GH.tpl.board.x.renderWelcomeProjectMessageKanban:/scrum/.test(e.preset)&&(a=e.sample?GH.tpl.board.x.renderWelcomeProjectSampleMessageScrum:GH.tpl.board.x.renderWelcomeProjectMessageScrum),s=a({project:e.project,rapidView:e.rapidView,url:AJS.parseUri(window.location.href)}),GH.Notification.showSuccess(s,{title:"Success",timeout:1e4}),GH.storage.put("gh.welcomeMessage",null,!0)}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-project-picker', location = 'includes/js/projects/project-picker.js' */
define("jira-agile/projects/project-picker",[],function(){"use strict";var t=function(t){if(!t||!t.selector)throw new Error("Project picker requires a selector");this.$select=AJS.$(t.selector),t.currentProjectId&&(this.currentProjectId=t.currentProjectId,this.currentProject=null),this.multiselect=new AJS.MultiSelect({element:this.$select,width:300,itemAttrDisplayed:"label",ajaxOptions:{url:GH.Ajax.buildRestUrl("/project.json"),formatResponse:this._processAjax.bind(this)}}),"function"==typeof t.change&&(this.$select.bind("unselect",t.change),this.$select.bind("change",t.change)),this.currentProjectId&&this.multiselect.requestSuggestions(!0).then(function(){this.currentProject&&this.multiselect.addItem(this._getProjectDescriptor(this.currentProject))}.bind(this))};return t.prototype.show=function(){AJS.warn("ProjectPicker.show is deprecated. It is no longer needed as all initialisation occurs in the constructor")},t.prototype.hasValue=function(){return!!this.$select.val()},t.prototype.hasErrors=function(){return this.multiselect.$container.parent().find(".error").length>0},t.prototype.getValue=function(){return this.$select.val()},t.prototype.getElement=function(){return this.$select},t.prototype._findProject=function(t,e){return(t||[]).filter(function(t){return e&&t.id===e}.bind(this))[0]},t.prototype._findUnmatchingProjects=function(t,e){return(t||[]).filter(function(t){return!e||t.id!==e}.bind(this))},t.prototype._processAjax=function(t){if(!t||!t.projects||!t.projects.length)return[];this.currentProject=this._findProject(t.projects,this.currentProjectId);var e=this._findUnmatchingProjects(t.projects,this.currentProjectId).map(this._getProjectDescriptor.bind(this));return this.currentProject?[this._getProjectDescriptor(this.currentProject)].concat(e):e},t.prototype._getProjectDescriptor=function(t){if(!t)throw new Error("ProjectPicker.prototype._getProjectDescriptor requires a project");return new AJS.ItemDescriptor({value:t.id+"",label:t.displayName,html:AJS.escapeHTML(String(t.displayName))})},t}),AJS.namespace("GH.ProjectPicker",null,require("jira-agile/projects/project-picker"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-create-board', location = 'includes/js/rapid/ui/startwizard/WizardView.soy' */
// This file was automatically generated from WizardView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.startwizard.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.startwizard == 'undefined') { GH.tpl.startwizard = {}; }


GH.tpl.startwizard.renderMethodologySelectionStep = function(opt_data, opt_ignored) {
  return '<form class="aui ghx-halved-vertical"><div class="aui-group"><div class="aui-item"><h2>' + soy.$$escapeHtml("Scrum") + '</h2><p>' + soy.$$escapeHtml("Scrum focuses on planning, committing and delivering time-boxed chunks of work called Sprints.") + '</p></div><div class="aui-item"><h2>' + soy.$$escapeHtml("Kanban") + '</h2><p>' + soy.$$escapeHtml("Kanban focuses on visualising your workflow and limiting work-in-progress to facilitate incremental improvements to your existing process.") + '</p></div></div><div class="aui-group ghx-button-group"><div class="aui-item"><button id="ghx-wizard-methodology-scrum" class="aui-button">' + soy.$$escapeHtml("Create a Scrum board") + '</button></div><div class="aui-item"><button id="ghx-wizard-methodology-kanban" class="aui-button">' + soy.$$escapeHtml("Create a Kanban board") + '</button></div></div>' + ((opt_data.isSampleDataAvailable && opt_data.canCreateProject) ? '<div class="aui-group"><div class="aui-item"><button id="ghx-wizard-methodology-scrum-sample" class="aui-button aui-button-link">' + soy.$$escapeHtml("Create a Scrum board with sample data") + '</button></div><div class="aui-item"><button id="ghx-wizard-methodology-kanban-sample" class="aui-button aui-button-link">' + soy.$$escapeHtml("Create a Kanban board with sample data") + '</button></div></div>' : '') + '</form>';
};
if (goog.DEBUG) {
  GH.tpl.startwizard.renderMethodologySelectionStep.soyTemplateName = 'GH.tpl.startwizard.renderMethodologySelectionStep';
}


GH.tpl.startwizard.renderMethodSelectionStep = function(opt_data, opt_ignored) {
  return '<div class="aui-group ghx-split" id="js-method-choice"><div class="aui-item"><form class="aui"><fieldset class="group ghx-space-saver">' + ((opt_data.canCreateProject) ? '<div class="radio"><input class="radio" type="radio" id="ghx-wizard-method-new-project" name="ghx-wizard-method" value="newProject" ' + ((opt_data.selectedOption == 'newProject') ? 'checked="checked"' : '') + '><label for="ghx-wizard-method-new-project">' + soy.$$escapeHtml("Board created with new Software project") + '</label><div class="description">' + soy.$$escapeHtml("A new board based on a new Software project") + '</div></div>' : '') + ((opt_data.hasProjectsAccessible) ? '<div class="radio"><input class="radio" type="radio" id="ghx-wizard-method-existing-project" name="ghx-wizard-method" value="existingProject" ' + ((opt_data.selectedOption == 'existingProject') ? 'checked="checked"' : '') + '><label for="ghx-wizard-method-existing-project">' + soy.$$escapeHtml("Board from an existing project") + '</label><div class="description">' + soy.$$escapeHtml("Boards can contain one or more projects.") + '</div></div>' : '') + ((opt_data.hasFiltersAccessible) ? '<div class="radio"><input class="radio" type="radio" id="ghx-wizard-method-existing-filter" name="ghx-wizard-method" value="existingFilter" ' + ((opt_data.selectedOption == 'existingFilter') ? 'checked="checked"' : '') + '><label for="ghx-wizard-method-existing-filter">' + soy.$$escapeHtml("Board from an existing Saved Filter") + '</label><div class="description">' + soy.$$escapeHtml("An advanced option using a JQL filter.") + '</div></div>' : '') + '</fieldset></form></div><div class="aui-item"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.startwizard.renderMethodSelectionStep.soyTemplateName = 'GH.tpl.startwizard.renderMethodSelectionStep';
}


GH.tpl.startwizard.renderProjectSelectionStep = function(opt_data, opt_ignored) {
  return '<div class="aui-group ghx-split"><div class="aui-item"><form class="aui ajs-dirty-warning-exempt"><fieldset><div class="field-group"><label for="ghx-wizard-project-board-name">' + soy.$$escapeHtml("Board name") + '<span class="aui-icon icon-required"></span></label><input class="text" type="text" id="ghx-wizard-project-board-name" maxlength="155"></div><div class="field-group"><label for="projects">' + soy.$$escapeHtml("Project(s)") + '<span class="aui-icon icon-required"></span></label><select id="ghx-wizard-choose-project" multiple="multiple" class="hidden"></select><div class="description">' + soy.$$escapeHtml("Select one or more projects to be included in this board.") + '</div></div></fieldset></form></div><div class="aui-item"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.startwizard.renderProjectSelectionStep.soyTemplateName = 'GH.tpl.startwizard.renderProjectSelectionStep';
}


GH.tpl.startwizard.renderFilterSelectionStep = function(opt_data, opt_ignored) {
  return '<div class="aui-group ghx-split"><div class="aui-item"><form class="aui"><fieldset><div class="field-group"><label for="ghx-wizard-filter-view-name">' + soy.$$escapeHtml("Board name") + '<span class="aui-icon icon-required"></span></label><input class="text" type="text" id="ghx-wizard-filter-view-name" name="name" maxlength="155"></div><div class="field-group" id="ghx-filter-picker"><label for="ghx-wizard-filter-select">' + soy.$$escapeHtml("Saved filter") + '<span class="aui-icon icon-required"></span></label><select id="ghx-wizard-filter-select" class="hidden"></select><div id="ghx-filter-error"></div></div><div id="ghx-create-permissioninfo-container"></div></fieldset></form></div><div class="aui-item ghx-alignwith-textgroup"><h3>' + soy.$$escapeHtml("Saved Filters") + '</h3><div class="description">' + soy.$$escapeHtml("Choose from a list of existing filters as a base for your new board. To create a new Saved Filter, save a search in the Issue Navigator.") + '</div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.startwizard.renderFilterSelectionStep.soyTemplateName = 'GH.tpl.startwizard.renderFilterSelectionStep';
}


GH.tpl.startwizard.renderProjectCreationStep = function(opt_data, opt_ignored) {
  return '<div class="aui-group ghx-split"><div class="aui-item"><form class="aui"><fieldset><div class="field-group"><label for="ghx-wizard-' + soy.$$escapeHtml(opt_data.prefix) + '-projectname">' + soy.$$escapeHtml("Project name") + '<span class="aui-icon icon-required"></span></label><input class="text" type="text" id="ghx-wizard-' + soy.$$escapeHtml(opt_data.prefix) + '-projectname" value="' + soy.$$escapeHtml(opt_data.sampleInfo.projectName) + '"></div><div class="field-group"><label for="ghx-wizard-' + soy.$$escapeHtml(opt_data.prefix) + '-projectkey">' + soy.$$escapeHtml("Project key") + '<span class="aui-icon icon-required"></span></label><input class="text short-field" type="text" id="ghx-wizard-' + soy.$$escapeHtml(opt_data.prefix) + '-projectkey" value="' + soy.$$escapeHtml(opt_data.sampleInfo.projectKey) + '"></div><div class="field-group"><label for="ghx-wizard-' + soy.$$escapeHtml(opt_data.prefix) + '-projectlead">' + soy.$$escapeHtml("Project lead") + '<span class="aui-icon icon-required"></span></label><select id="ghx-wizard-' + soy.$$escapeHtml(opt_data.prefix) + '-projectlead" class="js-default-user-picker hidden"><option' + ((opt_data.user.avatarUrl) ? ' style="background-image:url(\'' + soy.$$escapeHtml(opt_data.user.avatarUrl) + '\')"' : '') + 'selected="selected" value="' + soy.$$escapeHtml(opt_data.user.name) + '">' + soy.$$escapeHtml(opt_data.user.displayName) + '</option></select><div class="description">' + soy.$$escapeHtml("Start typing to get a list of possible matches.") + '</div></div></fieldset></form></div><div class="aui-item ghx-alignwith-textgroup"><h3>' + soy.$$escapeHtml("Creating a project") + '</h3><div class="description">' + soy.$$escapeHtml("A board will be created with your project, and will be named after your project. You can rename your board in the board configuration screen.") + '</div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.startwizard.renderProjectCreationStep.soyTemplateName = 'GH.tpl.startwizard.renderProjectCreationStep';
}


GH.tpl.startwizard.renderPermissionInfo = function(opt_data, opt_ignored) {
  return '<div class="field-group"><label for="ghx-create-permissioninfo">' + soy.$$escapeHtml("Shares") + '</label>' + GH.tpl.rapid.view.renderPermissionEntries({permissionEntries: opt_data.savedFilter.permissionEntries}) + '</div><div class="field-group"><label>' + soy.$$escapeHtml("Owner") + '</label><span class="field-value">' + soy.$$escapeHtml(opt_data.savedFilter.owner.displayName) + '</span></div>';
};
if (goog.DEBUG) {
  GH.tpl.startwizard.renderPermissionInfo.soyTemplateName = 'GH.tpl.startwizard.renderPermissionInfo';
}


GH.tpl.startwizard.createProjectTimeout = function(opt_data, opt_ignored) {
  return '' + soy.$$filterNoAutoescape(AJS.format("The operation has timed out, the project and board might have been created already. You can confirm this by checking the \x3ca href\x3d\x22{0}\x22\x3eManage Boards\x3c/a\x3e page.",opt_data.manageBoardURL));
};
if (goog.DEBUG) {
  GH.tpl.startwizard.createProjectTimeout.soyTemplateName = 'GH.tpl.startwizard.createProjectTimeout';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-create-board', location = 'includes/js/rapid/configuration/RapidView.soy' */
// This file was automatically generated from RapidView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.rapid.view.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.rapid == 'undefined') { GH.tpl.rapid = {}; }
if (typeof GH.tpl.rapid.view == 'undefined') { GH.tpl.rapid.view = {}; }


GH.tpl.rapid.view.renderConfigurationHeader = function(opt_data, opt_ignored) {
  return '<div id="ghx-modes-tools">' + aui.buttons.button({text: "Back to board", type: 'subtle', href: GH.Ajax.CONTEXT_PATH + '/secure/RapidBoard.jspa?rapidView=' + opt_data.rapidViewId + '&useStoredSettings=true', id: 'back-to-board', iconType: 'aui', iconText: "Back to board", iconClass: 'aui-icon-small aui-iconfont-back-page'}) + '</div><h2>' + soy.$$escapeHtml("Configure") + ' <span id="js-nav-view-name">' + soy.$$escapeHtml(opt_data.name) + '</span></h2>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderConfigurationHeader.soyTemplateName = 'GH.tpl.rapid.view.renderConfigurationHeader';
}


GH.tpl.rapid.view.renderConfigurationTabs = function(opt_data, opt_ignored) {
  var output = '<div id="ghx-config-header"></div><div class="aui-page-panel"><div class="aui-page-panel-inner"><div class="aui-page-panel-nav"><nav class="aui-navgroup aui-navgroup-vertical"><div class="aui-navgroup-inner"><div class="aui-nav-heading"><strong>' + soy.$$escapeHtml("Configuration") + '</strong></div><ul id="ghx-config-nav" class="aui-nav">';
  var configurationTabList21 = opt_data.configurationTabs;
  var configurationTabListLen21 = configurationTabList21.length;
  for (var configurationTabIndex21 = 0; configurationTabIndex21 < configurationTabListLen21; configurationTabIndex21++) {
    var configurationTabData21 = configurationTabList21[configurationTabIndex21];
    output += '<li data-tabitem="' + soy.$$escapeHtml(configurationTabData21.key) + '"><a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/secure/RapidView.jspa?rapidView=' + soy.$$escapeHtml(opt_data.rapidViewId) + '&amp;tab=' + soy.$$escapeHtml(configurationTabData21.key) + '">' + soy.$$escapeHtml(configurationTabData21.label) + '</a></li>';
  }
  output += '</ul></div></nav></div><section id="ghx-config-panel-content" class="aui-page-panel-content">';
  var configurationTabList35 = opt_data.configurationTabs;
  var configurationTabListLen35 = configurationTabList35.length;
  for (var configurationTabIndex35 = 0; configurationTabIndex35 < configurationTabListLen35; configurationTabIndex35++) {
    var configurationTabData35 = configurationTabList35[configurationTabIndex35];
    output += '<div class="ghx-page-panel-content-item" id="' + soy.$$escapeHtml(configurationTabData35.key) + '">' + soy.$$filterNoAutoescape(configurationTabData35.html) + '</div>';
  }
  output += '</section></div></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderConfigurationTabs.soyTemplateName = 'GH.tpl.rapid.view.renderConfigurationTabs';
}


GH.tpl.rapid.view.renderViewNameEditForm = function(opt_data, opt_ignored) {
  return '<label for="ghx-field-viewname">' + soy.$$escapeHtml("Board name") + '</label>' + GH.tpl.rapid.view.renderViewNameField(opt_data);
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderViewNameEditForm.soyTemplateName = 'GH.tpl.rapid.view.renderViewNameEditForm';
}


GH.tpl.rapid.view.renderViewNameField = function(opt_data, opt_ignored) {
  return '<span class="field-value ' + ((opt_data.canEdit) ? 'js-edit-rapidViewName' : '') + '" data-fieldname="viewname" data-fieldvalue="' + soy.$$escapeHtml(opt_data.rapidViewName) + '"><span id="ghx-field-viewname" ' + ((opt_data.canEdit) ? 'class="ghx-editable"' : '') + '>' + soy.$$escapeHtml(opt_data.rapidViewName) + '</span></span>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderViewNameField.soyTemplateName = 'GH.tpl.rapid.view.renderViewNameField';
}


GH.tpl.rapid.view.renderViewBoardAdminsEditForm = function(opt_data, opt_ignored) {
  var output = '<label for="ghx-field-view-board-admins">' + soy.$$escapeHtml("Administrators") + '</label><span  class="field-value' + ((opt_data.canEdit) ? ' js-edit-rapidViewBoardAdmin' : '') + '" ><span id="ghx-field-view-board-admins-span" ' + ((opt_data.canEdit) ? 'class="ghx-editable"' : '') + '>';
  var itemList77 = opt_data.model;
  var itemListLen77 = itemList77.length;
  if (itemListLen77 > 0) {
    for (var itemIndex77 = 0; itemIndex77 < itemListLen77; itemIndex77++) {
      var itemData77 = itemList77[itemIndex77];
      output += soy.$$escapeHtml(itemData77.displayName) + ((! (itemIndex77 == itemListLen77 - 1)) ? '<span>, </span>' : '');
    }
  } else {
    output += '<span class="ghx-fa">' + soy.$$escapeHtml("None") + '</span>';
  }
  output += '</span></span><span id="ghx-field-view-board-admins">' + ((opt_data.canUsePicker) ? '<select id="ghx-board-admins" multiple="multiple" class="hidden"></select>' : '') + '</span>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderViewBoardAdminsEditForm.soyTemplateName = 'GH.tpl.rapid.view.renderViewBoardAdminsEditForm';
}


GH.tpl.rapid.view.renderBoardAdminsEditNoPicker = function(opt_data, opt_ignored) {
  var output = '<span class="ghx-margin-right"><strong>' + soy.$$escapeHtml("Groups") + '</strong>: <input class="text medium-field" id="ghx-board-admin-edit-groups" value="';
  var itemList96 = opt_data.model.groupKeys;
  var itemListLen96 = itemList96.length;
  for (var itemIndex96 = 0; itemIndex96 < itemListLen96; itemIndex96++) {
    var itemData96 = itemList96[itemIndex96];
    output += soy.$$escapeHtml(itemData96.key) + ((! (itemIndex96 == itemListLen96 - 1)) ? ',' : '');
  }
  output += '" /></span><strong>' + soy.$$escapeHtml("Users") + '</strong>: <input class="text medium-field " id="ghx-board-admin-edit-users" value="';
  var itemList105 = opt_data.model.userKeys;
  var itemListLen105 = itemList105.length;
  for (var itemIndex105 = 0; itemIndex105 < itemListLen105; itemIndex105++) {
    var itemData105 = itemList105[itemIndex105];
    output += soy.$$escapeHtml(itemData105.key) + ((! (itemIndex105 == itemListLen105 - 1)) ? ',' : '');
  }
  output += '" /><div class="description">' + soy.$$escapeHtml("Separate user keys and group names with commas.") + '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderBoardAdminsEditNoPicker.soyTemplateName = 'GH.tpl.rapid.view.renderBoardAdminsEditNoPicker';
}


GH.tpl.rapid.view.renderConfigPermissionsWarning = function(opt_data, opt_ignored) {
  return '' + ((opt_data.model.canEdit != true) ? '<div class="aui-message warning"><p class="title"><span class="aui-icon icon-warning"></span><strong>' + soy.$$escapeHtml("Contact a JIRA or Board Administrator to configure this board.") + '</strong></p></div>' : '');
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderConfigPermissionsWarning.soyTemplateName = 'GH.tpl.rapid.view.renderConfigPermissionsWarning';
}


GH.tpl.rapid.view.renderFilterDetails = function(opt_data, opt_ignored) {
  var output = '<form class="aui" id="ghx-savedfilter-form"><div class="aui-message warning hidden" id="unmapped-issues-warning"><span class="aui-icon icon-warning"></span><p>' + soy.$$escapeHtml("Some issues in the Saved Filter will not be shown on the board.") + ' <a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/secure/RapidView.jspa?rapidView=' + soy.$$escapeHtml(opt_data.rapidViewId) + '&amp;tab=columns" id="js-view-columns">' + soy.$$escapeHtml("View unmapped statuses which contain these issues.") + '</a></p></div><div class="field-group"><label>' + soy.$$escapeHtml("Saved Filter") + '</label><span id="ghx-filter-change" class="field-value' + ((opt_data.canEdit) ? ' ghx-editable ghx-ss' : '') + '">' + soy.$$escapeHtml(opt_data.savedFilter.name) + '</span><select id="ghx-filter-change-select" class="hidden"></select><p class="ghx-additional"><a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/secure/IssueNavigator.jspa?mode=show&requestId=' + soy.$$escapeHtml(opt_data.savedFilter.id) + '">' + ((opt_data.canEdit) ? soy.$$escapeHtml("Edit Filter Query") : soy.$$escapeHtml("View Filter Query")) + '</a></p></div>' + GH.tpl.rapid.view.renderPermissionInfo(opt_data) + '<div class="field-group ghx-jql-preview"><label>' + soy.$$escapeHtml("Filter Query") + '</label><span class="field-value">' + ((opt_data.savedFilter.query) ? soy.$$escapeHtml(opt_data.savedFilter.query) : '') + '</span></div><div class="field-group"><label>' + soy.$$escapeHtml("Ranking") + '</label><span class="field-value">';
  if (opt_data.savedFilter.isOrderedByRank) {
    output += soy.$$escapeHtml("Using Rank");
  } else {
    if (! opt_data.savedFilter.orderByWarnings) {
      output += soy.$$escapeHtml("Ranking is disabled, as the Filter Query is not ordered by Rank");
    } else {
      var warningList167 = opt_data.savedFilter.orderByWarnings.errorMessages;
      var warningListLen167 = warningList167.length;
      for (var warningIndex167 = 0; warningIndex167 < warningListLen167; warningIndex167++) {
        var warningData167 = warningList167[warningIndex167];
        output += soy.$$escapeHtml(warningData167) + '<br>';
      }
    }
    output += (opt_data.savedFilter.canEdit && opt_data.savedFilter.canBeFixed) ? '<p><button class="aui-button js-update-filter-order-by">' + soy.$$escapeHtml("Add Rank") + '</button></p>' : '';
  }
  output += '</span></div>';
  if (opt_data.savedFilter.queryProjects) {
    output += '<div class="field-group"><label>' + soy.$$escapeHtml("Projects in board") + '</label><ul id="ghx-show-projects-in-board">';
    if (opt_data.savedFilter.queryProjects.displayMessage) {
      output += '<span class="field-value">' + soy.$$escapeHtml(opt_data.savedFilter.queryProjects.displayMessage) + '</span>';
    } else {
      var avatarSize__soy188 = 'small';
      var projectList189 = opt_data.savedFilter.queryProjects.projects;
      var projectListLen189 = projectList189.length;
      for (var projectIndex189 = 0; projectIndex189 < projectListLen189; projectIndex189++) {
        var projectData189 = projectList189[projectIndex189];
        output += '<li>' + aui.avatar.avatar({isProject: 'true', size: '' + soy.$$escapeHtml(avatarSize__soy188), avatarImageUrl: soy.$$escapeHtml("") + '/secure/projectavatar?size=' + soy.$$escapeHtml(avatarSize__soy188) + '&pid=' + soy.$$escapeHtml(projectData189.id), extraClasses: 'jira-system-avatar'}) + '<strong>' + soy.$$escapeHtml(projectData189.name) + '</strong><p>';
        var viewProjectPermissionText__soy207 = "View permission";
        output += ((projectData189.isValidEditProjectConfigAction) ? '<a href="' + soy.$$escapeHtml("") + '/plugins/servlet/project-config/' + soy.$$escapeHtml(projectData189.key) + '/permissions">' + soy.$$escapeHtml(viewProjectPermissionText__soy207) + '</a>' : '<a class="disabled">' + soy.$$escapeHtml(viewProjectPermissionText__soy207) + '</a><span class="aui-icon aui-icon-small aui-iconfont-info" title="' + soy.$$escapeHtml("You are not allowed to view this Project Permission") + '"></span>') + '</p></li>';
      }
    }
    output += '</ul></div>';
  }
  output += (opt_data.isSubqueriesConfigurable) ? '<div class="field-group ghx-jql"><label for="ghx-sub-jql">' + soy.$$escapeHtml("Kanban board sub-filter") + '</label><div id="js-sub-container-work">' + GH.tpl.rapid.view.renderSubQueryView({section: 'board.kanban.work', queryValue: opt_data.subqueries[0], canEdit: opt_data.canEdit}) + '</div><div class="description">' + soy.$$escapeHtml("Further filtering of issues for unreleased work.") + '</div></div>' : '';
  if (opt_data.isOldDoneIssuesCutoffConfigurable) {
    output += '<div class="field-group ghx-show-old-limit"><label for="ghx-limit-days">' + soy.$$escapeHtml("Hide completed issues older than") + '</label><select id="ghx-limit-days" class="select">';
    var optionList243 = opt_data.oldDoneIssuesCutoffOptions;
    var optionListLen243 = optionList243.length;
    for (var optionIndex243 = 0; optionIndex243 < optionListLen243; optionIndex243++) {
      var optionData243 = optionList243[optionIndex243];
      output += '<option value="' + soy.$$escapeHtml(optionData243.value) + '" ' + ((opt_data.oldDoneIssuesCutoff == optionData243.value) ? 'selected="selected"' : '') + '>' + soy.$$escapeHtml(optionData243.label) + '</option>';
    }
    output += '</select><div class="description">' + soy.$$escapeHtml("Speed up your board by hiding issues you\x27re no longer working on.") + '</div></div>';
  }
  output += '</form>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderFilterDetails.soyTemplateName = 'GH.tpl.rapid.view.renderFilterDetails';
}


GH.tpl.rapid.view.renderSubQueryView = function(opt_data, opt_ignored) {
  return '<span id="ghx-sub-work" class="field-value' + ((opt_data.canEdit) ? ' js-editable ghx-editable ghx-jql' : '') + '">' + ((opt_data.queryValue) ? soy.$$escapeHtml(opt_data.queryValue) : (opt_data.canEdit) ? '<em>' + soy.$$escapeHtml("Add Sub-Filter") + '</em>' : soy.$$escapeHtml("No sub-filter")) + '</span>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderSubQueryView.soyTemplateName = 'GH.tpl.rapid.view.renderSubQueryView';
}


GH.tpl.rapid.view.renderSubQueryControls = function(opt_data, opt_ignored) {
  return '<textarea class="js-jql-autocomplete-field textarea" id="ghx-sub-jql" data-section="' + soy.$$escapeHtml(opt_data.section) + '" cols="20" rows="2">' + soy.$$escapeHtml(opt_data.queryValue) + '</textarea><span id="ghx-sub-jql-errormsg" class="icon jqlgood js-jql-autocomplete-error"><span></span></span><button class="aui-button js-subquery-submit">' + soy.$$escapeHtml("Update") + '</button><button class="aui-button js-subquery-cancel">' + soy.$$escapeHtml("Cancel") + '</button>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderSubQueryControls.soyTemplateName = 'GH.tpl.rapid.view.renderSubQueryControls';
}


GH.tpl.rapid.view.renderPermissionInfo = function(opt_data, opt_ignored) {
  return '<div class="field-group"><label for="ghx-create-permissioninfo">' + soy.$$escapeHtml("Shares") + '</label>' + GH.tpl.rapid.view.renderPermissionEntries({permissionEntries: opt_data.savedFilter.permissionEntries}) + ((opt_data.savedFilter.canEdit) ? '<p class="ghx-additional"><a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/secure/EditFilter!default.jspa?filterId=' + soy.$$escapeHtml(opt_data.savedFilter.id) + '">' + soy.$$escapeHtml("Edit Filter Shares") + '</a></p>' : '</div><div class="field-group"><label>' + soy.$$escapeHtml("Owner") + '</label><span class="field-value">' + soy.$$filterNoAutoescape(opt_data.savedFilter.owner.renderedLink) + '</span>') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderPermissionInfo.soyTemplateName = 'GH.tpl.rapid.view.renderPermissionInfo';
}


GH.tpl.rapid.view.renderPermissionEntries = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.permissionEntries.length > 0) {
    output += '<span class="field-value"><ul id="ghx-create-permissioninfo">';
    var permissionEntryList313 = opt_data.permissionEntries;
    var permissionEntryListLen313 = permissionEntryList313.length;
    for (var permissionEntryIndex313 = 0; permissionEntryIndex313 < permissionEntryListLen313; permissionEntryIndex313++) {
      var permissionEntryData313 = permissionEntryList313[permissionEntryIndex313];
      output += '<li>';
      var permissionValueList315 = permissionEntryData313.values;
      var permissionValueListLen315 = permissionValueList315.length;
      for (var permissionValueIndex315 = 0; permissionValueIndex315 < permissionValueListLen315; permissionValueIndex315++) {
        var permissionValueData315 = permissionValueList315[permissionValueIndex315];
        output += ((permissionValueData315.type == "Shared with the public") ? '<span class="ghx-iconfont ghx-iconfont-inactive aui-icon aui-icon-small aui-iconfont-unlocked" title="' + soy.$$escapeHtml("Sharing unrestricted") + '">' + soy.$$escapeHtml("Sharing unrestricted") + '</span>' : '<span class="ghx-iconfont ghx-iconfont-inactive aui-icon aui-icon-small aui-iconfont-locked" title="' + soy.$$escapeHtml("Sharing restricted") + '">' + soy.$$escapeHtml("Sharing restricted") + '</span>') + ((permissionValueData315.name) ? '<strong>' + soy.$$escapeHtml(permissionValueData315.type) + ':</strong><span>' + soy.$$escapeHtml(permissionValueData315.name) + '</span>' : '<strong>' + soy.$$escapeHtml(permissionValueData315.type) + '</strong>');
      }
      output += '</li>';
    }
    output += '</ul></span>';
  } else {
    output += '<span class="field-value">' + soy.$$escapeHtml("No shares") + '</span>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderPermissionEntries.soyTemplateName = 'GH.tpl.rapid.view.renderPermissionEntries';
}


GH.tpl.rapid.view.deleteForm = function(opt_data, opt_ignored) {
  return '<section role="dialog" class="aui-dialog2 aui-dialog2-small gh-confirm-delete-dialog"><header class="aui-dialog2-header"><h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml("Delete") + '</h2><a class="aui-dialog2-header-close"><span class="aui-icon aui-icon-small aui-iconfont-close-dialog cancel">' + soy.$$escapeHtml("Close") + '</span></a></header><div class="aui-dialog2-content"><p>' + soy.$$filterNoAutoescape(opt_data.message) + '</p></div><footer class="aui-dialog2-footer"><div class="aui-dialog2-footer-actions"><form>' + aui.buttons.button({tagName: 'button', type: 'primary', extraAttributes: {type: 'submit'}, text: "Confirm"}) + aui.buttons.button({tagName: 'button', type: 'link', extraAttributes: {type: 'button'}, extraClasses: 'cancel', text: "Cancel"}) + '</form></div></footer></section>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.deleteForm.soyTemplateName = 'GH.tpl.rapid.view.deleteForm';
}


GH.tpl.rapid.view.confirmForm = function(opt_data, opt_ignored) {
  return '<h2 class="dialog-title">' + soy.$$escapeHtml("Confirmation") + '</h2><form class="aui" action="#" method="post"><div class="form-body"><p>' + soy.$$filterNoAutoescape(opt_data.message) + '</p></div><div class="form-footer buttons-container"><div class="buttons"><input id="submit" class="button" type="submit" value="' + soy.$$escapeHtml("Confirm") + '" /><a role="button" href="#" class="cancel">' + soy.$$escapeHtml("Cancel") + '</a></div></div></form></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.confirmForm.soyTemplateName = 'GH.tpl.rapid.view.confirmForm';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-create-board', location = 'includes/js/rapid/ui/startwizard/WizardView.js' */
GH.StartWizardView={},GH.StartWizardView.dialog=void 0,GH.StartWizardView.model=void 0,GH.StartWizardView.stepsNameStack=void 0,GH.StartWizardView.pages={},GH.StartWizardView.filterPicker=void 0,GH.StartWizardView.projectPicker=void 0,function(){var e=require("jira-agile/rapid/analytics-tracker");GH.StartWizardView.analytics=new e("gh.create.wizard")}(),GH.StartWizardView.wizardStepPreRenderCallbacks=[],GH.StartWizardView.wizardStepPostRenderCallbacks=[],GH.StartWizardView.wizardStepOnValidateCallbacks=[],GH.StartWizardView.wizardStepOnCreateCallbacks=[],GH.StartWizardView.steps={methodologySelection:{render:function(e){var t={isSampleDataAvailable:GH.Config.isSampleDataAvailable,canCreateProject:GH.UserData.canCreateProject()};return{header:"Create an Agile board",content:GH.tpl.startwizard.renderMethodologySelectionStep(t)}},bind:function(e,t){AJS.$("#ghx-wizard-methodology-scrum").click(function(e){e.preventDefault(),t.sampleData=!1,GH.StartWizardView.selectMethodology("scrum",t)}),AJS.$("#ghx-wizard-methodology-kanban").click(function(e){e.preventDefault(),t.sampleData=!1,GH.StartWizardView.selectMethodology("kanban",t)}),AJS.$("#ghx-wizard-methodology-scrum-sample").click(function(e){e.preventDefault(),t.sampleData=!0,GH.StartWizardView.selectMethodology("scrum",t)}),AJS.$("#ghx-wizard-methodology-kanban-sample").click(function(e){e.preventDefault(),t.sampleData=!0,GH.StartWizardView.selectMethodology("kanban",t)})}},methodSelection:{render:function(e){var t=e.method;return t||(t=GH.UserData.userConfig.canCreateProject?"newProject":"existingProject"),{header:"Create an Agile board",content:GH.tpl.startwizard.renderMethodSelectionStep(_.extend({},e,{canCreateProject:GH.UserData.userConfig.canCreateProject,hasProjectsAccessible:GH.UserData.userConfig.hasProjectsAccessible,hasFiltersAccessible:GH.UserData.userConfig.hasFiltersAccessible,selectedOption:t}))}},bind:function(e){},next:function(e,t){var a=e.find("input[name=ghx-wizard-method]").filter(":checked").val();t.method=a;var r=AJS.$.Deferred();return"newProject"===a?r.resolve("projectCreation"):"existingProject"===a?r.resolve("projectSelection"):"existingFilter"===a?r.resolve("filterSelection"):r.reject(new Error("Unknown board creation method : "+a)),r.promise()}},projectCreation:{render:function(e){return e.prefix="project",GH.StartWizardView.renderProjectCreation({user:GH.UserData.userConfig,prefix:"project",sampleInfo:{projectName:"",projectKey:""}})},bind:function(e,t){GH.StartWizardView.bindProjectCreation(e,t)},completeActionName:"Create board",complete:function(e){return GH.StartWizardView.createProject(GH.StartWizardView.dialog,e)}},sampleProjectCreation:{render:function(e){return e.prefix="sample",GH.StartWizardView.renderProjectCreation({user:GH.UserData.userConfig,prefix:"sample",sampleInfo:e.sampleInfo})},bind:function(e,t){GH.StartWizardView.bindProjectCreation(e,t)},completeActionName:"Create board",complete:function(e){return GH.StartWizardView.createSampleProject(GH.StartWizardView.dialog,e)}},projectSelection:{render:function(e){return{header:"Name this board",content:GH.tpl.startwizard.renderProjectSelectionStep()}},bind:function(e,t){GH.StartWizardView.bindProjectSelection(e,t)},completeActionName:"Create board",complete:function(e){return GH.StartWizardView.validateProjectSelection(e)}},filterSelection:{render:function(e){return{header:"Name this board",content:GH.tpl.startwizard.renderFilterSelectionStep()}},bind:function(e,t){GH.StartWizardView.bindFilterSelection(e,t)},completeActionName:"Create board",complete:function(e){return GH.StartWizardView.validateFilterSelection(e)}}},GH.StartWizardView.show=function(e){GH.StartWizardView.dialog||(GH.StartWizardView.dialog=GH.Dialog.create({width:840,height:400,id:"ghx-wizard-dialog",onCancelFn:function(){GH.StartWizardView.disposeWizard(),GH.StartWizardView.analytics.trigger("cancel")}}),GH.StartWizardView.model={},GH.StartWizardView.stepsNameStack=[],GH.StartWizardView.dialog.show(),GH.StartWizardView.analytics.trigger("start"),GH.StartWizardView.preventSubmitOnEnter())},GH.StartWizardView.preventSubmitOnEnter=function(){var e=function(e){if(13==e.keyCode&&"ghx-wizard-filter-select-field"!=e.target.id)return e.preventDefault(),!1};AJS.$("input").keydown(e)},GH.StartWizardView.showStep=function(e){if(!_.has(GH.StartWizardView.steps,e))throw new Error("Unknown wizard step "+e);var t=GH.StartWizardView.dialog;if(GH.StartWizardView.pages[e])t.gotoPage(GH.StartWizardView.pages[e]),GH.StartWizardView.dialog.popup.element.find(".dialog-panel-body .aui-message-error").remove();else{var a=GH.StartWizardView.steps[e],r=a.render(GH.StartWizardView.model);_.each(GH.StartWizardView.wizardStepPreRenderCallbacks,function(t){t(e)}),t.addPage(),GH.StartWizardView.pages[e]=t.curpage,t.addHeader(r.header);var i=AJS.$(r.content);if(t.addPanel(null,i,"ghx-wizard-panel"),_.each(GH.StartWizardView.wizardStepPostRenderCallbacks,function(a){a(e,t)}),GH.StartWizardView.stepsNameStack.length>0&&t.addButton("Back",function(){var e=GH.StartWizardView.stepsNameStack.pop();GH.StartWizardView.showStep(e)},"aui-button"),_.has(a,"complete")){var o=function(){var e=AJS.$(this),t=e.attr("aria-disabled");"true"!=t&&a.complete(GH.StartWizardView.model)};t.addButton(a.completeActionName,o,"aui-button aui-button-primary js-wizard-button-complete")}else if(_.has(a,"next")){var n=function(){var r=AJS.$(this),o=r.attr("aria-disabled");if("true"!=o){var n=a.next(i,GH.StartWizardView.model),d=function(t){GH.StartWizardView.stepsNameStack.push(e),GH.StartWizardView.showStep(t)},l=function(e){console.log(e),t.updateHeight()},c=!0;_.each(GH.StartWizardView.wizardStepOnValidateCallbacks,function(a){a(e,t)||(c=!1)}),n.done(function(e){c?d(e):l("GH project create extension callback returned failure")}).fail(l)}};t.addButton("Next",n,"aui-button aui-button-primary js-wizard-button-next")}t.addCancel("Cancel",function(){t.cancel()}),a.bind(i,GH.StartWizardView.model)}t.updateHeight(),GH.StartWizardView.preventSubmitOnEnter()},GH.StartWizardView.startWizard=function(){GH.StartWizardView.show(),GH.StartWizardView.showStep("methodologySelection")},GH.StartWizardView.disposeWizard=function(){GH.StartWizardView.dialog=void 0,GH.StartWizardView.pages={}},GH.StartWizardView.genStartFunction=function(e,t){return function(){GH.StartWizardView.show(),GH.StartWizardView.model.sampleData=t,GH.StartWizardView.selectMethodology(e,GH.StartWizardView.model)}},GH.StartWizardView.bindWelcomePage=function(){GH.Dialog.registerDialog(".js-wizard-scrum",GH.StartWizardView.genStartFunction("scrum",!1)),GH.Dialog.registerDialog(".js-wizard-scrum-sample",GH.StartWizardView.genStartFunction("scrum",!0)),GH.Dialog.registerDialog(".js-wizard-kanban",GH.StartWizardView.genStartFunction("kanban",!1)),GH.Dialog.registerDialog(".js-wizard-kanban-sample",GH.StartWizardView.genStartFunction("kanban",!0))},GH.StartWizardView.getCreateProjectRequest=function(e){var t=e.project,a={projectName:t.name,projectKey:t.key,projectLeadUserName:t.lead,boardName:e.boardName,preset:e.methodology,sampleData:e.sampleData};return a},GH.StartWizardView.createProject=function(e,t){GH.StartWizardView.populateProjectCreationProperties(t);var a=GH.StartWizardView.getCreateProjectRequest(t);e.disableControls(),e.showSpinner();var r={url:"/welcome/createProject",data:a,errorContextMap:{projectName:"#ghx-wizard-"+t.prefix+"-projectname",projectKey:"#ghx-wizard-"+t.prefix+"-projectkey",projectLead:"#ghx-wizard-"+t.prefix+"-projectlead"},timeout:12e4,deferErrorHandling:!0};return GH.Ajax.put(r).done(function(a){function r(){if(0==GH.StartWizardView.wizardStepOnCreateCallbacks.length)i();else{var a=GH.StartWizardView.wizardStepOnCreateCallbacks.pop();a(e,r,t)}}a.success.sample=t.sampleData,GH.PersistentMessages.WelcomeMessage.show(a.success);var i=function(){GH.StartWizardView.gotoCreatedView(a.success.rapidView.id,t.methodology)};r()}).fail(function(t,a,i,o){_.each(t.getGlobalErrors(),function(e){504==e.status&&(e.message=GH.tpl.startwizard.createProjectTimeout({manageBoardURL:GH.RapidBoard.getManageViewsPageUrl()}),e.noAutoescape=!0)}),GH.Ajax.handleContextualErrors(t,r.errorContextMap),GH.Ajax.handleGlobalErrors(t,r.errorContextMap),e.hideSpinner(),e.enableControls(),e.updateHeight()})},GH.StartWizardView.validateProjectSelection=function(e){GH.StartWizardView.dialog.disableControls(),GH.StartWizardView.dialog.showSpinner();var t=AJS.$("#ghx-wizard-project-board-name");return GH.Validation.clearContextualErrors(GH.StartWizardView.projectPicker.getElement()),GH.Validation.clearContextualErrors(t),GH.Ajax.post({url:"/rapidview/create/presets",data:{name:t.val(),projectIds:GH.StartWizardView.projectPicker.getValue(),preset:e.methodology},errorContextMap:{name:"#ghx-wizard-project-board-name",projectIds:GH.StartWizardView.projectPicker.selector}}).done(function(t){console.log("mode: "+e),GH.StartWizardView.handleCreate(t,"simple",e.methodology)}).fail(function(){GH.StartWizardView.dialog.enableControls(),GH.StartWizardView.dialog.hideSpinner(),GH.StartWizardView.dialog.updateHeight()})},GH.StartWizardView.validateFilterSelection=function(e){var t=AJS.$("#ghx-wizard-filter-view-name"),a=GH.StartWizardView.filterPicker.getElement(),r=AJS.$(GH.StartWizardView.filterPicker.selector);GH.Validation.clearContextualErrors(t),GH.Validation.clearContextualErrors(a);var i=r.val()?r.val()[0]:null;return GH.StartWizardView.dialog.disableControls(),GH.StartWizardView.dialog.showSpinner(),GH.Ajax.post({url:"/rapidview/create/advanced",data:{name:t.val(),filterId:i,methodology:e.methodology},errorContextMap:{name:"#ghx-wizard-filter-view-name",filterId:GH.StartWizardView.filterPicker.selector}}).done(function(t){GH.StartWizardView.handleCreate(t,"simple",e.methodology)}).fail(function(){GH.StartWizardView.dialog.hideSpinner(),GH.StartWizardView.dialog.enableControls(),GH.StartWizardView.dialog.updateHeight()})},GH.StartWizardView.handleCreate=function(e,t,a){var r=t!=a&&a;GH.PersistentMessages.CreateViewMessage.setView(e.success.id,e.success.name,t,r),GH.StartWizardView.analytics.trigger("complete"),GH.StartWizardView.gotoCreatedView(e.success.id,a)},GH.StartWizardView.gotoCreatedView=function(e,t){var a="scrum"==t?"planning":null;GH.Navigation.gotoDefaultRapidBoardPage(e,a)},GH.StartWizardView.selectMethodology=function(e,t){if(t.methodology=e,GH.StartWizardView.stepsNameStack.push("methodologySelection"),t.sampleData)GH.Ajax.get({url:"/welcome/sampledataproject?preset="+t.methodology},"sampledataproject").done(function(e){t.sampleInfo=e,GH.StartWizardView.showStep("sampleProjectCreation")}).fail(function(){GH.StartWizardView.showStep("sampleProjectCreation")});else{var a=GH.UserData.userConfig.canCreateProject,r=GH.UserData.userConfig.hasProjectsAccessible,i=GH.UserData.userConfig.hasFiltersAccessible;a||i?r||i?GH.StartWizardView.showStep("methodSelection"):GH.StartWizardView.showStep("projectCreation"):GH.StartWizardView.showStep("projectSelection")}},GH.StartWizardView.populateProjectCreationProperties=function(e){var t=AJS.$("#ghx-wizard-"+e.prefix+"-projectname"),a=AJS.$("#ghx-wizard-"+e.prefix+"-projectkey"),r=AJS.$("#ghx-wizard-"+e.prefix+"-projectlead");GH.Validation.clearContextualErrors(t),GH.Validation.clearContextualErrors(a),GH.Validation.clearContextualErrors(r),e.project={name:t.val(),key:a.val().toUpperCase(),lead:AJS.$("#ghx-wizard-"+e.prefix+"-projectlead option:selected").val()}},GH.StartWizardView.createSampleProject=function(e,t){t.sampleData=!0,GH.StartWizardView.createProject(e,t)},GH.StartWizardView.validateBoardName=function(e,t){return GH.Validation.clearContextualErrors(e),t.boardName=e.val(),!!t.boardName||(GH.Validation.showContextualErrors(e,"Please enter a name for your board."),!1)},GH.StartWizardView.renderProjectCreation=function(e){return{header:"New project with board",content:GH.tpl.startwizard.renderProjectCreationStep(e)}},GH.StartWizardView.bindProjectSelection=function(e,t){GH.StartWizardView.projectPicker=new GH.ProjectPicker({selector:"#ghx-wizard-choose-project",change:function(){GH.StartWizardView.dialog.updateHeight()},currentProjectId:JIRA.API&&JIRA.API.Projects?JIRA.API.Projects.getCurrentProjectId():null}),GH.StartWizardView.projectPicker.multiselect.keys.Return=function(e){e.preventDefault()},GH.StartWizardView.attachDependantButton({buttonIndex:1,selectors:["#ghx-wizard-project-board-name","#ghx-wizard-choose-project"]})},GH.StartWizardView.bindProjectCreation=function(e,t){AJS.$("#ghx-wizard-"+t.prefix+"-projectkey").generateFrom(AJS.$("#ghx-wizard-"+t.prefix+"-projectname"),{maxNameLength:64,maxKeyLength:64}),JIRA.trigger(JIRA.Events.NEW_CONTENT_ADDED,[e]),e.trigger("contentRefresh");var a=GH.StartWizardView.dialog,r=a.page[a.curpage];r.button[1].item;GH.StartWizardView.attachDependantButton({buttonIndex:1,selectors:["#ghx-wizard-"+t.prefix+"-projectname","#ghx-wizard-"+t.prefix+"-projectkey","#ghx-wizard-"+t.prefix+"-projectlead"]})},GH.StartWizardView.bindFilterSelection=function(e,t){var a=function(e,a){var r="";if(delete t.savedFilter,a&&a.properties){var i=a.properties.savedFilter;r=null!=i?GH.tpl.startwizard.renderPermissionInfo({savedFilter:i}):"",t.savedFilter=i}AJS.$("#ghx-create-permissioninfo-container").html(r),GH.StartWizardView.dialog.updateHeight()};GH.StartWizardView.filterPicker=new GH.SavedFilterPicker({selector:"#ghx-wizard-filter-select",selected:a,stayActivated:!0}),GH.StartWizardView.filterPicker.show(t.savedFilter),GH.StartWizardView.filterPicker.singleSelect.keys.Return=function(e){e.preventDefault()},GH.StartWizardView.attachDependantButton({buttonIndex:1,selectors:["#ghx-wizard-filter-view-name","#ghx-wizard-filter-select"]})},GH.StartWizardView.attachDependantButton=function(e){var t=GH.StartWizardView.dialog,a=t.page[t.curpage],r=a.button[e.buttonIndex].item;GH.StartWizardView.dependantValidationListener({selectors:e.selectors,full:function(){r.attr("aria-disabled","false")},empty:function(){r.attr("aria-disabled","true")}})},GH.StartWizardView.dependantValidationListener=function(e){function t(){var t=_.filter(e.selectors,function(e){var t=AJS.$(e);return!AJS.$.trim(t.val())});return _.isEmpty(t)?e.full():e.empty()}function a(){e.nowait?t():setTimeout(t,50)}_.isEmpty(e.selectors)||(e.full=e.full||AJS.$.noop(),e.empty=e.empty||AJS.$.noop(),e.nowait=e.nowait||!1,_.each(e.selectors,function(e){var t=AJS.$(e);t.on("input",a),t.on("change",a),t.on("selected",a),t.on("unselect",a)}),t())},GH.StartWizardView.registerWizardStepPreRenderCallback=function(e){GH.StartWizardView.wizardStepPreRenderCallbacks.push(e)},GH.StartWizardView.registerWizardStepPostRenderCallback=function(e){GH.StartWizardView.wizardStepPostRenderCallbacks.push(e)},GH.StartWizardView.registerWizardStepOnValidateCallback=function(e){GH.StartWizardView.wizardStepOnValidateCallbacks.push(e)},GH.StartWizardView.registerWizardStepOnCreateCallbacks=function(e){GH.StartWizardView.wizardStepOnCreateCallbacks.push(e)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-create-board', location = 'includes/js/rapid/ui/component/SavedFilterPicker.js' */
GH.SavedFilterPicker=function(e){this.selector=e.selector,this.fieldSelector=e.selector+"-field",this.blurHandler=e.blur,this.selectHandler=e.selected,this.stayActivated=e.stayActivated,this.focus=e.focus},GH.SavedFilterPicker.prototype.show=function(e){var t=AJS.$(this.selector),i=new AJS.SingleSelect({element:t,width:300,removeOnUnSelect:!0,itemAttrDisplayed:"label",errorMessage:"",ajaxOptions:{query:!0,url:GH.Ajax.buildRestUrl("/savedfilter/list.json"),formatResponse:function(e){if(e.errors){var i=GH.Ajax._convertJiraErrors(e.errors),r={searchName:this.selector};return GH.Ajax.handleContextualErrors(i,r),!1}t.siblings(".ghx-error").remove();var s=[];return AJS.$(e.filters).each(function(){s.push(new AJS.ItemDescriptor({value:this.id.toString(),label:this.name,html:AJS.escapeHTML(String(this.name)),savedFilter:this}))}),s}}});this.singleSelect=i;var r=this.removeSingleSelect;this.stayActivated||AJS.$(this.fieldSelector).blur(function(){r(i)}),_.isFunction(this.blurHandler)&&AJS.$(this.fieldSelector).blur(this.blurHandler),this.focus&&AJS.$(this.fieldSelector).focus().select(),e&&this.setSelection(e);var s=this.selectHandler;this.stayActivated?(t.bind("selected",s),t.bind("unselect",s)):(t.bind("selected",function(e,t){r(i),s(e,t)}),t.bind("unselect",function(e,t){r(i),s(e,t)}))},GH.SavedFilterPicker.prototype.setSelection=function(e){this.singleSelect.setSelection(new AJS.ItemDescriptor({value:e.id.toString(),label:e.name,html:AJS.escapeHTML(String(e.name)),savedFilter:e,selected:!0}))},GH.SavedFilterPicker.prototype.removeSingleSelect=function(e){e.hideSuggestions(),e.disable()},GH.SavedFilterPicker.prototype.getElement=function(){return this.singleSelect.$field};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-create-board', location = 'includes/js/lib/jquery/jquery.keygen.js' */
!function(e,t){e.KeyGenerator=function(){var e=["THE","A","AN","AS","AND","OF","OR"],n={},a=function(e){return e.join("").length},r=function(n){return t.grep(n,function(n,a){return t.inArray(n,e)===-1})},o=function(e){var n="";return t.each(e,function(e,t){n+=t.charAt(0)}),n},u=function(e){var t,n=!1;for(t=0;t<e.length;t++)if(i(e[t]))n=!0;else if(n)return e.substring(0,t+1);return e},i=function(e){return e&&1===e.length&&e.search("[AEIOUY]")!==-1};return n[199]="C",n[231]="c",n[252]="u",n[251]="u",n[250]="u",n[249]="u",n[233]="e",n[234]="e",n[235]="e",n[232]="e",n[226]="a",n[228]="a",n[224]="a",n[229]="a",n[225]="a",n[239]="i",n[238]="i",n[236]="i",n[237]="i",n[196]="A",n[197]="A",n[201]="E",n[230]="ae",n[198]="Ae",n[244]="o",n[246]="o",n[242]="o",n[243]="o",n[220]="U",n[255]="Y",n[214]="O",n[241]="n",n[209]="N",{generateKey:function(e,i){i=t.extend({},i);var c="number"==typeof i.desiredKeyLength?i.desiredKeyLength:4,h="number"==typeof i.maxKeyLength?i.maxKeyLength:1/0;if(e=t.trim(e),!e)return"";for(var s=[],g=0,f=e.length;g<f;g++){var l=n[e.charCodeAt(g)];s.push(l?l:e[g])}e=s.join("");var d=[];t.each(e.split(/\s+/),function(e,t){t&&(t=t.replace(/[^a-zA-Z]/g,""),t=t.toUpperCase(),t.length&&d.push(t))}),c&&a(d)>c&&(d=r(d));var m;if(0==d.length)m="";else if(1==d.length){var v=d[0],y=u(v);m=h<v.length||Math.abs(v.length-c)>=Math.abs(y.length-c)?y:v}else{var K=a(d),x=o(d);m=h<K||Math.abs(K-c)>=Math.abs(x.length-c)?x:d.join("")}return h&&m.length>h&&(m=m.substr(0,h)),m}}};var n=e.KeyGenerator();t.fn.generateFrom=function(e,a){var r={desiredKeyLength:4,maxKeyLength:10,maxNameLength:30,timeoutMS:100,validationCallback:function(){},errorCallback:function(){}},o=t(this).first(),e=e.first(),a=t.extend({},r,a);return function(){var r=function(){return o.data("autosuggest")!==!1},u=function(e){o.val()&&o.data("lastGeneratedValue")!==o.val()&&o.data("autosuggest",!1)},i=function(e){o.data("lastGeneratedValue",e),o.val(e)},c=function(){u(o.val()),f()},h=function(e){s(e,c)},s=function(e,n){var r,o=t(e.target);r=function(){g(e),n(),o.is(":visible")&&o.data("checkHook",setTimeout(r,a.timeoutMS))},o.data("checkHook")||o.data("checkHook",setTimeout(r,0))},g=function(e){var n=t(e.target);clearTimeout(n.data("checkHook")),n.removeData("checkHook")},f=function(){r()&&i(n.generateKey(e.val(),{desiredKeyLength:a.desiredKeyLength,maxKeyLength:a.maxKeyLength}))};e.attr("maxlength",a.maxNameLength),o.attr("maxlength",a.maxKeyLength),o.css("text-transform","uppercase"),document.activeElement&&document.activeElement===e[0]&&h({target:e[0]}),e.focus(h),e.blur(g)}(),this}}(window,jQuery);;
;
/* module-key = 'com.pyxis.greenhopper.jira:number-formatting', location = '/includes/js/rapid/NumberFormat.js' */
define("jira-agile/rapid/number-format",["underscore","jira-agile/rapid/util"],function(r,a){var e={};return e.groupingSeparator=",",e.decimalSeparator=".",e.format=function(i){if(r.isNumber(i)){i=a.roundToDecimalPlaces(i,2);var t=i<<0,n=i.toString().split(".")[1],o=function(r){return r.split("").reverse().join("")},u=o(o(t.toString()).replace(/(\d{3})(?=\d)/g,"$1"+e.groupingSeparator));return u+(n?e.decimalSeparator+n:"")}},e.formatExponential=function(a){if(r.isNumber(a)){var i=Math.abs(a).toFixed(0).length-1,t=a/Math.pow(10,i);return e.format(t)+"e"+e.format(i)}},e}),AJS.namespace("GH.NumberFormat",null,require("jira-agile/rapid/number-format"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:time-format-duration-units', location = '/includes/js/rapid/TimeFormatDurationUnits.js' */
define("jira-agile/rapid/time-format-duration-units",[],function(){var i={};return i.SECONDS="seconds",i.MILLISECONDS="millis",i}),AJS.namespace("GH.TimeFormatDurationUnits",null,require("jira-agile/rapid/time-format-duration-units"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:time-format-displays', location = '/includes/js/rapid/TimeFormatDisplays.js' */
define("jira-agile/rapid/time-format-displays",[],function(){var i={};return i.PRETTY="pretty",i.DAYS="days",i.HOURS="hours",i.MOST_SIGNIFICANT="most-significant",i}),AJS.namespace("GH.TimeFormatDisplays",null,require("jira-agile/rapid/time-format-displays"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:time-formatting', location = '/includes/js/rapid/TimeFormat.js' */
define("jira-agile/rapid/time-format",["jira/util/formatter","underscore","jira-agile/rapid/time-format-duration-units","jira-agile/rapid/time-format-displays"],function(t,r,e,o){"use strict";var a={};return a.timeTrackingConfigOpts={hoursPerDay:8,daysPerWeek:5,timeFormat:o.PRETTY,symbols:{week:"w",day:"d",hour:"h",minute:"m"}},a.normalDisplayOpts={hoursPerDay:24,daysPerWeek:7,timeFormat:o.PRETTY,symbols:{week:"w",day:"{0}d",hour:"{0}h",minute:"{0}m"}},a.formatMinuteDuration=function(t){return a.formatDuration(t?6e4*t:0)},a.formatShortMinuteDuration=function(t){return a.formatShortDuration(t?6e4*t:0)},a.formatDuration=function(r){r||(r=0);var e=Math.floor(r/864e5),o=r-864e5*e,a=Math.floor(o/36e5);o-=36e5*a;var i=Math.floor(o/6e4),n="";return e>0&&(n+=e+" ",n+=e>1?AJS.format("days",e):AJS.format("day",e)),a>0&&(n.length>0&&(n+=" "),n+=a+" ",n+=a>1?AJS.format("hours",a):AJS.format("hour",a)),(r>0||0===n.length)&&(n.length>0&&(n+=" "),n+=i+" ",n+=0===i||i>1?AJS.format("minutes",i):AJS.format("minute",i)),n},a.formatShortDurationForTimeTrackingConfiguration=function(t,o){return r.isUndefined(o)&&(o={durationUnit:e.SECONDS}),a._formatShortDuration(t,r.extend({},a.timeTrackingConfigOpts,o))},a.formatShortDuration=function(t){return a._formatShortDuration(t,r.extend({},a.normalDisplayOpts,{durationUnit:e.MILLISECONDS}))},a.formatSensibleShortDuration=function(t){var o=a._formatShortDuration(t,r.extend({},a.normalDisplayOpts,{durationUnit:e.MILLISECONDS,dropMinutesIfLongerThanADay:!0}));return 0===o.length&&(o=a.getZeroMinutesShortFormat()),o},a.getZeroMinutesShortFormat=function(){return t.format("{0}m",0)},a._formatShortDuration=function(t,i){if(t||(t=0),0===t)return"0";var n=a.normalDisplayOpts;i=r.isUndefined(i)?{}:i,i=r.extend({},n,i);var u=void 0,m=void 0,l=void 0,s=void 0,f=void 0,d=6e4,h=60*d,y=i.hoursPerDay*h,c=i.daysPerWeek*y;i.durationUnit===e.SECONDS&&(t*=1e3),u=Math.floor(t/c),f=t%c,m=Math.floor(f/y),f%=y,l=Math.floor(f/h),f%=h,s=Math.floor(f/d),i.dropMinutesIfLongerThanADay&&m>0&&(s=0);var S=[];i.timeFormat===o.PRETTY?S=[{val:u,fmt:i.symbols.week},{val:m,fmt:i.symbols.day},{val:l,fmt:i.symbols.hour},{val:s,fmt:i.symbols.minute}]:i.timeFormat===o.DAYS?(m+=u*i.daysPerWeek,l+=s/60,S=[{val:m,fmt:i.symbols.day},{val:l,fmt:i.symbols.hour}]):i.timeFormat===o.HOURS?(m+=u*i.daysPerWeek,l=m*i.hoursPerDay+l+s/60,S=[{val:l,fmt:i.symbols.hour}]):i.timeFormat===o.MOST_SIGNIFICANT&&(S=u>0?[{val:GH.Util.roundToDecimalPlaces(t/c,1),fmt:i.symbols.week}]:m>0?[{val:GH.Util.roundToDecimalPlaces(t/y,1),fmt:i.symbols.day}]:l>0?[{val:GH.Util.roundToDecimalPlaces(t/h,1),fmt:i.symbols.hour}]:[{val:s<1?"":GH.Util.roundToDecimalPlaces(t/d,1),fmt:i.symbols.minute}]);var D=function(t){var e="";return r.each(t,function(t){if(t.val>0){e.length>0&&(e+=" ");var r=t.fmt;r.indexOf("{0}")<0&&(r="{0}"+r);var o=GH.NumberFormat.format(t.val);e+=AJS.format(r,o)}}),!e&&t.length&&(e=AJS.format(r.last(t).fmt,"< 1")),e};return D(S)},a}),AJS.namespace("GH.TimeFormat",null,require("jira-agile/rapid/time-format"));;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-expander', location = 'node_modules/@atlassian/aui/src/js/aui/expander.js' */
("undefined"===typeof window?global:window).__bdcd8cba16e83e973cb8146ddb843c38=function(){"use strict";var c=__02fa0d2334b5d2f9701871403ba9d89a,d=c&&c.__esModule?c:{"default":c},e=(0,d.default)(document),f=function(a){var b={};b.$trigger=(0,d.default)(a.currentTarget);b.$content=e.find("#"+b.$trigger.attr("aria-controls"));b.triggerIsParent=0!==b.$content.parent().filter(b.$trigger).length;b.$shortContent=b.triggerIsParent?b.$trigger.find(".aui-expander-short-content"):null;b.height=b.$content.css("min-height");
b.isCollapsible=!1!==b.$trigger.data("collapsible");b.replaceText=b.$trigger.attr("data-replace-text");b.replaceSelector=b.$trigger.data("replace-selector");return b},g=function(a){if(a.replaceText){var b=a.replaceSelector?a.$trigger.find(a.replaceSelector):a.$trigger;a.$trigger.attr("data-replace-text",b.text());b.text(a.replaceText)}};e.on({"aui-expander-invoke":function(a){var a=(0,d.default)(a.currentTarget),b=e.find("#"+a.attr("aria-controls")),c=!1!==a.data("collapsible");"true"===b.attr("aria-expanded")&&
c?a.trigger("aui-expander-collapse"):a.trigger("aui-expander-expand")},"aui-expander-expand":function(a){a=f(a);"true"!==a.$content.attr("aria-expanded")&&(a.$content.attr("aria-expanded","true"),a.$trigger.attr("aria-expanded","true"),0<a.$content.outerHeight()&&a.$content.attr("aria-hidden","false"),g(a),a.triggerIsParent&&a.$shortContent.hide(),a.$trigger.trigger("aui-expander-expanded"))},"aui-expander-collapse":function(a){a=f(a);"true"===a.$content.attr("aria-expanded")&&(g(a),a.$content.attr("aria-expanded",
"false"),a.$trigger.attr("aria-expanded","false"),a.triggerIsParent&&a.$shortContent.show(),0===a.$content.outerHeight()&&a.$content.attr("aria-hidden","true"),a.$trigger.trigger("aui-expander-collapsed"))},"click.aui-expander":function(a){(0,d.default)(a.currentTarget).trigger("aui-expander-invoke",a.currentTarget)}},".aui-expander-trigger");return{}}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:ajs-raf', location = 'node_modules/@atlassian/aui/src/js-vendor/raf/raf.js' */
("undefined"===typeof window?global:window).__5ca5c5ddaacf5652a879cfec07ca5db7=function(){for(var a=window,f=0,d=["webkit","moz"],b=a.requestAnimationFrame,c=a.cancelAnimationFrame,e=d.length;0<=--e&&!b;)b=a[d[e]+"RequestAnimationFrame"],c=a[d[e]+"CancelAnimationFrame"];if(!b||!c)b=function(a){var b=Date.now(),c=Math.max(f+16,b);return setTimeout(function(){a(f=c)},c-b)},c=clearTimeout;a.requestAnimationFrame=b;a.cancelAnimationFrame=c;return{}}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-internal-is-input', location = 'node_modules/@atlassian/aui/src/js/aui/internal/is-input.js' */
("undefined"===typeof window?global:window).__bd483f5e8ad6ed1962e7a119675a0b66=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=function(a){return"value"in a||a.isContentEditable};return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-vendor-raf-raf', location = 'node_modules/@atlassian/aui/src/js-vendor/raf/raf.js' */
("undefined"===typeof window?global:window).__5ca5c5ddaacf5652a879cfec07ca5db7=function(){for(var a=window,f=0,d=["webkit","moz"],b=a.requestAnimationFrame,c=a.cancelAnimationFrame,e=d.length;0<=--e&&!b;)b=a[d[e]+"RequestAnimationFrame"],c=a[d[e]+"CancelAnimationFrame"];if(!b||!c)b=function(a){var b=Date.now(),c=Math.max(f+16,b);return setTimeout(function(){a(f=c)},c-b)},c=clearTimeout;a.requestAnimationFrame=b;a.cancelAnimationFrame=c;return{}}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-internal-has-touch', location = 'node_modules/@atlassian/aui/src/js/aui/internal/has-touch.js' */
("undefined"===typeof window?global:window).__2d5f094064a34a526c3e143503c89b91=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});var b=window.DocumentTouch;a.default="ontouchstart"in window||b&&document instanceof b;return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-internal-mediaQuery', location = 'node_modules/@atlassian/aui/src/js/aui/internal/mediaQuery.js' */
("undefined"===typeof window?global:window).__233c61f178d7afeb305a2369d3ca4c77=function(){var a={};Object.defineProperty(a,"__esModule",{value:!0});a.default=function(a){if(window.matchMedia)return window.matchMedia(a).matches;var b=document.createElement("style");b.type="text/css";b.id="testMedia";b.innerText="@media "+a+" { #testMedia { width: 1px; } }";document.head.appendChild(b);a="1px"===window.getComputedStyle(b,null).width;b.parentNode.removeChild(b);return a};return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-sidebar', location = 'node_modules/@atlassian/aui/src/js/aui/sidebar.js' */
("undefined"===typeof window?global:window).__35ff1875ff47a73afe1c7cfa63c3b7f7=function(){function h(a){return a&&a.__esModule?a:{"default":a}}function c(a){this.$el=(0,e.default)(a);if(this.$el.length){this.$body=(0,e.default)("body");this.$wrapper=this.$el.children(".aui-sidebar-wrapper");this.$body.addClass("aui-page-sidebar");this._previousOffsetTop=this._previousViewportWidth=this._previousViewportHeight=this._previousScrollTop=null;this.submenus=new g;var b=this;if((0,e.default)(".aui-sidebar").length){b.$el.on("mouseenter mouseleave click focus",
b.collapsedTriggersSelector,function(a){a=(0,e.default)(a.target);s(b,a)});if(z.default&&(0,A.default)("only screen and (max-device-width:1024px)"))(0,e.default)("body").addClass("aui-page-sidebar-touch");var d=null,c=function(){null===d&&(d=requestAnimationFrame(function(){b.reflow();d=null}))};(0,e.default)(window).on("scroll resize",c);b.reflow();if(b.isAnimated())b.$el.on("transitionend webkitTransitionEnd",function(){b.$el.trigger(e.default.Event(l+(b.isCollapsed()?"collapse-end":"expand-end")))});
b.$el.on("click",".aui-sidebar-toggle",function(a){a.preventDefault();b.toggle()});(0,e.default)(".aui-page-panel").click(function(){!b.isCollapsed()&&b.isViewportNarrow()&&b.collapse()});var t=function(a){a.which===o.default.LEFT_SQUARE_BRACKET&&(!a.shiftKey&&!a.ctrlKey&&!a.metaKey&&!(0,B.default)(a.target))&&b.toggle()};(0,e.default)(document).on("keypress",t);b._remove=function(){this._removeAllTooltips();(0,e.default)(this.inlineDialogSelector).remove();this.$el.off();this.$el.remove();(0,e.default)(document).off("keypress",
t);(0,e.default)(window).off("scroll resize",c)};b.$el.on("touchend",function(a){b.isCollapsed()&&(b.expand(),a.preventDefault())});b.$el.on("mouseenter focus",b.collapsedTriggersSelector,function(){if(b.isCollapsed()){var a=(0,e.default)(this);0!==m(a).length||u(a)}});b.$el.on("click blur mouseleave",b.collapsedTriggersSelector,function(){b.isCollapsed()&&v((0,e.default)(this))});b.$el.on("mouseenter focus",b.toggleSelector,function(){var a=(0,e.default)(this);b.isCollapsed()?a.data("tooltip","Expand sidebar ( [ )"):
a.data("tooltip","Collapse sidebar ( [ )");u(a)});b.$el.on("click blur mouseleave",b.toggleSelector,function(){v((0,e.default)(this))});b.$el.on("keydown",b.collapsedTriggersSelector,function(a){if(b.isCollapsed()){var d=a.target,c=w(d);if(c){var f=(0,e.default)(c);a.keyCode===o.default.TAB&&(!a.shiftKey&&!a.altKey)&&c.open&&(a.preventDefault(),f.attr("persistent",""),f.find(":aui-tabbable").first().focus(),setTimeout(function(){f.removeAttr("persistent")},100),f.on("keydown",
function(a){if(a.keyCode===o.default.TAB&&a.shiftKey&&a.target===f.find(":aui-tabbable")[0]||a.keyCode===o.default.TAB&&(!a.shiftKey&&!a.altKey)&&a.target===f.find(":aui-tabbable").last()[0])d.focus(),(0,e.default)(this).off("keydown"),q()}))}}})}var f=this;(0,e.default)(f.collapsedTriggersSelector).each(function(){var a=(0,e.default)(this);s(f,a)})}}function x(a){return e.default.map(a.split(" "),function(a){return l+a}).join(" ")}function g(){this.inlineDialog=null}function m(a){return a.is("a")?
a.next(".aui-nav"):a.children(".aui-nav, hr")}function w(a){a=a.getAttribute("aria-controls");return document.getElementById(a)}function q(){var a=document.querySelectorAll(c.prototype.inlineDialogSelector);Array.prototype.forEach.call(a,function(a){a.open=!1})}function s(a,b){if(!b.data("_aui-sidebar-submenu-constructed")&&(b.data("_aui-sidebar-submenu-constructed",!0),0!==m(b).length)){var d=document.createElement("aui-inline-dialog"),g=(0,C.default)("sidebar-submenu");b.attr("aria-controls",g);
b.attr("data-aui-trigger","");y.default.init(b);d.setAttribute("id",g);d.setAttribute("alignment","right top");d.setAttribute("aria-hidden","true");a.isCollapsed()&&d.setAttribute("responds-to","hover");(0,e.default)(d).addClass(c.prototype.inlineDialogClass);document.body.appendChild(d);y.default.init(d);d.addEventListener("aui-layer-show",function(c){if(a.isCollapsed()){b.addClass("active");d.innerHTML=D;var f=b.is("a")?b.text():b.children(".aui-nav-heading").text(),c=(0,e.default)(d).find(".aui-navgroup-inner");
c.children(".aui-nav-heading").attr("title",f).children("strong").text(f);f=m(b);f=(0,E.default)(f);f.hasClass("aui-expander-content")&&(f.find(".aui-expander-cutoff").remove(),f.removeClass("aui-expander-content"));f.appendTo(c)}else c.preventDefault()});d.addEventListener("aui-layer-hide",function(){b.removeClass("active")});return d}}function u(a){a.tipsy(F).tipsy("show");(a=a.data("tipsy")&&a.data("tipsy").$tip)&&a.css({opacity:""}).addClass("tooltip-shown")}function v(a){var b=a.data("tipsy")&&
a.data("tipsy").$tip;if(b){var d=b.css("transition-duration");d&&(d=0<=d.indexOf("ms")?parseInt(d.substring(0,d.length-2),10):1E3*parseInt(d.substring(0,d.length-1),10),setTimeout(function(){a.tipsy("hide")},d));b.removeClass("tooltip-shown")}}var p={};"use strict";Object.defineProperty(p,"__esModule",{value:!0});var e=h(__02fa0d2334b5d2f9701871403ba9d89a);__cc64a0d7c308ad5954e00f06c2bcc6ed;__5ca5c5ddaacf5652a879cfec07ca5db7;__ff21a71b857b101095156bf4ff8b27ac;var E=h(__8a777f37cbfa8f7456cf8bf6fd300c3f),
k;var i=__9ea35e3451360b72ebe8cb8006239936;if(i&&i.__esModule)k=i;else{var n={};if(null!=i)for(k in i)Object.prototype.hasOwnProperty.call(i,k)&&(n[k]=i[k]);n.default=i;k=n}var i=h(__fb27ffae84b96c14bf339e62cefcf116),z=h(__2d5f094064a34a526c3e143503c89b91),B=h(__bd483f5e8ad6ed1962e7a119675a0b66),o=h(__d92d89c196b4703777e79d25a9f94b7f),A=h(__233c61f178d7afeb305a2369d3ca4c77),y=h(__da172e72afc5a7088e3034df761062a6),C=h(__327dbe0b6617f3273ea9b3fc2d1dda83),n=h(__ecaadce486e7be7002d8453fc51f9873),G="undefined"!==
typeof document.documentElement.style.transition||"undefined"!==typeof document.documentElement.style.webkitTransition,l="_aui-internal-sidebar-";c.prototype.on=function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1),a=x(a);this.$el.on.apply(this.$el,[a].concat(b));return this};c.prototype.off=function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1),a=x(a);this.$el.off.apply(this.$el,[a].concat(b));return this};c.prototype.setHeight=function(a,b,d){a=Math.max(0,d-a);
this.$wrapper.height(b-a);return this};c.prototype.setPosition=function(a){a=a||window.pageYOffset;this.$wrapper.toggleClass("aui-is-docked",a>this.$el.offset().top);return this};c.prototype.setCollapsedState=function(a){var b={collapsed:{},expanded:{}};b.collapsed.narrow={narrow:e.default.noop,wide:function(b){b._expand(a,!0)}};b.collapsed.wide={narrow:e.default.noop,wide:e.default.noop};b.expanded.narrow={narrow:e.default.noop,wide:function(a){a.$body.removeClass("aui-sidebar-collapsed");a.$el.removeClass("aui-sidebar-fly-out")}};
b.expanded.wide={narrow:function(a){a._collapse(!0)},wide:e.default.noop};var d=this.isCollapsed()?"collapsed":"expanded",c=this.isViewportNarrow(this._previousViewportWidth)?"narrow":"wide",g=this.isViewportNarrow(a)?"narrow":"wide";b[d][c][g](this);return this};c.prototype._collapse=function(a){if(this.isCollapsed())return this;var b=e.default.Event(l+"collapse-start",{isResponsive:a});this.$el.trigger(b);if(b.isDefaultPrevented())return this;this.$body.addClass("aui-sidebar-collapsed");this.$el.attr("aria-expanded",
"false");this.$el.removeClass("aui-sidebar-fly-out");this.$el.find(this.submenuTriggersSelector).attr("tabindex",0);(0,e.default)(this.inlineDialogSelector).attr("responds-to","hover");this.isAnimated()||this.$el.trigger(e.default.Event(l+"collapse-end",{isResponsive:a}));return this};c.prototype.collapse=function(){return this._collapse(!1)};c.prototype._expand=function(a,b){var d=e.default.Event(l+"expand-start",{isResponsive:b});this.$el.trigger(d);if(d.isDefaultPrevented())return this;d=this.isViewportNarrow(a);
this.$el.attr("aria-expanded","true");this.$body.toggleClass("aui-sidebar-collapsed",d);this.$el.toggleClass("aui-sidebar-fly-out",d);this.$el.find(this.submenuTriggersSelector).removeAttr("tabindex");(0,e.default)(this.inlineDialogSelector).removeAttr("responds-to");this.isAnimated()||this.$el.trigger(e.default.Event(l+"expand-end",{isResponsive:b}));return this};c.prototype.expand=function(){this.isCollapsed()&&this._expand(this._previousViewportWidth,!1);return this};c.prototype.isAnimated=function(){return G&&
this.$el.hasClass("aui-is-animated")};c.prototype.isCollapsed=function(){return"false"===this.$el.attr("aria-expanded")};c.prototype.isViewportNarrow=function(a){a=void 0===a?this._previousViewportWidth:a;return 1240>a};c.prototype._removeAllTooltips=function(){(0,e.default)(this.tooltipSelector).remove()};c.prototype.responsiveReflow=function(a,b){if(a){if(!this.isCollapsed()&&this.isViewportNarrow(b)){var d=this.isAnimated();d&&this.$el.removeClass("aui-is-animated");this.collapse();d&&(this.$el[0].offsetHeight,
this.$el.addClass("aui-is-animated"))}}else b!==this._previousViewportWidth&&this.setCollapsedState(b)};c.prototype.reflow=function(a,b,d,c){var a=void 0===a?window.pageYOffset:a,b=void 0===b?document.documentElement.clientHeight:b,c=void 0===c?document.documentElement.scrollHeight:c,d=void 0===d?window.innerWidth:d,e=this.$el.offset().top,f=null===this._previousViewportWidth;if(!(a===this._previousScrollTop&&b===this._previousViewportHeight&&e===this._previousOffsetTop)){this.isCollapsed()&&(!f&&
a!==this._previousScrollTop)&&(q(),this._removeAllTooltips());var g=this.$body.hasClass("aui-page-sidebar-touch"),c=a!==this._previousScrollTop&&(0>a||a+b>c);if(!g&&(f||!c))this.setHeight(a,b,e),this.setPosition(a)}"false"!==this.$el.attr("data-aui-responsive")?this.responsiveReflow(f,d):(f=!this.isCollapsed()&&this.isViewportNarrow(d),this.$el.toggleClass("aui-sidebar-fly-out",f));this._previousScrollTop=a;this._previousViewportHeight=b;this._previousViewportWidth=d;this._previousOffsetTop=e;return this};
c.prototype.toggle=function(){this.isCollapsed()?(this.expand(),this._removeAllTooltips()):this.collapse();return this};c.prototype.submenuTriggersSelector=".aui-sidebar-group:not(.aui-sidebar-group-tier-one)";c.prototype.collapsedTriggersSelector=[c.prototype.submenuTriggersSelector,".aui-sidebar-group.aui-sidebar-group-tier-one > .aui-nav > li > a",".aui-sidebar-footer > .aui-sidebar-settings-button"].join(", ");c.prototype.toggleSelector=".aui-sidebar-footer > .aui-sidebar-toggle";c.prototype.tooltipSelector=
".aui-sidebar-section-tooltip";c.prototype.inlineDialogClass="aui-sidebar-submenu-dialog";c.prototype.inlineDialogSelector="."+c.prototype.inlineDialogClass;g.prototype.submenu=function(a){j();return m(a)};g.prototype.hasSubmenu=function(a){j();return 0!==m(a).length};g.prototype.submenuHeadingHeight=function(){j();return 34};g.prototype.isShowing=function(){j();return c.prototype.isSubmenuVisible()};g.prototype.show=function(a,b){j();w(b).open=!0};g.prototype.hide=function(){j();q()};g.prototype.inlineDialogShowHandler=
function(){j()};g.prototype.inlineDialogHideHandler=function(){j()};g.prototype.moveSubmenuToInlineDialog=function(){j()};g.prototype.restoreSubmenu=function(){j()};c.prototype.getVisibleSubmenus=function(){return Array.prototype.filter.call(document.querySelectorAll(c.prototype.inlineDialogSelector),function(a){return a.open})};c.prototype.isSubmenuVisible=function(){return 0<this.getVisibleSubmenus().length};var D='<div class="aui-inline-dialog-contents"><div class="aui-sidebar-submenu" ><div class="aui-navgroup aui-navgroup-vertical"><div class="aui-navgroup-inner"><div class="aui-nav-heading"><strong></strong></div></div></div></div></div>',
F={trigger:"manual",gravity:"w",className:"aui-sidebar-section-tooltip",title:function(){var a=(0,e.default)(this);return a.is("a")?a.attr("title")||a.find(".aui-nav-item-label").text()||a.data("tooltip"):a.children(".aui-nav").attr("title")||a.children(".aui-nav-heading").text()}},r=(0,n.default)("sidebar",c);(0,e.default)(function(){r(".aui-sidebar")});var j=k.getMessageLogger("Sidebar.submenus",{removeInVersion:"8.0",sinceVersion:"5.8"});(0,i.default)("sidebar",r);p.default=r;return p=p["default"]}.call(this);;
;
/* module-key = 'jira.webresources:change-project-type-dialog', location = '/includes/jira/dialog/changeProjectTypeDialog.soy' */
// This file was automatically generated from changeProjectTypeDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.project.ChangeType.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.project == 'undefined') { JIRA.Templates.project = {}; }
if (typeof JIRA.Templates.project.ChangeType == 'undefined') { JIRA.Templates.project.ChangeType = {}; }


JIRA.Templates.project.ChangeType.changeProjectTypeDialog = function(opt_data, opt_ignored) {
  return '<section role="dialog" id="change-project-type-dialog-' + soy.$$escapeHtml(opt_data.projectId) + '" class="aui-layer aui-dialog2 aui-dialog2-medium" aria-hidden="true"><header class="aui-dialog2-header"><h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml("Change project type") + '</h2></header><div class="aui-dialog2-content"></div><footer class="aui-dialog2-footer"><div class="aui-dialog2-footer-actions form-footer"><div class="icon throbber"></div><button class="aui-button aui-button-primary dialog-change-button hidden">' + soy.$$escapeHtml("Change") + '</button><button class="aui-button aui-button-link dialog-close-button">' + soy.$$escapeHtml("Cancel") + '</button></div></footer></section>';
};
if (goog.DEBUG) {
  JIRA.Templates.project.ChangeType.changeProjectTypeDialog.soyTemplateName = 'JIRA.Templates.project.ChangeType.changeProjectTypeDialog';
}


JIRA.Templates.project.ChangeType.changeProjectTypeForm = function(opt_data, opt_ignored) {
  var output = '<form class="aui change-project-type-form"><div class="form-body"><div class="aui-group project-type-change-group"><div class="aui-item">' + JIRA.Templates.project.ChangeType.projectAvatar(opt_data) + '</div><div class="aui-item project-type-select-group">' + JIRA.Templates.project.ChangeType.projectTypeDropdown({projectTypeKey: opt_data.project.projectTypeKey, projectTypes: opt_data.projectTypes}) + '</div></div></div></form><p>';
  var helpLinkAnchor__soy21 = '<a href=' + soy.$$escapeHtml(opt_data.helpLink) + ' target="_blank">';
  output += soy.$$filterNoAutoescape(AJS.format("If you change the project type, you\x27\x27ll also change what your users can see and do with the project. {0}Check the differences here{1}",helpLinkAnchor__soy21,'</a>')) + '</p>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.project.ChangeType.changeProjectTypeForm.soyTemplateName = 'JIRA.Templates.project.ChangeType.changeProjectTypeForm';
}


JIRA.Templates.project.ChangeType.projectTypeDropdown = function(opt_data, opt_ignored) {
  var output = '<select class="project-type-select select" name="project-type">';
  var projectTypeList30 = opt_data.projectTypes;
  var projectTypeListLen30 = projectTypeList30.length;
  for (var projectTypeIndex30 = 0; projectTypeIndex30 < projectTypeListLen30; projectTypeIndex30++) {
    var projectTypeData30 = projectTypeList30[projectTypeIndex30];
    output += '<option class="imagebacked" data-icon="data:image/svg+xml;base64, ' + soy.$$escapeHtml(projectTypeData30.icon) + '" value="' + soy.$$escapeHtml(projectTypeData30.key) + '" ' + ((projectTypeData30.key == opt_data.projectTypeKey) ? ' selected ' : '') + '>' + soy.$$escapeHtml(projectTypeData30.formattedKey) + '</option>';
  }
  output += '</select>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.project.ChangeType.projectTypeDropdown.soyTemplateName = 'JIRA.Templates.project.ChangeType.projectTypeDropdown';
}


JIRA.Templates.project.ChangeType.updateTargetElement = function(opt_data, opt_ignored) {
  return '<img src="data:image/svg+xml;base64,' + soy.$$escapeHtml(opt_data.icon) + '" class="project-type-icon" /><span>' + soy.$$escapeHtml(opt_data.formattedKey) + '</span>';
};
if (goog.DEBUG) {
  JIRA.Templates.project.ChangeType.updateTargetElement.soyTemplateName = 'JIRA.Templates.project.ChangeType.updateTargetElement';
}


JIRA.Templates.project.ChangeType.projectAvatar = function(opt_data, opt_ignored) {
  return '<div class="project-avatar-header"><span class="aui-avatar aui-avatar-large aui-avatar-project"><span class="aui-avatar-inner"><img src="' + soy.$$escapeHtml(opt_data.project.avatarUrls['48x48']) + '" alt="' + soy.$$escapeHtml(opt_data.project.name) + '"></span></span><div class="project-header" title="' + soy.$$escapeHtml(opt_data.project.name) + '">' + soy.$$escapeHtml(opt_data.project.name) + '</div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.project.ChangeType.projectAvatar.soyTemplateName = 'JIRA.Templates.project.ChangeType.projectAvatar';
}


JIRA.Templates.project.ChangeType.dialogSpinner = function(opt_data, opt_ignored) {
  return '<div class="dialog-spinner"></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.project.ChangeType.dialogSpinner.soyTemplateName = 'JIRA.Templates.project.ChangeType.dialogSpinner';
}


JIRA.Templates.project.ChangeType.successMsg = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml(AJS.format("You have just changed {0} to a {1} project type.",opt_data.projectName,opt_data.projectTypeName));
};
if (goog.DEBUG) {
  JIRA.Templates.project.ChangeType.successMsg.soyTemplateName = 'JIRA.Templates.project.ChangeType.successMsg';
}
;
;
/* module-key = 'jira.webresources:change-project-type-dialog', location = '/includes/jira/dialog/changeProjectTypeDialog.js' */
define("jira/project/admin/change-project-type-dialog",["jira/util/formatter","jquery","underscore","jira/analytics","jira/message","jira/ajs/select/single-select","wrm/context-path"],function(e,t,o,n,a,r,c){"use strict";function p(e){return t.ajax({url:c()+"/rest/internal/2/projects/"+e+"/changetypedata",dataType:"json",contentType:"application/json",type:"GET"})}function i(r){var p=t(".project-type-select",r.dialogBody),i=p.val()[0],s=o.findWhere(r.projectTypes,{key:i});t(".dialog-change-button",r.dialogBody).attr("disabled","disabled"),t(t.ajax({url:c()+"/rest/api/2/project/"+r.projectId+"/type/"+i,dataType:"json",contentType:"application/json",type:"PUT"}).done(function(){r.changeProjectTypeDialog.hide(),r.onProjectTypeChanged&&r.onProjectTypeChanged(r.trigger,s),a.showSuccessMsg(JIRA.Templates.project.ChangeType.successMsg({projectName:r.projectName,projectTypeName:s.formattedKey})),n.send({name:"administration.projecttype.change",properties:{projectId:r.projectId,sourceProjectType:d(r.sourceProjectType),destinationProjectType:d(i)}})}).fail(function(){t(".aui-dialog2-content",r.dialogBody).prepend(aui.message.error({content:e.format("We haven\'\'t been able to complete the project conversion. You could refresh the page and try again. If this doesn\'\'t work, contact {0}Support{1}.",'<a href="https://support.atlassian.com/">',"</a>")}))})).throbber({target:t(".throbber",r.dialogBody)})}function d(e){return e&&e.replace("_","")}function s(e,t,o){e==t?o.find(".dialog-change-button").attr("disabled","disabled"):o.find(".dialog-change-button").removeAttr("disabled")}function l(o){var n=t(JIRA.Templates.project.ChangeType.changeProjectTypeDialog({projectId:o.projectId})),a=AJS.dialog2(n);a.on("show",function(){t(".aui-dialog2-content",n).html(JIRA.Templates.project.ChangeType.dialogSpinner()),t(".dialog-spinner",n).spin(),t(".dialog-change-button",n).unbind("click").addClass("hidden")}),t(o.trigger).click(function(c){c.preventDefault(),a.show(),p(o.projectId).done(function(e){n.find(".aui-dialog2-content").html(JIRA.Templates.project.ChangeType.changeProjectTypeForm(e)),new r({element:t(".project-type-select",n),revertOnInvalid:!0,width:165}),n.find(".dialog-change-button").removeClass("hidden"),s(t(".project-type-select",n).val(),e.project.projectTypeKey,n);var c={dialogBody:n,changeProjectTypeDialog:a,projectName:e.project.name,projectTypes:e.projectTypes,trigger:o.trigger,projectId:o.projectId,onProjectTypeChanged:o.onProjectTypeChanged,sourceProjectType:e.project.projectTypeKey};t(".dialog-change-button",n).click(function(e){e.preventDefault(),i(c)}),t(".change-project-type-form",n).on("submit",function(e){e.preventDefault(),i(c)}),t(".project-type-select",n).on("change",function(o){s(t(this).val(),e.project.projectTypeKey,n)})}).fail(function(){t(".aui-dialog2-content",n).html(aui.message.error({content:e.format("We were unable to load data required for the project type change. You could refresh the page and try again. If this doesn\'\'t work, contact {0}Support{1}.",'<a href="https://support.atlassian.com/">',"</a>")}))})}),t(".dialog-close-button",n).click(function(e){e.preventDefault(),a.hide()})}return function(e){l(e)}});;
;
/* module-key = 'jira.webresources:project-type-warning', location = '/static/projecttypes/warning/dialog/project-type-warning-dialog.js' */
define("jira/project/types/warning/dialog",["require"],function(e){"use strict";function t(t,a,r){var o=n(".project-type-warning-icon",r);i(o,"uninstalled-warning-dialog",function(i,r,o){return i.html(JIRA.Project.Types.Warning.dialog({title:t.title,firstParagraph:t.firstParagraph,secondParagraph:t.secondParagraph,callToActionText:t.callToActionText})),e("jira/project/admin/change-project-type-dialog")({trigger:n(".warning-dialog-change-project-type"),projectId:t.projectId,onProjectTypeChanged:a}),o(),!1},{width:375,gravity:"w"})}var n=e("jquery"),a=e("wrm/data"),i=e("aui/inline-dialog"),r=a.claim("project.type.warning.dialogs.data");return{init:function(e){e=e||{},e.sectionElement=e.sectionElement||n("body"),t(r,e.onProjectTypeChanged,e.sectionElement)}}});;
;
/* module-key = 'jira.webresources:project-type-warning', location = '/static/projecttypes/warning/dialog/templates/templates.soy' */
// This file was automatically generated from templates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Project.Types.Warning.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Project == 'undefined') { JIRA.Project = {}; }
if (typeof JIRA.Project.Types == 'undefined') { JIRA.Project.Types = {}; }
if (typeof JIRA.Project.Types.Warning == 'undefined') { JIRA.Project.Types.Warning = {}; }


JIRA.Project.Types.Warning.dialog = function(opt_data, opt_ignored) {
  return '<div class="project-type-warning-dialog"><p class="header"><span>' + soy.$$escapeHtml(opt_data.title) + '</span></p><p class="type-not-accessible-message">' + soy.$$escapeHtml(opt_data.firstParagraph) + '</p><p class="available-functionality-message">' + soy.$$escapeHtml(opt_data.secondParagraph) + '</p><div class="actions"><a class="warning-dialog-change-project-type" href="#">' + soy.$$escapeHtml(opt_data.callToActionText) + '</a></div></div>';
};
if (goog.DEBUG) {
  JIRA.Project.Types.Warning.dialog.soyTemplateName = 'JIRA.Project.Types.Warning.dialog';
}
;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-component', location = '/sidebar/component/navigation-item.js' */
define("jira/projects/sidebar/component/navigation-item",["jira/util/browser","jira/projects/libs/marionette"],function(a,b){return b.CompositeView.extend({ui:{link:"a.aui-nav-item"},events:{'simpleClick @ui.link:not([target="_blank"])':function(c){c.preventDefault();this.navigate()}},initialize:function(){this.id=this.$el.find(">a").attr("data-link-id");this.bindUIElements()},onDestroy:function(){this.unbind()},getElement:function(){return this.el},navigate:function(){if(!this.select()){return}var d=this.triggerPreventable("before:navigate");if(d.isPrevented){return false}var c=this.ui.link.attr("href");if(c){a.reloadViaWindowLocation(c)}return true},select:function(){var c=this.triggerPreventable("before:select");if(c.isPrevented){return false}this.$el.addClass("aui-nav-selected");this.trigger("select",c);return true},deselect:function(){if(!this.isSelected()){return true}var c=this.triggerPreventable("before:deselect");if(c.isPrevented){return false}this.$el.removeClass("aui-nav-selected");this.$el.find("a").blur();this.trigger("deselect",c);return true},isSelected:function(){return this.$el.hasClass("aui-nav-selected")},removeBadge:function(){this.$el.find(".aui-badge").remove()},getId:function(){return this.id},getSelectedNavigationItem:function(){if(this.isSelected()){return this}},hasASelectedItem:function(){return this.isSelected()}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-component', location = '/sidebar/component/navigation-group.js' */
define("jira/projects/sidebar/component/navigation-group",["jira/projects/sidebar/component/navigation-group-factory","jira/projects/libs/marionette","jira/util/logger"],function(b,c,a){return c.CompositeView.extend({childEvents:{"before:select":function(d,f){this.retriggerPreventable("before:select",f);if(f.isPrevented){return}var e=this.deselect();if(!e){f.preventDefault()}},select:function(e,d){this.trigger("select",d)},"before:deselect":function(d,e){this.retriggerPreventable("before:deselect",e)},deselect:function(e,d){this.trigger("deselect",d)},"before:navigate":function(d,e){this.retriggerPreventable("before:navigate",e)},"before:navigate:prevented":function(d,e){this.trigger("before:navigate:prevented",e)}},initialize:function(){this.id=this.$el.attr("data-id");this.$(">ul>li").each(function(e,d){var f=b.build(d);var g=!!this.getItem(f.id);if(g){a.warn("Duplicated IDs detected. There are more than one NavigationItem with id data-link-id='"+f.id+"'")}this.proxyChildEvents(f);this.children.add(f,f.id)}.bind(this))},onDestroy:function(){this.unbind()},getElement:function(){return this.el},deselect:function(){var e=this.triggerPreventable("before:deselect");if(e.isPrevented){return false}var d=true;this.children.each(function(f){d=f.deselect()&&d});return d},getItem:function(d){return this.children.findByCustom(d)},getItemAt:function(d){return this.children.findByIndex(d)},getSelectedNavigationItem:function(){var d=this.children.find(function(e){return e.hasASelectedItem()});if(d){return d.getSelectedNavigationItem()}},hasASelectedItem:function(){return this.children.any(function(d){return d.hasASelectedItem()})}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-component', location = '/sidebar/component/navigation-subgroup.js' */
define("jira/projects/sidebar/component/navigation-subgroup",["jira/projects/sidebar/component/navigation-group","underscore"],function(b,a){return b.extend({childEvents:{"before:select":function(c,d){b.prototype.childEvents["before:select"].apply(this,arguments);if(!d.isPrevented){this.expand()}}},initialize:function(){this.childEvents=a.extend({},b.prototype.childEvents,this.childEvents);b.prototype.initialize.apply(this,arguments);this.id=this.$el.find(">a[data-link-id]").attr("data-link-id")},expand:function(){this.$el.attr("aria-expanded","true")},collapse:function(){this.$el.attr("aria-expanded","false")},isExpanded:function(){return this.$el.attr("aria-expanded")==="true"},isSelected:function(){return this.$el.hasClass("aui-nav-selected")},getId:function(){return this.id},getSelectedNavigationItem:function(){if(this.isSelected()){return this}var c=this.children.find(function(d){return d.hasASelectedItem()});if(c){return c.getSelectedNavigationItem()}},hasASelectedItem:function(){if(this.isSelected()){return true}return this.children.any(function(c){return c.hasASelectedItem()})}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-component', location = '/sidebar/component/navigation-group-factory.js' */
define("jira/projects/sidebar/component/navigation-group-factory",["exports","jira/projects/sidebar/component/navigation-item","jira/projects/sidebar/component/navigation-subgroup","jquery"],function(a,e,d,c){a.build=function b(g){var f;if(c(g).find("ul").length){f=new d({el:g})}else{f=new e({el:g})}return f}});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-component', location = '/sidebar/component/component.js' */
define("jira/projects/sidebar/component",["jira/projects/sidebar/component/navigation-group","jira/projects/libs/marionette","jira/util/logger","wrm/data","jquery","underscore"],function(e,g,d,a,f,c){var b=Boolean(a.claim("is-global-sidebar"));return g.CompositeView.extend({childEvents:{"before:select":function(h,i){if(!this.hasASelectedItem()){i.isInitial=true}this.retriggerPreventable("before:select",i);if(!i.isPrevented){this.deselectAllGroups()}},select:function(i,h){this.trigger("select",h)},"before:deselect":function(h,i){this.retriggerPreventable("before:deselect",i)},deselect:function(i,h){this.trigger("deselect",h)},"before:navigate":function(h,i){this.retriggerPreventable("before:navigate",i)},"before:navigate:prevented":function(h,i){this.trigger("before:navigate:prevented",i)}},initialize:function(){this.render({force:true})},render:function(j){j=c.defaults({},j,{force:false});var i="el" in j;var n=i||j.force===true;var h=this.children.length>0;if(!n){return this}var m=this.triggerPreventable("before:render");if(m.isPrevented){return this}if(h){var l=this.triggerPreventable("before:detach");if(l.isPrevented){return this}this.destroyChildren({checkEmpty:false});this.trigger("detach")}if(i){var k=f(j.el);this.$el.replaceWith(k);this.setElement(k)}this.$(".aui-sidebar-group").each(c.bind(function(o,p){var r=new e({el:p});var q=!!this.getGroup(r.id);if(q){d.warn('Duplicated IDs detected. There are more than one NavigationGroup with id data-id="'+r.id+'"')}this.proxyChildEvents(r);this.children.add(r,r.id)},this));this.trigger("render");return this},deselectAllGroups:function(){this.children.call("deselect")},replaceGroup:function(h,j){var i=this.getGroup(h);i.$el.replaceWith(j.$el);j.cid=i.cid;this.children.remove(i);this.children.add(j,j.id)},getGroup:function(h){return this.children.findByCustom(h)},getGroupAt:function(h){return this.children.findByIndex(h)},getItem:function(h){return this.getDefaultGroup().getItem(h)},getElement:function(){return this.el},getDefaultGroup:function(){return this.getGroup("sidebar-navigation-panel")},isProjectSidebar:function(){return !b},getSelectedScopeFilterId:function(){return this.$(".scope-filter a.scope-filter-trigger").attr("data-scope-filter-id")},setReportsItemLink:function(i){var j=this.getGroup("sidebar-navigation-panel");var h=j.getItem("com.atlassian.jira.jira-projects-plugin:report-page");if(typeof h==="undefined"){h=j.getItem("com.pyxis.greenhopper.jira:global-sidebar-report")}if(h){h.ui.link.attr("href",i)}},getAUISidebar:function(){return AJS.sidebar(".aui-sidebar")},getContentContainer:function(){return this.$(".aui-sidebar-body .sidebar-content-container")},getSelectedNavigationItem:function(){return this.getDefaultGroup().getSelectedNavigationItem()},hasASelectedItem:function(){return this.getDefaultGroup().hasASelectedItem()},dim:function(){this.$el.attr({dimmed:"","aria-hidden":"true"})},undim:function(){this.$el.removeAttr("dimmed");this.$el.removeAttr("aria-hidden")}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-component', location = '/sidebar/component/component-namespaces.js' */
(function(){var a=require("jira/projects/sidebar/component/navigation-group-factory");var b=require("jira/projects/sidebar/component");AJS.namespace("JIRA.Projects.Sidebar.Component",null,b);AJS.namespace("JIRA.Projects.Sidebar.Component.NavigationItem",null,require("jira/projects/sidebar/component/navigation-item"));AJS.namespace("JIRA.Projects.Sidebar.Component.NavigationSubgroup",null,require("jira/projects/sidebar/component/navigation-subgroup"));AJS.namespace("JIRA.Projects.Sidebar.Component.NavigationGroup",null,require("jira/projects/sidebar/component/navigation-group"));AJS.namespace("JIRA.Projects.Sidebar.Component.NavigationGroup.build",null,a.build)})();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-api', location = '/sidebar/api.js' */
define("jira/api/projects/sidebar",["jira/jquery/deferred","exports"],function(b,a){var d=new b();var c=undefined;a.getSidebar=function(){return d.promise()};a.initAPI=function(e){c=e;AJS.namespace("JIRA.API.Sidebar",null,c);d.resolve(c)}});AJS.namespace("JIRA.API.getSidebar",null,require("jira/api/projects/sidebar").getSidebar);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-analytics', location = '/sidebar/analytics/hash.js' */
define("jira/projects/sidebar/analytics/hash",["underscore"],function(b){var e=[];function c(f,g){return f.indexOf(g)===0}function d(f,g){return f.substring(c(f,g)?g.length:0)}function a(g){var f;var j=0;if(!g){return""}for(var h=0;h<g.length;h+=1){f=g.charCodeAt(h);j=((j*32)-j)+f;j|=0}return j}return{prefixedHash:function(f){var g=b.find(e,b.partial(c,f))||"";return{prefix:g,hash:g+a(d(f,g))}},addPrefix:function(f){if(f&&!b.contains(e,f)){e.push(f)}},clearPrefixes:function(){e.length=0}}});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-analytics', location = '/sidebar/analytics/analytics.js' */
define("jira/projects/sidebar/analytics/analytics",["jira/api/projects/sidebar","jira/projects/sidebar/analytics/hash","jira/util/data/meta","jira/analytics","jquery"],function(h,f,d,j,g){function m(n){return f.prefixedHash(n||"NONE")}function b(n,o){j.send({name:"jira.project.centric.navigation.sidebar."+n,data:o})}var k="proj.config";function a(){return g('meta[name="admin.active.section"]').attr("content")==="atl.jira.proj.config"}function c(n){return i.indexOf([k,n].join("."))!==-1}function e(n){var p=n.getAUISidebar();var o=g();o=o.add(p.$el);o=o.add(p.submenus.inlineDialog);o.on("click","a",function(){var r=m(g(this).attr("data-link-id"));var q={id:r.hash,prefix:r.prefix};var t=d.get("sidebar-source-page");if(t){q.sidebarSourcePage=t}else{if(g(".issue-tools button.expand").length>0){q.sidebarSourcePage="search-el"}else{if(g(".navigation-tools button.collapse").length>0){q.sidebarSourcePage="fullscreen-el"}else{if(a()){var s=g('meta[name="admin.active.tab"]').attr("content");s=s.replace("com.atlassian.servicedesk.project-ui:","");if(c(s)){q.sidebarSourcePage=[k,s].join(".")}else{q.sidebarSourcePage=k}}}}}if(i.indexOf(q.sidebarSourcePage)===-1){q.sidebarSourcePage="unknown"}b("click.link",q)})}var i=["search-el","fullscreen-el","search","fullscreen","rapid-board","service-desk","proj.config","proj.config.view_project_summary","proj.config.view_project_issuetypes","proj.config.project-issuetypes-expand","proj.config.view_project_workflows","proj.config.view_project_screens","proj.config.view_project_fields","proj.config.view_project_versions","proj.config.view_project_components","proj.config.view_project_roles","proj.config.view_project_permissions","proj.config.view_project_issuesecurity","proj.config.view_project_notifications","proj.config.devstatus-admin-page-link","proj.config.hipchat-project-admin-page-link","proj.config.view_issue_collectors","proj.config.sd-project-request-types-item","proj.config.sd-project-request-security-item","proj.config.sd-project-portal-settings-item","proj.config.sd-project-feedback-settings-item","proj.config.sd-project-email-settings-item","proj.config.sd-project-confluence-kb-item","proj.config.sd-project-sidebar-sla","proj.config.sd-project-automation-item"];function l(){h.getSidebar().done(function(n){if(n.isProjectSidebar()){b("load.project")}else{b("load.global")}e(n)})}return{register:l}});AJS.namespace("JIRA.Projects.Sidebar.Analytics",null,require("jira/projects/sidebar/analytics/analytics"));AJS.namespace("JIRA.Projects.Sidebar.Analytics.Hash",null,require("jira/projects/sidebar/analytics/hash"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-expansion-manager', location = '/sidebar/expansion-manager.js' */
define("jira/projects/sidebar/expansion-manager",["wrm/data"],function(a){var c="jira-sidebar-collapsed";var b=Boolean(a.claim("sidebar-collapsed-by-default"));return function(f,h){h||(h=window.localStorage);g();f.on("expand-start",e);f.on("expand-end collapse-end",d);function e(i){if(i.isResponsive&&h[c]==="true"){i.preventDefault()}}function d(i){if(!i.isResponsive&&!f.isViewportNarrow()){h[c]=f.isCollapsed().toString()}}function g(){if(f.reflow()&&f.isViewportNarrow()){return}if((b&&h[c]===undefined)||h[c]==="true"){f.collapse()}else{f.expand()}}}});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:collapsed-scope-filter', location = '/sidebar/scopefilter/templates.soy' */
// This file was automatically generated from templates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Projects.Sidebar.ScopeFilter.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Projects == 'undefined') { JIRA.Projects = {}; }
if (typeof JIRA.Projects.Sidebar == 'undefined') { JIRA.Projects.Sidebar = {}; }
if (typeof JIRA.Projects.Sidebar.ScopeFilter == 'undefined') { JIRA.Projects.Sidebar.ScopeFilter = {}; }
if (typeof JIRA.Projects.Sidebar.ScopeFilter.Templates == 'undefined') { JIRA.Projects.Sidebar.ScopeFilter.Templates = {}; }


JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedContainer = function(opt_data, opt_ignored) {
  return '<div class="aui-sidebar-group aui-sidebar-group-actions collapsed-scope-filter-container"></div>';
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedContainer.soyTemplateName = 'JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedContainer';
}


JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedScopeList = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '';
  if (opt_data.selectableScopes || opt_data.createActions) {
    output += '<div class="aui-nav-heading" title="' + soy.$$escapeHtml("Boards in this project") + '"><strong class="collapsed-scope-header">' + soy.$$escapeHtml("Boards in this project") + '</strong></div><ul class="aui-nav collapsed-scope-list" title="' + soy.$$escapeHtml("Select a board") + '">';
    if (opt_data.selectedScope) {
      output += '<li class="scope-filter selected-scope-filter" title="' + soy.$$escapeHtml(opt_data.selectedScope.label) + '">' + soy.$$escapeHtml(opt_data.selectedScope.label) + '</li>';
      var scopeFilterList21 = opt_data.selectableScopes;
      var scopeFilterListLen21 = scopeFilterList21.length;
      for (var scopeFilterIndex21 = 0; scopeFilterIndex21 < scopeFilterListLen21; scopeFilterIndex21++) {
        var scopeFilterData21 = scopeFilterList21[scopeFilterIndex21];
        output += JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedSelectableItem({itemClass: 'scope-filter', anchorClass: scopeFilterData21.styleClass, label: scopeFilterData21.label, link: scopeFilterData21.link});
      }
    }
    if (opt_data.createActions) {
      var createActionList30 = opt_data.createActions;
      var createActionListLen30 = createActionList30.length;
      for (var createActionIndex30 = 0; createActionIndex30 < createActionListLen30; createActionIndex30++) {
        var createActionData30 = createActionList30[createActionIndex30];
        output += JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedSelectableItem({itemClass: 'create-scope-action', anchorClass: createActionData30.styleClass, label: createActionData30.label, link: createActionData30.link});
      }
    }
    output += '</ul>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedScopeList.soyTemplateName = 'JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedScopeList';
}


JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedSelectableItem = function(opt_data, opt_ignored) {
  return '<li class="' + soy.$$escapeHtml(opt_data.itemClass) + '"><a href="' + soy.$$escapeHtml(opt_data.link) + '" title="' + soy.$$escapeHtml(opt_data.label) + '"' + ((opt_data.anchorClass) ? ' class="' + soy.$$escapeHtml(opt_data.anchorClass) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.label) + '</a></li>';
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedSelectableItem.soyTemplateName = 'JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedSelectableItem';
}
;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:collapsed-scope-filter', location = '/sidebar/scopefilter/templates.js' */
define("jira/projects/sidebar/scopefilter/templates",function(){return JIRA.Projects.Sidebar.ScopeFilter.Templates});AJS.namespace("JIRA.Projects.Sidebar.ScopeFilter.Templates",null,require("jira/projects/sidebar/scopefilter/templates"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:collapsed-scope-filter', location = '/sidebar/scopefilter/model.js' */
define("jira/projects/sidebar/scopefilter/model",["underscore"],function(a){var b=function(e){this.selectedScope=e.selectedScope;this.createScopeActions=e.createScopeActions;if(this.selectedScope){this.selectableScopes=a.reject(e.scopes,function(f){return f.label===this.selectedScope.label&&f.link===this.selectedScope.link},this)}else{this.selectableScopes=e.scopes}var d=this.createScopeActions.length>0;var c=this.selectableScopes.length>0;this.displayWhenSidebarIsCollapsed=d||c};b.prototype.getSelectedScope=function(){return this.selectedScope};b.prototype.getSelectableScopes=function(){return this.selectableScopes};b.prototype.getCreateScopeActions=function(){return this.createScopeActions};b.prototype.shouldDisplayWhenSidebarIsCollapsed=function(){return this.displayWhenSidebarIsCollapsed};return b});AJS.namespace("JIRA.Projects.Sidebar.ScopeFilter.Model",null,require("jira/projects/sidebar/scopefilter/model"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:collapsed-scope-filter', location = '/sidebar/scopefilter/collapsed-view.js' */
define("jira/projects/sidebar/scopefilter/collapsed-view",["jira/projects/sidebar/scopefilter/templates","jira/projects/libs/marionette"],function(a,b){return b.ItemView.extend({template:a.collapsedScopeList,serializeData:function(){return{selectedScope:this.model.getSelectedScope(),selectableScopes:this.model.getSelectableScopes(),createActions:this.model.getCreateScopeActions()}},onRender:function(){this.unwrapTemplate()}})});AJS.namespace("JIRA.Projects.Sidebar.ScopeFilter.CollapsedView",null,require("jira/projects/sidebar/scopefilter/collapsed-view"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:collapsed-scope-filter', location = '/sidebar/scopefilter/collapsed-controller.js' */
define("jira/projects/sidebar/scopefilter/collapsed-controller",["jira/projects/sidebar/scopefilter/collapsed-view","jira/projects/libs/marionette"],function(a,b){return b.Controller.extend({initialize:function(c){this.scopeFilter=c.scopeFilter;var d=b.Region.extend({attachHtml:function(e){this.$el.empty().append(e.$el)}});this.collapsedScopeFilterContainer=new d({el:c.collapsedScopeFilterContainer})},render:function(){var c=new a({model:this.scopeFilter});this.collapsedScopeFilterContainer.show(c)},remove:function(){this.collapsedScopeFilterContainer.empty();this.collapsedScopeFilterContainer.$el.empty()}})});AJS.namespace("JIRA.Projects.Sidebar.ScopeFilter.CollapsedController",null,require("jira/projects/sidebar/scopefilter/collapsed-controller"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:collapsed-scope-filter', location = '/sidebar/scopefilter/collapsed-initializer.js' */
define("jira/projects/sidebar/scopefilter/collapsed-initializer",["jira/util/logger","jira/projects/sidebar/scopefilter/model","jira/projects/sidebar/scopefilter/templates","jira/projects/sidebar/scopefilter/collapsed-controller","jira/projects/libs/marionette","jquery"],function(b,g,d,a,h,e){function f(j){var i=e(d.collapsedContainer());j.prepend(i);return i}function c(j,i){j.on("collapse-start",function(){i.render();b.trace("sidebar.scopefilter.collapsed")});j.on("expand-end",function(){i.remove()})}return h.Controller.extend({initialize:function(i){this.sidebarAPI=i.sidebarAPI;this.scopeFilterData=i.scopeFilterData;this.sidebar=i.sidebar;this.$sidebarContentContainer=i.$sidebarContentContainer},run:function(){if(!this.sidebarAPI.isProjectSidebar()){return}var k=new g(this.scopeFilterData);if(!k.shouldDisplayWhenSidebarIsCollapsed()){return}var i=f(this.$sidebarContentContainer);var j=new a({scopeFilter:k,collapsedScopeFilterContainer:i});c(this.sidebar,j);if(this.sidebar.isCollapsed()){j.render()}}})});AJS.namespace("JIRA.Projects.Sidebar.ScopeFilter.CollapsedInitializer",null,require("jira/projects/sidebar/scopefilter/collapsed-initializer"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:collapsed-scope-filter', location = '/sidebar/scopefilter/collapsed-init.js' */
require(["jira/projects/sidebar/scopefilter/collapsed-initializer","jira/api/projects/sidebar","wrm/data"],function(c,b,a){b.getSidebar().done(function(f){var e=a.claim("scope-filter-data");if(e){var d=new c({sidebarAPI:f,scopeFilterData:e,sidebar:f.getAUISidebar(),$sidebarContentContainer:f.getContentContainer()});d.run()}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:feature-discovery', location = '/sidebar/feature-discovery/feature-discovery.js' */
define("jira/projects/sidebar/feature-discovery",["jira/api/projects","jira/api/projects/sidebar","wrm/context-path","underscore","jquery"],function(d,e,a,c,f){function b(i,h){c.each(h,function(k){var j=i.getItem(k);if(j){j.removeBadge()}})}function g(h){e.getSidebar().done(function(i){b(i,h)})}return{updateBadges:function(){if(typeof d.getCurrentProjectKey()==="undefined"){return}f.ajax({url:a()+"/rest/projects/1.0/project/"+encodeURIComponent(d.getCurrentProjectKey())+"/badges",type:"PUT",contentType:"application/json"}).done(function(h){g(h.badgesToRemove||[])})}}});AJS.namespace("JIRA.Projects.Sidebar.FeatureDiscovery",null,require("jira/projects/sidebar/feature-discovery"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-last-visited', location = '/sidebar/lastvisited/last-visited-updater.js' */
define("jira/projects/sidebar/lastvisited/updater",["jira/api/projects","jira/util/logger","wrm/context-path","jquery"],function(d,b,a,e){function c(f,g,h){if(!f){return}h=h||function(){b.trace("last.visited.item.saved")};e.ajax({url:a()+"/rest/projects/1.0/project/"+encodeURIComponent(f)+"/lastVisited",type:"PUT",contentType:"application/json",data:JSON.stringify({id:g})}).done(h)}return{start:function(g,i){var f=d.getCurrentProjectKey();var h=g.getSelectedNavigationItem();if(h){c(f,h.getId(),i)}g.on("before:navigate:prevented",function(j){c(f,j.emitter.id,i)});g.on("before:select",function(j){if(j.isInitial){c(f,j.emitter.id,i)}})}}});AJS.namespace("JIRA.Projects.Sidebar.LastVisited.Updater",null,require("jira/projects/sidebar/lastvisited/updater"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar', location = '/sidebar/sidebar-init.js' */
define("jira/projects/sidebar/sidebar-initializer",["require"],function(d){var l=d("jira/util/logger");var c=d("jira/api/projects");var h=d("jira/api/projects/sidebar");var m=d("jira/project/types/warning/dialog");var j=d("jira/projects/sidebar/lastvisited/updater");var b=d("jira/projects/sidebar/component");var a=d("jira/projects/sidebar/analytics/analytics");var i=d("jira/projects/sidebar/analytics/hash");var g=d("wrm/context-path");var n=d("jquery");var k=d("underscore");var f=["NONE","com.atlassian.jira.jira-projects-plugin:project-issue-search-link","com.atlassian.jira.jira-projects-plugin:components-page","com.atlassian.jira.jira-projects-plugin:reports-panel","com.atlassian.jira.jira-projects-plugin:summary-panel","com.atlassian.jira.jira-projects-plugin:summary-page","com.atlassian.jira.jira-projects-plugin:components-page","com.atlassian.jira.jira-projects-plugin:release-page","com.atlassian.jira.jira-projects-plugin:release-sidebar-version-","com.atlassian.jira.jira-projects-plugin:report-page","com.pyxis.greenhopper.jira:global-sidebar-report","com.pyxis.greenhopper.jira:global-sidebar-plan-scrum","com.pyxis.greenhopper.jira:global-sidebar-work-scrum","com.pyxis.greenhopper.jira:global-sidebar-work-kanban","com.pyxis.greenhopper.jira:project-sidebar-plan-scrum","com.pyxis.greenhopper.jira:project-sidebar-work-scrum","com.pyxis.greenhopper.jira:project-sidebar-work-kanban","com.pyxis.greenhopper.jira:project-invite-users-link","com.pyxis.greenhopper.jira:sidebar-feedback-link","com.atlassian.jira.jira-projects-issue-navigator:embedded-issue-navigator-link","com.atlassian.jira.jira-projects-issue-navigator:sidebar-issue-navigator","com.atlassian.jira.jira-projects-plugin:project-invite-users-link","com.atlassian.jira.jira-projects-plugin:sidebar-feedback-link","com.atlassian.jira.jira-one-click-invite-plugin:project-invite-users-link"];var e=function(s){function p(u){var t=n(".aui-sidebar .aui-badge");t.tooltip({gravity:"w"});if(u.isCollapsed()){t.tooltip("disable")}u.on("collapse-end expand-end",function(){n(".tipsy").remove();n(".aui-sidebar .aui-badge").tooltip("toggleEnabled")})}function q(u){function t(){u.getAUISidebar().reflow()}setTimeout(t,200);setInterval(t,5*60*1000)}function r(t){t.on("collapse-start",function(){var u=t.$el.find(".scope-filter-trigger");if(u.hasClass("aui-dropdown2-active")){u.trigger("aui-button-invoke")}})}function o(){m.init({onProjectTypeChanged:function(){var t=c.getCurrentProjectKey();window.location.replace(g()+"/projects/"+t+"/summary")}});l.trace("project.types.warning.messages.init")}h.initAPI(new b({el:s.$el[0]}));k(f).each(i.addPrefix);a.register();r(s);p(s);o();h.getSidebar().done(function(t){q(t);j.start(t)})};return{init:e}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/lib/setFocus.js' */
JIRA.setFocus=function(){var e="form.dont-default-focus",t="input:not(#issue-filter-submit), select, textarea, button, a.cancel",n=["div.aui-popup-content:visible","form.aui:visible","form:visible"],o=[],i=function(e,t,n,o){var i=!1;return AJS.$(t,e).not(n).find(o).each(function(){var e=AJS.$(this);if(e.is(":visible:enabled, a:visible"))return e.focus(),e.is(":text, :password, textarea")&&(e.is(".focus-select-end")?e.setCaretToPosition(e[0].value.length):e.setSelectionRange(0,e[0].value.length)),i=!0,!1}),i},s=function(){for(var e=0,t=o[o.length-1];!i(t.context,t.parentElementSelectors[e],t.excludeParentSelector,t.focusElementSelector)&&e<t.parentElementSelectors.length;)e++};return{FocusConfiguration:function(){this.context=document,this.excludeParentSelector=e,this.focusElementSelector=t,this.parentElementSelectors=n.slice(0),this.focusNow=s},triggerFocus:function(){0==o.length&&o.push(new this.FocusConfiguration),o[o.length-1].focusNow()},pushConfiguration:function(e){o.push(e)},popConfiguration:function(){o.pop()}}}(),jQuery(function(){JIRA.setFocus.triggerFocus()});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/DateReset.js' */
Date.prototype.__msh_oldSetFullYear&&(Date.prototype.setFullYear=Date.prototype.__msh_oldSetFullYear);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/Namespaces.js' */
AJS.namespace("GH.view"),AJS.namespace("GH.view.model"),AJS.namespace("GH.Global"),AJS.namespace("GH.Dialog"),AJS.namespace("GH.Dialogs"),AJS.namespace("GH.State"),AJS.namespace("GH.XBoard"),AJS.namespace("GH.RapidBoard"),AJS.namespace("GH.HelpPaths"),AJS.namespace("GH.JQLAutoComplete"),AJS.namespace("GH.RapidBoard.Util"),AJS.namespace("GH.NumberFormat"),AJS.namespace("GH.UrlFormat");;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/SimpleClick.js' */
require(["jquery"],function(e){"use strict";e.event.special.simpleClick={add:function(c){c._clickHandler=function(e){if(!e.ctrlKey&&!e.metaKey&&!e.shiftKey)return c.handler.apply(this,arguments)},e(this).on("click",c.selector,c._clickHandler)},remove:function(c){e(this).off("click",c.selector,c._clickHandler)}}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/PromiseKeeper.js' */
define("jira-agile/rapid/promise-keeper",["jquery"],function(n){"use strict";var i=function i(e){return this instanceof i?(this._parent=e,this._doneCallbacks=n.Callbacks(),this._failCallbacks=n.Callbacks(),void(this._alwaysCallbacks=n.Callbacks())):new i};return i.prototype={add:function(i){var e=n.Deferred();e.original=i;var t=this._getPending();this._abortIfPending(t),this._setPending(e);var a=this;return i.done(function(){e===a._getPending()&&(e.resolveWith(a,arguments),a._doneCallbacks.fireWith(a,arguments))}),i.fail(function(){e===a._getPending()&&(e.rejectWith(a,arguments),a._failCallbacks.fireWith(a,arguments))}),i.always(function(){e===a._getPending()&&a._alwaysCallbacks.fireWith(a,arguments)}),e.promise()},done:function(n){return this._doneCallbacks.add(n),this},fail:function(n){return this._failCallbacks.add(n),this},always:function(n){return this._alwaysCallbacks.add(n),this},reset:function(){this._abortIfPending(this._getPending()),this._setPending(null)},sub:function(){return new i(this)},_getPending:function(){return this._parent?this._parent._getPending():this._pending},_setPending:function(n){this._parent?this._parent._setPending(n):this._pending=n},_abortIfPending:function(i){i&&"pending"===i.state()&&(i.reject("abort"),n.isFunction(i.original.abort)&&i.original.abort())}},i}),AJS.namespace("GH.PromiseKeeper",null,require("jira-agile/rapid/promise-keeper"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/lib/history/history.adapter.jquery.js' */
/**
 * History.js jQuery Adapter
 * @author Benjamin Arthur Lupton <contact@balupton.com>
 * @copyright 2010-2011 Benjamin Arthur Lupton <contact@balupton.com>
 * @license New BSD License <http://creativecommons.org/licenses/BSD/>
 */
!function(n,i){var e=n.History=n.History||{},r=n.jQuery;if("undefined"!=typeof e.Adapter)throw new Error("History.js Adapter has already been loaded...");e.Adapter={bind:function(n,i,e){r(n).bind(i,e)},trigger:function(n,i){r(n).trigger(i)},onDomLoad:function(n){r(n)}},"undefined"!=typeof e.init&&e.init()}(window);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/lib/history/history.js' */
/**
 * History.js Core
 * @author Benjamin Arthur Lupton <contact@balupton.com>
 * @copyright 2010-2011 Benjamin Arthur Lupton <contact@balupton.com>
 * @license New BSD License <http://creativecommons.org/licenses/BSD/>
 */
!function(e,t){"use strict";var a=e.console||t,r=e.document,n=e.navigator,o=e.amplify||!1,i=e.setTimeout,s=e.clearTimeout,u=e.setInterval,l=e.JSON,d=e.History=e.History||{},c=e.history;if(l.stringify=l.stringify||l.encode,l.parse=l.parse||l.decode,"undefined"!=typeof d.init)throw new Error("History.js Core has already been loaded...");d.init=function(){return"undefined"!=typeof d.Adapter&&("undefined"!=typeof d.initCore&&d.initCore(),"undefined"!=typeof d.initHtml4&&d.initHtml4(),!0)},d.initCore=function(){if("undefined"!=typeof d.initCore.initialized)return!1;if(d.initCore.initialized=!0,d.options=d.options||{},d.options.hashChangeInterval=d.options.hashChangeInterval||100,d.options.safariPollInterval=d.options.safariPollInterval||500,d.options.doubleCheckInterval=d.options.doubleCheckInterval||500,d.options.storeInterval=d.options.storeInterval||1e3,d.options.busyDelay=d.options.busyDelay||250,d.options.debug=d.options.debug||!1,d.options.initialTitle=d.options.initialTitle||r.title,d.debug=function(){d.options.debug&&d.log.apply(d,arguments)},d.log=function(){var e,t,n,o=!("undefined"==typeof a||"undefined"==typeof a.log||"undefined"==typeof a.log.apply),i=r.getElementById("log");if(o){var s=Array.prototype.slice.call(arguments);e=s.shift(),"undefined"!=typeof a.debug?a.debug.apply(a,[e,s]):a.log.apply(a,[e,s])}else e="\n"+arguments[0]+"\n";for(t=1,n=arguments.length;t<n;++t){var u=arguments[t];if("object"==typeof u&&"undefined"!=typeof l)try{u=l.stringify(u)}catch(e){}e+="\n"+u+"\n"}return i?(i.value+=e+"\n-----\n",i.scrollTop=i.scrollHeight-i.clientHeight):o||alert(e),!0},/**
		 * History.getInternetExplorerMajorVersion()
		 * Get's the major version of Internet Explorer
		 * @return {integer}
		 * @license Public Domain
		 * @author Benjamin Arthur Lupton <contact@balupton.com>
		 * @author James Padolsey <https://gist.github.com/527683>
		 */
d.getInternetExplorerMajorVersion=function(){var e=d.getInternetExplorerMajorVersion.cached="undefined"!=typeof d.getInternetExplorerMajorVersion.cached?d.getInternetExplorerMajorVersion.cached:function(){for(var e=3,t=r.createElement("div"),a=t.getElementsByTagName("i");(t.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->")&&a[0];);return e>4&&e}();return e},/**
		 * History.isInternetExplorer()
		 * Are we using Internet Explorer?
		 * @return {boolean}
		 * @license Public Domain
		 * @author Benjamin Arthur Lupton <contact@balupton.com>
		 */
d.isInternetExplorer=function(){var e=d.isInternetExplorer.cached="undefined"!=typeof d.isInternetExplorer.cached?d.isInternetExplorer.cached:Boolean(d.getInternetExplorerMajorVersion());return e},d.emulated={pushState:!Boolean(e.history&&e.history.pushState&&e.history.replaceState&&!(/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(n.userAgent)||/AppleWebKit\/5([0-2]|3[0-2])/i.test(n.userAgent))),hashChange:Boolean(!("onhashchange"in e||"onhashchange"in r)||d.isInternetExplorer()&&d.getInternetExplorerMajorVersion()<8)},d.enabled=!d.emulated.pushState,d.bugs={setHash:Boolean(!d.emulated.pushState&&"Apple Computer, Inc."===n.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(n.userAgent)),safariPoll:Boolean(!d.emulated.pushState&&"Apple Computer, Inc."===n.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(n.userAgent)),ieDoubleCheck:Boolean(d.isInternetExplorer()&&d.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(d.isInternetExplorer()&&d.getInternetExplorerMajorVersion()<7)},d.isEmptyObject=function(e){for(var t in e)return!1;return!0},d.cloneObject=function(e){var t,a;return e?(t=l.stringify(e),a=l.parse(t)):a={},a},d.getRootUrl=function(){var e=r.location.protocol+"//"+(r.location.hostname||r.location.host);return r.location.port&&(e+=":"+r.location.port),e+="/"},d.getBaseHref=function(){var e=r.getElementsByTagName("base"),t=null,a="";return 1===e.length&&(t=e[0],a=t.href.replace(/[^\/]+$/,"")),a=a.replace(/\/+$/,""),a&&(a+="/"),a},d.getBaseUrl=function(){var e=d.getBaseHref()||d.getBasePageUrl()||d.getRootUrl();return e},d.getPageUrl=function(){var e=d.getState(!1,!1),t=(e||{}).url||r.location.href,a=t.replace(/\/+$/,"").replace(/[^\/]+$/,function(e,t,a){return/\./.test(e)?e:e+"/"});return a},d.getBasePageUrl=function(){var e=r.location.href.replace(/[#\?].*/,"").replace(/[^\/]+$/,function(e,t,a){return/[^\/]$/.test(e)?"":e}).replace(/\/+$/,"")+"/";return e},d.getFullUrl=function(e,t){var a=e,r=e.substring(0,1);return t="undefined"==typeof t||t,/[a-z]+\:\/\//.test(e)||(a="/"===r?d.getRootUrl()+e.replace(/^\/+/,""):"#"===r?d.getPageUrl().replace(/#.*/,"")+e:"?"===r?d.getPageUrl().replace(/[\?#].*/,"")+e:t?d.getBaseUrl()+e.replace(/^(\.\/)+/,""):d.getBasePageUrl()+e.replace(/^(\.\/)+/,"")),a.replace(/\#$/,"")},d.getShortUrl=function(e){var t=e,a=d.getBaseUrl(),r=d.getRootUrl();return d.emulated.pushState&&(t=t.replace(a,"")),t=t.replace(r,"/"),d.isTraditionalAnchor(t)&&(t="./"+t),t=t.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")},d.store=o?o.store("History.store")||{}:{},d.store.idToState=d.store.idToState||{},d.store.urlToId=d.store.urlToId||{},d.store.stateToId=d.store.stateToId||{},d.idToState=d.idToState||{},d.stateToId=d.stateToId||{},d.urlToId=d.urlToId||{},d.storedStates=d.storedStates||[],d.savedStates=d.savedStates||[],d.getState=function(e,t){"undefined"==typeof e&&(e=!0),"undefined"==typeof t&&(t=!0);var a=d.getLastSavedState();return!a&&t&&(a=d.createStateObject()),e&&(a=d.cloneObject(a),a.url=a.cleanUrl||a.url),a},d.getIdByState=function(e){var t=d.extractId(e.url);if(!t){var a=d.getStateString(e);if("undefined"!=typeof d.stateToId[a])t=d.stateToId[a];else if("undefined"!=typeof d.store.stateToId[a])t=d.store.stateToId[a];else{for(;;)if(t=(new Date).getTime()+~~(1e3*Math.random()),"undefined"==typeof d.idToState[t]&&"undefined"==typeof d.store.idToState[t])break;d.stateToId[a]=t,d.idToState[t]=e}}return t},d.normalizeState=function(e){if(e&&"object"==typeof e||(e={}),"undefined"!=typeof e.normalized)return e;e.data&&"object"==typeof e.data||(e.data={});var t={};t.normalized=!0,t.title=e.title||"",t.url=d.getFullUrl(d.unescapeString(e.url||r.location.href)),t.hash=d.getShortUrl(t.url),t.data=d.cloneObject(e.data),t.id=d.getIdByState(t),t.cleanUrl=t.url.replace(/\??\&_suid.*/,""),t.url=t.cleanUrl;var a=!d.isEmptyObject(t.data);return(t.title||a)&&(t.hash=d.getShortUrl(t.url).replace(/\??\&_suid.*/,""),/\?/.test(t.hash)||(t.hash+="?"),t.hash+="&_suid="+t.id),t.hashedUrl=d.getFullUrl(t.hash),(d.emulated.pushState||d.bugs.safariPoll)&&d.hasUrlDuplicate(t)&&(t.url=t.hashedUrl),t},d.createStateObject=function(e,t,a){var r={data:e,title:t,url:a};return r=d.normalizeState(r)},d.getStateById=function(e){e=String(e);var a=d.idToState[e]||d.store.idToState[e]||t;return a},d.getStateString=function(e){var t=d.normalizeState(e),a={data:t.data,title:e.title,url:e.url},r=l.stringify(a);return r},d.getStateId=function(e){var t=d.normalizeState(e),a=t.id;return a},d.getHashByState=function(e){var t,a=d.normalizeState(e);return t=a.hash},d.extractId=function(e){var t,a,r;return a=/(.*)\&_suid=([0-9]+)$/.exec(e),r=a?a[1]||e:e,t=a?String(a[2]||""):"",t||!1},d.isTraditionalAnchor=function(e){var t=!/[\/\?\.]/.test(e);return t},d.extractState=function(e,t){var a=null;t=t||!1;var r=d.extractId(e);if(r&&(a=d.getStateById(r)),!a){var n=d.getFullUrl(e);r=d.getIdByUrl(n)||!1,r&&(a=d.getStateById(r)),a||!t||d.isTraditionalAnchor(e)||(a=d.createStateObject(null,null,n))}return a},d.getIdByUrl=function(e){var a=d.urlToId[e]||d.store.urlToId[e]||t;return a},d.getLastSavedState=function(){return d.savedStates[d.savedStates.length-1]||t},d.getLastStoredState=function(){return d.storedStates[d.storedStates.length-1]||t},d.hasUrlDuplicate=function(e){var t=!1,a=d.extractState(e.url);return t=a&&a.id!==e.id},d.storeState=function(e){return d.urlToId[e.url]=e.id,d.storedStates.push(d.cloneObject(e)),e},d.isLastSavedState=function(e){var t=!1;if(d.savedStates.length){var a=e.id,r=d.getLastSavedState(),n=r.id;t=a===n}return t},d.saveState=function(e){return!d.isLastSavedState(e)&&(d.savedStates.push(d.cloneObject(e)),!0)},d.getStateByIndex=function(e){var t=null;return t="undefined"==typeof e?d.savedStates[d.savedStates.length-1]:e<0?d.savedStates[d.savedStates.length+e]:d.savedStates[e]},d.getHash=function(){var e=d.unescapeHash(r.location.hash);return e},d.unescapeString=function(t){for(var a,r=t;;){if(a=e.unescape(r),a===r)break;r=a}return r},d.unescapeHash=function(e){var t=d.normalizeHash(e);return t=d.unescapeString(t)},d.normalizeHash=function(e){var t=e.replace(/[^#]*#/,"").replace(/#.*/,"");return t},d.setHash=function(e,t){if(t!==!1&&d.busy())return d.pushQueue({scope:d,callback:d.setHash,args:arguments,queue:t}),!1;var a=d.escapeHash(e);d.busy(!0);var n=d.extractState(e,!0);if(n&&!d.emulated.pushState)d.pushState(n.data,n.title,n.url,!1);else if(r.location.hash!==a)if(d.bugs.setHash){var o=d.getPageUrl();d.pushState(null,null,o+"#"+a,!1)}else r.location.hash=a;return d},d.escapeHash=function(t){var a=d.normalizeHash(t);return a=e.escape(a),d.bugs.hashEscape||(a=a.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),a},d.getHashByUrl=function(e){var t=String(e).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return t=d.unescapeHash(t)},d.setTitle=function(e){var t=e.title;if(!t){var a=d.getStateByIndex(0);a&&a.url===e.url&&(t=a.title||d.options.initialTitle)}try{r.getElementsByTagName("title")[0].innerHTML=t.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(e){}return r.title=t,d},d.queues=[],d.busy=function(e){if("undefined"!=typeof e?d.busy.flag=e:"undefined"==typeof d.busy.flag&&(d.busy.flag=!1),!d.busy.flag){s(d.busy.timeout);var t=function(){if(!d.busy.flag)for(var e=d.queues.length-1;e>=0;--e){var a=d.queues[e];if(0!==a.length){var r=a.shift();d.fireQueueItem(r),d.busy.timeout=i(t,d.options.busyDelay)}}};d.busy.timeout=i(t,d.options.busyDelay)}return d.busy.flag},d.fireQueueItem=function(e){return e.callback.apply(e.scope||d,e.args||[])},d.pushQueue=function(e){return d.queues[e.queue||0]=d.queues[e.queue||0]||[],d.queues[e.queue||0].push(e),d},d.queue=function(e,t){return"function"==typeof e&&(e={callback:e}),"undefined"!=typeof t&&(e.queue=t),d.busy()?d.pushQueue(e):d.fireQueueItem(e),d},d.clearQueue=function(){return d.busy.flag=!1,d.queues=[],d},d.stateChanged=!1,d.doubleChecker=!1,d.doubleCheckComplete=function(){return d.stateChanged=!0,d.doubleCheckClear(),d},d.doubleCheckClear=function(){return d.doubleChecker&&(s(d.doubleChecker),d.doubleChecker=!1),d},d.doubleCheck=function(e){return d.stateChanged=!1,d.doubleCheckClear(),d.bugs.ieDoubleCheck&&(d.doubleChecker=i(function(){return d.doubleCheckClear(),d.stateChanged||e(),!0},d.options.doubleCheckInterval)),d},d.safariStatePoll=function(){var t,a=d.extractState(r.location.href);if(!d.isLastSavedState(a))return t=a,t||(t=d.createStateObject()),d.Adapter.trigger(e,"popstate"),d},d.back=function(e){return e!==!1&&d.busy()?(d.pushQueue({scope:d,callback:d.back,args:arguments,queue:e}),!1):(d.busy(!0),d.doubleCheck(function(){d.back(!1)}),c.go(-1),!0)},d.forward=function(e){return e!==!1&&d.busy()?(d.pushQueue({scope:d,callback:d.forward,args:arguments,queue:e}),!1):(d.busy(!0),d.doubleCheck(function(){d.forward(!1)}),c.go(1),!0)},d.go=function(e,t){var a;if(e>0)for(a=1;a<=e;++a)d.forward(t);else{if(!(e<0))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(a=-1;a>=e;--a)d.back(t)}return d},d.saveState(d.storeState(d.extractState(r.location.href,!0))),o&&(d.onUnload=function(){var e,t=o.store("History.store")||{};t.idToState=t.idToState||{},t.urlToId=t.urlToId||{},t.stateToId=t.stateToId||{};for(e in d.idToState)d.idToState.hasOwnProperty(e)&&(t.idToState[e]=d.idToState[e]);for(e in d.urlToId)d.urlToId.hasOwnProperty(e)&&(t.urlToId[e]=d.urlToId[e]);for(e in d.stateToId)d.stateToId.hasOwnProperty(e)&&(t.stateToId[e]=d.stateToId[e]);d.store=t,o.store("History.store",t)},u(d.onUnload,d.options.storeInterval),d.Adapter.bind(e,"beforeunload",d.onUnload),d.Adapter.bind(e,"unload",d.onUnload)),d.emulated.pushState){var p=function(){};d.pushState=d.pushState||p,d.replaceState=d.replaceState||p}else d.onPopState=function(t){d.doubleCheckComplete();var a=d.getHash();if(a){var n=d.extractState(a||r.location.href,!0);return n?d.replaceState(n.data,n.title,n.url,!1):(d.Adapter.trigger(e,"anchorchange"),d.busy(!1)),d.expectedStateId=!1,!1}var o=!1;return t=t||{},"undefined"==typeof t.state&&("undefined"!=typeof t.originalEvent&&"undefined"!=typeof t.originalEvent.state?t.state=t.originalEvent.state||!1:"undefined"!=typeof t.event&&"undefined"!=typeof t.event.state&&(t.state=t.event.state||!1)),t.state=t.state||!1,o=t.state?d.getStateById(t.state):d.expectedStateId?d.getStateById(d.expectedStateId):d.extractState(r.location.href),o||(o=d.createStateObject(null,null,r.location.href)),d.expectedStateId=!1,d.isLastSavedState(o)?(d.busy(!1),!1):(d.storeState(o),d.saveState(o),d.setTitle(o),d.Adapter.trigger(e,"statechange"),d.busy(!1),!0)},d.Adapter.bind(e,"popstate",d.onPopState),d.pushState=function(t,a,r,n){if(d.getHashByUrl(r)&&d.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(n!==!1&&d.busy())return d.pushQueue({scope:d,callback:d.pushState,args:arguments,queue:n}),!1;d.busy(!0);var o=d.createStateObject(t,a,r);return d.isLastSavedState(o)?d.busy(!1):(d.storeState(o),d.expectedStateId=o.id,c.pushState(o.id,o.title,o.url),d.Adapter.trigger(e,"popstate")),!0},d.replaceState=function(t,a,r,n){if(d.getHashByUrl(r)&&d.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(n!==!1&&d.busy())return d.pushQueue({scope:d,callback:d.replaceState,args:arguments,queue:n}),!1;d.busy(!0);var o=d.createStateObject(t,a,r);return d.isLastSavedState(o)?d.busy(!1):(d.storeState(o),d.expectedStateId=o.id,c.replaceState(o.id,o.title,o.url),d.Adapter.trigger(e,"popstate")),!0},d.bugs.safariPoll&&u(d.safariStatePoll,d.options.safariPollInterval),"Apple Computer, Inc."!==n.vendor&&"Mozilla"!==(n.appCodeName||"")||(d.Adapter.bind(e,"hashchange",function(){d.Adapter.trigger(e,"popstate")}),d.getHash()&&d.Adapter.onDomLoad(function(){d.Adapter.trigger(e,"hashchange")}))},d.init()}(window);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/lib/history/amplify.store.js' */
/*!
 * Amplify Store - Persistent Client-Side Storage @VERSION
 *
 * Copyright 2011 appendTo LLC. (http://appendto.com/team)
 * Dual licensed under the MIT or GPL licenses.
 * http://appendto.com/open-source-licenses
 *
 * http://amplifyjs.com
 */
!function(e,t){function r(e,r){var a=r.__amplify__?JSON.parse(r.__amplify__):{};i.addType(e,function(s,n,l){var p,u,o=n,d=(new Date).getTime();if(!s){o={};for(s in a)p=r[s],u=p?JSON.parse(p):{expires:-1},u.expires&&u.expires<=d?(delete r[s],delete a[s]):o[s.replace(/^__amplify__/,"")]=u.data;return r.__amplify__=JSON.stringify(a),o}if(s="__amplify__"+s,n===t){if(a[s]){if(p=r[s],u=p?JSON.parse(p):{expires:-1},!(u.expires&&u.expires<=d))return u.data;delete r[s],delete a[s]}}else if(null===n)delete r[s],delete a[s];else{u=JSON.stringify({data:n,expires:l.expires?d+l.expires:null});try{r[s]=u,a[s]=!0}catch(t){i[e]();try{r[s]=u,a[s]=!0}catch(e){throw i.error()}}}return r.__amplify__=JSON.stringify(a),o})}JSON.stringify=JSON.stringify||JSON.encode,JSON.parse=JSON.parse||JSON.decode;var i=e.store=function(e,t,r,a){var a=i.type;return r&&r.type&&r.type in i.types&&(a=r.type),i.types[a](e,t,r||{})};i.types={},i.type=null,i.addType=function(e,t){i.type||(i.type=e),i.types[e]=t,i[e]=function(t,r,a){return a=a||{},a.type=e,i(t,r,a)}},i.error=function(){return"amplify.store quota exceeded"};for(var a in{localStorage:1,sessionStorage:1})try{window[a].getItem&&r(a,window[a])}catch(e){}window.globalStorage&&(r("globalStorage",window.globalStorage[window.location.hostname]),"sessionStorage"===i.type&&(i.type="globalStorage")),function(){var e,r=document.createElement("div"),a="amplify";r.style.display="none",document.getElementsByTagName("head")[0].appendChild(r),r.addBehavior&&(r.addBehavior("#default#userdata"),r.load(a),e=r.getAttribute(a)?JSON.parse(r.getAttribute(a)):{},i.addType("userData",function(s,n,l){var p,u,o,d=n,f=(new Date).getTime();if(!s){d={};for(s in e)p=r.getAttribute(s),u=p?JSON.parse(p):{expires:-1},u.expires&&u.expires<=f?(r.removeAttribute(s),delete e[s]):d[s]=u.data;return r.setAttribute(a,JSON.stringify(e)),r.save(a),d}if(s=s.replace(/[^-._0-9A-Za-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u37f-\u1fff\u200c-\u200d\u203f\u2040\u2070-\u218f]/g,"-"),n===t){if(s in e){if(p=r.getAttribute(s),u=p?JSON.parse(p):{expires:-1},!(u.expires&&u.expires<=f))return u.data;r.removeAttribute(s),delete e[s]}}else null===n?(r.removeAttribute(s),delete e[s]):(o=r.getAttribute(s),u=JSON.stringify({data:n,expires:l.expires?f+l.expires:null}),r.setAttribute(s,u),e[s]=!0);r.setAttribute(a,JSON.stringify(e));try{r.save(a)}catch(t){null===o?(r.removeAttribute(s),delete e[s]):r.setAttribute(s,o),i.userData();try{r.setAttribute(s,u),e[s]=!0,r.save(a)}catch(t){throw null===o?(r.removeAttribute(s),delete e[s]):r.setAttribute(s,o),i.error()}}return d}))}(),r("memory",{})}(this.amplify=this.amplify||{});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/lib/history/history.html4.js' */
/**
 * History.js HTML4 Support
 * Depends on the HTML5 Support
 * @author Benjamin Arthur Lupton <contact@balupton.com>
 * @copyright 2010-2011 Benjamin Arthur Lupton <contact@balupton.com>
 * @license New BSD License <http://creativecommons.org/licenses/BSD/>
 */
!function(e,t){"use strict";var a=e.document,r=e.setTimeout||r,s=e.clearTimeout||s,n=e.setInterval||n,i=e.History=e.History||{};if("undefined"!=typeof i.initHtml4)throw new Error("History.js HTML4 Support has already been loaded...");i.initHtml4=function(){return"undefined"==typeof i.initHtml4.initialized&&(i.initHtml4.initialized=!0,i.enabled=!0,i.savedHashes=[],i.isLastHash=function(e){var t=i.getHashByIndex(),a=e===t;return a},i.saveHash=function(e){return!i.isLastHash(e)&&(i.savedHashes.push(e),!0)},i.getHashByIndex=function(e){var t=null;return t="undefined"==typeof e?i.savedHashes[i.savedHashes.length-1]:e<0?i.savedHashes[i.savedHashes.length+e]:i.savedHashes[e]},i.discardedHashes={},i.discardedStates={},i.discardState=function(e,t,a){var r=i.getHashByState(e),s={discardedState:e,backState:a,forwardState:t};return i.discardedStates[r]=s,!0},i.discardHash=function(e,t,a){var r={discardedHash:e,backState:a,forwardState:t};return i.discardedHashes[e]=r,!0},i.discardedState=function(e){var t=i.getHashByState(e),a=i.discardedStates[t]||!1;return a},i.discardedHash=function(e){var t=i.discardedHashes[e]||!1;return t},i.recycleState=function(e){var t=i.getHashByState(e);return i.discardedState(e)&&delete i.discardedStates[t],!0},i.emulated.hashChange&&(i.hashChangeInit=function(){i.checkerFunction=null;var t="";if(i.isInternetExplorer()){var r="historyjs-iframe",s=a.createElement("iframe");s.setAttribute("id",r),s.style.display="none",a.body.appendChild(s),s.contentWindow.document.open(),s.contentWindow.document.close();var d="",h=!1;i.checkerFunction=function(){if(h)return!1;h=!0;var a=i.getHash()||"",r=i.unescapeHash(s.contentWindow.document.location.hash)||"";return a!==t?(t=a,r!==a&&(d=r=a,s.contentWindow.document.open(),s.contentWindow.document.close(),s.contentWindow.document.location.hash=i.escapeHash(a)),i.Adapter.trigger(e,"hashchange")):r!==d&&(d=r,i.setHash(r,!1)),h=!1,!0}}else i.checkerFunction=function(){var a=i.getHash();return a!==t&&(t=a,i.Adapter.trigger(e,"hashchange")),!0};return n(i.checkerFunction,i.options.hashChangeInterval),!0},i.Adapter.onDomLoad(i.hashChangeInit)),void(i.emulated.pushState&&(i.onHashChange=function(t){var r=t&&t.newURL||a.location.href,s=i.getHashByUrl(r),n=null,d=null;if(i.isLastHash(s))return i.busy(!1),!1;if(i.doubleCheckComplete(),i.saveHash(s),s&&i.isTraditionalAnchor(s))return i.Adapter.trigger(e,"anchorchange"),i.busy(!1),!1;if(n=i.extractState(i.getFullUrl(s||a.location.href,!1),!0),i.isLastSavedState(n))return i.busy(!1),!1;d=i.getHashByState(n);var h=i.discardedState(n);return h?(i.getHashByIndex(-2)===i.getHashByState(h.forwardState)?i.back(!1):i.forward(!1),!1):(i.pushState(n.data,n.title,n.url,!1),!0)},i.Adapter.bind(e,"hashchange",i.onHashChange),i.pushState=function(t,r,s,n){if(i.getHashByUrl(s))throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(n!==!1&&i.busy())return i.pushQueue({scope:i,callback:i.pushState,args:arguments,queue:n}),!1;i.busy(!0);var d=i.createStateObject(t,r,s),h=i.getHashByState(d),o=i.getState(!1),c=i.getHashByState(o),u=i.getHash();return i.storeState(d),i.expectedStateId=d.id,i.recycleState(d),i.setTitle(d),h===c?(i.busy(!1),!1):h!==u&&h!==i.getShortUrl(a.location.href)?(i.setHash(h,!1),!1):(i.saveState(d),i.Adapter.trigger(e,"statechange"),i.busy(!1),!0)},i.replaceState=function(e,t,a,r){if(i.getHashByUrl(a))throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(r!==!1&&i.busy())return i.pushQueue({scope:i,callback:i.replaceState,args:arguments,queue:r}),!1;i.busy(!0);var s=i.createStateObject(e,t,a),n=i.getState(!1),d=i.getStateByIndex(-2);return i.discardState(n,s,d),i.pushState(s.data,s.title,s.url,!1),!0},i.getHash()&&!i.emulated.hashChange&&i.Adapter.onDomLoad(function(){i.Adapter.trigger(e,"hashchange")}))))},i.init()}(window);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/lib/history/json2.js' */
var JSON;JSON||(JSON={}),function(){"use strict";function f(t){return t<10?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,r,f,o,u,i=gap,a=e[t];switch(a&&"object"==typeof a&&"function"==typeof a.toJSON&&(a=a.toJSON(t)),"function"==typeof rep&&(a=rep.call(e,t,a)),typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";if(gap+=indent,u=[],"[object Array]"===Object.prototype.toString.apply(a)){for(o=a.length,n=0;n<o;n+=1)u[n]=str(n,a)||"null";return f=0===u.length?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+i+"]":"["+u.join(",")+"]",gap=i,f}if(rep&&"object"==typeof rep)for(o=rep.length,n=0;n<o;n+=1)r=rep[n],"string"==typeof r&&(f=str(r,a),f&&u.push(quote(r)+(gap?": ":":")+f));else for(r in a)Object.hasOwnProperty.call(a,r)&&(f=str(r,a),f&&u.push(quote(r)+(gap?": ":":")+f));return f=0===u.length?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+i+"}":"{"+u.join(",")+"}",gap=i,f}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(t){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(t){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;r<n;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var n,r,f=t[e];if(f&&"object"==typeof f)for(n in f)Object.hasOwnProperty.call(f,n)&&(r=walk(f,n),void 0!==r?f[n]=r:delete f[n]);return reviver.call(t,e,f)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/state/State.js' */
define("jira-agile/rapid/state/state",["jquery"],function(t){"use strict";var e={};return e.push=function(r,a){var i=e.toUri(r);"undefined"==typeof a&&(a=document.title),History.pushState(r,a,i),t(AJS).trigger("gh.virtualpageview")},e.replace=function(t,r){var a=e.toUri(t);"undefined"==typeof r&&(r=document.title),History.replaceState(t,r,a)},e.getViewState=function(){return History.getState().data},e.getHashParams=function(){var t=window.location.href;return!(t.indexOf("#")<0)&&e.toViewState(t)},e.toViewState=function(t){if(t.lastIndexOf("?")<0)return{};var r=e.getStateFromUri(t);return delete r._suid,r},e.toUri=function(e){var r=AJS.parseUri(document.location.href);return r.anchor="",r.queryKey=t.extend({},e),r.toString()},e.registerStateChangeListener=function(t){History.Adapter.bind(window,"statechange",t)},e.getStateFromUri=function(t){var e=AJS.parseUri(t);return e.anchor&&(e=AJS.parseUri(e.anchor)),e.queryKey},e}),AJS.namespace("GH.State",null,require("jira-agile/rapid/state/state"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/state/UrlState.js' */
define("jira-agile/rapid/state/url-state",["underscore","jquery"],function(t,e){var r={};return r.dateFormat="%Y-%m-%d",r.normalizeNumberParam=function(e,r){if(t.isUndefined(r)&&(r=null),void 0===e)return r;if(null===e)return r;var a=parseInt(e,10);return isFinite(a)?a:r},r.normalizeBooleanParam=function(e,r){return t.isUndefined(r)&&(r=null),void 0===e?r:null===e?r:"false"!==e&&Boolean(e)},r.normalizeDateParam=function(e,a){if(t.isUndefined(a)&&(a=null),void 0===e)return a;if(null===e)return a;var n=Date.parseDate(e,r.dateFormat);return n},r.normalizeNumberArrayParam=function(e){var a=[];if(t.isString(e)){var n=r.normalizeNumberParam(e);null!==n&&a.push(n)}else t.isArray(e)&&t.each(e,function(t){var e=r.normalizeNumberParam(t);null!==e&&a.push(e)});return a},r.normalizeStringParam=function(e,r){if(t.isUndefined(r)&&(r=null),t.isArray(e)&&e.length>0){var a=e[0];return""!==a?a:r}return t.isString(e)&&""!==e?e:r},r.removeEmptyParams=function(e){var r={};return t.each(e,function(e,a){t.isArray(e)?e.length>0&&(r[a]=e):t.isString(e)?t.isEmpty(e)||(r[a]=e):null===e||void 0===e||(r[a]=e)}),r},r.toUrlParameterString=function(e){var r="";return t.each(e,function(e,a){t.isArray(e)?t.each(e,function(t){r.length>0&&(r+="&"),r+=a+"="+encodeURIComponent(e)}):(r.length>0&&(r+="&"),r+=a+"="+encodeURIComponent(e))}),r},r.setHandlers=function(t){r.handlers=t},r.handlers=[],r.getNormalizedUrlState=function(){var e=r.getCurrentUrlState(),a={};return t.each(r.handlers,function(t){t.isApplicable(a)&&t.getNormalizedFromUrl(e,a)}),a},r.toUrlState=function(e){var a={};return t.each(r.handlers,function(t){t.isApplicable(e)&&t.toUrl(e,a)}),a},r.deferredPushState=function(t){t<r.lastPushReplace||r.pushState()},r.lastPushReplace=0,r.pushState=function(){r.lastPushReplace=(new Date).getTime();var e=r.getNormalizedRapidBoardState(),a=r.toUrlState(e),n=r.getNormalizedUrlState();return GH.log("url normalized : "+JSON.stringify(n),GH.Logger.Contexts.state),GH.log("new normalized : "+JSON.stringify(e),GH.Logger.Contexts.state),t.isEqual(e,n)?void GH.log("Not pushing, url state already up to date"):(GH.log("pushing state  : "+JSON.stringify(a),GH.Logger.Contexts.state),void GH.State.push(a))},r.replaceState=function(e){r.lastPushReplace=(new Date).getTime();var a=r.getNormalizedRapidBoardState(),n=r.toUrlState(a),i=r.getNormalizedUrlState();return GH.log("url normalized : "+JSON.stringify(i),GH.Logger.Contexts.state),GH.log("new normalized : "+JSON.stringify(a),GH.Logger.Contexts.state),t.isEqual(a,i)&&!e?void GH.log("Not replacing, url state already up to date",GH.Logger.Contexts.state):(GH.log("replacing state: "+JSON.stringify(n),GH.Logger.Contexts.state),void GH.State.replace(n))},r.getNormalizedRapidBoardState=function(){var e={};return t.each(r.handlers,function(t){t.isApplicable(e)&&t.getNormalizedFromInternal(e)}),e},r.loadState=function(){var e=r.getNormalizedUrlState();t.each(r.handlers,function(t){t.isApplicable(e)&&t.updateInternalFromNormalized(e)})},r.getCurrentUrlState=function(){return GH.State.toViewState(window.location.href)},r.hasUrlState=function(){return!t.isEmpty(r.getCurrentUrlState())},r.isUrlStateUpToDate=function(){var e=r.getNormalizedRapidBoardState(),a=r.getNormalizedUrlState();return t.isEqual(e,a)},r.getViewStateRequestParameterString=function(){var t=r.getCurrentUrlState(),e=r.removeEmptyParams(t);return r.toUrlParameterString(e)},r.HISTORY_CHANGED="historyDidChange",r.historyChanged=function(){return r.isUrlStateUpToDate()?(GH.log("UrlState.historyChanged state up to date",GH.Logger.Contexts.state),void e(GH).trigger(r.HISTORY_CHANGED)):(GH.log("UrlState.historyChanged outdated state",GH.Logger.Contexts.state),r.logDifferenceInState(),r.loadState(),GH.RapidBoard.reload(),void e(GH).trigger(r.HISTORY_CHANGED))},r.logDifferenceInState=function(){var t=r.getNormalizedRapidBoardState(),e=r.getNormalizedUrlState();GH.log("boardState: "+JSON.stringify(t),GH.Logger.Contexts.state),GH.log("  urlState: "+JSON.stringify(e),GH.Logger.Contexts.state)},r.init=function(){setTimeout(function(){GH.State.registerStateChangeListener(r.historyChanged)},200)},r}),AJS.namespace("GH.RapidBoard.UrlState",null,require("jira-agile/rapid/state/url-state"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ui/help/Tooltip.js' */
!function(t,i,e){"use strict";function o(t){var e=t.options.gravity;if("function"==typeof e&&(e=e.call(t.$element[0])),"n"===e.charAt(0)||"s"===e.charAt(0)){var o=t.$tip,n=o.offset(),s=Math.max(0,a-n.left),r=Math.max(0,a+n.left+o.outerWidth()-i(window).width()),l=o.find(".tipsy-arrow"),c=s&&r?0:s||-r;c?(o.css("left",parseInt(o.css("left"),10)+c),l.css("marginLeft",-l.outerWidth()/2-c)):l.css("marginLeft","")}}function n(t){var i=250;setTimeout(function(){t.$tip.is(":visible")&&(t.$element.is(":visible")?n(t):t.hide())},i)}function s(t,i){t&&(t.show(),t.$tip&&(o(t),n(t),i.trigger("show",t)))}var r=200,a=20;GH.Tooltip={},GH.Tooltip.tipsify=function(o){o=t.extend({},o,{trigger:"manual",title:"data-tooltip"});var n=new e;if(!o.selector)return n;if(o.context&&t.isString(o.selector)){var a=o.selector;i(o.context).ghHoverIntent({interval:r,selector:a,over:function(){var t=i(this);if(t.is(":visible")){var e=t.tooltip(o).tipsy(!0);s(e,n)}},out:function(){var t=i(this).tipsy(!0);t&&t.hide()}})}else i(o.selector).tooltip(o).ghHoverIntent({interval:r,over:function(){var t=i(this).tipsy(!0);s(t,n)},out:function(){i(this).tipsy("hide")}});return n},GH.Tooltip.enable=function(t){var e=i(t).tipsy(!0);e&&e.enable()},GH.Tooltip.disable=function(t){var e=i(t).tipsy(!0);e&&e.disable()},GH.Tooltip.hide=function(t){var e=i(t).tipsy(!0);e&&(i(t).trigger("mouseleave"),e.hide())}}(_,AJS.$,GH.Events);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/PageRenderer.js' */
define("jira-agile/rapid/page-renderer",[],function(){"use strict";var e={};return e.render=function(e,r){null!=GH.view.pageLoadErrors?r():e()},e.showException=function(e){alert(e.message)},e}),AJS.namespace("GH.PageRenderer",null,require("jira-agile/rapid/page-renderer"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/lib/ajs-future.js' */
!function(){function t(t,a,e,o,n){t.buttonpanel||t.addButtonPanel(),n||(n="#"),this.page=t,this.onclick=e,this._onclick=function(){e.call(this,t.dialog,t)},this.item=AJS("a",a).attr("href",n).addClass("button-panel-link"),o&&this.item.addClass(o),"function"==typeof e&&this.item.click(this._onclick),t.buttonpanel.append(this.item),this.id=t.button.length,t.button[this.id]=this}AJS.Dialog.prototype.addCancel||(AJS.Dialog.prototype.addCancel=function(a,e){var o=this.page[this.curpage];new t(o,a,e,"button-panel-cancel-link");o.recalcSize()}),AJS.parseUri=function(t,a){function e(t){for(var a=e.options,o=a.parser[a.strictMode?"strict":"loose"].exec(t),n={},i=14;i--;)n[a.key[i]]=o[i]||"";return n[a.q.name]={},n[a.key[12]].replace(a.q.parser,function(t,e,o){e&&("object"==typeof n[a.q.name][e]?n[a.q.name][e].push(o):n[a.q.name][e]?n[a.q.name][e]=[n[a.q.name][e],o]:n[a.q.name][e]=o)}),n}e.options={strictMode:!!a,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};var o=/(?:\[?)(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))(?:\]?)/,n=AJS.$("<a>",{href:t})[0].hostname.match(o),i="hostname";return n&&(t=t.replace(n[0],i)),t=e(t),n&&(t.host=n[0],t.authority=t.authority.replace(i,t.host),t.source=t.source.replace(i,t.host)),t.toString=function(){var a=[];return AJS.$.each(t.queryKey,function(t,e){_.isObject(e)?AJS.$.each(e,function(e,o){a.push(t+"="+o)}):a.push(t+"="+e)}),t.protocol+"://"+t.authority+t.path+"?"+a.join("&")+"#"+t.anchor},t}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/lib/ajs-version.js' */
GH.ajsVersion=function(){if(!AJS.version)return{major:-1,minor:0,milestone:0};var n=AJS.version.split("."),e={major:n[0],minor:0,milestone:0};if(3==n.length)e.minor=n[1],e.milestone=n[2];else if(2==n.length){var i=n[1].split("-");2==i.length&&(e.minor=i[0],e.milestone=i[1].substring(i[1].indexOf("m")+1))}return e},GH.ajsVersionAfter=function(n,e,i){var r=GH.ajsVersion();return!(r.major<n)&&(!(e&&r.minor<e)&&!(i&&r.milestone<i))};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/ui-utils.js' */
define("jira-agile/ui-utils",["jquery"],function(i){var a={};return a.isDisabled=function(a){var e=i(a);return e.hasClass("disabled")||"true"==e.attr("aria-disabled")},a.isEnabled=function(i){return!a.isDisabled(i)},a.isVisibleY=function(a){var e=i(window).height(),r=i(document).scrollTop();return a>r&&a<e+r},a.isVisibleX=function(a){var e=i(window).width(),r=i(document).scrollLeft();return a>r&&a<e+r},a.ariaEnable=function(a){i(a).removeAttr("aria-disabled")},a.ariaDisable=function(a){i(a).attr("aria-disabled","true")},a}),AJS.namespace("GH.Util.UI",null,require("jira-agile/ui-utils"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/Layout.js' */
define("jira-agile/rapid/layout",["underscore","jquery"],function(i,e){var n={};return n.windowResizeTimer=null,n.EVENT_DELAYED_RESIZE="delayedResize",n.info={windowWidth:-1,windowHeight:-1},n.getWindowWidth=function(){return n.info.windowWidth},n.getWindowHeight=function(){return n.info.windowHeight},n.bindDelayedWindowResize=i.once(function(){e(window).bind("resize",function(){null!==n.windowResizeTimer&&window.clearTimeout(n.windowResizeTimer),n.windowResizeTimer=window.setTimeout(function(){n.updateWindowSize()&&n.fireDelayedWindowResize()},250)})}),n.updateWindowSize=function(){var i=e(window),o=n.info.windowWidth,d=n.info.windowHeight,w=i.width(),t=i.height();return(o!=w||d!=t)&&(n.info.windowWidth=w,n.info.windowHeight=t,!0)},n.fireDelayedWindowResize=function(){e(GH).trigger(n.EVENT_DELAYED_RESIZE)},n.initPreRender=function(){var i=e(window);n.info.windowWidth=i.width(),n.info.windowHeight=i.height()},n.init=function(){n.bindDelayedWindowResize()},n.initPreRender(),n}),AJS.namespace("GH.Layout",null,require("jira-agile/rapid/layout"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ui/Browser.js' */
GH.RapidBoard.Browsers={},GH.RapidBoard.Browsers.userAgentMap={mozilla:"Firefox"},GH.RapidBoard.Browsers.unsupportedBrowsers=[{name:"mozilla",versions:["1.7","1.8","1.9"]}],GH.RapidBoard.Browsers.init=function(){GH.RapidBoard.Browsers.unsupported()},GH.RapidBoard.Browsers.isLowerThanIE11=function(){return AJS.$.browser.msie&&parseFloat(AJS.$.browser.version)<11},GH.RapidBoard.Browsers.isGreaterThanIE9=function(){return AJS.$.browser.msie&&parseFloat(AJS.$.browser.version)>9},GH.RapidBoard.Browsers.isInputEventSupported=function(){return"oninput"in document.createElement("input")&&!AJS.$.browser.msie||GH.RapidBoard.Browsers.isGreaterThanIE9()},GH.RapidBoard.Browsers.describeBrowser=function(r){r=r||navigator.userAgent;var e=/chrome/.test(navigator.userAgent.toLowerCase()),o=!e&&/safari/.test(navigator.userAgent.toLowerCase()),s=AJS.$.uaMatch(r),a=s.browser,n=s.version.replace(/(\d+)\.(\d+).*$/,"$1.$2");return e?a="chrome":o&&(a="safari"),{name:a,version:n}},GH.RapidBoard.Browsers.unsupported=function(){var r,e,o,s=GH.RapidBoard.Browsers.describeBrowser(),a=GH.RapidBoard.Browsers.unsupportedBrowsers;for(e=0;e<a.length;e++)if(o=a[e],s.name==o.name&&o.versions.indexOf(s.version)>=0){var n=s.name;GH.RapidBoard.Browsers.userAgentMap[n]&&(n=GH.RapidBoard.Browsers.userAgentMap[n]);var i={"url":"https://docs.atlassian.com/jira/jsw-docs-078/Supported+Platforms","isLocal":false}.url;r=GH.tpl.rapid.notification.renderMessageHolder({browser:n,docsUrl:i}),AJS.$("body").prepend(r);break}},AJS.$(function(){GH.RapidBoard.Browsers.init()});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/NumberFormat.js' */
define("jira-agile/rapid/number-format",["underscore","jira-agile/rapid/util"],function(r,a){var e={};return e.groupingSeparator=",",e.decimalSeparator=".",e.format=function(i){if(r.isNumber(i)){i=a.roundToDecimalPlaces(i,2);var t=i<<0,n=i.toString().split(".")[1],o=function(r){return r.split("").reverse().join("")},u=o(o(t.toString()).replace(/(\d{3})(?=\d)/g,"$1"+e.groupingSeparator));return u+(n?e.decimalSeparator+n:"")}},e.formatExponential=function(a){if(r.isNumber(a)){var i=Math.abs(a).toFixed(0).length-1,t=a/Math.pow(10,i);return e.format(t)+"e"+e.format(i)}},e}),AJS.namespace("GH.NumberFormat",null,require("jira-agile/rapid/number-format"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/Format.js' */
define("jira-agile/rapid/format",["jira/util/logger","underscore","jira-agile/rapid/number-format"],function(r,a,e){var t=function t(n){var i=/'(?!')/g,l=/^\d+$/,u=/^(\d+),number$/,f=/^(\d+),choice,(.+)/,o=/^\s*(-?\d+)([#<])(.*)/,s=function(n,i){var s,c,g="";if(s=n.match(l))g=i.length>++n?i[n]:"";else if(s=n.match(u))c=e&&e.format||a.identity,g=i.length>++s[1]?c(i[s[1]]):"";else if(s=n.match(f)){var p=i.length>++s[1]?i[s[1]]:null;if(null!==p){for(var h=s[2].split("|"),m=null,v=0;v<h.length;v++){var d=h[v].match(o);if(!d){r.log("Bad formatting of message: "+n);break}var b=parseInt(d[1],10);if(p<b){if(m){g=m;break}g=d[3];break}if(p==b&&"#"==d[2]){g=d[3];break}v==h.length-1&&(g=d[3]),m=d[3]}var A=[g].concat(Array.prototype.slice.call(i,1));g=t.apply(AJS,A)}}return g},c=function(r){for(var a=!1,e=-1,t=0,n=0;n<r.length;n++){var i=r.charAt(n);if("'"==i&&(a=!a),!a)if("{"===i)0===t&&(e=n),t++;else if("}"===i&&t>0&&(t--,0===t)){var l=[];return l.push(r.substring(0,n+1)),l.push(r.substring(0,e)),l.push(r.substring(e+1,n)),l}}return null},g=function(r){for(var a=arguments,e="",t=c(r);t;)r=r.substring(t[0].length),e+=t[1].replace(i,""),e+=s(t[2],a),t=c(r);return e+=r.replace(i,"")};return g.apply(AJS,arguments)};return t}),AJS.namespace("AJS.format",null,require("jira-agile/rapid/format"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ops/MouseUtils.js' */
GH.MouseUtils={},GH.MouseUtils.openInSameTab=function(e){return(_.isUndefined(e.which)||null===e.which||1===e.which||0===e.which&&AJS.$.browser.msie)&&!(e.metaKey||e.ctrlKey||e.shiftKey||e.altKey&&!AJS.$.browser.msie)},GH.MouseUtils.getMetaKeys=function(e){return e?{metaPressed:e.metaKey||e.ctrlKey,shiftPressed:e.shiftKey}:{metaPressed:!1,shiftPressed:!1}},GH.MouseUtils.hasMetaKeys=function(e){return e.metaPressed||e.shiftPressed},GH.MouseUtils.isMetaPressed=function(e){return e.metaPressed},GH.MouseUtils.isShiftPressed=function(e){return e.shiftPressed};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ops/ScrollUtils.js' */
GH.ScrollUtils={},GH.ScrollUtils.scrollElementToViewPort=function(o,t,l){var r=o.scrollTop(),c=0;l.top<t.top?c=l.top-t.top:t.bottom<l.bottom&&(c=l.bottom-t.bottom),0!==c&&o.animate({scrollTop:r+c},"fast")};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/UrlFormat.js' */
define("jira-agile/rapid/url-format",["underscore","jira-agile/rapid/ajax"],function(e,r){var a={};return a.defaultContextPath="",a.prependBaseUrl=function(e){if(e&&0!==e.indexOf("http://")&&0!==e.indexOf("https://")){var n=r&&r.CONTEXT_PATH?r.CONTEXT_PATH:a.defaultContextPath;e=n+e}return e},a.getUrlForIssues=function(r){var n=e.compact(e.pluck(r,"id")).join(","),t=""!==n?"id in ("+n+")":"";return a.prependBaseUrl("/issues/?jql="+encodeURIComponent(t))},a}),AJS.namespace("GH.UrlFormat",null,require("jira-agile/rapid/url-format"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ops/CallbackManager.js' */
GH.CallbackManager={},GH.CallbackManager.callbacks={},GH.CallbackManager.executeCallbacks=function(a,l){GH.Logger.log("Executing callbacks for "+a,GH.Logger.Contexts.callback);var c=GH.CallbackManager.callbacks[a];c&&!_.isEmpty(c)&&(_.each(c,function(a){GH.Logger.log("Executing callback "+a.name,GH.Logger.Contexts.callback),a.fn(l)}),delete GH.CallbackManager.callbacks[a]),GH.Logger.log("Finished callbacks for "+a,GH.Logger.Contexts.callback)},GH.CallbackManager.registerCallback=function(a,l,c){GH.Logger.log("Registering callback "+l+" with namespace "+a);var e=GH.CallbackManager.callbacks[a];e||(e=GH.CallbackManager.callbacks[a]=[]),e.push({name:l,fn:c})},GH.CallbackManager.deleteCallbacks=function(a){_.each(_.keys(GH.CallbackManager.callbacks),function(l){l.substr(0,a.length)==a&&delete GH.CallbackManager.callbacks[l]})},GH.CallbackManager.getCallbacks=function(a){return GH.CallbackManager.callbacks[a]||[]},GH.CallbackManager.clear=function(){GH.CallbackManager.callbacks={}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/configuration/InlineEditField.js' */
define("jira-agile/rapid/configuration/inline-edit-field",["jira-agile/rapid/validation","jira-agile/rapid/logger","jira-agile/rapid/ajax","jira/util/formatter","jira/ajs/select/single-select","jira/ajs/list/item-descriptor","jira/ajs/list/group-descriptor","underscore","jquery","jira/util/logger"],function(e,t,i,a,n,l,r,d,u,s){"use strict";var c={};return c.defaultFieldData=function(e,t){var i=e.attr("data-fieldname"),a=e.attr("data-fieldvalue"),n=e.attr("data-defaultvalue"),l=e.attr("data-maxdisplaylength");return{fieldName:i,fieldValue:a,defaultValue:n,maxDisplayLength:l}},c.defaultActivate=function(e){e.editElement.focus(),e.editElement.select()},c.defaultTextRenderView=function(e){var t=u(GH.tpl.inlineeditfield.renderBasicTextView({canEdit:!0,fieldName:e.fieldName,fieldValue:e.newValue,displayValue:e.newValue,defaultValue:e.defaultValue,maxDisplayLength:e.maxDisplayLength,extraClasses:e.extraClasses}));return t},c.pencilTextRenderView=function(e){var t=u(GH.tpl.inlineeditfield.renderPencilTextView({canEdit:!0,fieldName:e.fieldName,fieldValue:e.newValue,displayValue:e.newValue}));return t},c.remoteTriggeredTextRenderView=function(e){var t=u(GH.tpl.inlineeditfield.renderRemoteTriggeredTextView({fieldName:e.fieldName,fieldValue:e.newValue,displayValue:e.newValue}));return t},c.renderTextFieldInlineEdit=function(e,t){t||(t=GH.tpl.inlineeditfield.renderBasicTextFieldEdit);var i=u(t(e));return i.val(e.fieldValue),i.blur(function(t){c.submitChanges(e)}),i.keydown(function(t){27===t.keyCode?(t.stopPropagation(),c.cancelEdit(e)):13===t.keyCode&&(t.preventDefault(),c.submitChanges(e))}),i},c.defaultTextValidation=function(e){var t=e.editElement.val();return e.newValue=t,!0},c.renderUserPickerInlineEdit=function(e,t){var i={value:e.fieldValue},a=u(GH.tpl.inlineeditfield.renderUserPickerFieldEdit({name:"userpickerSelect",data:i}));return a},c.userPickerActivate=function(e){var t=e.editElement.find("select"),d=function(e){if(!e.finishSubmitted){e.finishSubmitted=!0;var t=e.selectObject,i=t.getSelectedDescriptor(),a=null;if(!i)return void c.cancelEdit(e);a=i.value(),a!==e.fieldValue?c.submitChanges(e):c.cancelEdit(e)}},s=n.extend({submitForm:function(){this.suggestionsVisible||(this.handleFreeInput(),d(e))},_handleEscape:function(t){this.suggestionsVisible&&(t.stopPropagation(),"keyup"===t.type&&this.hideSuggestions()),"keyup"===t.type&&c.cancelEdit(e)},_deactivate:function(){this.acceptFocusedSuggestion(),this.hideSuggestions(),d(e)}}),o=new s({element:t,showDropdownButton:!1,removeOnUnSelect:!0,submitInputVal:!0,errorMessage:"The user \'{0}\' is invalid.",ajaxOptions:{url:i.CONTEXT_PATH+"/rest/api/1.0/users/picker",query:!0,minQueryLength:0,data:{showAvatar:!0},formatResponse:function(e){var t=[];return u(e).each(function(e,i){var a=new r({weight:e,id:"user-suggestions",replace:!0,label:i.footer});u(i.users).each(function(){a.addItem(new l({value:this.name,label:this.displayName,html:this.html,allowDuplicate:!1,icon:this.avatarUrl}))}),t.push(a)}),t}}});e.selectObject=o;var f=e.editElement.find("input");f.focus(),t.select()},c.userPickerValidation=function(e){var t=e.selectObject.getSelectedDescriptor();return e.newValue=t.value(),e.newDisplayValue=t.label(),0===e.newDisplayValue.length&&(e.newDisplayValue=e.newValue),!0},c.renderDatePickerInlineEdit=function(e,t){var i=u(GH.tpl.inlineeditfield.renderDatePickerFieldEdit({fieldName:e.fieldName,fieldValue:e.fieldValue}));return i},c.datePickerActivate=function(t,i){var a=t.fieldName;i=d.extend({},{cache:!1,firstDay:0,inputField:"ghx-datepicker-"+a,button:"ghx-datepicker-"+a+"_trigger_c",align:"Br",singleClick:!0,showsTime:!0,timeFormat:12,positionStyle:"fixed",onClose:function(e){c.submitChanges(t),e.hide()},ifFormat:GH.TimeFormat.dateTimePickerFormat},i),Calendar.setup(i),u("#ghx-datepicker-"+a).keydown(function(i){27===i.keyCode?(i.stopPropagation(),c.cancelEdit(t),e.clearContextualErrors()):13===i.keyCode&&(i.preventDefault(),c.submitChanges(t))}),u("#ghx-datepicker-"+a).focus(),u("#ghx-datepicker-"+a).blur(function(){c.submitChanges(t)}),s.trace("gh.inlineEdit.datePicker.activate")},c.datePickerValidation=function(e){var t=e.editElement.find("input").val();return e.newValue=t,!0},c.activeEdits=[],c.cancelActiveEdits=function(){d.each(c.activeEdits,function(e){c.cancelEdit(e)})},c.submitActiveEdits=function(){return!d.isEmpty(c.activeEdits)&&(d.each(c.activeEdits,function(e){c.submitChanges(e)}),!0)},c.register=function(e,t){var i={getViewElement:function(e){return u(this)},getData:c.defaultFieldData,preEdit:function(e){},renderEdit:c.renderTextFieldInlineEdit,activate:c.defaultActivate,validate:c.defaultTextValidation,save:function(e){c.updateView(e)},renderView:c.defaultTextRenderView,postEdit:function(e){},startEdit:c.startEdit};t&&u.extend(!0,i,t);var a=u(document);a.off("click",e).on("click",e,i,function(e){var t=e.data,a=t.getViewElement.call(this,e);i.startEdit(a,t)})},c.startEdit=function(e,i){t.log("InlineEditable.startEdit",t.Contexts.ui);var a;if(i.getData&&(a=i.getData(e,i)),a){if(a.viewElement=e,a.options=i,i.preEdit){var n=i.preEdit(a);if(n===!1)return}c.activeEdits.push(a);var l=i.renderEdit(a);a.editElement=l,u(a.viewElement).replaceWith(a.editElement),i.activate&&i.activate(a)}},c.cancelEdit=function(t){t.canceled=!0,t.editElement.replaceWith(t.viewElement),e.clearContextualErrors(t.viewElement),t.options.postEdit&&t.options.postEdit(t),c.removeFromActiveEdits(t)},c.submitChanges=function(e){var t=e.options.validate(e);return t?void e.options.save(e):void e.options.activate(e)},c.updateView=function(t){t.updated=!0;var i=t.options.renderView(t);t.viewElement=i,t.editElement.replaceWith(i),e.clearContextualErrors(t.viewElement),t.options.postEdit&&t.options.postEdit(t),c.removeFromActiveEdits(t)},c.removeFromActiveEdits=function(e){c.activeEdits=d.without(c.activeEdits,e)},c}),AJS.namespace("GH.RapidBoard.Util.InlineEditable",null,require("jira-agile/rapid/configuration/inline-edit-field"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/configuration/InlineEditField.soy' */
// This file was automatically generated from InlineEditField.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.inlineeditfield.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.inlineeditfield == 'undefined') { GH.tpl.inlineeditfield = {}; }


GH.tpl.inlineeditfield.renderBasicTextView = function(opt_data, opt_ignored) {
  return '<span' + ((opt_data.canEdit) ? ' class="field-value ghx-editable js-editable-field js-edit-' + soy.$$escapeHtml(opt_data.fieldName) + '-trigger' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '" tabindex="0"' : ' class="field-value ghx-readonly' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '"') + ' data-fieldname="' + soy.$$escapeHtml(opt_data.fieldName) + '" data-fieldvalue="' + ((opt_data.fieldValue) ? soy.$$escapeHtml(opt_data.fieldValue) : '') + '"' + ((opt_data.defaultValue) ? ' data-defaultvalue="' + soy.$$escapeHtml(opt_data.defaultValue) + '"' : '') + ' data-maxdisplaylength="' + ((opt_data.maxDisplayLength) ? soy.$$escapeHtml(opt_data.maxDisplayLength) : '') + '" >' + ((opt_data.defaultValue && ! opt_data.displayValue) ? soy.$$escapeHtml(opt_data.defaultValue) : (opt_data.maxDisplayLength) ? soy.$$truncate(soy.$$escapeHtml(opt_data.displayValue), opt_data.maxDisplayLength, true) : soy.$$escapeHtml(opt_data.displayValue)) + '</span>';
};
if (goog.DEBUG) {
  GH.tpl.inlineeditfield.renderBasicTextView.soyTemplateName = 'GH.tpl.inlineeditfield.renderBasicTextView';
}


GH.tpl.inlineeditfield.renderBasicTextFieldEdit = function(opt_data, opt_ignored) {
  return '<input type="text" name="' + soy.$$escapeHtml(opt_data.fieldName) + '" class="text js-editing-field js-edit-' + soy.$$escapeHtml(opt_data.fieldName) + ' ' + ((opt_data.cssClass) ? ' ' + soy.$$escapeHtml(opt_data.cssClass) : '') + '" ' + ((opt_data.maxLength) ? 'maxlength="' + soy.$$escapeHtml(opt_data.maxLength) + '"' : '') + '>';
};
if (goog.DEBUG) {
  GH.tpl.inlineeditfield.renderBasicTextFieldEdit.soyTemplateName = 'GH.tpl.inlineeditfield.renderBasicTextFieldEdit';
}


GH.tpl.inlineeditfield.renderUserPickerFieldEdit = function(opt_data, opt_ignored) {
  return '<span><select class="js-default-user-picker" name="' + soy.$$escapeHtml(opt_data.name) + '">' + ((opt_data.data.avatarUrl) ? '<option selected="selected" style="background-image:url(\'' + soy.$$escapeHtml(opt_data.data.avatarUrl) + '\')" value="' + soy.$$escapeHtml(opt_data.data.value) + '">' : '<option selected="selected" value="' + soy.$$escapeHtml(opt_data.data.value) + '">') + ((opt_data.data.displayName) ? soy.$$escapeHtml(opt_data.data.displayName) : soy.$$escapeHtml(opt_data.data.value)) + '</option></select></span>';
};
if (goog.DEBUG) {
  GH.tpl.inlineeditfield.renderUserPickerFieldEdit.soyTemplateName = 'GH.tpl.inlineeditfield.renderUserPickerFieldEdit';
}


GH.tpl.inlineeditfield.renderDatePickerFieldEdit = function(opt_data, opt_ignored) {
  return '<span><input id="ghx-datepicker-' + soy.$$escapeHtml(opt_data.fieldName) + '" class="text medium-field js-editing-field" type="text" value="' + soy.$$escapeHtml(opt_data.fieldValue) + '"><span id="ghx-datepicker-' + soy.$$escapeHtml(opt_data.fieldName) + '_trigger_c" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar js-editing-field" title="' + soy.$$escapeHtml("Edit end date") + '">' + soy.$$escapeHtml("Edit") + '</span></span>';
};
if (goog.DEBUG) {
  GH.tpl.inlineeditfield.renderDatePickerFieldEdit.soyTemplateName = 'GH.tpl.inlineeditfield.renderDatePickerFieldEdit';
}


GH.tpl.inlineeditfield.renderPencilTextView = function(opt_data, opt_ignored) {
  return '<span' + ((opt_data.canEdit) ? ' class="field-value ghx-editable-secondary js-editable-field js-edit-' + soy.$$escapeHtml(opt_data.fieldName) + '-trigger" tabindex="0"' : ' class="field-value ghx-readonly-secondary"') + ' data-fieldname="' + soy.$$escapeHtml(opt_data.fieldName) + '" data-fieldvalue="' + soy.$$escapeHtml(opt_data.fieldValue) + '" >' + soy.$$escapeHtml(opt_data.displayValue) + ((opt_data.canEdit) ? '<span class="js-edit-pencil ghx-icon ghx-icon-edit" title="' + soy.$$escapeHtml("Click to edit") + '"></span>' : '') + '</span>';
};
if (goog.DEBUG) {
  GH.tpl.inlineeditfield.renderPencilTextView.soyTemplateName = 'GH.tpl.inlineeditfield.renderPencilTextView';
}


GH.tpl.inlineeditfield.renderRemoteTriggeredTextView = function(opt_data, opt_ignored) {
  return '<span class="field-value js-editable-field js-edit-' + soy.$$escapeHtml(opt_data.fieldName) + '-trigger" data-fieldname="' + soy.$$escapeHtml(opt_data.fieldName) + '" data-fieldvalue="' + soy.$$escapeHtml(opt_data.fieldValue) + '" >' + soy.$$escapeHtml(opt_data.displayValue) + '</span>';
};
if (goog.DEBUG) {
  GH.tpl.inlineeditfield.renderRemoteTriggeredTextView.soyTemplateName = 'GH.tpl.inlineeditfield.renderRemoteTriggeredTextView';
}


GH.tpl.inlineeditfield.renderJQLAutocomplete = function(opt_data, opt_ignored) {
  return '<span><textarea class="js-jql-autocomplete-field textarea" name="' + soy.$$escapeHtml(opt_data.name) + '" id="' + soy.$$escapeHtml(opt_data.namespace) + '-jql-' + ((opt_data.id) ? soy.$$escapeHtml(opt_data.id) : 'create') + '" cols="20" rows="2">' + ((opt_data.value) ? soy.$$escapeHtml(opt_data.value) : '') + '</textarea><span id="' + soy.$$escapeHtml(opt_data.namespace) + '-jql-errormsg-' + ((opt_data.id) ? soy.$$escapeHtml(opt_data.id) : 'create') + '" class="icon jqlgood js-jql-autocomplete-error"><span></span></span></span>';
};
if (goog.DEBUG) {
  GH.tpl.inlineeditfield.renderJQLAutocomplete.soyTemplateName = 'GH.tpl.inlineeditfield.renderJQLAutocomplete';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/lib/jquery/jquery.ui.resizable.js' */
/*!
 * jQuery UI Resizable 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/resizable/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
!function(t,e){function i(t){return parseInt(t,10)||0}function s(t){return!isNaN(parseInt(t,10))}t.widget("ui.resizable",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,alsoResizeMirror:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var e,i,s,h,n,o=this,a=this.options;if(this.element.addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!a.aspectRatio,aspectRatio:a.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:a.helper||a.ghost||a.animate?a.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=a.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),e=this.handles.split(","),this.handles={},i=0;i<e.length;i++)s=t.trim(e[i]),n="ui-resizable-"+s,h=t("<div class='ui-resizable-handle "+n+"'></div>"),h.css({zIndex:a.zIndex}),"se"===s&&h.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(h);this._renderAxis=function(e){var i,s,h,n;e=e||this.element;for(i in this.handles)this.handles[i].constructor===String&&(this.handles[i]=t(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(s=t(this.handles[i],this.element),n=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth(),h=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),e.css(h,n),this._proportionallyResize()),t(this.handles[i]).length},this._renderAxis(this.element),this._handles=t(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(h=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=h&&h[1]?h[1]:"se")}),a.autoHide&&(this._handles.hide(),t(this.element).addClass("ui-resizable-autohide").mouseenter(function(){a.disabled||(t(this).removeClass("ui-resizable-autohide"),o._handles.show())}).mouseleave(function(){a.disabled||o.resizing||(t(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,i=function(e){t(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(e){var i,s,h=!1;for(i in this.handles)s=t(this.handles[i])[0],(s===e.target||t.contains(s,e.target))&&(h=!0);return!this.options.disabled&&h},_mouseStart:function(e){var s,h,n,o=this.options,a=this.element.position(),l=this.element;return this.resizing=!0,/absolute/.test(l.css("position"))?l.css({position:"absolute",top:l.css("top"),left:l.css("left")}):l.is(".ui-draggable")&&l.css({position:"absolute",top:a.top,left:a.left}),this._renderProxy(),s=i(this.helper.css("left")),h=i(this.helper.css("top")),o.containment&&(s+=t(o.containment).scrollLeft()||0,h+=t(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:s,top:h},this.size=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalSize=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalPosition={left:s,top:h},this.sizeDiff={width:l.outerWidth()-l.width(),height:l.outerHeight()-l.height()},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,n=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===n?this.axis+"-resize":n),l.addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(e){var i,s=this.helper,h={},n=this.originalMousePosition,o=this.axis,a=this.position.top,l=this.position.left,r=this.size.width,p=this.size.height,d=e.pageX-n.left||0,g=e.pageY-n.top||0,f=this._change[o];return!!f&&(i=f.apply(this,[e,d,g]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(i=this._updateRatio(i,e)),i=this._respectSize(i,e),this._updateCache(i),this._propagate("resize",e),this.position.top!==a&&(h.top=this.position.top+"px"),this.position.left!==l&&(h.left=this.position.left+"px"),this.size.width!==r&&(h.width=this.size.width+"px"),this.size.height!==p&&(h.height=this.size.height+"px"),s.css(h),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(h)||this._trigger("resize",e,this.ui()),!1)},_mouseStop:function(e){this.resizing=!1;var i,s,h,n,o,a,l,r=this.options,p=this;return this._helper&&(i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),h=s&&t.ui.hasScroll(i[0],"left")?0:p.sizeDiff.height,n=s?0:p.sizeDiff.width,o={width:p.helper.width()-n,height:p.helper.height()-h},a=parseInt(p.element.css("left"),10)+(p.position.left-p.originalPosition.left)||null,l=parseInt(p.element.css("top"),10)+(p.position.top-p.originalPosition.top)||null,r.animate||this.element.css(t.extend(o,{top:l,left:a})),p.helper.height(p.size.height),p.helper.width(p.size.width),this._helper&&!r.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(t){var e,i,h,n,o,a=this.options;o={minWidth:s(a.minWidth)?a.minWidth:0,maxWidth:s(a.maxWidth)?a.maxWidth:1/0,minHeight:s(a.minHeight)?a.minHeight:0,maxHeight:s(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||t)&&(e=o.minHeight*this.aspectRatio,h=o.minWidth/this.aspectRatio,i=o.maxHeight*this.aspectRatio,n=o.maxWidth/this.aspectRatio,e>o.minWidth&&(o.minWidth=e),h>o.minHeight&&(o.minHeight=h),i<o.maxWidth&&(o.maxWidth=i),n<o.maxHeight&&(o.maxHeight=n)),this._vBoundaries=o},_updateCache:function(t){this.offset=this.helper.offset(),s(t.left)&&(this.position.left=t.left),s(t.top)&&(this.position.top=t.top),s(t.height)&&(this.size.height=t.height),s(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,i=this.size,h=this.axis;return s(t.height)?t.width=t.height*this.aspectRatio:s(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===h&&(t.left=e.left+(i.width-t.width),t.top=null),"nw"===h&&(t.top=e.top+(i.height-t.height),t.left=e.left+(i.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,i=this.axis,h=s(t.width)&&e.maxWidth&&e.maxWidth<t.width,n=s(t.height)&&e.maxHeight&&e.maxHeight<t.height,o=s(t.width)&&e.minWidth&&e.minWidth>t.width,a=s(t.height)&&e.minHeight&&e.minHeight>t.height,l=this.originalPosition.left+this.originalSize.width,r=this.position.top+this.size.height,p=/sw|nw|w/.test(i),d=/nw|ne|n/.test(i);return o&&(t.width=e.minWidth),a&&(t.height=e.minHeight),h&&(t.width=e.maxWidth),n&&(t.height=e.maxHeight),o&&p&&(t.left=l-e.minWidth),h&&p&&(t.left=l-e.maxWidth),a&&d&&(t.top=r-e.minHeight),n&&d&&(t.top=r-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var t,e,i,s,h,n=this.helper||this.element;for(t=0;t<this._proportionallyResizeElements.length;t++){if(h=this._proportionallyResizeElements[t],!this.borderDif)for(this.borderDif=[],i=[h.css("borderTopWidth"),h.css("borderRightWidth"),h.css("borderBottomWidth"),h.css("borderLeftWidth")],s=[h.css("paddingTop"),h.css("paddingRight"),h.css("paddingBottom"),h.css("paddingLeft")],e=0;e<i.length;e++)this.borderDif[e]=(parseInt(i[e],10)||0)+(parseInt(s[e],10)||0);h.css({height:n.height()-this.borderDif[0]-this.borderDif[2]||0,width:n.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var e=this.element,i=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize,s=this.originalPosition;return{left:s.left+e,width:i.width-e}},n:function(t,e,i){var s=this.originalSize,h=this.originalPosition;return{top:h.top+i,height:s.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},sw:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,s]))},ne:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},nw:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,s]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]),"resize"!==e&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var i=t(this).data("resizable"),s=i.options,h=i._proportionallyResizeElements,n=h.length&&/textarea/i.test(h[0].nodeName),o=n&&t.ui.hasScroll(h[0],"left")?0:i.sizeDiff.height,a=n?0:i.sizeDiff.width,l={width:i.size.width-a,height:i.size.height-o},r=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,p=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(l,p&&r?{top:p,left:r}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};h&&h.length&&t(h[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var e,s,h,n,o,a,l,r=t(this).data("resizable"),p=r.options,d=r.element,g=p.containment,f=g instanceof t?g.get(0):/parent/.test(g)?d.parent().get(0):g;f&&(r.containerElement=t(f),/document/.test(g)||g===document?(r.containerOffset={left:0,top:0},r.containerPosition={left:0,top:0},r.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(e=t(f),s=[],t(["Top","Right","Left","Bottom"]).each(function(t,h){s[t]=i(e.css("padding"+h))}),r.containerOffset=e.offset(),r.containerPosition=e.position(),r.containerSize={height:e.innerHeight()-s[3],width:e.innerWidth()-s[1]},h=r.containerOffset,n=r.containerSize.height,o=r.containerSize.width,a=t.ui.hasScroll(f,"left")?f.scrollWidth:o,l=t.ui.hasScroll(f)?f.scrollHeight:n,r.parentData={element:f,left:h.left,top:h.top,width:a,height:l}))},resize:function(e){var i,s,h,n,o=t(this).data("resizable"),a=o.options,l=o.containerOffset,r=o.position,p=o._aspectRatio||e.shiftKey,d={top:0,left:0},g=o.containerElement;g[0]!==document&&/static/.test(g.css("position"))&&(d=l),r.left<(o._helper?l.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-l.left:o.position.left-d.left),p&&(o.size.height=o.size.width/o.aspectRatio),o.position.left=a.helper?l.left:0),r.top<(o._helper?l.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-l.top:o.position.top),p&&(o.size.width=o.size.height*o.aspectRatio),o.position.top=o._helper?l.top:0),o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top,i=Math.abs((o._helper?o.offset.left-d.left:o.offset.left-d.left)+o.sizeDiff.width),s=Math.abs((o._helper?o.offset.top-d.top:o.offset.top-l.top)+o.sizeDiff.height),h=o.containerElement.get(0)===o.element.parent().get(0),n=/relative|absolute/.test(o.containerElement.css("position")),h&&n&&(i-=o.parentData.left),i+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-i,p&&(o.size.height=o.size.width/o.aspectRatio)),s+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-s,p&&(o.size.width=o.size.height*o.aspectRatio))},stop:function(){var e=t(this).data("resizable"),i=e.options,s=e.containerOffset,h=e.containerPosition,n=e.containerElement,o=t(e.helper),a=o.offset(),l=o.outerWidth()-e.sizeDiff.width,r=o.outerHeight()-e.sizeDiff.height;e._helper&&!i.animate&&/relative/.test(n.css("position"))&&t(this).css({left:a.left-h.left-s.left,width:l,height:r}),e._helper&&!i.animate&&/static/.test(n.css("position"))&&t(this).css({left:a.left-h.left-s.left,width:l,height:r})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).data("resizable"),i=e.options,s=function(e){t(e).each(function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)})})};"object"!=typeof i.alsoResize||i.alsoResize.parentNode?s(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],s(i.alsoResize)):t.each(i.alsoResize,function(t){s(t)})},resize:function(e,i){var s=t(this).data("resizable"),h=s.options,n=s.originalSize,o=s.originalPosition,a={height:s.size.height-n.height||0,width:s.size.width-n.width||0,top:s.position.top-o.top||0,left:s.position.left-o.left||0},l=function(e,s){t(e).each(function(){var e=t(this),h=t(this).data("ui-resizable-alsoresize"),n={},o=s&&s.length?s:e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(o,function(t,e){var i=(h[e]||0)+(a[e]||0);i&&i>=0&&(n[e]=i||null)}),e.css(n)})};"object"!=typeof h.alsoResize||h.alsoResize.nodeType?l(h.alsoResize):t.each(h.alsoResize,function(t,e){l(t,e)})},stop:function(){t(this).removeData("resizable-alsoresize")}}),t.ui.plugin.add("resizable","alsoResizeMirror",{start:function(){var e=t(this).data("resizable"),i=e.options,s=function(e){t(e).each(function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)})})};"object"!=typeof i.alsoResizeMirror||i.alsoResizeMirror.parentNode?s(i.alsoResizeMirror):i.alsoResizeMirror.length?(i.alsoResizeMirror=i.alsoResizeMirror[0],s(i.alsoResizeMirror)):t.each(i.alsoResizeMirror,function(t){s(t)})},resize:function(e,i){var s=t(this).data("resizable"),h=s.options,n=s.originalSize,o=s.originalPosition,a={height:s.size.height-n.height||0,width:s.size.width-n.width||0,top:s.position.top-o.top||0,left:s.position.left-o.left||0},l=function(e,s){t(e).each(function(){var e=t(this),h=t(this).data("ui-resizable-alsoresize"),n={},o=s&&s.length?s:e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(o,function(t,e){var i=(h[e]||0)-(a[e]||0);i&&i>=0&&(n[e]=i||null)}),e.css(n)})};"object"!=typeof h.alsoResizeMirror||h.alsoResizeMirror.nodeType?l(h.alsoResizeMirror):t.each(h.alsoResizeMirror,function(t,e){l(t,e)})},stop:function(){t(this).removeData("resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).data("resizable"),i=e.options,s=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).data("resizable");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).data("resizable");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e=t(this).data("resizable"),i=e.options,s=e.size,h=e.originalSize,n=e.originalPosition,o=e.axis,a="number"==typeof i.grid?[i.grid,i.grid]:i.grid,l=a[0]||1,r=a[1]||1,p=Math.round((s.width-h.width)/l)*l,d=Math.round((s.height-h.height)/r)*r,g=h.width+p,f=h.height+d,c=i.maxWidth&&i.maxWidth<g,u=i.maxHeight&&i.maxHeight<f,m=i.minWidth&&i.minWidth>g,z=i.minHeight&&i.minHeight>f;i.grid=a,m&&(g+=l),z&&(f+=r),c&&(g-=l),u&&(f-=r),/^(se|s|e)$/.test(o)?(e.size.width=g,e.size.height=f):/^(ne)$/.test(o)?(e.size.width=g,e.size.height=f,e.position.top=n.top-d):/^(sw)$/.test(o)?(e.size.width=g,e.size.height=f,e.position.left=n.left-p):(e.size.width=g,e.size.height=f,e.position.top=n.top-d,e.position.left=n.left-p)}})}(jQuery);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/lib/jquery/jquery.ui.droppable.js' */
/*!
 * jQuery UI Droppable 1.8.23
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Droppables
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *	jquery.ui.mouse.js
 *	jquery.ui.draggable.js
 */
!function(e,t){e.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var t=this.options,i=t.accept;this.isover=0,this.isout=1,this.accept=e.isFunction(i)?i:function(e){return e.is(i)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var t=e.ui.ddmanager.droppables[this.options.scope],i=0;i<t.length;i++)t[i]==this&&t.splice(i,1);return this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable"),this},_setOption:function(t,i){"accept"==t&&(this.accept=e.isFunction(i)?i:function(e){return e.is(i)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!=this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!=this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var s=i||e.ui.ddmanager.current;if(!s||(s.currentItem||s.element)[0]==this.element[0])return!1;var o=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"droppable");if(t.options.greedy&&!t.options.disabled&&t.options.scope==s.options.scope&&t.accept.call(t.element[0],s.currentItem||s.element)&&e.ui.intersect(s,e.extend(t,{offset:t.element.offset()}),t.options.tolerance))return o=!0,!1}),!o&&(!!this.accept.call(this.element[0],s.currentItem||s.element)&&(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(s)),this.element))},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.extend(e.ui.droppable,{version:"1.8.23"}),e.ui.intersect=function(t,i,s){if(!i.offset)return!1;var o=(t.positionAbs||t.position.absolute).left,r=o+t.helperProportions.width,n=(t.positionAbs||t.position.absolute).top,a=n+t.helperProportions.height,l=i.offset.left,p=l+i.proportions.width,h=i.offset.top,c=h+i.proportions.height;switch(s){case"fit":return l<=o&&r<=p&&h<=n&&a<=c;case"intersect":return l<o+t.helperProportions.width/2&&r-t.helperProportions.width/2<p&&h<n+t.helperProportions.height/2&&a-t.helperProportions.height/2<c;case"pointer":var d=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,u=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,f=e.ui.isOver(u,d,h,l,i.proportions.height,i.proportions.width);return f;case"touch":return(n>=h&&n<=c||a>=h&&a<=c||n<h&&a>c)&&(o>=l&&o<=p||r>=l&&r<=p||o<l&&r>p);default:return!1}},e.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(t,i){var s=e.ui.ddmanager.droppables[t.options.scope]||[],o=i?i.type:null,r=(t.currentItem||t.element).find(":data(droppable)").andSelf();e:for(var n=0;n<s.length;n++)if(!(s[n].options.disabled||t&&!s[n].accept.call(s[n].element[0],t.currentItem||t.element))){for(var a=0;a<r.length;a++)if(r[a]==s[n].element[0]){s[n].proportions.height=0;continue e}s[n].visible="none"!=s[n].element.css("display"),s[n].visible&&("mousedown"==o&&s[n]._activate.call(s[n],i),s[n].offset=s[n].element.offset(),s[n].proportions={width:s[n].element[0].offsetWidth,height:s[n].element[0].offsetHeight})}},drop:function(t,i){var s=!1;return e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(s=this._drop.call(this,i)||s),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,i)))}),s},dragStart:function(t,i){t.element.parents(":not(body,html)").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)})},drag:function(t,i){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,i),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var s=e.ui.intersect(t,this,this.options.tolerance),o=s||1!=this.isover?s&&0==this.isover?"isover":null:"isout";if(o){var r;if(this.options.greedy){var n=this.element.parents(":data(droppable):eq(0)");n.length&&(r=e.data(n[0],"droppable"),r.greedyChild="isover"==o?1:0)}r&&"isover"==o&&(r.isover=0,r.isout=1,r._out.call(r,i)),this[o]=1,this["isout"==o?"isover":"isout"]=0,this["isover"==o?"_over":"_out"].call(this,i),r&&"isout"==o&&(r.isout=0,r.isover=1,r._over.call(r,i))}}})},dragStop:function(t,i){t.element.parents(":not(body,html)").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}}}(jQuery);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/lib/jquery/jquery.ui.sortable.js' */
!function(t,e){t.widget("ui.sortable",t.ui.mouse,{widgetEventPrefix:"sort",options:{appendTo:"parent",axis:!1,axisAdjusted:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",helperAdjusted:!1,items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",intersectionOverride:!1,helperProportions:!1,zIndex:1e3},_create:function(){this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=!!this.items.length&&(/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display"))),this.offset=this.element.offset(),this._mouseInit()},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").removeData("sortable").unbind(".sortable"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData("sortable-item");return this},_setOption:function(e,i){"disabled"===e?(this.options[e]=i,this.widget()[i?"addClass":"removeClass"]("ui-sortable-disabled")):t.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(e,i){if(this.reverting)return!1;if(this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(e);var s=null,o=this;t(e.target).parents().each(function(){if(t.data(this,"sortable-item")==o)return s=t(this),!1});if(t.data(e.target,"sortable-item")==o&&(s=t(e.target)),!s)return!1;if(this.options.handle&&!i){var r=!1;if(t(this.options.handle,s).find("*").andSelf().each(function(){this==e.target&&(r=!0)}),!r)return!1}return this.currentItem=s,this._removeCurrentsFromItems(),!0},_mouseStart:function(i,s,o){var r=this.options,n=this;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(i),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),"function"==typeof this.options.additionalScrollParents?this.additionalScrollParents=this.options.additionalScrollParents():this.additionalScrollParents=e,this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.options.initializeTopAndLeft&&(this.helper[0].style.left=this.offset.left+"px",this.helper[0].style.top=this.offset.top+"px"),t.extend(this.offset,{click:{left:i.pageX-this.offset.left,top:i.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this._generatePosition(i),this.originalPageX=i.pageX,this.originalPageY=i.pageY,r.cursorAt&&this._adjustOffsetFromHelper(r.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),r.containment&&this._setContainment(),r.cursor&&(t("body").css("cursor")&&(this._storedCursor=t("body").css("cursor")),t("body").css("cursor",r.cursor)),r.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",r.opacity)),r.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",r.zIndex)),"function"==typeof this.options.axisAdjusted&&this.options.axisAdjusted.apply(this),this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this.additionalScrollParents&&(this.additionalOverflowOffsets=[],this.additionalOverflowSizes=[],t.each(this.additionalScrollParents,function(e,i){var s=t(i);n.additionalOverflowOffsets[e]=s.offset(),n.additionalOverflowSizes[e]={width:s.width(),height:s.height()}})),this._trigger("start",i,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!o)for(var h=this.containers.length-1;h>=0;h--)this.containers[h]._trigger("activate",i,n._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!r.dropBehaviour&&setTimeout(function(){t.ui.ddmanager.prepareOffsets(n,i)},0),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(i),!0},_mouseDrag:function(e){if(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll){var i=this.options,s=!1;if(this.options.ignoreOriginalScroll||(this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<i.scrollSensitivity?this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop+i.scrollSpeed:e.pageY-this.overflowOffset.top<i.scrollSensitivity&&(this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop-i.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<i.scrollSensitivity?this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft+i.scrollSpeed:e.pageX-this.overflowOffset.left<i.scrollSensitivity&&(this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft-i.scrollSpeed)):(e.pageY-t(document).scrollTop()<i.scrollSensitivity?s=t(document).scrollTop(t(document).scrollTop()-i.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<i.scrollSensitivity&&(s=t(document).scrollTop(t(document).scrollTop()+i.scrollSpeed)),e.pageX-t(document).scrollLeft()<i.scrollSensitivity?s=t(document).scrollLeft(t(document).scrollLeft()-i.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<i.scrollSensitivity&&(s=t(document).scrollLeft(t(document).scrollLeft()+i.scrollSpeed)))),this.additionalScrollParents){var o=this,r={top:i.scrollSensitivity,right:i.scrollSensitivity,bottom:i.scrollSensitivity,left:i.scrollSensitivity};t.each(this.additionalScrollParents,function(n,h){var l=o.additionalOverflowOffsets[n],a=o.additionalOverflowSizes[n],c=i.autoScrollOffsets(),p=t.extend(r,c);l.left<=e.pageX&&e.pageX<l.left+a.width&&(l.top+h.offsetHeight-e.pageY<i.scrollSensitivity?h.scrollTop=s=h.scrollTop+i.scrollSpeed:e.pageY-l.top<p.top&&(h.scrollTop=s=h.scrollTop-i.scrollSpeed)),l.top<=e.pageY&&e.pageY<l.top+a.height&&(l.left+h.offsetWidth-e.pageX<i.scrollSensitivity?h.scrollLeft=s=h.scrollLeft+i.scrollSpeed:e.pageX-l.left<i.scrollSensitivity&&(h.scrollLeft=s=h.scrollLeft-i.scrollSpeed))})}s&&i.containment&&this._setContainment(),s!==!1&&t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)}this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),"function"==typeof this.options.helperAdjusted&&this.options.helperAdjusted.apply(this);var n=this.element.offset(),h={width:this.element.width(),height:this.element.height()};if(n.left<=e.pageX&&e.pageX<=n.left+h.width&&n.top<=e.pageY&&e.pageY<=n.top+h.height)for(var l=this.items.length-1;l>=0;l--){var a=this.items[l],c=a.item[0],p="function"==typeof this.options.intersectionOverride?this.options.intersectionOverride.apply(this,[a]):this._intersectsWithPointer(a);if(p&&!(c==this.currentItem[0]||this.placeholder[1==p?"next":"prev"]()[0]==c||t.ui.contains(this.placeholder[0],c)||"semi-dynamic"==this.options.type&&t.ui.contains(this.element[0],c))){if(this.direction=1==p?"down":"up","pointer"!=this.options.tolerance&&"function"!=typeof this.options.intersectionOverride&&!this._intersectsWithSides(a))break;this._rearrange(e,a),this._trigger("change",e,this._uiHash());break}}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,i){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var s=this,o=s.placeholder.offset();s.reverting=!0,t(this.helper).animate({left:o.left-this.offset.parent.left-s.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:o.top-this.offset.parent.top-s.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){s._clear(e)})}else this._clear(e,i);return!1}},cancel:function(){var e=this;if(this.dragging){this._mouseUp({target:null}),"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("deactivate",null,e._uiHash(this)),this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",null,e._uiHash(this)),this.containers[i].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},t(i).each(function(){var i=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[-=_](.+)/);i&&s.push((e.key||i[1]+"[]")+"="+(e.key&&e.expression?i[1]:i[2]))}),!s.length&&e.key&&s.push(e.key+"="),s.join("&")},toArray:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},i.each(function(){s.push(t(e.item||this).attr(e.attribute||"id")||"")}),s},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,s=this.positionAbs.top,o=s+this.helperProportions.height,r=t.left,n=r+t.width,h=t.top,l=h+t.height,a=this.offset.click.top,c=this.offset.click.left,p=s+a>h&&s+a<l&&e+c>r&&e+c<n;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?p:r<e+this.helperProportions.width/2&&i-this.helperProportions.width/2<n&&h<s+this.helperProportions.height/2&&o-this.helperProportions.height/2<l},_intersectsWithPointer:function(e){var i=t.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),s=t.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),o=i&&s,r=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection();return!!o&&(this.floating?n&&"right"==n||"down"==r?2:1:r&&("down"==r?2:1))},_intersectsWithSides:function(e){var i=t.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),s=t.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),o=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return this.floating&&r?"right"==r&&s||"left"==r&&!s:o&&("down"==o&&i||"up"==o&&!i)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!=t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!=t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor==String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){var i=[],s=[],o=this._connectWith();if(o&&e)for(var r=o.length-1;r>=0;r--)for(var n=t(o[r]),h=n.length-1;h>=0;h--){var l=t.data(n[h],"sortable");l&&l!=this&&!l.options.disabled&&s.push([t.isFunction(l.options.items)?l.options.items.call(l.element):t(l.options.items,l.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),l])}s.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var r=s.length-1;r>=0;r--)s[r][0].each(function(){i.push(this)});return t(i)},_removeCurrentsFromItems:function(){for(var t=this.currentItem.find(":data(sortable-item)"),e=0;e<this.items.length;e++)for(var i=0;i<t.length;i++)t[i]==this.items[e].item[0]&&this.items.splice(e,1)},_refreshItems:function(e){this.items=[],this.containers=[this];var i=this.items,s=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],o=this._connectWith();if(o)for(var r=o.length-1;r>=0;r--)for(var n=t(o[r]),h=n.length-1;h>=0;h--){var l=t.data(n[h],"sortable");l&&l!=this&&!l.options.disabled&&(s.push([t.isFunction(l.options.items)?l.options.items.call(l.element[0],e,{item:this.currentItem}):t(l.options.items,l.element),l]),this.containers.push(l))}for(var r=s.length-1;r>=0;r--)for(var a=s[r][1],c=s[r][0],h=0,p=c.length;h<p;h++){var f=t(c[h]);f.data("sortable-item",a),i.push({item:f,instance:a,width:0,height:0,left:0,top:0})}},refreshPositions:function(e){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var i=this.items.length-1;i>=0;i--){var s=this.items[i],o=this.options.toleranceElement?t(this.options.toleranceElement,s.item):s.item;e||(s.width=o.outerWidth(),s.height=o.outerHeight());var r=o.offset();s.left=r.left,s.top=r.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var i=this.containers.length-1;i>=0;i--){var r=this.containers[i].element.offset();this.containers[i].containerCache.left=r.left,this.containers[i].containerCache.top=r.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight()}return this},_createPlaceholder:function(e){var i=e||this,s=i.options;if(!s.placeholder||s.placeholder.constructor==String){var o=s.placeholder;s.placeholder={element:function(){var e=t(document.createElement(i.currentItem[0].nodeName)).addClass(o||i.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return o||(e.style.visibility="hidden"),e},update:function(t,e){o&&!s.forcePlaceholderSize||(e.height()||e.height(i.currentItem.innerHeight()-parseInt(i.currentItem.css("paddingTop")||0,10)-parseInt(i.currentItem.css("paddingBottom")||0,10)),e.width()||e.width(i.currentItem.innerWidth()-parseInt(i.currentItem.css("paddingLeft")||0,10)-parseInt(i.currentItem.css("paddingRight")||0,10)))}}}i.placeholder=t(s.placeholder.element.call(i.element,i.currentItem)),i.currentItem.after(i.placeholder),s.placeholder.update(i,i.placeholder)},_contactContainers:function(e){for(var i=null,s=null,o=this.containers.length-1;o>=0;o--)if(!t.ui.contains(this.currentItem[0],this.containers[o].element[0]))if(this._intersectsWith(this.containers[o].containerCache)){if(i&&t.ui.contains(this.containers[o].element[0],i.element[0]))continue;i=this.containers[o],s=o}else this.containers[o].containerCache.over&&(this.containers[o]._trigger("out",e,this._uiHash(this)),this.containers[o].containerCache.over=0);if(i)if(1===this.containers.length)this.containers[s]._trigger("over",e,this._uiHash(this)),this.containers[s].containerCache.over=1;else if(this.currentContainer!=this.containers[s]){for(var r=1e4,n=null,h=this.positionAbs[this.containers[s].floating?"left":"top"],l=this.items.length-1;l>=0;l--)if(t.ui.contains(this.containers[s].element[0],this.items[l].item[0])){var a=this.items[l][this.containers[s].floating?"left":"top"];Math.abs(a-h)<r&&(r=Math.abs(a-h),n=this.items[l])}if(!n&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[s],n?this._rearrange(e,n,null,!0):this._rearrange(e,null,this.containers[s].element,!0),this._trigger("change",e,this._uiHash()),this.containers[s]._trigger("change",e,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[s]._trigger("over",e,this._uiHash(this)),this.containers[s].containerCache.over=1}},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e,this.currentItem])):"clone"==i.helper?this.currentItem.clone():this.currentItem;return s.parents("body").length||t("parent"!=i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(s[0]),s[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(""==s[0].style.width||i.forceHelperSize)&&s.width(this.currentItem.width()),(""==s[0].style.height||i.forceHelperSize)&&s.height(this.currentItem.height()),s},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&t.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&t.browser.msie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.options.helperProportions?this.helperProportions=this.options.helperProportions:this.helperProportions={width:this.helper.outerWidth()+(parseInt(this.helper.css("padding-left"))||0)+(parseInt(this.helper.css("padding-right"))||0)+(parseInt(this.helper.css("border-left-width"))||0)+(parseInt(this.helper.css("border-right-width"))||0)+(parseInt(this.helper.css("margin-left"))||0)+(parseInt(this.helper.css("margin-right"))||0),height:this.helper.outerHeight()+(parseInt(this.helper.css("padding-top"))||0)+(parseInt(this.helper.css("padding-bottom"))||0)+(parseInt(this.helper.css("border-top-width"))||0)+(parseInt(this.helper.css("border-bottom-width"))||0)+(parseInt(this.helper.css("margin-top"))||0)+(parseInt(this.helper.css("margin-bottom"))||0)}},_setContainment:function(){var e=this.options;if("parent"==e.containment&&(e.containment=this.helper[0].parentNode),"document"!=e.containment&&"window"!=e.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,t("document"==e.containment?document:window).width()-this.helperProportions.width-this.margins.left,(t("document"==e.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),"function"==typeof e.containment)this.containment=e.containment.apply(this);else if(!/^(document|window|parent)$/.test(e.containment)){var i=t(e.containment)[0],s=t(e.containment).offset(),o="hidden"!=t(i).css("overflow");this.containment=[s.left+(parseInt(t(i).css("borderLeftWidth"),10)||0)+(parseInt(t(i).css("paddingLeft"),10)||0)-this.margins.left,s.top+(parseInt(t(i).css("borderTopWidth"),10)||0)+(parseInt(t(i).css("paddingTop"),10)||0)-this.margins.top,s.left+(o?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(t(i).css("borderLeftWidth"),10)||0)-(parseInt(t(i).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,s.top+(o?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(t(i).css("borderTopWidth"),10)||0)-(parseInt(t(i).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(e,i){i||(i=this.position);var s="absolute"==e?1:-1,o=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&t.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),r=/(html|body)/i.test(o[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-(t.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():r?0:o.scrollTop())*s),left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-(t.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():r?0:o.scrollLeft())*s)}},_generatePosition:function(e){var i=this.options,s="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&t.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);"relative"!=this.cssPosition||this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset());var r=e.pageX,n=e.pageY;if(this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(r=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(n=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(r=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(n=this.containment[3]+this.offset.click.top)),i.grid)){var h=this.originalPageY+Math.round((n-this.originalPageY)/i.grid[1])*i.grid[1];n=this.containment&&(h-this.offset.click.top<this.containment[1]||h-this.offset.click.top>this.containment[3])?h-this.offset.click.top<this.containment[1]?h+i.grid[1]:h-i.grid[1]:h;var l=this.originalPageX+Math.round((r-this.originalPageX)/i.grid[0])*i.grid[0];r=this.containment&&(l-this.offset.click.left<this.containment[0]||l-this.offset.click.left>this.containment[2])?l-this.offset.click.left<this.containment[0]?l+i.grid[0]:l-i.grid[0]:l}return{top:n-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(t.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():o?0:s.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(t.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())}},_rearrange:function(t,e,i,s){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var o=this,r=this.counter;window.setTimeout(function(){r==o.counter&&o.refreshPositions(!s)},0)},_clear:function(e,i){this.reverting=!1;var s=[];if(!this._noFinalSort&&this.currentItem[0].parentNode&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(var o in this._storedCSS)"auto"!=this._storedCSS[o]&&"static"!=this._storedCSS[o]||(this._storedCSS[o]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();if(this.fromOutside&&!i&&s.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev==this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent==this.currentItem.parent()[0]||i||s.push(function(t){this._trigger("update",t,this._uiHash())}),!t.ui.contains(this.element[0],this.currentItem[0])){i||s.push(function(t){this._trigger("remove",t,this._uiHash())});for(var o=this.containers.length-1;o>=0;o--)t.ui.contains(this.containers[o].element[0],this.currentItem[0])&&!i&&(s.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.containers[o])),s.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.containers[o])))}for(var o=this.containers.length-1;o>=0;o--)i||s.push(function(t){return function(e){t._trigger("deactivate",e,this._uiHash(this))}}.call(this,this.containers[o])),this.containers[o].containerCache.over&&(s.push(function(t){return function(e){t._trigger("out",e,this._uiHash(this))}}.call(this,this.containers[o])),this.containers[o].containerCache.over=0);if(this._storedCursor&&t("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!i){this._trigger("beforeStop",e,this._uiHash());for(var o=0;o<s.length;o++)s[o].call(this,e);this._trigger("stop",e,this._uiHash())}return!1}if(i||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!i){for(var o=0;o<s.length;o++)s[o].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){t.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}}),t.extend(t.ui.sortable,{version:"1.8.11-greenhopper"})}(jQuery);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/lib/jquery/jquery.ui.touch-punch.js' */
/*!
 * jQuery UI Touch Punch 0.2.2
 *
 * Copyright 2011, Dave Furfero
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Depends:
 *  jquery.ui.widget.js
 *  jquery.ui.mouse.js
 */
!function(o){function t(o,t){if(!(o.originalEvent.touches.length>1)){o.preventDefault();var e=o.originalEvent.changedTouches[0],n=document.createEvent("MouseEvents");n.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),o.target.dispatchEvent(n)}}if(o.support.touch="ontouchend"in document,o.support.touch){var e,n=o.ui.mouse.prototype,u=n._mouseInit;n._touchStart=function(o){var n=this;!e&&n._mouseCapture(o.originalEvent.changedTouches[0])&&(e=!0,n._touchMoved=!1,t(o,"mouseover"),t(o,"mousemove"),t(o,"mousedown"))},n._touchMove=function(o){e&&(this._touchMoved=!0,t(o,"mousemove"))},n._touchEnd=function(o){e&&(t(o,"mouseup"),t(o,"mouseout"),this._touchMoved||t(o,"click"),e=!1)},n._mouseInit=function(){var t=this;t.element.bind("touchstart",o.proxy(t,"_touchStart")).bind("touchmove",o.proxy(t,"_touchMove")).bind("touchend",o.proxy(t,"_touchEnd")),u.call(t)}}}(jQuery);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/lib/jquery/jquery.keygen.js' */
!function(e,t){e.KeyGenerator=function(){var e=["THE","A","AN","AS","AND","OF","OR"],n={},a=function(e){return e.join("").length},r=function(n){return t.grep(n,function(n,a){return t.inArray(n,e)===-1})},o=function(e){var n="";return t.each(e,function(e,t){n+=t.charAt(0)}),n},u=function(e){var t,n=!1;for(t=0;t<e.length;t++)if(i(e[t]))n=!0;else if(n)return e.substring(0,t+1);return e},i=function(e){return e&&1===e.length&&e.search("[AEIOUY]")!==-1};return n[199]="C",n[231]="c",n[252]="u",n[251]="u",n[250]="u",n[249]="u",n[233]="e",n[234]="e",n[235]="e",n[232]="e",n[226]="a",n[228]="a",n[224]="a",n[229]="a",n[225]="a",n[239]="i",n[238]="i",n[236]="i",n[237]="i",n[196]="A",n[197]="A",n[201]="E",n[230]="ae",n[198]="Ae",n[244]="o",n[246]="o",n[242]="o",n[243]="o",n[220]="U",n[255]="Y",n[214]="O",n[241]="n",n[209]="N",{generateKey:function(e,i){i=t.extend({},i);var c="number"==typeof i.desiredKeyLength?i.desiredKeyLength:4,h="number"==typeof i.maxKeyLength?i.maxKeyLength:1/0;if(e=t.trim(e),!e)return"";for(var s=[],g=0,f=e.length;g<f;g++){var l=n[e.charCodeAt(g)];s.push(l?l:e[g])}e=s.join("");var d=[];t.each(e.split(/\s+/),function(e,t){t&&(t=t.replace(/[^a-zA-Z]/g,""),t=t.toUpperCase(),t.length&&d.push(t))}),c&&a(d)>c&&(d=r(d));var m;if(0==d.length)m="";else if(1==d.length){var v=d[0],y=u(v);m=h<v.length||Math.abs(v.length-c)>=Math.abs(y.length-c)?y:v}else{var K=a(d),x=o(d);m=h<K||Math.abs(K-c)>=Math.abs(x.length-c)?x:d.join("")}return h&&m.length>h&&(m=m.substr(0,h)),m}}};var n=e.KeyGenerator();t.fn.generateFrom=function(e,a){var r={desiredKeyLength:4,maxKeyLength:10,maxNameLength:30,timeoutMS:100,validationCallback:function(){},errorCallback:function(){}},o=t(this).first(),e=e.first(),a=t.extend({},r,a);return function(){var r=function(){return o.data("autosuggest")!==!1},u=function(e){o.val()&&o.data("lastGeneratedValue")!==o.val()&&o.data("autosuggest",!1)},i=function(e){o.data("lastGeneratedValue",e),o.val(e)},c=function(){u(o.val()),f()},h=function(e){s(e,c)},s=function(e,n){var r,o=t(e.target);r=function(){g(e),n(),o.is(":visible")&&o.data("checkHook",setTimeout(r,a.timeoutMS))},o.data("checkHook")||o.data("checkHook",setTimeout(r,0))},g=function(e){var n=t(e.target);clearTimeout(n.data("checkHook")),n.removeData("checkHook")},f=function(){r()&&i(n.generateKey(e.val(),{desiredKeyLength:a.desiredKeyLength,maxKeyLength:a.maxKeyLength}))};e.attr("maxlength",a.maxNameLength),o.attr("maxlength",a.maxKeyLength),o.css("text-transform","uppercase"),document.activeElement&&document.activeElement===e[0]&&h({target:e[0]}),e.focus(h),e.blur(g)}(),this}}(window,jQuery);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/lib/jquery/jquery.hoverIntent.js' */
/*!
 * hoverIntent r7 // 2013.03.11 // jQuery 1.9.1+
 * http://cherne.net/brian/resources/jquery.hoverIntent.html
 *
 * You may use hoverIntent under the terms of the MIT license. Basically that
 * means you are free to use hoverIntent as long as this header is left intact.
 * Copyright 2007, 2013 Brian Cherne
 */
!function(e){e.fn.ghHoverIntent=function(t,n,o){var r={interval:100,sensitivity:7,timeout:0};r="object"==typeof t?e.extend(r,t):e.isFunction(n)?e.extend(r,{over:t,out:n,selector:o}):e.extend(r,{over:t,out:t,selector:n});var v,u,i,s,h=function(e){v=e.pageX,u=e.pageY},a=function(t,n){return n.hoverIntent_t=clearTimeout(n.hoverIntent_t),Math.abs(i-v)+Math.abs(s-u)<r.sensitivity?(e(n).off("mousemove.hoverIntent",h),n.hoverIntent_s=1,r.over.apply(n,[t])):(i=v,s=u,n.hoverIntent_t=setTimeout(function(){a(t,n)},r.interval),void 0)},I=function(e,t){return t.hoverIntent_t=clearTimeout(t.hoverIntent_t),t.hoverIntent_s=0,r.out.apply(t,[e])},c=function(t){var n=jQuery.extend({},t),o=this;o.hoverIntent_t&&(o.hoverIntent_t=clearTimeout(o.hoverIntent_t)),"mouseenter"==t.type?(i=n.pageX,s=n.pageY,e(o).on("mousemove.hoverIntent",h),1!=o.hoverIntent_s&&(o.hoverIntent_t=setTimeout(function(){a(n,o)},r.interval))):(e(o).off("mousemove.hoverIntent",h),1==o.hoverIntent_s&&(o.hoverIntent_t=setTimeout(function(){I(n,o)},r.timeout)))};return this.on({"mouseenter.hoverIntent":c,"mouseleave.hoverIntent":c},r.selector)}}(jQuery);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/lib/jquery/jquery.waypoints.js' */
/*!
Waypoints - 4.0.1
Copyright  2011-2016 Caleb Troughton
Licensed under the MIT license.
https://github.com/imakewebthings/waypoints/blob/master/licenses.txt
*/
!function(){"use strict";function t(o){if(!o)throw new Error("No options passed to Waypoint constructor");if(!o.element)throw new Error("No element option passed to Waypoint constructor");if(!o.handler)throw new Error("No handler option passed to Waypoint constructor");this.key="waypoint-"+e,this.options=t.Adapter.extend({},t.defaults,o),this.element=this.options.element,this.adapter=new t.Adapter(this.element),this.callback=o.handler,this.axis=this.options.horizontal?"horizontal":"vertical",this.enabled=this.options.enabled,this.triggerPoint=null,this.group=t.Group.findOrCreate({name:this.options.group,axis:this.axis}),this.context=t.Context.findOrCreateByElement(this.options.context),t.offsetAliases[this.options.offset]&&(this.options.offset=t.offsetAliases[this.options.offset]),this.group.add(this),this.context.add(this),i[this.key]=this,e+=1}var e=0,i={};t.prototype.queueTrigger=function(t){this.group.queueTrigger(this,t)},t.prototype.trigger=function(t){this.enabled&&this.callback&&this.callback.apply(this,t)},t.prototype.destroy=function(){this.context.remove(this),this.group.remove(this),delete i[this.key]},t.prototype.disable=function(){return this.enabled=!1,this},t.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this},t.prototype.next=function(){return this.group.next(this)},t.prototype.previous=function(){return this.group.previous(this)},t.invokeAll=function(t){var e=[];for(var o in i)e.push(i[o]);for(var n=0,r=e.length;n<r;n++)e[n][t]()},t.destroyAll=function(){t.invokeAll("destroy")},t.disableAll=function(){t.invokeAll("disable")},t.enableAll=function(){t.Context.refreshAll();for(var e in i)i[e].enabled=!0;return this},t.refreshAll=function(){t.Context.refreshAll()},t.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight},t.viewportWidth=function(){return document.documentElement.clientWidth},t.adapters=[],t.defaults={context:window,continuous:!0,enabled:!0,group:"default",horizontal:!1,offset:0},t.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()},"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()}},window.Waypoint=t}(),function(){"use strict";function t(t){window.setTimeout(t,1e3/60)}function e(t){this.element=t,this.Adapter=n.Adapter,this.adapter=new this.Adapter(t),this.key="waypoint-context-"+i,this.didScroll=!1,this.didResize=!1,this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()},this.waypoints={vertical:{},horizontal:{}},t.waypointContextKey=this.key,o[t.waypointContextKey]=this,i+=1,n.windowContext||(n.windowContext=!0,n.windowContext=new e(window)),this.createThrottledScrollHandler(),this.createThrottledResizeHandler()}var i=0,o={},n=window.Waypoint,r=window.onload;e.prototype.add=function(t){var e=t.options.horizontal?"horizontal":"vertical";this.waypoints[e][t.key]=t,this.refresh()},e.prototype.checkEmpty=function(){var t=this.Adapter.isEmptyObject(this.waypoints.horizontal),e=this.Adapter.isEmptyObject(this.waypoints.vertical),i=this.element==this.element.window;t&&e&&!i&&(this.adapter.off(".waypoints"),delete o[this.key])},e.prototype.createThrottledResizeHandler=function(){function t(){e.handleResize(),e.didResize=!1}var e=this;this.adapter.on("resize.waypoints",function(){e.didResize||(e.didResize=!0,n.requestAnimationFrame(t))})},e.prototype.createThrottledScrollHandler=function(){function t(){e.handleScroll(),e.didScroll=!1}var e=this;this.adapter.on("scroll.waypoints",function(){e.didScroll&&!n.isTouch||(e.didScroll=!0,n.requestAnimationFrame(t))})},e.prototype.handleResize=function(){n.Context.refreshAll()},e.prototype.handleScroll=function(){var t={},e={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};for(var i in e){var o=e[i],n=o.newScroll>o.oldScroll,r=n?o.forward:o.backward;for(var s in this.waypoints[i]){var a=this.waypoints[i][s];if(null!==a.triggerPoint){var l=o.oldScroll<a.triggerPoint,h=o.newScroll>=a.triggerPoint,p=l&&h,u=!l&&!h;(p||u)&&(a.queueTrigger(r),t[a.group.id]=a.group)}}}for(var c in t)t[c].flushTriggers();this.oldScroll={x:e.horizontal.newScroll,y:e.vertical.newScroll}},e.prototype.innerHeight=function(){return this.element==this.element.window?n.viewportHeight():this.adapter.innerHeight()},e.prototype.remove=function(t){delete this.waypoints[t.axis][t.key],this.checkEmpty()},e.prototype.innerWidth=function(){return this.element==this.element.window?n.viewportWidth():this.adapter.innerWidth()},e.prototype.destroy=function(){var t=[];for(var e in this.waypoints)for(var i in this.waypoints[e])t.push(this.waypoints[e][i]);for(var o=0,n=t.length;o<n;o++)t[o].destroy()},e.prototype.refresh=function(){var t,e=this.element==this.element.window,i=e?void 0:this.adapter.offset(),o={};this.handleScroll(),t={horizontal:{contextOffset:e?0:i.left,contextScroll:e?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:e?0:i.top,contextScroll:e?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}};for(var r in t){var s=t[r];for(var a in this.waypoints[r]){var l,h,p,u,c,d=this.waypoints[r][a],f=d.options.offset,w=d.triggerPoint,y=0,g=null==w;d.element!==d.element.window&&(y=d.adapter.offset()[s.offsetProp]),"function"==typeof f?f=f.apply(d):"string"==typeof f&&(f=parseFloat(f),d.options.offset.indexOf("%")>-1&&(f=Math.ceil(s.contextDimension*f/100))),l=s.contextScroll-s.contextOffset,d.triggerPoint=Math.floor(y+l-f),h=w<s.oldScroll,p=d.triggerPoint>=s.oldScroll,u=h&&p,c=!h&&!p,!g&&u?(d.queueTrigger(s.backward),o[d.group.id]=d.group):!g&&c?(d.queueTrigger(s.forward),o[d.group.id]=d.group):g&&s.oldScroll>=d.triggerPoint&&(d.queueTrigger(s.forward),o[d.group.id]=d.group)}}return n.requestAnimationFrame(function(){for(var t in o)o[t].flushTriggers()}),this},e.findOrCreateByElement=function(t){return e.findByElement(t)||new e(t)},e.refreshAll=function(){for(var t in o)o[t].refresh()},e.findByElement=function(t){return o[t.waypointContextKey]},window.onload=function(){r&&r(),e.refreshAll()},n.requestAnimationFrame=function(e){var i=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||t;i.call(window,e)},n.Context=e}(),function(){"use strict";function t(t,e){return t.triggerPoint-e.triggerPoint}function e(t,e){return e.triggerPoint-t.triggerPoint}function i(t){this.name=t.name,this.axis=t.axis,this.id=this.name+"-"+this.axis,this.waypoints=[],this.clearTriggerQueues(),o[this.axis][this.name]=this}var o={vertical:{},horizontal:{}},n=window.Waypoint;i.prototype.add=function(t){this.waypoints.push(t)},i.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}},i.prototype.flushTriggers=function(){for(var i in this.triggerQueues){var o=this.triggerQueues[i],n="up"===i||"left"===i;o.sort(n?e:t);for(var r=0,s=o.length;r<s;r+=1){var a=o[r];(a.options.continuous||r===o.length-1)&&a.trigger([i])}}this.clearTriggerQueues()},i.prototype.next=function(e){this.waypoints.sort(t);var i=n.Adapter.inArray(e,this.waypoints),o=i===this.waypoints.length-1;return o?null:this.waypoints[i+1]},i.prototype.previous=function(e){this.waypoints.sort(t);var i=n.Adapter.inArray(e,this.waypoints);return i?this.waypoints[i-1]:null},i.prototype.queueTrigger=function(t,e){this.triggerQueues[e].push(t)},i.prototype.remove=function(t){var e=n.Adapter.inArray(t,this.waypoints);e>-1&&this.waypoints.splice(e,1)},i.prototype.first=function(){return this.waypoints[0]},i.prototype.last=function(){return this.waypoints[this.waypoints.length-1]},i.findOrCreate=function(t){return o[t.axis][t.name]||new i(t)},n.Group=i}(),function(){"use strict";function t(t){this.$element=e(t)}var e=window.jQuery,i=window.Waypoint;e.each(["innerHeight","innerWidth","off","offset","on","outerHeight","outerWidth","scrollLeft","scrollTop"],function(e,i){t.prototype[i]=function(){var t=Array.prototype.slice.call(arguments);return this.$element[i].apply(this.$element,t)}}),e.each(["extend","inArray","isEmptyObject"],function(i,o){t[o]=e[o]}),i.adapters.push({name:"jquery",Adapter:t}),i.Adapter=t}(),function(){"use strict";function t(t){return function(){var i=[],o=arguments[0];return t.isFunction(arguments[0])&&(o=t.extend({},arguments[1]),o.handler=arguments[0]),this.each(function(){var n=t.extend({},o,{element:this});"string"==typeof n.context&&(n.context=t(this).closest(n.context)[0]),i.push(new e(n))}),i}}var e=window.Waypoint;window.jQuery&&(window.jQuery.fn.waypoint=t(window.jQuery)),window.Zepto&&(window.Zepto.fn.waypoint=t(window.Zepto))}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/lib/amd-shim/waypoints.js' */
define("Waypoint",function(){return window.Waypoint});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/lib/sticky.js' */
!function(){"use strict";function t(s){this.options=e.extend({},i.defaults,t.defaults,s),this.element=this.options.element,this.$element=e(this.element),this.createWrapper(),this.createWaypoint()}var e=window.jQuery,i=window.Waypoint;t.prototype.createWaypoint=function(){var t=this.options.handler;this.waypoint=new i(e.extend({},this.options,{element:this.options.triggerElement||this.wrapper,handler:e.proxy(function(e){var i=this.options.direction.indexOf(e)>-1,s=i?this.$element.outerHeight(!0):"";this.$wrapper.height(s),this.$element.toggleClass(this.options.stuckClass,i),t&&t.call(this,e)},this)}))},t.prototype.createWrapper=function(){this.options.wrapper&&this.$element.wrap(this.options.wrapper),this.$wrapper=this.$element.parent(),this.wrapper=this.$wrapper[0]},t.prototype.destroy=function(){this.$element.parent()[0]===this.wrapper&&(this.waypoint.destroy(),this.$element.removeClass(this.options.stuckClass),this.options.wrapper&&this.$element.unwrap())},t.defaults={wrapper:'<div class="sticky-wrapper" />',stuckClass:"stuck",direction:"down right",triggerElement:!1},i.Sticky=t}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ops/Collection.js' */
GH.Collection={},GH.Collection.Map=function(t){return this instanceof GH.Collection.Map?(this.clear(),_.forEach(t,function(t,e){this.put(e,t)},this),this):new GH.Collection.Map(t)},GH.Collection.Map.prototype.clear=function(){return this.length=0,this._valuesByKey={},this},GH.Collection.Map.prototype.forEach=function(t,e){return _.forEach(this._valuesByKey,t,e),this},GH.Collection.Map.prototype.get=function(t){return this._valuesByKey[t]},GH.Collection.Map.prototype.has=function(t){return _.has(this._valuesByKey,t)},GH.Collection.Map.prototype.keys=function(){return _.keys(this._valuesByKey)},GH.Collection.Map.prototype.put=function(t,e){return this.has(t)||this.length++,this._valuesByKey[t]=e,this},GH.Collection.Map.prototype.remove=function(t){return this.has(t)&&(delete this._valuesByKey[t],this.length--),this},GH.Collection.Map.prototype.replace=GH.Collection.Map,GH.Collection.Map.prototype.toPlainObject=function(){return _.extend({},this._valuesByKey)},GH.Collection.Map.prototype.values=function(){return _.values(this._valuesByKey)},GH.Collection.Set=function(){return this instanceof GH.Collection.Set?(this._map=new GH.Collection.Map,this.length=0,this.add.apply(this,arguments),this):GH.Collection.Set.apply(new GH.Collection.Set,arguments)},GH.Collection.Set.prototype.add=function(){var t=this._map;return _.forEach(arguments,function(e){t.put(e,!0)},this),this.length=t.length,this},GH.Collection.Set.prototype.clear=function(){return this.length=0,this._map.clear(),this},GH.Collection.Set.prototype.forEach=function(t,e){return this._map.forEach(function(o,i){return t.call(e,i)}),this},GH.Collection.Set.prototype.has=function(t){return this._map.has(t)},GH.Collection.Set.prototype.remove=function(){var t=this._map;return _.forEach(arguments,function(e){t.remove(e)},!0),this.length=t.length,this},GH.Collection.Set.prototype.replace=GH.Collection.Set,GH.Collection.Set.prototype.toArray=function(){return this._map.keys()},GH.Collection.OrderedSet=function(){return this instanceof GH.Collection.OrderedSet?(this.clear(),this.push.apply(this,arguments),this):GH.Collection.OrderedSet.apply(new GH.Collection.OrderedSet,arguments)},GH.Collection.OrderedSet.prototype.clear=function(){return this.length=0,this._values=[],this._positionByValue=new GH.Collection.Map,this},GH.Collection.OrderedSet.prototype.push=function(){var t=this._positionByValue,e=this._values;return _.forEach(arguments,function(o){t.has(o)||(t.put(o,e.length),e.push(o))},this),this._values=e,this.length=e.length,this},GH.Collection.OrderedSet.prototype.first=function(){return this.get(0)},GH.Collection.OrderedSet.prototype.forEach=function(t,e){return _.forEach(this._values,t,e),this},GH.Collection.OrderedSet.prototype.get=function(t){return this._values[t]},GH.Collection.OrderedSet.prototype.has=function(t){return this._positionByValue.has(t)},GH.Collection.OrderedSet.prototype.indexOf=function(t){var e=this._positionByValue.get(t);return _.isUndefined(e)?-1:e},GH.Collection.OrderedSet.prototype.last=function(){return this.get(this.length-1)},GH.Collection.OrderedSet.prototype.pop=function(){var t=this._values.pop();return this._positionByValue.remove(t),this.length=this._values.length,t},GH.Collection.OrderedSet.prototype.remove=function(){var t=this._values;return _.forEach(arguments,function(e){var o=_.indexOf(t,e);o!==-1&&(t=t.slice(0,o).concat(t.slice(o+1)))}),this.replace.apply(this,t),this},GH.Collection.OrderedSet.prototype.replace=GH.Collection.OrderedSet,GH.Collection.OrderedSet.prototype.shift=function(){var t=this._values,e=t.shift();return this.replace.apply(this,t),e},GH.Collection.OrderedSet.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},GH.Collection.OrderedSet.prototype.unshift=function(){var t=this._positionByValue,e=this._values;return _.forEach(arguments,function(o){t.has(o)||e.unshift(o)},this),this.replace.apply(this,e),this},GH.Collection.OrderedMap=function(t){return this instanceof GH.Collection.OrderedMap?(this.clear(),_.forEach(t,function(t,e){this.put(e,t)},this),this):new GH.Collection.OrderedMap(t)},GH.Collection.OrderedMap.prototype.clear=function(){return this.length=0,this._keys=[],this._values=[],this._indexByKey=new GH.Collection.Map,this._valueByKey=new GH.Collection.Map,this},GH.Collection.OrderedMap.prototype.forEach=function(t,e){for(var o=this._keys,i=this._values,n=0,r=o.length;n<r;n++)t.call(e,i[n],o[n],n);return this},GH.Collection.OrderedMap.prototype.get=function(t){return this._valueByKey.get(t)},GH.Collection.OrderedMap.prototype.getByIndex=function(t){return this._values[t]},GH.Collection.OrderedMap.prototype.getKeyByIndex=function(t){return this._keys[t]},GH.Collection.OrderedMap.prototype.has=function(t){return this._indexByKey.has(t)},GH.Collection.OrderedMap.prototype.indexOf=function(t){return this._indexByKey.indexOf(t)},GH.Collection.OrderedMap.prototype.keys=function(){return this._keys.slice(0)},GH.Collection.OrderedMap.prototype.put=function(t,e){return this.has(t)||(this._indexByKey.put(t,this.length),this._valueByKey.put(t,e),this._keys.push(t),this._values.push(e),this.length++),this},GH.Collection.OrderedMap.prototype.remove=function(t){var e=this._indexByKey.get(t);if(e!==-1){this._indexByKey.remove(t),this._valueByKey.remove(t);var o=this._keys;this._keys=o.slice(0,e).concat(o.slice(e+1));var i=this._values;this._values=i.slice(0,e).concat(i.slice(e+1)),this.length--}return this},GH.Collection.OrderedMap.prototype.replace=GH.Collection.OrderedMap,GH.Collection.OrderedMap.prototype.toPlainObject=function(){return this._valueByKey.toPlainObject()},GH.Collection.OrderedMap.prototype.values=function(){return this._values.slice(0)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ui/Animation.js' */
GH.RapidBoard.Animation=function(o){function r(o,r,e){return o.addClass(d).animate(r,e||a).promise().done(function(){o.removeClass(d)})}function e(e,t,n,i){var a=o(e);return a.css({height:t}),r(a,{height:n},i).done(function(){a.css({height:""})})}function t(e,t){var n=o(e),i=n.height();n.css("height","auto");var a=n.height();return n.css("height",i),r(n,{height:a},t).done(function(){n.css("height","auto")})}function n(e,t){var n=o(e);return r(n,{height:0},t)}function i(r,e,t){var n=o(r),i=e||"#fff",t=t||"#d6d6d6",a="#ebf2f9",c="#ccd9ea";n.addClass(d),n.stop().animate({"background-color":a,"border-top-color":c,"border-left-color":c,"border-right-color":c,"border-bottom-color":c},250).delay(1200).animate({"background-color":i,"border-top-color":t,"border-left-color":t,"border-right-color":t,"border-bottom-color":t},500).promise().done(function(){n.css({"background-color":"","border-top-color":"","border-left-color":"","border-right-color":"","border-bottom-color":""}),n.removeClass(d)})}var a=200,c=500,d="js-animation-inprogress";return{DEFAULT_DURATION:a,LONG_DURATION:c,animateHeight:e,animateHeightToAuto:t,animateHeightToZero:n,fadeElement:i}}(AJS.$);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/RapidBoard.js' */
define("jira-agile/rapid/rapid-board",["jira-agile/rapid/ajax","jira-agile/rapid/ui/notification","jira-agile/rapid/layout","jira/util/formatter","jira/util/events","jira/jquery/deferred","jquery","underscore","jira-agile/rapid/global-events","jira-agile/rapid/analytics-tracker"],function(e,i,a,r,n,t,o,d,s,g){"use strict";var p=window.GH||{},u=p.RapidBoard||{};return u.initialiseListeners=t(),u.initialiseListenersDone=t(),u.API_EVENT_CAUSE_BOARD_RELOAD="RapidBoard.causeBoardReload",u.Analytics={},u.projectKey=void 0,u.Analytics.toolsMenu=new g("RapidBoard.toolsmenu"),u.gotoRapidBoardPage=function(e,i){window.location.href=u.getRapidBoardPageUrl(e,i)},u.getRapidBoardPageUrl=function(e,i){var a=d.isUndefined(i)?"&useStoredSettings=true":"&view="+i;return p.Navigation.getCanonicRapidBoardPageUrl(e)+a},u.gotoRapidViewConfiguration=function(e,i){window.location.href=u.getRapidViewConfigurationUrl(e,i)},u.getRapidViewConfigurationUrl=function(i,a){var r=e.CONTEXT_PATH+"/secure/RapidView.jspa?rapidView="+i;return a&&(r=r+"&tab="+a),r},u.copyRapidViewAndGotoConfiguration=function(a,n){u.Analytics.toolsMenu.trigger("copy"),e.put({url:"/rapidview/"+a+"/copy"}).done(function(e){var a=r.format("Successfully copied board \u003cstrong\u003e{0}\u003c/strong\u003e to \u003cstrong\u003e{1}\u003c/strong\u003e.",AJS.escapeHTML(String(n)),AJS.escapeHTML(String(e.success.name)));i.addPageLoadMessage(a),u.gotoRapidViewConfiguration(e.success.id)})},u.printCardsInRapidBoard=function(){s.trigger("RapidBoard.printCardsInRapidBoard")},u.getManageViewsPageUrl=function(){return e.CONTEXT_PATH+"/secure/ManageRapidViews.jspa"},u.gotoManageViewsPage=function(){window.location.href=u.getManageViewsPageUrl()},u.getCurrentPageReturnUrl=function(){var e=u.UrlState.getViewStateRequestParameterString(),i="/secure/RapidBoard.jspa?"+e;return encodeURIComponent(i)},u.reload=function(){s.trigger("RapidBoard.reload")},u.initListeners=function(e){u.projectKey=o('meta[name="ghx-project-key"]').attr("content"),a.init(),p.Dialog.CreateView.init(),u.initialiseListeners.resolve(e),n.bind(u.API_EVENT_CAUSE_BOARD_RELOAD,u.reload),AJS.trigger("analytics",{name:"RapidBoard.show"})},u.init=function(){if(!o("body.ghx-print-card-body").length){s.trigger("pre-initialization"),o("#gh").html(p.tpl.board.x.renderRapidBoard()),o("body").addClass("ghx-scroll-columns"),o.support.touch&&o("#gh").removeClass("ghx-no-touch").addClass("ghx-touch"),o(p).bind("ghx.rapidview.deleted",function(e,a){i.addPageLoadMessage(a.message),u.gotoManageViewsPage()});var e=parseInt(u.UrlState.getCurrentUrlState().rapidView);(d.isUndefined(e)||d.isNaN(e))&&(e=u.State.getRapidViewId()),p.RapidViewConfig.fetchConfiguration(e).done(function(e){u.initListeners(e),u.initialiseListenersDone.resolve()})}},u.viewModelComparator=function(e,i){return"string"!=typeof e.name?-1:"string"!=typeof i.name?1:e.name.toLowerCase()<i.name.toLowerCase()?-1:e.name.toLowerCase()>i.name.toLowerCase()?1:0},u}),function(){var e=window.GH&&window.GH.RapidBoard,i=require("jira-agile/rapid/rapid-board");e||AJS.namespace("GH.RapidBoard",null,i)}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ui/dialog/InlineDialog.js' */
define("jira-agile/dialog/inline",["_"],function(n){var e={create:function(n,e,i,l){return l=l||{},GH.InlineDialog.remove(n),l=GH.InlineDialog._addBlurTriggerOverride(l,e),AJS.InlineDialog(AJS.$(e),n,i,l)},remove:function(n){AJS.$("#inline-dialog-"+n).remove()},registerInlineDialogHacks:function(n,e){var i=e&&e.disregardClickSelectors||[],l=e&&e.validateClickToCloseFn||!1;AJS.$(document).bind("showLayer",function(e,r,o){GH.log(e.type+" handled",GH.Logger.Contexts.event),"inlineDialog"===r&&o.id===n&&(o._validateClickToClose=function(n){var e=this.id;GH.log("Validating whether or not to close the InlineDialog based on a click",GH.Logger.Contexts.event);for(var r=0;r<i.length;r++){var o=AJS.$(n.target);if(o.parents(i[r]).length>0)return!1;if(o.is(i[r]))return!1}return!(AJS.$(n.target).parents("#inline-dialog-"+e).length>0)&&!(l&&!l(n))},AJS.$("body").unbind("click."+o.id+".inline-dialog-check"))})},preventCloseOnClick:function(n){AJS.$(document).on("click","#inline-dialog-"+n,function(n){n.stopPropagation()})},_addBlurTriggerOverride:function(e,i){var l=e.upfrontCallback;return n.defaults({upfrontCallback:function(){AJS.$(i).blur(),n.isFunction(l)&&l.apply(this,arguments)}},e)}};return e}),AJS.namespace("GH.InlineDialog",null,require("jira-agile/dialog/inline"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ui/dialog/SideInlineDialog.js' */
define("jira-agile/dialog/side-inline",["jira-agile/dialog/inline","_"],function(e,i){return{create:function(n,a,l,r){return r=r||{},i.defaults(r,{gravity:"w",offsetX:15,offsetY:0}),e.create(n,a,l,r)}}}),AJS.namespace("GH.SideInlineDialog",null,require("jira-agile/dialog/side-inline"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ui/dialog/CreateView.soy' */
// This file was automatically generated from CreateView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.createviewdialog.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.createviewdialog == 'undefined') { GH.tpl.createviewdialog = {}; }


GH.tpl.createviewdialog.renderDialog = function(opt_data, opt_ignored) {
  return '<div class="aui-tabs horizontal-tabs"><ul class="tabs-menu"><li class="menu-item active-tab"><a href="#ghx-create-presets"><strong>' + soy.$$escapeHtml("Presets") + '</strong></a></li><li class="menu-item"><a href="#ghx-create-advanced"><strong>' + soy.$$escapeHtml("Advanced") + '</strong></a></li></ul><div class="tabs-pane active-pane" id="ghx-create-presets">' + GH.tpl.createviewdialog.renderPresets(null) + '</div><div class="tabs-pane" id="ghx-create-advanced">' + GH.tpl.createviewdialog.renderAdvanced(opt_data) + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.createviewdialog.renderDialog.soyTemplateName = 'GH.tpl.createviewdialog.renderDialog';
}


GH.tpl.createviewdialog.renderPresets = function(opt_data, opt_ignored) {
  return '<div class="ghx-options">' + GH.tpl.createviewdialog.renderScrum(null) + GH.tpl.createviewdialog.renderKanban(null) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.createviewdialog.renderPresets.soyTemplateName = 'GH.tpl.createviewdialog.renderPresets';
}


GH.tpl.createviewdialog.renderScrum = function(opt_data, opt_ignored) {
  return '<div class="ghx-module ghx-scrum"><h2>' + soy.$$escapeHtml("Scrum") + '</h2><p class="ghx-module-description">' + soy.$$escapeHtml("Scrum is a method of development where the focus is on planning, committing and delivering time-boxed chunks of work called Sprints.") + '</p><p>' + soy.$$escapeHtml("Presets are:") + '</p><ul><li>' + soy.$$escapeHtml("Story swimlanes") + '</li><li>' + soy.$$escapeHtml("Story Points as estimation statistic") + '</li><li>' + soy.$$escapeHtml("Two-week iterations (starting today)") + '</li><li>' + soy.$$escapeHtml("Standard Quick Filters") + '</li><li>' + soy.$$escapeHtml("Issues ordered by Rank") + '</li><li>' + soy.$$escapeHtml("Columns: To Do, In Progress, Done") + '</li></ul><p>' + soy.$$escapeHtml("These settings can be changed later.") + '</p><button class="aui-button">' + soy.$$escapeHtml("Select Scrum") + '</button></div>';
};
if (goog.DEBUG) {
  GH.tpl.createviewdialog.renderScrum.soyTemplateName = 'GH.tpl.createviewdialog.renderScrum';
}


GH.tpl.createviewdialog.renderKanban = function(opt_data, opt_ignored) {
  return '<div class="ghx-module ghx-kanban"><h2>' + soy.$$escapeHtml("Kanban") + '</h2><p class="ghx-module-description">' + soy.$$escapeHtml("Kanban is a method of development where the focus is on visualising your workflow and limiting work-in-progress. This assists you in making incremental improvements to your existing process.") + '</p><p>' + soy.$$escapeHtml("Presets are:") + '</p><ul><li>' + soy.$$escapeHtml("Expedite swimlane") + '</li><li>' + soy.$$escapeHtml("Issue Count as column statistic") + '</li><li>' + soy.$$escapeHtml("Days in column indicator") + '</li><li>' + soy.$$escapeHtml("Standard Quick Filters") + '</li><li>' + soy.$$escapeHtml("Issues ordered by Rank") + '</li><li>' + soy.$$escapeHtml("Columns: To Do, In Progress, Done") + '</li></ul><p>' + soy.$$escapeHtml("These settings can be changed later.") + '</p><button class="aui-button">' + soy.$$escapeHtml("Select Kanban") + '</button></div>';
};
if (goog.DEBUG) {
  GH.tpl.createviewdialog.renderKanban.soyTemplateName = 'GH.tpl.createviewdialog.renderKanban';
}


GH.tpl.createviewdialog.renderAdvanced = function(opt_data, opt_ignored) {
  return '<form action="#" method="post" class="aui"><p>' + soy.$$escapeHtml("Advanced allows the creation of a Kanban board using an existing JIRA Saved Filter") + '</p><div class="field-group"><label for="ghx-view-name">' + soy.$$escapeHtml("Board name") + '<span class="aui-icon icon-required"></span></label><input class="text" type="text" id="ghx-view-name" name="name"></div><h3>' + soy.$$escapeHtml("JIRA Filter") + '</h3><fieldset><div class="field-group" id="ghx-filter-picker"><label for="ghx-create-filter-select">' + soy.$$escapeHtml("Saved Filter") + '</label>' + ((opt_data.canSeeSavedFilters) ? '<select id="ghx-create-filter-select" class="hidden"></select><div id="ghx-filter-error"></div>' : '<span class="field-value">' + soy.$$escapeHtml("There are no saved filters.") + ' <a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/secure/IssueNavigator.jspa?mode=show&amp;createNew=true">' + soy.$$escapeHtml("Create a filter now.") + '</a></span>') + '</div><div id="ghx-create-permissioninfo-container"></div></fieldset><fieldset><div class="field-group"><button id="ghx-create-advanced-submit" class="aui-button ' + ((! opt_data.canSeeSavedFilters) ? 'js-disabled' : '') + '"' + ((! opt_data.canSeeSavedFilters) ? ' disabled="disabled"' : '') + '>' + soy.$$escapeHtml("Create") + '</button></div></fieldset></form>';
};
if (goog.DEBUG) {
  GH.tpl.createviewdialog.renderAdvanced.soyTemplateName = 'GH.tpl.createviewdialog.renderAdvanced';
}


GH.tpl.createviewdialog.renderCreateNewView = function(opt_data, opt_ignored) {
  return '<div class="ghx-module"><form class="aui"><fieldset><div class="field-group"><label for="name">' + soy.$$escapeHtml("Board Name") + '<span class="aui-icon icon-required"></span></label><input class="text" type="text" id="ghx-dialog-create-view-viewname"></div><div class="field-group"><label for="projects">' + soy.$$escapeHtml("Projects") + '<span class="aui-icon icon-required"></span></label><select id="ghx-dialog-create-view-viewprojects" multiple="multiple" class="hidden"></select><div class="description">' + soy.$$escapeHtml("Select the projects to be included in this board.") + '</div></div></fieldset></form></div>';
};
if (goog.DEBUG) {
  GH.tpl.createviewdialog.renderCreateNewView.soyTemplateName = 'GH.tpl.createviewdialog.renderCreateNewView';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ui/dialog/CreateView.js' */
GH.Dialog.CreateView={},function(){var e=require("jira-agile/rapid/analytics-tracker");GH.Dialog.CreateView.analytics=new e("gh.create.view")}(),GH.Dialog.CreateView.init=function(){GH.Dialog.registerDialog(".js-view-action-create",GH.StartWizardView.startWizard),GH.Dialog.registerDialog(".js-view-action-create-scrum",GH.Dialog.CreateView.openCreateScrum),GH.Dialog.registerDialog(".js-view-action-create-kanban",GH.Dialog.CreateView.openCreateKanban)},GH.Dialog.CreateView.openCreateScrum=function(){GH.Dialog.CreateView.openPresetDialog("scrum")},GH.Dialog.CreateView.openCreateKanban=function(){GH.Dialog.CreateView.openPresetDialog("kanban")},GH.Dialog.CreateView.open=function(){GH.Ajax.get({url:"/rapidview/createmodel"},"createView").done(GH.Dialog.CreateView.openWizard)},GH.Dialog.CreateView.openWizard=function(e){var a=function(e){GH.Dialog.CreateView.analytics.trigger("cancel",e.curpage.toString())},t=GH.Dialog.create({width:600,height:600,id:"ghx-dialog-create-view",onCancelFn:a});GH.Dialog.CreateView.analytics.trigger("start"),GH.Dialog.CreateView.renderSelectPresetPage(t,e),t.addPage(),GH.Dialog.CreateView.renderSelectNameAndProjectsPage(t,!0),t.gotoPage(0),t.gotoPanel(0),t.show(),AJS.$(t.getCurrentPanel().body).trigger("contentRefresh")},GH.Dialog.CreateView.openPresetDialog=function(e){var a=function(e){GH.Dialog.CreateView.analytics.trigger("cancel",e.curpage.toString())},t=GH.Dialog.create({width:600,height:600,id:"ghx-dialog-create-view",onCancelFn:a});t.selectedPreset=e,GH.Dialog.CreateView.analytics.trigger("start",e),GH.Dialog.CreateView.renderSelectNameAndProjectsPage(t,!1),t.gotoPage(0),t.gotoPanel(0),t.show(),t.updateHeight(),AJS.$("#"+t.id).find("input:visible:first").focus()},GH.Dialog.CreateView.renderSelectPresetPage=function(e,a){function t(){e.nextPage(),e.updateHeight(),AJS.$("#"+e.id).find("input:visible:first").focus()}e.addHeader("Create Board"),AJS.$("#"+e.id).addClass("ghx-dialog-create-view");var i=AJS.$(GH.tpl.createviewdialog.renderDialog({canSeeSavedFilters:a.canSeeSavedFilters}));e.addPanel("Select a Preset",i,"ghx-dialog-create-view-page"),GH.Dialog.CreateView.setupTabs(e.id),GH.Dialog.addCancelButton(e);var r=AJS.$("#"+e.id).find(".ghx-kanban button"),n=AJS.$("#"+e.id).find(".ghx-scrum button");r.click(function(){e.selectedPreset="kanban",t()}),n.click(function(){e.selectedPreset="scrum",t()}),i.find("form").submit(function(){return GH.Dialog.CreateView.submitAdvanced(),!1});var o=AJS.$("#ghx-create-filter-select");if(o.size()>0){new AJS.SingleSelect({element:o,width:300,removeOnUnSelect:!0,overlabel:"Start typing for Filters",itemAttrDisplayed:"label",errorMessage:"",ajaxOptions:{query:!0,url:GH.Ajax.buildRestUrl("/savedfilter/list.json"),formatResponse:function(e){if(e.errors){var a=GH.Ajax._convertJiraErrors(e.errors),t={searchName:"#ghx-create-filter-select"};return GH.Ajax.handleContextualErrors(a,t),!1}AJS.$("#ghx-create-filter-select").siblings(".ghx-error").remove();var i=[];return AJS.$(e.filters).each(function(){i.push(new AJS.ItemDescriptor({value:this.id.toString(),label:this.name,html:AJS.escapeHTML(String(this.name)),savedFilter:this}))}),i}}});o.bind("selected",function(e,a){GH.Dialog.CreateView.updatePermissionInfo(a.properties.savedFilter)}),o.bind("unselect",function(e){GH.Dialog.CreateView.updatePermissionInfo(null)})}var l=AJS.$("#ghx-create-advanced-submit");l.click(function(a){return e.disableControls(),GH.Dialog.CreateView.submitAdvanced(e),!1})},GH.Dialog.CreateView.renderSelectNameAndProjectsPage=function(e,a){var t=AJS.$("#"+e.id),i="Create Board";"scrum"==e.selectedPreset?i="Create Scrum Board":"kanban"==e.selectedPreset&&(i="Create Kanban Board"),e.addHeader(i),t.addClass("ghx-dialog");var r=AJS.$(GH.tpl.createviewdialog.renderCreateNewView());e.addPanel(i,r,"ghx-dialog-create-view-page"),a&&e.addButton("Back",function(e){e.prevPage(),e.updateHeight()},"aui-button");var n=function(){var a=AJS.$("#"+e.id).find(".ghx-next");d()?a.attr("disabled","disabled").addClass("js-disabled"):a.removeAttr("disabled").removeClass("js-disabled")},o=t.find("#ghx-dialog-create-view-viewname"),l=new GH.ProjectPicker({selector:"#ghx-dialog-create-view-viewprojects",change:n,currentProjectId:JIRA.API&&JIRA.API.Projects?JIRA.API.Projects.getCurrentProjectId():null}),d=function(){return!o.val()||!l.hasValue()||l.hasErrors()},s=function(e){if(d()){var a=AJS.$("#"+e.id).find(".ghx-next");return a.attr("disabled","disabled").addClass("js-disabled"),!1}return GH.Dialog.CreateView.submitPresets(e)};e.addButton("Create",s,"ghx-next aui-button"),r.find("form").submit(function(){return s(e),!1}),GH.Dialog.addCancelButton(e),t.find(".ghx-next").attr("disabled","disabled").addClass("js-disabled"),o.keyup(n)},GH.Dialog.CreateView.setupTabs=function(e){AJS.tabs.setup();var a=GH.Dialog.CreateView.State.getPreferredTab();a&&AJS.tabs.change(AJS.$("a[href="+a+"]")),AJS.$("#"+e+" .menu-item").click(function(){var e=AJS.$(this);GH.Dialog.CreateView.State.setPreferredTab(e.find("a:first").attr("href"))})},GH.Dialog.CreateView.submitPresets=function(e){AJS.$(e.getCurrentPanel().body).find(".ghx-error").remove();var a=e.selectedPreset,t={name:AJS.$("#ghx-dialog-create-view-viewname").val(),projectIds:AJS.$("#ghx-dialog-create-view-viewprojects").val(),preset:a},i={name:"#ghx-dialog-create-view-viewname",projectIds:"#ghx-dialog-create-view-viewprojects",preset:a},r=function(e){"scrum"==a?GH.Dialog.CreateView.handleCreateResult(e,function(e){return GH.RapidBoard.gotoRapidBoardPage(e,"planning")},"preset",a):GH.Dialog.CreateView.handleCreateResult(e,GH.RapidBoard.gotoRapidBoardPage,"preset",a)};GH.Ajax.post({url:"/rapidview/create/presets",data:t,errorContextMap:i}).done(r)},GH.Dialog.CreateView.submitAdvanced=function(e){var a=AJS.$("#ghx-view-name"),t=a.val(),i=AJS.$("#ghx-create-filter-select");if(!GH.Validation.notBlank(a,"Name is a required field"))return void e.enableControls();if(!GH.Validation.notBlank(i,"A saved filter is required","#ghx-filter-error"))return void e.enableControls();var r=i.val()||[];GH.Ajax.post({url:"/rapidview/create/advanced",data:{name:t,filterId:r[0]},errorContextMap:{name:"#ghx-view-name",filterId:"#ghx-create-filter-select"}}).done(function(e){GH.Dialog.CreateView.handleCreateResult(e,GH.RapidBoard.gotoRapidViewConfiguration,"advanced","advanced")}).fail(e.enableControls)},GH.Dialog.CreateView.handleCreateResult=function(e,a,t,i){GH.Dialog.CreateView.analytics.trigger("complete",i);var r=t!=i&&i;GH.PersistentMessages.CreateViewMessage.setView(e.success.id,e.success.name,t,r),a(e.success.id)},GH.Dialog.CreateView.updatePermissionInfo=function(e){var a=null!=e?GH.tpl.rapid.view.renderPermissionInfo({savedFilter:e}):"";AJS.$("#ghx-create-permissioninfo-container").html(a)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ui/dialog/CreateViewState.js' */
GH.Dialog.CreateView.State={},GH.Dialog.CreateView.State.data={},GH.Dialog.CreateView.State.setPreferredTab=function(e){GH.storage.put("gh.dialog.createView.preferredTab",e,!0)},GH.Dialog.CreateView.State.getPreferredTab=function(){return GH.storage.get("gh.dialog.createView.preferredTab",!0)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ui/component/BoardAdminsPicker.js' */
GH.RapidBoard.BoardAdminsPicker=function(e){this.selector=e.selector,this.change=e.change,this.initialData=e.initialData,this.editData=e.editData,this.blur=e.blur},GH.RapidBoard.BoardAdminsPicker.prototype.show=function(){var e=AJS.$(this.selector);this.select=e,this.multiselect=new AJS.MultiSelect({element:e,width:400,errorMessage:"",itemAttrDisplayed:"label",ajaxOptions:{url:GH.Ajax.CONTEXT_PATH+GH.Ajax.REST_URL_BASE+"/rapidviewconfig/boardadminspicker?maxResults=15",formatResponse:function(e){var r,t=new AJS.GroupDescriptor({weight:0,label:"Groups"}),i=new AJS.GroupDescriptor({weight:1,label:"Users"});return _.each(e.users,function(e){e.key=e.key||e.name;var t=e.displayName+" ("+e.name+")";r=GH.RapidBoard.BoardAdminsPicker.buildItemDescriptor("user",e.key,t,t),i.addItem(r)}),_.each(e.groups,function(e){r=GH.RapidBoard.BoardAdminsPicker.buildItemDescriptor("group",e.name,e.name,e.name),t.addItem(r)}),[t,i]},query:!0}}),this.multiselect._addMultipleItems(this.initialData),this.select.bind("unselect",this.change),this.select.bind("change",this.change),this.multiselect.$field.focus(),this.multiselect.$field.blur(this.blur)},GH.RapidBoard.BoardAdminsPicker.prototype.getAjaxValue=function(){var e=this.getValue(),r={userKeys:[],groupKeys:[]};return null==e?r:(_.each(e,function(e){var t=e.split(":"),i=t[0],a=t[1];t.length<2||("user"==i&&r.userKeys.push(a),"group"==i&&r.groupKeys.push(a))}),r)},GH.RapidBoard.BoardAdminsPicker.buildItemDescriptor=function(e,r,t,i){return new AJS.ItemDescriptor({value:e+":"+r,label:t,html:AJS.escapeHTML(String(i))})},GH.RapidBoard.BoardAdminsPicker.prototype.hasValue=function(){return!!this.select.val()},GH.RapidBoard.BoardAdminsPicker.prototype.hasErrors=function(){return this.multiselect.$container.parent().find(".error").length>0},GH.RapidBoard.BoardAdminsPicker.prototype.getValue=function(){return this.select.val()},GH.RapidBoard.BoardAdminsPicker.prototype.getElement=function(){return this.select},GH.RapidBoard.BoardAdminsPicker.sortModel=function(e){var r=function(e,r){return e.displayName.toLowerCase().localeCompare(r.displayName.toLowerCase())};return{userKeys:e.userKeys.sort(r),groupKeys:e.groupKeys.sort(r)}},GH.RapidBoard.BoardAdminsPicker.getOrderedUnion=function(e){var r=GH.RapidBoard.BoardAdminsPicker.sortModel(e);return _.union(r.groupKeys,r.userKeys)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ui/dialog/FindView.soy' */
// This file was automatically generated from FindView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.findviewdialog.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.findviewdialog == 'undefined') { GH.tpl.findviewdialog = {}; }


GH.tpl.findviewdialog.renderFindExistingView = function(opt_data, opt_ignored) {
  return '<div class="ghx-module"><form class="aui"><fieldset><div class="field-group"><label for="name">' + soy.$$escapeHtml("Board Name") + '<span class="aui-icon icon-required"></span></label><select id="ghx-welcome-find-viewname" class="hidden"></select><div class="description">' + soy.$$escapeHtml("Start typing to get a list of possible matches.") + '</div></div></fieldset></form></div>';
};
if (goog.DEBUG) {
  GH.tpl.findviewdialog.renderFindExistingView.soyTemplateName = 'GH.tpl.findviewdialog.renderFindExistingView';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ui/dialog/FindView.js' */
GH.Dialog.FindView={},function(){var e=require("jira-agile/rapid/analytics-tracker");GH.Dialog.FindView.analytics=new e("gh.welcome.find.view")}(),GH.Dialog.FindView.init=function(){GH.Dialog.registerDialog(".js-find-view",GH.Dialog.FindView.openFindExistingViewDialog)},GH.Dialog.FindView.openFindExistingViewDialog=function(){var e=function(e){GH.Dialog.FindView.analytics.trigger("cancel",e.curpage.toString())},i=GH.Dialog.create({width:600,height:215,id:"ghx-welcome-dialog-view-find",onCancelFn:e});i.eventCategory="gh.welcome.find.view",GH.Dialog.FindView.analytics.trigger("start"),GH.Dialog.FindView.showFindViewStep(i),i.gotoPage(0),i.gotoPanel(0),i.show(),AJS.$("#ghx-welcome-find-viewname-field").focus(),AJS.$(i.getCurrentPanel().body).trigger("contentRefresh")},GH.Dialog.FindView.showFindViewStep=function(e){e.addHeader("Find an Existing Board"),AJS.$("#"+e.id).addClass("ghx-dialog");var i=AJS.$(GH.tpl.findviewdialog.renderFindExistingView());e.addPanel("Find an Existing Board",i,"ghx-welcome-page"),e.addButton("Use",GH.Dialog.FindView.validateViewFind,"aui-button"),i.find("form").submit(function(){return GH.Dialog.FindView.validateViewFind(e),!1});new AJS.SingleSelect({element:AJS.$("#ghx-welcome-find-viewname"),width:300,removeOnUnSelect:!0,overlabel:"Start typing for names",itemAttrDisplayed:"label",errorMessage:"",ajaxOptions:{query:!0,url:GH.Ajax.buildRestUrl("/rapidviews/list.json"),formatResponse:function(e){var i=[];return AJS.$(e.views).each(function(){i.push(new AJS.ItemDescriptor({value:this.id.toString(),label:this.name,html:AJS.escapeHTML(String(this.name))}))}),i}}});GH.Dialog.addCancelButton(e)},GH.Dialog.FindView.validateViewFind=function(e){var i={id:AJS.$("#ghx-welcome-find-viewname").val()},n={viewName:"#ghx-welcome-find-viewname"},a=function(){GH.Dialog.FindView.analytics.trigger("complete"),GH.RapidBoard.gotoRapidBoardPage(i.id)};AJS.$(e.getCurrentPanel().body).find(".ghx-error").remove(),GH.Ajax.get({url:"welcome/validateViewFind",data:i,errorContextMap:n},"validateViewFind").done(a)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ui/component/Avatar.soy' */
// This file was automatically generated from Avatar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.avatar.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.avatar == 'undefined') { GH.tpl.avatar = {}; }


GH.tpl.avatar.renderIssueAvatar = function(opt_data, opt_ignored) {
  return '' + ((opt_data.issue.hasCustomUserAvatar) ? GH.tpl.avatar.renderCustomUserAvatar({avatarUrl: opt_data.issue.avatarUrl, tooltipHtml: opt_data.tooltipHtml}) : (opt_data.issue.autoUserAvatar) ? GH.tpl.avatar.renderAutoUserAvatar({color: opt_data.issue.autoUserAvatar.color, letter: opt_data.issue.autoUserAvatar.letter, tooltipHtml: opt_data.tooltipHtml, borderColor: opt_data.drawAvatarTextBorder ? opt_data.issue.autoUserAvatar.color : null}) : '');
};
if (goog.DEBUG) {
  GH.tpl.avatar.renderIssueAvatar.soyTemplateName = 'GH.tpl.avatar.renderIssueAvatar';
}


GH.tpl.avatar.renderCustomUserAvatar = function(opt_data, opt_ignored) {
  return '<img src="' + soy.$$escapeHtml(opt_data.avatarUrl) + '" class="ghx-avatar-img"' + ((opt_data.tooltipHtml) ? 'alt="' + soy.$$escapeHtml(opt_data.tooltipHtml) + '" data-tooltip="' + soy.$$escapeHtml(opt_data.tooltipHtml) + '"' : '') + '>';
};
if (goog.DEBUG) {
  GH.tpl.avatar.renderCustomUserAvatar.soyTemplateName = 'GH.tpl.avatar.renderCustomUserAvatar';
}


GH.tpl.avatar.renderAutoUserAvatar = function(opt_data, opt_ignored) {
  return '<span class="ghx-avatar-img" style="background-color: ' + soy.$$escapeHtml(opt_data.color) + '; ' + ((opt_data.borderColor) ? ' border: 1px solid ' + soy.$$escapeHtml(opt_data.borderColor) + ' ' : '') + '"' + ((opt_data.tooltipHtml) ? 'data-tooltip="' + soy.$$escapeHtml(opt_data.tooltipHtml) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.letter) + '</span>';
};
if (goog.DEBUG) {
  GH.tpl.avatar.renderAutoUserAvatar.soyTemplateName = 'GH.tpl.avatar.renderAutoUserAvatar';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ui/component/field/StatusRenderer.soy' */
// This file was automatically generated from StatusRenderer.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.status.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.status == 'undefined') { GH.tpl.status = {}; }


GH.tpl.status.renderIcon = function(opt_data, opt_ignored) {
  var output = '';
  var isSubtleFinal__soy3 = opt_data.isSubtle == undefined ? true : opt_data.isSubtle;
  output += (opt_data.status) ? (opt_data.status.statusCategory) ? JIRA.Template.Util.Issue.Status.issueStatusResolver({issueStatus: opt_data.status, isCompact: opt_data.isCompact, isSubtle: isSubtleFinal__soy3, maxWidth: opt_data.maxWidth}) : '<img src="' + soy.$$escapeHtml(opt_data.status.iconUrl) + '" alt="' + soy.$$escapeHtml(opt_data.status.name) + '" title="' + soy.$$escapeHtml(opt_data.status.name) + '">' : '';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.status.renderIcon.soyTemplateName = 'GH.tpl.status.renderIcon';
}


GH.tpl.status.renderText = function(opt_data, opt_ignored) {
  var output = '';
  var isSubtleFinal__soy22 = opt_data.isSubtle == undefined ? true : opt_data.isSubtle;
  output += (opt_data.status) ? (opt_data.status.statusCategory) ? JIRA.Template.Util.Issue.Status.issueStatusResolver({issueStatus: opt_data.status, isCompact: opt_data.isCompact, isSubtle: isSubtleFinal__soy22, maxWidth: opt_data.maxWidth}) : soy.$$escapeHtml(opt_data.status.name) : '';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.status.renderText.soyTemplateName = 'GH.tpl.status.renderText';
}


GH.tpl.status.renderFull = function(opt_data, opt_ignored) {
  var output = '';
  var isSubtleFinal__soy35 = opt_data.isSubtle == undefined ? true : opt_data.isSubtle;
  output += (opt_data.status) ? (opt_data.status.statusCategory) ? JIRA.Template.Util.Issue.Status.issueStatusResolver({issueStatus: opt_data.status, isCompact: opt_data.isCompact, isSubtle: isSubtleFinal__soy35}) : '<img src="' + soy.$$escapeHtml(opt_data.status.iconUrl) + '" alt="' + soy.$$escapeHtml(opt_data.status.name) + '" title="' + soy.$$escapeHtml(opt_data.status.name) + '">' + soy.$$escapeHtml(opt_data.status.name) + '</img>' : '';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.status.renderFull.soyTemplateName = 'GH.tpl.status.renderFull';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ui/component/field/EpicLinkRenderer.soy' */
// This file was automatically generated from EpicLinkRenderer.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.field.epicLink.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.field == 'undefined') { GH.tpl.field = {}; }
if (typeof GH.tpl.field.epicLink == 'undefined') { GH.tpl.field.epicLink = {}; }


GH.tpl.field.epicLink.renderEpicLink = function(opt_data, opt_ignored) {
  var output = '';
  var name__soy3 = '' + GH.tpl.epic.getEpicNameStringNoAutoescape({epicLabel: opt_data.field.text, epicKey: opt_data.field.epicKey});
  output += (opt_data.removableIfAllowed && opt_data.field.canRemoveEpic) ? aui.labels.label({extraClasses: ['js-epic-remove', opt_data.field.epicColor], isCloseable: true, closeIconText: "Remove from epic", text: name__soy3, extraAttributes: {title: name__soy3, 'data-epickey': opt_data.field.epicKey}}) : aui.labels.label({extraClasses: [opt_data.field.epicColor], text: name__soy3, extraAttributes: {title: name__soy3, 'data-epickey': opt_data.field.epicKey}});
  return output;
};
if (goog.DEBUG) {
  GH.tpl.field.epicLink.renderEpicLink.soyTemplateName = 'GH.tpl.field.epicLink.renderEpicLink';
}


GH.tpl.field.epicLink.renderEpicLinkFromIssue = function(opt_data, opt_ignored) {
  return '' + aui.labels.label({extraClasses: opt_data.extraClasses + ' ' + opt_data.epic.epicColor, text: opt_data.epic.epicLabel, extraAttributes: {title: opt_data.epic.epicLabel, 'data-epickey': opt_data.epic.key}});
};
if (goog.DEBUG) {
  GH.tpl.field.epicLink.renderEpicLinkFromIssue.soyTemplateName = 'GH.tpl.field.epicLink.renderEpicLinkFromIssue';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/d3-3.3.8.js' */
d3=function(){function n(n){return null!=n&&!isNaN(n)}function t(n){return n.length}function e(n){for(var t=1;n*t%1;)t*=10;return t}function r(n,t){try{for(var e in t)Object.defineProperty(n.prototype,e,{value:t[e],enumerable:!1})}catch(e){n.prototype=t}}function i(){}function u(){}function o(n,t,e){return function(){var r=e.apply(t,arguments);return r===t?n:r}}function a(n,t){if(t in n)return t;t=t.charAt(0).toUpperCase()+t.substring(1);for(var e=0,r=uo.length;e<r;++e){var i=uo[e]+t;if(i in n)return i}}function c(){}function l(){}function f(n){function t(){for(var t,r=e,i=-1,u=r.length;++i<u;)(t=r[i].on)&&t.apply(this,arguments);return n}var e=[],r=new i;return t.on=function(t,i){var u,o=r.get(t);return arguments.length<2?o&&o.on:(o&&(o.on=null,e=e.slice(0,u=e.indexOf(o)).concat(e.slice(u+1)),r.remove(t)),i&&e.push(r.set(t,{on:i})),n)},t}function s(){Zu.event.preventDefault()}function h(){for(var n,t=Zu.event;n=t.sourceEvent;)t=n;return t}function p(n){for(var t=new l,e=0,r=arguments.length;++e<r;)t[arguments[e]]=f(t);return t.of=function(e,r){return function(i){try{var u=i.sourceEvent=Zu.event;i.target=n,Zu.event=i,t[i.type].apply(e,r)}finally{Zu.event=u}}},t}function g(n){return ao(n,ho),n}function v(n){return"function"==typeof n?n:function(){return co(n,this)}}function d(n){return"function"==typeof n?n:function(){return lo(n,this)}}function y(n,t){function e(){this.removeAttribute(n)}function r(){this.removeAttributeNS(n.space,n.local)}function i(){this.setAttribute(n,t)}function u(){this.setAttributeNS(n.space,n.local,t)}function o(){var e=t.apply(this,arguments);null==e?this.removeAttribute(n):this.setAttribute(n,e)}function a(){var e=t.apply(this,arguments);null==e?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,e)}return n=Zu.ns.qualify(n),null==t?n.local?r:e:"function"==typeof t?n.local?a:o:n.local?u:i}function m(n){return n.trim().replace(/\s+/g," ")}function x(n){return new RegExp("(?:^|\\s+)"+Zu.requote(n)+"(?:\\s+|$)","g")}function M(n,t){function e(){for(var e=-1;++e<i;)n[e](this,t)}function r(){for(var e=-1,r=t.apply(this,arguments);++e<i;)n[e](this,r)}n=n.trim().split(/\s+/).map(_);var i=n.length;return"function"==typeof t?r:e}function _(n){var t=x(n);return function(e,r){if(i=e.classList)return r?i.add(n):i.remove(n);var i=e.getAttribute("class")||"";r?(t.lastIndex=0,t.test(i)||e.setAttribute("class",m(i+" "+n))):e.setAttribute("class",m(i.replace(t," ")))}}function b(n,t,e){function r(){this.style.removeProperty(n)}function i(){this.style.setProperty(n,t,e)}function u(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(n):this.style.setProperty(n,r,e)}return null==t?r:"function"==typeof t?u:i}function w(n,t){function e(){delete this[n]}function r(){this[n]=t}function i(){var e=t.apply(this,arguments);null==e?delete this[n]:this[n]=e}return null==t?e:"function"==typeof t?i:r}function S(n){return"function"==typeof n?n:(n=Zu.ns.qualify(n)).local?function(){return this.ownerDocument.createElementNS(n.space,n.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,n)}}function k(n){return{__data__:n}}function N(n){return function(){return so(this,n)}}function E(n){return arguments.length||(n=Zu.ascending),function(t,e){return t&&e?n(t.__data__,e.__data__):!t-!e}}function A(n,t){for(var e=0,r=n.length;e<r;e++)for(var i,u=n[e],o=0,a=u.length;o<a;o++)(i=u[o])&&t(i,o,e);return n}function C(n){return ao(n,go),n}function L(n){var t,e;return function(r,i,u){var o,a=n[u].update,c=a.length;for(u!=e&&(e=u,t=0),i>=t&&(t=i+1);!(o=a[t])&&++t<c;);return o}}function T(){var n=this.__transition__;n&&++n.active}function q(n,t,e){function r(){var t=this[o];t&&(this.removeEventListener(n,t,t.$),delete this[o])}function i(){var i=l(t,Xu(arguments));r.call(this),this.addEventListener(n,this[o]=i,i.$=e),i._=t}function u(){var t,e=new RegExp("^__on([^.]+)"+Zu.requote(n)+"$");for(var r in this)if(t=r.match(e)){var i=this[r];this.removeEventListener(t[1],i,i.$),delete this[r]}}var o="__on"+n,a=n.indexOf("."),l=z;a>0&&(n=n.substring(0,a));var f=yo.get(n);return f&&(n=f,l=R),a?t?i:r:t?c:u}function z(n,t){return function(e){var r=Zu.event;Zu.event=e,t[0]=this.__data__;try{n.apply(this,t)}finally{Zu.event=r}}}function R(n,t){var e=z(n,t);return function(n){var t=this,r=n.relatedTarget;r&&(r===t||8&r.compareDocumentPosition(t))||e.call(t,n)}}function D(){var n=".dragsuppress-"+ ++xo,t="touchmove"+n,e="selectstart"+n,r="dragstart"+n,i="click"+n,u=Zu.select(Wu).on(t,s).on(e,s).on(r,s),o=Bu.style,a=o[mo];return o[mo]="none",function(t){function e(){u.on(i,null)}u.on(n,null),o[mo]=a,t&&(u.on(i,function(){s(),e()},!0),setTimeout(e,0))}}function P(n,t){t.changedTouches&&(t=t.changedTouches[0]);var e=n.ownerSVGElement||n;if(e.createSVGPoint){var r=e.createSVGPoint();if(Mo<0&&(Wu.scrollX||Wu.scrollY)){e=Zu.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var i=e[0][0].getScreenCTM();Mo=!(i.f||i.e),e.remove()}return Mo?(r.x=t.pageX,r.y=t.pageY):(r.x=t.clientX,r.y=t.clientY),r=r.matrixTransform(n.getScreenCTM().inverse()),[r.x,r.y]}var u=n.getBoundingClientRect();return[t.clientX-u.left-n.clientLeft,t.clientY-u.top-n.clientTop]}function U(n){return n>0?1:n<0?-1:0}function j(n){return n>1?0:n<-1?_o:Math.acos(n)}function H(n){return n>1?wo:n<-1?-wo:Math.asin(n)}function F(n){return((n=Math.exp(n))-1/n)/2}function O(n){return((n=Math.exp(n))+1/n)/2}function Y(n){return((n=Math.exp(2*n))-1)/(n+1)}function I(n){return(n=Math.sin(n/2))*n}function Z(){}function V(n,t,e){return new X(n,t,e)}function X(n,t,e){this.h=n,this.s=t,this.l=e}function $(n,t,e){function r(n){return n>360?n-=360:n<0&&(n+=360),n<60?u+(o-u)*n/60:n<180?o:n<240?u+(o-u)*(240-n)/60:u}function i(n){return Math.round(255*r(n))}var u,o;return n=isNaN(n)?0:(n%=360)<0?n+360:n,t=isNaN(t)?0:t<0?0:t>1?1:t,e=e<0?0:e>1?1:e,o=e<=.5?e*(1+t):e+t-e*t,u=2*e-o,an(i(n+120),i(n),i(n-120))}function B(n,t,e){return new W(n,t,e)}function W(n,t,e){this.h=n,this.c=t,this.l=e}function J(n,t,e){return isNaN(n)&&(n=0),isNaN(t)&&(t=0),G(e,Math.cos(n*=No)*t,Math.sin(n)*t)}function G(n,t,e){return new K(n,t,e)}function K(n,t,e){this.l=n,this.a=t,this.b=e}function Q(n,t,e){var r=(n+16)/116,i=r+t/500,u=r-e/200;return i=tn(i)*Uo,r=tn(r)*jo,u=tn(u)*Ho,an(rn(3.2404542*i-1.5371385*r-.4985314*u),rn(-.969266*i+1.8760108*r+.041556*u),rn(.0556434*i-.2040259*r+1.0572252*u))}function nn(n,t,e){return n>0?B(Math.atan2(e,t)*Eo,Math.sqrt(t*t+e*e),n):B(NaN,NaN,n)}function tn(n){return n>.206893034?n*n*n:(n-4/29)/7.787037}function en(n){return n>.008856?Math.pow(n,1/3):7.787037*n+4/29}function rn(n){return Math.round(255*(n<=.00304?12.92*n:1.055*Math.pow(n,1/2.4)-.055))}function un(n){return an(n>>16,n>>8&255,255&n)}function on(n){return un(n)+""}function an(n,t,e){return new cn(n,t,e)}function cn(n,t,e){this.r=n,this.g=t,this.b=e}function ln(n){return n<16?"0"+Math.max(0,n).toString(16):Math.min(255,n).toString(16)}function fn(n,t,e){var r,i,u,o=0,a=0,c=0;if(r=/([a-z]+)\((.*)\)/i.exec(n))switch(i=r[2].split(","),r[1]){case"hsl":return e(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return t(gn(i[0]),gn(i[1]),gn(i[2]))}return(u=Yo.get(n))?t(u.r,u.g,u.b):(null!=n&&"#"===n.charAt(0)&&(4===n.length?(o=n.charAt(1),o+=o,a=n.charAt(2),a+=a,c=n.charAt(3),c+=c):7===n.length&&(o=n.substring(1,3),a=n.substring(3,5),c=n.substring(5,7)),o=parseInt(o,16),a=parseInt(a,16),c=parseInt(c,16)),t(o,a,c))}function sn(n,t,e){var r,i,u=Math.min(n/=255,t/=255,e/=255),o=Math.max(n,t,e),a=o-u,c=(o+u)/2;return a?(i=c<.5?a/(o+u):a/(2-o-u),r=n==o?(t-e)/a+(t<e?6:0):t==o?(e-n)/a+2:(n-t)/a+4,r*=60):(r=NaN,i=c>0&&c<1?0:r),V(r,i,c)}function hn(n,t,e){n=pn(n),t=pn(t),e=pn(e);var r=en((.4124564*n+.3575761*t+.1804375*e)/Uo),i=en((.2126729*n+.7151522*t+.072175*e)/jo),u=en((.0193339*n+.119192*t+.9503041*e)/Ho);return G(116*i-16,500*(r-i),200*(i-u))}function pn(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function gn(n){var t=parseFloat(n);return"%"===n.charAt(n.length-1)?Math.round(2.55*t):t}function vn(n){return"function"==typeof n?n:function(){return n}}function dn(n){return n}function yn(n){return function(t,e,r){return 2===arguments.length&&"function"==typeof e&&(r=e,e=null),mn(t,e,n,r)}}function mn(n,t,e,r){function i(){var n,t=c.status;if(!t&&c.responseText||t>=200&&t<300||304===t){try{n=e.call(u,c)}catch(n){return void o.error.call(u,n)}o.load.call(u,n)}else o.error.call(u,c)}var u={},o=Zu.dispatch("beforesend","progress","load","error"),a={},c=new XMLHttpRequest,l=null;return!Wu.XDomainRequest||"withCredentials"in c||!/^(http(s)?:)?\/\//.test(n)||(c=new XDomainRequest),"onload"in c?c.onload=c.onerror=i:c.onreadystatechange=function(){c.readyState>3&&i()},c.onprogress=function(n){var t=Zu.event;Zu.event=n;try{o.progress.call(u,c)}finally{Zu.event=t}},u.header=function(n,t){return n=(n+"").toLowerCase(),arguments.length<2?a[n]:(null==t?delete a[n]:a[n]=t+"",u)},u.mimeType=function(n){return arguments.length?(t=null==n?null:n+"",u):t},u.responseType=function(n){return arguments.length?(l=n,u):l},u.response=function(n){return e=n,u},["get","post"].forEach(function(n){u[n]=function(){return u.send.apply(u,[n].concat(Xu(arguments)))}}),u.send=function(e,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),c.open(e,n,!0),null==t||"accept"in a||(a.accept=t+",*/*"),c.setRequestHeader)for(var f in a)c.setRequestHeader(f,a[f]);return null!=t&&c.overrideMimeType&&c.overrideMimeType(t),null!=l&&(c.responseType=l),null!=i&&u.on("error",i).on("load",function(n){i(null,n)}),o.beforesend.call(u,c),c.send(null==r?null:r),u},u.abort=function(){return c.abort(),u},Zu.rebind(u,o,"on"),null==r?u:u.get(xn(r))}function xn(n){return 1===n.length?function(t,e){n(null==t?e:null)}:n}function Mn(){var n=_n(),t=bn()-n;t>24?(isFinite(t)&&(clearTimeout(Xo),Xo=setTimeout(Mn,t)),Vo=0):(Vo=1,Bo(Mn))}function _n(){var n=Date.now();for($o=Io;$o;)n>=$o.t&&($o.f=$o.c(n-$o.t)),$o=$o.n;return n}function bn(){for(var n,t=Io,e=1/0;t;)t.f?t=n?n.n=t.n:Io=t.n:(t.t<e&&(e=t.t),t=(n=t).n);return Zo=n,e}function wn(n,t){var e=Math.pow(10,3*eo(8-t));return{scale:t>8?function(n){return n/e}:function(n){return n*e},symbol:n}}function Sn(n,t){return t-(n?Math.ceil(Math.log(n)/Math.LN10):1)}function kn(n){return n+""}function Nn(){}function En(n,t,e){var r=e.s=n+t,i=r-n,u=r-i;e.t=n-u+(t-i)}function An(n,t){n&&oa.hasOwnProperty(n.type)&&oa[n.type](n,t)}function Cn(n,t,e){var r,i=-1,u=n.length-e;for(t.lineStart();++i<u;)r=n[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function Ln(n,t){var e=-1,r=n.length;for(t.polygonStart();++e<r;)Cn(n[e],t,1);t.polygonEnd()}function Tn(){function n(n,t){n*=No,t=t*No/2+_o/4;var e=n-r,o=Math.cos(t),a=Math.sin(t),c=u*a,l=i*o+c*Math.cos(e),f=c*Math.sin(e);ca.add(Math.atan2(f,l)),r=n,i=o,u=a}var t,e,r,i,u;la.point=function(o,a){la.point=n,r=(t=o)*No,i=Math.cos(a=(e=a)*No/2+_o/4),u=Math.sin(a)},la.lineEnd=function(){n(t,e)}}function qn(n){var t=n[0],e=n[1],r=Math.cos(e);return[r*Math.cos(t),r*Math.sin(t),Math.sin(e)]}function zn(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function Rn(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function Dn(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function Pn(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function Un(n){var t=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function jn(n){return[Math.atan2(n[1],n[0]),H(n[2])]}function Hn(n,t){return eo(n[0]-t[0])<So&&eo(n[1]-t[1])<So}function Fn(n,t){n*=No;var e=Math.cos(t*=No);On(e*Math.cos(n),e*Math.sin(n),Math.sin(t))}function On(n,t,e){++fa,ha+=(n-ha)/fa,pa+=(t-pa)/fa,ga+=(e-ga)/fa}function Yn(){function n(n,i){n*=No;var u=Math.cos(i*=No),o=u*Math.cos(n),a=u*Math.sin(n),c=Math.sin(i),l=Math.atan2(Math.sqrt((l=e*c-r*a)*l+(l=r*o-t*c)*l+(l=t*a-e*o)*l),t*o+e*a+r*c);sa+=l,va+=l*(t+(t=o)),da+=l*(e+(e=a)),ya+=l*(r+(r=c)),On(t,e,r)}var t,e,r;_a.point=function(i,u){i*=No;var o=Math.cos(u*=No);t=o*Math.cos(i),e=o*Math.sin(i),r=Math.sin(u),_a.point=n,On(t,e,r)}}function In(){_a.point=Fn}function Zn(){function n(n,t){n*=No;var e=Math.cos(t*=No),o=e*Math.cos(n),a=e*Math.sin(n),c=Math.sin(t),l=i*c-u*a,f=u*o-r*c,s=r*a-i*o,h=Math.sqrt(l*l+f*f+s*s),p=r*o+i*a+u*c,g=h&&-j(p)/h,v=Math.atan2(h,p);ma+=g*l,xa+=g*f,Ma+=g*s,sa+=v,va+=v*(r+(r=o)),da+=v*(i+(i=a)),ya+=v*(u+(u=c)),On(r,i,u)}var t,e,r,i,u;_a.point=function(o,a){t=o,e=a,_a.point=n,o*=No;var c=Math.cos(a*=No);r=c*Math.cos(o),i=c*Math.sin(o),u=Math.sin(a),On(r,i,u)},_a.lineEnd=function(){n(t,e),_a.lineEnd=In,_a.point=Fn}}function Vn(){return!0}function Xn(n,t,e,r,i){var u=[],o=[];if(n.forEach(function(n){if(!((t=n.length-1)<=0)){var t,e=n[0],r=n[t];if(Hn(e,r)){i.lineStart();for(var a=0;a<t;++a)i.point((e=n[a])[0],e[1]);return void i.lineEnd()}var c=new Bn(e,n,null,(!0)),l=new Bn(e,null,c,(!1));c.o=l,u.push(c),o.push(l),c=new Bn(r,n,null,(!1)),l=new Bn(r,null,c,(!0)),c.o=l,u.push(c),o.push(l)}}),o.sort(t),$n(u),$n(o),u.length){for(var a=0,c=e,l=o.length;a<l;++a)o[a].e=c=!c;for(var f,s,h=u[0];;){for(var p=h,g=!0;p.v;)if((p=p.n)===h)return;f=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(g)for(var a=0,l=f.length;a<l;++a)i.point((s=f[a])[0],s[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(g){f=p.p.z;for(var a=f.length-1;a>=0;--a)i.point((s=f[a])[0],s[1])}else r(p.x,p.p.x,-1,i);p=p.p}p=p.o,f=p.z,g=!g}while(!p.v);i.lineEnd()}}}function $n(n){if(t=n.length){for(var t,e,r=0,i=n[0];++r<t;)i.n=e=n[r],e.p=i,i=e;i.n=e=n[0],e.p=i}}function Bn(n,t,e,r){this.x=n,this.z=t,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function Wn(n,t,e,r){return function(i,u){function o(t,e){var r=i(t,e);n(t=r[0],e=r[1])&&u.point(t,e)}function a(n,t){var e=i(n,t);d.point(e[0],e[1])}function c(){m.point=a,d.lineStart()}function l(){m.point=o,d.lineEnd()}function f(n,t){v.push([n,t]);var e=i(n,t);M.point(e[0],e[1])}function s(){M.lineStart(),v=[]}function h(){f(v[0][0],v[0][1]),M.lineEnd();var n,t=M.clean(),e=x.buffer(),r=e.length;if(v.pop(),g.push(v),v=null,r){if(1&t){n=e[0];var i,r=n.length-1,o=-1;for(u.lineStart();++o<r;)u.point((i=n[o])[0],i[1]);return void u.lineEnd()}r>1&&2&t&&e.push(e.pop().concat(e.shift())),p.push(e.filter(Jn))}}var p,g,v,d=t(u),y=i.invert(r[0],r[1]),m={point:o,lineStart:c,lineEnd:l,polygonStart:function(){m.point=f,m.lineStart=s,m.lineEnd=h,p=[],g=[],u.polygonStart()},polygonEnd:function(){m.point=o,m.lineStart=c,m.lineEnd=l,p=Zu.merge(p);var n=Qn(y,g);p.length?Xn(p,Kn,n,e,u):n&&(u.lineStart(),e(null,null,1,u),u.lineEnd()),u.polygonEnd(),p=g=null},sphere:function(){u.polygonStart(),u.lineStart(),e(null,null,1,u),u.lineEnd(),u.polygonEnd()}},x=Gn(),M=t(x);return m}}function Jn(n){return n.length>1}function Gn(){var n,t=[];return{lineStart:function(){t.push(n=[])},point:function(t,e){n.push([t,e])},lineEnd:c,buffer:function(){var e=t;return t=[],n=null,e},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function Kn(n,t){return((n=n.x)[0]<0?n[1]-wo-So:wo-n[1])-((t=t.x)[0]<0?t[1]-wo-So:wo-t[1])}function Qn(n,t){var e=n[0],r=n[1],i=[Math.sin(e),-Math.cos(e),0],u=0,o=0;ca.reset();for(var a=0,c=t.length;a<c;++a){var l=t[a],f=l.length;if(f)for(var s=l[0],h=s[0],p=s[1]/2+_o/4,g=Math.sin(p),v=Math.cos(p),d=1;;){d===f&&(d=0),n=l[d];var y=n[0],m=n[1]/2+_o/4,x=Math.sin(m),M=Math.cos(m),_=y-h,b=eo(_)>_o,w=g*x;if(ca.add(Math.atan2(w*Math.sin(_),v*M+w*Math.cos(_))),u+=b?_+(_>=0?bo:-bo):_,b^h>=e^y>=e){var S=Rn(qn(s),qn(n));Un(S);var k=Rn(i,S);Un(k);var N=(b^_>=0?-1:1)*H(k[2]);(r>N||r===N&&(S[0]||S[1]))&&(o+=b^_>=0?1:-1)}if(!d++)break;h=y,g=x,v=M,s=n}}return(u<-So||u<So&&ca<0)^1&o}function nt(n){var t,e=NaN,r=NaN,i=NaN;return{lineStart:function(){n.lineStart(),t=1},point:function(u,o){var a=u>0?_o:-_o,c=eo(u-e);eo(c-_o)<So?(n.point(e,r=(r+o)/2>0?wo:-wo),n.point(i,r),n.lineEnd(),n.lineStart(),n.point(a,r),n.point(u,r),t=0):i!==a&&c>=_o&&(eo(e-i)<So&&(e-=i*So),eo(u-a)<So&&(u-=a*So),r=tt(e,r,u,o),n.point(i,r),n.lineEnd(),n.lineStart(),n.point(a,r),t=0),n.point(e=u,r=o),i=a},lineEnd:function(){n.lineEnd(),e=r=NaN},clean:function(){return 2-t}}}function tt(n,t,e,r){var i,u,o=Math.sin(n-e);return eo(o)>So?Math.atan((Math.sin(t)*(u=Math.cos(r))*Math.sin(e)-Math.sin(r)*(i=Math.cos(t))*Math.sin(n))/(i*u*o)):(t+r)/2}function et(n,t,e,r){var i;if(null==n)i=e*wo,r.point(-_o,i),r.point(0,i),r.point(_o,i),r.point(_o,0),r.point(_o,-i),r.point(0,-i),r.point(-_o,-i),r.point(-_o,0),r.point(-_o,i);else if(eo(n[0]-t[0])>So){var u=n[0]<t[0]?_o:-_o;i=e*u/2,r.point(-u,i),r.point(0,i),r.point(u,i)}else r.point(t[0],t[1])}function rt(n){function t(n,t){return Math.cos(n)*Math.cos(t)>u}function e(n){var e,u,c,l,f;return{lineStart:function(){l=c=!1,f=1},point:function(s,h){var p,g=[s,h],v=t(s,h),d=o?v?0:i(s,h):v?i(s+(s<0?_o:-_o),h):0;if(!e&&(l=c=v)&&n.lineStart(),v!==c&&(p=r(e,g),(Hn(e,p)||Hn(g,p))&&(g[0]+=So,g[1]+=So,v=t(g[0],g[1]))),v!==c)f=0,v?(n.lineStart(),p=r(g,e),n.point(p[0],p[1])):(p=r(e,g),n.point(p[0],p[1]),n.lineEnd()),e=p;else if(a&&e&&o^v){var y;d&u||!(y=r(g,e,!0))||(f=0,o?(n.lineStart(),n.point(y[0][0],y[0][1]),n.point(y[1][0],y[1][1]),n.lineEnd()):(n.point(y[1][0],y[1][1]),n.lineEnd(),n.lineStart(),n.point(y[0][0],y[0][1])))}!v||e&&Hn(e,g)||n.point(g[0],g[1]),e=g,c=v,u=d},lineEnd:function(){c&&n.lineEnd(),e=null},clean:function(){return f|(l&&c)<<1}}}function r(n,t,e){var r=qn(n),i=qn(t),o=[1,0,0],a=Rn(r,i),c=zn(a,a),l=a[0],f=c-l*l;if(!f)return!e&&n;var s=u*c/f,h=-u*l/f,p=Rn(o,a),g=Pn(o,s),v=Pn(a,h);Dn(g,v);var d=p,y=zn(g,d),m=zn(d,d),x=y*y-m*(zn(g,g)-1);if(!(x<0)){var M=Math.sqrt(x),_=Pn(d,(-y-M)/m);if(Dn(_,g),_=jn(_),!e)return _;var b,w=n[0],S=t[0],k=n[1],N=t[1];S<w&&(b=w,w=S,S=b);var E=S-w,A=eo(E-_o)<So,C=A||E<So;if(!A&&N<k&&(b=k,k=N,N=b),C?A?k+N>0^_[1]<(eo(_[0]-w)<So?k:N):k<=_[1]&&_[1]<=N:E>_o^(w<=_[0]&&_[0]<=S)){var L=Pn(d,(-y+M)/m);return Dn(L,g),[_,jn(L)]}}}function i(t,e){var r=o?n:_o-n,i=0;return t<-r?i|=1:t>r&&(i|=2),e<-r?i|=4:e>r&&(i|=8),i}var u=Math.cos(n),o=u>0,a=eo(u)>So,c=Lt(n,6*No);return Wn(t,e,c,o?[0,-n]:[-_o,n-_o])}function it(n,t,e,r){return function(i){var u,o=i.a,a=i.b,c=o.x,l=o.y,f=a.x,s=a.y,h=0,p=1,g=f-c,v=s-l;if(u=n-c,g||!(u>0)){if(u/=g,g<0){if(u<h)return;u<p&&(p=u)}else if(g>0){if(u>p)return;u>h&&(h=u)}if(u=e-c,g||!(u<0)){if(u/=g,g<0){if(u>p)return;u>h&&(h=u)}else if(g>0){if(u<h)return;u<p&&(p=u)}if(u=t-l,v||!(u>0)){if(u/=v,v<0){if(u<h)return;u<p&&(p=u)}else if(v>0){if(u>p)return;u>h&&(h=u)}if(u=r-l,v||!(u<0)){if(u/=v,v<0){if(u>p)return;u>h&&(h=u)}else if(v>0){if(u<h)return;u<p&&(p=u)}return h>0&&(i.a={x:c+h*g,y:l+h*v}),p<1&&(i.b={x:c+p*g,y:l+p*v}),i}}}}}}function ut(n,t,e,r){function i(r,i){return eo(r[0]-n)<So?i>0?0:3:eo(r[0]-e)<So?i>0?2:1:eo(r[1]-t)<So?i>0?1:0:i>0?3:2}function u(n,t){return o(n.x,t.x)}function o(n,t){var e=i(n,1),r=i(t,1);return e!==r?e-r:0===e?t[1]-n[1]:1===e?n[0]-t[0]:2===e?n[1]-t[1]:t[0]-n[0]}return function(a){function c(n){for(var t=0,e=y.length,r=n[1],i=0;i<e;++i)for(var u,o=1,a=y[i],c=a.length,f=a[0];o<c;++o)u=a[o],f[1]<=r?u[1]>r&&l(f,u,n)>0&&++t:u[1]<=r&&l(f,u,n)<0&&--t,f=u;return 0!==t}function l(n,t,e){return(t[0]-n[0])*(e[1]-n[1])-(e[0]-n[0])*(t[1]-n[1])}function f(u,a,c,l){var f=0,s=0;if(null==u||(f=i(u,c))!==(s=i(a,c))||o(u,a)<0^c>0){do l.point(0===f||3===f?n:e,f>1?r:t);while((f=(f+c+4)%4)!==s)}else l.point(a[0],a[1])}function s(i,u){return n<=i&&i<=e&&t<=u&&u<=r}function h(n,t){s(n,t)&&a.point(n,t)}function p(){L.point=v,y&&y.push(m=[]),k=!0,S=!1,b=w=NaN}function g(){d&&(v(x,M),_&&S&&A.rejoin(),d.push(A.buffer())),L.point=h,S&&a.lineEnd()}function v(n,t){n=Math.max(-wa,Math.min(wa,n)),t=Math.max(-wa,Math.min(wa,t));var e=s(n,t);if(y&&m.push([n,t]),k)x=n,M=t,_=e,k=!1,e&&(a.lineStart(),a.point(n,t));else if(e&&S)a.point(n,t);else{var r={a:{x:b,y:w},b:{x:n,y:t}};C(r)?(S||(a.lineStart(),a.point(r.a.x,r.a.y)),a.point(r.b.x,r.b.y),e||a.lineEnd(),N=!1):e&&(a.lineStart(),a.point(n,t),N=!1)}b=n,w=t,S=e}var d,y,m,x,M,_,b,w,S,k,N,E=a,A=Gn(),C=it(n,t,e,r),L={point:h,lineStart:p,lineEnd:g,polygonStart:function(){a=A,d=[],y=[],N=!0},polygonEnd:function(){a=E,d=Zu.merge(d);var t=c([n,r]),e=N&&t,i=d.length;(e||i)&&(a.polygonStart(),e&&(a.lineStart(),f(null,null,1,a),a.lineEnd()),i&&Xn(d,u,t,f,a),a.polygonEnd()),d=y=m=null}};return L}}function ot(n,t){function e(e,r){return e=n(e,r),t(e[0],e[1])}return n.invert&&t.invert&&(e.invert=function(e,r){return e=t.invert(e,r),e&&n.invert(e[0],e[1])}),e}function at(n){var t=0,e=_o/3,r=bt(n),i=r(t,e);return i.parallels=function(n){return arguments.length?r(t=n[0]*_o/180,e=n[1]*_o/180):[t/_o*180,e/_o*180]},i}function ct(n,t){function e(n,t){var e=Math.sqrt(u-2*i*Math.sin(t))/i;return[e*Math.sin(n*=i),o-e*Math.cos(n)]}var r=Math.sin(n),i=(r+Math.sin(t))/2,u=1+r*(2*i-r),o=Math.sqrt(u)/i;return e.invert=function(n,t){var e=o-t;return[Math.atan2(n,e)/i,H((u-(n*n+e*e)*i*i)/(2*i))]},e}function lt(){function n(n,t){ka+=i*n-r*t,r=n,i=t}var t,e,r,i;La.point=function(u,o){La.point=n,t=r=u,e=i=o},La.lineEnd=function(){n(t,e)}}function ft(n,t){n<Na&&(Na=n),n>Aa&&(Aa=n),t<Ea&&(Ea=t),t>Ca&&(Ca=t)}function st(){function n(n,t){o.push("M",n,",",t,u)}function t(n,t){o.push("M",n,",",t),a.point=e}function e(n,t){o.push("L",n,",",t)}function r(){a.point=n}function i(){o.push("Z")}var u=ht(4.5),o=[],a={point:n,lineStart:function(){a.point=t},lineEnd:r,polygonStart:function(){a.lineEnd=i},polygonEnd:function(){a.lineEnd=r,a.point=n},pointRadius:function(n){return u=ht(n),a},result:function(){if(o.length){var n=o.join("");return o=[],n}}};return a}function ht(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}function pt(n,t){ha+=n,pa+=t,++ga}function gt(){function n(n,r){var i=n-t,u=r-e,o=Math.sqrt(i*i+u*u);va+=o*(t+n)/2,da+=o*(e+r)/2,ya+=o,pt(t=n,e=r)}var t,e;qa.point=function(r,i){qa.point=n,pt(t=r,e=i)}}function vt(){qa.point=pt}function dt(){function n(n,t){var e=n-r,u=t-i,o=Math.sqrt(e*e+u*u);va+=o*(r+n)/2,da+=o*(i+t)/2,ya+=o,o=i*n-r*t,ma+=o*(r+n),xa+=o*(i+t),Ma+=3*o,pt(r=n,i=t)}var t,e,r,i;qa.point=function(u,o){qa.point=n,pt(t=r=u,e=i=o)},qa.lineEnd=function(){n(t,e)}}function yt(n){function t(t,e){n.moveTo(t,e),n.arc(t,e,o,0,bo)}function e(t,e){n.moveTo(t,e),a.point=r}function r(t,e){n.lineTo(t,e)}function i(){a.point=t}function u(){n.closePath()}var o=4.5,a={point:t,lineStart:function(){a.point=e},lineEnd:i,polygonStart:function(){a.lineEnd=u},polygonEnd:function(){a.lineEnd=i,a.point=t},pointRadius:function(n){return o=n,a},result:c};return a}function mt(n){function t(t){function r(e,r){e=n(e,r),t.point(e[0],e[1])}function i(){x=NaN,S.point=o,t.lineStart()}function o(r,i){var o=qn([r,i]),a=n(r,i);e(x,M,m,_,b,w,x=a[0],M=a[1],m=r,_=o[0],b=o[1],w=o[2],u,t),t.point(x,M)}function a(){S.point=r,t.lineEnd()}function c(){i(),S.point=l,S.lineEnd=f}function l(n,t){o(s=n,h=t),p=x,g=M,v=_,d=b,y=w,S.point=o}function f(){e(x,M,m,_,b,w,p,g,s,v,d,y,u,t),S.lineEnd=a,a()}var s,h,p,g,v,d,y,m,x,M,_,b,w,S={point:r,lineStart:i,lineEnd:a,polygonStart:function(){t.polygonStart(),S.lineStart=c},polygonEnd:function(){t.polygonEnd(),S.lineStart=i}};return S}function e(t,u,o,a,c,l,f,s,h,p,g,v,d,y){var m=f-t,x=s-u,M=m*m+x*x;if(M>4*r&&d--){var _=a+p,b=c+g,w=l+v,S=Math.sqrt(_*_+b*b+w*w),k=Math.asin(w/=S),N=eo(eo(w)-1)<So?(o+h)/2:Math.atan2(b,_),E=n(N,k),A=E[0],C=E[1],L=A-t,T=C-u,q=x*L-m*T;(q*q/M>r||eo((m*L+x*T)/M-.5)>.3||a*p+c*g+l*v<i)&&(e(t,u,o,a,c,l,A,C,N,_/=S,b/=S,w,d,y),y.point(A,C),e(A,C,N,_,b,w,f,s,h,p,g,v,d,y))}}var r=.5,i=Math.cos(30*No),u=16;return t.precision=function(n){return arguments.length?(u=(r=n*n)>0&&16,t):Math.sqrt(r)},t}function xt(n){this.stream=n}function Mt(n){var t=mt(function(t,e){return n([t*Eo,e*Eo])});return function(n){var e=new xt(n=t(n));return e.point=function(t,e){n.point(t*No,e*No)},e}}function _t(n){return bt(function(){return n})()}function bt(n){function t(n){return n=a(n[0]*No,n[1]*No),[n[0]*h+c,l-n[1]*h]}function e(n){return n=a.invert((n[0]-c)/h,(l-n[1])/h),n&&[n[0]*Eo,n[1]*Eo]}function r(){a=ot(o=Nt(y,m,x),u);var n=u(v,d);return c=p-n[0]*h,l=g+n[1]*h,i()}function i(){return f&&(f.valid=!1,f=null),t}var u,o,a,c,l,f,s=mt(function(n,t){return n=u(n,t),[n[0]*h+c,l-n[1]*h]}),h=150,p=480,g=250,v=0,d=0,y=0,m=0,x=0,M=ba,_=dn,b=null,w=null;return t.stream=function(n){return f&&(f.valid=!1),f=wt(M(o,s(_(n)))),f.valid=!0,f},t.clipAngle=function(n){return arguments.length?(M=null==n?(b=n,ba):rt((b=+n)*No),i()):b},t.clipExtent=function(n){return arguments.length?(w=n,_=n?ut(n[0][0],n[0][1],n[1][0],n[1][1]):dn,i()):w},t.scale=function(n){return arguments.length?(h=+n,r()):h},t.translate=function(n){return arguments.length?(p=+n[0],g=+n[1],r()):[p,g]},t.center=function(n){return arguments.length?(v=n[0]%360*No,d=n[1]%360*No,r()):[v*Eo,d*Eo]},t.rotate=function(n){return arguments.length?(y=n[0]%360*No,m=n[1]%360*No,x=n.length>2?n[2]%360*No:0,r()):[y*Eo,m*Eo,x*Eo]},Zu.rebind(t,s,"precision"),function(){return u=n.apply(this,arguments),t.invert=u.invert&&e,r()}}function wt(n){var t=new xt(n);return t.point=function(t,e){n.point(t*No,e*No)},t}function St(n,t){return[n,t]}function kt(n,t){return[n>_o?n-bo:n<-_o?n+bo:n,t]}function Nt(n,t,e){return n?t||e?ot(At(n),Ct(t,e)):At(n):t||e?Ct(t,e):kt}function Et(n){return function(t,e){return t+=n,[t>_o?t-bo:t<-_o?t+bo:t,e]}}function At(n){var t=Et(n);return t.invert=Et(-n),t}function Ct(n,t){function e(n,t){var e=Math.cos(t),a=Math.cos(n)*e,c=Math.sin(n)*e,l=Math.sin(t),f=l*r+a*i;return[Math.atan2(c*u-f*o,a*r-l*i),H(f*u+c*o)]}var r=Math.cos(n),i=Math.sin(n),u=Math.cos(t),o=Math.sin(t);return e.invert=function(n,t){var e=Math.cos(t),a=Math.cos(n)*e,c=Math.sin(n)*e,l=Math.sin(t),f=l*u-c*o;return[Math.atan2(c*u+l*o,a*r+f*i),H(f*r-a*i)]},e}function Lt(n,t){var e=Math.cos(n),r=Math.sin(n);return function(i,u,o,a){var c=o*t;null!=i?(i=Tt(e,i),u=Tt(e,u),(o>0?i<u:i>u)&&(i+=o*bo)):(i=n+o*bo,u=n-.5*c);for(var l,f=i;o>0?f>u:f<u;f-=c)a.point((l=jn([e,-r*Math.cos(f),-r*Math.sin(f)]))[0],l[1])}}function Tt(n,t){var e=qn(t);e[0]-=n,Un(e);var r=j(-e[1]);return((-e[2]<0?-r:r)+2*Math.PI-So)%(2*Math.PI)}function qt(n,t,e){var r=Zu.range(n,t-So,e).concat(t);return function(n){return r.map(function(t){return[n,t]})}}function zt(n,t,e){var r=Zu.range(n,t-So,e).concat(t);return function(n){return r.map(function(t){return[t,n]})}}function Rt(n){return n.source}function Dt(n){return n.target}function Pt(n,t,e,r){var i=Math.cos(t),u=Math.sin(t),o=Math.cos(r),a=Math.sin(r),c=i*Math.cos(n),l=i*Math.sin(n),f=o*Math.cos(e),s=o*Math.sin(e),h=2*Math.asin(Math.sqrt(I(r-t)+i*o*I(e-n))),p=1/Math.sin(h),g=h?function(n){var t=Math.sin(n*=h)*p,e=Math.sin(h-n)*p,r=e*c+t*f,i=e*l+t*s,o=e*u+t*a;return[Math.atan2(i,r)*Eo,Math.atan2(o,Math.sqrt(r*r+i*i))*Eo]}:function(){return[n*Eo,t*Eo]};return g.distance=h,g}function Ut(){function n(n,i){var u=Math.sin(i*=No),o=Math.cos(i),a=eo((n*=No)-t),c=Math.cos(a);za+=Math.atan2(Math.sqrt((a=o*Math.sin(a))*a+(a=r*u-e*o*c)*a),e*u+r*o*c),t=n,e=u,r=o}var t,e,r;Ra.point=function(i,u){t=i*No,e=Math.sin(u*=No),r=Math.cos(u),Ra.point=n},Ra.lineEnd=function(){Ra.point=Ra.lineEnd=c}}function jt(n,t){function e(t,e){var r=Math.cos(t),i=Math.cos(e),u=n(r*i);return[u*i*Math.sin(t),u*Math.sin(e)]}return e.invert=function(n,e){var r=Math.sqrt(n*n+e*e),i=t(r),u=Math.sin(i),o=Math.cos(i);return[Math.atan2(n*u,r*o),Math.asin(r&&e*u/r)]},e}function Ht(n,t){function e(n,t){var e=eo(eo(t)-wo)<So?0:o/Math.pow(i(t),u);return[e*Math.sin(u*n),o-e*Math.cos(u*n)]}var r=Math.cos(n),i=function(n){return Math.tan(_o/4+n/2)},u=n===t?Math.sin(n):Math.log(r/Math.cos(t))/Math.log(i(t)/i(n)),o=r*Math.pow(i(n),u)/u;return u?(e.invert=function(n,t){var e=o-t,r=U(u)*Math.sqrt(n*n+e*e);return[Math.atan2(n,e)/u,2*Math.atan(Math.pow(o/r,1/u))-wo]},e):Ot}function Ft(n,t){function e(n,t){var e=u-t;return[e*Math.sin(i*n),u-e*Math.cos(i*n)]}var r=Math.cos(n),i=n===t?Math.sin(n):(r-Math.cos(t))/(t-n),u=r/i+n;return eo(i)<So?St:(e.invert=function(n,t){var e=u-t;return[Math.atan2(n,e)/i,u-U(i)*Math.sqrt(n*n+e*e)]},e)}function Ot(n,t){return[n,Math.log(Math.tan(_o/4+t/2))]}function Yt(n){var t,e=_t(n),r=e.scale,i=e.translate,u=e.clipExtent;return e.scale=function(){var n=r.apply(e,arguments);return n===e?t?e.clipExtent(null):e:n},e.translate=function(){var n=i.apply(e,arguments);return n===e?t?e.clipExtent(null):e:n},e.clipExtent=function(n){var o=u.apply(e,arguments);if(o===e){if(t=null==n){var a=_o*r(),c=i();u([[c[0]-a,c[1]-a],[c[0]+a,c[1]+a]])}}else t&&(o=null);return o},e.clipExtent(null)}function It(n,t){var e=Math.cos(t)*Math.sin(n);return[Math.log((1+e)/(1-e))/2,Math.atan2(Math.tan(t),Math.cos(n))]}function Zt(n){return n[0]}function Vt(n){return n[1]}function Xt(n,t,e,r){var i,u,o,a,c,l,f;return i=r[n],u=i[0],o=i[1],i=r[t],a=i[0],c=i[1],i=r[e],l=i[0],f=i[1],(f-o)*(a-u)-(c-o)*(l-u)>0}function $t(n,t,e){return(e[0]-t[0])*(n[1]-t[1])<(e[1]-t[1])*(n[0]-t[0])}function Bt(n,t,e,r){var i=n[0],u=e[0],o=t[0]-i,a=r[0]-u,c=n[1],l=e[1],f=t[1]-c,s=r[1]-l,h=(a*(c-l)-s*(i-u))/(s*o-a*f);return[i+h*o,c+h*f]}function Wt(n){var t=n[0],e=n[n.length-1];return!(t[0]-e[0]||t[1]-e[1])}function Jt(){ye(this),this.edge=this.site=this.circle=null}function Gt(n){var t=Xa.pop()||new Jt;return t.site=n,t}function Kt(n){ce(n),Ia.remove(n),Xa.push(n),ye(n)}function Qt(n){var t=n.circle,e=t.x,r=t.cy,i={x:e,y:r},u=n.P,o=n.N,a=[n];Kt(n);for(var c=u;c.circle&&eo(e-c.circle.x)<So&&eo(r-c.circle.cy)<So;)u=c.P,a.unshift(c),Kt(c),c=u;a.unshift(c),ce(c);for(var l=o;l.circle&&eo(e-l.circle.x)<So&&eo(r-l.circle.cy)<So;)o=l.N,a.push(l),Kt(l),l=o;a.push(l),ce(l);var f,s=a.length;for(f=1;f<s;++f)l=a[f],c=a[f-1],ge(l.edge,c.site,l.site,i);c=a[0],l=a[s-1],l.edge=he(c.site,l.site,null,i),ae(c),ae(l)}function ne(n){for(var t,e,r,i,u=n.x,o=n.y,a=Ia._;a;)if(r=te(a,o)-u,r>So)a=a.L;else{if(i=u-ee(a,o),!(i>So)){r>-So?(t=a.P,e=a):i>-So?(t=a,e=a.N):t=e=a;break}if(!a.R){t=a;break}a=a.R}var c=Gt(n);if(Ia.insert(t,c),t||e){if(t===e)return ce(t),e=Gt(t.site),Ia.insert(c,e),c.edge=e.edge=he(t.site,c.site),ae(t),void ae(e);if(!e)return void(c.edge=he(t.site,c.site));ce(t),ce(e);var l=t.site,f=l.x,s=l.y,h=n.x-f,p=n.y-s,g=e.site,v=g.x-f,d=g.y-s,y=2*(h*d-p*v),m=h*h+p*p,x=v*v+d*d,M={x:(d*m-p*x)/y+f,y:(h*x-v*m)/y+s};ge(e.edge,l,g,M),c.edge=he(l,n,null,M),e.edge=he(n,g,null,M),ae(t),ae(e)}}function te(n,t){var e=n.site,r=e.x,i=e.y,u=i-t;if(!u)return r;var o=n.P;if(!o)return-(1/0);e=o.site;var a=e.x,c=e.y,l=c-t;if(!l)return a;var f=a-r,s=1/u-1/l,h=f/l;return s?(-h+Math.sqrt(h*h-2*s*(f*f/(-2*l)-c+l/2+i-u/2)))/s+r:(r+a)/2}function ee(n,t){var e=n.N;if(e)return te(e,t);var r=n.site;return r.y===t?r.x:1/0}function re(n){this.site=n,this.edges=[]}function ie(n){for(var t,e,r,i,u,o,a,c,l,f,s=n[0][0],h=n[1][0],p=n[0][1],g=n[1][1],v=Ya,d=v.length;d--;)if(u=v[d],u&&u.prepare())for(a=u.edges,c=a.length,o=0;o<c;)f=a[o].end(),r=f.x,i=f.y,l=a[++o%c].start(),t=l.x,e=l.y,(eo(r-t)>So||eo(i-e)>So)&&(a.splice(o,0,new ve(pe(u.site,f,eo(r-s)<So&&g-i>So?{x:s,y:eo(t-s)<So?e:g}:eo(i-g)<So&&h-r>So?{x:eo(e-g)<So?t:h,y:g}:eo(r-h)<So&&i-p>So?{x:h,y:eo(t-h)<So?e:p}:eo(i-p)<So&&r-s>So?{x:eo(e-p)<So?t:s,y:p}:null),u.site,null)),++c)}function ue(n,t){return t.angle-n.angle}function oe(){ye(this),this.x=this.y=this.arc=this.site=this.cy=null}function ae(n){var t=n.P,e=n.N;if(t&&e){var r=t.site,i=n.site,u=e.site;if(r!==u){var o=i.x,a=i.y,c=r.x-o,l=r.y-a,f=u.x-o,s=u.y-a,h=2*(c*s-l*f);if(!(h>=-ko)){var p=c*c+l*l,g=f*f+s*s,v=(s*p-l*g)/h,d=(c*g-f*p)/h,s=d+a,y=$a.pop()||new oe;y.arc=n,y.site=i,y.x=v+o,y.y=s+Math.sqrt(v*v+d*d),y.cy=s,n.circle=y;for(var m=null,x=Va._;x;)if(y.y<x.y||y.y===x.y&&y.x<=x.x){if(!x.L){m=x.P;break}x=x.L}else{if(!x.R){m=x;break}x=x.R}Va.insert(m,y),m||(Za=y)}}}}function ce(n){var t=n.circle;t&&(t.P||(Za=t.N),Va.remove(t),$a.push(t),ye(t),n.circle=null)}function le(n){for(var t,e=Oa,r=it(n[0][0],n[0][1],n[1][0],n[1][1]),i=e.length;i--;)t=e[i],(!fe(t,n)||!r(t)||eo(t.a.x-t.b.x)<So&&eo(t.a.y-t.b.y)<So)&&(t.a=t.b=null,e.splice(i,1))}function fe(n,t){var e=n.b;if(e)return!0;var r,i,u=n.a,o=t[0][0],a=t[1][0],c=t[0][1],l=t[1][1],f=n.l,s=n.r,h=f.x,p=f.y,g=s.x,v=s.y,d=(h+g)/2,y=(p+v)/2;if(v===p){if(d<o||d>=a)return;if(h>g){if(u){if(u.y>=l)return}else u={x:d,y:c};e={x:d,y:l}}else{if(u){if(u.y<c)return}else u={x:d,y:l};e={x:d,y:c}}}else if(r=(h-g)/(v-p),i=y-r*d,
r<-1||r>1)if(h>g){if(u){if(u.y>=l)return}else u={x:(c-i)/r,y:c};e={x:(l-i)/r,y:l}}else{if(u){if(u.y<c)return}else u={x:(l-i)/r,y:l};e={x:(c-i)/r,y:c}}else if(p<v){if(u){if(u.x>=a)return}else u={x:o,y:r*o+i};e={x:a,y:r*a+i}}else{if(u){if(u.x<o)return}else u={x:a,y:r*a+i};e={x:o,y:r*o+i}}return n.a=u,n.b=e,!0}function se(n,t){this.l=n,this.r=t,this.a=this.b=null}function he(n,t,e,r){var i=new se(n,t);return Oa.push(i),e&&ge(i,n,t,e),r&&ge(i,t,n,r),Ya[n.i].edges.push(new ve(i,n,t)),Ya[t.i].edges.push(new ve(i,t,n)),i}function pe(n,t,e){var r=new se(n,null);return r.a=t,r.b=e,Oa.push(r),r}function ge(n,t,e,r){n.a||n.b?n.l===e?n.b=r:n.a=r:(n.a=r,n.l=t,n.r=e)}function ve(n,t,e){var r=n.a,i=n.b;this.edge=n,this.site=t,this.angle=e?Math.atan2(e.y-t.y,e.x-t.x):n.l===t?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function de(){this._=null}function ye(n){n.U=n.C=n.L=n.R=n.P=n.N=null}function me(n,t){var e=t,r=t.R,i=e.U;i?i.L===e?i.L=r:i.R=r:n._=r,r.U=i,e.U=r,e.R=r.L,e.R&&(e.R.U=e),r.L=e}function xe(n,t){var e=t,r=t.L,i=e.U;i?i.L===e?i.L=r:i.R=r:n._=r,r.U=i,e.U=r,e.L=r.R,e.L&&(e.L.U=e),r.R=e}function Me(n){for(;n.L;)n=n.L;return n}function _e(n,t){var e,r,i,u=n.sort(be).pop();for(Oa=[],Ya=new Array(n.length),Ia=new de,Va=new de;;)if(i=Za,u&&(!i||u.y<i.y||u.y===i.y&&u.x<i.x))u.x===e&&u.y===r||(Ya[u.i]=new re(u),ne(u),e=u.x,r=u.y),u=n.pop();else{if(!i)break;Qt(i.arc)}t&&(le(t),ie(t));var o={cells:Ya,edges:Oa};return Ia=Va=Oa=Ya=null,o}function be(n,t){return t.y-n.y||t.x-n.x}function we(n,t,e){return(n.x-e.x)*(t.y-n.y)-(n.x-t.x)*(e.y-n.y)}function Se(n){return n.x}function ke(n){return n.y}function Ne(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Ee(n,t,e,r,i,u){if(!n(t,e,r,i,u)){var o=.5*(e+i),a=.5*(r+u),c=t.nodes;c[0]&&Ee(n,c[0],e,r,o,a),c[1]&&Ee(n,c[1],o,r,i,a),c[2]&&Ee(n,c[2],e,a,o,u),c[3]&&Ee(n,c[3],o,a,i,u)}}function Ae(n,t){n=Zu.rgb(n),t=Zu.rgb(t);var e=n.r,r=n.g,i=n.b,u=t.r-e,o=t.g-r,a=t.b-i;return function(n){return"#"+ln(Math.round(e+u*n))+ln(Math.round(r+o*n))+ln(Math.round(i+a*n))}}function Ce(n,t){var e,r={},i={};for(e in n)e in t?r[e]=qe(n[e],t[e]):i[e]=n[e];for(e in t)e in n||(i[e]=t[e]);return function(n){for(e in r)i[e]=r[e](n);return i}}function Le(n,t){return t-=n=+n,function(e){return n+t*e}}function Te(n,t){var e,r,i,u,o,a=0,c=0,l=[],f=[];for(n+="",t+="",Wa.lastIndex=0,r=0;e=Wa.exec(t);++r)e.index&&l.push(t.substring(a,c=e.index)),f.push({i:l.length,x:e[0]}),l.push(null),a=Wa.lastIndex;for(a<t.length&&l.push(t.substring(a)),r=0,u=f.length;(e=Wa.exec(n))&&r<u;++r)if(o=f[r],o.x==e[0]){if(o.i)if(null==l[o.i+1])for(l[o.i-1]+=o.x,l.splice(o.i,1),i=r+1;i<u;++i)f[i].i--;else for(l[o.i-1]+=o.x+l[o.i+1],l.splice(o.i,2),i=r+1;i<u;++i)f[i].i-=2;else if(null==l[o.i+1])l[o.i]=o.x;else for(l[o.i]=o.x+l[o.i+1],l.splice(o.i+1,1),i=r+1;i<u;++i)f[i].i--;f.splice(r,1),u--,r--}else o.x=Le(parseFloat(e[0]),parseFloat(o.x));for(;r<u;)o=f.pop(),null==l[o.i+1]?l[o.i]=o.x:(l[o.i]=o.x+l[o.i+1],l.splice(o.i+1,1)),u--;return 1===l.length?null==l[0]?(o=f[0].x,function(n){return o(n)+""}):function(){return t}:function(n){for(r=0;r<u;++r)l[(o=f[r]).i]=o.x(n);return l.join("")}}function qe(n,t){for(var e,r=Zu.interpolators.length;--r>=0&&!(e=Zu.interpolators[r](n,t)););return e}function ze(n,t){var e,r=[],i=[],u=n.length,o=t.length,a=Math.min(n.length,t.length);for(e=0;e<a;++e)r.push(qe(n[e],t[e]));for(;e<u;++e)i[e]=n[e];for(;e<o;++e)i[e]=t[e];return function(n){for(e=0;e<a;++e)i[e]=r[e](n);return i}}function Re(n){return function(t){return t<=0?0:t>=1?1:n(t)}}function De(n){return function(t){return 1-n(1-t)}}function Pe(n){return function(t){return.5*(t<.5?n(2*t):2-n(2-2*t))}}function Ue(n){return n*n}function je(n){return n*n*n}function He(n){if(n<=0)return 0;if(n>=1)return 1;var t=n*n,e=t*n;return 4*(n<.5?e:3*(n-t)+e-.75)}function Fe(n){return function(t){return Math.pow(t,n)}}function Oe(n){return 1-Math.cos(n*wo)}function Ye(n){return Math.pow(2,10*(n-1))}function Ie(n){return 1-Math.sqrt(1-n*n)}function Ze(n,t){var e;return arguments.length<2&&(t=.45),arguments.length?e=t/bo*Math.asin(1/n):(n=1,e=t/4),function(r){return 1+n*Math.pow(2,-10*r)*Math.sin((r-e)*bo/t)}}function Ve(n){return n||(n=1.70158),function(t){return t*t*((n+1)*t-n)}}function Xe(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375}function $e(n,t){n=Zu.hcl(n),t=Zu.hcl(t);var e=n.h,r=n.c,i=n.l,u=t.h-e,o=t.c-r,a=t.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?t.c:r),isNaN(u)?(u=0,e=isNaN(e)?t.h:e):u>180?u-=360:u<-180&&(u+=360),function(n){return J(e+u*n,r+o*n,i+a*n)+""}}function Be(n,t){n=Zu.hsl(n),t=Zu.hsl(t);var e=n.h,r=n.s,i=n.l,u=t.h-e,o=t.s-r,a=t.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?t.s:r),isNaN(u)?(u=0,e=isNaN(e)?t.h:e):u>180?u-=360:u<-180&&(u+=360),function(n){return $(e+u*n,r+o*n,i+a*n)+""}}function We(n,t){n=Zu.lab(n),t=Zu.lab(t);var e=n.l,r=n.a,i=n.b,u=t.l-e,o=t.a-r,a=t.b-i;return function(n){return Q(e+u*n,r+o*n,i+a*n)+""}}function Je(n,t){return t-=n,function(e){return Math.round(n+t*e)}}function Ge(n){var t=[n.a,n.b],e=[n.c,n.d],r=Qe(t),i=Ke(t,e),u=Qe(nr(e,t,-i))||0;t[0]*e[1]<e[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-e[0],e[1]))*Eo,this.translate=[n.e,n.f],this.scale=[r,u],this.skew=u?Math.atan2(i,u)*Eo:0}function Ke(n,t){return n[0]*t[0]+n[1]*t[1]}function Qe(n){var t=Math.sqrt(Ke(n,n));return t&&(n[0]/=t,n[1]/=t),t}function nr(n,t,e){return n[0]+=e*t[0],n[1]+=e*t[1],n}function tr(n,t){var e,r=[],i=[],u=Zu.transform(n),o=Zu.transform(t),a=u.translate,c=o.translate,l=u.rotate,f=o.rotate,s=u.skew,h=o.skew,p=u.scale,g=o.scale;return a[0]!=c[0]||a[1]!=c[1]?(r.push("translate(",null,",",null,")"),i.push({i:1,x:Le(a[0],c[0])},{i:3,x:Le(a[1],c[1])})):c[0]||c[1]?r.push("translate("+c+")"):r.push(""),l!=f?(l-f>180?f+=360:f-l>180&&(l+=360),i.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:Le(l,f)})):f&&r.push(r.pop()+"rotate("+f+")"),s!=h?i.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:Le(s,h)}):h&&r.push(r.pop()+"skewX("+h+")"),p[0]!=g[0]||p[1]!=g[1]?(e=r.push(r.pop()+"scale(",null,",",null,")"),i.push({i:e-4,x:Le(p[0],g[0])},{i:e-2,x:Le(p[1],g[1])})):1==g[0]&&1==g[1]||r.push(r.pop()+"scale("+g+")"),e=i.length,function(n){for(var t,u=-1;++u<e;)r[(t=i[u]).i]=t.x(n);return r.join("")}}function er(n,t){return t=t-(n=+n)?1/(t-n):0,function(e){return(e-n)*t}}function rr(n,t){return t=t-(n=+n)?1/(t-n):0,function(e){return Math.max(0,Math.min(1,(e-n)*t))}}function ir(n){for(var t=n.source,e=n.target,r=or(t,e),i=[t];t!==r;)t=t.parent,i.push(t);for(var u=i.length;e!==r;)i.splice(u,0,e),e=e.parent;return i}function ur(n){for(var t=[],e=n.parent;null!=e;)t.push(n),n=e,e=e.parent;return t.push(n),t}function or(n,t){if(n===t)return n;for(var e=ur(n),r=ur(t),i=e.pop(),u=r.pop(),o=null;i===u;)o=i,i=e.pop(),u=r.pop();return o}function ar(n){n.fixed|=2}function cr(n){n.fixed&=-7}function lr(n){n.fixed|=4,n.px=n.x,n.py=n.y}function fr(n){n.fixed&=-5}function sr(n,t,e){var r=0,i=0;if(n.charge=0,!n.leaf)for(var u,o=n.nodes,a=o.length,c=-1;++c<a;)u=o[c],null!=u&&(sr(u,t,e),n.charge+=u.charge,r+=u.charge*u.cx,i+=u.charge*u.cy);if(n.point){n.leaf||(n.point.x+=Math.random()-.5,n.point.y+=Math.random()-.5);var l=t*e[n.point.index];n.charge+=n.pointCharge=l,r+=l*n.point.x,i+=l*n.point.y}n.cx=r/n.charge,n.cy=i/n.charge}function hr(n,t){return Zu.rebind(n,t,"sort","children","value"),n.nodes=n,n.links=dr,n}function pr(n){return n.children}function gr(n){return n.value}function vr(n,t){return t.value-n.value}function dr(n){return Zu.merge(n.map(function(n){return(n.children||[]).map(function(t){return{source:n,target:t}})}))}function yr(n){return n.x}function mr(n){return n.y}function xr(n,t,e){n.y0=t,n.y=e}function Mr(n){return Zu.range(n.length)}function _r(n){for(var t=-1,e=n[0].length,r=[];++t<e;)r[t]=0;return r}function br(n){for(var t,e=1,r=0,i=n[0][1],u=n.length;e<u;++e)(t=n[e][1])>i&&(r=e,i=t);return r}function wr(n){return n.reduce(Sr,0)}function Sr(n,t){return n+t[1]}function kr(n,t){return Nr(n,Math.ceil(Math.log(t.length)/Math.LN2+1))}function Nr(n,t){for(var e=-1,r=+n[0],i=(n[1]-r)/t,u=[];++e<=t;)u[e]=i*e+r;return u}function Er(n){return[Zu.min(n),Zu.max(n)]}function Ar(n,t){return n.parent==t.parent?1:2}function Cr(n){var t=n.children;return t&&t.length?t[0]:n._tree.thread}function Lr(n){var t,e=n.children;return e&&(t=e.length)?e[t-1]:n._tree.thread}function Tr(n,t){var e=n.children;if(e&&(i=e.length))for(var r,i,u=-1;++u<i;)t(r=Tr(e[u],t),n)>0&&(n=r);return n}function qr(n,t){return n.x-t.x}function zr(n,t){return t.x-n.x}function Rr(n,t){return n.depth-t.depth}function Dr(n,t){function e(n,r){var i=n.children;if(i&&(o=i.length))for(var u,o,a=null,c=-1;++c<o;)u=i[c],e(u,a),a=u;t(n,r)}e(n,null)}function Pr(n){for(var t,e=0,r=0,i=n.children,u=i.length;--u>=0;)t=i[u]._tree,t.prelim+=e,t.mod+=e,e+=t.shift+(r+=t.change)}function Ur(n,t,e){n=n._tree,t=t._tree;var r=e/(t.number-n.number);n.change+=r,t.change-=r,t.shift+=e,t.prelim+=e,t.mod+=e}function jr(n,t,e){return n._tree.ancestor.parent==t.parent?n._tree.ancestor:e}function Hr(n,t){return n.value-t.value}function Fr(n,t){var e=n._pack_next;n._pack_next=t,t._pack_prev=n,t._pack_next=e,e._pack_prev=t}function Or(n,t){n._pack_next=t,t._pack_prev=n}function Yr(n,t){var e=t.x-n.x,r=t.y-n.y,i=n.r+t.r;return.999*i*i>e*e+r*r}function Ir(n){function t(n){f=Math.min(n.x-n.r,f),s=Math.max(n.x+n.r,s),h=Math.min(n.y-n.r,h),p=Math.max(n.y+n.r,p)}if((e=n.children)&&(l=e.length)){var e,r,i,u,o,a,c,l,f=1/0,s=-(1/0),h=1/0,p=-(1/0);if(e.forEach(Zr),r=e[0],r.x=-r.r,r.y=0,t(r),l>1&&(i=e[1],i.x=i.r,i.y=0,t(i),l>2))for(u=e[2],$r(r,i,u),t(u),Fr(r,u),r._pack_prev=u,Fr(u,i),i=r._pack_next,o=3;o<l;o++){$r(r,i,u=e[o]);var g=0,v=1,d=1;for(a=i._pack_next;a!==i;a=a._pack_next,v++)if(Yr(a,u)){g=1;break}if(1==g)for(c=r._pack_prev;c!==a._pack_prev&&!Yr(c,u);c=c._pack_prev,d++);g?(v<d||v==d&&i.r<r.r?Or(r,i=a):Or(r=c,i),o--):(Fr(r,u),i=u,t(u))}var y=(f+s)/2,m=(h+p)/2,x=0;for(o=0;o<l;o++)u=e[o],u.x-=y,u.y-=m,x=Math.max(x,u.r+Math.sqrt(u.x*u.x+u.y*u.y));n.r=x,e.forEach(Vr)}}function Zr(n){n._pack_next=n._pack_prev=n}function Vr(n){delete n._pack_next,delete n._pack_prev}function Xr(n,t,e,r){var i=n.children;if(n.x=t+=r*n.x,n.y=e+=r*n.y,n.r*=r,i)for(var u=-1,o=i.length;++u<o;)Xr(i[u],t,e,r)}function $r(n,t,e){var r=n.r+e.r,i=t.x-n.x,u=t.y-n.y;if(r&&(i||u)){var o=t.r+e.r,a=i*i+u*u;o*=o,r*=r;var c=.5+(r-o)/(2*a),l=Math.sqrt(Math.max(0,2*o*(r+a)-(r-=a)*r-o*o))/(2*a);e.x=n.x+c*i+l*u,e.y=n.y+c*u-l*i}else e.x=n.x+r,e.y=n.y}function Br(n){return 1+Zu.max(n,function(n){return n.y})}function Wr(n){return n.reduce(function(n,t){return n+t.x},0)/n.length}function Jr(n){var t=n.children;return t&&t.length?Jr(t[0]):n}function Gr(n){var t,e=n.children;return e&&(t=e.length)?Gr(e[t-1]):n}function Kr(n){return{x:n.x,y:n.y,dx:n.dx,dy:n.dy}}function Qr(n,t){var e=n.x+t[3],r=n.y+t[0],i=n.dx-t[1]-t[3],u=n.dy-t[0]-t[2];return i<0&&(e+=i/2,i=0),u<0&&(r+=u/2,u=0),{x:e,y:r,dx:i,dy:u}}function ni(n){var t=n[0],e=n[n.length-1];return t<e?[t,e]:[e,t]}function ti(n){return n.rangeExtent?n.rangeExtent():ni(n.range())}function ei(n,t,e,r){var i=e(n[0],n[1]),u=r(t[0],t[1]);return function(n){return u(i(n))}}function ri(n,t){var e,r=0,i=n.length-1,u=n[r],o=n[i];return o<u&&(e=r,r=i,i=e,e=u,u=o,o=e),n[r]=t.floor(u),n[i]=t.ceil(o),n}function ii(n){return n?{floor:function(t){return Math.floor(t/n)*n},ceil:function(t){return Math.ceil(t/n)*n}}:uc}function ui(n,t,e,r){var i=[],u=[],o=0,a=Math.min(n.length,t.length)-1;for(n[a]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++o<=a;)i.push(e(n[o-1],n[o])),u.push(r(t[o-1],t[o]));return function(t){var e=Zu.bisect(n,t,1,a)-1;return u[e](i[e](t))}}function oi(n,t,e,r){function i(){var i=Math.min(n.length,t.length)>2?ui:ei,c=r?rr:er;return o=i(n,t,c,e),a=i(t,n,c,qe),u}function u(n){return o(n)}var o,a;return u.invert=function(n){return a(n)},u.domain=function(t){return arguments.length?(n=t.map(Number),i()):n},u.range=function(n){return arguments.length?(t=n,i()):t},u.rangeRound=function(n){return u.range(n).interpolate(Je)},u.clamp=function(n){return arguments.length?(r=n,i()):r},u.interpolate=function(n){return arguments.length?(e=n,i()):e},u.ticks=function(t){return fi(n,t)},u.tickFormat=function(t,e){return si(n,t,e)},u.nice=function(t){return ci(n,t),i()},u.copy=function(){return oi(n,t,e,r)},i()}function ai(n,t){return Zu.rebind(n,t,"range","rangeRound","interpolate","clamp")}function ci(n,t){return ri(n,ii(li(n,t)[2]))}function li(n,t){null==t&&(t=10);var e=ni(n),r=e[1]-e[0],i=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),u=t/r*i;return u<=.15?i*=10:u<=.35?i*=5:u<=.75&&(i*=2),e[0]=Math.ceil(e[0]/i)*i,e[1]=Math.floor(e[1]/i)*i+.5*i,e[2]=i,e}function fi(n,t){return Zu.range.apply(Zu,li(n,t))}function si(n,t,e){var r=-Math.floor(Math.log(li(n,t)[2])/Math.LN10+.01);return Zu.format(e?e.replace(na,function(n,t,e,i,u,o,a,c,l,f){return[t,e,i,u,o,a,c,l||"."+(r-2*("%"===f)),f].join("")}):",."+r+"f")}function hi(n,t,e,r){function i(n){return(e?Math.log(n<0?0:n):-Math.log(n>0?0:-n))/Math.log(t)}function u(n){return e?Math.pow(t,n):-Math.pow(t,-n)}function o(t){return n(i(t))}return o.invert=function(t){return u(n.invert(t))},o.domain=function(t){return arguments.length?(e=t[0]>=0,n.domain((r=t.map(Number)).map(i)),o):r},o.base=function(e){return arguments.length?(t=+e,n.domain(r.map(i)),o):t},o.nice=function(){var t=ri(r.map(i),e?Math:ac);return n.domain(t),r=t.map(u),o},o.ticks=function(){var n=ni(r),o=[],a=n[0],c=n[1],l=Math.floor(i(a)),f=Math.ceil(i(c)),s=t%1?2:t;if(isFinite(f-l)){if(e){for(;l<f;l++)for(var h=1;h<s;h++)o.push(u(l)*h);o.push(u(l))}else for(o.push(u(l));l++<f;)for(var h=s-1;h>0;h--)o.push(u(l)*h);for(l=0;o[l]<a;l++);for(f=o.length;o[f-1]>c;f--);o=o.slice(l,f)}return o},o.tickFormat=function(n,t){if(!arguments.length)return oc;arguments.length<2?t=oc:"function"!=typeof t&&(t=Zu.format(t));var r,a=Math.max(.1,n/o.ticks().length),c=e?(r=1e-12,Math.ceil):(r=-1e-12,Math.floor);return function(n){return n/u(c(i(n)+r))<=a?t(n):""}},o.copy=function(){return hi(n.copy(),t,e,r)},ai(o,n)}function pi(n,t,e){function r(t){return n(i(t))}var i=gi(t),u=gi(1/t);return r.invert=function(t){return u(n.invert(t))},r.domain=function(t){return arguments.length?(n.domain((e=t.map(Number)).map(i)),r):e},r.ticks=function(n){return fi(e,n)},r.tickFormat=function(n,t){return si(e,n,t)},r.nice=function(n){return r.domain(ci(e,n))},r.exponent=function(o){return arguments.length?(i=gi(t=o),u=gi(1/t),n.domain(e.map(i)),r):t},r.copy=function(){return pi(n.copy(),t,e)},ai(r,n)}function gi(n){return function(t){return t<0?-Math.pow(-t,n):Math.pow(t,n)}}function vi(n,t){function e(e){return o[((u.get(e)||"range"===t.t&&u.set(e,n.push(e)))-1)%o.length]}function r(t,e){return Zu.range(n.length).map(function(n){return t+e*n})}var u,o,a;return e.domain=function(r){if(!arguments.length)return n;n=[],u=new i;for(var o,a=-1,c=r.length;++a<c;)u.has(o=r[a])||u.set(o,n.push(o));return e[t.t].apply(e,t.a)},e.range=function(n){return arguments.length?(o=n,a=0,t={t:"range",a:arguments},e):o},e.rangePoints=function(i,u){arguments.length<2&&(u=0);var c=i[0],l=i[1],f=(l-c)/(Math.max(1,n.length-1)+u);return o=r(n.length<2?(c+l)/2:c+f*u/2,f),a=0,t={t:"rangePoints",a:arguments},e},e.rangeBands=function(i,u,c){arguments.length<2&&(u=0),arguments.length<3&&(c=u);var l=i[1]<i[0],f=i[l-0],s=i[1-l],h=(s-f)/(n.length-u+2*c);return o=r(f+h*c,h),l&&o.reverse(),a=h*(1-u),t={t:"rangeBands",a:arguments},e},e.rangeRoundBands=function(i,u,c){arguments.length<2&&(u=0),arguments.length<3&&(c=u);var l=i[1]<i[0],f=i[l-0],s=i[1-l],h=Math.floor((s-f)/(n.length-u+2*c)),p=s-f-(n.length-u)*h;return o=r(f+Math.round(p/2),h),l&&o.reverse(),a=Math.round(h*(1-u)),t={t:"rangeRoundBands",a:arguments},e},e.rangeBand=function(){return a},e.rangeExtent=function(){return ni(t.a[0])},e.copy=function(){return vi(n,t)},e.domain(n)}function di(n,t){function e(){var e=0,u=t.length;for(i=[];++e<u;)i[e-1]=Zu.quantile(n,e/u);return r}function r(n){if(!isNaN(n=+n))return t[Zu.bisect(i,n)]}var i;return r.domain=function(t){return arguments.length?(n=t.filter(function(n){return!isNaN(n)}).sort(Zu.ascending),e()):n},r.range=function(n){return arguments.length?(t=n,e()):t},r.quantiles=function(){return i},r.invertExtent=function(e){return e=t.indexOf(e),e<0?[NaN,NaN]:[e>0?i[e-1]:n[0],e<i.length?i[e]:n[n.length-1]]},r.copy=function(){return di(n,t)},e()}function yi(n,t,e){function r(t){return e[Math.max(0,Math.min(o,Math.floor(u*(t-n))))]}function i(){return u=e.length/(t-n),o=e.length-1,r}var u,o;return r.domain=function(e){return arguments.length?(n=+e[0],t=+e[e.length-1],i()):[n,t]},r.range=function(n){return arguments.length?(e=n,i()):e},r.invertExtent=function(t){return t=e.indexOf(t),t=t<0?NaN:t/u+n,[t,t+1/u]},r.copy=function(){return yi(n,t,e)},i()}function mi(n,t){function e(e){if(e<=e)return t[Zu.bisect(n,e)]}return e.domain=function(t){return arguments.length?(n=t,e):n},e.range=function(n){return arguments.length?(t=n,e):t},e.invertExtent=function(e){return e=t.indexOf(e),[n[e-1],n[e]]},e.copy=function(){return mi(n,t)},e}function xi(n){function t(n){return+n}return t.invert=t,t.domain=t.range=function(e){return arguments.length?(n=e.map(t),t):n},t.ticks=function(t){return fi(n,t)},t.tickFormat=function(t,e){return si(n,t,e)},t.copy=function(){return xi(n)},t}function Mi(n){return n.innerRadius}function _i(n){return n.outerRadius}function bi(n){return n.startAngle}function wi(n){return n.endAngle}function Si(n){function t(t){function o(){l.push("M",u(n(f),a))}for(var c,l=[],f=[],s=-1,h=t.length,p=vn(e),g=vn(r);++s<h;)i.call(this,c=t[s],s)?f.push([+p.call(this,c,s),+g.call(this,c,s)]):f.length&&(o(),f=[]);return f.length&&o(),l.length?l.join(""):null}var e=Zt,r=Vt,i=Vn,u=ki,o=u.key,a=.7;return t.x=function(n){return arguments.length?(e=n,t):e},t.y=function(n){return arguments.length?(r=n,t):r},t.defined=function(n){return arguments.length?(i=n,t):i},t.interpolate=function(n){return arguments.length?(o="function"==typeof n?u=n:(u=gc.get(n)||ki).key,t):o},t.tension=function(n){return arguments.length?(a=n,t):a},t}function ki(n){return n.join("L")}function Ni(n){return ki(n)+"Z"}function Ei(n){for(var t=0,e=n.length,r=n[0],i=[r[0],",",r[1]];++t<e;)i.push("H",(r[0]+(r=n[t])[0])/2,"V",r[1]);return e>1&&i.push("H",r[0]),i.join("")}function Ai(n){for(var t=0,e=n.length,r=n[0],i=[r[0],",",r[1]];++t<e;)i.push("V",(r=n[t])[1],"H",r[0]);return i.join("")}function Ci(n){for(var t=0,e=n.length,r=n[0],i=[r[0],",",r[1]];++t<e;)i.push("H",(r=n[t])[0],"V",r[1]);return i.join("")}function Li(n,t){return n.length<4?ki(n):n[1]+zi(n.slice(1,n.length-1),Ri(n,t))}function Ti(n,t){return n.length<3?ki(n):n[0]+zi((n.push(n[0]),n),Ri([n[n.length-2]].concat(n,[n[1]]),t))}function qi(n,t){return n.length<3?ki(n):n[0]+zi(n,Ri(n,t))}function zi(n,t){if(t.length<1||n.length!=t.length&&n.length!=t.length+2)return ki(n);var e=n.length!=t.length,r="",i=n[0],u=n[1],o=t[0],a=o,c=1;if(e&&(r+="Q"+(u[0]-2*o[0]/3)+","+(u[1]-2*o[1]/3)+","+u[0]+","+u[1],i=n[1],c=2),t.length>1){a=t[1],u=n[c],c++,r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(u[0]-a[0])+","+(u[1]-a[1])+","+u[0]+","+u[1];for(var l=2;l<t.length;l++,c++)u=n[c],a=t[l],r+="S"+(u[0]-a[0])+","+(u[1]-a[1])+","+u[0]+","+u[1]}if(e){var f=n[c];r+="Q"+(u[0]+2*a[0]/3)+","+(u[1]+2*a[1]/3)+","+f[0]+","+f[1]}return r}function Ri(n,t){for(var e,r=[],i=(1-t)/2,u=n[0],o=n[1],a=1,c=n.length;++a<c;)e=u,u=o,o=n[a],r.push([i*(o[0]-e[0]),i*(o[1]-e[1])]);return r}function Di(n){if(n.length<3)return ki(n);var t=1,e=n.length,r=n[0],i=r[0],u=r[1],o=[i,i,i,(r=n[1])[0]],a=[u,u,u,r[1]],c=[i,",",u,"L",Hi(yc,o),",",Hi(yc,a)];for(n.push(n[e-1]);++t<=e;)r=n[t],o.shift(),o.push(r[0]),a.shift(),a.push(r[1]),Fi(c,o,a);return n.pop(),c.push("L",r),c.join("")}function Pi(n){if(n.length<4)return ki(n);for(var t,e=[],r=-1,i=n.length,u=[0],o=[0];++r<3;)t=n[r],u.push(t[0]),o.push(t[1]);for(e.push(Hi(yc,u)+","+Hi(yc,o)),--r;++r<i;)t=n[r],u.shift(),u.push(t[0]),o.shift(),o.push(t[1]),Fi(e,u,o);return e.join("")}function Ui(n){for(var t,e,r=-1,i=n.length,u=i+4,o=[],a=[];++r<4;)e=n[r%i],o.push(e[0]),a.push(e[1]);for(t=[Hi(yc,o),",",Hi(yc,a)],--r;++r<u;)e=n[r%i],o.shift(),o.push(e[0]),a.shift(),a.push(e[1]),Fi(t,o,a);return t.join("")}function ji(n,t){var e=n.length-1;if(e)for(var r,i,u=n[0][0],o=n[0][1],a=n[e][0]-u,c=n[e][1]-o,l=-1;++l<=e;)r=n[l],i=l/e,r[0]=t*r[0]+(1-t)*(u+i*a),r[1]=t*r[1]+(1-t)*(o+i*c);return Di(n)}function Hi(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3]}function Fi(n,t,e){n.push("C",Hi(vc,t),",",Hi(vc,e),",",Hi(dc,t),",",Hi(dc,e),",",Hi(yc,t),",",Hi(yc,e))}function Oi(n,t){return(t[1]-n[1])/(t[0]-n[0])}function Yi(n){for(var t=0,e=n.length-1,r=[],i=n[0],u=n[1],o=r[0]=Oi(i,u);++t<e;)r[t]=(o+(o=Oi(i=u,u=n[t+1])))/2;return r[t]=o,r}function Ii(n){for(var t,e,r,i,u=[],o=Yi(n),a=-1,c=n.length-1;++a<c;)t=Oi(n[a],n[a+1]),eo(t)<So?o[a]=o[a+1]=0:(e=o[a]/t,r=o[a+1]/t,i=e*e+r*r,i>9&&(i=3*t/Math.sqrt(i),o[a]=i*e,o[a+1]=i*r));for(a=-1;++a<=c;)i=(n[Math.min(c,a+1)][0]-n[Math.max(0,a-1)][0])/(6*(1+o[a]*o[a])),u.push([i||0,o[a]*i||0]);return u}function Zi(n){return n.length<3?ki(n):n[0]+zi(n,Ii(n))}function Vi(n){for(var t,e,r,i=-1,u=n.length;++i<u;)t=n[i],e=t[0],r=t[1]+hc,t[0]=e*Math.cos(r),t[1]=e*Math.sin(r);return n}function Xi(n){function t(t){function c(){v.push("M",a(n(y),s),f,l(n(d.reverse()),s),"Z")}for(var h,p,g,v=[],d=[],y=[],m=-1,x=t.length,M=vn(e),_=vn(i),b=e===r?function(){return p}:vn(r),w=i===u?function(){return g}:vn(u);++m<x;)o.call(this,h=t[m],m)?(d.push([p=+M.call(this,h,m),g=+_.call(this,h,m)]),y.push([+b.call(this,h,m),+w.call(this,h,m)])):d.length&&(c(),d=[],y=[]);return d.length&&c(),v.length?v.join(""):null}var e=Zt,r=Zt,i=0,u=Vt,o=Vn,a=ki,c=a.key,l=a,f="L",s=.7;return t.x=function(n){return arguments.length?(e=r=n,t):r},t.x0=function(n){return arguments.length?(e=n,t):e},t.x1=function(n){return arguments.length?(r=n,t):r},t.y=function(n){return arguments.length?(i=u=n,t):u},t.y0=function(n){return arguments.length?(i=n,t):i},t.y1=function(n){return arguments.length?(u=n,t):u},t.defined=function(n){return arguments.length?(o=n,t):o},t.interpolate=function(n){return arguments.length?(c="function"==typeof n?a=n:(a=gc.get(n)||ki).key,l=a.reverse||a,f=a.closed?"M":"L",t):c},t.tension=function(n){return arguments.length?(s=n,t):s},t}function $i(n){return n.radius}function Bi(n){return[n.x,n.y]}function Wi(n){return function(){var t=n.apply(this,arguments),e=t[0],r=t[1]+hc;return[e*Math.cos(r),e*Math.sin(r)]}}function Ji(){return 64}function Gi(){return"circle"}function Ki(n){var t=Math.sqrt(n/_o);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function Qi(n,t){return ao(n,wc),n.id=t,n}function nu(n,t,e,r){var i=n.id;return A(n,"function"==typeof e?function(n,u,o){n.__transition__[i].tween.set(t,r(e.call(n,n.__data__,u,o)))}:(e=r(e),function(n){n.__transition__[i].tween.set(t,e)}))}function tu(n){return null==n&&(n=""),function(){this.textContent=n}}function eu(n,t,e,r){var u=n.__transition__||(n.__transition__={active:0,count:0}),o=u[e];if(!o){var a=r.time;o=u[e]={tween:new i,time:a,ease:r.ease,delay:r.delay,duration:r.duration},++u.count,Zu.timer(function(r){function i(r){return u.active>e?l():(u.active=e,o.event&&o.event.start.call(n,f,t),o.tween.forEach(function(e,r){(r=r.call(n,f,t))&&v.push(r)}),void Zu.timer(function(){return g.c=c(r||1)?Vn:c,1},0,a))}function c(r){if(u.active!==e)return l();for(var i=r/p,a=s(i),c=v.length;c>0;)v[--c].call(n,a);return i>=1?(o.event&&o.event.end.call(n,f,t),l()):void 0}function l(){return--u.count?delete u[e]:delete n.__transition__,1}var f=n.__data__,s=o.ease,h=o.delay,p=o.duration,g=$o,v=[];return g.t=h+a,h<=r?i(r-h):void(g.c=i)},0,a)}}function ru(n,t){n.attr("transform",function(n){return"translate("+t(n)+",0)"})}function iu(n,t){n.attr("transform",function(n){return"translate(0,"+t(n)+")"})}function uu(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function ou(n,t,e){function r(t){var e=n(t),r=u(e,1);return t-e<r-t?e:r}function i(e){return t(e=n(new Lc(e-1)),1),e}function u(n,e){return t(n=new Lc((+n)),e),n}function o(n,r,u){var o=i(n),a=[];if(u>1)for(;o<r;)e(o)%u||a.push(new Date((+o))),t(o,1);else for(;o<r;)a.push(new Date((+o))),t(o,1);return a}function a(n,t,e){try{Lc=uu;var r=new uu;return r._=n,o(r,t,e)}finally{Lc=Date}}n.floor=n,n.round=r,n.ceil=i,n.offset=u,n.range=o;var c=n.utc=au(n);return c.floor=c,c.round=au(r),c.ceil=au(i),c.offset=au(u),c.range=a,n}function au(n){return function(t,e){try{Lc=uu;var r=new uu;return r._=t,n(r,e)._}finally{Lc=Date}}}function cu(n){function t(t){for(var r,i,u,o=[],a=-1,c=0;++a<e;)37===n.charCodeAt(a)&&(o.push(n.substring(c,a)),null!=(i=Wc[r=n.charAt(++a)])&&(r=n.charAt(++a)),(u=Jc[r])&&(r=u(t,null==i?"e"===r?" ":"0":i)),o.push(r),c=a+1);return o.push(n.substring(c,a)),o.join("")}var e=n.length;return t.parse=function(t){var e={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},r=lu(e,n,t,0);if(r!=t.length)return null;"p"in e&&(e.H=e.H%12+12*e.p);var i=null!=e.Z&&Lc!==uu,u=new(i?uu:Lc);return"j"in e?u.setFullYear(e.y,0,e.j):"w"in e&&("W"in e||"U"in e)?(u.setFullYear(e.y,0,1),u.setFullYear(e.y,0,"W"in e?(e.w+6)%7+7*e.W-(u.getDay()+5)%7:e.w+7*e.U-(u.getDay()+6)%7)):u.setFullYear(e.y,e.m,e.d),u.setHours(e.H+Math.floor(e.Z/100),e.M+e.Z%100,e.S,e.L),i?u._:u},t.toString=function(){return n},t}function lu(n,t,e,r){for(var i,u,o,a=0,c=t.length,l=e.length;a<c;){if(r>=l)return-1;if(i=t.charCodeAt(a++),37===i){if(o=t.charAt(a++),u=Gc[o in Wc?t.charAt(a++):o],!u||(r=u(n,e,r))<0)return-1}else if(i!=e.charCodeAt(r++))return-1}return r}function fu(n){return new RegExp("^(?:"+n.map(Zu.requote).join("|")+")","i")}function su(n){for(var t=new i,e=-1,r=n.length;++e<r;)t.set(n[e].toLowerCase(),e);return t}function hu(n,t,e){var r=n<0?"-":"",i=(r?-n:n)+"",u=i.length;return r+(u<e?new Array(e-u+1).join(t)+i:i)}function pu(n,t,e){Yc.lastIndex=0;var r=Yc.exec(t.substring(e));return r?(n.w=Ic.get(r[0].toLowerCase()),e+r[0].length):-1}function gu(n,t,e){Fc.lastIndex=0;var r=Fc.exec(t.substring(e));return r?(n.w=Oc.get(r[0].toLowerCase()),e+r[0].length):-1}function vu(n,t,e){Kc.lastIndex=0;var r=Kc.exec(t.substring(e,e+1));return r?(n.w=+r[0],e+r[0].length):-1}function du(n,t,e){Kc.lastIndex=0;var r=Kc.exec(t.substring(e));return r?(n.U=+r[0],e+r[0].length):-1}function yu(n,t,e){Kc.lastIndex=0;var r=Kc.exec(t.substring(e));return r?(n.W=+r[0],e+r[0].length):-1}function mu(n,t,e){Xc.lastIndex=0;var r=Xc.exec(t.substring(e));return r?(n.m=$c.get(r[0].toLowerCase()),e+r[0].length):-1}function xu(n,t,e){Zc.lastIndex=0;var r=Zc.exec(t.substring(e));return r?(n.m=Vc.get(r[0].toLowerCase()),e+r[0].length):-1}function Mu(n,t,e){return lu(n,Jc.c.toString(),t,e)}function _u(n,t,e){return lu(n,Jc.x.toString(),t,e)}function bu(n,t,e){return lu(n,Jc.X.toString(),t,e)}function wu(n,t,e){Kc.lastIndex=0;var r=Kc.exec(t.substring(e,e+4));return r?(n.y=+r[0],e+r[0].length):-1}function Su(n,t,e){Kc.lastIndex=0;var r=Kc.exec(t.substring(e,e+2));return r?(n.y=Nu(+r[0]),e+r[0].length):-1}function ku(n,t,e){return/^[+-]\d{4}$/.test(t=t.substring(e,e+5))?(n.Z=+t,e+5):-1}function Nu(n){return n+(n>68?1900:2e3)}function Eu(n,t,e){Kc.lastIndex=0;var r=Kc.exec(t.substring(e,e+2));return r?(n.m=r[0]-1,e+r[0].length):-1}function Au(n,t,e){Kc.lastIndex=0;var r=Kc.exec(t.substring(e,e+2));return r?(n.d=+r[0],e+r[0].length):-1}function Cu(n,t,e){Kc.lastIndex=0;var r=Kc.exec(t.substring(e,e+3));return r?(n.j=+r[0],e+r[0].length):-1}function Lu(n,t,e){Kc.lastIndex=0;var r=Kc.exec(t.substring(e,e+2));return r?(n.H=+r[0],e+r[0].length):-1}function Tu(n,t,e){Kc.lastIndex=0;var r=Kc.exec(t.substring(e,e+2));return r?(n.M=+r[0],e+r[0].length):-1}function qu(n,t,e){Kc.lastIndex=0;var r=Kc.exec(t.substring(e,e+2));return r?(n.S=+r[0],e+r[0].length):-1}function zu(n,t,e){Kc.lastIndex=0;var r=Kc.exec(t.substring(e,e+3));return r?(n.L=+r[0],e+r[0].length):-1}function Ru(n,t,e){var r=Qc.get(t.substring(e,e+=2).toLowerCase());return null==r?-1:(n.p=r,e)}function Du(n){var t=n.getTimezoneOffset(),e=t>0?"-":"+",r=~~(eo(t)/60),i=eo(t)%60;return e+hu(r,"0",2)+hu(i,"0",2)}function Pu(n,t,e){Bc.lastIndex=0;var r=Bc.exec(t.substring(e,e+1));return r?e+r[0].length:-1}function Uu(n){function t(n){try{Lc=uu;var t=new Lc;return t._=n,e(t)}finally{Lc=Date}}var e=cu(n);return t.parse=function(n){try{Lc=uu;var t=e.parse(n);return t&&t._}finally{Lc=Date}},t.toString=e.toString,t}function ju(n){return n.toISOString()}function Hu(n,t,e){function r(t){return n(t)}function i(n,e){var r=n[1]-n[0],i=r/e,u=Zu.bisect(tl,i);return u==tl.length?[t.year,li(n.map(function(n){return n/31536e6}),e)[2]]:u?t[i/tl[u-1]<tl[u]/i?u-1:u]:[ul,li(n,e)[2]]}return r.invert=function(t){return Fu(n.invert(t))},r.domain=function(t){return arguments.length?(n.domain(t),r):n.domain().map(Fu)},r.nice=function(n,t){function e(e){return!isNaN(e)&&!n.range(e,Fu(+e+1),t).length}var u=r.domain(),o=ni(u),a=null==n?i(o,10):"number"==typeof n&&i(o,n);return a&&(n=a[0],t=a[1]),r.domain(ri(u,t>1?{floor:function(t){for(;e(t=n.floor(t));)t=Fu(t-1);return t},ceil:function(t){for(;e(t=n.ceil(t));)t=Fu(+t+1);return t}}:n))},r.ticks=function(n,t){var e=ni(r.domain()),u=null==n?i(e,10):"number"==typeof n?i(e,n):!n.range&&[{range:n},t];return u&&(n=u[0],t=u[1]),n.range(e[0],Fu(+e[1]+1),t<1?1:t)},r.tickFormat=function(){return e},r.copy=function(){return Hu(n.copy(),t,e)},ai(r,n)}function Fu(n){return new Date(n)}function Ou(n){return function(t){for(var e=n.length-1,r=n[e];!r[1](t);)r=n[--e];return r[0](t)}}function Yu(n){return JSON.parse(n.responseText)}function Iu(n){var t=$u.createRange();return t.selectNode($u.body),t.createContextualFragment(n.responseText)}var Zu={version:"3.3.8"};Date.now||(Date.now=function(){return+new Date});var Vu=[].slice,Xu=function(n){return Vu.call(n)},$u=document,Bu=$u.documentElement,Wu=window;try{Xu(Bu.childNodes)[0].nodeType}catch(n){Xu=function(n){for(var t=n.length,e=new Array(t);t--;)e[t]=n[t];return e}}try{$u.createElement("div").style.setProperty("opacity",0,"")}catch(n){var Ju=Wu.Element.prototype,Gu=Ju.setAttribute,Ku=Ju.setAttributeNS,Qu=Wu.CSSStyleDeclaration.prototype,no=Qu.setProperty;Ju.setAttribute=function(n,t){Gu.call(this,n,t+"")},Ju.setAttributeNS=function(n,t,e){Ku.call(this,n,t,e+"")},Qu.setProperty=function(n,t,e){no.call(this,n,t+"",e)}}Zu.ascending=function(n,t){return n<t?-1:n>t?1:n>=t?0:NaN},Zu.descending=function(n,t){return t<n?-1:t>n?1:t>=n?0:NaN},Zu.min=function(n,t){var e,r,i=-1,u=n.length;if(1===arguments.length){for(;++i<u&&!(null!=(e=n[i])&&e<=e);)e=void 0;for(;++i<u;)null!=(r=n[i])&&e>r&&(e=r)}else{for(;++i<u&&!(null!=(e=t.call(n,n[i],i))&&e<=e);)e=void 0;for(;++i<u;)null!=(r=t.call(n,n[i],i))&&e>r&&(e=r)}return e},Zu.max=function(n,t){var e,r,i=-1,u=n.length;if(1===arguments.length){for(;++i<u&&!(null!=(e=n[i])&&e<=e);)e=void 0;for(;++i<u;)null!=(r=n[i])&&r>e&&(e=r)}else{for(;++i<u&&!(null!=(e=t.call(n,n[i],i))&&e<=e);)e=void 0;for(;++i<u;)null!=(r=t.call(n,n[i],i))&&r>e&&(e=r)}return e},Zu.extent=function(n,t){var e,r,i,u=-1,o=n.length;if(1===arguments.length){for(;++u<o&&!(null!=(e=i=n[u])&&e<=e);)e=i=void 0;for(;++u<o;)null!=(r=n[u])&&(e>r&&(e=r),i<r&&(i=r))}else{for(;++u<o&&!(null!=(e=i=t.call(n,n[u],u))&&e<=e);)e=void 0;for(;++u<o;)null!=(r=t.call(n,n[u],u))&&(e>r&&(e=r),i<r&&(i=r))}return[e,i]},Zu.sum=function(n,t){var e,r=0,i=n.length,u=-1;if(1===arguments.length)for(;++u<i;)isNaN(e=+n[u])||(r+=e);else for(;++u<i;)isNaN(e=+t.call(n,n[u],u))||(r+=e);return r},Zu.mean=function(t,e){var r,i=t.length,u=0,o=-1,a=0;if(1===arguments.length)for(;++o<i;)n(r=t[o])&&(u+=(r-u)/++a);else for(;++o<i;)n(r=e.call(t,t[o],o))&&(u+=(r-u)/++a);return a?u:void 0},Zu.quantile=function(n,t){var e=(n.length-1)*t+1,r=Math.floor(e),i=+n[r-1],u=e-r;return u?i+u*(n[r]-i):i},Zu.median=function(t,e){return arguments.length>1&&(t=t.map(e)),t=t.filter(n),t.length?Zu.quantile(t.sort(Zu.ascending),.5):void 0},Zu.bisector=function(n){return{left:function(t,e,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);r<i;){
var u=r+i>>>1;n.call(t,t[u],u)<e?r=u+1:i=u}return r},right:function(t,e,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);r<i;){var u=r+i>>>1;e<n.call(t,t[u],u)?i=u:r=u+1}return r}}};var to=Zu.bisector(function(n){return n});Zu.bisectLeft=to.left,Zu.bisect=Zu.bisectRight=to.right,Zu.shuffle=function(n){for(var t,e,r=n.length;r;)e=Math.random()*r--|0,t=n[r],n[r]=n[e],n[e]=t;return n},Zu.permute=function(n,t){for(var e=t.length,r=new Array(e);e--;)r[e]=n[t[e]];return r},Zu.pairs=function(n){for(var t,e=0,r=n.length-1,i=n[0],u=new Array(r<0?0:r);e<r;)u[e]=[t=i,i=n[++e]];return u},Zu.zip=function(){if(!(i=arguments.length))return[];for(var n=-1,e=Zu.min(arguments,t),r=new Array(e);++n<e;)for(var i,u=-1,o=r[n]=new Array(i);++u<i;)o[u]=arguments[u][n];return r},Zu.transpose=function(n){return Zu.zip.apply(Zu,n)},Zu.keys=function(n){var t=[];for(var e in n)t.push(e);return t},Zu.values=function(n){var t=[];for(var e in n)t.push(n[e]);return t},Zu.entries=function(n){var t=[];for(var e in n)t.push({key:e,value:n[e]});return t},Zu.merge=function(n){for(var t,e,r,i=n.length,u=-1,o=0;++u<i;)o+=n[u].length;for(e=new Array(o);--i>=0;)for(r=n[i],t=r.length;--t>=0;)e[--o]=r[t];return e};var eo=Math.abs;Zu.range=function(n,t,r){if(arguments.length<3&&(r=1,arguments.length<2&&(t=n,n=0)),(t-n)/r===1/0)throw new Error("infinite range");var i,u=[],o=e(eo(r)),a=-1;if(n*=o,t*=o,r*=o,r<0)for(;(i=n+r*++a)>t;)u.push(i/o);else for(;(i=n+r*++a)<t;)u.push(i/o);return u},Zu.map=function(n){var t=new i;if(n instanceof i)n.forEach(function(n,e){t.set(n,e)});else for(var e in n)t.set(e,n[e]);return t},r(i,{has:function(n){return ro+n in this},get:function(n){return this[ro+n]},set:function(n,t){return this[ro+n]=t},remove:function(n){return n=ro+n,n in this&&delete this[n]},keys:function(){var n=[];return this.forEach(function(t){n.push(t)}),n},values:function(){var n=[];return this.forEach(function(t,e){n.push(e)}),n},entries:function(){var n=[];return this.forEach(function(t,e){n.push({key:t,value:e})}),n},forEach:function(n){for(var t in this)t.charCodeAt(0)===io&&n.call(this,t.substring(1),this[t])}});var ro="\0",io=ro.charCodeAt(0);Zu.nest=function(){function n(t,a,c){if(c>=o.length)return r?r.call(u,a):e?a.sort(e):a;for(var l,f,s,h,p=-1,g=a.length,v=o[c++],d=new i;++p<g;)(h=d.get(l=v(f=a[p])))?h.push(f):d.set(l,[f]);return t?(f=t(),s=function(e,r){f.set(e,n(t,r,c))}):(f={},s=function(e,r){f[e]=n(t,r,c)}),d.forEach(s),f}function t(n,e){if(e>=o.length)return n;var r=[],i=a[e++];return n.forEach(function(n,i){r.push({key:n,values:t(i,e)})}),i?r.sort(function(n,t){return i(n.key,t.key)}):r}var e,r,u={},o=[],a=[];return u.map=function(t,e){return n(e,t,0)},u.entries=function(e){return t(n(Zu.map,e,0),0)},u.key=function(n){return o.push(n),u},u.sortKeys=function(n){return a[o.length-1]=n,u},u.sortValues=function(n){return e=n,u},u.rollup=function(n){return r=n,u},u},Zu.set=function(n){var t=new u;if(n)for(var e=0,r=n.length;e<r;++e)t.add(n[e]);return t},r(u,{has:function(n){return ro+n in this},add:function(n){return this[ro+n]=!0,n},remove:function(n){return n=ro+n,n in this&&delete this[n]},values:function(){var n=[];return this.forEach(function(t){n.push(t)}),n},forEach:function(n){for(var t in this)t.charCodeAt(0)===io&&n.call(this,t.substring(1))}}),Zu.behavior={},Zu.rebind=function(n,t){for(var e,r=1,i=arguments.length;++r<i;)n[e=arguments[r]]=o(n,t,t[e]);return n};var uo=["webkit","ms","moz","Moz","o","O"];Zu.dispatch=function(){for(var n=new l,t=-1,e=arguments.length;++t<e;)n[arguments[t]]=f(n);return n},l.prototype.on=function(n,t){var e=n.indexOf("."),r="";if(e>=0&&(r=n.substring(e+1),n=n.substring(0,e)),n)return arguments.length<2?this[n].on(r):this[n].on(r,t);if(2===arguments.length){if(null==t)for(n in this)this.hasOwnProperty(n)&&this[n].on(r,null);return this}},Zu.event=null,Zu.requote=function(n){return n.replace(oo,"\\$&")};var oo=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,ao={}.__proto__?function(n,t){n.__proto__=t}:function(n,t){for(var e in t)n[e]=t[e]},co=function(n,t){return t.querySelector(n)},lo=function(n,t){return t.querySelectorAll(n)},fo=Bu[a(Bu,"matchesSelector")],so=function(n,t){return fo.call(n,t)};"function"==typeof Sizzle&&(co=function(n,t){return Sizzle(n,t)[0]||null},lo=function(n,t){return Sizzle.uniqueSort(Sizzle(n,t))},so=Sizzle.matchesSelector),Zu.selection=function(){return vo};var ho=Zu.selection.prototype=[];ho.select=function(n){var t,e,r,i,u=[];n=v(n);for(var o=-1,a=this.length;++o<a;){u.push(t=[]),t.parentNode=(r=this[o]).parentNode;for(var c=-1,l=r.length;++c<l;)(i=r[c])?(t.push(e=n.call(i,i.__data__,c,o)),e&&"__data__"in i&&(e.__data__=i.__data__)):t.push(null)}return g(u)},ho.selectAll=function(n){var t,e,r=[];n=d(n);for(var i=-1,u=this.length;++i<u;)for(var o=this[i],a=-1,c=o.length;++a<c;)(e=o[a])&&(r.push(t=Xu(n.call(e,e.__data__,a,i))),t.parentNode=e);return g(r)};var po={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};Zu.ns={prefix:po,qualify:function(n){var t=n.indexOf(":"),e=n;return t>=0&&(e=n.substring(0,t),n=n.substring(t+1)),po.hasOwnProperty(e)?{space:po[e],local:n}:n}},ho.attr=function(n,t){if(arguments.length<2){if("string"==typeof n){var e=this.node();return n=Zu.ns.qualify(n),n.local?e.getAttributeNS(n.space,n.local):e.getAttribute(n)}for(t in n)this.each(y(t,n[t]));return this}return this.each(y(n,t))},ho.classed=function(n,t){if(arguments.length<2){if("string"==typeof n){var e=this.node(),r=(n=n.trim().split(/^|\s+/g)).length,i=-1;if(t=e.classList){for(;++i<r;)if(!t.contains(n[i]))return!1}else for(t=e.getAttribute("class");++i<r;)if(!x(n[i]).test(t))return!1;return!0}for(t in n)this.each(M(t,n[t]));return this}return this.each(M(n,t))},ho.style=function(n,t,e){var r=arguments.length;if(r<3){if("string"!=typeof n){r<2&&(t="");for(e in n)this.each(b(e,n[e],t));return this}if(r<2)return Wu.getComputedStyle(this.node(),null).getPropertyValue(n);e=""}return this.each(b(n,t,e))},ho.property=function(n,t){if(arguments.length<2){if("string"==typeof n)return this.node()[n];for(t in n)this.each(w(t,n[t]));return this}return this.each(w(n,t))},ho.text=function(n){return arguments.length?this.each("function"==typeof n?function(){var t=n.apply(this,arguments);this.textContent=null==t?"":t}:null==n?function(){this.textContent=""}:function(){this.textContent=n}):this.node().textContent},ho.html=function(n){return arguments.length?this.each("function"==typeof n?function(){var t=n.apply(this,arguments);this.innerHTML=null==t?"":t}:null==n?function(){this.innerHTML=""}:function(){this.innerHTML=n}):this.node().innerHTML},ho.append=function(n){return n=S(n),this.select(function(){return this.appendChild(n.apply(this,arguments))})},ho.insert=function(n,t){return n=S(n),t=v(t),this.select(function(){return this.insertBefore(n.apply(this,arguments),t.apply(this,arguments)||null)})},ho.remove=function(){return this.each(function(){var n=this.parentNode;n&&n.removeChild(this)})},ho.data=function(n,t){function e(n,e){var r,u,o,a=n.length,s=e.length,h=Math.min(a,s),p=new Array(s),g=new Array(s),v=new Array(a);if(t){var d,y=new i,m=new i,x=[];for(r=-1;++r<a;)d=t.call(u=n[r],u.__data__,r),y.has(d)?v[r]=u:y.set(d,u),x.push(d);for(r=-1;++r<s;)d=t.call(e,o=e[r],r),(u=y.get(d))?(p[r]=u,u.__data__=o):m.has(d)||(g[r]=k(o)),m.set(d,o),y.remove(d);for(r=-1;++r<a;)y.has(x[r])&&(v[r]=n[r])}else{for(r=-1;++r<h;)u=n[r],o=e[r],u?(u.__data__=o,p[r]=u):g[r]=k(o);for(;r<s;++r)g[r]=k(e[r]);for(;r<a;++r)v[r]=n[r]}g.update=p,g.parentNode=p.parentNode=v.parentNode=n.parentNode,c.push(g),l.push(p),f.push(v)}var r,u,o=-1,a=this.length;if(!arguments.length){for(n=new Array(a=(r=this[0]).length);++o<a;)(u=r[o])&&(n[o]=u.__data__);return n}var c=C([]),l=g([]),f=g([]);if("function"==typeof n)for(;++o<a;)e(r=this[o],n.call(r,r.parentNode.__data__,o));else for(;++o<a;)e(r=this[o],n);return l.enter=function(){return c},l.exit=function(){return f},l},ho.datum=function(n){return arguments.length?this.property("__data__",n):this.property("__data__")},ho.filter=function(n){var t,e,r,i=[];"function"!=typeof n&&(n=N(n));for(var u=0,o=this.length;u<o;u++){i.push(t=[]),t.parentNode=(e=this[u]).parentNode;for(var a=0,c=e.length;a<c;a++)(r=e[a])&&n.call(r,r.__data__,a)&&t.push(r)}return g(i)},ho.order=function(){for(var n=-1,t=this.length;++n<t;)for(var e,r=this[n],i=r.length-1,u=r[i];--i>=0;)(e=r[i])&&(u&&u!==e.nextSibling&&u.parentNode.insertBefore(e,u),u=e);return this},ho.sort=function(n){n=E.apply(this,arguments);for(var t=-1,e=this.length;++t<e;)this[t].sort(n);return this.order()},ho.each=function(n){return A(this,function(t,e,r){n.call(t,t.__data__,e,r)})},ho.call=function(n){var t=Xu(arguments);return n.apply(t[0]=this,t),this},ho.empty=function(){return!this.node()},ho.node=function(){for(var n=0,t=this.length;n<t;n++)for(var e=this[n],r=0,i=e.length;r<i;r++){var u=e[r];if(u)return u}return null},ho.size=function(){var n=0;return this.each(function(){++n}),n};var go=[];Zu.selection.enter=C,Zu.selection.enter.prototype=go,go.append=ho.append,go.empty=ho.empty,go.node=ho.node,go.call=ho.call,go.size=ho.size,go.select=function(n){for(var t,e,r,i,u,o=[],a=-1,c=this.length;++a<c;){r=(i=this[a]).update,o.push(t=[]),t.parentNode=i.parentNode;for(var l=-1,f=i.length;++l<f;)(u=i[l])?(t.push(r[l]=e=n.call(i.parentNode,u.__data__,l,a)),e.__data__=u.__data__):t.push(null)}return g(o)},go.insert=function(n,t){return arguments.length<2&&(t=L(this)),ho.insert.call(this,n,t)},ho.transition=function(){for(var n,t,e=xc||++Sc,r=[],i=Mc||{time:Date.now(),ease:He,delay:0,duration:250},u=-1,o=this.length;++u<o;){r.push(n=[]);for(var a=this[u],c=-1,l=a.length;++c<l;)(t=a[c])&&eu(t,c,e,i),n.push(t)}return Qi(r,e)},ho.interrupt=function(){return this.each(T)},Zu.select=function(n){var t=["string"==typeof n?co(n,$u):n];return t.parentNode=Bu,g([t])},Zu.selectAll=function(n){var t=Xu("string"==typeof n?lo(n,$u):n);return t.parentNode=Bu,g([t])};var vo=Zu.select(Bu);ho.on=function(n,t,e){var r=arguments.length;if(r<3){if("string"!=typeof n){r<2&&(t=!1);for(e in n)this.each(q(e,n[e],t));return this}if(r<2)return(r=this.node()["__on"+n])&&r._;e=!1}return this.each(q(n,t,e))};var yo=Zu.map({mouseenter:"mouseover",mouseleave:"mouseout"});yo.forEach(function(n){"on"+n in $u&&yo.remove(n)});var mo=a(Bu.style,"userSelect"),xo=0;Zu.mouse=function(n){return P(n,h())};var Mo=/WebKit/.test(Wu.navigator.userAgent)?-1:0;Zu.touches=function(n,t){return arguments.length<2&&(t=h().touches),t?Xu(t).map(function(t){var e=P(n,t);return e.identifier=t.identifier,e}):[]},Zu.behavior.drag=function(){function n(){this.on("mousedown.drag",o).on("touchstart.drag",a)}function t(){return Zu.event.changedTouches[0].identifier}function e(n,t){return Zu.touches(n).filter(function(n){return n.identifier===t})[0]}function r(n,t,e,r){return function(){function o(){var n=t(f,p),e=n[0]-v[0],r=n[1]-v[1];d|=e|r,v=n,s({type:"drag",x:n[0]+c[0],y:n[1]+c[1],dx:e,dy:r})}function a(){y.on(e+"."+g,null).on(r+"."+g,null),m(d&&Zu.event.target===h),s({type:"dragend"})}var c,l=this,f=l.parentNode,s=i.of(l,arguments),h=Zu.event.target,p=n(),g=null==p?"drag":"drag-"+p,v=t(f,p),d=0,y=Zu.select(Wu).on(e+"."+g,o).on(r+"."+g,a),m=D();u?(c=u.apply(l,arguments),c=[c.x-v[0],c.y-v[1]]):c=[0,0],s({type:"dragstart"})}}var i=p(n,"drag","dragstart","dragend"),u=null,o=r(c,Zu.mouse,"mousemove","mouseup"),a=r(t,e,"touchmove","touchend");return n.origin=function(t){return arguments.length?(u=t,n):u},Zu.rebind(n,i,"on")};var _o=Math.PI,bo=2*_o,wo=_o/2,So=1e-6,ko=So*So,No=_o/180,Eo=180/_o,Ao=Math.SQRT2,Co=2,Lo=4;Zu.interpolateZoom=function(n,t){function e(n){var t=n*m;if(y){var e=O(v),o=u/(Co*h)*(e*Y(Ao*t+v)-F(v));return[r+o*l,i+o*f,u*e/O(Ao*t+v)]}return[r+n*l,i+n*f,u*Math.exp(Ao*t)]}var r=n[0],i=n[1],u=n[2],o=t[0],a=t[1],c=t[2],l=o-r,f=a-i,s=l*l+f*f,h=Math.sqrt(s),p=(c*c-u*u+Lo*s)/(2*u*Co*h),g=(c*c-u*u-Lo*s)/(2*c*Co*h),v=Math.log(Math.sqrt(p*p+1)-p),d=Math.log(Math.sqrt(g*g+1)-g),y=d-v,m=(y||Math.log(c/u))/Ao;return e.duration=1e3*m,e},Zu.behavior.zoom=function(){function n(n){n.on(E,l).on(zo+".zoom",h).on(A,g).on("dblclick.zoom",v).on(L,f)}function t(n){return[(n[0]-S.x)/S.k,(n[1]-S.y)/S.k]}function e(n){return[n[0]*S.k+S.x,n[1]*S.k+S.y]}function r(n){S.k=Math.max(N[0],Math.min(N[1],n))}function i(n,t){t=e(t),S.x+=n[0]-t[0],S.y+=n[1]-t[1]}function u(){_&&_.domain(M.range().map(function(n){return(n-S.x)/S.k}).map(M.invert)),w&&w.domain(b.range().map(function(n){return(n-S.y)/S.k}).map(b.invert))}function o(n){n({type:"zoomstart"})}function a(n){u(),n({type:"zoom",scale:S.k,translate:[S.x,S.y]})}function c(n){n({type:"zoomend"})}function l(){function n(){f=1,i(Zu.mouse(r),h),a(u)}function e(){s.on(A,Wu===r?g:null).on(C,null),p(f&&Zu.event.target===l),c(u)}var r=this,u=q.of(r,arguments),l=Zu.event.target,f=0,s=Zu.select(Wu).on(A,n).on(C,e),h=t(Zu.mouse(r)),p=D();T.call(r),o(u)}function f(){function n(){var n=Zu.touches(g);return p=S.k,n.forEach(function(n){n.identifier in d&&(d[n.identifier]=t(n))}),n}function e(){for(var t=Zu.event.changedTouches,e=0,u=t.length;e<u;++e)d[t[e].identifier]=null;var o=n(),c=Date.now();if(1===o.length){if(c-x<500){var l=o[0],f=d[l.identifier];r(2*S.k),i(l,f),s(),a(v)}x=c}else if(o.length>1){var l=o[0],h=o[1],p=l[0]-h[0],g=l[1]-h[1];y=p*p+g*g}}function u(){for(var n,t,e,u,o=Zu.touches(g),c=0,l=o.length;c<l;++c,u=null)if(e=o[c],u=d[e.identifier]){if(t)break;n=e,t=u}if(u){var f=(f=e[0]-n[0])*f+(f=e[1]-n[1])*f,s=y&&Math.sqrt(f/y);n=[(n[0]+e[0])/2,(n[1]+e[1])/2],t=[(t[0]+u[0])/2,(t[1]+u[1])/2],r(s*p)}x=null,i(n,t),a(v)}function h(){if(Zu.event.touches.length){for(var t=Zu.event.changedTouches,e=0,r=t.length;e<r;++e)delete d[t[e].identifier];for(var i in d)return void n()}b.on(M,null).on(_,null),w.on(E,l).on(L,f),k(),c(v)}var p,g=this,v=q.of(g,arguments),d={},y=0,m=Zu.event.changedTouches[0].identifier,M="touchmove.zoom-"+m,_="touchend.zoom-"+m,b=Zu.select(Wu).on(M,u).on(_,h),w=Zu.select(g).on(E,null).on(L,e),k=D();T.call(g),e(),o(v)}function h(){var n=q.of(this,arguments);m?clearTimeout(m):(T.call(this),o(n)),m=setTimeout(function(){m=null,c(n)},50),s();var e=y||Zu.mouse(this);d||(d=t(e)),r(Math.pow(2,.002*To())*S.k),i(e,d),a(n)}function g(){d=null}function v(){var n=q.of(this,arguments),e=Zu.mouse(this),u=t(e),l=Math.log(S.k)/Math.LN2;o(n),r(Math.pow(2,Zu.event.shiftKey?Math.ceil(l)-1:Math.floor(l)+1)),i(e,u),a(n),c(n)}var d,y,m,x,M,_,b,w,S={x:0,y:0,k:1},k=[960,500],N=qo,E="mousedown.zoom",A="mousemove.zoom",C="mouseup.zoom",L="touchstart.zoom",q=p(n,"zoomstart","zoom","zoomend");return n.event=function(n){n.each(function(){var n=q.of(this,arguments),t=S;xc?Zu.select(this).transition().each("start.zoom",function(){S=this.__chart__||{x:0,y:0,k:1},o(n)}).tween("zoom:zoom",function(){var e=k[0],r=k[1],i=e/2,u=r/2,o=Zu.interpolateZoom([(i-S.x)/S.k,(u-S.y)/S.k,e/S.k],[(i-t.x)/t.k,(u-t.y)/t.k,e/t.k]);return function(t){var r=o(t),c=e/r[2];this.__chart__=S={x:i-r[0]*c,y:u-r[1]*c,k:c},a(n)}}).each("end.zoom",function(){c(n)}):(this.__chart__=S,o(n),a(n),c(n))})},n.translate=function(t){return arguments.length?(S={x:+t[0],y:+t[1],k:S.k},u(),n):[S.x,S.y]},n.scale=function(t){return arguments.length?(S={x:S.x,y:S.y,k:+t},u(),n):S.k},n.scaleExtent=function(t){return arguments.length?(N=null==t?qo:[+t[0],+t[1]],n):N},n.center=function(t){return arguments.length?(y=t&&[+t[0],+t[1]],n):y},n.size=function(t){return arguments.length?(k=t&&[+t[0],+t[1]],n):k},n.x=function(t){return arguments.length?(_=t,M=t.copy(),S={x:0,y:0,k:1},n):_},n.y=function(t){return arguments.length?(w=t,b=t.copy(),S={x:0,y:0,k:1},n):w},Zu.rebind(n,q,"on")};var To,qo=[0,1/0],zo="onwheel"in $u?(To=function(){return-Zu.event.deltaY*(Zu.event.deltaMode?120:1)},"wheel"):"onmousewheel"in $u?(To=function(){return Zu.event.wheelDelta},"mousewheel"):(To=function(){return-Zu.event.detail},"MozMousePixelScroll");Z.prototype.toString=function(){return this.rgb()+""},Zu.hsl=function(n,t,e){return 1===arguments.length?n instanceof X?V(n.h,n.s,n.l):fn(""+n,sn,V):V(+n,+t,+e)};var Ro=X.prototype=new Z;Ro.brighter=function(n){return n=Math.pow(.7,arguments.length?n:1),V(this.h,this.s,this.l/n)},Ro.darker=function(n){return n=Math.pow(.7,arguments.length?n:1),V(this.h,this.s,n*this.l)},Ro.rgb=function(){return $(this.h,this.s,this.l)},Zu.hcl=function(n,t,e){return 1===arguments.length?n instanceof W?B(n.h,n.c,n.l):n instanceof K?nn(n.l,n.a,n.b):nn((n=hn((n=Zu.rgb(n)).r,n.g,n.b)).l,n.a,n.b):B(+n,+t,+e)};var Do=W.prototype=new Z;Do.brighter=function(n){return B(this.h,this.c,Math.min(100,this.l+Po*(arguments.length?n:1)))},Do.darker=function(n){return B(this.h,this.c,Math.max(0,this.l-Po*(arguments.length?n:1)))},Do.rgb=function(){return J(this.h,this.c,this.l).rgb()},Zu.lab=function(n,t,e){return 1===arguments.length?n instanceof K?G(n.l,n.a,n.b):n instanceof W?J(n.l,n.c,n.h):hn((n=Zu.rgb(n)).r,n.g,n.b):G(+n,+t,+e)};var Po=18,Uo=.95047,jo=1,Ho=1.08883,Fo=K.prototype=new Z;Fo.brighter=function(n){return G(Math.min(100,this.l+Po*(arguments.length?n:1)),this.a,this.b)},Fo.darker=function(n){return G(Math.max(0,this.l-Po*(arguments.length?n:1)),this.a,this.b)},Fo.rgb=function(){return Q(this.l,this.a,this.b)},Zu.rgb=function(n,t,e){return 1===arguments.length?n instanceof cn?an(n.r,n.g,n.b):fn(""+n,an,$):an(~~n,~~t,~~e)};var Oo=cn.prototype=new Z;Oo.brighter=function(n){n=Math.pow(.7,arguments.length?n:1);var t=this.r,e=this.g,r=this.b,i=30;return t||e||r?(t&&t<i&&(t=i),e&&e<i&&(e=i),r&&r<i&&(r=i),an(Math.min(255,~~(t/n)),Math.min(255,~~(e/n)),Math.min(255,~~(r/n)))):an(i,i,i)},Oo.darker=function(n){return n=Math.pow(.7,arguments.length?n:1),an(~~(n*this.r),~~(n*this.g),~~(n*this.b))},Oo.hsl=function(){return sn(this.r,this.g,this.b)},Oo.toString=function(){return"#"+ln(this.r)+ln(this.g)+ln(this.b)};var Yo=Zu.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Yo.forEach(function(n,t){Yo.set(n,un(t))}),Zu.functor=vn,Zu.xhr=yn(dn),Zu.dsv=function(n,t){function e(n,e,u){arguments.length<3&&(u=e,e=null);var o=Zu.xhr(n,t,u);return o.row=function(n){return arguments.length?o.response(null==(e=n)?r:i(n)):e},o.row(e)}function r(n){return e.parse(n.responseText)}function i(n){return function(t){return e.parse(t.responseText,n)}}function o(t){return t.map(a).join(n)}function a(n){return c.test(n)?'"'+n.replace(/\"/g,'""')+'"':n}var c=new RegExp('["'+n+"\n]"),l=n.charCodeAt(0);return e.parse=function(n,t){var r;return e.parseRows(n,function(n,e){if(r)return r(n,e-1);var i=new Function("d","return {"+n.map(function(n,t){return JSON.stringify(n)+": d["+t+"]"}).join(",")+"}");r=t?function(n,e){return t(i(n),e)}:i})},e.parseRows=function(n,t){function e(){if(f>=c)return o;if(i)return i=!1,u;var t=f;if(34===n.charCodeAt(t)){for(var e=t;e++<c;)if(34===n.charCodeAt(e)){if(34!==n.charCodeAt(e+1))break;++e}f=e+2;var r=n.charCodeAt(e+1);return 13===r?(i=!0,10===n.charCodeAt(e+2)&&++f):10===r&&(i=!0),n.substring(t+1,e).replace(/""/g,'"')}for(;f<c;){var r=n.charCodeAt(f++),a=1;if(10===r)i=!0;else if(13===r)i=!0,10===n.charCodeAt(f)&&(++f,++a);else if(r!==l)continue;return n.substring(t,f-a)}return n.substring(t)}for(var r,i,u={},o={},a=[],c=n.length,f=0,s=0;(r=e())!==o;){for(var h=[];r!==u&&r!==o;)h.push(r),r=e();t&&!(h=t(h,s++))||a.push(h)}return a},e.format=function(t){if(Array.isArray(t[0]))return e.formatRows(t);var r=new u,i=[];return t.forEach(function(n){for(var t in n)r.has(t)||i.push(r.add(t))}),[i.map(a).join(n)].concat(t.map(function(t){return i.map(function(n){return a(t[n])}).join(n)})).join("\n")},e.formatRows=function(n){return n.map(o).join("\n")},e},Zu.csv=Zu.dsv(",","text/csv"),Zu.tsv=Zu.dsv(" ","text/tab-separated-values");var Io,Zo,Vo,Xo,$o,Bo=Wu[a(Wu,"requestAnimationFrame")]||function(n){setTimeout(n,17)};Zu.timer=function(n,t,e){var r=arguments.length;r<2&&(t=0),r<3&&(e=Date.now());var i=e+t,u={c:n,t:i,f:!1,n:null};Zo?Zo.n=u:Io=u,Zo=u,Vo||(Xo=clearTimeout(Xo),Vo=1,Bo(Mn))},Zu.timer.flush=function(){_n(),bn()};var Wo=".",Jo=",",Go=[3,3],Ko="$",Qo=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(wn);Zu.formatPrefix=function(n,t){var e=0;return n&&(n<0&&(n*=-1),t&&(n=Zu.round(n,Sn(n,t))),e=1+Math.floor(1e-12+Math.log(n)/Math.LN10),e=Math.max(-24,Math.min(24,3*Math.floor((e<=0?e+1:e-1)/3)))),Qo[8+e/3]},Zu.round=function(n,t){return t?Math.round(n*(t=Math.pow(10,t)))/t:Math.round(n)},Zu.format=function(n){var t=na.exec(n),e=t[1]||" ",r=t[2]||">",i=t[3]||"",u=t[4]||"",o=t[5],a=+t[6],c=t[7],l=t[8],f=t[9],s=1,h="",p=!1;switch(l&&(l=+l.substring(1)),(o||"0"===e&&"="===r)&&(o=e="0",r="=",c&&(a-=Math.floor((a-1)/4))),f){case"n":c=!0,f="g";break;case"%":s=100,h="%",f="f";break;case"p":s=100,h="%",f="r";break;case"b":case"o":case"x":case"X":"#"===u&&(u="0"+f.toLowerCase());case"c":case"d":p=!0,l=0;break;case"s":s=-1,f="r"}"#"===u?u="":"$"===u&&(u=Ko),"r"!=f||l||(f="g"),null!=l&&("g"==f?l=Math.max(1,Math.min(21,l)):"e"!=f&&"f"!=f||(l=Math.max(0,Math.min(20,l)))),f=ta.get(f)||kn;var g=o&&c;return function(n){if(p&&n%1)return"";var t=n<0||0===n&&1/n<0?(n=-n,"-"):i;if(s<0){var v=Zu.formatPrefix(n,l);n=v.scale(n),h=v.symbol}else n*=s;n=f(n,l);var d=n.lastIndexOf("."),y=d<0?n:n.substring(0,d),m=d<0?"":Wo+n.substring(d+1);!o&&c&&(y=ea(y));var x=u.length+y.length+m.length+(g?0:t.length),M=x<a?new Array(x=a-x+1).join(e):"";return g&&(y=ea(M+y)),t+=u,n=y+m,("<"===r?t+n+M:">"===r?M+t+n:"^"===r?M.substring(0,x>>=1)+t+n+M.substring(x):t+(g?n:M+n))+h}};var na=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,ta=Zu.map({b:function(n){return n.toString(2)},c:function(n){return String.fromCharCode(n)},o:function(n){return n.toString(8)},x:function(n){return n.toString(16)},X:function(n){return n.toString(16).toUpperCase()},g:function(n,t){return n.toPrecision(t)},e:function(n,t){return n.toExponential(t)},f:function(n,t){return n.toFixed(t)},r:function(n,t){return(n=Zu.round(n,Sn(n,t))).toFixed(Math.max(0,Math.min(20,Sn(n*(1+1e-15),t))))}}),ea=dn;if(Go){var ra=Go.length;ea=function(n){for(var t=n.length,e=[],r=0,i=Go[0];t>0&&i>0;)e.push(n.substring(t-=i,t+i)),i=Go[r=(r+1)%ra];return e.reverse().join(Jo)}}Zu.geo={},Nn.prototype={s:0,t:0,add:function(n){En(n,this.t,ia),En(ia.s,this.s,this),this.s?this.t+=ia.t:this.s=ia.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var ia=new Nn;Zu.geo.stream=function(n,t){n&&ua.hasOwnProperty(n.type)?ua[n.type](n,t):An(n,t)};var ua={Feature:function(n,t){An(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,r=-1,i=e.length;++r<i;)An(e[r].geometry,t)}},oa={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var e=n.coordinates,r=-1,i=e.length;++r<i;)n=e[r],t.point(n[0],n[1],n[2])},LineString:function(n,t){Cn(n.coordinates,t,0)},MultiLineString:function(n,t){for(var e=n.coordinates,r=-1,i=e.length;++r<i;)Cn(e[r],t,0)},Polygon:function(n,t){Ln(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,r=-1,i=e.length;++r<i;)Ln(e[r],t)},GeometryCollection:function(n,t){for(var e=n.geometries,r=-1,i=e.length;++r<i;)An(e[r],t)}};Zu.geo.area=function(n){return aa=0,Zu.geo.stream(n,la),aa};var aa,ca=new Nn,la={sphere:function(){aa+=4*_o},point:c,lineStart:c,lineEnd:c,polygonStart:function(){ca.reset(),la.lineStart=Tn},polygonEnd:function(){var n=2*ca;aa+=n<0?4*_o+n:n,la.lineStart=la.lineEnd=la.point=c}};Zu.geo.bounds=function(){function n(n,t){x.push(M=[f=n,h=n]),t<s&&(s=t),t>p&&(p=t)}function t(t,e){var r=qn([t*No,e*No]);if(y){var i=Rn(y,r),u=[i[1],-i[0],0],o=Rn(u,i);Un(o),o=jn(o);var c=t-g,l=c>0?1:-1,v=o[0]*Eo*l,d=eo(c)>180;if(d^(l*g<v&&v<l*t)){var m=o[1]*Eo;m>p&&(p=m)}else if(v=(v+360)%360-180,d^(l*g<v&&v<l*t)){var m=-o[1]*Eo;m<s&&(s=m)}else e<s&&(s=e),e>p&&(p=e);d?t<g?a(f,t)>a(f,h)&&(h=t):a(t,h)>a(f,h)&&(f=t):h>=f?(t<f&&(f=t),t>h&&(h=t)):t>g?a(f,t)>a(f,h)&&(h=t):a(t,h)>a(f,h)&&(f=t)}else n(t,e);y=r,g=t}function e(){_.point=t}function r(){M[0]=f,M[1]=h,_.point=n,y=null}function i(n,e){if(y){var r=n-g;m+=eo(r)>180?r+(r>0?360:-360):r}else v=n,d=e;la.point(n,e),t(n,e)}function u(){la.lineStart()}function o(){i(v,d),la.lineEnd(),eo(m)>So&&(f=-(h=180)),M[0]=f,M[1]=h,y=null}function a(n,t){return(t-=n)<0?t+360:t}function c(n,t){return n[0]-t[0]}function l(n,t){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}var f,s,h,p,g,v,d,y,m,x,M,_={point:n,lineStart:e,lineEnd:r,polygonStart:function(){_.point=i,_.lineStart=u,_.lineEnd=o,m=0,la.polygonStart()},polygonEnd:function(){la.polygonEnd(),_.point=n,_.lineStart=e,_.lineEnd=r,ca<0?(f=-(h=180),s=-(p=90)):m>So?p=90:m<-So&&(s=-90),M[0]=f,M[1]=h}};return function(n){p=h=-(f=s=1/0),x=[],Zu.geo.stream(n,_);var t=x.length;if(t){x.sort(c);for(var e,r=1,i=x[0],u=[i];r<t;++r)e=x[r],l(e[0],i)||l(e[1],i)?(a(i[0],e[1])>a(i[0],i[1])&&(i[1]=e[1]),a(e[0],i[1])>a(i[0],i[1])&&(i[0]=e[0])):u.push(i=e);for(var o,e,g=-(1/0),t=u.length-1,r=0,i=u[t];r<=t;i=e,++r)e=u[r],(o=a(i[1],e[0]))>g&&(g=o,f=e[0],h=i[1])}return x=M=null,f===1/0||s===1/0?[[NaN,NaN],[NaN,NaN]]:[[f,s],[h,p]]}}(),Zu.geo.centroid=function(n){fa=sa=ha=pa=ga=va=da=ya=ma=xa=Ma=0,Zu.geo.stream(n,_a);var t=ma,e=xa,r=Ma,i=t*t+e*e+r*r;return i<ko&&(t=va,e=da,r=ya,sa<So&&(t=ha,e=pa,r=ga),i=t*t+e*e+r*r,i<ko)?[NaN,NaN]:[Math.atan2(e,t)*Eo,H(r/Math.sqrt(i))*Eo]};var fa,sa,ha,pa,ga,va,da,ya,ma,xa,Ma,_a={sphere:c,point:Fn,lineStart:Yn,lineEnd:In,polygonStart:function(){_a.lineStart=Zn},polygonEnd:function(){_a.lineStart=Yn}},ba=Wn(Vn,nt,et,[-_o,-_o/2]),wa=1e9;Zu.geo.clipExtent=function(){var n,t,e,r,i,u,o={stream:function(n){return i&&(i.valid=!1),i=u(n),i.valid=!0,i},extent:function(a){return arguments.length?(u=ut(n=+a[0][0],t=+a[0][1],e=+a[1][0],r=+a[1][1]),i&&(i.valid=!1,i=null),o):[[n,t],[e,r]]}};return o.extent([[0,0],[960,500]])},(Zu.geo.conicEqualArea=function(){return at(ct)}).raw=ct,Zu.geo.albers=function(){return Zu.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},Zu.geo.albersUsa=function(){function n(n){var u=n[0],o=n[1];return t=null,e(u,o),t||(r(u,o),t)||i(u,o),t}var t,e,r,i,u=Zu.geo.albers(),o=Zu.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a=Zu.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(n,e){t=[n,e]}};return n.invert=function(n){var t=u.scale(),e=u.translate(),r=(n[0]-e[0])/t,i=(n[1]-e[1])/t;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?o:i>=.166&&i<.234&&r>=-.214&&r<-.115?a:u).invert(n)},n.stream=function(n){var t=u.stream(n),e=o.stream(n),r=a.stream(n);return{point:function(n,i){t.point(n,i),e.point(n,i),r.point(n,i)},sphere:function(){t.sphere(),e.sphere(),r.sphere()},lineStart:function(){t.lineStart(),e.lineStart(),r.lineStart()},lineEnd:function(){t.lineEnd(),e.lineEnd(),r.lineEnd()},polygonStart:function(){t.polygonStart(),e.polygonStart(),r.polygonStart()},polygonEnd:function(){t.polygonEnd(),e.polygonEnd(),r.polygonEnd()}}},n.precision=function(t){return arguments.length?(u.precision(t),o.precision(t),a.precision(t),n):u.precision()},n.scale=function(t){return arguments.length?(u.scale(t),o.scale(.35*t),a.scale(t),n.translate(u.translate())):u.scale()},n.translate=function(t){if(!arguments.length)return u.translate();var l=u.scale(),f=+t[0],s=+t[1];return e=u.translate(t).clipExtent([[f-.455*l,s-.238*l],[f+.455*l,s+.238*l]]).stream(c).point,r=o.translate([f-.307*l,s+.201*l]).clipExtent([[f-.425*l+So,s+.12*l+So],[f-.214*l-So,s+.234*l-So]]).stream(c).point,i=a.translate([f-.205*l,s+.212*l]).clipExtent([[f-.214*l+So,s+.166*l+So],[f-.115*l-So,s+.234*l-So]]).stream(c).point,n},n.scale(1070)};var Sa,ka,Na,Ea,Aa,Ca,La={point:c,lineStart:c,lineEnd:c,polygonStart:function(){ka=0,La.lineStart=lt},polygonEnd:function(){La.lineStart=La.lineEnd=La.point=c,Sa+=eo(ka/2)}},Ta={point:ft,lineStart:c,lineEnd:c,polygonStart:c,polygonEnd:c},qa={point:pt,lineStart:gt,lineEnd:vt,polygonStart:function(){qa.lineStart=dt},polygonEnd:function(){qa.point=pt,qa.lineStart=gt,qa.lineEnd=vt}};Zu.geo.transform=function(n){return{stream:function(t){var e=new xt(t);for(var r in n)e[r]=n[r];return e}}},xt.prototype={point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},Zu.geo.path=function(){function n(n){return n&&("function"==typeof a&&u.pointRadius(+a.apply(this,arguments)),o&&o.valid||(o=i(u)),Zu.geo.stream(n,o)),u.result()}function t(){return o=null,n}var e,r,i,u,o,a=4.5;return n.area=function(n){return Sa=0,Zu.geo.stream(n,i(La)),Sa},n.centroid=function(n){return ha=pa=ga=va=da=ya=ma=xa=Ma=0,Zu.geo.stream(n,i(qa)),Ma?[ma/Ma,xa/Ma]:ya?[va/ya,da/ya]:ga?[ha/ga,pa/ga]:[NaN,NaN]},n.bounds=function(n){return Aa=Ca=-(Na=Ea=1/0),Zu.geo.stream(n,i(Ta)),[[Na,Ea],[Aa,Ca]]},n.projection=function(n){return arguments.length?(i=(e=n)?n.stream||Mt(n):dn,t()):e},n.context=function(n){return arguments.length?(u=null==(r=n)?new st:new yt(n),"function"!=typeof a&&u.pointRadius(a),t()):r},n.pointRadius=function(t){return arguments.length?(a="function"==typeof t?t:(u.pointRadius(+t),+t),n):a},n.projection(Zu.geo.albersUsa()).context(null)},Zu.geo.projection=_t,Zu.geo.projectionMutator=bt,(Zu.geo.equirectangular=function(){return _t(St)}).raw=St.invert=St,Zu.geo.rotation=function(n){
function t(t){return t=n(t[0]*No,t[1]*No),t[0]*=Eo,t[1]*=Eo,t}return n=Nt(n[0]%360*No,n[1]*No,n.length>2?n[2]*No:0),t.invert=function(t){return t=n.invert(t[0]*No,t[1]*No),t[0]*=Eo,t[1]*=Eo,t},t},kt.invert=St,Zu.geo.circle=function(){function n(){var n="function"==typeof r?r.apply(this,arguments):r,t=Nt(-n[0]*No,-n[1]*No,0).invert,i=[];return e(null,null,1,{point:function(n,e){i.push(n=t(n,e)),n[0]*=Eo,n[1]*=Eo}}),{type:"Polygon",coordinates:[i]}}var t,e,r=[0,0],i=6;return n.origin=function(t){return arguments.length?(r=t,n):r},n.angle=function(r){return arguments.length?(e=Lt((t=+r)*No,i*No),n):t},n.precision=function(r){return arguments.length?(e=Lt(t*No,(i=+r)*No),n):i},n.angle(90)},Zu.geo.distance=function(n,t){var e,r=(t[0]-n[0])*No,i=n[1]*No,u=t[1]*No,o=Math.sin(r),a=Math.cos(r),c=Math.sin(i),l=Math.cos(i),f=Math.sin(u),s=Math.cos(u);return Math.atan2(Math.sqrt((e=s*o)*e+(e=l*f-c*s*a)*e),c*f+l*s*a)},Zu.geo.graticule=function(){function n(){return{type:"MultiLineString",coordinates:t()}}function t(){return Zu.range(Math.ceil(u/d)*d,i,d).map(h).concat(Zu.range(Math.ceil(l/y)*y,c,y).map(p)).concat(Zu.range(Math.ceil(r/g)*g,e,g).filter(function(n){return eo(n%d)>So}).map(f)).concat(Zu.range(Math.ceil(a/v)*v,o,v).filter(function(n){return eo(n%y)>So}).map(s))}var e,r,i,u,o,a,c,l,f,s,h,p,g=10,v=g,d=90,y=360,m=2.5;return n.lines=function(){return t().map(function(n){return{type:"LineString",coordinates:n}})},n.outline=function(){return{type:"Polygon",coordinates:[h(u).concat(p(c).slice(1),h(i).reverse().slice(1),p(l).reverse().slice(1))]}},n.extent=function(t){return arguments.length?n.majorExtent(t).minorExtent(t):n.minorExtent()},n.majorExtent=function(t){return arguments.length?(u=+t[0][0],i=+t[1][0],l=+t[0][1],c=+t[1][1],u>i&&(t=u,u=i,i=t),l>c&&(t=l,l=c,c=t),n.precision(m)):[[u,l],[i,c]]},n.minorExtent=function(t){return arguments.length?(r=+t[0][0],e=+t[1][0],a=+t[0][1],o=+t[1][1],r>e&&(t=r,r=e,e=t),a>o&&(t=a,a=o,o=t),n.precision(m)):[[r,a],[e,o]]},n.step=function(t){return arguments.length?n.majorStep(t).minorStep(t):n.minorStep()},n.majorStep=function(t){return arguments.length?(d=+t[0],y=+t[1],n):[d,y]},n.minorStep=function(t){return arguments.length?(g=+t[0],v=+t[1],n):[g,v]},n.precision=function(t){return arguments.length?(m=+t,f=qt(a,o,90),s=zt(r,e,m),h=qt(l,c,90),p=zt(u,i,m),n):m},n.majorExtent([[-180,-90+So],[180,90-So]]).minorExtent([[-180,-80-So],[180,80+So]])},Zu.geo.greatArc=function(){function n(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),e||i.apply(this,arguments)]}}var t,e,r=Rt,i=Dt;return n.distance=function(){return Zu.geo.distance(t||r.apply(this,arguments),e||i.apply(this,arguments))},n.source=function(e){return arguments.length?(r=e,t="function"==typeof e?null:e,n):r},n.target=function(t){return arguments.length?(i=t,e="function"==typeof t?null:t,n):i},n.precision=function(){return arguments.length?n:0},n},Zu.geo.interpolate=function(n,t){return Pt(n[0]*No,n[1]*No,t[0]*No,t[1]*No)},Zu.geo.length=function(n){return za=0,Zu.geo.stream(n,Ra),za};var za,Ra={sphere:c,point:c,lineStart:Ut,lineEnd:c,polygonStart:c,polygonEnd:c},Da=jt(function(n){return Math.sqrt(2/(1+n))},function(n){return 2*Math.asin(n/2)});(Zu.geo.azimuthalEqualArea=function(){return _t(Da)}).raw=Da;var Pa=jt(function(n){var t=Math.acos(n);return t&&t/Math.sin(t)},dn);(Zu.geo.azimuthalEquidistant=function(){return _t(Pa)}).raw=Pa,(Zu.geo.conicConformal=function(){return at(Ht)}).raw=Ht,(Zu.geo.conicEquidistant=function(){return at(Ft)}).raw=Ft;var Ua=jt(function(n){return 1/n},Math.atan);(Zu.geo.gnomonic=function(){return _t(Ua)}).raw=Ua,Ot.invert=function(n,t){return[n,2*Math.atan(Math.exp(t))-wo]},(Zu.geo.mercator=function(){return Yt(Ot)}).raw=Ot;var ja=jt(function(){return 1},Math.asin);(Zu.geo.orthographic=function(){return _t(ja)}).raw=ja;var Ha=jt(function(n){return 1/(1+n)},function(n){return 2*Math.atan(n)});(Zu.geo.stereographic=function(){return _t(Ha)}).raw=Ha,It.invert=function(n,t){return[Math.atan2(F(n),Math.cos(t)),H(Math.sin(t)/O(n))]},(Zu.geo.transverseMercator=function(){return Yt(It)}).raw=It,Zu.geom={},Zu.geom.hull=function(n){function t(n){if(n.length<3)return[];var t,i,u,o,a,c,l,f,s,h,p,g,v=vn(e),d=vn(r),y=n.length,m=y-1,x=[],M=[],_=0;if(v===Zt&&r===Vt)t=n;else for(u=0,t=[];u<y;++u)t.push([+v.call(this,i=n[u],u),+d.call(this,i,u)]);for(u=1;u<y;++u)(t[u][1]<t[_][1]||t[u][1]==t[_][1]&&t[u][0]<t[_][0])&&(_=u);for(u=0;u<y;++u)u!==_&&(c=t[u][1]-t[_][1],a=t[u][0]-t[_][0],x.push({angle:Math.atan2(c,a),index:u}));for(x.sort(function(n,t){return n.angle-t.angle}),p=x[0].angle,h=x[0].index,s=0,u=1;u<m;++u){if(o=x[u].index,p==x[u].angle){if(a=t[h][0]-t[_][0],c=t[h][1]-t[_][1],l=t[o][0]-t[_][0],f=t[o][1]-t[_][1],a*a+c*c>=l*l+f*f){x[u].index=-1;continue}x[s].index=-1}p=x[u].angle,s=u,h=o}for(M.push(_),u=0,o=0;u<2;++o)x[o].index>-1&&(M.push(x[o].index),u++);for(g=M.length;o<m;++o)if(!(x[o].index<0)){for(;!Xt(M[g-2],M[g-1],x[o].index,t);)--g;M[g++]=x[o].index}var b=[];for(u=g-1;u>=0;--u)b.push(n[M[u]]);return b}var e=Zt,r=Vt;return arguments.length?t(n):(t.x=function(n){return arguments.length?(e=n,t):e},t.y=function(n){return arguments.length?(r=n,t):r},t)},Zu.geom.polygon=function(n){return ao(n,Fa),n};var Fa=Zu.geom.polygon.prototype=[];Fa.area=function(){for(var n,t=-1,e=this.length,r=this[e-1],i=0;++t<e;)n=r,r=this[t],i+=n[1]*r[0]-n[0]*r[1];return.5*i},Fa.centroid=function(n){var t,e,r=-1,i=this.length,u=0,o=0,a=this[i-1];for(arguments.length||(n=-1/(6*this.area()));++r<i;)t=a,a=this[r],e=t[0]*a[1]-a[0]*t[1],u+=(t[0]+a[0])*e,o+=(t[1]+a[1])*e;return[u*n,o*n]},Fa.clip=function(n){for(var t,e,r,i,u,o,a=Wt(n),c=-1,l=this.length-Wt(this),f=this[l-1];++c<l;){for(t=n.slice(),n.length=0,i=this[c],u=t[(r=t.length-a)-1],e=-1;++e<r;)o=t[e],$t(o,f,i)?($t(u,f,i)||n.push(Bt(u,o,f,i)),n.push(o)):$t(u,f,i)&&n.push(Bt(u,o,f,i)),u=o;a&&n.push(n[0]),f=i}return n};var Oa,Ya,Ia,Za,Va,Xa=[],$a=[];re.prototype.prepare=function(){for(var n,t=this.edges,e=t.length;e--;)n=t[e].edge,n.b&&n.a||t.splice(e,1);return t.sort(ue),t.length},ve.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},de.prototype={insert:function(n,t){var e,r,i;if(n){if(t.P=n,t.N=n.N,n.N&&(n.N.P=t),n.N=t,n.R){for(n=n.R;n.L;)n=n.L;n.L=t}else n.R=t;e=n}else this._?(n=Me(this._),t.P=null,t.N=n,n.P=n.L=t,e=n):(t.P=t.N=null,this._=t,e=null);for(t.L=t.R=null,t.U=e,t.C=!0,n=t;e&&e.C;)r=e.U,e===r.L?(i=r.R,i&&i.C?(e.C=i.C=!1,r.C=!0,n=r):(n===e.R&&(me(this,e),n=e,e=n.U),e.C=!1,r.C=!0,xe(this,r))):(i=r.L,i&&i.C?(e.C=i.C=!1,r.C=!0,n=r):(n===e.L&&(xe(this,e),n=e,e=n.U),e.C=!1,r.C=!0,me(this,r))),e=n.U;this._.C=!1},remove:function(n){n.N&&(n.N.P=n.P),n.P&&(n.P.N=n.N),n.N=n.P=null;var t,e,r,i=n.U,u=n.L,o=n.R;if(e=u?o?Me(o):u:o,i?i.L===n?i.L=e:i.R=e:this._=e,u&&o?(r=e.C,e.C=n.C,e.L=u,u.U=e,e!==o?(i=e.U,e.U=n.U,n=e.R,i.L=n,e.R=o,o.U=e):(e.U=i,i=e,n=e.R)):(r=n.C,n=e),n&&(n.U=i),!r){if(n&&n.C)return void(n.C=!1);do{if(n===this._)break;if(n===i.L){if(t=i.R,t.C&&(t.C=!1,i.C=!0,me(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,xe(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,me(this,i),n=this._;break}}else if(t=i.L,t.C&&(t.C=!1,i.C=!0,xe(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,me(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,xe(this,i),n=this._;break}t.C=!0,n=i,i=i.U}while(!n.C);n&&(n.C=!1)}}},Zu.geom.voronoi=function(n){function t(n){var t=new Array(n.length),r=a[0][0],i=a[0][1],u=a[1][0],o=a[1][1];return _e(e(n),a).cells.forEach(function(e,a){var c=e.edges,l=e.site,f=t[a]=c.length?c.map(function(n){var t=n.start();return[t.x,t.y]}):l.x>=r&&l.x<=u&&l.y>=i&&l.y<=o?[[r,o],[u,o],[u,i],[r,i]]:[];f.point=n[a]}),t}function e(n){return n.map(function(n,t){return{x:Math.round(u(n,t)/So)*So,y:Math.round(o(n,t)/So)*So,i:t}})}var r=Zt,i=Vt,u=r,o=i,a=Ba;return n?t(n):(t.links=function(n){return _e(e(n)).edges.filter(function(n){return n.l&&n.r}).map(function(t){return{source:n[t.l.i],target:n[t.r.i]}})},t.triangles=function(n){var t=[];return _e(e(n)).cells.forEach(function(e,r){for(var i,u,o=e.site,a=e.edges.sort(ue),c=-1,l=a.length,f=a[l-1].edge,s=f.l===o?f.r:f.l;++c<l;)i=f,u=s,f=a[c].edge,s=f.l===o?f.r:f.l,r<u.i&&r<s.i&&we(o,u,s)<0&&t.push([n[r],n[u.i],n[s.i]])}),t},t.x=function(n){return arguments.length?(u=vn(r=n),t):r},t.y=function(n){return arguments.length?(o=vn(i=n),t):i},t.clipExtent=function(n){return arguments.length?(a=null==n?Ba:n,t):a===Ba?null:a},t.size=function(n){return arguments.length?t.clipExtent(n&&[[0,0],n]):a===Ba?null:a&&a[1]},t)};var Ba=[[-1e6,-1e6],[1e6,1e6]];Zu.geom.delaunay=function(n){return Zu.geom.voronoi().triangles(n)},Zu.geom.quadtree=function(n,t,e,r,i){function u(n){function u(n,t,e,r,i,u,o,a){if(!isNaN(e)&&!isNaN(r))if(n.leaf){var c=n.x,f=n.y;if(null!=c)if(eo(c-e)+eo(f-r)<.01)l(n,t,e,r,i,u,o,a);else{var s=n.point;n.x=n.y=n.point=null,l(n,s,c,f,i,u,o,a),l(n,t,e,r,i,u,o,a)}else n.x=e,n.y=r,n.point=t}else l(n,t,e,r,i,u,o,a)}function l(n,t,e,r,i,o,a,c){var l=.5*(i+a),f=.5*(o+c),s=e>=l,h=r>=f,p=(h<<1)+s;n.leaf=!1,n=n.nodes[p]||(n.nodes[p]=Ne()),s?i=l:a=l,h?o=f:c=f,u(n,t,e,r,i,o,a,c)}var f,s,h,p,g,v,d,y,m,x=vn(a),M=vn(c);if(null!=t)v=t,d=e,y=r,m=i;else if(y=m=-(v=d=1/0),s=[],h=[],g=n.length,o)for(p=0;p<g;++p)f=n[p],f.x<v&&(v=f.x),f.y<d&&(d=f.y),f.x>y&&(y=f.x),f.y>m&&(m=f.y),s.push(f.x),h.push(f.y);else for(p=0;p<g;++p){var _=+x(f=n[p],p),b=+M(f,p);_<v&&(v=_),b<d&&(d=b),_>y&&(y=_),b>m&&(m=b),s.push(_),h.push(b)}var w=y-v,S=m-d;w>S?m=d+w:y=v+S;var k=Ne();if(k.add=function(n){u(k,n,+x(n,++p),+M(n,p),v,d,y,m)},k.visit=function(n){Ee(n,k,v,d,y,m)},p=-1,null==t){for(;++p<g;)u(k,n[p],s[p],h[p],v,d,y,m);--p}else n.forEach(k.add);return s=h=n=f=null,k}var o,a=Zt,c=Vt;return(o=arguments.length)?(a=Se,c=ke,3===o&&(i=e,r=t,e=t=0),u(n)):(u.x=function(n){return arguments.length?(a=n,u):a},u.y=function(n){return arguments.length?(c=n,u):c},u.extent=function(n){return arguments.length?(null==n?t=e=r=i=null:(t=+n[0][0],e=+n[0][1],r=+n[1][0],i=+n[1][1]),u):null==t?null:[[t,e],[r,i]]},u.size=function(n){return arguments.length?(null==n?t=e=r=i=null:(t=e=0,r=+n[0],i=+n[1]),u):null==t?null:[r-t,i-e]},u)},Zu.interpolateRgb=Ae,Zu.interpolateObject=Ce,Zu.interpolateNumber=Le,Zu.interpolateString=Te;var Wa=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;Zu.interpolate=qe,Zu.interpolators=[function(n,t){var e=typeof t;return("string"===e?Yo.has(t)||/^(#|rgb\(|hsl\()/.test(t)?Ae:Te:t instanceof Z?Ae:"object"===e?Array.isArray(t)?ze:Ce:Le)(n,t)}],Zu.interpolateArray=ze;var Ja=function(){return dn},Ga=Zu.map({linear:Ja,poly:Fe,quad:function(){return Ue},cubic:function(){return je},sin:function(){return Oe},exp:function(){return Ye},circle:function(){return Ie},elastic:Ze,back:Ve,bounce:function(){return Xe}}),Ka=Zu.map({in:dn,out:De,"in-out":Pe,"out-in":function(n){return Pe(De(n))}});Zu.ease=function(n){var t=n.indexOf("-"),e=t>=0?n.substring(0,t):n,r=t>=0?n.substring(t+1):"in";return e=Ga.get(e)||Ja,r=Ka.get(r)||dn,Re(r(e.apply(null,Vu.call(arguments,1))))},Zu.interpolateHcl=$e,Zu.interpolateHsl=Be,Zu.interpolateLab=We,Zu.interpolateRound=Je,Zu.transform=function(n){var t=$u.createElementNS(Zu.ns.prefix.svg,"g");return(Zu.transform=function(n){if(null!=n){t.setAttribute("transform",n);var e=t.transform.baseVal.consolidate()}return new Ge(e?e.matrix:Qa)})(n)},Ge.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Qa={a:1,b:0,c:0,d:1,e:0,f:0};Zu.interpolateTransform=tr,Zu.layout={},Zu.layout.bundle=function(){return function(n){for(var t=[],e=-1,r=n.length;++e<r;)t.push(ir(n[e]));return t}},Zu.layout.chord=function(){function n(){var n,l,s,h,p,g={},v=[],d=Zu.range(u),y=[];for(e=[],r=[],n=0,h=-1;++h<u;){for(l=0,p=-1;++p<u;)l+=i[h][p];v.push(l),y.push(Zu.range(u)),n+=l}for(o&&d.sort(function(n,t){return o(v[n],v[t])}),a&&y.forEach(function(n,t){n.sort(function(n,e){return a(i[t][n],i[t][e])})}),n=(bo-f*u)/n,l=0,h=-1;++h<u;){for(s=l,p=-1;++p<u;){var m=d[h],x=y[m][p],M=i[m][x],_=l,b=l+=M*n;g[m+"-"+x]={index:m,subindex:x,startAngle:_,endAngle:b,value:M}}r[m]={index:m,startAngle:s,endAngle:l,value:(l-s)/n},l+=f}for(h=-1;++h<u;)for(p=h-1;++p<u;){var w=g[h+"-"+p],S=g[p+"-"+h];(w.value||S.value)&&e.push(w.value<S.value?{source:S,target:w}:{source:w,target:S})}c&&t()}function t(){e.sort(function(n,t){return c((n.source.value+n.target.value)/2,(t.source.value+t.target.value)/2)})}var e,r,i,u,o,a,c,l={},f=0;return l.matrix=function(n){return arguments.length?(u=(i=n)&&i.length,e=r=null,l):i},l.padding=function(n){return arguments.length?(f=n,e=r=null,l):f},l.sortGroups=function(n){return arguments.length?(o=n,e=r=null,l):o},l.sortSubgroups=function(n){return arguments.length?(a=n,e=null,l):a},l.sortChords=function(n){return arguments.length?(c=n,e&&t(),l):c},l.chords=function(){return e||n(),e},l.groups=function(){return r||n(),r},l},Zu.layout.force=function(){function n(n){return function(t,e,r,i){if(t.point!==n){var u=t.cx-n.x,o=t.cy-n.y,a=1/Math.sqrt(u*u+o*o);if((i-e)*a<v){var c=t.charge*a*a;return n.px-=u*c,n.py-=o*c,!0}if(t.point&&isFinite(a)){var c=t.pointCharge*a*a;n.px-=u*c,n.py-=o*c}}return!t.charge}}function t(n){n.px=Zu.event.x,n.py=Zu.event.y,a.resume()}var e,r,i,u,o,a={},c=Zu.dispatch("start","tick","end"),l=[1,1],f=.9,s=nc,h=tc,p=-30,g=.1,v=.8,d=[],y=[];return a.tick=function(){if((r*=.99)<.005)return c.end({type:"end",alpha:r=0}),!0;var t,e,a,s,h,v,m,x,M,_=d.length,b=y.length;for(e=0;e<b;++e)a=y[e],s=a.source,h=a.target,x=h.x-s.x,M=h.y-s.y,(v=x*x+M*M)&&(v=r*u[e]*((v=Math.sqrt(v))-i[e])/v,x*=v,M*=v,h.x-=x*(m=s.weight/(h.weight+s.weight)),h.y-=M*m,s.x+=x*(m=1-m),s.y+=M*m);if((m=r*g)&&(x=l[0]/2,M=l[1]/2,e=-1,m))for(;++e<_;)a=d[e],a.x+=(x-a.x)*m,a.y+=(M-a.y)*m;if(p)for(sr(t=Zu.geom.quadtree(d),r,o),e=-1;++e<_;)(a=d[e]).fixed||t.visit(n(a));for(e=-1;++e<_;)a=d[e],a.fixed?(a.x=a.px,a.y=a.py):(a.x-=(a.px-(a.px=a.x))*f,a.y-=(a.py-(a.py=a.y))*f);c.tick({type:"tick",alpha:r})},a.nodes=function(n){return arguments.length?(d=n,a):d},a.links=function(n){return arguments.length?(y=n,a):y},a.size=function(n){return arguments.length?(l=n,a):l},a.linkDistance=function(n){return arguments.length?(s="function"==typeof n?n:+n,a):s},a.distance=a.linkDistance,a.linkStrength=function(n){return arguments.length?(h="function"==typeof n?n:+n,a):h},a.friction=function(n){return arguments.length?(f=+n,a):f},a.charge=function(n){return arguments.length?(p="function"==typeof n?n:+n,a):p},a.gravity=function(n){return arguments.length?(g=+n,a):g},a.theta=function(n){return arguments.length?(v=+n,a):v},a.alpha=function(n){return arguments.length?(n=+n,r?r=n>0?n:0:n>0&&(c.start({type:"start",alpha:r=n}),Zu.timer(a.tick)),a):r},a.start=function(){function n(n,r){if(!e){for(e=new Array(c),a=0;a<c;++a)e[a]=[];for(a=0;a<l;++a){var i=y[a];e[i.source.index].push(i.target),e[i.target.index].push(i.source)}}for(var u,o=e[t],a=-1,l=o.length;++a<l;)if(!isNaN(u=o[a][n]))return u;return Math.random()*r}var t,e,r,c=d.length,f=y.length,g=l[0],v=l[1];for(t=0;t<c;++t)(r=d[t]).index=t,r.weight=0;for(t=0;t<f;++t)r=y[t],"number"==typeof r.source&&(r.source=d[r.source]),"number"==typeof r.target&&(r.target=d[r.target]),++r.source.weight,++r.target.weight;for(t=0;t<c;++t)r=d[t],isNaN(r.x)&&(r.x=n("x",g)),isNaN(r.y)&&(r.y=n("y",v)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(i=[],"function"==typeof s)for(t=0;t<f;++t)i[t]=+s.call(this,y[t],t);else for(t=0;t<f;++t)i[t]=s;if(u=[],"function"==typeof h)for(t=0;t<f;++t)u[t]=+h.call(this,y[t],t);else for(t=0;t<f;++t)u[t]=h;if(o=[],"function"==typeof p)for(t=0;t<c;++t)o[t]=+p.call(this,d[t],t);else for(t=0;t<c;++t)o[t]=p;return a.resume()},a.resume=function(){return a.alpha(.1)},a.stop=function(){return a.alpha(0)},a.drag=function(){return e||(e=Zu.behavior.drag().origin(dn).on("dragstart.force",ar).on("drag.force",t).on("dragend.force",cr)),arguments.length?void this.on("mouseover.force",lr).on("mouseout.force",fr).call(e):e},Zu.rebind(a,c,"on")};var nc=20,tc=1;Zu.layout.hierarchy=function(){function n(t,o,a){var c=i.call(e,t,o);if(t.depth=o,a.push(t),c&&(l=c.length)){for(var l,f,s=-1,h=t.children=new Array(l),p=0,g=o+1;++s<l;)f=h[s]=n(c[s],g,a),f.parent=t,p+=f.value;r&&h.sort(r),u&&(t.value=p)}else delete t.children,u&&(t.value=+u.call(e,t,o)||0);return t}function t(n,r){var i=n.children,o=0;if(i&&(a=i.length))for(var a,c=-1,l=r+1;++c<a;)o+=t(i[c],l);else u&&(o=+u.call(e,n,r)||0);return u&&(n.value=o),o}function e(t){var e=[];return n(t,0,e),e}var r=vr,i=pr,u=gr;return e.sort=function(n){return arguments.length?(r=n,e):r},e.children=function(n){return arguments.length?(i=n,e):i},e.value=function(n){return arguments.length?(u=n,e):u},e.revalue=function(n){return t(n,0),n},e},Zu.layout.partition=function(){function n(t,e,r,i){var u=t.children;if(t.x=e,t.y=t.depth*i,t.dx=r,t.dy=i,u&&(o=u.length)){var o,a,c,l=-1;for(r=t.value?r/t.value:0;++l<o;)n(a=u[l],e,c=a.value*r,i),e+=c}}function t(n){var e=n.children,r=0;if(e&&(i=e.length))for(var i,u=-1;++u<i;)r=Math.max(r,t(e[u]));return 1+r}function e(e,u){var o=r.call(this,e,u);return n(o[0],0,i[0],i[1]/t(o[0])),o}var r=Zu.layout.hierarchy(),i=[1,1];return e.size=function(n){return arguments.length?(i=n,e):i},hr(e,r)},Zu.layout.pie=function(){function n(u){var o=u.map(function(e,r){return+t.call(n,e,r)}),a=+("function"==typeof r?r.apply(this,arguments):r),c=(("function"==typeof i?i.apply(this,arguments):i)-a)/Zu.sum(o),l=Zu.range(u.length);null!=e&&l.sort(e===ec?function(n,t){return o[t]-o[n]}:function(n,t){return e(u[n],u[t])});var f=[];return l.forEach(function(n){var t;f[n]={data:u[n],value:t=o[n],startAngle:a,endAngle:a+=t*c}}),f}var t=Number,e=ec,r=0,i=bo;return n.value=function(e){return arguments.length?(t=e,n):t},n.sort=function(t){return arguments.length?(e=t,n):e},n.startAngle=function(t){return arguments.length?(r=t,n):r},n.endAngle=function(t){return arguments.length?(i=t,n):i},n};var ec={};Zu.layout.stack=function(){function n(a,c){var l=a.map(function(e,r){return t.call(n,e,r)}),f=l.map(function(t){return t.map(function(t,e){return[u.call(n,t,e),o.call(n,t,e)]})}),s=e.call(n,f,c);l=Zu.permute(l,s),f=Zu.permute(f,s);var h,p,g,v=r.call(n,f,c),d=l.length,y=l[0].length;for(p=0;p<y;++p)for(i.call(n,l[0][p],g=v[p],f[0][p][1]),h=1;h<d;++h)i.call(n,l[h][p],g+=f[h-1][p][1],f[h][p][1]);return a}var t=dn,e=Mr,r=_r,i=xr,u=yr,o=mr;return n.values=function(e){return arguments.length?(t=e,n):t},n.order=function(t){return arguments.length?(e="function"==typeof t?t:rc.get(t)||Mr,n):e},n.offset=function(t){return arguments.length?(r="function"==typeof t?t:ic.get(t)||_r,n):r},n.x=function(t){return arguments.length?(u=t,n):u},n.y=function(t){return arguments.length?(o=t,n):o},n.out=function(t){return arguments.length?(i=t,n):i},n};var rc=Zu.map({"inside-out":function(n){var t,e,r=n.length,i=n.map(br),u=n.map(wr),o=Zu.range(r).sort(function(n,t){return i[n]-i[t]}),a=0,c=0,l=[],f=[];for(t=0;t<r;++t)e=o[t],a<c?(a+=u[e],l.push(e)):(c+=u[e],f.push(e));return f.reverse().concat(l)},reverse:function(n){return Zu.range(n.length).reverse()},default:Mr}),ic=Zu.map({silhouette:function(n){var t,e,r,i=n.length,u=n[0].length,o=[],a=0,c=[];for(e=0;e<u;++e){for(t=0,r=0;t<i;t++)r+=n[t][e][1];r>a&&(a=r),o.push(r)}for(e=0;e<u;++e)c[e]=(a-o[e])/2;return c},wiggle:function(n){var t,e,r,i,u,o,a,c,l,f=n.length,s=n[0],h=s.length,p=[];for(p[0]=c=l=0,e=1;e<h;++e){for(t=0,i=0;t<f;++t)i+=n[t][e][1];for(t=0,u=0,a=s[e][0]-s[e-1][0];t<f;++t){for(r=0,o=(n[t][e][1]-n[t][e-1][1])/(2*a);r<t;++r)o+=(n[r][e][1]-n[r][e-1][1])/a;u+=o*n[t][e][1]}p[e]=c-=i?u/i*a:0,c<l&&(l=c)}for(e=0;e<h;++e)p[e]-=l;return p},expand:function(n){var t,e,r,i=n.length,u=n[0].length,o=1/i,a=[];for(e=0;e<u;++e){for(t=0,r=0;t<i;t++)r+=n[t][e][1];if(r)for(t=0;t<i;t++)n[t][e][1]/=r;else for(t=0;t<i;t++)n[t][e][1]=o}for(e=0;e<u;++e)a[e]=0;return a},zero:_r});Zu.layout.histogram=function(){function n(n,u){for(var o,a,c=[],l=n.map(e,this),f=r.call(this,l,u),s=i.call(this,f,l,u),u=-1,h=l.length,p=s.length-1,g=t?1:1/h;++u<p;)o=c[u]=[],o.dx=s[u+1]-(o.x=s[u]),o.y=0;if(p>0)for(u=-1;++u<h;)a=l[u],a>=f[0]&&a<=f[1]&&(o=c[Zu.bisect(s,a,1,p)-1],o.y+=g,o.push(n[u]));return c}var t=!0,e=Number,r=Er,i=kr;return n.value=function(t){return arguments.length?(e=t,n):e},n.range=function(t){return arguments.length?(r=vn(t),n):r},n.bins=function(t){return arguments.length?(i="number"==typeof t?function(n){return Nr(n,t)}:vn(t),n):i},n.frequency=function(e){return arguments.length?(t=!!e,n):t},n},Zu.layout.tree=function(){function n(n,u){function o(n,t){var r=n.children,i=n._tree;if(r&&(u=r.length)){for(var u,a,l,f=r[0],s=f,h=-1;++h<u;)l=r[h],o(l,a),s=c(l,a,s),a=l;Pr(n);var p=.5*(f._tree.prelim+l._tree.prelim);t?(i.prelim=t._tree.prelim+e(n,t),i.mod=i.prelim-p):i.prelim=p}else t&&(i.prelim=t._tree.prelim+e(n,t))}function a(n,t){n.x=n._tree.prelim+t;var e=n.children;if(e&&(r=e.length)){var r,i=-1;for(t+=n._tree.mod;++i<r;)a(e[i],t)}}function c(n,t,r){if(t){for(var i,u=n,o=n,a=t,c=n.parent.children[0],l=u._tree.mod,f=o._tree.mod,s=a._tree.mod,h=c._tree.mod;a=Lr(a),u=Cr(u),a&&u;)c=Cr(c),o=Lr(o),o._tree.ancestor=n,i=a._tree.prelim+s-u._tree.prelim-l+e(a,u),i>0&&(Ur(jr(a,n,r),n,i),l+=i,f+=i),s+=a._tree.mod,l+=u._tree.mod,h+=c._tree.mod,f+=o._tree.mod;a&&!Lr(o)&&(o._tree.thread=a,o._tree.mod+=s-f),u&&!Cr(c)&&(c._tree.thread=u,c._tree.mod+=l-h,r=n)}return r}var l=t.call(this,n,u),f=l[0];Dr(f,function(n,t){n._tree={ancestor:n,prelim:0,mod:0,change:0,shift:0,number:t?t._tree.number+1:0}}),o(f),a(f,-f._tree.prelim);var s=Tr(f,zr),h=Tr(f,qr),p=Tr(f,Rr),g=s.x-e(s,h)/2,v=h.x+e(h,s)/2,d=p.depth||1;return Dr(f,i?function(n){n.x*=r[0],n.y=n.depth*r[1],delete n._tree}:function(n){n.x=(n.x-g)/(v-g)*r[0],n.y=n.depth/d*r[1],delete n._tree}),l}var t=Zu.layout.hierarchy().sort(null).value(null),e=Ar,r=[1,1],i=!1;return n.separation=function(t){return arguments.length?(e=t,n):e},n.size=function(t){return arguments.length?(i=null==(r=t),n):i?null:r},n.nodeSize=function(t){return arguments.length?(i=null!=(r=t),n):i?r:null},hr(n,t)},Zu.layout.pack=function(){function n(n,u){var o=e.call(this,n,u),a=o[0],c=i[0],l=i[1],f=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(a.x=a.y=0,Dr(a,function(n){n.r=+f(n.value)}),Dr(a,Ir),r){var s=r*(t?1:Math.max(2*a.r/c,2*a.r/l))/2;Dr(a,function(n){n.r+=s}),Dr(a,Ir),Dr(a,function(n){n.r-=s})}return Xr(a,c/2,l/2,t?1:1/Math.max(2*a.r/c,2*a.r/l)),o}var t,e=Zu.layout.hierarchy().sort(Hr),r=0,i=[1,1];return n.size=function(t){return arguments.length?(i=t,n):i},n.radius=function(e){return arguments.length?(t=null==e||"function"==typeof e?e:+e,n):t},n.padding=function(t){return arguments.length?(r=+t,n):r},hr(n,e)},Zu.layout.cluster=function(){function n(n,u){var o,a=t.call(this,n,u),c=a[0],l=0;Dr(c,function(n){var t=n.children;t&&t.length?(n.x=Wr(t),n.y=Br(t)):(n.x=o?l+=e(n,o):0,n.y=0,o=n)});var f=Jr(c),s=Gr(c),h=f.x-e(f,s)/2,p=s.x+e(s,f)/2;return Dr(c,i?function(n){n.x=(n.x-c.x)*r[0],n.y=(c.y-n.y)*r[1]}:function(n){n.x=(n.x-h)/(p-h)*r[0],n.y=(1-(c.y?n.y/c.y:1))*r[1]}),a}var t=Zu.layout.hierarchy().sort(null).value(null),e=Ar,r=[1,1],i=!1;return n.separation=function(t){return arguments.length?(e=t,n):e},n.size=function(t){return arguments.length?(i=null==(r=t),n):i?null:r},n.nodeSize=function(t){return arguments.length?(i=null!=(r=t),n):i?r:null},hr(n,t)},Zu.layout.treemap=function(){function n(n,t){for(var e,r,i=-1,u=n.length;++i<u;)r=(e=n[i]).value*(t<0?0:t),e.area=isNaN(r)||r<=0?0:r}function t(e){var u=e.children;if(u&&u.length){var o,a,c,l=s(e),f=[],h=u.slice(),g=1/0,v="slice"===p?l.dx:"dice"===p?l.dy:"slice-dice"===p?1&e.depth?l.dy:l.dx:Math.min(l.dx,l.dy);for(n(h,l.dx*l.dy/e.value),f.area=0;(c=h.length)>0;)f.push(o=h[c-1]),f.area+=o.area,"squarify"!==p||(a=r(f,v))<=g?(h.pop(),g=a):(f.area-=f.pop().area,i(f,v,l,!1),v=Math.min(l.dx,l.dy),f.length=f.area=0,g=1/0);f.length&&(i(f,v,l,!0),f.length=f.area=0),u.forEach(t)}}function e(t){var r=t.children;if(r&&r.length){var u,o=s(t),a=r.slice(),c=[];for(n(a,o.dx*o.dy/t.value),c.area=0;u=a.pop();)c.push(u),c.area+=u.area,null!=u.z&&(i(c,u.z?o.dx:o.dy,o,!a.length),c.length=c.area=0);r.forEach(e)}}function r(n,t){for(var e,r=n.area,i=0,u=1/0,o=-1,a=n.length;++o<a;)(e=n[o].area)&&(e<u&&(u=e),e>i&&(i=e));return r*=r,t*=t,r?Math.max(t*i*g/r,r/(t*u*g)):1/0}function i(n,t,e,r){var i,u=-1,o=n.length,a=e.x,l=e.y,f=t?c(n.area/t):0;if(t==e.dx){for((r||f>e.dy)&&(f=e.dy);++u<o;)i=n[u],i.x=a,i.y=l,i.dy=f,a+=i.dx=Math.min(e.x+e.dx-a,f?c(i.area/f):0);i.z=!0,i.dx+=e.x+e.dx-a,e.y+=f,e.dy-=f}else{for((r||f>e.dx)&&(f=e.dx);++u<o;)i=n[u],i.x=a,i.y=l,i.dx=f,l+=i.dy=Math.min(e.y+e.dy-l,f?c(i.area/f):0);i.z=!1,i.dy+=e.y+e.dy-l,e.x+=f,e.dx-=f}}function u(r){var i=o||a(r),u=i[0];return u.x=0,u.y=0,u.dx=l[0],u.dy=l[1],o&&a.revalue(u),n([u],u.dx*u.dy/u.value),(o?e:t)(u),h&&(o=i),i}var o,a=Zu.layout.hierarchy(),c=Math.round,l=[1,1],f=null,s=Kr,h=!1,p="squarify",g=.5*(1+Math.sqrt(5));return u.size=function(n){return arguments.length?(l=n,u):l},u.padding=function(n){function t(t){var e=n.call(u,t,t.depth);return null==e?Kr(t):Qr(t,"number"==typeof e?[e,e,e,e]:e)}function e(t){return Qr(t,n)}if(!arguments.length)return f;var r;return s=null==(f=n)?Kr:"function"==(r=typeof n)?t:"number"===r?(n=[n,n,n,n],e):e,u},u.round=function(n){return arguments.length?(c=n?Math.round:Number,u):c!=Number},u.sticky=function(n){return arguments.length?(h=n,o=null,u):h},u.ratio=function(n){return arguments.length?(g=n,u):g},u.mode=function(n){return arguments.length?(p=n+"",u):p},hr(u,a)},Zu.random={normal:function(n,t){var e=arguments.length;return e<2&&(t=1),e<1&&(n=0),function(){var e,r,i;do e=2*Math.random()-1,r=2*Math.random()-1,i=e*e+r*r;while(!i||i>1);return n+t*e*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var n=Zu.random.normal.apply(Zu,arguments);return function(){return Math.exp(n())}},irwinHall:function(n){return function(){for(var t=0,e=0;e<n;e++)t+=Math.random();return t/n}}},Zu.scale={};var uc={floor:dn,ceil:dn};Zu.scale.linear=function(){return oi([0,1],[0,1],qe,!1)},Zu.scale.log=function(){return hi(Zu.scale.linear().domain([0,1]),10,!0,[1,10])};var oc=Zu.format(".0e"),ac={floor:function(n){return-Math.ceil(-n)},ceil:function(n){return-Math.floor(-n)}};Zu.scale.pow=function(){return pi(Zu.scale.linear(),1,[0,1])},Zu.scale.sqrt=function(){return Zu.scale.pow().exponent(.5)},Zu.scale.ordinal=function(){return vi([],{t:"range",a:[[]]})},Zu.scale.category10=function(){return Zu.scale.ordinal().range(cc)},Zu.scale.category20=function(){return Zu.scale.ordinal().range(lc)},Zu.scale.category20b=function(){return Zu.scale.ordinal().range(fc)},Zu.scale.category20c=function(){return Zu.scale.ordinal().range(sc)};var cc=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(on),lc=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(on),fc=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(on),sc=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(on);Zu.scale.quantile=function(){return di([],[])},Zu.scale.quantize=function(){return yi(0,1,[0,1])},Zu.scale.threshold=function(){return mi([.5],[0,1])},Zu.scale.identity=function(){return xi([0,1])},Zu.svg={},Zu.svg.arc=function(){function n(){var n=t.apply(this,arguments),u=e.apply(this,arguments),o=r.apply(this,arguments)+hc,a=i.apply(this,arguments)+hc,c=(a<o&&(c=o,o=a,a=c),a-o),l=c<_o?"0":"1",f=Math.cos(o),s=Math.sin(o),h=Math.cos(a),p=Math.sin(a);return c>=pc?n?"M0,"+u+"A"+u+","+u+" 0 1,1 0,"+-u+"A"+u+","+u+" 0 1,1 0,"+u+"M0,"+n+"A"+n+","+n+" 0 1,0 0,"+-n+"A"+n+","+n+" 0 1,0 0,"+n+"Z":"M0,"+u+"A"+u+","+u+" 0 1,1 0,"+-u+"A"+u+","+u+" 0 1,1 0,"+u+"Z":n?"M"+u*f+","+u*s+"A"+u+","+u+" 0 "+l+",1 "+u*h+","+u*p+"L"+n*h+","+n*p+"A"+n+","+n+" 0 "+l+",0 "+n*f+","+n*s+"Z":"M"+u*f+","+u*s+"A"+u+","+u+" 0 "+l+",1 "+u*h+","+u*p+"L0,0Z"}var t=Mi,e=_i,r=bi,i=wi;return n.innerRadius=function(e){return arguments.length?(t=vn(e),n):t},n.outerRadius=function(t){return arguments.length?(e=vn(t),n):e},n.startAngle=function(t){return arguments.length?(r=vn(t),n):r},n.endAngle=function(t){return arguments.length?(i=vn(t),n):i},n.centroid=function(){var n=(t.apply(this,arguments)+e.apply(this,arguments))/2,u=(r.apply(this,arguments)+i.apply(this,arguments))/2+hc;return[Math.cos(u)*n,Math.sin(u)*n]},n};var hc=-wo,pc=bo-So;Zu.svg.line=function(){return Si(dn)};var gc=Zu.map({linear:ki,"linear-closed":Ni,step:Ei,"step-before":Ai,"step-after":Ci,basis:Di,"basis-open":Pi,"basis-closed":Ui,bundle:ji,cardinal:qi,"cardinal-open":Li,"cardinal-closed":Ti,monotone:Zi});gc.forEach(function(n,t){t.key=n,t.closed=/-closed$/.test(n)});var vc=[0,2/3,1/3,0],dc=[0,1/3,2/3,0],yc=[0,1/6,2/3,1/6];Zu.svg.line.radial=function(){var n=Si(Vi);return n.radius=n.x,delete n.x,n.angle=n.y,delete n.y,n},Ai.reverse=Ci,Ci.reverse=Ai,Zu.svg.area=function(){return Xi(dn)},Zu.svg.area.radial=function(){var n=Xi(Vi);return n.radius=n.x,delete n.x,n.innerRadius=n.x0,delete n.x0,n.outerRadius=n.x1,delete n.x1,n.angle=n.y,delete n.y,n.startAngle=n.y0,delete n.y0,n.endAngle=n.y1,delete n.y1,n},Zu.svg.chord=function(){function n(n,a){var c=t(this,u,n,a),l=t(this,o,n,a);return"M"+c.p0+r(c.r,c.p1,c.a1-c.a0)+(e(c,l)?i(c.r,c.p1,c.r,c.p0):i(c.r,c.p1,l.r,l.p0)+r(l.r,l.p1,l.a1-l.a0)+i(l.r,l.p1,c.r,c.p0))+"Z"}function t(n,t,e,r){var i=t.call(n,e,r),u=a.call(n,i,r),o=c.call(n,i,r)+hc,f=l.call(n,i,r)+hc;return{r:u,a0:o,a1:f,p0:[u*Math.cos(o),u*Math.sin(o)],p1:[u*Math.cos(f),u*Math.sin(f)]}}function e(n,t){return n.a0==t.a0&&n.a1==t.a1}function r(n,t,e){return"A"+n+","+n+" 0 "+ +(e>_o)+",1 "+t}function i(n,t,e,r){return"Q 0,0 "+r}var u=Rt,o=Dt,a=$i,c=bi,l=wi;return n.radius=function(t){return arguments.length?(a=vn(t),n):a},n.source=function(t){return arguments.length?(u=vn(t),n):u},n.target=function(t){return arguments.length?(o=vn(t),n):o},n.startAngle=function(t){return arguments.length?(c=vn(t),n):c},n.endAngle=function(t){return arguments.length?(l=vn(t),n):l},n},Zu.svg.diagonal=function(){function n(n,i){var u=t.call(this,n,i),o=e.call(this,n,i),a=(u.y+o.y)/2,c=[u,{x:u.x,y:a},{x:o.x,y:a},o];return c=c.map(r),"M"+c[0]+"C"+c[1]+" "+c[2]+" "+c[3]}var t=Rt,e=Dt,r=Bi;return n.source=function(e){return arguments.length?(t=vn(e),n):t},n.target=function(t){return arguments.length?(e=vn(t),n):e},n.projection=function(t){return arguments.length?(r=t,n):r},n},Zu.svg.diagonal.radial=function(){var n=Zu.svg.diagonal(),t=Bi,e=n.projection;return n.projection=function(n){return arguments.length?e(Wi(t=n)):t},n},Zu.svg.symbol=function(){function n(n,r){return(mc.get(t.call(this,n,r))||Ki)(e.call(this,n,r))}var t=Gi,e=Ji;return n.type=function(e){return arguments.length?(t=vn(e),n):t},n.size=function(t){return arguments.length?(e=vn(t),n):e},n};var mc=Zu.map({circle:Ki,cross:function(n){var t=Math.sqrt(n/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(n){var t=Math.sqrt(n/(2*bc)),e=t*bc;return"M0,"+-t+"L"+e+",0 0,"+t+" "+-e+",0Z"},square:function(n){var t=Math.sqrt(n)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(n){var t=Math.sqrt(n/_c),e=t*_c/2;return"M0,"+e+"L"+t+","+-e+" "+-t+","+-e+"Z"},"triangle-up":function(n){var t=Math.sqrt(n/_c),e=t*_c/2;return"M0,"+-e+"L"+t+","+e+" "+-t+","+e+"Z"}});Zu.svg.symbolTypes=mc.keys();var xc,Mc,_c=Math.sqrt(3),bc=Math.tan(30*No),wc=[],Sc=0;wc.call=ho.call,wc.empty=ho.empty,wc.node=ho.node,wc.size=ho.size,Zu.transition=function(n){return arguments.length?xc?n.transition():n:vo.transition()},Zu.transition.prototype=wc,wc.select=function(n){var t,e,r,i=this.id,u=[];n=v(n);for(var o=-1,a=this.length;++o<a;){u.push(t=[]);for(var c=this[o],l=-1,f=c.length;++l<f;)(r=c[l])&&(e=n.call(r,r.__data__,l,o))?("__data__"in r&&(e.__data__=r.__data__),
eu(e,l,i,r.__transition__[i]),t.push(e)):t.push(null)}return Qi(u,i)},wc.selectAll=function(n){var t,e,r,i,u,o=this.id,a=[];n=d(n);for(var c=-1,l=this.length;++c<l;)for(var f=this[c],s=-1,h=f.length;++s<h;)if(r=f[s]){u=r.__transition__[o],e=n.call(r,r.__data__,s,c),a.push(t=[]);for(var p=-1,g=e.length;++p<g;)(i=e[p])&&eu(i,p,o,u),t.push(i)}return Qi(a,o)},wc.filter=function(n){var t,e,r,i=[];"function"!=typeof n&&(n=N(n));for(var u=0,o=this.length;u<o;u++){i.push(t=[]);for(var e=this[u],a=0,c=e.length;a<c;a++)(r=e[a])&&n.call(r,r.__data__,a)&&t.push(r)}return Qi(i,this.id)},wc.tween=function(n,t){var e=this.id;return arguments.length<2?this.node().__transition__[e].tween.get(n):A(this,null==t?function(t){t.__transition__[e].tween.remove(n)}:function(r){r.__transition__[e].tween.set(n,t)})},wc.attr=function(n,t){function e(){this.removeAttribute(a)}function r(){this.removeAttributeNS(a.space,a.local)}function i(n){return null==n?e:(n+="",function(){var t,e=this.getAttribute(a);return e!==n&&(t=o(e,n),function(n){this.setAttribute(a,t(n))})})}function u(n){return null==n?r:(n+="",function(){var t,e=this.getAttributeNS(a.space,a.local);return e!==n&&(t=o(e,n),function(n){this.setAttributeNS(a.space,a.local,t(n))})})}if(arguments.length<2){for(t in n)this.attr(t,n[t]);return this}var o="transform"==n?tr:qe,a=Zu.ns.qualify(n);return nu(this,"attr."+n,t,a.local?u:i)},wc.attrTween=function(n,t){function e(n,e){var r=t.call(this,n,e,this.getAttribute(i));return r&&function(n){this.setAttribute(i,r(n))}}function r(n,e){var r=t.call(this,n,e,this.getAttributeNS(i.space,i.local));return r&&function(n){this.setAttributeNS(i.space,i.local,r(n))}}var i=Zu.ns.qualify(n);return this.tween("attr."+n,i.local?r:e)},wc.style=function(n,t,e){function r(){this.style.removeProperty(n)}function i(t){return null==t?r:(t+="",function(){var r,i=Wu.getComputedStyle(this,null).getPropertyValue(n);return i!==t&&(r=qe(i,t),function(t){this.style.setProperty(n,r(t),e)})})}var u=arguments.length;if(u<3){if("string"!=typeof n){u<2&&(t="");for(e in n)this.style(e,n[e],t);return this}e=""}return nu(this,"style."+n,t,i)},wc.styleTween=function(n,t,e){function r(r,i){var u=t.call(this,r,i,Wu.getComputedStyle(this,null).getPropertyValue(n));return u&&function(t){this.style.setProperty(n,u(t),e)}}return arguments.length<3&&(e=""),this.tween("style."+n,r)},wc.text=function(n){return nu(this,"text",n,tu)},wc.remove=function(){return this.each("end.transition",function(){var n;this.__transition__.count<2&&(n=this.parentNode)&&n.removeChild(this)})},wc.ease=function(n){var t=this.id;return arguments.length<1?this.node().__transition__[t].ease:("function"!=typeof n&&(n=Zu.ease.apply(Zu,arguments)),A(this,function(e){e.__transition__[t].ease=n}))},wc.delay=function(n){var t=this.id;return A(this,"function"==typeof n?function(e,r,i){e.__transition__[t].delay=+n.call(e,e.__data__,r,i)}:(n=+n,function(e){e.__transition__[t].delay=n}))},wc.duration=function(n){var t=this.id;return A(this,"function"==typeof n?function(e,r,i){e.__transition__[t].duration=Math.max(1,n.call(e,e.__data__,r,i))}:(n=Math.max(1,n),function(e){e.__transition__[t].duration=n}))},wc.each=function(n,t){var e=this.id;if(arguments.length<2){var r=Mc,i=xc;xc=e,A(this,function(t,r,i){Mc=t.__transition__[e],n.call(t,t.__data__,r,i)}),Mc=r,xc=i}else A(this,function(r){var i=r.__transition__[e];(i.event||(i.event=Zu.dispatch("start","end"))).on(n,t)});return this},wc.transition=function(){for(var n,t,e,r,i=this.id,u=++Sc,o=[],a=0,c=this.length;a<c;a++){o.push(n=[]);for(var t=this[a],l=0,f=t.length;l<f;l++)(e=t[l])&&(r=Object.create(e.__transition__[i]),r.delay+=r.duration,eu(e,l,u,r)),n.push(e)}return Qi(o,u)},Zu.svg.axis=function(){function n(n){n.each(function(){var n,l=Zu.select(this),f=this.__chart__||e,s=this.__chart__=e.copy(),h=null==c?s.ticks?s.ticks.apply(s,a):s.domain():c,p=null==t?s.tickFormat?s.tickFormat.apply(s,a):dn:t,g=l.selectAll(".tick").data(h,s),v=g.enter().insert("g",".domain").attr("class","tick").style("opacity",So),d=Zu.transition(g.exit()).style("opacity",So).remove(),y=Zu.transition(g).style("opacity",1),m=ti(s),x=l.selectAll(".domain").data([0]),M=(x.enter().append("path").attr("class","domain"),Zu.transition(x));v.append("line"),v.append("text");var _=v.select("line"),b=y.select("line"),w=g.select("text").text(p),S=v.select("text"),k=y.select("text");switch(r){case"bottom":n=ru,_.attr("y2",i),S.attr("y",Math.max(i,0)+o),b.attr("x2",0).attr("y2",i),k.attr("x",0).attr("y",Math.max(i,0)+o),w.attr("dy",".71em").style("text-anchor","middle"),M.attr("d","M"+m[0]+","+u+"V0H"+m[1]+"V"+u);break;case"top":n=ru,_.attr("y2",-i),S.attr("y",-(Math.max(i,0)+o)),b.attr("x2",0).attr("y2",-i),k.attr("x",0).attr("y",-(Math.max(i,0)+o)),w.attr("dy","0em").style("text-anchor","middle"),M.attr("d","M"+m[0]+","+-u+"V0H"+m[1]+"V"+-u);break;case"left":n=iu,_.attr("x2",-i),S.attr("x",-(Math.max(i,0)+o)),b.attr("x2",-i).attr("y2",0),k.attr("x",-(Math.max(i,0)+o)).attr("y",0),w.attr("dy",".32em").style("text-anchor","end"),M.attr("d","M"+-u+","+m[0]+"H0V"+m[1]+"H"+-u);break;case"right":n=iu,_.attr("x2",i),S.attr("x",Math.max(i,0)+o),b.attr("x2",i).attr("y2",0),k.attr("x",Math.max(i,0)+o).attr("y",0),w.attr("dy",".32em").style("text-anchor","start"),M.attr("d","M"+u+","+m[0]+"H0V"+m[1]+"H"+u)}if(s.rangeBand){var N=s.rangeBand()/2,E=function(n){return s(n)+N};v.call(n,E),y.call(n,E)}else v.call(n,f),y.call(n,s),d.call(n,s)})}var t,e=Zu.scale.linear(),r=kc,i=6,u=6,o=3,a=[10],c=null;return n.scale=function(t){return arguments.length?(e=t,n):e},n.orient=function(t){return arguments.length?(r=t in Nc?t+"":kc,n):r},n.ticks=function(){return arguments.length?(a=arguments,n):a},n.tickValues=function(t){return arguments.length?(c=t,n):c},n.tickFormat=function(e){return arguments.length?(t=e,n):t},n.tickSize=function(t){var e=arguments.length;return e?(i=+t,u=+arguments[e-1],n):i},n.innerTickSize=function(t){return arguments.length?(i=+t,n):i},n.outerTickSize=function(t){return arguments.length?(u=+t,n):u},n.tickPadding=function(t){return arguments.length?(o=+t,n):o},n.tickSubdivide=function(){return arguments.length&&n},n};var kc="bottom",Nc={top:1,right:1,bottom:1,left:1};Zu.svg.brush=function(){function n(u){u.each(function(){var u=Zu.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",i).on("touchstart.brush",i),o=u.selectAll(".background").data([0]);o.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),u.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var a=u.selectAll(".resize").data(d,dn);a.exit().remove(),a.enter().append("g").attr("class",function(n){return"resize "+n}).style("cursor",function(n){return Ec[n]}).append("rect").attr("x",function(n){return/[ew]$/.test(n)?-3:null}).attr("y",function(n){return/^[ns]/.test(n)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),a.style("display",n.empty()?"none":null);var f,s=Zu.transition(u),h=Zu.transition(o);c&&(f=ti(c),h.attr("x",f[0]).attr("width",f[1]-f[0]),e(s)),l&&(f=ti(l),h.attr("y",f[0]).attr("height",f[1]-f[0]),r(s)),t(s)})}function t(n){n.selectAll(".resize").attr("transform",function(n){return"translate("+f[+/e$/.test(n)]+","+h[+/^s/.test(n)]+")"})}function e(n){n.select(".extent").attr("x",f[0]),n.selectAll(".extent,.n>rect,.s>rect").attr("width",f[1]-f[0])}function r(n){n.select(".extent").attr("y",h[0]),n.selectAll(".extent,.e>rect,.w>rect").attr("height",h[1]-h[0])}function i(){function i(){32==Zu.event.keyCode&&(A||(x=null,L[0]-=f[1],L[1]-=h[1],A=2),s())}function p(){32==Zu.event.keyCode&&2==A&&(L[0]+=f[1],L[1]+=h[1],A=0,s())}function d(){var n=Zu.mouse(_),i=!1;M&&(n[0]+=M[0],n[1]+=M[1]),A||(Zu.event.altKey?(x||(x=[(f[0]+f[1])/2,(h[0]+h[1])/2]),L[0]=f[+(n[0]<x[0])],L[1]=h[+(n[1]<x[1])]):x=null),N&&y(n,c,0)&&(e(S),i=!0),E&&y(n,l,1)&&(r(S),i=!0),i&&(t(S),w({type:"brush",mode:A?"move":"resize"}))}function y(n,t,e){var r,i,a=ti(t),c=a[0],l=a[1],s=L[e],p=e?h:f,d=p[1]-p[0];if(A&&(c-=s,l-=d+s),r=(e?v:g)?Math.max(c,Math.min(l,n[e])):n[e],A?i=(r+=s)+d:(x&&(s=Math.max(c,Math.min(l,2*x[e]-r))),s<r?(i=r,r=s):i=s),p[0]!=r||p[1]!=i)return e?o=null:u=null,p[0]=r,p[1]=i,!0}function m(){d(),S.style("pointer-events","all").selectAll(".resize").style("display",n.empty()?"none":null),Zu.select("body").style("cursor",null),T.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),C(),w({type:"brushend"})}var x,M,_=this,b=Zu.select(Zu.event.target),w=a.of(_,arguments),S=Zu.select(_),k=b.datum(),N=!/^(n|s)$/.test(k)&&c,E=!/^(e|w)$/.test(k)&&l,A=b.classed("extent"),C=D(),L=Zu.mouse(_),T=Zu.select(Wu).on("keydown.brush",i).on("keyup.brush",p);if(Zu.event.changedTouches?T.on("touchmove.brush",d).on("touchend.brush",m):T.on("mousemove.brush",d).on("mouseup.brush",m),S.interrupt().selectAll("*").interrupt(),A)L[0]=f[0]-L[0],L[1]=h[0]-L[1];else if(k){var q=+/w$/.test(k),z=+/^n/.test(k);M=[f[1-q]-L[0],h[1-z]-L[1]],L[0]=f[q],L[1]=h[z]}else Zu.event.altKey&&(x=L.slice());S.style("pointer-events","none").selectAll(".resize").style("display",null),Zu.select("body").style("cursor",b.style("cursor")),w({type:"brushstart"}),d()}var u,o,a=p(n,"brushstart","brush","brushend"),c=null,l=null,f=[0,0],h=[0,0],g=!0,v=!0,d=Ac[0];return n.event=function(n){n.each(function(){var n=a.of(this,arguments),t={x:f,y:h,i:u,j:o},e=this.__chart__||t;this.__chart__=t,xc?Zu.select(this).transition().each("start.brush",function(){u=e.i,o=e.j,f=e.x,h=e.y,n({type:"brushstart"})}).tween("brush:brush",function(){var e=ze(f,t.x),r=ze(h,t.y);return u=o=null,function(i){f=t.x=e(i),h=t.y=r(i),n({type:"brush",mode:"resize"})}}).each("end.brush",function(){u=t.i,o=t.j,n({type:"brush",mode:"resize"}),n({type:"brushend"})}):(n({type:"brushstart"}),n({type:"brush",mode:"resize"}),n({type:"brushend"}))})},n.x=function(t){return arguments.length?(c=t,d=Ac[!c<<1|!l],n):c},n.y=function(t){return arguments.length?(l=t,d=Ac[!c<<1|!l],n):l},n.clamp=function(t){return arguments.length?(c&&l?(g=!!t[0],v=!!t[1]):c?g=!!t:l&&(v=!!t),n):c&&l?[g,v]:c?g:l?v:null},n.extent=function(t){var e,r,i,a,s;return arguments.length?(c&&(e=t[0],r=t[1],l&&(e=e[0],r=r[0]),u=[e,r],c.invert&&(e=c(e),r=c(r)),r<e&&(s=e,e=r,r=s),e==f[0]&&r==f[1]||(f=[e,r])),l&&(i=t[0],a=t[1],c&&(i=i[1],a=a[1]),o=[i,a],l.invert&&(i=l(i),a=l(a)),a<i&&(s=i,i=a,a=s),i==h[0]&&a==h[1]||(h=[i,a])),n):(c&&(u?(e=u[0],r=u[1]):(e=f[0],r=f[1],c.invert&&(e=c.invert(e),r=c.invert(r)),r<e&&(s=e,e=r,r=s))),l&&(o?(i=o[0],a=o[1]):(i=h[0],a=h[1],l.invert&&(i=l.invert(i),a=l.invert(a)),a<i&&(s=i,i=a,a=s))),c&&l?[[e,i],[r,a]]:c?[e,r]:l&&[i,a])},n.clear=function(){return n.empty()||(f=[0,0],h=[0,0],u=o=null),n},n.empty=function(){return!!c&&f[0]==f[1]||!!l&&h[0]==h[1]},Zu.rebind(n,a,"on")};var Ec={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ac=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Cc=Zu.time={},Lc=Date,Tc=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];uu.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){qc.setUTCDate.apply(this._,arguments)},setDay:function(){qc.setUTCDay.apply(this._,arguments)},setFullYear:function(){qc.setUTCFullYear.apply(this._,arguments)},setHours:function(){qc.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){qc.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){qc.setUTCMinutes.apply(this._,arguments)},setMonth:function(){qc.setUTCMonth.apply(this._,arguments)},setSeconds:function(){qc.setUTCSeconds.apply(this._,arguments)},setTime:function(){qc.setTime.apply(this._,arguments)}};var qc=Date.prototype,zc="%a %b %e %X %Y",Rc="%m/%d/%Y",Dc="%H:%M:%S",Pc=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Uc=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],jc=["January","February","March","April","May","June","July","August","September","October","November","December"],Hc=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];Cc.year=ou(function(n){return n=Cc.day(n),n.setMonth(0,1),n},function(n,t){n.setFullYear(n.getFullYear()+t)},function(n){return n.getFullYear()}),Cc.years=Cc.year.range,Cc.years.utc=Cc.year.utc.range,Cc.day=ou(function(n){var t=new Lc(2e3,0);return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),t},function(n,t){n.setDate(n.getDate()+t)},function(n){return n.getDate()-1}),Cc.days=Cc.day.range,Cc.days.utc=Cc.day.utc.range,Cc.dayOfYear=function(n){var t=Cc.year(n);return Math.floor((n-t-6e4*(n.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},Tc.forEach(function(n,t){n=n.toLowerCase(),t=7-t;var e=Cc[n]=ou(function(n){return(n=Cc.day(n)).setDate(n.getDate()-(n.getDay()+t)%7),n},function(n,t){n.setDate(n.getDate()+7*Math.floor(t))},function(n){var e=Cc.year(n).getDay();return Math.floor((Cc.dayOfYear(n)+(e+t)%7)/7)-(e!==t)});Cc[n+"s"]=e.range,Cc[n+"s"].utc=e.utc.range,Cc[n+"OfYear"]=function(n){var e=Cc.year(n).getDay();return Math.floor((Cc.dayOfYear(n)+(e+t)%7)/7)}}),Cc.week=Cc.sunday,Cc.weeks=Cc.sunday.range,Cc.weeks.utc=Cc.sunday.utc.range,Cc.weekOfYear=Cc.sundayOfYear,Cc.format=cu;var Fc=fu(Pc),Oc=su(Pc),Yc=fu(Uc),Ic=su(Uc),Zc=fu(jc),Vc=su(jc),Xc=fu(Hc),$c=su(Hc),Bc=/^%/,Wc={"-":"",_:" ",0:"0"},Jc={a:function(n){return Uc[n.getDay()]},A:function(n){return Pc[n.getDay()]},b:function(n){return Hc[n.getMonth()]},B:function(n){return jc[n.getMonth()]},c:cu(zc),d:function(n,t){return hu(n.getDate(),t,2)},e:function(n,t){return hu(n.getDate(),t,2)},H:function(n,t){return hu(n.getHours(),t,2)},I:function(n,t){return hu(n.getHours()%12||12,t,2)},j:function(n,t){return hu(1+Cc.dayOfYear(n),t,3)},L:function(n,t){return hu(n.getMilliseconds(),t,3)},m:function(n,t){return hu(n.getMonth()+1,t,2)},M:function(n,t){return hu(n.getMinutes(),t,2)},p:function(n){return n.getHours()>=12?"PM":"AM"},S:function(n,t){return hu(n.getSeconds(),t,2)},U:function(n,t){return hu(Cc.sundayOfYear(n),t,2)},w:function(n){return n.getDay()},W:function(n,t){return hu(Cc.mondayOfYear(n),t,2)},x:cu(Rc),X:cu(Dc),y:function(n,t){return hu(n.getFullYear()%100,t,2)},Y:function(n,t){return hu(n.getFullYear()%1e4,t,4)},Z:Du,"%":function(){return"%"}},Gc={a:pu,A:gu,b:mu,B:xu,c:Mu,d:Au,e:Au,H:Lu,I:Lu,j:Cu,L:zu,m:Eu,M:Tu,p:Ru,S:qu,U:du,w:vu,W:yu,x:_u,X:bu,y:Su,Y:wu,Z:ku,"%":Pu},Kc=/^\s*\d+/,Qc=Zu.map({am:0,pm:1});cu.utc=Uu;var nl=Uu("%Y-%m-%dT%H:%M:%S.%LZ");cu.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?ju:nl,ju.parse=function(n){var t=new Date(n);return isNaN(t)?null:t},ju.toString=nl.toString,Cc.second=ou(function(n){return new Lc(1e3*Math.floor(n/1e3))},function(n,t){n.setTime(n.getTime()+1e3*Math.floor(t))},function(n){return n.getSeconds()}),Cc.seconds=Cc.second.range,Cc.seconds.utc=Cc.second.utc.range,Cc.minute=ou(function(n){return new Lc(6e4*Math.floor(n/6e4))},function(n,t){n.setTime(n.getTime()+6e4*Math.floor(t))},function(n){return n.getMinutes()}),Cc.minutes=Cc.minute.range,Cc.minutes.utc=Cc.minute.utc.range,Cc.hour=ou(function(n){var t=n.getTimezoneOffset()/60;return new Lc(36e5*(Math.floor(n/36e5-t)+t))},function(n,t){n.setTime(n.getTime()+36e5*Math.floor(t))},function(n){return n.getHours()}),Cc.hours=Cc.hour.range,Cc.hours.utc=Cc.hour.utc.range,Cc.month=ou(function(n){return n=Cc.day(n),n.setDate(1),n},function(n,t){n.setMonth(n.getMonth()+t)},function(n){return n.getMonth()}),Cc.months=Cc.month.range,Cc.months.utc=Cc.month.utc.range;var tl=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],el=[[Cc.second,1],[Cc.second,5],[Cc.second,15],[Cc.second,30],[Cc.minute,1],[Cc.minute,5],[Cc.minute,15],[Cc.minute,30],[Cc.hour,1],[Cc.hour,3],[Cc.hour,6],[Cc.hour,12],[Cc.day,1],[Cc.day,2],[Cc.week,1],[Cc.month,1],[Cc.month,3],[Cc.year,1]],rl=[[cu("%Y"),Vn],[cu("%B"),function(n){return n.getMonth()}],[cu("%b %d"),function(n){return 1!=n.getDate()}],[cu("%a %d"),function(n){return n.getDay()&&1!=n.getDate()}],[cu("%I %p"),function(n){return n.getHours()}],[cu("%I:%M"),function(n){return n.getMinutes()}],[cu(":%S"),function(n){return n.getSeconds()}],[cu(".%L"),function(n){return n.getMilliseconds()}]],il=Ou(rl);el.year=Cc.year,Cc.scale=function(){return Hu(Zu.scale.linear(),el,il)};var ul={range:function(n,t,e){return Zu.range(+n,+t,e).map(Fu)}},ol=el.map(function(n){return[n[0].utc,n[1]]}),al=[[Uu("%Y"),Vn],[Uu("%B"),function(n){return n.getUTCMonth()}],[Uu("%b %d"),function(n){return 1!=n.getUTCDate()}],[Uu("%a %d"),function(n){return n.getUTCDay()&&1!=n.getUTCDate()}],[Uu("%I %p"),function(n){return n.getUTCHours()}],[Uu("%I:%M"),function(n){return n.getUTCMinutes()}],[Uu(":%S"),function(n){return n.getUTCSeconds()}],[Uu(".%L"),function(n){return n.getUTCMilliseconds()}]],cl=Ou(al);return ol.year=Cc.year.utc,Cc.scale.utc=function(){return Hu(Zu.scale.linear(),ol,cl)},Zu.text=yn(function(n){return n.responseText}),Zu.json=function(n,t){return mn(n,"application/json",Yu,t)},Zu.html=function(n,t){return mn(n,"text/html",Iu,t)},Zu.xml=yn(function(n){return n.responseXML}),Zu}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/d3-amd.js' */
define("jira-agile/d3",d3);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/figue.js' */
/*!
 * Figue v1.0.1
 *
 * Copyright 2010, Jean-Yves Delort
 * Licensed under the MIT license.
 *
 */
var figue=function(){function r(r,t){for(var n=r.length,e=0,a=0;a<n;a++)e+=Math.pow(r[a]-t[a],2);return e=Math.sqrt(e)}function t(r,t){for(var n=r.length,e=0,a=0;a<n;a++)e+=Math.abs(r[a]-t[a]);return e}function n(r,t){for(var n=r.length,e=0,a=0;a<n;a++)e=Math.max(e,Math.abs(r[a]-t[a]));return e}function e(r,t){for(var n=r.length,e=new Array(n),a=0;a<n;a++)e[a]=r[a]+t[a];return e}function a(r,t){for(var n=t.length,e=new Array(n),a=0;a<n;a++)e[a]=r*t[a];return e}function i(r,t){for(var n="",e=0;e<t;e++)n+=r;return n}function h(r,t,n,e){for(var a=new Array(t.length),i=r+n,h=0;h<t.length;h++)a[h]=(r*t[h]+n*e[h])/i;return a}function o(r,t){var n=t-r.length;if(!(n<0)){var e=Math.floor(n/2);return i(" ",e)+r+i(" ",n-e)}}function f(r,t,n){var e=t-r.length;if(!(e<0))return i(" ",n)+r+i(" ",t-(r.length+n))}function l(r){for(var t=new Array(r.length),n=Math.pow(10,figue.PRINT_VECTOR_VALUE_PRECISION),e=0;e<r.length;e++)t[e]=Math.round(r[e]*n)/n;return t.join(",")}function u(r){var t=Math.pow(10,figue.PRINT_VECTOR_VALUE_PRECISION);return String(Math.round(r*t)/t)}function g(r,t,n,e,a,h){var s=new Array,A=l(r.centroid);if(r.isLeaf()){var v=String(r.label),E=1;a&&(E=Math.max(A.length,E)),e&&(E=Math.max(v.length,E)),s.push(o("|",E)),a&&s.push(o(A,E)),e&&s.push(o(v,E))}else{var M=u(r.dist),N=g(r.left,t,n,e,a,h),c=g(r.right,t,n,e,a,h),I=N[0].indexOf("|"),d=c[0].indexOf("|"),E=t+c[0].length+N[0].length;a&&(E=Math.max(A.length,E)),h&&(E=Math.max(M.length,E));var _=I+Math.floor((N[0].length-I+t+(1+d))/2);s.push(f("|",E,_)),a&&s.push(f(A,E,_-Math.floor(A.length/2))),h&&s.push(f(M,E,_-Math.floor(M.length/2)));var p=t+(N[0].length-I)+d+1,w=i("_",p);if(s.push(f(w,E,I)),n&&N.length!=c.length){var T,m;N.length>c.length?(m=N,T=c):(m=c,T=N),header=T[0];for(var y=m.length-T.length,L=0;L<y;L++)T.splice(0,0,header)}for(var L=0;L<Math.max(N.length,c.length);L++){var S="";S=L<N.length?N[L]:i(" ",N[0].length);var x="";x=L<c.length?c[L]:i(" ",c[0].length),s.push(S+i(" ",t)+x);S+i(" ",t)+x}}return s}function s(e,a,i,o){var f,l,u,g,s,A,v,M,N,c,I=a.length,d=new Array(I),_=new Array(I),p=new figue.Matrix(I,I),w=p.mtx,T=new Array(I);for(i==figue.EUCLIDIAN_DISTANCE?i=r:i==figue.MANHATTAN_DISTANCE?i=t:i==figue.MAX_DISTANCE&&(i=n),A=0;A<I;A++)for(d[A]=0,v=0;v<I;v++)A==v?w[A][v]=1/0:w[A][v]=i(a[A],a[v]),w[A][d[A]]>w[A][v]&&(d[A]=v);for(A=0;A<I;A++)T[A]=[],T[A][0]=new E(e[A],null,null,0,a[A]),_[A]=1;for(M=0;M<I-1;M++){for(l=0,A=0;A<I;A++)w[A][d[A]]<w[l][d[l]]&&(l=A);for(u=d[l],g=T[l][0],s=T[u][0],c=h(g.size,g.centroid,s.size,s.centroid),f=new E((-1),g,s,w[l][u],c),T[l].splice(0,0,f),_[l]+=_[u],v=0;v<I;v++)if(o==figue.SINGLE_LINKAGE)w[l][v]>w[u][v]&&(w[v][l]=w[l][v]=w[u][v]);else if(o==figue.COMPLETE_LINKAGE)w[l][v]<w[u][v]&&(w[v][l]=w[l][v]=w[u][v]);else if(o==figue.AVERAGE_LINKAGE){var m=(_[l]*w[l][v]+_[u]*w[u][v])/(_[l]+_[v]);w[v][l]=w[l][v]=m}for(w[l][l]=1/0,A=0;A<I;A++)w[A][u]=w[u][A]=1/0;for(v=0;v<I;v++)d[v]==u&&(d[v]=l),w[l][v]<w[l][d[l]]&&(d[l]=v);N=f}return N}function A(t,n){var i=n.length;if(t>=i)return null;for(var h=new Array(t),o=new Object,f=0;f<t;){var l=Math.floor(Math.random()*i);l in o||(o[l]=1,h[f]=n[l],f++)}for(var u=new Array(i),g=new Array(t),s=!0,A=0;s;){for(var v=0;v<t;v++)g[v]=0;for(var E=0;E<i;E++){for(var N,c=n[E],I=Number.MAX_VALUE,v=0;v<t;v++)dist=r(h[v],c),dist<I&&(I=dist,N=v);g[N]++,u[E]=N}for(var d=new Array(t),v=0;v<t;v++)d[v]=null;for(var E=0;E<i;E++)f=u[E],null==d[f]?d[f]=n[E]:d[f]=e(d[f],n[E]);for(var v=0;v<t;v++)d[v]=a(1/g[v],d[v]);s=!1;for(var v=0;v<t;v++)if(!M.call(d[v],h[v])){s=!0;break}h=d,A++,A>figue.KMEANS_MAX_ITERATIONS&&(s=!1)}return{centroids:h,assignments:u}}function v(r,t){this.rows=r,this.cols=t,this.mtx=new Array(r);for(var n=0;n<r;n++){for(var e=new Array(t),a=0;a<t;a++)e[a]=0;this.mtx[n]=e}}function E(r,t,n,e,a){this.label=r,this.left=t,this.right=n,this.dist=e,this.centroid=a,null==t&&null==n?(this.size=1,this.depth=0):(this.size=t.size+n.size,this.depth=1+Math.max(t.depth,n.depth))}function M(r){if(this.length!=r.length)return!1;for(var t=0;t<r.length;t++){if(this[t]instanceof Array&&!M.call(this[t],r[t]))return!1;if(this[t]!==r[t])return!1}return!0}return{SINGLE_LINKAGE:0,COMPLETE_LINKAGE:1,AVERAGE_LINKAGE:2,EUCLIDIAN_DISTANCE:0,MANHATTAN_DISTANCE:1,MAX_DISTANCE:2,PRINT_VECTOR_VALUE_PRECISION:2,KMEANS_MAX_ITERATIONS:10,Matrix:v,Node:E,generateDendogram:g,agglomerate:s,kmeans:A}}();figue.Matrix.prototype.toString=function(){for(var r=[],t=0;t<this.rows;t++)r.push(this.mtx[t].join("\t"));return r.join("\n")},figue.Node.prototype.isLeaf=function(){return null==this.left&&null==this.right},figue.Node.prototype.buildDendogram=function(r,t,n,e,a){var i=figue.generateDendogram(this,r,t,n,e,a);return i.join("\n")};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/cluster.js' */
var clusterVectors=function(e,t,i,n,r){function s(e,t){e&&(e.dist&&e.dist>i?(s(e.left,t),s(e.right,t)):e.left||e.right?t.push({issues:u(e),point:[n.invert(e.centroid[0]),r.invert(e.centroid[1])],size:e.size,distance:e.dist,cluster:!0}):t.push({issue:e.label,point:[n.invert(e.centroid[0]),r.invert(e.centroid[1])],size:e.size,distance:e.dist,cluster:!1}))}function u(e){return e?1===e.size&&e.label?[e.label]:u(e.left).concat(u(e.right)):[]}var c=_.map(e,function(e){return[n(e[0]),r(e[1])]});if(0===e.length)return[];if(1===e.length)return[{issue:t[0],point:e[0],size:1,distance:0,cluster:!1}];var l=figue.agglomerate(t,c,figue.MAX_DISTANCE,figue.COMPLETE_LINKAGE),o=[];return s(l,o),o};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/core.js' */
var c3={};c3.defaults={x:function(n){return n[0]},y:function(n){return n[1]}},c3.checkIsNumber=function(n){if("number"!=typeof n)throw new Error("Expected a number, but received: "+n);return n},c3.isEmpty=function(n){return!n||!n.length},c3.prop=function(n){function t(n){return 0===arguments.length?e.call(this,r):(r=u.call(this,n,r),this)}var r=n,e=function(n){return n},u=function(n,t){return n};return t.get=function(n){return e=n,this},t.set=function(n){return u=n,this},t},c3.inherit=function(n,t){var r,e=c3.prop().get(function(e){if(null!=e)return e;for(var u=this.parent();u;u=u.parent())if("function"==typeof u[n]&&(e=u[n](),null!=e))return e;return r?r.call(this):t});return e.onDefault=function(n){return r=n,this},e},c3.event=function(n){function t(n,t){u.push({handler:n,context:t})}function r(t){var r=this;t=t||{},_.each(u,function(n){n.handler.call(n.context||r,t)}),n&&n.call(this,t)}function e(){return"function"==typeof arguments[0]?t.apply(this,arguments):r.apply(this,arguments),this}var u=[];return e.off=function(n,t){return u=_.reject(u,function(r){var e=null==n||r.handler==n,u=null==t||r.context==t;return e&&u}),this},e};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/areaPlot.js' */
c3.areaPlot=function(){return c3.component("areaPlot").extend(c3.drawable()).extend(c3.plottable()).elementTag("path").elementClass("area").dataFilter(function(t){return[t]}).extend({areaConstructor:c3.prop(d3.svg.area)}).update(function(t){var e=this.areaConstructor()().x(this.x());this.cartesian()?e.y0(this.height()).y1(this.y()):e.y0(this.y()).y1(0),t.selection.attr("d",e(this.data()))})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/axis.js' */
c3.axis=function(){return c3.component("axis").extend(c3.plottable()).extend(function(){this.selection().call(this.axis())}).extend({axisConstructor:c3.inherit("axisConstructor",d3.svg.axis),orient:c3.prop("bottom"),horizontal:function(){var t=this.orient();return"bottom"===t||"top"===t},axis:function(){var t=this.horizontal();return this.axisConstructor().call(this).scale(t?this.xScale():this.yScale()).orient(this.orient())}})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/borderLayout.js' */
c3.borderLayout=function(){var t=function(){return c3.prop().set(function(t){return t.parent(this)})},e=c3.drawable().extend({data:function(){return h.occupiedRegions()}}).dataKey(function(t){return t.name}).update(function(t){var e=h.positions();t.selection.each(function(t){var h=d3.select(this),n=e[t.name];h.attr("transform","translate("+n.left+","+n.top+")"),t.component.width(n.width).height(n.height),t.component(h)})}),h=c3.component("borderLayout").extend(c3.plottable()).extend(function(){e(this.selection())}).extend({center:t(),north:t(),south:t(),west:t(),east:t(),xRange:function(){return[0,this.centerWidth()]},yRange:function(){return[this.centerHeight(),0]},centerWidth:function(){return this.positions().center.width},centerHeight:function(){return this.positions().center.height},occupiedRegions:function(){var t=this;return _.compact(_.map(["north","south","west","east","center"],function(e){var h=t[e]();return h?{name:e,component:t[e]()}:null}))},positions:function(){var t={top:c3.checkIsNumber(this.north()?this.north().height():0),bottom:c3.checkIsNumber(this.south()?this.south().height():0),left:c3.checkIsNumber(this.west()?this.west().width():0),right:c3.checkIsNumber(this.east()?this.east().width():0)},e=c3.checkIsNumber(this.width()),h=c3.checkIsNumber(this.height()),n={},i=n.center={left:t.left,top:t.top,width:e-t.left-t.right,height:h-t.top-t.bottom};return this.north()&&(n.north={top:t.top,left:t.left,height:t.top,width:i.width}),this.south()&&(n.south={top:h-t.bottom,left:t.left,height:t.bottom,width:i.width}),this.west()&&(n.west={top:t.top,left:t.left,height:i.height,width:t.left}),this.east()&&(n.east={top:t.top,left:e-t.right,height:i.height,width:t.right}),n}});return h};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/circlePlot.js' */
c3.circlePlot=function(){return c3.component("circlePlot").extend(c3.drawable()).extend(c3.plottable()).elementTag("circle").update(function(t){t.selection.attr("cx",this.x()).attr("cy",this.y()).attr("r",this.radiusAccessor())}).extend({radiusAccessor:c3.prop(function(){return 4})})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/clippable.js' */
c3.clippable=function(){var t=0;return function(){return c3.component("clippable").extend({clipped:c3.prop(!1)}).extend(function(){if(this.clipped()){var e=this,i=c3.singular().elementTag("clipPath").enter(function(i){var n="c3clip"+t;t++,e.selection().attr("clip-path","url(#"+n+")"),i.selection.attr("id",n).append("rect").attr("x","0").attr("y","0").attr("fill","none")}).update(function(t){t.selection.select("rect").attr("width",e.width()).attr("height",e.height())});i(this.selection())}})}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/component.js' */
c3.component=function(n){function t(){var n=function(t){return n.applyTo(n,t)};return n}function e(n,t,e){for(var r in t)e&&r in e||(n[r]=t[r]);return n}var r=[],o=t(),p={displayName:n,selection:c3.prop(null),parent:c3.prop(null),applyTo:function(n,t){return o.selection(t),_.each(r,function(e){e.applyTo?e.applyTo(n,t):e.call(n,t)}),o},extend:function(n){return"function"==typeof n&&(n.parent&&n.parent(o),r.push(n)),e(o,n,p)}};return _.extend(o,p)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/deviationPlot.js' */
c3.deviationPlot=function(){return c3.component("deviationPlot").extend(c3.drawable()).extend(c3.plottable()).elementTag("path").elementClass("area").dataFilter(function(t){return[t]}).update(function(t){var e=this.yAccessor(),n=this.deviationAccessor(),a=this.yScale(),i=d3.svg.area().x(this.x()).y0(function(t){return a(e(t)+n(t))}).y1(function(t){return a(Math.max(e(t)-n(t),0))});t.selection.attr("d",i(this.data()))}).extend({deviationAccessor:c3.prop(function(t){return t[2]})})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/drawable.js' */
c3.drawable=function(){return c3.component("drawable").extend(c3.withData()).extend(c3.withElements()).extend(function(){var t=this.dataBinding();this.enter({selection:this.drawEnter(t.enter())}),this.exit({selection:this.drawExit(t.exit())}),this.update({selection:t})}).extend({enter:c3.event(),exit:c3.event(),update:c3.event(),dataFilter:c3.prop(_.identity),dataBinding:function(){var t=this.dataFilter().call(this,this.data());return this.elements().data(t,this.dataKey())},drawEnter:function(t){var e=t.append(this.elementTag()),n=this.elementClass();return n&&e.classed(n,!0),e},drawExit:function(t){return t.remove()}})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/fitToParent.js' */
c3.fitToParent=function(){return c3.component("fitToParent").extend({width:c3.prop(),height:c3.prop()}).extend(function(){var e=this.selection().node().domNode.parentElement;this.height(c3.checkIsNumber(e.clientHeight)),this.width(c3.checkIsNumber(e.clientWidth))})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/gridLines.js' */
c3.gridLines=function(){return c3.component("gridLines").extend(c3.axis()).axisConstructor(function(){var t;switch(this.orient()){case"left":t=-this.width();break;case"right":t=this.width();break;case"top":t=-this.height();break;case"bottom":t=this.height()}return d3.svg.axis().tickSize(t).tickFormat("")})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/label.js' */
c3.label=function(){return c3.component("label").extend(c3.singular()).extend({text:c3.prop(""),orient:c3.prop("bottom")}).elementTag("text").elementClass("label").enter(function(t){t.selection.attr("text-anchor","middle")}).update(function(t){t.selection.text(this.text());var e=0,i=0,h=0,n=t.selection.node().getBBox();switch(this.orient()){case"left":h=270,e=-1*this.width()+n.height,i=this.height()/2;break;case"right":h=90,e=this.width()-n.height,i=this.height()/2;break;case"top":h=0,e=this.width()/2,i=-1*this.height()+n.height;break;default:h=0,e=this.width()/2,i=this.height()-n.height/2}t.selection.attr("transform","translate("+e+", "+i+") rotate("+h+", 0, 0)")})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/labelledAxis.js' */
c3.labelledAxis=function(){return c3.component("labelledAxis").extend(c3.axis()).extend(c3.label()).elementClass("axis-label")};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/layerable.js' */
c3.layerable=function(){var e=c3.drawable().elementClass("layer").update(function(e){e.selection.each(function(e,n){e.component(d3.select(this).classed(e.name,!0))})});return c3.component("layerable").extend(function(){e(this.selection())}).extend(c3.plottable()).extend({layers:function(){return e.data()},getLayer:function(e){var n=_.findWhere(this.layers(),{name:e});return n?n.component:void 0},addLayer:function(e,n){return this.getLayer(e)||this.layers().push({name:e,component:n.parent(this)}),this},removeLayer:function(e){var n=this.layers(),t=_.reject(n,function(n){return n.name===e});return t.length!==n.length&&this.layers(t),this}})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/linePlot.js' */
c3.linePlot=function(){return c3.component("linePlot").extend(c3.drawable()).extend(c3.plottable()).elementTag("path").elementClass("line").dataFilter(function(t){return[t]}).extend({lineConstructor:c3.prop(d3.svg.line)}).update(function(t){var e=this.lineConstructor()().x(this.x()).y(this.y());t.selection.attr("d",e(this.data())).attr("stroke","black").attr("fill","none")})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/plottable.js' */
c3.plottable=function(){return c3.component("plottable").extend(c3.withData()).extend(c3.withDimensions()).extend(c3.clippable()).extend({x:function(){var t=this.xScale(),c=this.xAccessor();return function(e,n){return t(c(e,n))}},y:function(){var t=this.yScale(),c=this.yAccessor();return function(e,n){return t(c(e,n))}},xAccessor:c3.inherit("xAccessor",c3.defaults.x),yAccessor:c3.inherit("yAccessor",c3.defaults.y),xScaleConstructor:c3.inherit("xScaleConstructor",d3.scale.linear),yScaleConstructor:c3.inherit("yScaleConstructor",d3.scale.linear),xDomain:c3.inherit("xDomain").onDefault(function(){if(c3.isEmpty(this.data()))return[0,1];var t=c3.checkIsNumber(d3.min(this.data(),this.xAccessor())),c=c3.checkIsNumber(d3.max(this.data(),this.xAccessor()));return[t,c]}),yDomain:c3.inherit("yDomain").onDefault(function(){if(c3.isEmpty(this.data()))return[0,1];var t=c3.checkIsNumber(d3.min(this.data(),this.yAccessor())),c=c3.checkIsNumber(d3.max(this.data(),this.yAccessor()));return[t,c]}),xRange:c3.inherit("xRange").onDefault(function(){var t=c3.checkIsNumber(this.width());return[0,t]}),yRange:c3.inherit("yRange").onDefault(function(){var t=c3.checkIsNumber(this.height());return this.cartesian()?[t,0]:[0,t]}),xScale:function(){return this.xScaleConstructor().call(this).domain(this.xDomain()).range(this.xRange())},yScale:function(){return this.yScaleConstructor().call(this).domain(this.yDomain()).range(this.yRange())},cartesian:c3.prop(!0)})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/singular.js' */
c3.singular=function(){return c3.component("singular").extend(c3.withElements()).extend({enter:c3.event(),update:c3.event(),exit:c3.event(),showCondition:c3.prop(function(){return!0})}).extend(function(){var e=this.elements();this.showCondition().call(this)?(e.node()||(e=this.selection().append(this.elementTag()),this.elementClass()&&e.classed(this.elementClass(),!0),this.enter({selection:e})),this.update({selection:e})):e.node()&&this.exit({selection:e.remove()})})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/utils.js' */
c3.utils={wrapText:function(t,e,n){t.each(function(){for(var t,i=d3.select(this),o=i.text().split(/\s+/).reverse(),a=[o.pop()],h=[a];t=o.pop();)a.push(t),i.text(a.join(" ")),i.node().getComputedTextLength()>e&&(a.pop(),a=[t],h.push(a));i.text(null);var c=1.1,d=i.attr("y")||0,p=parseFloat(i.attr("dy"))||0;h.forEach(function(t,o){n&&(o-=h.length-1),i.append("tspan").attr({x:e/2,y:d,dy:o*c+p+"em"}).text(t.join(" "))})})},containText:function(t,e,n){t.each(function(){var t=this.__data__,i=d3.select(this),o={width:0,height:0},a=4;try{o=i.node().getBBox()}catch(t){}o.height+a>n(t)?i.text(""):o.width+a>e(t)&&i.text("")})},defaultViewBox:function(t){var e=t.node().parentNode.getBoundingClientRect();t.attr("viewBox","0 0 "+e.width+" "+e.height)}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/withData.js' */
c3.withData=function(){return c3.component("withData").extend({data:c3.inherit("data",[]),dataKey:c3.inherit("dataKey")})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/fillWithRect.js' */
c3.fillWithRect=function(){return c3.singular().elementTag("rect").elementClass("fill-rect").enter(function(t){t.selection.attr("x",0).attr("y",0).attr("fill","none").attr("width","100%").attr("height","100%").style("pointer-events","all")})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/withDimensions.js' */
c3.withDimensions=function(){return c3.component("withDimensions").extend({width:c3.inherit("width").onDefault(function(){return parseInt(this.selection().style("width"),10)||0}),height:c3.inherit("height").onDefault(function(){return parseInt(this.selection().style("height"),10)||0})})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/withElements.js' */
c3.withElements=function(){return c3.component("withElements").extend({elementTag:c3.prop("g"),elementClass:c3.prop(""),elementSelector:function(){return this.elementClass()?this.elementTag()+"."+this.elementClass():this.elementTag()},elements:function(){var e=this.selection().node();return this.selection().selectAll(this.elementSelector()).filter(function(){return this.parentNode===e})}})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/interactive.js' */
c3.interactive=function(){function o(o){var n=e(o),t=n[0],u=n[1];return c.mouseCoordinates([t,u]),t>0&&u>0&&t<=c.width()&&u<=c.height()}function e(o){s();var e=o.pageX-r.left,n=o.pageY-r.top;return[e,n]}function n(){AJS.$(c.selection().node()).on("dragstart",function(o){o.preventDefault()})}function t(){c.domContext().on("mousemove",function(e){var n=o(e);!n&&i?(i=!1,c.mouseout(e)):n&&!i&&(i=!0,c.mouseover(e))}).on("mouseout",function(o){i&&(i=!1,c.mouseout(o))}),n()}function u(e){return function(n,t){return c.domContext().on(e+".c3."+n,function(e){o(e)&&(d3.event=e,t.call(this,e))}),this}}var r,c=c3.component(),i=!1,s=_.throttle(function(){r=AJS.$(c.region().selection().node()).offset()},200);return c.extend(c3.withDimensions()).extend(_.once(t)).extend({mouseCoordinates:c3.prop(),domContext:c3.prop(),region:c3.prop(),mousedown:u("mousedown"),mouseup:u("mouseup"),mousemove:u("mousemove"),mouseover:c3.event(),mouseout:c3.event()})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/scrubber.js' */
c3.scrubber=function(){function e(){var e=r.parent().mouseCoordinates();r.elements().attr("x1",e[0]).attr("x2",e[0]),r.shouldHideScrubber()()||r.elements().style("visibility","")}function t(){r.elements().style("visibility","hidden")}function n(e){e.style("pointer-events","none")}function i(i){n(i.selection),this.interactiveLayer().mousemove("scrubber",function(){e()}).mouseout(function(){t()})}var r=c3.singular();return r.elementTag("line").enter(i).extend(c3.withDimensions()).extend({interactiveLayer:c3.prop(),shouldHideScrubber:c3.prop(function(){}),hideScrubber:t}).update(function(e){e.selection.attr("y1",0).attr("y2",this.height())})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/barChart.js' */
c3.barChart=function(){return c3.component("barChart").extend(c3.drawable()).extend(c3.plottable()).elementTag("rect").xAccessor(function(t,e){return e}).yAccessor(function(t){return t}).extend({baselineAccessor:c3.prop(function(){return 0}),barWidth:function(){return this.xScale().rangeBand()},barHeight:function(){var t=this.baselineAccessor(),e=this.yAccessor(),r=this.yScale();return function(n){return r(t(n))-r(e(n))}},maxBarWidth:c3.prop(0),padding:c3.prop(.25).set(function(t){if(t>=0&&t<=1)return t;throw new Error("Expected padding to be between 0 and 1 inclusive, but received "+t)}),outerPadding:c3.prop(.25).set(function(t){if(t>=0&&t<=1)return t;throw new Error("Expected outerPadding to be between 0 and 1 inclusive, but received "+t)}),showLabels:c3.prop(!1),rotateLabels:c3.prop(!1),labelAccessor:function(){return this.xAccessor()},xRange:function(){var t=this.width(),e=t;return this.maxBarWidth()>0&&(e=Math.floor(this.maxBarWidth()/(1-this.padding())*(this.xDomain().length-this.padding()+2*this.outerPadding()))),[0,Math.min(e,t)]},xScale:function(){return d3.scale.ordinal().domain(this.xDomain()).rangeRoundBands(this.xRange(),this.padding(),this.outerPadding())},xDomain:c3.inherit("xDomain").onDefault(function(){return c3.isEmpty(this.data())?[0,1]:d3.range(this.data().length)}),yDomain:c3.inherit("yDomain").onDefault(function(){if(c3.isEmpty(this.data()))return[0,1];var t=c3.checkIsNumber(d3.min(this.data(),this.baselineAccessor())),e=c3.checkIsNumber(d3.max(this.data(),this.yAccessor()));return[t,e]})}).enter(function(t){"g"===this.elementTag()&&this.showLabels()&&t.selection.append("text").classed("bar-label",!0)}).update(function(t){var e=this.x(),r=this.y(),n=this.barWidth(),a=this.barHeight(),i=t.selection.select("text.bar-label");t.selection.attr("transform",function(t,n){return"translate("+e(t,n)+","+r(t,n)+")"}).attr("height",a).attr("width",n),this.showLabels()&&(i.attr("x",n/2).attr("y",a).text(this.labelAccessor()),this.rotateLabels()?i.attr("transform",function(t,e){return"rotate(90 "+n/2+","+a(t)+")"}).attr("text-anchor","start").attr("dx",".5em").attr("dy",".25em"):i.attr("transform",null).attr("text-anchor","middle").attr("dx",null).attr("dy","1.25em").call(c3.utils.wrapText,n))})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/floatingBarChart.js' */
c3.floatingBarChart=function(){return c3.component("floatingBarChart").extend(c3.barChart()).yAccessor(function(n){return n[0]+n[1]}).baselineAccessor(function(n){return n[0]})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/stack.js' */
c3.stack=function(){return c3.component("stack").extend(c3.floatingBarChart()).elementTag("g").xAccessor(function(){return 0}).extend({classPrefix:c3.prop(),labelAccessor:function(){return this.yAccessor()},labelFormatter:function(){return d3.format(",d")}}).enter(function(t){var e=this.classPrefix();t.selection.insert("rect",":first-child").attr("class",function(t,r){return e+"-series-"+r})}).update(function(t){var e=this.classPrefix(),r=this.barHeight(),s=this.barWidth();t.selection.select("rect").attr("height",r).attr("width",s),this.showLabels()&&t.selection.select("text").attr("dy","0.45em").attr("y",function(t){return r(t)/2}).attr("class",function(t,r){return e+"-series-label-"+r}).classed("bar-label",!0).text(this.labelAccessor()).call(c3.utils.containText,function(){return s},r)})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/brush.js' */
c3.brush=function(){function t(t){i=t,a=!0,r(),s.elements().attr("x",t).attr("y",0).attr("width","1"),s.onDrag(t)}function n(t){if(a){var n=s.elements(),e=parseInt(t-i,10);e<0?n.attr("x",t):n.attr("x",i),n.attr("width",Math.abs(e));var r=_.sortBy([i,t],_.identity);s.onUpdate(r),s.currentRange(r)}}function e(t){a&&(a=!1,o(),s.onEndDrag(_.sortBy([i,t],_.identity)))}function r(){s.elements().style("display","")}function o(){s.elements().style("display","none")}var i=0,a=!1,s=c3.singular();return s.elementTag("rect").extend(c3.withDimensions()).enter(function(r){o(),r.selection.attr("height",this.height()).style("pointer-events","none");var i=this.interactiveLayer();i.mousedown("brush",function(){t(i.mouseCoordinates()[0])}).mousemove("brush",function(){n(i.mouseCoordinates()[0])}).mouseup("brush",function(){e(i.mouseCoordinates()[0])})}).extend({interactiveLayer:c3.prop(),onDrag:c3.event(),onUpdate:c3.event(),onEndDrag:c3.event(),currentRange:c3.prop(),cancelDrag:function(){a=!1,o()},isDragging:function(){return a}})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:timed-flag', location = 'includes/js/rapid/configuration/TimedFlag.js' */
define("jira-agile/rapid/configuration/timed-flag",["jira/flag","jquery"],function(e,i){return{successMsgTimed:function(n,s,u,a){u=u||{},a&&(u.close="manual");var c=i(e.showSuccessMsg(n,s,u));return a&&setTimeout(function(){c[0].close()},a),c}}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:sprint-actions-dropdown-soy', location = 'includes/soy/sprint-actions-dropdown/actions.soy' */
// This file was automatically generated from actions.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.component.sprint.actions.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.component == 'undefined') { GH.tpl.component = {}; }
if (typeof GH.tpl.component.sprint == 'undefined') { GH.tpl.component.sprint = {}; }
if (typeof GH.tpl.component.sprint.actions == 'undefined') { GH.tpl.component.sprint.actions = {}; }


GH.tpl.component.sprint.actions.layout = function(opt_data, opt_ignored) {
  return '<a id="sprint-actions-trigger" href="#sprint-actions" aria-owns="sprint-actions" aria-haspopup="true" class="aui-button aui-button-compact aui-dropdown2-trigger aui-dropdown2-trigger-arrowless aui-style-default details-button"><span class="aui-icon aui-icon-small aui-iconfont-more">' + soy.$$escapeHtml("Actions") + '</span></a><div id="sprint-actions" class="aui-dropdown2 aui-style-default"><ul id="sprint-actions-list" class="aui-list-truncate"></ul></div>';
};
if (goog.DEBUG) {
  GH.tpl.component.sprint.actions.layout.soyTemplateName = 'GH.tpl.component.sprint.actions.layout';
}


GH.tpl.component.sprint.actions.action = function(opt_data, opt_ignored) {
  return '<a class="sprintaction_link' + ((opt_data.disabled) ? ' disabled' : '') + '" id="' + soy.$$escapeHtml(opt_data.id) + '" href=""' + ((opt_data.tooltipText) ? ' title="' + soy.$$escapeHtml(opt_data.tooltipText) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.text) + '</a>';
};
if (goog.DEBUG) {
  GH.tpl.component.sprint.actions.action.soyTemplateName = 'GH.tpl.component.sprint.actions.action';
}


GH.tpl.component.sprint.actions.sprintEditDialog = function(opt_data, opt_ignored) {
  return '' + aui.dialog.dialog2({content: '' + GH.tpl.component.sprint.actions.sprintEditDialogContent(opt_data), removeOnHide: true, visible: true, id: 'ghx-sprint-edit', extraAttributes: 'modal="true"', titleText: '' + soy.$$escapeHtml("Edit sprint"), footerActionContent: '' + GH.tpl.component.sprint.actions.sprintEditDialogFooter(null)});
};
if (goog.DEBUG) {
  GH.tpl.component.sprint.actions.sprintEditDialog.soyTemplateName = 'GH.tpl.component.sprint.actions.sprintEditDialog';
}


GH.tpl.component.sprint.actions.sprintEditDialogContent = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.errors) {
    var param38 = '';
    var errorList39 = opt_data.errors;
    var errorListLen39 = errorList39.length;
    for (var errorIndex39 = 0; errorIndex39 < errorListLen39; errorIndex39++) {
      var errorData39 = errorList39[errorIndex39];
      param38 += ((errorData39.noAutoescape) ? soy.$$filterNoAutoescape(errorData39.message) : soy.$$escapeHtml(errorData39.message)) + '<br />';
    }
    output += aui.message.error({content: param38});
  }
  output += '<form class="aui"><fieldset><div class="field-group"><label for="sprint-name">' + soy.$$escapeHtml("Name") + '<span class="aui-icon icon-required"> required</span></label><input class="text long-field" type="text" id="sprint-name" name="sprint-name" title="' + soy.$$escapeHtml("Name") + '" value="' + soy.$$escapeHtml(opt_data.name) + '" maxlength="30"></div><div class="field-group"><label for="sprint-goal">' + soy.$$escapeHtml("Goal") + '</label><textarea class="textarea long-field" id="sprint-goal" name="sprint-goal" title="' + soy.$$escapeHtml("Goal") + '" maxlength="1000">' + soy.$$escapeHtml(opt_data.goal) + '</textarea></div></fieldset></form>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.sprint.actions.sprintEditDialogContent.soyTemplateName = 'GH.tpl.component.sprint.actions.sprintEditDialogContent';
}


GH.tpl.component.sprint.actions.sprintEditDialogFooter = function(opt_data, opt_ignored) {
  return '' + aui.buttons.button({id: 'ghx-sprint-edit-dialog-confirm-button', text: '' + soy.$$escapeHtml("Save"), type: 'primary'}) + aui.buttons.button({id: 'ghx-sprint-edit-dialog-cancel-button', text: '' + soy.$$escapeHtml("Cancel"), type: 'link'});
};
if (goog.DEBUG) {
  GH.tpl.component.sprint.actions.sprintEditDialogFooter.soyTemplateName = 'GH.tpl.component.sprint.actions.sprintEditDialogFooter';
}


GH.tpl.component.sprint.actions.deleteSprintDialog = function(opt_data, opt_ignored) {
  var output = '';
  var sprintNameHtml__soy74 = '<b>' + soy.$$escapeHtml(opt_data.sprintName) + '</b>';
  output += aui.dialog.dialog2({removeOnHide: true, visible: true, size: 'small', titleText: "Delete sprint", content: '' + soy.$$filterNoAutoescape(AJS.format("Are you sure you want to delete sprint {0}? Once you delete it, it\x27\x27s gone forever.",sprintNameHtml__soy74)), footerActionContent: '' + aui.buttons.button({id: 'ghx-sprint-delete-dialog-confirm', text: "Delete", type: 'primary'}) + aui.buttons.button({id: 'ghx-sprint-delete-dialog-cancel', text: "Cancel"})});
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.sprint.actions.deleteSprintDialog.soyTemplateName = 'GH.tpl.component.sprint.actions.deleteSprintDialog';
}
;
;
/* module-key = 'com.atlassian.plugin.jslibs:backbone.radio-2.0.0-factory', location = 'factories/backbone.radio/2.0.0/backbone.radio-2.0.0-factory.js' */
(function(f){define("atlassian/libs/factories/backbone.radio-2.0.0",function(){return function(d,i){return f(d,i).noConflict()}})})(function(f,d){function i(a){return f.isFunction(a)?a:function(){return a}}var f="default"in f?f["default"]:f,d="default"in d?d["default"]:d,o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},p=d.Radio,b=d.Radio={};b.VERSION="2.0.0";b.noConflict=
function(){d.Radio=p;return this};b.DEBUG=!1;b._debugText=function(a,e,c){return a+(c?" on the "+c+" channel":"")+': "'+e+'"'};b.debugLog=function(a,e,c){b.DEBUG&&(console&&console.warn)&&console.warn(b._debugText(a,e,c))};var l=/\s+/;b._eventsApi=function(a,e,c,b){if(!c)return!1;var m={};if("object"===("undefined"===typeof c?"undefined":o(c))){for(var h in c){var d=a[e].apply(a,[h,c[h]].concat(b));l.test(h)?f.extend(m,d):m[h]=d}return m}if(l.test(c)){c=c.split(l);h=0;for(d=c.length;h<d;h++)m[c[h]]=
a[e].apply(a,[c[h]].concat(b));return m}return!1};b._callHandler=function(a,b,c){var g=c[0],f=c[1],d=c[2];switch(c.length){case 0:return a.call(b);case 1:return a.call(b,g);case 2:return a.call(b,g,f);case 3:return a.call(b,g,f,d);default:return a.apply(b,c)}};var j={};f.extend(b,{log:function(a,b){if("undefined"!==typeof console){var c=f.toArray(arguments).slice(2);console.log("["+a+'] "'+b+'"',c)}},tuneIn:function(a){var e=b.channel(a);e._tunedIn=!0;e.on("all",j[a]||(j[a]=f.bind(b.log,b,a)));return this},
tuneOut:function(a){var e=b.channel(a);e._tunedIn=!1;e.off("all",j[a]||(j[a]=f.bind(b.log,b,a)));delete j[a];return this}});b.Requests={request:function(a){var e=f.toArray(arguments).slice(1),c=b._eventsApi(this,"request",a,e);if(c)return c;var g=this.channelName,c=this._requests;g&&this._tunedIn&&b.log.apply(this,[g,a].concat(e));if(c&&(c[a]||c["default"]))return g=c[a]||c["default"],e=c[a]?e:arguments,b._callHandler(g.callback,g.context,e);b.debugLog("An unhandled request was fired",a,g)},reply:function(a,
e,c){if(b._eventsApi(this,"reply",a,[e,c]))return this;this._requests||(this._requests={});this._requests[a]&&b.debugLog("A request was overwritten",a,this.channelName);this._requests[a]={callback:i(e),context:c||this};return this},replyOnce:function(a,e,c){if(b._eventsApi(this,"replyOnce",a,[e,c]))return this;var g=this,d=f.once(function(){g.stopReplying(a);return i(e).apply(this,arguments)});return this.reply(a,d,c)},stopReplying:function(a,e,c){if(b._eventsApi(this,"stopReplying",a))return this;
if(!a&&!e&&!c)delete this._requests;else{var g=this._requests,d=a;g||(g={});for(var h=d?[d]:f.keys(g),j=!1,i=0,l=h.length;i<l;i++)if(d=h[i],g[d]){var k=g[d];(!e||e===k.callback||e===k.callback._callback)&&(!c||c===k.context)?(delete g[d],d=!0):d=void 0;d&&(j=!0)}j||b.debugLog("Attempted to remove the unregistered request",a,this.channelName)}return this}};b._channels={};b.channel=function(a){if(!a)throw Error("You must provide a name for the channel.");return b._channels[a]?b._channels[a]:b._channels[a]=
new b.Channel(a)};b.Channel=function(a){this.channelName=a};f.extend(b.Channel.prototype,d.Events,b.Requests,{reset:function(){this.off();this.stopListening();this.stopReplying();return this}});var k,n;f.each([d.Events,b.Requests],function(a){f.each(a,function(a,c){b[c]=function(a){n=f.toArray(arguments).slice(1);k=this.channel(a);return k[c].apply(k,n)}})});b.reset=function(a){f.each(!a?this._channels:[this._channels[a]],function(a){a.reset()})};return b});;
;
/* module-key = 'com.atlassian.plugin.jslibs:marionette-3.1.0-factory', location = 'factories/marionette/3.1.0/marionette-3.1.0-factory.js' */
(function(f){define("atlassian/libs/factories/marionette-3.1.0",function(){return function(b,p,H){return f(p,b,H).noConflict()}})})(function(f,b,p){function H(b,e,a){return a.toUpperCase()}function r(i){for(var e=arguments.length,a=Array(1<e?e-1:0),c=1;c<e;c++)a[c-1]=arguments[c];e=ba(i);e=I.call(this,e);c=void 0;b.isFunction(e)&&(c=e.apply(this,a));this.trigger.apply(this,arguments);return c}function j(i){for(var e=arguments.length,a=Array(1<e?e-1:0),c=1;c<e;c++)a[c-1]=arguments[c];return b.isFunction(i.triggerMethod)?
i.triggerMethod.apply(i,a):r.apply(i,a)}function B(i,e,a){i._getImmediateChildren&&b.each(i._getImmediateChildren(),function(c){a(c)&&j(c,e,c)})}function ca(b){return!b._isAttached}function da(b){return b._isAttached?!1:b._isAttached=!0}function ea(b){return b._isAttached}function fa(b){if(!b._isAttached)return!1;b._isAttached=!1;return!0}function P(b){b._isAttached&&b._isRendered&&j(b,"dom:refresh",b)}function ga(){B(this,"before:attach",ca)}function ha(){B(this,"attach",da);P(this)}function ia(){B(this,
"before:detach",ea)}function ja(){B(this,"detach",fa)}function ka(){P(this)}function v(b){b._areViewEventsMonitored||(b._areViewEventsMonitored=!0,b.on({"before:attach":ga,attach:ha,"before:detach":ia,detach:ja,render:ka}))}function Q(i,e,a,c){if(e&&a){if(!b.isObject(a))throw new h({message:"Bindings must be an object.",url:"marionette.functions.html#marionettebindevents"});b.each(a,function(a,k){if(b.isString(a)){var o=a.split(/\s+/);b.each(o,function(a){var b=i[a];if(!b)throw new h('Method "'+a+
'" was configured as an event handler, but does not exist.');i[c](e,k,b)})}else i[c](e,k,a)})}}function w(b,e){Q(this,b,e,"listenTo");return this}function x(b,e){Q(this,b,e,"stopListening");return this}function R(i,e,a,c){if(e&&a){if(!b.isObject(a))throw new h({message:"Bindings must be an object.",url:"marionette.functions.html#marionettebindrequests"});a=J.call(i,a);e[c](a,i)}}function S(b,e){R(this,b,e,"reply");return this}function T(b,e){R(this,b,e,"stopReplying");return this}function K(b){if(Array.isArray(b)){for(var e=
0,a=Array(b.length);e<b.length;e++)a[e]=b[e];return a}return Array.from(b)}function U(i,e){return b.chain(e).map(function(a,c){var g=a.behaviorClass?a.behaviorClass:b.isFunction(a)?a:b.isFunction(d.Behaviors.behaviorsLookup)?d.Behaviors.behaviorsLookup(a,c)[c]:d.Behaviors.behaviorsLookup[c],g=new g(a===g?{}:a,i),e=U(i,b.result(g,"behaviors"));return[g].concat(e)}).flatten().value()}function V(b){b.supportsDestroyLifecycle||j(b,"before:destroy",b);var e=!!b._isAttached;e&&j(b,"before:detach",b);b.remove();
e&&(b._isAttached=!1,j(b,"detach",b));b._isDestroyed=!0;b.supportsDestroyLifecycle||j(b,"destroy",b)}function W(d,e){if(d instanceof C)return d;var a;a=b.extend({},e);if(b.isString(d))b.extend(a,{el:d}),a=L(a);else if(b.isFunction(d))b.extend(a,{regionClass:d}),a=L(a);else if(b.isObject(d))d.selector&&l("The selector option on a Region definition object is deprecated. Use el to pass a selector string"),b.extend(a,{el:d.selector},d),a=L(a);else throw new h({message:"Improper region configuration type.",
url:"marionette.region.html#region-configuration-types"});return a}function L(d){var e=d.regionClass,d=b.omit(d,"regionClass");return new e(d)}var f="default"in f?f["default"]:f,b="default"in b?b["default"]:b,p="default"in p?p["default"]:p,q=function(b){return function(e){for(var a=arguments.length,c=Array(1<a?a-1:0),g=1;g<a;g++)c[g-1]=arguments[g];return b.apply(e,c)}},D=f.Model.extend,l=function e(a,c){b.isObject(a)&&(a=a.prev+" is going to be removed in the future. Please use "+a.next+" instead."+
(a.url?" See: "+a.url:""));if(d.DEV_MODE&&(void 0===c||!c)&&!e._cache[a])e._warn("Deprecation warning: "+a),e._cache[a]=!0};l._console="undefined"!==typeof console?console:{};l._warn=function(){return(l._console.warn||l._console.log||b.noop).apply(l._console,arguments)};l._cache={};var E=function(b){return f.$.contains(document.documentElement,b)},X=function(e,a){var c=this;e&&b.each(a,function(a){var b=e[a];void 0!==b&&(c[a]=b)})},I=function(b){if(b)return this.options&&void 0!==this.options[b]?
this.options[b]:this[b]},J=function(e){var a=this;return b.reduce(e,function(c,g,e){b.isFunction(g)||(g=a[g]);g&&(c[e]=g);return c},{})},la=/(^|:)(\w)/gi,ba=b.memoize(function(b){return"on"+b.replace(la,H)}),Y="description fileName lineNumber name message number".split(" "),h=D.call(Error,{urlRoot:"http://marionettejs.com/docs/v3.1.0/",constructor:function(e,a){b.isObject(e)?(a=e,e=a.message):a||(a={});var c=Error.call(this,e);b.extend(this,b.pick(c,Y),b.pick(a,Y));this.captureStackTrace();a.url&&
(this.url=this.urlRoot+a.url)},captureStackTrace:function(){Error.captureStackTrace&&Error.captureStackTrace(this,h)},toString:function(){return this.name+": "+this.message+(this.url?" See: "+this.url:"")}});h.extend=D;var M={normalizeMethods:J,_setOptions:function(){for(var e=arguments.length,a=Array(e),c=0;c<e;c++)a[c]=arguments[c];this.options=b.extend.apply(b,[{},b.result(this,"options")].concat(a))},mergeOptions:X,getOption:I,bindEvents:w,unbindEvents:x},s={_initRadio:function(){var e=b.result(this,
"channelName");if(e){if(!p)throw new h({name:"BackboneRadioMissing",message:'The dependency "backbone.radio" is missing.'});var e=this._channel=p.channel(e),a=b.result(this,"radioEvents");this.bindEvents(e,a);a=b.result(this,"radioRequests");this.bindRequests(e,a);this.on("destroy",this._destroyRadio)}},_destroyRadio:function(){this._channel.stopReplying(null,null,this)},getChannel:function(){return this._channel},bindEvents:w,unbindEvents:x,bindRequests:S,unbindRequests:T},ma=["channelName","radioEvents",
"radioRequests"],m=function(e){this._setOptions(e);this.mergeOptions(e,ma);this.cid=b.uniqueId(this.cidPrefix);this._initRadio();this.initialize.apply(this,arguments)};m.extend=D;b.extend(m.prototype,f.Events,M,s,{cidPrefix:"mno",_isDestroyed:!1,isDestroyed:function(){return this._isDestroyed},initialize:function(){},destroy:function(){if(this._isDestroyed)return this;for(var b=arguments.length,a=Array(b),c=0;c<b;c++)a[c]=arguments[c];this.triggerMethod.apply(this,["before:destroy",this].concat(a));
this._isDestroyed=!0;this.triggerMethod.apply(this,["destroy",this].concat(a));this.stopListening();return this},triggerMethod:r});var y=function(b){this.templateId=b};b.extend(y,{templateCaches:{},get:function(b,a){var c=this.templateCaches[b];c||(c=new y(b),this.templateCaches[b]=c);return c.load(a)},clear:function(){for(var b=void 0,b=arguments.length,a=Array(b),c=0;c<b;c++)a[c]=arguments[c];c=a.length;if(0<c)for(b=0;b<c;b++)delete this.templateCaches[a[b]];else this.templateCaches={}}});b.extend(y.prototype,
{load:function(b){if(this.compiledTemplate)return this.compiledTemplate;var a=this.loadTemplate(this.templateId,b);return this.compiledTemplate=this.compileTemplate(a,b)},loadTemplate:function(b){var a=f.$(b);if(!a.length)throw new h({name:"NoTemplateError",message:'Could not find template: "'+b+'"'});return a.html()},compileTemplate:function(e,a){return b.template(e,a)}});var n=b.invokeMap||b.invoke,s={_delegateEntityEvents:function(e,a){this._undelegateEntityEvents(e,a);var c=b.result(this,"modelEvents");
w.call(this,e,c);c=b.result(this,"collectionEvents");w.call(this,a,c)},_undelegateEntityEvents:function(e,a){var c=b.result(this,"modelEvents");x.call(this,e,c);c=b.result(this,"collectionEvents");x.call(this,a,c)}},na=/^(\S+)\s*(.*)$/,Z=function(e){e=e.match(na);return[e[1]+b.uniqueId(".evt"),e[2]].join(" ")},z={_getViewTriggers:function(e,a){return b.reduce(a,function(a,g,k){k=Z(k);b.isString(g)&&(g={event:g});var d=g.event,f=!1!==g.preventDefault,h=!1!==g.stopPropagation;a[k]=function(a){f&&a.preventDefault();
h&&a.stopPropagation();e.triggerMethod(d,e)};return a},{})}},F=function(b,a){return b.replace(/@ui\.[a-zA-Z-_$0-9]*/g,function(c){return a[c.slice(4)]})},oa=function a(c,g,k){b.each(c,function(d,f){b.isString(d)?c[f]=F(d,g):b.isObject(d)&&b.isArray(k)&&(b.extend(d,a(b.pick(d,k),g)),b.each(k,function(a){var c=d[a];b.isString(c)&&(d[a]=F(c,g))}))});return c},$={normalizeUIKeys:function(a){var c=this._getUIBindings();return b.reduce(a,function(a,b,d){d=F(d,c);a[d]=b;return a},{})},normalizeUIString:function(a){var c=
this._getUIBindings();return F(a,c)},normalizeUIValues:function(a,c){var b=this._getUIBindings();return oa(a,b,c)},_getUIBindings:function(){var a=b.result(this,"_uiBindings"),c=b.result(this,"ui");return a||c},_bindUIElements:function(){var a=this;if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var c=b.result(this,"_uiBindings");this._ui={};b.each(c,function(c,b){a._ui[b]=a.$(c)});this.ui=this._ui}},_unbindUIElements:function(){var a=this;this.ui&&this._uiBindings&&(b.each(this.ui,function(c,
b){delete a.ui[b]}),this.ui=this._uiBindings,delete this._uiBindings,delete this._ui)},_getUI:function(a){return this._ui[a]}},t={supportsRenderLifecycle:!0,supportsDestroyLifecycle:!0,_isDestroyed:!1,isDestroyed:function(){return!!this._isDestroyed},_isRendered:!1,isRendered:function(){return!!this._isRendered},_isAttached:!1,isAttached:function(){return!!this._isAttached},delegateEvents:function(a){this._proxyBehaviorViewProperties();this._buildEventProxies();var c=this._getEvents(a);"undefined"===
typeof a&&(this.events=c);a=b.extend({},this._getBehaviorEvents(),c,this._getBehaviorTriggers(),this.getTriggers());f.View.prototype.delegateEvents.call(this,a);return this},_getEvents:function(a){a=a||this.events;return b.isFunction(a)?this.normalizeUIKeys(a.call(this)):this.normalizeUIKeys(a)},getTriggers:function(){if(this.triggers){var a=this.normalizeUIKeys(b.result(this,"triggers"));return this._getViewTriggers(this,a)}},delegateEntityEvents:function(){this._delegateEntityEvents(this.model,
this.collection);this._delegateBehaviorEntityEvents();return this},undelegateEntityEvents:function(){this._undelegateEntityEvents(this.model,this.collection);this._undelegateBehaviorEntityEvents();return this},_ensureViewIsIntact:function(){if(this._isDestroyed)throw new h({name:"ViewDestroyedError",message:'View (cid: "'+this.cid+'") has already been destroyed and cannot be used.'});},destroy:function(){if(this._isDestroyed)return this;for(var a=!!this._isAttached,c=arguments.length,b=Array(c),d=
0;d<c;d++)b[d]=arguments[d];this.triggerMethod.apply(this,["before:destroy",this].concat(b));a&&this.triggerMethod("before:detach",this);this.unbindUIElements();this._removeElement();a&&(this._isAttached=!1,this.triggerMethod("detach",this));this._removeChildren();this._destroyBehaviors(b);this._isDestroyed=!0;this._isRendered=!1;this.triggerMethod.apply(this,["destroy",this].concat(b));this.stopListening();return this},bindUIElements:function(){this._bindUIElements();this._bindBehaviorUIElements();
return this},unbindUIElements:function(){this._unbindUIElements();this._unbindBehaviorUIElements();return this},getUI:function(a){this._ensureViewIsIntact();return this._getUI(a)},childViewEventPrefix:"childview",triggerMethod:function(){var a=r.apply(this,arguments);this._triggerEventOnBehaviors.apply(this,arguments);this._triggerEventOnParentLayout.apply(this,arguments);return a},_buildEventProxies:function(){this._childViewEvents=b.result(this,"childViewEvents");this._childViewTriggers=b.result(this,
"childViewTriggers")},_triggerEventOnParentLayout:function(){var a=this._parentView();a&&a._childViewEventHandler.apply(a,arguments)},_parentView:function(){for(var a=this._parent;a;){if(a instanceof G)return a;a=a._parent}},_childViewEventHandler:function(a){for(var c=this.normalizeMethods(this._childViewEvents),g=arguments.length,d=Array(1<g?g-1:0),o=1;o<g;o++)d[o-1]=arguments[o];"undefined"!==typeof c&&b.isFunction(c[a])&&c[a].apply(this,d);(c=this._childViewTriggers)&&b.isString(c[a])&&this.triggerMethod.apply(this,
[c[a]].concat(d));c=b.result(this,"childViewEventPrefix");!1!==c&&this.triggerMethod.apply(this,[c+":"+a].concat(d))}};b.extend(t,{_initBehaviors:function(){var a=b.result(this,"behaviors");this._behaviors=b.isObject(a)?U(this,a):{}},_getBehaviorTriggers:function(){var a=n(this._behaviors,"getTriggers");return b.extend.apply(b,[{}].concat(K(a)))},_getBehaviorEvents:function(){var a=n(this._behaviors,"getEvents");return b.extend.apply(b,[{}].concat(K(a)))},_proxyBehaviorViewProperties:function(){n(this._behaviors,
"proxyViewProperties")},_delegateBehaviorEntityEvents:function(){n(this._behaviors,"delegateEntityEvents")},_undelegateBehaviorEntityEvents:function(){n(this._behaviors,"undelegateEntityEvents")},_destroyBehaviors:function(a){n.apply(void 0,[this._behaviors,"destroy"].concat(K(a)))},_bindBehaviorUIElements:function(){n(this._behaviors,"bindUIElements")},_unbindBehaviorUIElements:function(){n(this._behaviors,"unbindUIElements")},_triggerEventOnBehaviors:function(){for(var a=this._behaviors,c=0,b=a&&
a.length;c<b;c++)r.apply(a[c],arguments)}},M,s,z,$);var pa=["allowMissingEl","parentEl","replaceElement"],C=m.extend({cidPrefix:"mnr",replaceElement:!1,_isReplaced:!1,constructor:function(a){this._setOptions(a);this.mergeOptions(a,pa);this._initEl=this.el=this.getOption("el");this.el=this.el instanceof f.$?this.el[0]:this.el;if(!this.el)throw new h({name:"NoElError",message:'An "el" must be specified for a region.'});this.$el=this.getEl(this.el);m.call(this,a)},show:function(a,c){if(this._ensureElement(c)){this._ensureView(a);
if(a===this.currentView)return this;this.triggerMethod("before:show",this,a,c);v(a);this.empty(c);a.on("destroy",this._empty,this);a._parent=this;this._renderView(a);this._attachView(a,c);this.triggerMethod("show",this,a,c);return this}},_renderView:function(a){a._isRendered||(a.supportsRenderLifecycle||j(a,"before:render",a),a.render(),a.supportsRenderLifecycle||(a._isRendered=!0,j(a,"render",a)))},_attachView:function(a){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},g=!a._isAttached&&
E(this.el),c="undefined"===typeof c.replaceElement?!!b.result(this,"replaceElement"):!!c.replaceElement;g&&j(a,"before:attach",a);c?this._replaceEl(a):this.attachHtml(a);g&&(a._isAttached=!0,j(a,"attach",a));this.currentView=a},_ensureElement:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};b.isObject(this.el)||(this.$el=this.getEl(this.el),this.el=this.$el[0]);if(!this.$el||0===this.$el.length){if("undefined"===typeof a.allowMissingEl?b.result(this,"allowMissingEl"):a.allowMissingEl)return!1;
throw new h('An "el" must exist in DOM for this region '+this.cid);}return!0},_ensureView:function(a){if(!a)throw new h({name:"ViewNotValid",message:"The view passed is undefined and therefore invalid. You must pass a view instance to show."});if(a._isDestroyed)throw new h({name:"ViewDestroyedError",message:'View (cid: "'+a.cid+'") has already been destroyed and cannot be used.'});},getEl:function(a){return f.$(a,b.result(this,"parentEl"))},_replaceEl:function(a){this._restoreEl();this.el.parentNode.replaceChild(a.el,
this.el);this._isReplaced=!0},_restoreEl:function(){if(this._isReplaced){var a=this.currentView;if(a){var c=a.el.parentNode;c&&(c.replaceChild(this.el,a.el),this._isReplaced=!1)}}},isReplaced:function(){return!!this._isReplaced},attachHtml:function(a){this.el.appendChild(a.el)},empty:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{allowMissingEl:!0},c=this.currentView;if(!c)return this._ensureElement(a)&&this.detachHtml(),this;(a=!a.preventDestroy)||l("The preventDestroy option is deprecated. Use Region#detachView");
this._empty(c,a);return this},_empty:function(a,c){a.off("destroy",this._empty,this);this.triggerMethod("before:empty",this,a);this._restoreEl();delete this.currentView;a._isDestroyed||(this._removeView(a,c),delete a._parent);this.triggerMethod("empty",this,a)},_removeView:function(a,c){c?a.destroy?a.destroy():V(a):this._detachView(a)},detachView:function(){var a=this.currentView;if(a)return this._empty(a),a},_detachView:function(a){var c=!!a._isAttached;c&&j(a,"before:detach",a);this.detachHtml();
c&&(a._isAttached=!1,j(a,"detach",a))},detachHtml:function(){this.$el.contents().detach()},hasView:function(){return!!this.currentView},reset:function(a){this.empty(a);this.$el&&(this.el=this._initEl);delete this.$el;return this},destroy:function(a){this.reset(a);return m.prototype.destroy.apply(this,arguments)}}),u={regionClass:C,_initRegions:function(){this.regions=this.regions||{};this._regions={};this.addRegions(b.result(this,"regions"))},_reInitRegions:function(){n(this._regions,"reset")},addRegion:function(a,
c){var b={};b[a]=c;return this.addRegions(b)[a]},addRegions:function(a){if(!b.isEmpty(a))return a=this.normalizeUIValues(a,["selector","el"]),this.regions=b.extend({},this.regions,a),this._addRegions(a)},_addRegions:function(a){var c=this,g={regionClass:this.regionClass,parentEl:b.partial(b.result,this,"el")};return b.reduce(a,function(a,b,d){a[d]=W(b,g);c._addRegion(a[d],d);return a},{})},_addRegion:function(a,c){this.triggerMethod("before:add:region",this,c,a);a._parent=this;this._regions[c]=a;
this.triggerMethod("add:region",this,c,a)},removeRegion:function(a){var c=this._regions[a];this._removeRegion(c,a);return c},removeRegions:function(){var a=this.getRegions();b.each(this._regions,b.bind(this._removeRegion,this));return a},_removeRegion:function(a,c){this.triggerMethod("before:remove:region",this,c,a);a.destroy();delete this.regions[c];delete this._regions[c];this.triggerMethod("remove:region",this,c,a)},emptyRegions:function(){var a=this.getRegions();n(a,"empty");return a},hasRegion:function(a){return!!this.getRegion(a)},
getRegion:function(a){return this._regions[a]},getRegions:function(){return b.clone(this._regions)},showChildView:function(a,c){for(var b=this.getRegion(a),d=arguments.length,o=Array(2<d?d-2:0),f=2;f<d;f++)o[f-2]=arguments[f];return b.show.apply(b,[c].concat(o))},detachChildView:function(a){return this.getRegion(a).detachView()},getChildView:function(a){return this.getRegion(a).currentView}},aa={render:function(a,c){if(!a)throw new h({name:"TemplateNotFoundError",message:"Cannot render the template since its false, null or undefined."});
return(b.isFunction(a)?a:y.get(a))(c)}},qa="behaviors childViewEventPrefix childViewEvents childViewTriggers collectionEvents events modelEvents regionClass regions template templateContext triggers ui".split(" "),G=f.View.extend({constructor:function(a){this.render=b.bind(this.render,this);this._setOptions(a);this.mergeOptions(a,qa);v(this);this._initBehaviors();this._initRegions();var c=Array.prototype.slice.call(arguments);c[0]=this.options;f.View.prototype.constructor.apply(this,c);this.delegateEntityEvents()},
serializeData:function(){return!this.model&&!this.collection?{}:this.model?this.serializeModel():{items:this.serializeCollection()}},serializeModel:function(){return!this.model?{}:b.clone(this.model.attributes)},serializeCollection:function(){return!this.collection?{}:this.collection.map(function(a){return b.clone(a.attributes)})},setElement:function(){var a=!!this.el;f.View.prototype.setElement.apply(this,arguments);a&&(this._isRendered=!!this.$el.length,this._isAttached=E(this.el));this._isRendered&&
this.bindUIElements();return this},render:function(){this._ensureViewIsIntact();this.triggerMethod("before:render",this);this._isRendered&&this._reInitRegions();this._renderTemplate();this.bindUIElements();this._isRendered=!0;this.triggerMethod("render",this);return this},_renderTemplate:function(){var a=this.getTemplate();if(!1!==a){var c=this.mixinTemplateContext(this.serializeData()),a=aa.render(a,c,this);this.attachElContent(a)}},getTemplate:function(){return this.template},mixinTemplateContext:function(){var a=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},c=b.result(this,"templateContext");return b.extend(a,c)},attachElContent:function(a){this.$el.html(a);return this},_removeChildren:function(){this.removeRegions()},_getImmediateChildren:function(){return b.chain(this.getRegions()).map("currentView").compact().value()}});b.extend(G.prototype,t,u);var N=function(a){this._views={};this._indexByModel={};this._indexByCustom={};this._updateLength();b.each(a,b.bind(this.add,this))},ra=N.prototype;
b.each("forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck reduce".split(" "),function(a){ra[a]=function(){var c=[b.values(b.result(this,"_views"))].concat(b.toArray(arguments));return b[a].apply(b,c)}});b.extend(N.prototype,{add:function(a,c){return this._add(a,c)._updateLength()},_add:function(a,c){var b=a.cid;this._views[b]=a;a.model&&(this._indexByModel[a.model.cid]=b);c&&(this._indexByCustom[c]=b);
return this},findByModel:function(a){return this.findByModelCid(a.cid)},findByModelCid:function(a){return this.findByCid(this._indexByModel[a])},findByCustom:function(a){return this.findByCid(this._indexByCustom[a])},findByIndex:function(a){return b.values(this._views)[a]},findByCid:function(a){return this._views[a]},remove:function(a){return this._remove(a)._updateLength()},_remove:function(a){var c=a.cid;a.model&&delete this._indexByModel[a.model.cid];b.some(this._indexByCustom,b.bind(function(a,
b){if(a===c)return delete this._indexByCustom[b],!0},this));delete this._views[c];return this},_updateLength:function(){this.length=b.size(this._views);return this}});var sa="behaviors childView childViewEventPrefix childViewEvents childViewOptions childViewTriggers collectionEvents events filter emptyView emptyViewOptions modelEvents reorderOnSort sort triggers ui viewComparator".split(" "),A=f.View.extend({sort:!0,constructor:function(a){this.render=b.bind(this.render,this);this._setOptions(a);
this.mergeOptions(a,sa);v(this);this._initBehaviors();this.once("render",this._initialEvents);this._initChildViewStorage();this._bufferedChildren=[];var c=Array.prototype.slice.call(arguments);c[0]=this.options;f.View.prototype.constructor.apply(this,c);this.delegateEntityEvents()},_startBuffering:function(){this._isBuffering=!0},_endBuffering:function(){var a=this._isAttached?this._getImmediateChildren():[];this._isBuffering=!1;b.each(a,function(a){j(a,"before:attach",a)});this.attachBuffer(this,
this._createBuffer());b.each(a,function(a){a._isAttached=!0;j(a,"attach",a)});this._bufferedChildren=[]},_getImmediateChildren:function(){return b.values(this.children._views)},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"update",this._onCollectionUpdate),this.listenTo(this.collection,"reset",this.render),this.sort&&this.listenTo(this.collection,"sort",this._sortViews))},_onCollectionAdd:function(a,c,g){c=void 0!==
g.at&&(g.index||c.indexOf(a));if(this.filter||!1===c)c=b.indexOf(this._filteredSortedModels(c),a);this._shouldAddChild(a,c)&&(this._destroyEmptyView(),this._addChild(a,c))},_onCollectionUpdate:function(a,c){this._removeChildModels(c.changes.removed)},_removeChildModels:function(a){var c=!1!==(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).checkEmpty,b=this._getRemovedViews(a);b.length&&(this.children._updateLength(),this._updateIndices(b,!1),c&&this._checkEmpty())},_getRemovedViews:function(a){var c=
this;return b.reduce(a,function(a,b){var d=c.children.findByModel(b);if(!d||d._isDestroyed)return a;c._removeChildView(d);a.push(d);return a},[])},_findGreatestIndexedView:function(a){return b.reduce(a,function(a,b){return!a||a._index<b._index?b:a},void 0)},_removeChildView:function(a){this.triggerMethod("before:remove:child",this,a);this.children._remove(a);a.destroy?a.destroy():V(a);delete a._parent;this.stopListening(a);this.triggerMethod("remove:child",this,a)},setElement:function(){var a=!!this.el;
f.View.prototype.setElement.apply(this,arguments);a&&(this._isAttached=E(this.el));return this},render:function(){this._ensureViewIsIntact();this.triggerMethod("before:render",this);this._renderChildren();this._isRendered=!0;this.triggerMethod("render",this);return this},setFilter:function(a){var c=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).preventRender,b=this.filter!==a;this._isRendered&&!this._isDestroyed&&b&&!c?(c=this._filteredSortedModels(),this.filter=a,b=this._filteredSortedModels(),
this._applyModelDeltas(b,c)):this.filter=a;return this},removeFilter:function(a){return this.setFilter(null,a)},_applyModelDeltas:function(a,c){var g=this,d={};b.each(a,function(a,c){g.children.findByModel(a)||g._onCollectionAdd(a,g.collection,{at:c});d[a.cid]=!0});var f=b.filter(c,function(a){return!d[a.cid]&&g.children.findByModel(a)});this._removeChildModels(f)},reorder:function(){var a=this.children,c=this._filteredSortedModels();if(!c.length&&this._showingEmptyView)return this;if(b.some(c,function(c){return!a.findByModel(c)}))this.render();
else{var g=[],d=a.reduce(function(a,d){var k=b.indexOf(c,d.model);if(-1===k)return g.push(d.model),a;d._index=k;a[k]=d.el;return a},Array(c.length));this.triggerMethod("before:reorder",this);this._appendReorderedChildren(d);this._removeChildModels(g);this.triggerMethod("reorder",this)}return this},resortView:function(){this.reorderOnSort?this.reorder():this._renderChildren();return this},_sortViews:function(){var a=this,c=this._filteredSortedModels();b.find(c,function(c,b){var d=a.children.findByModel(c);
return!d||d._index!==b})&&this.resortView()},_emptyViewIndex:-1,_appendReorderedChildren:function(a){this.$el.append(a)},_renderChildren:function(){this._isRendered&&(this._destroyEmptyView(),this._destroyChildren({checkEmpty:!1}));var a=this._filteredSortedModels();this.isEmpty({processedModels:a})?this._showEmptyView():(this.triggerMethod("before:render:children",this),this._startBuffering(),this._showCollection(a),this._endBuffering(),this.triggerMethod("render:children",this))},_createView:function(a,
c){var b=this._getChildView(a),d=this._getChildViewOptions(a,c);return this.buildChildView(a,b,d)},_setupChildView:function(a,c){a._parent=this;v(a);this._proxyChildEvents(a);this.sort&&(a._index=c)},_showCollection:function(a){b.each(a,b.bind(this._addChild,this));this.children._updateLength()},_filteredSortedModels:function(a){if(!this.collection||!this.collection.length)return[];var c=this.getViewComparator(),b=this.collection.models,a=Math.min(Math.max(a,0),b.length-1);if(c){var d=void 0;a&&(d=
b[a],b=b.slice(0,a).concat(b.slice(a+1)));b=this._sortModelsBy(b,c);d&&b.splice(a,0,d)}return b=this._filterModels(b)},getViewComparator:function(){return this.viewComparator},_filterModels:function(a){var c=this;this.filter&&(a=b.filter(a,function(a,b){return c._shouldAddChild(a,b)}));return a},_sortModelsBy:function(a,c){return"string"===typeof c?b.sortBy(a,function(a){return a.get(c)}):1===c.length?b.sortBy(a,b.bind(c,this)):a.sort(b.bind(c,this))},_showEmptyView:function(){var a=this._getEmptyView();
if(a&&!this._showingEmptyView){this._showingEmptyView=!0;var c=new f.Model,d=this.emptyViewOptions||this.childViewOptions;b.isFunction(d)&&(d=d.call(this,c,this._emptyViewIndex));a=this.buildChildView(c,a,d);this.triggerMethod("before:render:empty",this,a);this.addChildView(a,0);this.triggerMethod("render:empty",this,a)}},_destroyEmptyView:function(){this._showingEmptyView&&(this.triggerMethod("before:remove:empty",this),this._destroyChildren(),delete this._showingEmptyView,this.triggerMethod("remove:empty",
this))},_getEmptyView:function(){var a=this.emptyView;if(a)return this._getView(a)},_getChildView:function(a){var b=this.childView;if(!b)throw new h({name:"NoChildViewError",message:'A "childView" must be specified'});b=this._getView(b,a);if(!b)throw new h({name:"InvalidChildViewError",message:'"childView" must be a view class or a function that returns a view class'});return b},_getView:function(a,c){if(a.prototype instanceof f.View||a===f.View)return a;if(b.isFunction(a))return a.call(this,c)},
_addChild:function(a,b){var d=this._createView(a,b);this.addChildView(d,b);return d},_getChildViewOptions:function(a,c){return b.isFunction(this.childViewOptions)?this.childViewOptions(a,c):this.childViewOptions},addChildView:function(a,b){this.triggerMethod("before:add:child",this,a);this._setupChildView(a,b);this._isBuffering?this.children._add(a):(this._updateIndices(a,!0),this.children.add(a));this._renderView(a);this._attachView(a,b);this.triggerMethod("add:child",this,a);return a},_updateIndices:function(a,
c){if(this.sort){var d=b.isArray(a)?this._findGreatestIndexedView(a):a;this.children.each(function(a){a._index>=d._index&&(a._index+=c?1:-1)})}},_renderView:function(a){a._isRendered||(a.supportsRenderLifecycle||j(a,"before:render",a),a.render(),a.supportsRenderLifecycle||(a._isRendered=!0,j(a,"render",a)))},_attachView:function(a,b){var d=!a._isAttached&&!this._isBuffering&&this._isAttached;d&&j(a,"before:attach",a);this.attachHtml(this,a,b);d&&(a._isAttached=!0,j(a,"attach",a))},buildChildView:function(a,
c,d){a=b.extend({model:a},d);return new c(a)},removeChildView:function(a){if(!a||a._isDestroyed)return a;this._removeChildView(a);this.children._updateLength();this._updateIndices(a,!1);return a},isEmpty:function(a){var c=void 0;b.result(a,"processedModels")?c=a.processedModels:(c=this.collection?this.collection.models:[],c=this._filterModels(c));return 0===c.length},_checkEmpty:function(){this.isEmpty()&&this._showEmptyView()},attachBuffer:function(a,b){a.$el.append(b)},_createBuffer:function(){var a=
document.createDocumentFragment();b.each(this._bufferedChildren,function(b){a.appendChild(b.el)});return a},attachHtml:function(a,b,d){a._isBuffering?a._bufferedChildren.splice(d,0,b):a._insertBefore(b,d)||a._insertAfter(b)},_insertBefore:function(a,b){var d=void 0;this.sort&&b<this.children.length-1&&(d=this.children.find(function(a){return a._index===b+1}));return d?(d.$el.before(a.el),!0):!1},_insertAfter:function(a){this.$el.append(a.el)},_initChildViewStorage:function(){this.children=new N},
_removeChildren:function(){this._destroyChildren({checkEmpty:!1})},_destroyChildren:function(a){if(this.children.length){this.triggerMethod("before:destroy:children",this);var b=this.children.map("model");this._removeChildModels(b,a);this.triggerMethod("destroy:children",this)}},_shouldAddChild:function(a,c){var d=this.filter;return!b.isFunction(d)||d.call(this,a,c,this.collection)},_proxyChildEvents:function(a){this.listenTo(a,"all",this._childViewEventHandler)}});b.extend(A.prototype,t);var ta=
["childViewContainer","template","templateContext"],t=A.extend({constructor:function(a){l("CompositeView is deprecated. Convert to View at your earliest convenience");this.mergeOptions(a,ta);A.prototype.constructor.apply(this,arguments)},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"update",this._onCollectionUpdate),this.listenTo(this.collection,"reset",this.renderChildren),this.sort&&this.listenTo(this.collection,
"sort",this._sortViews))},_getChildView:function(a){var b=this.childView;if(!b)return this.constructor;b=this._getView(b,a);if(!b)throw new h({name:"InvalidChildViewError",message:'"childView" must be a view class or a function that returns a view class'});return b},serializeData:function(){return this.serializeModel()},render:function(){this._ensureViewIsIntact();this._isRendering=!0;this.resetChildViewContainer();this.triggerMethod("before:render",this);this._renderTemplate();this.bindUIElements();
this.renderChildren();this._isRendering=!1;this._isRendered=!0;this.triggerMethod("render",this);return this},renderChildren:function(){(this._isRendered||this._isRendering)&&A.prototype._renderChildren.call(this)},attachBuffer:function(a,b){this.getChildViewContainer(a).append(b)},_insertAfter:function(a){this.getChildViewContainer(this,a).append(a.el)},_appendReorderedChildren:function(a){this.getChildViewContainer(this).append(a)},getChildViewContainer:function(a){if(a.$childViewContainer)return a.$childViewContainer;
var c=void 0;if(a.childViewContainer){if(c=b.result(a,"childViewContainer"),c="@"===c.charAt(0)&&a.ui?a.ui[c.substr(4)]:a.$(c),0>=c.length)throw new h({name:"ChildViewContainerMissingError",message:'The specified "childViewContainer" was not found: '+a.childViewContainer});}else c=a.$el;return a.$childViewContainer=c},resetChildViewContainer:function(){this.$childViewContainer&&(this.$childViewContainer=void 0)}}),u=b.pick(G.prototype,"serializeModel","getTemplate","_renderTemplate","mixinTemplateContext",
"attachElContent");b.extend(t.prototype,u);var ua=["collectionEvents","events","modelEvents","triggers","ui"],u=m.extend({cidPrefix:"mnb",constructor:function(a,c){this.view=c;this.defaults=b.clone(b.result(this,"defaults",{}));this._setOptions(this.defaults,a);this.mergeOptions(this.options,ua);this.ui=b.extend({},b.result(this,"ui"),b.result(c,"ui"));m.apply(this,arguments)},$:function(){return this.view.$.apply(this.view,arguments)},destroy:function(){this.stopListening();return this},proxyViewProperties:function(){this.$el=
this.view.$el;this.el=this.view.el;return this},bindUIElements:function(){this._bindUIElements();return this},unbindUIElements:function(){this._unbindUIElements();return this},getUI:function(a){this.view._ensureViewIsIntact();return this._getUI(a)},delegateEntityEvents:function(){this._delegateEntityEvents(this.view.model,this.view.collection);return this},undelegateEntityEvents:function(){this._undelegateEntityEvents(this.view.model,this.view.collection);return this},getEvents:function(){var a=this,
c=this.normalizeUIKeys(b.result(this,"events"));return b.reduce(c,function(c,d,f){b.isFunction(d)||(d=a[d]);if(d)return f=Z(f),c[f]=b.bind(d,a),c},{})},getTriggers:function(){if(this.triggers){var a=this.normalizeUIKeys(b.result(this,"triggers"));return this._getViewTriggers(this.view,a)}}});b.extend(u.prototype,s,z,$);var va=["region","regionClass"],s=m.extend({cidPrefix:"mna",constructor:function(a){this._setOptions(a);this.mergeOptions(a,va);this._initRegion();m.prototype.constructor.apply(this,
arguments)},regionClass:C,_initRegion:function(){var a=this.region;a&&(this._region=W(a,{regionClass:this.regionClass}))},getRegion:function(){return this._region},showView:function(a){for(var b=this.getRegion(),d=arguments.length,f=Array(1<d?d-1:0),h=1;h<d;h++)f[h-1]=arguments[h];return b.show.apply(b,[a].concat(f))},getView:function(){return this.getRegion().currentView},start:function(a){this.triggerMethod("before:start",this,a);this.triggerMethod("start",this,a);return this}}),wa=["appRoutes",
"controller"],z=f.Router.extend({constructor:function(a){this._setOptions(a);this.mergeOptions(a,wa);f.Router.apply(this,arguments);var b=this.appRoutes,d=this._getController();this.processAppRoutes(d,b);this.on("route",this._processOnRoute,this)},appRoute:function(a,b){var d=this._getController();this._addAppRoute(d,a,b);return this},_processOnRoute:function(a,c){if(b.isFunction(this.onRoute)){var d=b.invert(this.appRoutes)[a];this.onRoute(a,d,c)}},processAppRoutes:function(a,c){var d=this;if(!c)return this;
var f=b.keys(c).reverse();b.each(f,function(b){d._addAppRoute(a,b,c[b])});return this},_getController:function(){return this.controller},_addAppRoute:function(a,c,d){var f=a[d];if(!f)throw new h('Method "'+d+'" was not found on the controller');this.route(c,d,b.bind(f,a))},triggerMethod:r});b.extend(z.prototype,M);var O={},xa=f.Marionette,d=f.Marionette={};d.noConflict=function(){f.Marionette=xa;return this};d.bindEvents=q(w);d.unbindEvents=q(x);d.bindRequests=q(S);d.unbindRequests=q(T);d.mergeOptions=
q(X);d.getOption=q(I);d.normalizeMethods=q(J);d.extend=D;d.isNodeAttached=E;d.deprecate=l;d.triggerMethod=q(r);d.triggerMethodOn=j;d.isEnabled=function(a){return!!O[a]};d.setEnabled=function(a,b){return O[a]=b};d.monitorViewEvents=v;d.Behaviors={};d.Behaviors.behaviorsLookup=function(){throw new h({message:"You must define where your behaviors are stored.",url:"marionette.behaviors.md#behaviorslookup"});};d.Application=s;d.AppRouter=z;d.Renderer=aa;d.TemplateCache=y;d.View=G;d.CollectionView=A;d.CompositeView=
t;d.Behavior=u;d.Region=C;d.Error=h;d.Object=m;d.DEV_MODE=!1;d.FEATURES=O;d.VERSION="3.1.0";return d});;
;
/* module-key = 'com.pyxis.greenhopper.jira:entrypoint-jira-agile-sprint-actions-controller-init', location = 'webpack-generated/agile-bundle.jira-agile-sprint-actions-controller-init.js' */
define("jira-agile-sprint-actions-controller-init",["backbone","underscore","atlassian/libs/factories/backbone.radio-2.0.0","atlassian/libs/factories/marionette-3.1.0","jira/featureflags/feature-manager","jquery","aui/dialog2","aui/flag","jira/analytics"],function(e,t,i,n,o,r,l,a,d){return function(e){function t(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var i={};return t.m=e,t.c=i,t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="","undefined"!=typeof AJS&&(t.p=AJS.contextPath()+"/download/resources/com.pyxis.greenhopper.jira:assets-9d487b80-ee83-472a-901c-f0fe053b75fa/"),t(t.s=7)}([function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=i(2),r=n(o),l=i(1),a=n(l),d=i(9),s=n(d),u=i(11),c=n(u),f=(0,c.default)(r.default,a.default,s.default);t.default=f},function(t,i){t.exports=e},function(e,i){e.exports=t},function(e,t){e.exports=void 0},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),o=function(e){return e&&e.__esModule?e:{default:e}}(n),r=o.default.Model.extend({defaults:{id:"ghx-action-id",text:"Link text",disabled:!1,tooltipText:""}});t.default=r},,,function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var i=new d.default(e),n=new l.default({actionCollection:u.default.getActionCollection(i,t)});return n.bind("action:sprint-edit",function(){var e=new g.default({model:new f.default({id:i.get("id"),name:i.get("name"),goal:i.get("goal")||"",startDate:i.get("startDate"),endDate:i.get("endDate")})});e.bind("sprint-edited",function(e){n.trigger("sprint-edited",{id:e.id,name:e.name,goal:e.goal})}),e.bind("dialogShow",function(){_.default.send({name:"gh.report.sprintreport.sprint.edit.show"})}),e.bind("dialogSave",function(){_.default.send({name:"gh.report.sprintreport.sprint.edit.done"})}),e.bind("dialogCancel",function(){_.default.send({name:"gh.report.sprintreport.sprint.edit.cancel"})}),e.show()}),n.bind("action:sprint-delete",function(){_.default.send({name:"gh.report.sprintreport.sprint.delete.show"});var t=new v.default({sprint:e});t.show(),t.bind("sprint-deleted",function(){n.trigger("sprint-deleted"),_.default.send({name:"gh.report.sprintreport.sprint.delete.done"})}),t.bind("sprint-delete-failed",function(){return _.default.send({name:"gh.report.sprintreport.sprint.delete.error"})})}),n}Object.defineProperty(t,"__esModule",{value:!0}),t.init=o;var r=i(8),l=n(r),a=i(15),d=n(a),s=i(16),u=n(s),c=i(21),f=n(c),p=i(22),g=n(p),h=i(25),v=n(h),m=i(29),_=n(m)},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=i(0),r=n(o),l=i(12),a=n(l),d=r.default.Object.extend({initialize:function(e){this.actionCollection=e.actionCollection,this.view=new a.default({collection:this.actionCollection}),this.view.render(),this.listenTo(this.view,"childview:childview:actionClicked",function(e){this.trigger("action:"+e.id)}.bind(this))}});t.default=d},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=i(2),r=n(o),l=i(1),a=n(l),d=i(10),s=n(d),u=(0,s.default)(r.default,a.default);t.default=u},function(e,t){e.exports=i},function(e,t){e.exports=n},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=i(0),r=n(o),l=i(13),a=n(l);i(14),i(3);var d=r.default.CollectionView.extend({tagName:"ul",className:"aui-list-truncate",childView:a.default}),s=r.default.View.extend({template:GH.tpl.component.sprint.actions.layout,regions:{actions:{el:"#sprint-actions-list"}},onRender:function(){this.showChildView("actions",new d({collection:this.collection}),{replaceElement:!0})}});t.default=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(e){return e&&e.__esModule?e:{default:e}}(n);i(3);var r=o.default.View.extend({tagName:"li",template:GH.tpl.component.sprint.actions.action,events:{"click @ui.link":"_onClicked"},ui:{link:"a"},initialize:function(e){this.model=e.model},onRender:function(){this.$el.find("a").tooltip({html:!0,gravity:"e"})},_onClicked:function(e){e.preventDefault(),this.model.get("disabled")?e.stopPropagation():this.trigger("actionClicked",{id:this.model.get("id")})}});t.default=r},function(e,t){},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),o=function(e){return e&&e.__esModule?e:{default:e}}(n),r=o.default.Model.extend({defaults:{id:void 0,name:void 0,goal:void 0,state:void 0,dateStart:void 0,dateEnd:void 0}});t.default=r},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=i(2),r=n(o),l=i(4),a=n(l),d=i(17),s=n(d),u=i(18),c=i(20),f=n(c),p={getActions:function(e,t){var i=[];if(e.get("state")===f.default.CLOSED){var n=GH.RapidBoard.parallelSprints,o=r.default.any(t,function(e){return e.state===f.default.ACTIVE}),l=!GH.RapidViewConfig.canManageSprints,d=!n&&o,s="";(d||l)&&(s=l?"You need the Manage Sprints permission for all projects in the origin board to manage this sprint. \u003ca class=\"manage-sprint-permission-help\" href=\"#\"\u003eLearn more\u003c/a\u003e":d?"This sprint cant be reopened at the moment! Complete your currently active sprint, or enable Parallel Sprints to work on multiple sprints concurrently.":""),i.push(new a.default({id:"sprint-reopen",text:"Reopen sprint",disabled:d||l,tooltipText:s})),(0,u.isFeatureEnabled)(u.Flags.EDIT_DELETE_CLOSED_SPRINT)&&(i.push(new a.default({id:"sprint-edit",text:"Edit sprint",disabled:l,tooltipText:l?"You need the Manage Sprints permission for all projects in the origin board to manage this sprint. \u003ca class=\"manage-sprint-permission-help\" href=\"#\"\u003eLearn more\u003c/a\u003e":""})),i.push(new a.default({id:"sprint-delete",text:"Delete sprint",disabled:l,tooltipText:l?"You need the Manage Sprints permission for all projects in the origin board to manage this sprint. \u003ca class=\"manage-sprint-permission-help\" href=\"#\"\u003eLearn more\u003c/a\u003e":""})))}return i.push(new a.default({id:"sprint-view-in-issuenav",text:"View sprint in Issue navigator",disabled:!1,tooltipText:""})),i},getActionCollection:function(e,t){return new s.default(this.getActions(e,t))}};t.default=p},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=i(1),r=n(o),l=i(4),a=n(l),d=r.default.Collection.extend({model:a.default});t.default=d},function(e,t,i){"use strict";function n(e){return r.default.isFeatureEnabled(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.Flags=void 0,t.isFeatureEnabled=n;var o=i(19),r=function(e){return e&&e.__esModule?e:{default:e}}(o);t.Flags={EDIT_DELETE_CLOSED_SPRINT:"com.atlassian.jira.agile.darkfeature.edit.closed.sprint"}},function(e,t){e.exports=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={ACTIVE:"ACTIVE",CLOSED:"CLOSED",FUTURE:"FUTURE"};t.default=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),o=function(e){return e&&e.__esModule?e:{default:e}}(n),r=o.default.Model.extend({defaults:{id:void 0,name:void 0,goal:void 0,startDate:void 0,endDate:void 0}});t.default=r},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=i(23),r=n(o),l=i(0),a=n(l),d=i(24),s=n(d),u=a.default.Object.extend({initialize:function(e){this.model=e.model,this.view=new r.default({model:this.model}),this.listenTo(this.view,"click:confirm",this.confirm.bind(this)),this.listenTo(this.view,"click:cancel",this.cancel.bind(this)),this.rendered=this.view.render()},show:function(){this.dialog=AJS.dialog2(this.view.$el),this.dialog.show(),this.trigger("dialogShow")},confirm:function(e){this.model.set("errorMessage",void 0);var t=e.sprintName,i=e.sprintGoal,n={name:t,goal:i};this.model.set(n),GH.Ajax.post({bareUrl:GH.Ajax.buildPublicRestUrl("sprint/"+this.model.get("id")),data:n,deferErrorHandling:!0}).done(function(e){this.trigger("dialogSave"),this.trigger("sprint-edited",{id:this.model.get("id"),name:t,goal:i}),this.dialog.remove()}.bind(this)).fail(function(e,t,i){var n=[];e.hasContextualErrors()&&(0,s.default)(e.getContextualErrors()).each(function(e,t){n=n.concat(t.errors)}),e.hasGlobalErrors()&&(0,s.default)(e.getGlobalErrors()).each(function(e,t){n.push(t)}),n.length>0?this.model.set("errors",n):this.model.set("errors",[{message:"Sorry, an error occurred trying to save sprint data - please try again."}])}.bind(this))},cancel:function(){this.trigger("dialogCancel"),this.dialog.remove()}});t.default=u},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(e){return e&&e.__esModule?e:{default:e}}(n);i(3);var r=o.default.View.extend({template:GH.tpl.component.sprint.actions.sprintEditDialog,events:{"click @ui.confirmButton":"_onConfirm","click @ui.cancelButton":"_onCancel","click @ui.close":"_onCancel","submit @ui.form":"_onConfirm"},ui:{sprintName:"#sprint-name",sprintGoal:"#sprint-goal",confirmButton:"#ghx-sprint-edit-dialog-confirm-button",cancelButton:"#ghx-sprint-edit-dialog-cancel-button",close:".aui-dialog2-header-close",form:"form"},modelEvents:{"change:errors":"render"},initialize:function(e){this.model=e.model},_onConfirm:function(e){e.preventDefault(),this.trigger("click:confirm",{sprintName:this.ui.sprintName.val(),sprintGoal:this.ui.sprintGoal.val()})},_onCancel:function(){this.trigger("click:cancel")}});t.default=r},function(e,t){e.exports=r},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=i(0),r=n(o),l=i(26),a=n(l),d=i(28),s=n(d),u=r.default.Object.extend({initialize:function(e){this.view=new a.default({sprint:e.sprint}),this.listenTo(this.view,"confirm",this._confirm)},show:function(){this.view.show()},_confirm:function(e){var t=this;GH.Ajax.del({url:"/sprint/"+e.sprintId}).done(function(){t.trigger("sprint-deleted"),t._showSuccessMessage()}).fail(function(){t.trigger("sprint-delete-failed")})},_showSuccessMessage:function(){(0,s.default)({type:"success",title:"Sprint has been deleted."})}});t.default=u},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=i(1),r=n(o),l=i(0),a=n(l),d=i(27),s=n(d);i(3);var u=a.default.View.extend({template:GH.tpl.component.sprint.actions.deleteSprintDialog,events:{"click #ghx-sprint-delete-dialog-confirm":"_onConfirm","click #ghx-sprint-delete-dialog-cancel":"hide","click .aui-dialog2-header-close":"hide"},initialize:function(e){this.model=new r.default.Model,this.model.set("sprintName",e.sprint.name),this.model.set("sprintId",e.sprint.id),this.render(),this.dialog=(0,s.default)(this.$el)},show:function(){this.dialog.show()},hide:function(){this.dialog.remove()},_onConfirm:function(){this.trigger("confirm",{sprintId:this.model.get("sprintId")}),this.hide()}});t.default=u},function(e,t){e.exports=l},function(e,t){e.exports=a},function(e,t){e.exports=d}])});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/detail/DetailsObjectFactory.js' */
!function(e){var i=!1;AJS.namespace("GH.DetailsObjectFactory",null,{getDetailsFieldRenderer:function(){return this.isInlineEditableEnabled()?require("jira-agile/rapid/ui/detail/inlineedit/inline-editable-details-field-renderer"):require("jira-agile/rapid/ui/detail/legacy/legacy-details-field-renderer")},getDetailsModel:function(){return this.isInlineEditableEnabled()?require("jira-agile/rapid/ui/detail/inlineedit/inline-editable-details-model"):require("jira-agile/rapid/ui/detail/legacy/legacy-details-model")},mergeDetailsViewTemplate:function(){i||(this.isInlineEditableEnabled()?e.extend(GH.tpl.detailview,GH.tpl.inlineEditableDetailview):e.extend(GH.tpl.detailview,GH.tpl.legacyDetailview),i=!0)},isInlineEditableEnabled:function(){return GH.Features.EDITABLE_DETAIL_VIEW_ENABLED.isEnabled()}})}(require("underscore"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/RapidBoard.soy' */
// This file was automatically generated from RapidBoard.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.board.x.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.board == 'undefined') { GH.tpl.board = {}; }
if (typeof GH.tpl.board.x == 'undefined') { GH.tpl.board.x = {}; }


GH.tpl.board.x.renderNoViewsAnonymous = function(opt_data, opt_ignored) {
  return '<div class="aui-message info ghx-notify"><p><span class="aui-icon icon-generic"></span>' + soy.$$escapeHtml("No boards are currently available.") + '</p><p><span class="aui-icon icon-generic"></span>' + soy.$$filterNoAutoescape(AJS.format("Boards may be visible if you {0}log in{1}.",'<a href="' + opt_data.loginUrl + '">','</a>')) + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderNoViewsAnonymous.soyTemplateName = 'GH.tpl.board.x.renderNoViewsAnonymous';
}


GH.tpl.board.x.renderNoViews = function(opt_data, opt_ignored) {
  return '<div class="aui-message info ghx-notify"><p><span class="aui-icon icon-generic"></span>' + soy.$$escapeHtml("No boards are currently available.") + '</p><p><span class="aui-icon icon-generic"></span>' + soy.$$filterNoAutoescape(AJS.format("{0}Create a new board{1}.",'<a class="js-view-action-create">','</a>')) + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderNoViews.soyTemplateName = 'GH.tpl.board.x.renderNoViews';
}


GH.tpl.board.x.renderRapidBoard = function(opt_data, opt_ignored) {
  return '<div id="ghx-header"><div id="ghx-modes-tools"><div id="ghx-view-modes"></div><span id="ghx-view-pluggable" /><div id="ghx-view-tools"></div><div id="ghx-view-presentation"></div></div><div id="ghx-view-selector"></div></div><div id="ghx-content-main" class="ghx-content-main"><div id="ghx-errors"></div><div id="ghx-notify"></div><div id="ghx-rabid"><div id="ghx-operations"></div><div id="ghx-plan"></div><div id="ghx-report" class="ghx-chart"></div><div id="ghx-work" class="ghx-work"></div></div></div><div class="ghx-throbber"></div>';
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderRapidBoard.soyTemplateName = 'GH.tpl.board.x.renderRapidBoard';
}


GH.tpl.board.x.renderToolSections = function(opt_data, opt_ignored) {
  var output = '';
  var sectionList19 = opt_data.sections;
  var sectionListLen19 = sectionList19.length;
  for (var sectionIndex19 = 0; sectionIndex19 < sectionListLen19; sectionIndex19++) {
    var sectionData19 = sectionList19[sectionIndex19];
    output += '<div class="ghx-view-section ' + soy.$$escapeHtml(sectionData19.cssClass) + '"><button id="' + soy.$$escapeHtml(sectionData19.id) + '-button" class="aui-button ghx-actions-tools ghx-dropdown-trigger">' + soy.$$escapeHtml(sectionData19.label) + '</button><div class="aui-list" id="' + soy.$$escapeHtml(sectionData19.id) + '-content" style="display: none;"></div></div>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderToolSections.soyTemplateName = 'GH.tpl.board.x.renderToolSections';
}


GH.tpl.board.x.renderSectionContent = function(opt_data, opt_ignored) {
  var output = '';
  var subItemList31 = opt_data.subItems;
  var subItemListLen31 = subItemList31.length;
  for (var subItemIndex31 = 0; subItemIndex31 < subItemListLen31; subItemIndex31++) {
    var subItemData31 = subItemList31[subItemIndex31];
    output += GH.tpl.board.x.renderSubItem({subItem: subItemData31, isFirst: subItemIndex31 == 0, isLast: subItemIndex31 == subItemListLen31 - 1});
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderSectionContent.soyTemplateName = 'GH.tpl.board.x.renderSectionContent';
}


GH.tpl.board.x.renderSubItem = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.subItem.type == 'section') {
    output += '<ul id="' + soy.$$escapeHtml(opt_data.subItem.id) + '" class="aui-list-section ' + soy.$$escapeHtml(opt_data.subItem.cssClass) + ' ' + ((opt_data.isFirst) ? ' aui-first' : '') + ((opt_data.isLast) ? ' aui-last' : '') + '">';
    var subItemList52 = opt_data.subItem.subItems;
    var subItemListLen52 = subItemList52.length;
    for (var subItemIndex52 = 0; subItemIndex52 < subItemListLen52; subItemIndex52++) {
      var subItemData52 = subItemList52[subItemIndex52];
      output += '<li class="aui-list-item">' + GH.tpl.board.x.renderSubItem({subItem: subItemData52, isFirst: subItemIndex52 == 0, isLast: subItemIndex52 == subItemListLen52 - 1}) + '</li>';
    }
    output += '</ul>';
  } else if (opt_data.subItem.type == 'webItem') {
    output += '<a role="button" href="' + soy.$$escapeHtml(opt_data.subItem.url) + '" ' + ((opt_data.subItem.id) ? 'id="' + soy.$$escapeHtml(opt_data.subItem.id) + '" ' : '') + 'class="aui-list-item-link ' + soy.$$escapeHtml(opt_data.subItem.cssClass) + '">' + soy.$$escapeHtml(opt_data.subItem.label) + '</a>';
  } else if (opt_data.subItem.type == 'webPanel') {
    output += '<div ' + ((opt_data.subItem.id) ? 'id="' + soy.$$escapeHtml(opt_data.subItem.id) + '" ' : '') + 'class="' + soy.$$escapeHtml(opt_data.subItem.cssClass) + '">' + soy.$$filterNoAutoescape(opt_data.subItem.html) + '</div>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderSubItem.soyTemplateName = 'GH.tpl.board.x.renderSubItem';
}


GH.tpl.board.x.renderWelcomeProjectMessageKanban = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$filterNoAutoescape(AJS.format("You have created a Kanban board \x3ca href\x3d\x22{0}\x22\x3e{1}\x3c/a\x3e and a project \x3ca href\x3d\x22{2}\x22\x3e{3}\x3c/a\x3e.",GH.Ajax.CONTEXT_PATH + '/secure/RapidBoard.jspa?rapidView=' + opt_data.rapidView.id,opt_data.rapidView.name,GH.Ajax.CONTEXT_PATH + '/plugins/servlet/project-config/' + opt_data.project.key,opt_data.project.name)) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderWelcomeProjectMessageKanban.soyTemplateName = 'GH.tpl.board.x.renderWelcomeProjectMessageKanban';
}


GH.tpl.board.x.renderWelcomeProjectMessageScrum = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$filterNoAutoescape(AJS.format("You have created a Scrum board \x3ca href\x3d\x22{0}\x22\x3e{1}\x3c/a\x3e and a project \x3ca href\x3d\x22{2}\x22\x3e{3}\x3c/a\x3e.",GH.Ajax.CONTEXT_PATH + '/secure/RapidBoard.jspa?rapidView=' + opt_data.rapidView.id,opt_data.rapidView.name,GH.Ajax.CONTEXT_PATH + '/plugins/servlet/project-config/' + opt_data.project.key,opt_data.project.name)) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderWelcomeProjectMessageScrum.soyTemplateName = 'GH.tpl.board.x.renderWelcomeProjectMessageScrum';
}


GH.tpl.board.x.renderWelcomeProjectSampleMessageKanban = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$filterNoAutoescape(AJS.format("You have created a sample Kanban board \x3ca href\x3d\x22{0}\x22\x3e{1}\x3c/a\x3e and a sample project \x3ca href\x3d\x22{2}\x22\x3e{3}\x3c/a\x3e.",GH.Ajax.CONTEXT_PATH + '/secure/RapidBoard.jspa?rapidView=' + opt_data.rapidView.id,opt_data.rapidView.name,GH.Ajax.CONTEXT_PATH + '/plugins/servlet/project-config/' + opt_data.project.key,opt_data.project.name)) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderWelcomeProjectSampleMessageKanban.soyTemplateName = 'GH.tpl.board.x.renderWelcomeProjectSampleMessageKanban';
}


GH.tpl.board.x.renderWelcomeProjectSampleMessageScrum = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$filterNoAutoescape(AJS.format("You have created a sample Scrum board \x3ca href\x3d\x22{0}\x22\x3e{1}\x3c/a\x3e and a sample project \x3ca href\x3d\x22{2}\x22\x3e{3}\x3c/a\x3e.",GH.Ajax.CONTEXT_PATH + '/secure/RapidBoard.jspa?rapidView=' + opt_data.rapidView.id,opt_data.rapidView.name,GH.Ajax.CONTEXT_PATH + '/plugins/servlet/project-config/' + opt_data.project.key,opt_data.project.name)) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderWelcomeProjectSampleMessageScrum.soyTemplateName = 'GH.tpl.board.x.renderWelcomeProjectSampleMessageScrum';
}


GH.tpl.board.x.renderWelcomeViewMessageKanban = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$filterNoAutoescape(AJS.format("Kanban board \x3ca href\x3d\x22{0}\x22\x3e{1}\x3c/a\x3e has been created.",GH.Ajax.CONTEXT_PATH + '/secure/RapidBoard.jspa?rapidView=' + opt_data.rapidView.id,opt_data.rapidView.name)) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderWelcomeViewMessageKanban.soyTemplateName = 'GH.tpl.board.x.renderWelcomeViewMessageKanban';
}


GH.tpl.board.x.renderWelcomeViewMessageScrum = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$filterNoAutoescape(AJS.format("Scrum board \x3ca href\x3d\x22{0}\x22\x3e{1}\x3c/a\x3e has been created.",GH.Ajax.CONTEXT_PATH + '/secure/RapidBoard.jspa?rapidView=' + opt_data.rapidView.id,opt_data.rapidView.name)) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderWelcomeViewMessageScrum.soyTemplateName = 'GH.tpl.board.x.renderWelcomeViewMessageScrum';
}


GH.tpl.board.x.renderCreateViewMessage = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$filterNoAutoescape(AJS.format("View \x3ca href\x3d\x22{0}\x22\x3e{1}\x3c/a\x3e has been created.",GH.Ajax.CONTEXT_PATH + '/secure/RapidBoard.jspa?rapidView=' + opt_data.rapidView.id,opt_data.rapidView.name)) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderCreateViewMessage.soyTemplateName = 'GH.tpl.board.x.renderCreateViewMessage';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/state/RapidBoardUrlState.js' */
define("jira-agile/rapid/state/rapid-board-url-state",["jira-agile/rapid/global-events","underscore"],function(e,a){"use strict";var i=void 0;e.on("pre-initialization",function(){i=require("jira-agile/rapid/ui/plan/plan-controller")});var d={};return d.self="RapidBoardUrlState",d.isApplicable=function(e){return!0},d.getNormalizedFromUrl=function(e,a){a.rapidView=GH.RapidBoard.UrlState.normalizeNumberParam(e.rapidView),delete a.projectKey;var i=GH.RapidBoard.UrlState.normalizeStringParam(e.projectKey,null);null!==i&&(a.projectKey=i);var d=GH.RapidBoard.UrlState.normalizeStringParam(e.view,""),t=GH.RapidBoard.UrlState.normalizeBooleanParam(e.useStoredSettings,!1);if(!t||""!==d)switch(GH.RapidBoard.State.isLoadingKanPlanWhileItDisabled(d)&&(d="detail"),d){case"reporting":a.mode="report";break;case"planning":a.mode="plan",a.detailOpened=!0;break;case"planning.nodetail":a.mode="plan",a.detailOpened=!1;break;case"detail":a.mode="work",a.detailOpened=!0;break;case"":default:a.mode="work",a.detailOpened=!1}},d.toUrl=function(e,i){switch(a.isUndefined(e.rapidView)||(i.rapidView=e.rapidView),delete i.projectKey,a.isUndefined(e.projectKey)||(i.projectKey=e.projectKey),e.mode){case"work":e.detailOpened&&(i.view="detail");break;case"report":i.view="reporting";break;case"plan":e.detailOpened?i.view="planning":i.view="planning.nodetail"}},d.getNormalizedFromInternal=function(e){e.rapidView=GH.RapidBoard.State.getRapidViewId(),e.mode=GH.RapidBoard.State.getMode(),delete e.projectKey;var i=GH.RapidBoard.State.getProjectKey();a.isUndefined(i)||(e.projectKey=i),"work"===e.mode?e.detailOpened=GH.RapidBoard.State.isDetailsViewOpened():"plan"===e.mode&&(e.detailOpened=GH.RapidBoard.State.isDetailsViewPlanOpened())},d.updateInternalFromNormalized=function(e){a.isUndefined(e.rapidView)||GH.RapidBoard.State.setRapidViewId(e.rapidView);var d=e.mode,t=e.detailOpened;a.isUndefined(d)||GH.RapidBoard.State.setMode(e.mode),GH.RapidBoard.State.setProjectKey(e.projectKey),a.isUndefined(t)||("plan"===d?i.setDetailViewOpenedState(e.detailOpened):GH.WorkController.setDetailViewOpenedState(e.detailOpened))},d}),AJS.namespace("GH.RapidBoardUrlState",null,require("jira-agile/rapid/state/rapid-board-url-state"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/VersionsModel.js' */
define("jira-agile/rapid/versions-model",["underscore"],function(e){"use strict";var t=function(e){this.projects=e,this.fixVersions=void 0,this.canCreateVersion=!1,this.linkToDevStatusVersionAvailable=!1};return t.prototype.setProjects=function(e){this.projects=e},t.prototype.updateRawData=function(e){this.canCreateVersion=e.canCreateVersion,this.linkToDevStatusVersionAvailable=e.isLinkToDevStatusVersionAvailable,this.fixVersions=t.buildFixVersions(e,this.projects),this.versionsPerProject=t.buildVersionsPerProject(e,this.projects,this.fixVersions)},t.prototype.isValid=function(){return!!this.fixVersions},t.prototype.getVersions=function(){return this.fixVersions},t.prototype.getProjects=function(){return this.projects},t.prototype.canUserCreateVersion=function(){return this.canCreateVersion},t.prototype.isLinkToDevStatusVersionAvailable=function(){return this.linkToDevStatusVersionAvailable},t.prototype.getVersionsForIds=function(t){var r=e.chain(t).filter(function(t){return e.has(this.fixVersions,t)},this).map(function(e){return this.fixVersions[e]},this).value();return this.getFixVersionFromArray(r)},t.prototype.getVersion=function(t){return e.has(this.fixVersions,t)?this.fixVersions[t]:null},t.prototype.getVersionsIdsForProject=function(t){return e.has(this.versionsPerProject,t)?this.versionsPerProject[t]:null},t.prototype.getVersionsForProject=function(e){var t=this.getVersionsIdsForProject(e);return t?this.getVersionsForIds(t):null},t.prototype.getFixVersionFromArray=function(t){var r=e.sortBy(t,function(e){return e.sequence}),i={};return i.versions=r,i.formattedVersions=e.map(r,this.getToolTip).join(", "),i},t.prototype.getToolTip=function(e){return e.released?e.name+" (released)":e.name},t.prototype.sort=function(e,t){return e.project?e.project.key===t.project.key?e.sequence-t.sequence:e.project.key<t.project.key?-1:1:e.sequence-t.sequence},t.prototype.getUnreleasedVersionList=function(){return e.chain(e.toArray(this.fixVersions)).where({released:!1}).value().sort(this.sort)},t.prototype.getAllVersions=function(){return e.chain(e.toArray(this.fixVersions)).value().sort(this.sort)},t.prototype.containsId=function(t){return e.has(this.fixVersions,t)},t.prototype.isEmpty=function(){return e.isEmpty(this.fixVersions)},t.prototype.hasMultiProjects=function(){return this.projects.length>1},t.prototype.updateVersion=function(t){return!e.isUndefined(this.fixVersions[t.id])&&(this.fixVersions[t.id]=t,!0)},t.buildFixVersions=function(t,r){var i={};return e.each(t.versionsPerProject,function(t,o){o=parseInt(o,10),e.each(t,function(t){i[t.id]=e.clone(t),i[t.id].project=e.findWhere(r,{id:o})})}),i},t.buildVersionsPerProject=function(t){var r={};return e.each(t.versionsPerProject,function(t,i){r[parseInt(i,10)]=e.pluck(t,"id")}),r},t}),AJS.namespace("GH.VersionsModel",null,require("jira-agile/rapid/versions-model"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/VersionsDataService.js' */
define("jira-agile/rapid/versions-data-service",["jira-agile/rapid/ajax","underscore"],function(e,r){function n(){}return n.prototype.getVersionsModel=function(r){return e.get({url:"/xboard/plan/backlog/versions.json",data:{rapidViewId:r}},"versionsList").andThen(function(e){var r=new GH.VersionsModel(e.projects);return r.updateRawData(e.versionData),r})},n.prototype.getSimpleVersions=function(e){return this.getVersionsModel(e).andThen(function(e){return r.map(e.getAllVersions(),function(e){return{id:e.id,name:e.project?e.project.key+": "+e.name:e.name}})})},n.prototype.versionExists=function(e,n){return r.some(e,function(e){return e.id===n})},n}),AJS.namespace("GH.VersionsDataService",null,require("jira-agile/rapid/versions-data-service")),AJS.namespace("GH.versionsDataService",null,new(require("jira-agile/rapid/versions-data-service")));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/SprintsDataService.js' */
define("jira-agile/rapid/sprints-data-service",["jira-agile/rapid/ajax","underscore"],function(e,i){function r(){}return r.prototype.getSimpleSprints=function(i){return e.get({url:"/sprintquery/"+i,data:{includeHistoricSprints:!0,includeFutureSprints:!1}},"getSimpleSprints").andThen(function(e){return e.sprints})},r}),AJS.namespace("GH.SprintsDataService",null,require("jira-agile/rapid/sprints-data-service")),AJS.namespace("GH.sprintsDataService",null,new(require("jira-agile/rapid/sprints-data-service")));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/EpicsDataService.js' */
define("jira-agile/rapid/epics-data-service",["jira/util/formatter","underscore"],function(e,i){"use strict";function n(){}var a=null;return n.prototype={getEpics:function(e){return GH.Ajax.get({url:"/xboard/plan/backlog/epics.json",data:{rapidViewId:e}},"epicsList").andThen(function(e){return a=e.supportsPages,e.epics})},getSimpleEpics:function(n){return this.getEpics(n).andThen(function(n){return i.map(n,function(i){return{id:i.key,name:i.epicLabel?i.key+": "+i.epicLabel:"unlabelled"+"-"+i.key,linkedPagesCount:i.linkedPagesCount}})})},epicExists:function(e,n){return i.some(e,function(e){return e.id===n})},supportsPages:function(){if(null===a)throw"epic data has not been loaded yet";return a}},n}),AJS.namespace("GH.EpicsDataService",null,require("jira-agile/rapid/epics-data-service")),AJS.namespace("GH.epicsDataService",null,new(require("jira-agile/rapid/epics-data-service")));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/configuration/DeleteRapidViewDialog.js' */
define("jira-agile/rapid/configuration/delete-rapid-view-dialog",["jira-agile/rapid/ajax","jira/util/formatter","jquery","jira/util/strings"],function(e,i,a,t){var d={};return d.showDeleteDialog=function(e,n){var l=GH.Dialog.create({width:500,height:350,id:"ghx-rapidview-delete"});a("#"+l.id).addClass("ghx-dialog"),l.addHeader("Delete Board"),l.addPanel("","panel"),l.getCurrentPanel().html(i.format("Are you sure you want to delete board \u003cstrong\u003e{0}\u003c/strong\u003e?",t.escapeHtml(String(n)))),l.addButton("Delete",function(){l.disableControls(),l.dispose(),d.doDelete(e,n)},"aui-button"),GH.Dialog.addCancelButton(l),l.show(),a("#"+l.id).find(".dialog-button-panel .button-panel-cancel-link").focus()},d.doDelete=function(i,a){e.del({url:"/rapidview/"+i}).done(function(e){d.handleSuccess(i,a)})},d.handleSuccess=function(e,d){a(GH).trigger("ghx.rapidview.deleted",{rapidViewId:e,rapidViewName:d,message:i.format("Successfully deleted board \u003cstrong\u003e{0}\u003c/strong\u003e",t.escapeHtml(String(d)))})},d}),AJS.namespace("GH.RapidBoard.DeleteDialog",null,require("jira-agile/rapid/configuration/delete-rapid-view-dialog"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/OnboardingPlaceholders.js' */
GH.planOnboarding={renderOnboarding:function(){},refresh:function(){},hide:function(){}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/QuickEdit.js' */
GH.RapidBoard.QuickEdit={},GH.RapidBoard.QuickEdit.fieldChanges={},GH.RapidBoard.QuickEdit.init=function(){AJS.$(AJS).unbind("QuickEdit.sessionComplete"),AJS.$(AJS).bind("QuickEdit.sessionComplete",function(){JIRA&&JIRA.IssueNavigator&&JIRA.IssueNavigator.setIssueUpdatedMsg&&JIRA.IssueNavigator.setIssueUpdatedMsg(),GH.Notification.showIssueMessage(),AJS.$(GH).trigger("issueUpdated",{issueId:GH.IssueOperationShortcuts.getSelectedIssueId(),source:"quickEdit",fieldChanges:GH.RapidBoard.QuickEdit.fieldChanges}),GH.RapidBoard.QuickEdit.fieldChanges={},GH.IssueOperationShortcuts.clearOverrideSelectedIssue()}),JIRA.bind("Dialog.hide",function(e,i,s){"edit-issue-dialog"!==i.attr("id")||s!==JIRA.Dialog.HIDE_REASON.cancel&&s!==JIRA.Dialog.HIDE_REASON.escape||(GH.IssueOperationShortcuts.clearOverrideSelectedIssue(),GH.RapidBoard.QuickEdit.fieldChanges={})}),AJS.$(GH).bind("QuickEdit.fieldChange",function(e,i){GH.RapidBoard.QuickEdit.fieldChanges[i.fieldId]=i.fieldChangeData}),JIRA&&JIRA.Dialog&&JIRA.Dialog.shouldShowIssueKeyInTitle&&(JIRA.Dialog.shouldShowIssueKeyInTitle=function(){return!0})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/QuickCreate.js' */
GH.RapidBoard.QuickCreate={},function(){var e=require("jira-agile/rapid/analytics-tracker");GH.RapidBoard.QuickCreate.analytics=new e("gh.quickcreate")}(),GH.RapidBoard.QuickCreate.init=function(){function e(e){return function(s,i){AJS.$(GH).trigger("issueCreated",{issues:i,isSubtask:e});var t=_.pluck(i,"issueKey");GH.RapidBoard.QuickCreate.analytics.trigger("create",t)}}JIRA.unbind("QuickCreateIssue.sessionComplete"),JIRA.bind("QuickCreateIssue.sessionComplete",e(!1)),JIRA.unbind("QuickCreateSubtask.sessionComplete"),JIRA.bind("QuickCreateSubtask.sessionComplete",e(!0)),JIRA.unbind("QuickCreateEpic.sessionComplete"),JIRA.bind("QuickCreateEpic.sessionComplete",e(!1))},GH.RapidBoard.QuickCreate.showCreatedIssuesMessage=function(e,s){var i=GH.EpicConfig.getEpicIssueTypeId(),t=GH.SprintConfig.getSprintFieldId(),a={issues:e.issues,isSubtask:!!e.isSubtask,isRankable:GH.BacklogModel.isRankable()||GH.RankingModel.isRankable()};if(s){var u=_.filter(e.issues,function(e){return e.createdIssueDetails&&e.createdIssueDetails.fields.issuetype.id!=i}),r=!_.find(e.issues,function(e){return!(!e.createdIssueDetails||!e.createdIssueDetails.fields[t])&&e.createdIssueDetails.fields[t].length>0});a=_.extend(a,{isWorkMode:!0,issuesExcludingEpics:u,shouldShowAddToSprints:r},s)}GH.Notification.showSuccess(GH.tpl.quickcreate.renderFilteredIssuesSuccess(a),{timeout:1e4})},GH.RapidBoard.QuickCreate.showSubtaskCreatedMessage=function(e){GH.Notification.showSuccess(GH.tpl.quickcreate.renderSubtasksAddedMessage({issues:e.issues}),{timeout:1e4})},GH.RapidBoard.QuickCreate.showCreatedEpicsMessage=function(e,s){GH.Notification.showSuccess(GH.tpl.quickcreate.renderEpicsAddedMessage({isVisible:s,epics:e.issues}),{timeout:1e4})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/QuickCreate.soy' */
// This file was automatically generated from QuickCreate.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.quickcreate.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.quickcreate == 'undefined') { GH.tpl.quickcreate = {}; }


GH.tpl.quickcreate.renderFilteredIssuesSuccess = function(opt_data, opt_ignored) {
  var output = '';
  var issueLinksHtml__soy3 = '' + GH.tpl.quickcreate.issueLinksHtml(opt_data);
  var sprintHtml__soy6 = '' + ((opt_data.allIssuesMatchBoard && opt_data.canManageSprints && opt_data.issuesExcludingEpics.length > 0 && opt_data.isRankable) ? GH.tpl.quickcreate.sprintHtml({sprints: opt_data.sprints, issues: opt_data.issuesExcludingEpics}) : '');
  output += (opt_data.isSubtask) ? soy.$$filterNoAutoescape(AJS.format("Your {0,choice,1#sub-task {1} has|1\x3csub-tasks {1} have} been created but {0,choice,1#is|1\x3cone or more are} not currently visible.",opt_data.issues.length,issueLinksHtml__soy3)) : (opt_data.isWorkMode) ? ((opt_data.allIssuesAddedToBacklog) ? soy.$$filterNoAutoescape(AJS.format("{0,choice,1#issue {1} has|1\x3cissues {1} have} been created and added to your backlog.",opt_data.issues.length,issueLinksHtml__soy3)) : soy.$$filterNoAutoescape(AJS.format("{0,choice,1#issue {1} has|1\x3cissues {1} have} been created but {0,choice,1#is|1\x3cone or more are} not currently visible.",opt_data.issues.length,issueLinksHtml__soy3))) + ((opt_data.shouldShowAddToSprints) ? ' ' + soy.$$filterNoAutoescape(sprintHtml__soy6) : '') : soy.$$filterNoAutoescape(AJS.format("{0,choice,1#issue {1} has|1\x3cissues {1} have} been created but {0,choice,1#is|1\x3cone or more are} not currently visible.",opt_data.issues.length,issueLinksHtml__soy3));
  return output;
};
if (goog.DEBUG) {
  GH.tpl.quickcreate.renderFilteredIssuesSuccess.soyTemplateName = 'GH.tpl.quickcreate.renderFilteredIssuesSuccess';
}


GH.tpl.quickcreate.issueLinksHtml = function(opt_data, opt_ignored) {
  var output = '';
  var issueList33 = opt_data.issues;
  var issueListLen33 = issueList33.length;
  for (var issueIndex33 = 0; issueIndex33 < issueListLen33; issueIndex33++) {
    var issueData33 = issueList33[issueIndex33];
    output += '<a class="js-issue-link" href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(issueData33.issueKey) + '">' + soy.$$escapeHtml(issueData33.issueKey) + '</a>' + ((! (issueIndex33 == issueListLen33 - 1)) ? ', ' : '');
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.quickcreate.issueLinksHtml.soyTemplateName = 'GH.tpl.quickcreate.issueLinksHtml';
}


GH.tpl.quickcreate.issueKeysAttribute = function(opt_data, opt_ignored) {
  var output = '';
  var issueList46 = opt_data.issues;
  var issueListLen46 = issueList46.length;
  for (var issueIndex46 = 0; issueIndex46 < issueListLen46; issueIndex46++) {
    var issueData46 = issueList46[issueIndex46];
    output += soy.$$escapeHtml(issueData46.issueKey) + ((! (issueIndex46 == issueListLen46 - 1)) ? ',' : '');
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.quickcreate.issueKeysAttribute.soyTemplateName = 'GH.tpl.quickcreate.issueKeysAttribute';
}


GH.tpl.quickcreate.sprintHtml = function(opt_data, opt_ignored) {
  var output = '';
  var issueKeys__soy53 = '' + GH.tpl.quickcreate.issueKeysAttribute(opt_data);
  if (issueKeys__soy53.length > 0) {
    var sprintList58 = opt_data.sprints;
    var sprintListLen58 = sprintList58.length;
    for (var sprintIndex58 = 0; sprintIndex58 < sprintListLen58; sprintIndex58++) {
      var sprintData58 = sprintList58[sprintIndex58];
      output += '<a class="js-add-new-issue-to-sprint" data-issue-keys="' + soy.$$escapeHtml(issueKeys__soy53) + '" data-sprint-id="' + soy.$$escapeHtml(sprintData58.id) + '">' + soy.$$escapeHtml(AJS.format("Add {0,choice,1# |1\x3call} to {1}",opt_data.issues.length,sprintData58.name)) + '</a> ' + ((! (sprintIndex58 == sprintListLen58 - 1)) ? '| ' : '');
    }
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.quickcreate.sprintHtml.soyTemplateName = 'GH.tpl.quickcreate.sprintHtml';
}


GH.tpl.quickcreate.renderSubtasksAddedMessage = function(opt_data, opt_ignored) {
  var output = '';
  var issueLinksHtml__soy71 = '' + GH.tpl.quickcreate.issueLinksHtml(opt_data);
  output += soy.$$filterNoAutoescape(AJS.format("Your {0,choice,1#sub-task {1} has|1\x3csub-tasks {1} have} been created but {0,choice,1#is|1\x3cone or more are} not currently visible.",opt_data.issues.length,issueLinksHtml__soy71));
  return output;
};
if (goog.DEBUG) {
  GH.tpl.quickcreate.renderSubtasksAddedMessage.soyTemplateName = 'GH.tpl.quickcreate.renderSubtasksAddedMessage';
}


GH.tpl.quickcreate.renderEpicsAddedMessage = function(opt_data, opt_ignored) {
  var output = '';
  var issueLinksHtml__soy77 = '' + GH.tpl.quickcreate.issueLinksHtml({issues: opt_data.epics});
  output += (opt_data.isVisible) ? soy.$$filterNoAutoescape(AJS.format("Your {0,choice,1#epic {1} has|1\x3cepics {1} have} been created.",opt_data.epics.length,issueLinksHtml__soy77)) : soy.$$filterNoAutoescape(AJS.format("Your {0,choice,1#epic {1} has|1\x3cepics {1} have} been created but {0,choice,1#is|1\x3cone or more are} not currently visible.",opt_data.epics.length,issueLinksHtml__soy77));
  return output;
};
if (goog.DEBUG) {
  GH.tpl.quickcreate.renderEpicsAddedMessage.soyTemplateName = 'GH.tpl.quickcreate.renderEpicsAddedMessage';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/ActiveSprintEmptyView.js' */
define("jira-agile/rapid/ui/work/ActiveSprintEmptyView",["jquery"],function(e){"use strict";function i(i,t,p,l,c){var E,A,w;l?(A=AJS.format(a,p),E=GH.tpl.rapid.activesprintemptyview.noMappedColumns):i?(A=AJS.format(r,p),E=GH.tpl.rapid.activesprintemptyview.noActiveSprint,w=d):t?(A=AJS.format(n,p),E=GH.tpl.rapid.activesprintemptyview.clearAllFilters,w=s):(A=AJS.format(o,p),E=GH.tpl.rapid.activesprintemptyview.noIssue),this.linkAddr=A,this.view=e(E({linkAddr:A})),this.secondLineView=this.view.find("p"),this.ctaLink=this.secondLineView.find("a").click(w),this.ctaLinkHandler=w,GH.WorkController.on(GH.WorkController.EVENT_NAMES.ON_RELOAD_EMPTY_STATE_VIEW,this._reloadView,this),e(c).append(this.view)}var t=AJS.contextPath(),r=t+"/secure/RapidBoard.jspa?rapidView={0}&view=planning.nodetail",n=t+"/secure/RapidBoard.jspa?rapidView={0}",o=t+"/secure/RapidView.jspa?rapidView={0}",a=t+"/secure/RapidView.jspa?rapidView={0}&tab=columns",p={HIDDEN:"hidden",DASHBOARD_MODE:"dashboard-mode",NO_MAPPED_COLUMNS_MODE:"no-mapped-columns-mode"},d=function(e){e.preventDefault(),GH.WorkController.trigger(GH.WorkController.EVENT_NAMES.ON_PLAN_MODE)},s=function(e){e.preventDefault(),GH.WorkController.trigger(GH.WorkController.EVENT_NAMES.ON_ALL_FILTERS_CLEARING)};return i.prototype.handleOnDashboardMode=function(){this.view.addClass(p.DASHBOARD_MODE)},i.prototype.handleNoMappedColumnsMode=function(){this.view.addClass(p.NO_MAPPED_COLUMNS_MODE)},i.prototype._reloadView=function(e){e&&this.secondLineView.removeClass(p.HIDDEN)},i});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/ActiveSprintEmptyView.soy' */
// This file was automatically generated from ActiveSprintEmptyView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.rapid.activesprintemptyview.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.rapid == 'undefined') { GH.tpl.rapid = {}; }
if (typeof GH.tpl.rapid.activesprintemptyview == 'undefined') { GH.tpl.rapid.activesprintemptyview = {}; }


GH.tpl.rapid.activesprintemptyview.noMappedColumns = function(opt_data, opt_ignored) {
  return '' + GH.tpl.rapid.activesprintemptyview.emptyMessage({heading: "Statuses are not mapped to the board columns", contentHtml: AJS.format("Check the \x3ca href\x3d\x22{0}\x22\x3eboard configuration\x3c/a\x3e",opt_data.linkAddr)});
};
if (goog.DEBUG) {
  GH.tpl.rapid.activesprintemptyview.noMappedColumns.soyTemplateName = 'GH.tpl.rapid.activesprintemptyview.noMappedColumns';
}


GH.tpl.rapid.activesprintemptyview.noActiveSprint = function(opt_data, opt_ignored) {
  return '' + GH.tpl.rapid.activesprintemptyview.emptyMessage({heading: "There are no active sprints", contentHtml: AJS.format("Start sprints in the \x3ca href\x3d\x22{0}\x22\x3eBacklog\x3c/a\x3e",opt_data.linkAddr)});
};
if (goog.DEBUG) {
  GH.tpl.rapid.activesprintemptyview.noActiveSprint.soyTemplateName = 'GH.tpl.rapid.activesprintemptyview.noActiveSprint';
}


GH.tpl.rapid.activesprintemptyview.clearAllFilters = function(opt_data, opt_ignored) {
  return '' + GH.tpl.rapid.activesprintemptyview.emptyMessage({heading: "Issues are currently filtered", contentHtml: AJS.format("\x3ca href\x3d\x22{0}\x22\x3eClear all filters\x3c/a\x3e",opt_data.linkAddr)});
};
if (goog.DEBUG) {
  GH.tpl.rapid.activesprintemptyview.clearAllFilters.soyTemplateName = 'GH.tpl.rapid.activesprintemptyview.clearAllFilters';
}


GH.tpl.rapid.activesprintemptyview.noIssue = function(opt_data, opt_ignored) {
  return '' + GH.tpl.rapid.activesprintemptyview.emptyMessage({heading: "No issues are currently visible", contentHtml: AJS.format("Check the \x3ca href\x3d\x22{0}\x22\x3eboard configuration\x3c/a\x3e",opt_data.linkAddr)});
};
if (goog.DEBUG) {
  GH.tpl.rapid.activesprintemptyview.noIssue.soyTemplateName = 'GH.tpl.rapid.activesprintemptyview.noIssue';
}


GH.tpl.rapid.activesprintemptyview.emptyMessage = function(opt_data, opt_ignored) {
  return '<div class="ghx-no-active-sprint-message"><div class="ghx-no-active-sprint-content"><div class="ghx-no-active-sprint-icon"></div><h3>' + soy.$$escapeHtml(opt_data.heading) + '</h3><p class="hidden">' + soy.$$filterNoAutoescape(opt_data.contentHtml) + '</p></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.activesprintemptyview.emptyMessage.soyTemplateName = 'GH.tpl.rapid.activesprintemptyview.emptyMessage';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/SwimlaneViewText.js' */
define("jira-agile/rapid/ui/work/swimlane-view-text",["jira-agile/rapid/ui/work/grid-data-controller","jira/util/formatter"],function(e,t){"use strict";return{getIssueCountLabel:function(e,r){return e.parentKey?t.format("{0,choice,0#0 sub-tasks|1#1 sub-task|1\u003c{0,number} sub-tasks}",r):t.format("{0}{0,choice,0# issues|1# issue|1\u003c issues}",r)},getSwimlaneTitle:function(t,r){var i=this.getIssueCountLabel(t,r);if(t.parentKey){var a=e.getModel().getIssueDataByKey(t.parentKey);a&&(i+=" - "+a.summary)}else t.description?i+=" - "+t.description:t.query&&(i+=" - "+t.query);return i}}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/SwimlaneView.soy' */
// This file was automatically generated from SwimlaneView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.rapid.swimlane.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.rapid == 'undefined') { GH.tpl.rapid = {}; }
if (typeof GH.tpl.rapid.swimlane == 'undefined') { GH.tpl.rapid.swimlane = {}; }


GH.tpl.rapid.swimlane.renderSwimlane = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-swimlane' + ((opt_data.index == 0) ? ' ghx-first' : '') + ((opt_data.collapsed) ? ' ghx-closed' : '') + '" swimlane-id="' + soy.$$escapeHtml(opt_data.swimlane.id) + '" >';
  if (! (opt_data.index == 0 && opt_data.swimlane.defaultSwimlane)) {
    var parent__soy15 = opt_data.issues[opt_data.swimlane.parentKey];
    var lastColumn__soy16 = opt_data.columns[opt_data.columns.length - 1];
    var parentOutOfSync__soy17 = opt_data.swimlane.parentOutOfSync;
    output += '<div class="ghx-swimlane-header' + ((opt_data.swimlane.defaultSwimlane) ? ' ghx-swimlane-default' : '') + ((parent__soy15 && parent__soy15.done) ? ' ghx-done' : '') + ((parent__soy15 && parent__soy15.flagged) ? ' ghx-flagged' : '') + ((parent__soy15 && parentOutOfSync__soy17) ? ' ghx-out-of-sync' : '') + ((opt_data.selectedIssueKeys[opt_data.swimlane.parentKey]) ? ' ghx-selected' : '') + '"' + ((parent__soy15) ? 'data-issue-key="' + soy.$$filterNoAutoescape(parent__soy15.key) + '" data-issue-id="' + soy.$$filterNoAutoescape(parent__soy15.id) + '" aria-label="' + soy.$$escapeHtml(AJS.format("Swimlane for {0}",opt_data.swimlaneStrategy + ': ' + parent__soy15.key + ' ' + parent__soy15.summary)) + '" role="group"' : 'aria-label="' + soy.$$escapeHtml(AJS.format("Swimlane for {0}",opt_data.swimlaneStrategy + ': ' + opt_data.swimlane.name)) + '"') + 'tabindex="0" data-swimlane-id="' + soy.$$escapeHtml(opt_data.swimlane.id) + '" >' + GH.tpl.rapid.swimlane.renderSwimlaneHeaderContent({swimlane: opt_data.swimlane, swimlaneTitle: opt_data.swimlaneTitle, swimlaneStrategy: opt_data.swimlaneStrategy, parent: parent__soy15, issueCount: opt_data.issueCount}) + ((parent__soy15 && parentOutOfSync__soy17) ? ' <div class="ghx-bandaid"><button class="aui-button js-sync">' + soy.$$escapeHtml(AJS.format("Move to {0}",lastColumn__soy16.name)) + '</button></div>' : '') + '</div>';
  }
  output += GH.tpl.rapid.swimlane.renderIssueColumns(opt_data) + '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.swimlane.renderSwimlane.soyTemplateName = 'GH.tpl.rapid.swimlane.renderSwimlane';
}


GH.tpl.rapid.swimlane.renderSwimlaneHeaderContent = function(opt_data, opt_ignored) {
  return '<div role="button" tabindex="0" class="ghx-expander js-expander" aria-expanded="true" title="' + soy.$$escapeHtml("Toggle swimlane visibility") + '"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-expanded"></span></div><div class="ghx-heading" title="' + soy.$$escapeHtml(opt_data.swimlaneTitle) + '">' + ((opt_data.swimlane.avatarUrl) ? '<span class="ghx-swimlane-avatar" title="' + soy.$$escapeHtml(opt_data.swimlane.name) + '"><img src="' + soy.$$escapeHtml(opt_data.swimlane.avatarUrl) + '"></span>' : '') + ((opt_data.parent) ? '<a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(opt_data.parent.key) + '" role="button" class="ghx-parent-key js-detailview">' + soy.$$escapeHtml(opt_data.swimlane.name) + '</a>' : (opt_data.swimlaneStrategy == 'project') ? '<a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(opt_data.swimlane.name) + '" role="button">' + soy.$$escapeHtml(opt_data.swimlane.name) + '</a>' : '<span role="button">' + soy.$$escapeHtml(opt_data.swimlane.name) + '</span>') + '<span class="ghx-info">' + ((opt_data.parent) ? GH.tpl.status.renderText({status: opt_data.parent.status}) : '') + '<span class="ghx-description">' + ((opt_data.swimlane.parentKey) ? soy.$$escapeHtml(AJS.format("{0,choice,0#0 sub-tasks|1#1 sub-task|1\x3c{0,number} sub-tasks}",opt_data.issueCount)) : soy.$$escapeHtml(AJS.format("{0}{0,choice,0# issues|1# issue|1\x3c issues}",opt_data.issueCount))) + '</span></span>' + ((opt_data.parent) ? '<span class="ghx-summary"><span class="aui-lozenge aui-lozenge-current">' + soy.$$escapeHtml("Flagged") + '</span>' + soy.$$escapeHtml(opt_data.parent.summary) + '</span>' : (opt_data.swimlaneStrategy == 'project') ? '<span>' + soy.$$escapeHtml(opt_data.swimlane.description) + '</span>' : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.swimlane.renderSwimlaneHeaderContent.soyTemplateName = 'GH.tpl.rapid.swimlane.renderSwimlaneHeaderContent';
}


GH.tpl.rapid.swimlane.renderStalkerSwimlane = function(opt_data, opt_ignored) {
  return '<div id="ghx-swimname"><b class="ghx-flip"></b><b class="ghx-flop"></b><h2><span class="ghx-swimlane-icon"></span><span class="ghx-name"></span><span class="ghx-qty"></span><span class="ghx-summary"></span></h2></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.swimlane.renderStalkerSwimlane.soyTemplateName = 'GH.tpl.rapid.swimlane.renderStalkerSwimlane';
}


GH.tpl.rapid.swimlane.renderEmptySwimlaneColumns = function(opt_data, opt_ignored) {
  var output = '<ul class="ghx-columns ghx-sad-columns">';
  var columnList141 = opt_data.columns;
  var columnListLen141 = columnList141.length;
  for (var columnIndex141 = 0; columnIndex141 < columnListLen141; columnIndex141++) {
    var columnData141 = columnList141[columnIndex141];
    output += '<li class="ghx-column' + ((columnData141.minBusted) ? ' ghx-busted ghx-busted-min' : '') + ((columnData141.maxBusted) ? ' ghx-busted ghx-busted-max' : '') + '" data-id="' + soy.$$escapeHtml(columnData141.id) + '" ></li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.swimlane.renderEmptySwimlaneColumns.soyTemplateName = 'GH.tpl.rapid.swimlane.renderEmptySwimlaneColumns';
}


GH.tpl.rapid.swimlane.renderColumnsHeader = function(opt_data, opt_ignored) {
  var output = '<div id="ghx-column-header-group" class="ghx-column-header-group' + ((opt_data.statistics.fieldConfigured) ? ' ghx-has-stats' : '') + '"><ul id="ghx-column-headers" class="ghx-column-headers">';
  var columnList160 = opt_data.columns;
  var columnListLen160 = columnList160.length;
  for (var columnIndex160 = 0; columnIndex160 < columnListLen160; columnIndex160++) {
    var columnData160 = columnList160[columnIndex160];
    output += '<li class="ghx-column' + ((columnData160.minBusted) ? ' ghx-busted ghx-busted-min' : '') + ((columnData160.maxBusted) ? ' ghx-busted ghx-busted-max' : '') + '" data-id="' + soy.$$escapeHtml(columnData160.id) + '" >' + ((opt_data.statistics.fieldConfigured) ? GH.tpl.rapid.swimlane.renderColumnCount({column: columnData160}) : '') + '<h2>' + soy.$$escapeHtml(columnData160.name) + '</h2>' + ((opt_data.statistics.fieldConfigured) ? '<div class="ghx-limits">' + GH.tpl.rapid.swimlane.renderColumnConstraints({column: columnData160}) + '</div>' : '') + '</li>';
  }
  output += '</ul><div id="js-swimlane-header-stalker"></div></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.swimlane.renderColumnsHeader.soyTemplateName = 'GH.tpl.rapid.swimlane.renderColumnsHeader';
}


GH.tpl.rapid.swimlane.renderColumnCount = function(opt_data, opt_ignored) {
  return '<div class="ghx-qty">' + ((opt_data.column.stats.total > opt_data.column.stats.visible) ? soy.$$escapeHtml(AJS.format("{0} of {1}",opt_data.column.stats.visible,opt_data.column.stats.total)) : soy.$$escapeHtml(opt_data.column.stats.total)) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.swimlane.renderColumnCount.soyTemplateName = 'GH.tpl.rapid.swimlane.renderColumnCount';
}


GH.tpl.rapid.swimlane.renderColumnConstraints = function(opt_data, opt_ignored) {
  return '' + ((opt_data.column.min || opt_data.column.min == 0) ? '<span class="ghx-constraint ghx-busted ghx-busted-min" title="' + soy.$$escapeHtml("Minimum Constraint") + '">' + soy.$$escapeHtml("Min") + ' ' + soy.$$escapeHtml(opt_data.column.min) + '</span>' : '') + ((opt_data.column.max || opt_data.column.max == 0) ? '<span class="ghx-constraint ghx-busted ghx-busted-max" title="' + soy.$$escapeHtml("Maximum Constraint") + '">' + soy.$$escapeHtml("Max") + ' ' + soy.$$escapeHtml(opt_data.column.max) + '</span>' : '');
};
if (goog.DEBUG) {
  GH.tpl.rapid.swimlane.renderColumnConstraints.soyTemplateName = 'GH.tpl.rapid.swimlane.renderColumnConstraints';
}


GH.tpl.rapid.swimlane.renderIssueColumns = function(opt_data, opt_ignored) {
  var output = '<ul class="ghx-columns">';
  var columnList216 = opt_data.columns;
  var columnListLen216 = columnList216.length;
  for (var columnIndex216 = 0; columnIndex216 < columnListLen216; columnIndex216++) {
    var columnData216 = columnList216[columnIndex216];
    output += GH.tpl.rapid.swimlane.renderIssueColumn({swimlane: opt_data.swimlane, column: columnData216, cells: opt_data.cells, issues: opt_data.issues, groupData: opt_data.groupData, displayIssueKeys: opt_data.displayIssueKeys, selectedIssueKeys: opt_data.selectedIssueKeys, mainSelectedIssue: opt_data.mainSelectedIssue, statLabel: opt_data.statLabel, isRankable: opt_data.isRankable, showEpic: opt_data.showEpic, isLastSwimlane: opt_data.isLastSwimlane});
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.swimlane.renderIssueColumns.soyTemplateName = 'GH.tpl.rapid.swimlane.renderIssueColumns';
}


GH.tpl.rapid.swimlane.renderIssueColumn = function(opt_data, opt_ignored) {
  return '<li class="ghx-column' + ((opt_data.column.minBusted) ? ' ghx-busted ghx-busted-min' : '') + ((opt_data.column.maxBusted) ? ' ghx-busted ghx-busted-max' : '') + '" data-column-id="' + soy.$$escapeHtml(opt_data.column.id) + '">' + GH.tpl.rapid.swimlane.renderIssues({issueKeys: opt_data.cells[opt_data.swimlane.id][opt_data.column.id], issues: opt_data.issues, groupData: opt_data.groupData, displayIssueKeys: opt_data.displayIssueKeys, selectedIssueKeys: opt_data.selectedIssueKeys, mainSelectedIssue: opt_data.mainSelectedIssue, statLabel: opt_data.statLabel, isRankable: opt_data.isRankable, showEpic: opt_data.showEpic}) + ((opt_data.isLastSwimlane && ((opt_data.column == null) ? null : opt_data.column.limitJql)) ? GH.tpl.rapid.swimlane.renderShowOldIssuesPanel({searchUrl: opt_data.column.limitJql}) : '') + '</li>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.swimlane.renderIssueColumn.soyTemplateName = 'GH.tpl.rapid.swimlane.renderIssueColumn';
}


GH.tpl.rapid.swimlane.renderShowOldIssuesPanel = function(opt_data, opt_ignored) {
  return '<div class="ghx-show-old"><p class="ghx-show-old-description">' + soy.$$escapeHtml("We\x27re only showing recently modified issues.") + '</p><a class="ghx-show-old-link" href="' + soy.$$escapeHtml(opt_data.searchUrl) + '"><span class="aui-icon aui-icon-small aui-iconfont-search">Search</span>' + soy.$$escapeHtml("Looking for an older issue?") + '</a></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.swimlane.renderShowOldIssuesPanel.soyTemplateName = 'GH.tpl.rapid.swimlane.renderShowOldIssuesPanel';
}


GH.tpl.rapid.swimlane.renderIssues = function(opt_data, opt_ignored) {
  var output = '';
  var issueKeyList267 = opt_data.issueKeys;
  var issueKeyListLen267 = issueKeyList267.length;
  for (var issueKeyIndex267 = 0; issueKeyIndex267 < issueKeyListLen267; issueKeyIndex267++) {
    var issueKeyData267 = issueKeyList267[issueKeyIndex267];
    var issue__soy268 = opt_data.issues[issueKeyData267];
    if (opt_data.groupData.beginGroups[issue__soy268.id]) {
      if (! issue__soy268.parentId) {
        output += '<div class="ghx-parent-group ghx-home js-parent-drag" role="listitem" tabindex="0" aria-label="' + soy.$$escapeHtml(issue__soy268.key) + ' ' + soy.$$escapeHtml(issue__soy268.summary) + '" data-issue-id="' + soy.$$filterNoAutoescape(issue__soy268.id) + '" data-issue-key="' + soy.$$filterNoAutoescape(issue__soy268.key) + '">';
      } else {
        var parentIssue__soy285 = opt_data.issues[issue__soy268.parentKey];
        output += ((opt_data.groupData.fakeParents[issue__soy268.id] && parentIssue__soy285) ? '<div class="ghx-parent-group ghx-away js-fake-parent js-parent-drag" data-issue-key="' + soy.$$filterNoAutoescape(parentIssue__soy285.key) + '">' + ((opt_data.groupData.drawFakeParents) ? '<div class="ghx-parent-stub" title="' + soy.$$filterNoAutoescape(parentIssue__soy285.key) + ' &mdash; ' + soy.$$escapeHtml(parentIssue__soy285.summary) + '"><div class="ghx-group"><span class="ghx-key">' + soy.$$filterNoAutoescape(parentIssue__soy285.key) + '</span><span class="ghx-summary">' + soy.$$escapeHtml(parentIssue__soy285.summary) + '</span></div></div>' : '') : '') + '<div class="ghx-subtask-group">';
      }
    }
    output += GH.tpl.rapid.swimlane.renderIssue({issue: issue__soy268, displayIssueKeys: opt_data.displayIssueKeys, selectedIssueKeys: opt_data.selectedIssueKeys, mainSelectedIssue: opt_data.mainSelectedIssue, statLabel: opt_data.statLabel, isRankable: opt_data.isRankable, showEpic: opt_data.showEpic}) + ((opt_data.groupData.endGroups[issue__soy268.id]) ? '</div></div>' : '');
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.swimlane.renderIssues.soyTemplateName = 'GH.tpl.rapid.swimlane.renderIssues';
}


GH.tpl.rapid.swimlane.renderIssue = function(opt_data, opt_ignored) {
  var output = '<div class="js-detailview ghx-issue js-issue ghx-has-avatar' + ((opt_data.issue.parentKey) ? ' ghx-issue-subtask' : ' js-parent-drag') + ((! opt_data.isRankable) ? ' ghx-not-rankable' : '') + ((opt_data.issue.timeInColumn) ? ' ghx-days-' + soy.$$escapeHtml(opt_data.issue.timeInColumn.days) : '') + ((opt_data.issue.done) ? ' ghx-done' : '') + ((opt_data.selectedIssueKeys[opt_data.issue.key]) ? ' ghx-selected' + ((opt_data.mainSelectedIssue == opt_data.issue.key) ? ' ghx-selected-primary' : '') : '') + ((opt_data.issue.flagged) ? ' ghx-flagged' : '') + ' ghx-type-' + soy.$$escapeHtml(opt_data.issue.typeId) + '" data-issue-id="' + soy.$$filterNoAutoescape(opt_data.issue.id) + '" data-issue-key="' + soy.$$filterNoAutoescape(opt_data.issue.key) + '" role="listitem" tabindex="0" aria-label="' + soy.$$escapeHtml(opt_data.issue.key) + ' ' + soy.$$escapeHtml(opt_data.issue.summary) + '"><div class="ghx-issue-content"><div class="ghx-issue-fields">' + ((opt_data.issue.typeUrl) ? '<span class="ghx-type" title="' + soy.$$escapeHtml(opt_data.issue.typeName) + '"><img src="' + soy.$$escapeHtml(opt_data.issue.typeUrl) + '"></span>' : '') + '<div class="ghx-key"><a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(opt_data.issue.key) + '" title="' + soy.$$escapeHtml(opt_data.issue.key) + '" tabindex="-1" class="js-key-link">' + soy.$$escapeHtml(opt_data.displayIssueKeys[opt_data.issue.key]) + '</a></div><div class="ghx-summary" title="' + soy.$$escapeHtml(opt_data.issue.summary) + '"><span class="ghx-inner">' + soy.$$escapeHtml(opt_data.issue.summary) + '</span></div></div>' + ((opt_data.showEpic && opt_data.issue.epic && opt_data.issue.epicField) ? '<div class="ghx-highlighted-fields"><div class="ghx-highlighted-field">' + GH.tpl.field.epicLink.renderEpicLink({field: opt_data.issue.epicField, removableIfAllowed: false}) + '</div></div>' : '');
  if (opt_data.issue.extraFields) {
    output += '<div class="ghx-extra-fields">';
    var extraFieldList387 = opt_data.issue.extraFields;
    var extraFieldListLen387 = extraFieldList387.length;
    for (var extraFieldIndex387 = 0; extraFieldIndex387 < extraFieldListLen387; extraFieldIndex387++) {
      var extraFieldData387 = extraFieldList387[extraFieldIndex387];
      output += '<div class="ghx-extra-field-row">' + GH.tpl.extraFields.renderExtraField({extraField: extraFieldData387}) + '</div>';
    }
    output += '</div>';
  }
  output += '</div><div class="ghx-avatar">' + GH.tpl.avatar.renderIssueAvatar({issue: opt_data.issue, tooltipHtml: soy.$$escapeHtml("Assignee") + ': ' + soy.$$escapeHtml(opt_data.issue.assigneeName)}) + '</div>' + GH.tpl.rapid.swimlane.renderStatisticsValue({stat: opt_data.issue.trackingStatistic ? opt_data.issue.trackingStatistic : opt_data.issue.estimateStatistic, label: opt_data.statLabel}) + '<div class="ghx-flags">' + ((opt_data.issue.flagged) ? '<span class="ghx-flag"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-flag" title="' + soy.$$escapeHtml("Flagged") + '"></span></span>' : (opt_data.issue.priorityUrl) ? '<span class="ghx-priority" title="' + soy.$$escapeHtml(opt_data.issue.priorityName) + '"><img src="' + soy.$$escapeHtml(opt_data.issue.priorityUrl) + '"></span>' : '') + '</div>' + ((opt_data.issue.timeInColumn) ? '<div class="ghx-days" title="' + soy.$$filterNoAutoescape(AJS.format("{0,choice,0#{0} days|1#{0} day|1\x3c{0} days} in this column",opt_data.issue.timeInColumn.days)) + '"><b></b></div>' : '') + ((opt_data.issue.color != null) ? '<div class="ghx-grabber" style="background-color:' + soy.$$escapeHtml(opt_data.issue.color) + ';"></div>' : '<div class="ghx-grabber ghx-grabber-transparent"></div>') + '<div class="ghx-move-count"><b></b></div></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.swimlane.renderIssue.soyTemplateName = 'GH.tpl.rapid.swimlane.renderIssue';
}


GH.tpl.rapid.swimlane.renderStatisticsValue = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.stat && opt_data.stat.statFieldId != 'issueCount') {
    output += '<div class="ghx-end"><div class="ghx-corner">';
    var corner__soy436 = '' + ((opt_data.stat.statFieldValue && opt_data.stat.statFieldValue.text) ? soy.$$escapeHtml(opt_data.stat.statFieldValue.text) : ' ');
    var tooltip__soy442 = '' + ((opt_data.stat.statFieldValue && opt_data.stat.statFieldValue.text) ? soy.$$escapeHtml(opt_data.label) : soy.$$escapeHtml("Unestimated"));
    output += aui.badges.badge({extraAttributes: {title: tooltip__soy442}, text: corner__soy436}) + '</div></div>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.swimlane.renderStatisticsValue.soyTemplateName = 'GH.tpl.rapid.swimlane.renderStatisticsValue';
}


GH.tpl.rapid.swimlane.renderReleaseVersionControl = function(opt_data, opt_ignored) {
  return '<a id="ghx-release" class="ghx-release ' + ((! opt_data.canRelease) ? 'ghx-disabled' : '') + '" role="button" title="' + ((opt_data.canRelease) ? soy.$$escapeHtml("Create and release a version from this column") : soy.$$escapeHtml("You must have Project Administrator permissions to release a version")) + '">' + soy.$$escapeHtml("Release\u2026") + '</a>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.swimlane.renderReleaseVersionControl.soyTemplateName = 'GH.tpl.rapid.swimlane.renderReleaseVersionControl';
}


GH.tpl.rapid.swimlane.renderEndOfPool = function(opt_data, opt_ignored) {
  return '<span id="js-pool-end" data-rendered="' + soy.$$escapeHtml(opt_data.rendered) + '"></span>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.swimlane.renderEndOfPool.soyTemplateName = 'GH.tpl.rapid.swimlane.renderEndOfPool';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/ReleaseVersionDialog.js' */
GH.Dialogs.ReleaseVersionDialog={},GH.Dialogs.ReleaseVersionDialog.EVENT_VERSION_RELEASED="versionReleased",GH.Dialogs.ReleaseVersionDialog.EVENT_TIMEOUT="timeout",GH.Dialogs.ReleaseVersionDialog.dialog=void 0,function(){var e=require("jira-agile/rapid/analytics-tracker");GH.Dialogs.ReleaseVersionDialog.analytics=new e("gh.release")}(),GH.Dialogs.ReleaseVersionDialog.showDialog=function(e,a){AJS.dim(),AJS.$(".aui-blanket").html('<span class="ghx-wait"></span>'),GH.Ajax.get({url:"/release/model.json",data:{rapidViewId:e,columnId:a}},"showReleaseVersionDialog").done(GH.Dialogs.ReleaseVersionDialog.renderDialog).fail(GH.Dialog.undim)},GH.Dialogs.ReleaseVersionDialog.renderDialog=function(e){_.each(e.projectIssueDetails,function(e){e.name=AJS.escapeHTML(String(e.name))});var a=GH.Dialogs.ReleaseVersionDialog.dialog=GH.Dialog.create({width:500,height:390,id:"ghx-dialog-release",onCancelFn:function(){GH.Dialogs.ReleaseVersionDialog.dialog=void 0,GH.Dialogs.ReleaseVersionDialog.analytics.trigger("cancel",e.projectIssueDetails.length)}});AJS.$("#"+a.id).addClass("ghx-dialog"),a.addHeader("Release"),a.addPanel("","panel"),a.getCurrentPanel().html(GH.tpl.dialogs.releaseversion.renderReleaseDialog({model:e})),a.addButton("Release",function(){GH.Dialogs.ReleaseVersionDialog.release(e)},"aui-button aui-button-primary"),a.addCancel("Cancel",function(){a.cancel()}),AJS.$(".aui-dialog").addClass("ghx-dialog");new Calendar;Calendar.setup({firstDay:0,inputField:"ghx-release-date",button:"ghx-release-date_trigger_c",align:"Tl",singleClick:!0,positionStyle:"fixed",ifFormat:e.datePickerFormat}),GH.Dialogs.ReleaseVersionDialog.analytics.trigger("start",e.projectIssueDetails.length),a.show(),AJS.$(".aui-blanket").empty(),AJS.$("#ghx-release-name").focus()},GH.Dialogs.ReleaseVersionDialog.disposeDialog=function(){return GH.Dialogs.ReleaseVersionDialog.dialog&&(GH.Dialogs.ReleaseVersionDialog.dialog.dispose(),GH.Dialogs.ReleaseVersionDialog.dialog=void 0),this},GH.Dialogs.ReleaseVersionDialog.release=function(e){GH.Dialogs.ReleaseVersionDialog.analytics.trigger("complete",e.projectIssueDetails.length);var a=GH.Dialogs.ReleaseVersionDialog.dialog,i=AJS.$("#ghx-release-name").val();a.disableControls(),a.showSpinner(),GH.Ajax.post({url:"/release",data:{versionName:i,releaseDate:AJS.$("#ghx-release-date").val(),description:AJS.$("#ghx-release-desc").val(),rapidViewId:e.rapidViewId,columnId:e.columnId},errorContextMap:{name:"#ghx-release-name",releaseDate:"#ghx-release-date_trigger_c"},onGlobalError:function(l){504==l.getGlobalErrors()[0].status&&(a.addPage(),a.addPanel("","timeout"),a.addHeader("Release"),a.getCurrentPanel().html(GH.tpl.dialogs.releaseversion.renderReleaseDialogTimeout({model:AJS.$.extend({versionName:i},e)})),a.addButton("Reload board",function(){AJS.$(GH).trigger(GH.Dialogs.ReleaseVersionDialog.EVENT_TIMEOUT),GH.Dialogs.ReleaseVersionDialog.analytics.trigger("timeout","issueCount",e.projectIssueDetails.length),GH.Dialogs.ReleaseVersionDialog.disposeDialog()}),GH.Notification.showErrors(l.error,!1))}}).done(function(e){GH.Dialogs.ReleaseVersionDialog.disposeDialog(),GH.Notification.showSuccess(e.success.message),AJS.$(GH).trigger(GH.Dialogs.ReleaseVersionDialog.EVENT_VERSION_RELEASED)}).fail(function(){var e=GH.Dialogs.ReleaseVersionDialog.dialog;e&&(e.hideSpinner(),e.enableControls())})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/ReleaseVersionDialog.soy' */
// This file was automatically generated from ReleaseVersionDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.releaseversion.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.releaseversion == 'undefined') { GH.tpl.dialogs.releaseversion = {}; }


GH.tpl.dialogs.releaseversion.renderReleaseDialog = function(opt_data, opt_ignored) {
  var output = '<div id="version-new">';
  if (opt_data.model.projectIssueDetails.length > 0) {
    output += '<ul id="ghx-release-navigator">';
    var projectList7 = opt_data.model.projectIssueDetails;
    var projectListLen7 = projectList7.length;
    for (var projectIndex7 = 0; projectIndex7 < projectListLen7; projectIndex7++) {
      var projectData7 = projectList7[projectIndex7];
      output += '<li>';
      var issues_link__soy9 = '' + GH.tpl.dialogs.releaseversion.renderIssuesLink({model: opt_data.model, project: projectData7});
      var project_name__soy13 = '<strong>' + soy.$$escapeHtml(projectData7.name) + '</strong>';
      output += soy.$$filterNoAutoescape(AJS.format("{0} will be released from {1}",issues_link__soy9,project_name__soy13)) + '</li>';
    }
    output += '</ul>';
  }
  output += '<form action="#" class="aui"><fieldset><div class="field-group"><label for="ghx-release-name">' + soy.$$escapeHtml("Version name") + '</label><input id="ghx-release-name" type="text" class="text"><div id="query-results"></div></div><div class="field-group"><label for="ghx-release-date">' + soy.$$escapeHtml("Release Date") + '</label><input type="text" id="ghx-release-date" value="' + soy.$$escapeHtml(opt_data.model.defaultReleaseDate) + '" class="text"><span id="ghx-release-date_trigger_c" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar">&nbsp;</span></div><div class="field-group"><label for="ghx-release-desc">' + soy.$$escapeHtml("Description") + '</label><textarea id="ghx-release-desc" rows="4" class="textarea"></textarea></div></fieldset></form></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.dialogs.releaseversion.renderReleaseDialog.soyTemplateName = 'GH.tpl.dialogs.releaseversion.renderReleaseDialog';
}


GH.tpl.dialogs.releaseversion.renderReleaseDialogTimeout = function(opt_data, opt_ignored) {
  var output = '<div id="version-new">';
  if (opt_data.model.projectIssueDetails.length > 0) {
    output += '<ul id="ghx-release-navigator">';
    var version_name__soy36 = '<strong>' + soy.$$escapeHtml(opt_data.model.versionName) + '</strong>';
    var projectList40 = opt_data.model.projectIssueDetails;
    var projectListLen40 = projectList40.length;
    for (var projectIndex40 = 0; projectIndex40 < projectListLen40; projectIndex40++) {
      var projectData40 = projectList40[projectIndex40];
      output += '<li>';
      var issues_link__soy42 = '' + GH.tpl.dialogs.releaseversion.renderIssuesLink({model: opt_data.model, project: projectData40, released: true});
      var project_name__soy47 = '<strong>' + soy.$$escapeHtml(projectData40.name) + '</strong>';
      output += soy.$$filterNoAutoescape(AJS.format("{0} scheduled for release from {1} with fix version {2}",issues_link__soy42,project_name__soy47,version_name__soy36)) + '</li>';
    }
    output += '</ul>';
  }
  output += '<p>' + soy.$$filterNoAutoescape("The operation took longer than expected but the release might have already finished.\x3cbr\x3e\x3cbr\x3e Reload the board to see current issues\x27 status.") + '</p></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.dialogs.releaseversion.renderReleaseDialogTimeout.soyTemplateName = 'GH.tpl.dialogs.releaseversion.renderReleaseDialogTimeout';
}


GH.tpl.dialogs.releaseversion.renderIssuesLink = function(opt_data, opt_ignored) {
  return '' + ((opt_data.released) ? '<a title="' + soy.$$escapeHtml("View in Issue Navigator") + '" href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/issues/?jql=project = \'' + soy.$$escapeHtml(opt_data.project.id) + '\' AND fixVersion = \'' + soy.$$escapeHtml(opt_data.model.versionName) + '\' ORDER BY Rank ASC">' : '<a title="' + soy.$$escapeHtml("View in Issue Navigator") + '" href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/secure/GHReleaseIssueNavigator.jspa?projectId=' + soy.$$escapeHtml(opt_data.project.id) + '&rapidViewId=' + soy.$$escapeHtml(opt_data.model.rapidViewId) + '&columnId=' + soy.$$escapeHtml(opt_data.model.columnId) + '">') + soy.$$escapeHtml(AJS.format("{0,choice,0#0 issues|1#1 issue|2#{0} issues}",opt_data.project.issueCount)) + '</a>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.releaseversion.renderIssuesLink.soyTemplateName = 'GH.tpl.dialogs.releaseversion.renderIssuesLink';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/CompleteSprintDialog.js' */
define("jira-agile/rapid/ui/dialog/complete-sprint-dialog",["require"],function(e){"use strict";function t(e){m.sprintSelect=new r,m.sprintSelect.initDropdown(),m.sprintSelect.on("change",i.bind(null,e))}function n(e){var t=e.incompleteIssues+e.partiallyCompleteIssues>0;return t&&e.hasDestinationSprints}function i(e,t){t?(e.incompleteIssuesDestination=t,s()):a()}function s(){m.$completeButton.enable(!0)}function a(){m.$completeButton.enable(!1)}function o(e){var t={completeIssues:e.completeIssues,totalIncompleteIssues:e.incompleteIssues+e.partiallyCompleteIssues,unfinishedParentsWithFinishedSubtasks:e.unfinishedParentsWithFinishedSubtasks?e.unfinishedParentsWithFinishedSubtasks.length:0,hasDestinationSprints:e.hasDestinationSprints,incompleteIssueDestinations:e.incompleteIssueDestinations,shouldShowSprintSelector:n(e),defaultIncompleteIssueDestination:e.defaultIncompleteIssueDestination};return t}var l=e("jquery"),r=e("jira-agile/rapid/ui/component/sprint-select"),p=GH.Ajax,u=GH.Dialog,d=GH.Notification,c=GH.tpl,m={};return m.sprintSelect=null,m.EVENT_SPRINT_COMPLETED="sprintCompleted",m.BACKLOG_ID=-1,m.analyticsMetaData=function(e){AJS.trigger("analyticsEvent",{name:"gh.sprint.complete",data:e})},m.showDialog=function(e,t){AJS.dim(),l(".aui-blanket").html('<span class="ghx-wait"></span>'),p.get({url:"/sprint/"+t+"/complete",data:{rapidViewId:e,sprintId:t}},"completesprintdialog").done(m.renderDialog).fail(function(){AJS.undim(),l(".aui-blanket").empty()})},m.renderDialog=function(e){var i=void 0!==e.finishedParentsWithUnfinishedSubtasks&&e.finishedParentsWithUnfinishedSubtasks.length>0,s=u.create({width:630,height:300,id:"ghx-dialog-complete-sprint"});if(s.addHeader(AJS.format("Complete Sprint: {0}",e.sprint.name)),s.addPanel("","panel"),i)s.getCurrentPanel().html(c.dialogs.completesprint.renderCanNotCompleteSprintDialog({issues:e.finishedParentsWithUnfinishedSubtasks}));else{new Calendar;s.getCurrentPanel().html(c.dialogs.completesprint.renderCompleteSprintDialog({model:o(e)})),s.addButton("Complete",function(){s.disableControls(),s.showSpinner(),m.complete(s,e)},"aui-button ghx-complete-button"),m.$completeButton=l("#ghx-dialog-complete-sprint").find(".ghx-complete-button"),n(e)&&t(e)}u.addCancelButton(s),l(".aui-dialog").addClass("ghx-dialog"),s.show(),l(".aui-blanket").empty(),l("#ghx-release-name").focus()},m.complete=function(e,t){p.put({url:"/sprint/"+t.sprint.id+"/complete",data:{rapidViewId:t.rapidViewId,sprintId:t.sprint.id,incompleteIssuesDestination:t.incompleteIssuesDestination},errorContextMap:{name:"#ghx-release-name",releaseDate:"#ghx-release-date"}}).done(function(n){m.analyticsMetaData({sprintId:t.sprint.id,completeIssueCount:t.completeIssues,incompleteIssueCount:t.incompleteIssues,partiallyCompleteIssueCount:t.partiallyCompleteIssues,hasGoal:!!t.sprint.goal}),e.dispose(),d.showSuccess(n.success.message),l(GH).trigger(m.EVENT_SPRINT_COMPLETED,t.sprint.id)}).fail(function(){e.hideSpinner(),e.enableControls()})},m});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/CompleteSprintDialog.soy' */
// This file was automatically generated from CompleteSprintDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.completesprint.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.completesprint == 'undefined') { GH.tpl.dialogs.completesprint = {}; }


GH.tpl.dialogs.completesprint.renderCompleteSprintDialog = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$filterNoAutoescape(AJS.format("{1,choice,0#{0} issues were |1#{0} issue was|2#{0} issues were} done",'<strong>' + opt_data.model.completeIssues + '</strong>',opt_data.model.completeIssues)) + ((opt_data.model.totalIncompleteIssues > 0 && opt_data.model.unfinishedParentsWithFinishedSubtasks > 0) ? '<br/>' + ((opt_data.model.totalIncompleteIssues == opt_data.model.unfinishedParentsWithFinishedSubtasks) ? soy.$$filterNoAutoescape(AJS.format("{0} {1,choice,1#issue was|2#issues were} incomplete (and had all of {1,choice,1#its|2#their} sub-tasks complete)",'<strong>' + opt_data.model.totalIncompleteIssues + '</strong>',opt_data.model.totalIncompleteIssues)) : soy.$$filterNoAutoescape(AJS.format("{0} {1,choice,1#issue was|2#issues were} incomplete ({2} of which had all of {3,choice,1#its|2#their} sub-tasks complete)",'<strong>' + opt_data.model.totalIncompleteIssues + '</strong>',opt_data.model.totalIncompleteIssues,'<strong>' + opt_data.model.unfinishedParentsWithFinishedSubtasks + '</strong>',opt_data.model.unfinishedParentsWithFinishedSubtasks))) : (opt_data.model.totalIncompleteIssues > 0) ? '<br/>' + soy.$$filterNoAutoescape(AJS.format("{0} {1,choice,0#issues were|1#issue was|2#issues were} incomplete",'<strong>' + opt_data.model.totalIncompleteIssues + '</strong>',opt_data.model.totalIncompleteIssues)) : '') + '</p><p>' + ((opt_data.model.totalIncompleteIssues > 0) ? soy.$$escapeHtml(opt_data.model.hasDestinationSprints ? "Select where all the incomplete issues should be moved:" : "Incomplete issues will be moved to the backlog") : '') + '</p>' + ((opt_data.model.shouldShowSprintSelector) ? GH.tpl.component.sprintselect.renderSingleSelect({items: opt_data.model.incompleteIssueDestinations, selectedItem: opt_data.model.defaultIncompleteIssueDestination}) : '') + '<p class="ghx-description">' + soy.$$escapeHtml("Sub-tasks are not included in the total(s) above, and are always included in the same sprint as their parent issue.") + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.completesprint.renderCompleteSprintDialog.soyTemplateName = 'GH.tpl.dialogs.completesprint.renderCompleteSprintDialog';
}


GH.tpl.dialogs.completesprint.renderCanNotCompleteSprintDialog = function(opt_data, opt_ignored) {
  var output = '<div><p>' + soy.$$escapeHtml("Sprint cannot be completed as there are incomplete subtasks on the following issues:") + '</p><ul>';
  var issueKeyList37 = opt_data.issues;
  var issueKeyListLen37 = issueKeyList37.length;
  for (var issueKeyIndex37 = 0; issueKeyIndex37 < issueKeyListLen37; issueKeyIndex37++) {
    var issueKeyData37 = issueKeyList37[issueKeyIndex37];
    output += '<li>' + GH.tpl.detailview.renderIssueLink({issueKey: issueKeyData37}) + '</li>';
  }
  output += '<ul></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.dialogs.completesprint.renderCanNotCompleteSprintDialog.soyTemplateName = 'GH.tpl.dialogs.completesprint.renderCanNotCompleteSprintDialog';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/ReopenSprintDialog.js' */
GH.Dialogs.ReopenSprintDialog={},GH.Dialogs.ReopenSprintDialog.EVENT_SPRINT_REOPENED="sprintReopened",GH.Dialogs.ReopenSprintDialog.analyticsMetaData=function(e){AJS.trigger("analyticsEvent",{name:"gh.sprint.reopen",data:e})},GH.Dialogs.ReopenSprintDialog.showDialog=function(e,i){AJS.dim(),AJS.$(".aui-blanket").html('<span class="ghx-wait"></span>'),GH.Ajax.get({url:"/sprint/"+i+"/reopen",data:{rapidViewId:e,sprintId:i}},"reopensprintdialog").done(GH.Dialogs.ReopenSprintDialog.renderDialog).fail(function(){AJS.undim(),AJS.$(".aui-blanket").empty()})},GH.Dialogs.ReopenSprintDialog.renderDialog=function(e){var i=GH.Dialog.create({width:630,height:270,id:"ghx-dialog-reopen-sprint"});if(i.addHeader("Reopen sprint"),i.addPanel("","panel"),0!==e.issuesMovedBack){new Calendar;i.getCurrentPanel().html(GH.tpl.dialogs.reopensprint.renderReopenSprintDialog({model:e})),i.addButton("Reopen",function(){i.disableControls(),i.showSpinner(),GH.Dialogs.ReopenSprintDialog.complete(i,e)},"aui-button")}else i.getCurrentPanel().html(GH.tpl.dialogs.reopensprint.renderCanNotReopenSprintDialog({model:e}));GH.Dialog.addCancelButton(i),AJS.$(".aui-dialog").addClass("ghx-dialog"),i.show(),AJS.$(".aui-blanket").empty(),AJS.$("#ghx-release-name").focus()},GH.Dialogs.ReopenSprintDialog.complete=function(e,i){GH.Ajax.put({url:"/sprint/"+i.sprint.id+"/reopen",data:{rapidViewId:i.rapidViewId,sprintId:i.sprint.id},errorContextMap:{name:"#ghx-release-name",releaseDate:"#ghx-release-date"}}).done(function(n){GH.Dialogs.ReopenSprintDialog.analyticsMetaData({sprintId:i.sprint.id,issuesMovedBack:i.issuesMovedBack,completedIssuesNotMovedBack:i.completedIssuesNotMovedBack,incompleteIssuesNotMovedBack:i.incompleteIssuesNotMovedBack}),e.dispose(),GH.Notification.showSuccess(n.success.message),AJS.$(GH).trigger(GH.Dialogs.ReopenSprintDialog.EVENT_SPRINT_REOPENED,i.sprint.id)}).fail(function(){e.hideSpinner(),e.enableControls()})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/ReopenSprintDialog.soy' */
// This file was automatically generated from ReopenSprintDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.reopensprint.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.reopensprint == 'undefined') { GH.tpl.dialogs.reopensprint = {}; }


GH.tpl.dialogs.reopensprint.renderReopenSprintDialog = function(opt_data, opt_ignored) {
  return '<h4>' + soy.$$escapeHtml(opt_data.model.sprint.name) + '</h4><div class="issue-moved-back">' + soy.$$filterNoAutoescape(AJS.format("{1,choice,0#{0} issues|1#{0} issue|2#{0} issues} will be moved back to the sprint you\x27\x27re reopening.",'<strong>' + opt_data.model.issuesMovedBack + '</strong>',opt_data.model.issuesMovedBack)) + '</div>' + GH.tpl.dialogs.reopensprint.reopenDetails_(opt_data) + '<p class="ghx-description">' + soy.$$escapeHtml("Sub-tasks are not included in the total(s) above, and are always included in the same sprint as their parent issue.") + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.reopensprint.renderReopenSprintDialog.soyTemplateName = 'GH.tpl.dialogs.reopensprint.renderReopenSprintDialog';
}


GH.tpl.dialogs.reopensprint.reopenDetails_ = function(opt_data, opt_ignored) {
  return '' + ((opt_data.model.completedIssuesNotMovedBack > 0) ? '<div class="completed-issue-not-moved-back">' + soy.$$filterNoAutoescape(AJS.format("{1,choice,0#{0} issues are|1#{0} issue is|2#{0} issues are} already completed in another sprint, and cannot be moved back.",'<strong>' + opt_data.model.completedIssuesNotMovedBack + '</strong>',opt_data.model.completedIssuesNotMovedBack)) + '</div>' : '') + ((opt_data.model.incompleteIssuesNotMovedBack > 0) ? '<div class="incompleted-issue-not-moved-back">' + soy.$$filterNoAutoescape(AJS.format("{1,choice,0#{0} issues are|1#{0} issue is|2#{0} issues are} part of another active sprint, and cannot be moved back.",'<strong>' + opt_data.model.incompleteIssuesNotMovedBack + '</strong>',opt_data.model.incompleteIssuesNotMovedBack)) + '</div>' : '');
};
if (goog.DEBUG) {
  GH.tpl.dialogs.reopensprint.reopenDetails_.soyTemplateName = 'GH.tpl.dialogs.reopensprint.reopenDetails_';
}


GH.tpl.dialogs.reopensprint.renderCanNotReopenSprintDialog = function(opt_data, opt_ignored) {
  return '<div><p>' + soy.$$escapeHtml("Reopening the sprint is not possible because there are no issues in this sprint.") + '</p><p>' + GH.tpl.dialogs.reopensprint.reopenDetails_(opt_data) + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.reopensprint.renderCanNotReopenSprintDialog.soyTemplateName = 'GH.tpl.dialogs.reopensprint.renderCanNotReopenSprintDialog';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/CompleteParentDialog.js' */
GH.Dialogs.CompleteParentDialog={},GH.Dialogs.CompleteParentDialog.EVENT_PARENT_COMPLETED="parentCompleted",GH.Dialogs.CompleteParentDialog.showDialog=function(e,t,a){AJS.dim(),AJS.$(".aui-blanket").html('<span class="ghx-wait"></span>'),GH.Dialogs.CompleteParentDialog.renderDialog(e,t,a.name)},GH.Dialogs.CompleteParentDialog.renderDialog=function(e,t,a){var o=GH.Dialog.create({width:500,height:250,id:"ghx-dialog-complete-parent"});o.addHeader(AJS.format("Update Parent Issue",e.key)),o.addPanel("","panel"),o.getCurrentPanel().html(GH.tpl.dialogs.completeparent.renderCompleteParentDialog({issue:e,transitions:t,columnName:AJS.escapeHTML(String(a))})),t.length>0?(o.addButton("Update",function(){o.disableControls(),1==t.length?GH.Dialogs.CompleteParentDialog.complete(o,e,t[0].id):GH.Dialogs.CompleteParentDialog.complete(o,e,AJS.$(".js-complete-parent").find("input:checked").val())},"aui-button"),GH.Dialog.addCancelButton(o)):o.addButton("Acknowledge",function(){o.disableControls(),o.dispose()},"aui-button"),AJS.$(".aui-dialog").addClass("ghx-dialog"),o.show(),AJS.$(".aui-blanket").empty(),AJS.$("#ghx-release-name").focus()},GH.Dialogs.CompleteParentDialog.complete=function(e,t,a){GH.IssueOperationShortcuts.setOverrideSelectedIssue(t),e.dispose(),GH.WorkDragAndDrop.executeWorkflowTransition(t.id,a)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/CompleteParentDialog.soy' */
// This file was automatically generated from CompleteParentDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.completeparent.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.completeparent == 'undefined') { GH.tpl.dialogs.completeparent = {}; }


GH.tpl.dialogs.completeparent.renderCompleteParentDialog = function(opt_data, opt_ignored) {
  var output = '<form class="aui">';
  if (opt_data.transitions.length > 1) {
    output += '<p>' + soy.$$filterNoAutoescape(AJS.format("All sub-tasks for parent issue \x3cstrong\x3e{0}\x3c/strong\x3e are now \x3cstrong\x3e{1}\x3c/strong\x3e.",opt_data.issue.key,opt_data.columnName)) + '<br/>' + soy.$$escapeHtml("To update this parent issue to match, select a transition:") + '</p><fieldset class="group js-complete-parent">';
    var transitionList12 = opt_data.transitions;
    var transitionListLen12 = transitionList12.length;
    for (var transitionIndex12 = 0; transitionIndex12 < transitionListLen12; transitionIndex12++) {
      var transitionData12 = transitionList12[transitionIndex12];
      output += '<div class="radio"><input type="radio" name="transition" id="' + soy.$$escapeHtml(transitionData12.id) + '" value="' + soy.$$escapeHtml(transitionData12.id) + '" ' + ((transitionIndex12 == 0) ? 'checked="checked"' : '') + '><label for="' + soy.$$escapeHtml(transitionData12.id) + '">' + soy.$$escapeHtml(transitionData12.name) + '</label></div>';
    }
    output += '</fieldset>';
  } else if (opt_data.transitions.length == 1) {
    output += '<p>' + soy.$$filterNoAutoescape(AJS.format("All sub-tasks for parent issue \x3cstrong\x3e{0}\x3c/strong\x3e are now \x3cstrong\x3e{1}\x3c/strong\x3e.",opt_data.issue.key,opt_data.columnName)) + '<br/>' + soy.$$escapeHtml("Do you want to update this parent issue to match?") + '</p>';
  } else {
    output += '<p>' + soy.$$filterNoAutoescape(AJS.format("All sub-tasks for parent issue \x3cstrong\x3e{0}\x3c/strong\x3e are now \x3cstrong\x3e{1}\x3c/strong\x3e.",opt_data.issue.key,opt_data.columnName)) + '</p><p>' + soy.$$filterNoAutoescape(AJS.format("However, the parent issue cannot be moved into the \x3cstrong\x3e{0}\x3c/strong\x3e column as there are no matching transitions.",opt_data.columnName)) + '</p>';
  }
  output += '</form>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.dialogs.completeparent.renderCompleteParentDialog.soyTemplateName = 'GH.tpl.dialogs.completeparent.renderCompleteParentDialog';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/RapidViewConfig.js' */
!function(a){var i=!1;a.RapidViewConfig={},a.RapidViewConfig.currentData={},a.RapidViewConfig.fetchConfiguration=function(e){_.isNull(e)?e={viewId:null,fromLocalStorage:!0}:_.isObject(e)||(e={viewId:e,fromLocalStorage:!1});var n=e.viewId,r=e.fromLocalStorage;if(!i){var o=WRM.data.claim("com.atlassian.greenhopper:rapid-view-config");o&&(a.RapidViewConfig.handleData(o),a.RapidViewConfig.currentData.promise=AJS.$.Deferred().resolve(o.currentViewConfig).promise()),i=!0}if(a.RapidViewConfig.currentData.id!==n){var t={returnDefaultBoard:r};n&&(t.rapidViewId=n);var d=a.Ajax.get({url:"/xboard/config.json",data:t,deferErrorHandling:!0},"rapidViewConfig");d.done(a.RapidViewConfig.handleData),a.RapidViewConfig.currentData={id:n,promise:d.pipe(function(a){return a.currentViewConfig},a.RapidViewConfig.handleRapidLoadError),data:null}}return a.RapidViewConfig.currentData.promise},a.RapidViewConfig.handleRapidLoadError=function(i,e){if(404===e.status){var n;n="anonymous"===a.Ajax.getUserFromAJS()?AJS.format("The requested board cannot be viewed because it either does not exist or you do not have permission to view it. This board may be visible if you \u003ca href=\"{0}\"\u003elog in\u003c/a\u003e.",a.Navigation.getLoginUrl()):"The requested board cannot be viewed because it either does not exist or you do not have permission to view it.",a.Notification.addPageLoadMessage(n,"warning"),a.RapidBoard.gotoManageViewsPage()}},a.RapidViewConfig.handleData=function(i){a.RapidViewConfig.storeGlobalConfig(i.globalConfig),a.RapidViewConfig.currentData.id=i.currentViewConfig.id,a.RapidViewConfig.currentData.data=i.currentViewConfig,a.RapidViewConfig.canManageSprints=i.currentViewConfig.canManageSprints,a.RapidViewConfig.canEdit=i.currentViewConfig.canEdit,a.RapidViewConfig.kanPlanEnabled=i.currentViewConfig.kanPlanEnabled,a.RapidViewConfig.isBoardAdmin=i.currentViewConfig.isBoardAdmin,a.RapidViewConfig.canManageSprints=i.currentViewConfig.canManageSprints,a.RapidViewConfig.modifySprintSupport()},a.RapidViewConfig.storeGlobalConfig=function(i){a.NumberFormat.groupingSeparator=i.numberGroupingSeparator,a.NumberFormat.decimalSeparator=i.numberDecimalSeparator,a.TimeFormat.timeTrackingConfigOpts=i.timeTrackingConfig,a.TimeFormat.dateTimePickerFormat=i.dateTimePickerFormat,a.TimeFormat.userTimeZoneLabel=i.userTimeZoneLabel,a.ChartTimeFrames.dateFormat=i.dateFormat,a.ChartTimeFrames.timeFormat=i.dateTimePickerFormat,a.VersionQuickCreate.setDatePickerFormat(i.dateFormat),a.VersionView.setDatePickerFormat(i.dateFormat),a.RapidBoard.parallelSprints=i.parallelSprints,a.RapidBoard.stickySprintHeaders=i.stickySprintHeaders,a.RapidBoard.kanPlanLabEnabled=i.kanPlanLabEnabled,a.EpicConfig.setEpicConfig(i.epicConfig),a.SprintConfig.setSprintConfig(i.sprintConfig),a.UserData.setGlobalConfig(i),a.Config.isSampleDataAvailable=i.isSampleDataAvailable},a.RapidViewConfig.modifySprintSupport=function(){var i=AJS.$("body");i.removeClass("ghx-days-in-column-disabled ghx-days-in-column-enabled ghx-sprint-support ghx-no-sprint-support"),a.RapidBoard.State.isScrumBoard()?i.addClass("ghx-sprint-support"):i.addClass("ghx-no-sprint-support"),a.RapidViewConfig.currentData.data.showDaysInColumn?i.addClass("ghx-days-in-column-enabled"):i.addClass("ghx-days-in-column-disabled")}}(GH);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/extra-fields/ExtraFieldsHelper.js' */
define("jira-agile/rapid/ui/component/extra-fields/ExtraFieldsHelper",["require"],function(e){"use strict";var r=e("underscore"),t={epiclink:function(e){return GH.EpicConfig.getEpicNameString(e.text,e.epicKey)},html:function(e){return e.html&&"&nbsp;"!==e.html?(e.useSoyNoAutoescape=!0,e.html):""}},n=function(e){return e.html||e.text},i={prepareExtraFields:function(e){r.each(e,function(e){var r=t[e.renderer]||n;e.renderedContent=r(e)})}};return i}),AJS.namespace("GH.ExtraFieldsHelper",null,require("jira-agile/rapid/ui/component/extra-fields/ExtraFieldsHelper"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/extra-fields/ExtraFields.soy' */
// This file was automatically generated from ExtraFields.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.extraFields.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.extraFields == 'undefined') { GH.tpl.extraFields = {}; }


GH.tpl.extraFields.renderExtraField = function(opt_data, opt_ignored) {
  var output = '';
  var contentOrNone__soy3 = opt_data.extraField.renderedContent || "None";
  var tooltip__soy4 = '' + ((opt_data.extraField.useSoyNoAutoescape) ? soy.$$escapeHtml(opt_data.extraField.label) + ': ' + soy.$$filterNoAutoescape(contentOrNone__soy3) : soy.$$escapeHtml(opt_data.extraField.label) + ': ' + soy.$$escapeHtml(contentOrNone__soy3));
  output += '<span class="ghx-extra-field ' + ((! opt_data.extraField.renderedContent) ? 'ghx-fa' : '') + '" data-tooltip="' + soy.$$escapeHtml(tooltip__soy4) + '"><span class="ghx-extra-field-content">' + ((opt_data.extraField.useSoyNoAutoescape) ? soy.$$filterNoAutoescape(contentOrNone__soy3) : soy.$$escapeHtml(contentOrNone__soy3)) + '</span></span>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.extraFields.renderExtraField.soyTemplateName = 'GH.tpl.extraFields.renderExtraField';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/kanplan/KanPlanFeatureService.js' */
define("jira-agile/rapid/ui/kanplan/kan-plan-feature-service",["require"],function(a){"use strict";var n=a("jira/flag"),e=a("jira-agile/rapid/configuration/timed-flag"),i=a("jira/util/formatter"),o=a("jira/analytics"),l=a("underscore"),s=a("jquery"),r=a("jira/featureflags/feature-manager"),d=a("wrm/data"),t="com.atlassian.jira.agile.darkfeature.kanplan",c="com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions",p={},u=1e4,g=d.claim("com.pyxis.greenhopper.jira:wrm-data.kanplan-epics-onboarding");return p.acknowledgeDisplayData=d.claim("com.pyxis.greenhopper.jira:wrm-data.kanplan-acknowledment"),p.autoConvertKanPlan=function(a){return GH.Ajax.post({url:"/xboard/plan/kanban/"+a+"/autoConvert",deferErrorHandling:!0},"auto-convert-kanPlan")},p.isFeatureEnabled=function(){return r.isFeatureEnabled(t)},p.isEpicsAndVersionsEnabled=function(){return p.isFeatureEnabled()&&r.isFeatureEnabled(c)},p.shouldShowEpicsPanel=function(){return this.isFeatureEnabled()&&this.isEpicsAndVersionsEnabled()&&GH.RapidBoard.State.getShowEpicAsPanel()},p.isVersionsFilterApplied=function(){return this.isEpicsAndVersionsEnabled()&&!!GH.BoardState.getPerViewValue("planSelectedVersion")},p.isEpicsFilterApplied=function(){return this.shouldShowEpicsPanel()&&!!GH.BoardState.getPerViewValue("planSelectedEpic")},p.shouldShowKanbanBacklog=function(){return GH.RapidBoard.kanPlanLabEnabled&&GH.RapidViewConfig.kanPlanEnabled},p.shouldShowAcknowledge=function(){return!!p.acknowledgeDisplayData&&(!!p.shouldShowKanbanBacklog()&&(GH.RapidBoard.State.isWorkMode()?!(p.acknowledgeDisplayData.isClosedOnWorkMode||p.acknowledgeDisplayData.isClosedOnPlanMode):!p.acknowledgeDisplayData.isClosedOnPlanMode))},p.shouldShowEpicsOnboarding=function(a){return("work"!==a||!g.isClosedOnWorkMode&&!g.isClosedOnPlanMode)&&("plan"!==a||!g.isClosedOnPlanMode)},p.showKanPlanDisabledFlag=function(){n.showInfoMsg("","There\'s no Kanban backlog enabled for this board.",{close:"auto"})},p.showKanPlanInlineDialogDismissedFlag=function(){var a=GH.RapidBoard.getRapidViewConfigurationUrl(GH.WorkController.rapidViewData.id,"columns"),e=n.showInfoMsg("",GH.tpl.kanplan.onboarding.flags.dismissedFlag({url:a})),i="jira-software.kanplan.onboarding.enable-prompt.dismissflag.click";s(e).find(".kanplan-autoconvert-dismiss-flag").on("click",p.sendAnalyticsInfo.bind(null,i,null))},p.showAutoConvertSuccessFlag=function(a){var n=GH.tpl.kanplan.onboarding.flags.autovenversionSuccessFlag({shouldLinkToBacklog:a}),i=a?u:void 0,o=e.successMsgTimed("",n,{},i);o.on("click",function(){o.get(0).close();var a="jira-software.kanplan.onboarding.convert.successflag.click";p.sendAnalyticsInfo(a),GH.RapidBoard.ViewController.setMode("plan")})},p.sendAnalyticsInfo=function(a,n,e){if(a){var i={boardId:GH.RapidBoard.State.getRapidViewId(),isBoardAdmin:GH.RapidViewConfig.isBoardAdmin,isGlobalAdmin:GH.UserData.userConfig.isGlobalAdmin};o.send({name:a,properties:n?e?l.extend(i,n):n:i})}},p.dismissEpicsOnboardingDialog=function(a){return a||(a=GH.RapidBoard.State.data.mode),GH.Ajax.post({url:"/xboard/plan/kanban/closeEpicsOnboardingDialog?mode="+a}).done(function(){p.updateKanplanEpicsOnboardingState(a)})},p.updateKanplanEpicsOnboardingState=function(a){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];a===GH.RapidBoard.State.VIEW_MODE.PLAN?g.isClosedOnPlanMode=n:a===GH.RapidBoard.State.VIEW_MODE.WORK?g.isClosedOnWorkMode=n:"both"===a&&(g.isClosedOnPlanMode=n,g.isClosedOnWorkMode=n)},p});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/PlanIssueListUtil.js' */
define("jira-agile/rapid/ui/plan/issue-list-util",["underscore","jquery"],function(e,n){var s={};return s.issueListToTree=function(s,t){var u=[];return s=s.map(function(e){return n.extend(!0,{},e)}),e.each(s,function(n,r){if(n.parentKey){var a=e.find(u,function(e){return e.key===n.parentKey});a||(a=e.find(s,function(e){return e.key===n.parentKey}),a||(a=e.extend({},t[n.parentKey],{key:n.parentKey,fakeParent:!0}),u.push(a))),a.subTasks||(a.subTasks=[]),a.subTasks.push(n)}else u.push(n)}),u},s.applySubtaskCount=function(e,n,s){e.forEach(function(e){e.subtasksCount=n.getSubtasksKeys(e.key).length;var t=e.subTasks?e.subTasks:[],u=t.filter(function(e){return s[e.key]}).length;e.subtasksFiltered=t.length===u,e.hiddenByQuickFiltersSubtasks=e.subtasksCount-t.length,e.hiddenSubtasks=e.hiddenByQuickFiltersSubtasks+u})},s});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/BacklogView.js' */
define("jira-agile/rapid/ui/plan/BacklogView",["require"],function(e){"use strict";var a,t=e("underscore"),i=e("jquery"),n=e("Waypoint"),r=e("jira/ajs/dark-features"),s=e("jira/util/navigator"),o=e("jira-agile/rapid/global-events"),l=e("jira-agile/rapid/ui/plan/backlog-model2"),d=e("jira-agile/rapid/ui/plan/sprint-view"),c=e("jira-agile/rapid/ui/plan/sprint-backlog-view"),g=e("jira-agile/rapid/ui/plan/sprint-model"),u=e("jira-agile/rapid/ui/plan/backlog-selection-controller"),p=e("jira-agile/rapid/ui/plan/plan-drag-and-drop"),h="ghx-filtered";o.on("pre-initialization",function(){a=e("jira-agile/rapid/ui/plan/backlog-controller")});var k={};return k.containerSelector="#ghx-backlog",k.getContainer=function(){return k.container||(k.container=i(k.containerSelector)),k.container},k.draw=function(){GH.Logger.log("BacklogView.draw",GH.Logger.Contexts.ui),k.container=void 0;var e=i(k.containerSelector);e.html(GH.tpl.backlogview.renderBacklogView({}));var n=a.calculateIssueRenderData();d.renderAllSprints(n),c.renderBacklog(n),GH.planOnboarding.renderOnboarding(),t.delay(function(){p.enableDragAndDrop(),k.registerClickHandlers(),d.registerTwixies(),GH.sprintActions.createDropdown(),k.enableStickyHeaders(),i("#ghx-backlog").attr("data-rendered",(new Date).getTime())})},k.registerClickHandlers=function(){i(k.containerSelector).delegate(".js-clear-all-filters","click",function(e){a.clearFilters()})},k.redrawChangedModel=function(e){k.redrawChangedModels([e])},k.redrawChangedModels=function(e){t.each(e,function(e){g.isSprintModel(e)?d.updateSprintViewForModel(e):l.isBacklogModel(e)&&c.updateBacklog()}),GH.planOnboarding.renderOnboarding(),k.enableStickyHeaders(),p.enableDragAndDrop(),GH.sprintActions.createDropdown()},k.updateSprintsAfterAddRemove=function(){var e=a.calculateIssueRenderData();d.renderAllSprints(e),GH.planOnboarding.renderOnboarding(),k.enableStickyHeaders(),p.enableDragAndDrop(),GH.sprintActions.createDropdown()},k.updateIssueSelectionState=function(e){var a=!1,t=null,n=u.getSelectedIssueKey();a=n,i(k.containerSelector).find(".js-issue").removeClass("ghx-selected ghx-selected-primary").each(function(e,r){var s=i(r),o=s.data("issue-key");u.isInSelection(o)&&(s.addClass("ghx-selected"),n==o&&s.addClass("ghx-selected-primary")),null!=a&&o===a&&(t=s)}),t&&e&&k._scrollToView(t)},k.updateHiddenIssues=function(){var e=a.calculateIssueRenderData(),n=i("#ghx-backlog");n.css({display:"none"});var r=n.find(".js-issue-list");t.each(r,function(a){var t=i(a);if(!t.is(".js-empty-list")){var n=k._updateIssuesVisibilityInIssueList(t,e);n?t.removeClass("ghx-has-issues").addClass("ghx-no-issues"):t.removeClass("ghx-no-issues").addClass("ghx-has-issues")}}),d.updateSprintStatistics(),c.updateBacklogHeader(),GH.planOnboarding.renderOnboarding(),n.css({display:""}),k.adjustStickyHeader()},k._updateIssuesVisibilityInIssueList=function(e,a){var n=e.find(".js-issue"),r=!0;t.each(n,function(e){var t=i(e),n=t.attr("data-issue-key");a.hiddenIssues[n]?t.addClass(h):(t.removeClass(h),r=!1)});var s=e.find(".ghx-parent-group");return s.each(function(e,a){var t=i(a),n=t.find(".ghx-issue-subtask"),r=t.find(".ghx-parent-stub"),s=0===n.not("."+h).length;r.toggleClass(h,s);var o=t.find(".ghx-hidden-subtasks-count-container"),l=parseInt(o.attr("data-subtasks-hidden-by-filters"),10),d=n.filter(".ghx-filtered").length,c=l+d;o.html(GH.tpl.planissuelist.renderSubtasksFilteredContent({hiddenSubtasks:c,allHidden:s}))}),r},k.checkBacklogWidth=function(){var e=k.getContainer().width();e<600?i("body").addClass("ghx-plan-band-1").removeClass("ghx-plan-band-2"):i("body").addClass("ghx-plan-band-2").removeClass("ghx-plan-band-1"),k.adjustStickyHeaderPosition(),GH.planOnboarding.refresh()},k._scrollToView=function(e){var a=i("#ghx-backlog"),t=a[0].getBoundingClientRect(),n=e[0].getBoundingClientRect();GH.ScrollUtils.scrollElementToViewPort(a,t,n)},k.isStickySprintHeadersEnabled=function(){return GH.RapidBoard.stickySprintHeaders&&!r.isEnabled("jira.greenhopper.backlog.disableStickyHeader")},k.enableStickyHeaders=function(){if(k.isStickySprintHeadersEnabled()){k.destroyStickies();var e=this.getContainer();e.parent().hasClass("ghx-sticky-wrapper")||e.wrap(i("<div/>",{class:"ghx-sticky-wrapper"})),e.find(".ghx-backlog-header").each(function(a,t){var r=i(this),s=r.closest(".ghx-backlog-container");k.stickies||(k.stickies=[]);var o=new n.Sticky({element:t,context:e,offset:0,handler:function(e){var a=k.getFooterDragInfo(s);a.isFooterDrag&&a.isOverTakenSprint&&r.hasClass("stuck")&&r.removeClass("stuck"),a.isFooterDrag&&a.isOvertakingSprint&&k.ensureIsSticky(r,e),r.hasClass("stuck-bottom")&&r.removeClass("stuck-bottom"),k.adjustStickyHeaderPosition("up"===e,r)}});k.stickies.push(o)}),e.find(".ghx-backlog-container").waypoint({context:e,group:"containers",offset:function(){var e=i(this.element),a=e.find(".ghx-backlog-header").parent(),t=a.outerHeight();return(e.outerHeight()-t)*-1},handler:k.waypointHandler}),setTimeout(n.refreshAll,0)}},k.getFooterDragInfo=function(e){var a=this.getContainer(),t=a.find("#ghx-content-group"),i=e.data("sprint-id")||"backlog",n=t.find(".ghx-backlog-container.ghx-active-drag"),r=t.hasClass("ghx-drag-in-progress")&&n.length,s=e.hasClass("ghx-active-drag"),o=e.hasClass("ghx-overtaken")||e.prevAll().is(n)||r&&"backlog"===i;return{isFooterDrag:r,isOvertakingSprint:s,isOverTakenSprint:o}},k.ensureIsSticky=function(e,a){"down"===a&&(e.hasClass("stuck")||e.addClass("stuck"))},k.waypointHandler=function(e){var a=i(this.element),t=a.find(".ghx-backlog-header"),n=k.getFooterDragInfo(a);if(!n.isFooterDrag||!n.isOverTakenSprint){if(n.isFooterDrag&&n.isOvertakingSprint)return void k.ensureIsSticky(t,e);if("down"===e)t.removeClass("stuck"),k.adjustStickyHeaderPosition(!0,t),t.addClass("stuck-bottom");else if("up"===e){t.removeClass("stuck-bottom"),k.adjustStickyHeaderPosition(null,t),t.addClass("stuck");var r=this.next();if(r){var s=i(r.element),o=s.find(".ghx-backlog-header");o.hasClass("stuck")&&(o.removeClass("stuck"),k.adjustStickyHeaderPosition(!0,o))}}}},k.adjustStickyHeaderPosition=!s.isIE()||s.isEdge()?i.noop:t.debounce(function(e,a){var t=k.getContainer(),i=a||t.find(".ghx-backlog-header.stuck");if(i.length){var n,r;if(e)n="auto",r="";else{var s=t.parent(),o=i.closest(".ghx-backlog-container");n=s.get(0).getBoundingClientRect().top,r=i.parent().outerWidth(),o.hasClass("ghx-everything-else")&&(r+=parseInt(o.css("padding-left"),10))}i.css({width:r,top:n})}},100),k.adjustStickyHeader=r.isEnabled("jira.greenhopper.backlog.disableStickyHeader")?i.noop:t.debounce(function(){setTimeout(function(){k.adjustStickyHeaderPosition(),n.refreshAll()},0)},100),k.destroyStickies=function(){k.stickies&&k.stickies.length&&(k.stickies.forEach(function(e){e.destroy()}),n.destroyAll())},k});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/AnalyticsHelper.js' */
define("jira-agile/rapid/ui/plan/analytics-helper",["underscore","require"],function(e,t){var i,s,n={},o=t("jira-agile/rapid/global-events"),a=t("jira-agile/rapid/ui/kanplan/kan-plan-feature-service");return o.on("pre-initialization",function(){i=t("jira-agile/rapid/ui/plan/backlog-model"),s=t("jira-agile/rapid/ui/plan/issue-move-controller")}),n.baseEventData=function(){var t=-1,s=e.reduce(i.getAllIssueListsNew(),function(e,t){return e+t.getIssueCount()},0),n=i.getBacklogModel2();if(!n)return{};var o=n.getIssueList(),l={boardType:GH.RapidBoard.State.getBoardType(),backlogIssueCount:o.getIssueCount(),boardId:GH.RapidBoard.State.getRapidViewId()};if(GH.RapidBoard.State.isKanbanBoard()){l.backlogSubtasksCount=l.backlogIssueCount-o.getIssuesExcludingSubtasks().length;var r=e.first(i.getSprintModels());if(e.isUndefined(r))return l;l.selectedForDevelopmentIssueCount=r.getIssueList().getIssueCount(),l.selectedForDevelopmentSubtasksCount=l.selectedForDevelopmentIssueCount-r.getIssueList().getIssuesExcludingSubtasks().length,l.epicsPanelEnabled=a.shouldShowEpicsPanel(),l.isVersionsFilterApplied=a.isVersionsFilterApplied(),l.isEpicsFilterApplied=a.isEpicsFilterApplied()}else l.totalIssueCount=s;return l.epicsCount=t,GH.EpicController&&GH.EpicController.getEpicModel()&&GH.EpicController.getEpicModel().getEpicList()&&(l.epicsCount=GH.EpicController.getEpicModel().getEpicList().getIssueCount()),l},n.getColumnName=function(e){return e?"backlog":"selectedForDev"},n.getSrcColumnName=function(e){return n.getColumnName(s.isSourceBacklog(e))},n.getDestColumnName=function(e){return n.getColumnName(s.isTargetBacklog(e))},n});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/SubtasksExpandingController.js' */
define("jira-agile/rapid/ui/plan/subtasks-expanding-controller",["underscore","require","jira/analytics"],function(e,a,n){function t(e,a){a?delete l._collapsedParents[e]:l._collapsedParents[e]=!0,GH.RapidBoard.State.setBoardSetting(o,l._collapsedParents)}function i(){return GH.RapidBoard.State.getBoardSetting(null,o,{})}var s,l={},r="ghx-subtasks-expanded",o="collapsed-parents",d=a("jira-agile/rapid/global-events"),p=a("jira-agile/rapid/ui/plan/plan-issue-list-view"),u=a("jira-agile/rapid/ui/plan/analytics-helper");return d.on("pre-initialization",function(){l._preInitialization()}),l._preInitialization=function(){s=a("jira-agile/rapid/ui/plan/backlog-model")},l._collapsedParents=i(),l.applyExpandedState=function(a){var n=e.values(a);n.forEach(function(e){e.expanded=!l.isIssueCollapsed(e.key)})},l.toggleExpandState=function(a,n){var i=p.getClosestParent(a),s=p.getIssueKey(i);e.isUndefined(n)?i.toggleClass(r):i.toggleClass(r,!!n);var l=i.hasClass(r);return t(s,l),l},l.toggleExpandStateForKey=function(e,a){var n=p.getIssueByKey(e);return l.toggleExpandState(n,a)},l.getCollapsedSubTasksToSelection=function(e){var a=[];return e.forEach(function(e){if(l.isIssueCollapsed(e)){var n=s.findModelWithIssue(e);if(n){var t=n.issueList.getSubtasks(e).map(function(e){return e.key});a=a.concat(t)}}}),a},l.isIssueCollapsed=function(e){return!!l._collapsedParents[e]},l.sendAnalytics=function(a){n.send({name:"jira-software.plan.subtasks.expanded.changed",properties:e.extend({isExpanded:a},u.baseEventData())})},l});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/BacklogView.soy' */
// This file was automatically generated from BacklogView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.backlogview.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.backlogview == 'undefined') { GH.tpl.backlogview = {}; }


GH.tpl.backlogview.renderBacklogView = function(opt_data, opt_ignored) {
  return '<div id="ghx-content-group"><div class="ghx-sprint-group"/><div class="ghx-backlog-group"/></div>';
};
if (goog.DEBUG) {
  GH.tpl.backlogview.renderBacklogView.soyTemplateName = 'GH.tpl.backlogview.renderBacklogView';
}


GH.tpl.backlogview.renderDragOverlay = function(opt_data, opt_ignored) {
  return '<div class="ghx-drag-overlay"><span class="ghx-shim ghx-shim-1"></span><span class="ghx-shim ghx-shim-2"></span></div>';
};
if (goog.DEBUG) {
  GH.tpl.backlogview.renderDragOverlay.soyTemplateName = 'GH.tpl.backlogview.renderDragOverlay';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/PlanView.js' */
define("jira-agile/rapid/ui/plan/plan-view",["require"],function(e){"use strict";var i,a,s=e("jquery"),n=e("jira-agile/rapid/global-events"),l=e("jira-agile/rapid/ui/plan/plan-controls"),o=e("jira-agile/rapid/ui/kanplan/kanplan-acknowledge"),t=e("jira-agile/rapid/ui/kanplan/kan-plan-feature-service");n.on("pre-initialization",function(){a=e("jira-agile/rapid/ui/plan/plan-controller"),i=e("jira-agile/rapid/ui/plan/BacklogView")});var d={};return d.init=function(){var e=s(document);e.delegate(".js-view-action-toggle-releases-column, .js-release-toggle","click",a.toggleVersionsColumn),e.delegate(".js-view-action-toggle-epics-column, .js-epic-toggle","click",a.toggleEpicsColumn),e.delegate(".js-view-actions-plan .js-view-action-toggle-epics-lozenge","click",a.toggleEpicsShowOnBacklog)},d.show=function(){d.detailViewPositioned=!1,s("body").addClass("ghx-mode-planning");var e=GH.tpl.plancontroller.renderSkeleton({shouldShowEpicAndVersionPanels:GH.RapidBoard.State.isScrumBoard()||t.isEpicsAndVersionsEnabled(),shouldShowEpicPanel:a.isEpicsPanelEnabled()});s("#ghx-plan").empty().append(e);var n=s(".js-release-toggle");GH.Tooltip.tipsify({selector:n,gravity:"w",html:!0,className:"ghx-tipsy-alt"});var l=s(".js-epic-toggle");GH.Tooltip.tipsify({selector:l,gravity:"w",html:!0,className:"ghx-tipsy-alt"}),GH.DetailsView.setContainerSelector("#ghx-detail-view"),GH.DetailsView.setOptions({canClose:!0,showActionsCog:!0,showSubtaskTab:!0,showLogWorkTrigger:!1,updateSizeHandler:d.updateDetailViewSize,closeHandler:a.closeDetailsView}),GH.RapidBoard.State.isKanbanBoard()&&(o.show(),d.updateEpicsAndVersionsColumnBorder()),delete i.container},d.updateEpicsAndVersionsColumnBorder=function(){t.isEpicsAndVersionsEnabled()||a.isEpicsColumnVisible()||a.isVersionsColumnVisible()||s("#ghx-plan-group").toggleClass("ghx-no-epic-menu-and-no-version-menu",!0)},d.updateDetailViewState=function(){var e=a.isDetailsViewOpened();e?(s("#ghx-plan-group").addClass("ghx-has-detail"),s("#ghx-detail-view").css({display:""})):(s("#ghx-plan-group").removeClass("ghx-has-detail"),s("#ghx-detail-view").css({display:"none"})),GH.ViewActions.setDetailViewVisible(e)},d.updateVersionColumnState=function(){var e=s("#ghx-version-column"),n=s("#ghx-plan-group"),l=s(".js-release-toggle"),o=a.isVersionsColumnVisible()&&a.isVersionsPanelEnabled();o?(e.css({display:""}),n.addClass("ghx-version-expanded"),l.addClass("ghx-active"),GH.Tooltip.disable(l)):(e.css({display:"none"}),n.removeClass("ghx-version-expanded"),l.attr("data-tooltip",GH.tpl.plancontroller.renderVersionPanelTipsyExpand()).removeClass("ghx-active"),GH.Tooltip.enable(l)),GH.ViewActions.setVersionsPanelVisible(o),i.adjustStickyHeader()},d.updateEpicsColumnState=function(){var e=s("#ghx-epic-column"),n=s("#ghx-plan-group"),l=s(".js-epic-toggle"),o=a.isEpicsColumnVisible()&&a.isEpicsPanelEnabled();o?(e.css({display:""}),n.addClass("ghx-epic-expanded"),l.addClass("ghx-active")):(e.css({display:"none"}),n.removeClass("ghx-epic-expanded"),l.attr("data-tooltip",GH.tpl.plancontroller.renderEpicPanelTipsyExpand()).removeClass("ghx-active")),GH.ViewActions.setEpicsPanelVisible(o),i.adjustStickyHeader()},d.updateViewActions=function(){GH.ViewActions.setDetailViewVisible(a.isDetailsViewOpened()),GH.ViewActions.setEpicsPanelVisible(a.isEpicsColumnVisible()),GH.ViewActions.setVersionsPanelVisible(a.isVersionsColumnVisible()),GH.GridDataController.getModel()&&GH.ViewActions.setSwimlanes(GH.GridDataController.getModel().hasSwimlanes())},d.updateHorizontalPositioning=function(){GH.DetailsView.updateSize()},d.updateDetailViewSize=function(){var e=s("#ghx-detail-issue");if(e.length>0){var i=e.outerHeight(),a=s("#ghx-detail-head"),n=a.outerHeight(),l=s("#js-detail-nav-content");l.css({height:i-n-13})}},d.doUpdateDetailsView=function(){d.detailViewPositioned||(d.detailViewPositioned=!0,d.updateFixedElementPositioning())},d.hide=function(){s("body").removeClass("ghx-mode-planning"),s("#ghx-plan").empty()},d.hideLoadingFilter=function(){s("body").removeClass("ghx-loading-quickfilter")},d.showLoadingBacklog=function(){s("body").addClass("ghx-loading-backlog"),s(".ghx-throbber").spin("large")},d.hideLoadingBacklog=function(){s("body").removeClass("ghx-loading-backlog"),s(".ghx-throbber").spin(!1)},d.updateFixedElementPositioning=function(){a.isVisible&&(l.resizeQuickFilters({mode:"plan"}),d.updateHorizontalPositioning())},d});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/kanplan/KanPlanAcknowledge.js' */
define("jira-agile/rapid/ui/kanplan/kanplan-acknowledge",["require"],function(){"use strict";var n=require("jquery"),a=(require("jira/analytics"),require("jira-agile/rapid/ui/kanplan/kan-plan-feature-service")),e={};return e.init=function(){n("#gh").on("click",".ghx-ack-close",e.close),n("#gh").on("click",".ghx-ack-open-backlog",e.openBacklog)},e.show=function(){e.hide();var o=n("#gh");a.shouldShowAcknowledge()&&(o.prepend(GH.tpl.kanplan.kanplanacknowledge.render({learnMoreURL:{"url":"https://docs.atlassian.com/jira/jsw-docs-078/Using+your+Kanban+backlog","isLocal":false}.url,isWorkMode:GH.RapidBoard.State.isWorkMode(),isEpicsAndVersionsEnabled:a.isEpicsAndVersionsEnabled()})),o.find(".ghx-ack-learn-more").on("click",function(){a.sendAnalyticsInfo("jira-software.kanplan.onboarding.acknowledgement.learnmore.click")}))},e.hide=function(){n("#gh").find(".ghx-kanplan-ack").remove(),GH.RapidBoard.ViewController.handleResizeEvent()},e.openBacklog=function(){a.shouldShowKanbanBacklog()&&(a.sendAnalyticsInfo("jira-software.kanplan.onboarding.acknowledgement.openbacklog.click"),e.close().then(function(){GH.RapidBoard.ViewController.setMode("plan")}))},e.close=function(){var n=function(){var n;return GH.RapidBoard.State.isWorkMode()?(a.acknowledgeDisplayData.isClosedOnWorkMode=!0,n="jira-software.kanplan.onboarding.acknowledgement.closedonworkmode"):(a.acknowledgeDisplayData.isClosedOnPlanMode=!0,n="jira-software.kanplan.onboarding.acknowledgement.closedonplanmode"),a.sendAnalyticsInfo(n),e.hide(),a.dismissEpicsOnboardingDialog("both")};return GH.Ajax.post({url:"/xboard/plan/kanban/closeAcknowledge?mode="+GH.RapidBoard.State.data.mode}).done(n)},e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/kanplan/KanPlanAcknowledge.soy' */
// This file was automatically generated from KanPlanAcknowledge.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.kanplan.kanplanacknowledge.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.kanplan == 'undefined') { GH.tpl.kanplan = {}; }
if (typeof GH.tpl.kanplan.kanplanacknowledge == 'undefined') { GH.tpl.kanplan.kanplanacknowledge = {}; }


GH.tpl.kanplan.kanplanacknowledge.render = function(opt_data, opt_ignored) {
  return '<div class="ghx-kanplan-ack"><div class="ghx-kanplan-ack-container ' + ((opt_data.isWorkMode) ? 'ghx-kanplan-ack-workmode' : 'ghx-kanplan-ack-planmode') + '">' + aui.buttons.button({text: '', type: 'text', extraClasses: ['ghx-ack-close-button', 'ghx-ack-close'], iconClass: 'ghx-iconfont aui-icon-small aui-iconfont-close-dialog', iconText: "Close", iconType: 'aui'}) + '<h2>' + ((opt_data.isWorkMode) ? soy.$$escapeHtml("A bigger and better backlog has just landed") : soy.$$escapeHtml("A bigger and better backlog has just landed")) + '</h2><p>' + ((opt_data.isEpicsAndVersionsEnabled) ? (opt_data.isWorkMode) ? soy.$$escapeHtml("We\x27ve created a dedicated space for you to plan in the new Kanban backlog. This board will now be a distraction-free zone for your team to focus on work-in-progress.") : soy.$$escapeHtml("With your new Kanban Backlog, you have a bigger and better space to plan work with your team. Use the epics and versions panels to filter and refine your backlog.") : (opt_data.isWorkMode) ? soy.$$filterNoAutoescape(AJS.format("We\x27\x27ve just enabled the new backlog, where you get more space to plan stories. With this, you may notice some changes in your Kanban board. These changes make your board a distraction-free zone for your work-in-progress.",'<b>','</b>','<b>','</b>')) : soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml("You now have a dedicated backlog to create, rank, and select stories for development, while the Kanban board is now a distraction-free zone for your team to work on the selected stories."))) + '</p><div class="ghx-button-container">' + ((opt_data.isWorkMode) ? '<button class="aui-button aui-button-primary ghx-ack-open-backlog">' + soy.$$escapeHtml("Take me there") + '</button>' + ((opt_data.isEpicsAndVersionsEnabled) ? aui.buttons.button({text: "Close", type: 'link', extraClasses: ['ghx-ack-close']}) : GH.tpl.kanplan.kanplanacknowledge.learnMoreLink(opt_data)) : '<button class="aui-button aui-button-primary ghx-ack-close">' + soy.$$escapeHtml("OK, got it") + '</button>' + GH.tpl.kanplan.kanplanacknowledge.learnMoreLink(opt_data)) + '</div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.kanplan.kanplanacknowledge.render.soyTemplateName = 'GH.tpl.kanplan.kanplanacknowledge.render';
}


GH.tpl.kanplan.kanplanacknowledge.learnMoreLink = function(opt_data, opt_ignored) {
  return '' + aui.buttons.button({text: "Learn more", type: 'link', tagName: 'a', extraClasses: ['ghx-ack-learn-more'], extraAttributes: {href: opt_data.learnMoreURL, target: '_blank'}});
};
if (goog.DEBUG) {
  GH.tpl.kanplan.kanplanacknowledge.learnMoreLink.soyTemplateName = 'GH.tpl.kanplan.kanplanacknowledge.learnMoreLink';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/kanplan/KanPlanConvertDialog.js' */
define("jira-agile/rapid/ui/kanplan/KanPlanConvertDialog",["jquery","underscore","jira/analytics","jira-agile/rapid/ui/kanplan/kan-plan-feature-service","jira-agile/rapid/events","jira/util/formatter","jira/util/strings"],function(i,n,e,a,o,r,t){function s(e){var o=i(GH.tpl.kanplan.convertDialog({columnName:t.escapeHtml(e.columnName),isEpicsAndVersionsEnabled:a.isEpicsAndVersionsEnabled()})),r=AJS.dialog2(o);return r.startAction=function(){o.find(".aui-button").attr("disabled","disabled"),o.find(".aui-dialog2-footer-actions .aui-button-primary").before('<span class="ghx-spinner"/>')},r.stopAction=function(){o.find(".aui-button").removeAttr("disabled"),o.find(".ghx-spinner").remove()},o.find("#ghx-kanplan-convert-dialog-confirm-button").click(n.compose(r.startAction,e.callback)),o.find("#ghx-kanplan-convert-dialog-configure-button").click(e.secondaryCallback),o.find(".aui-dialog2-header-close").click(e.cancelCallback),r}var c="jira-software.kanplan.onboarding.convert.",d=function(){new o(this)};return d.prototype.setRapidViewId=function(i){this.rapidViewId=i},d.prototype.setIssuesCount=function(i){this.issuesCount=i},d.prototype.setColumnName=function(i){this.columnName=i},d.prototype.show=function(){var i=function(){a.autoConvertKanPlan(this.rapidViewId).done(function(){this.trigger(d.CONVERT_SUCCESS)}.bind(this)).fail(function(i){this.stopAction();var n=i.error.errors&&i.error.errors[0]&&i.error.errors[0].message;n||(n="Sorry an unexpected error occurred! Please try again. \u003cbr\u003eIf this error persists please contact your JIRA Administrator."),this.errorMessage&&this.errorMessage.remove(),this.errorMessage=AJS.messages.error(".aui-dialog2-content",{title:"Kanban backlog setup failed",body:"<p>"+n+"</p>",closeable:!1})}.bind(o)),a.sendAnalyticsInfo(c+"confirm",{issueCount:this.issuesCount,boardId:this.rapidViewId})}.bind(this),n=a.sendAnalyticsInfo.bind(this,c+"cancel",{issueCount:this.issuesCount,boardId:this.rapidViewId},!1),e=function(){a.sendAnalyticsInfo(c+"configure",{issueCount:this.issuesCount,boardId:this.rapidViewId}),GH.RapidBoard.gotoRapidViewConfiguration(this.rapidViewId,"columns")}.bind(this),o=s({callback:i,secondaryCallback:e,cancelCallback:n,columnName:this.columnName});o.show()},d.CONVERT_SUCCESS="kanplan.convert.success",d});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/kanplan/KanPlanConvertDialog.soy' */
// This file was automatically generated from KanPlanConvertDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.kanplan.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.kanplan == 'undefined') { GH.tpl.kanplan = {}; }


GH.tpl.kanplan.convertDialog = function(opt_data, opt_ignored) {
  return '' + aui.dialog.dialog2({content: '' + GH.tpl.kanplan.dialogContent(opt_data), modal: false, removeOnHide: true, visible: true, id: 'ghx-kanplan-convert', extraAttributes: 'modal="true"', titleText: '' + soy.$$escapeHtml("Kanban backlog"), footerActionContent: '' + GH.tpl.kanplan.footerActionContent(null)});
};
if (goog.DEBUG) {
  GH.tpl.kanplan.convertDialog.soyTemplateName = 'GH.tpl.kanplan.convertDialog';
}


GH.tpl.kanplan.dialogContent = function(opt_data, opt_ignored) {
  return '<div class="ghx-kanban-convert-content"><div class="ghx-kanban-convert-kanban-convert"><div class="ghx-kanban-convert-image"></div></div><div class="ghx-kanban-convert-image-message">' + ((opt_data.isEpicsAndVersionsEnabled) ? '<p>' + soy.$$escapeHtml("The new Kanban backlog gives your a bigger space to plan work for your team. A clear list of issues, easy drag and drop, epics and versions in separate panels - all there, ready to go.") + '</p><p>' + soy.$$filterNoAutoescape(AJS.format("To enable, we\x27\x27ll move your {0}{1}{2} column to the new view. Is this the right column?",'<strong>',opt_data.columnName,'</strong>')) + '</p>' : '<p>' + soy.$$filterNoAutoescape(AJS.format("The Kanban backlog gives you a bigger space to plan work for your team. To get started, we\x27\x27ll move your {0}{1}{2} column to the new view. Is this the right column?",'<strong>',opt_data.columnName,'</strong>')) + '</p>') + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.kanplan.dialogContent.soyTemplateName = 'GH.tpl.kanplan.dialogContent';
}


GH.tpl.kanplan.footerActionContent = function(opt_data, opt_ignored) {
  return '' + aui.buttons.button({id: 'ghx-kanplan-convert-dialog-confirm-button', text: '' + soy.$$escapeHtml("Yes, use this column"), type: 'primary'}) + aui.buttons.button({id: 'ghx-kanplan-convert-dialog-configure-button', text: '' + soy.$$escapeHtml("Let me choose")});
};
if (goog.DEBUG) {
  GH.tpl.kanplan.footerActionContent.soyTemplateName = 'GH.tpl.kanplan.footerActionContent';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/kanplan/KanPlanOnboardingFlags.soy' */
// This file was automatically generated from KanPlanOnboardingFlags.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.kanplan.onboarding.flags.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.kanplan == 'undefined') { GH.tpl.kanplan = {}; }
if (typeof GH.tpl.kanplan.onboarding == 'undefined') { GH.tpl.kanplan.onboarding = {}; }
if (typeof GH.tpl.kanplan.onboarding.flags == 'undefined') { GH.tpl.kanplan.onboarding.flags = {}; }


GH.tpl.kanplan.onboarding.flags.autovenversionSuccessFlag = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$escapeHtml("We\x27ve created your Kanban backlog.") + '</p>' + ((opt_data.shouldLinkToBacklog) ? '<p><a href="#" class="kanplan-autoconvert-success-flag">' + soy.$$escapeHtml("Take me there") + '</a></p>' : '');
};
if (goog.DEBUG) {
  GH.tpl.kanplan.onboarding.flags.autovenversionSuccessFlag.soyTemplateName = 'GH.tpl.kanplan.onboarding.flags.autovenversionSuccessFlag';
}


GH.tpl.kanplan.onboarding.flags.dismissedFlag = function(opt_data, opt_ignored) {
  var output = '';
  var openTag__soy12 = '<a class="kanplan-autoconvert-dismiss-flag" href="' + soy.$$escapeHtml(opt_data.url) + '">';
  var closeTag__soy16 = '</a>';
  output += soy.$$filterNoAutoescape(AJS.format("You can enable your Kanban backlog later at {0}Board configuration - Columns{1}",openTag__soy12,closeTag__soy16));
  return output;
};
if (goog.DEBUG) {
  GH.tpl.kanplan.onboarding.flags.dismissedFlag.soyTemplateName = 'GH.tpl.kanplan.onboarding.flags.dismissedFlag';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/BacklogController.js' */
define("jira-agile/rapid/ui/plan/backlog-controller",["require"],function(e){"use strict";function i(e){if(GH.RapidBoard.State.isKanbanBoard()){var i=a.map(e.issues,function(e){return e.issueKey});return l.hasAnyIssueInvisible(i)}return!0}function t(e,i,t){var s=[];return a.each(i,function(i){t[i]||s.push(e[i])}),s}var a=e("underscore"),s=e("jquery"),r=e("jira/util/formatter"),n=e("jira/util/browser"),l=e("jira-agile/rapid/ui/plan/backlog-model"),o=e("jira-agile/rapid/ui/plan/BacklogView"),d=e("jira-agile/rapid/ui/plan/backlog-selection-controller"),u=e("jira-agile/rapid/ui/plan/sprint-backlog-controller"),c=e("jira-agile/rapid/ui/plan/sprint-view"),p=e("jira-agile/rapid/ui/plan/subtasks-expanding-controller"),g=e("jira-agile/rapid/ui/plan/sprint-backlog-view"),f=e("jira-agile/rapid/ui/plan/sprint-config"),I=e("jira-agile/rapid/ui/plan/plan-rank-controller"),C=e("jira-agile/rapid/ui/plan/plan-controls"),v=e("jira-agile/rapid/ui/plan/plan-view"),S=e("jira-agile/rapid/ui/plan/plan-controller"),E=e("jira-agile/rapid/ui/plan/plan-issue-list-filtering"),h=e("jira-agile/rapid/ui/plan/sprint-controller"),V=e("jira-agile/rapid/ui/kanplan/kan-plan-feature-service"),H=null,k={};return k.visible=!1,k.rapidViewData=void 0,k.rapidViewConfig=void 0,k.lastExecutedSearchFilter=void 0,k.issueCreatedCallbacks={},k.init=function(){d.init(),u.init(),h.init(),I.init();var i=s(GH);i.bind("issueUpdated",k.handleIssueUpdated),i.bind("issueCreated",k.handleIssueCreated),i.bind("issuesRemovedFromSprint",k.handleIssuesRemovedFromSprint),i.bind(GH.Dialogs.StartSprintDialog.EVENT_SPRINT_STARTED,k.handleSprintStarted),s(C.quickfilters).bind("quickFilterChange",function(){k.visible&&k.loadData()}),GH.Features.EDITABLE_DETAIL_VIEW_ENABLED.isEnabled()&&e("jira-agile/rapid/ui/detail/detail-view-resources").done(function(){H=e("jira-agile/rapid/ui/detail/inlineedit/details-view-reload-reason")})},k.setRapidView=function(e){k.rapidViewData=e},k.setRapidViewConfig=function(e){k.rapidViewConfig=e},k.show=function(e){return!!k.rapidViewData&&(k.visible=!0,void k.loadData().done(e))},k.hide=function(){GH.EpicView.hide(),k.visible=!1},k.loadData=function(e){var i={rapidViewId:k.rapidViewData.id,activeQuickFilters:C.quickfilters.getActiveQuickFilters(),selectedProjectKey:GH.RapidBoard.projectKey};a.isEmpty(i.activeQuickFilters)&&delete i.activeQuickFilters,v.showLoadingBacklog(),GH.planOnboarding.refresh();var t={url:"/xboard/plan/backlog/data.json",data:i},s=GH.Ajax.get(t,"backlogDataModel").done(k.processData.bind(null,e));return s.fail(function(e){if(e.error&&e.error.errors&&e.error.errors.length){var i=e.error.errors[0].message;i==="Kanban backlog is not enabled for this board."&&n.reloadViaWindowLocation()}v.hideLoadingBacklog(),S.hide()}),s.promise()},k.processData=function(e,i){GH.log("loaded data for backlog",GH.Logger.Contexts.ajax),k.visible&&(k.lastExecutedSearchFilter=void 0,l.setRankCustomFieldId(i.rankCustomFieldId),l.setEstimationStatistic(k.rapidViewConfig.estimationStatistic),l.setTrackingStatistic(k.rapidViewConfig.trackingStatistic),GH.VersionController.setProjects(i.projects),GH.VersionController.setVersions(i.versionData),GH.EpicController.setEpicData(i.epicData),l.setData(i),l.setCanManageSprints(i.canManageSprints),l.setCanCreateIssue(i.canCreateIssue),l.setSupportsPages(i.supportsPages),d.validateCurrentSelection(),GH.VersionController.validateSelectedVersion(),GH.EpicController.validateSelectedEpic(),d.selectAllCollapsedSubtasks(),GH.VersionView.show(),GH.EpicView.show(),k.handleVersionFiltering(),k.handleEpicFiltering(),o.draw(),GH.VersionController.registerVersionsCount(),GH.EpicController.registerEpicsCount(i.epicData),C.searchFilter.clearLastSearch(),C.searchFilter.searchQuery(),v.hideLoadingBacklog(),v.updateEpicsAndVersionsColumnBorder(),GH.RapidBoard.ViewController.updateContentContainer(),S.updateDetailsView(d.getSelectedIssueKey(),null,e),o.updateIssueSelectionState(!0))},k.handleVersionFiltering=function(){V.isEpicsAndVersionsEnabled()?k.updateVersionFiltering(!0):(GH.VersionController.setFilteredVersionId(null),S.setVersionsColumnVisible(!1),GH.RapidBoard.State.replaceState())},k.handleEpicFiltering=function(){S.isEpicsPanelEnabled()?k.updateEpicFiltering(!0):(GH.EpicController.setFilteredEpicKey(null),S.setEpicsColumnVisible(!1),GH.RapidBoard.State.replaceState())},k.updateUIAfterSelectionChange=function(e){o.updateIssueSelectionState(e.doScroll),S.updateDetailsView(d.getSelectedIssueKey(),e.openDetailsView)},k.updateEpicData=function(){if(!k.visible)return(new s.Deferred).resolve();var e={rapidViewId:k.rapidViewData.id};return GH.Ajax.get({url:"/xboard/plan/backlog/epics.json",data:e},"epics").done(function(e){k.visible&&(GH.log("loaded data for epics",GH.Logger.Contexts.ajax),k.setEpicData(e))})},k.setEpicData=function(e){GH.EpicController.setEpicData(e),GH.EpicView.updateEpics()},k.updateVersionData=function(){if(!k.visible)return(new s.Deferred).resolve();var e={rapidViewId:k.rapidViewData.id,activeQuickFilters:C.quickfilters.getActiveQuickFilters()};return GH.Ajax.get({url:"/xboard/plan/backlog/versions.json",data:e},"versions").done(function(e){k.visible&&(GH.log("loaded data for versions",GH.Logger.Contexts.ajax),k.setVersionData(e.versionData))})},k.setVersionData=function(e){GH.VersionController.setVersions(e),GH.VersionController.validateSelectedVersion(),GH.VersionView.updateView()},k.moveIssues=function(e,i,t,a){var s=l.moveIssuesNew(e,i,t,a);return o.redrawChangedModels(s),l.hasAnySubtasks(e)},k.reorderIssuesInSprint=function(e,i){var t=l.reorderIssuesInModel(e,i);o.redrawChangedModels(t)},k.revertStatistics=function(){c.updateSprintStatistics(),g.updateBacklogHeader()},k.handleSprintStarted=function(){d.clearSelection(),GH.RapidBoard.ViewController.setMode("work"),GH.RapidBoard.State.pushState()},k.handleIssueForEpicCreated=function(e,i){if(k.visible)return a.isUndefined(k.handleIssueForEpicCreated.deferred)&&(k.handleIssueForEpicCreated.deferred=new s.Deferred,setTimeout(function(){k.loadData().then(function(){k.handleIssueForEpicCreated.deferred.resolve(),k.handleIssueForEpicCreated.deferred=void 0},function(){k.handleIssueForEpicCreated.deferred.reject()})},0)),k.handleIssueForEpicCreated.deferred},k.registerIssueCreatedCallback=function(e,i){k.issueCreatedCallbacks[e]=i},k.unregisterIssueCreatedCallback=function(e){delete k.issueCreatedCallbacks[e]},k.handleIssueCreated=function(e,i){if(k.visible){var t=a.clone(k.issueCreatedCallbacks);setTimeout(function(){k.handleIssueCreatedImpl(i,t)},0)}},k.handleIssueCreatedImpl=function(e,i){function t(e){var i=a.map(e,function(e){return{issueKey:e.key,issueId:e.id,issueType:e.fields.issuetype.id}});if(!S.isEpicsPanelEnabled())return{issues:i,epics:[]};var t=GH.EpicConfig.getEpicIssueTypeId();return a.reduce(i,function(e,i){return i.issueType===t?e.epics.push(i):e.issues.push(i),e},{issues:[],epics:[]})}return e.isSubtask?void k.subtasksCreated(e):k.getIssueDetails(e.issues,"issuetype").done(function(e){var a=t(e.issues);k.issuesAndEpicsCreated(a.issues,a.epics,i)})},k.getIssueDetails=function(e,i){var t=a.pluck(e,"issueKey");return k.getIssueDetailsByKeys(t,i)},k.getIssueDetailsByKeys=function(e,i){var t=e.join(","),a="issueKey in ("+t+")";return GH.Ajax.get({bareUrl:GH.Ajax.buildBareRestUrl("/rest/api/2/search"),data:{jql:a,fields:i}},"getissues")},k.issuesAndEpicsCreated=function(e,i,t){if(!a.isEmpty(e)||!a.isEmpty(i)){if(a.isEmpty(e)&&S.isEpicsPanelEnabled())return k.reloadAndShowCreatedEpics(i);var r=a.map(t,function(t){return!!a.isFunction(t)&&t(e,i)}),n=a.filter(r,function(e){return e&&(e instanceof s.Deferred||a.isFunction(e.promise))}),l=a.map(n,function(e){var i=s.Deferred();return e.always?e.always(i.resolve):e.then(i.resolve,i.resolve),i});return s.when.apply(s,l).then(function(){k.reloadAndSelectCreatedIssues(e)})}},k.subtasksCreated=function(e){GH.DetailsViewScrollTracker.setSelectedTab(GH.DetailsView.TAB_SUBTASKS);var t;t=H?k.loadData(H.SUBTASKS_CHANGED):k.loadData(),t.done(function(){k.selectCreatedIssues(e.issues),k.expandParents(e.issues),i(e)&&GH.RapidBoard.QuickCreate.showSubtaskCreatedMessage(e)})},k.reloadAndSelectCreatedIssues=function(e){return k.loadData().done(function(){var i=k.selectCreatedIssues(e);i||GH.RapidBoard.QuickCreate.showCreatedIssuesMessage({issues:e})})},k.selectCreatedIssues=function(e){var i=a.last(e),t=l.isIssueVisible(i.issueKey);return t&&d.selectIssue(i.issueKey),!!t},k.expandParents=function(e){e.forEach(function(e){p.toggleExpandStateForKey(e.issueKey,!0)})},k.reloadAndShowCreatedEpics=function(e){k.updateEpicData().done(function(){k._showCreatedEpicsMessage(e),GH.EpicView.renderNewEpics(e)})},k._showCreatedEpicsMessage=function(e){var i=a.last(e),t=GH.EpicController.getEpicModel().getEpicList(),s=t.isIssueVisible(i.issueKey);GH.RapidBoard.QuickCreate.showCreatedEpicsMessage({issues:e},s),s&&GH.EpicView.scrollToBottom()},k.handleIssueUpdated=function(e,i){if(k.visible){GH.log(e.type+" from source "+i.source+" handled","BacklogController");var t=parseInt(i.issueId,10),s=l.findModelWithIssue(t),r=!s,n=!1,o=!1,d=!1,u=!1;if("quickEdit"===i.source?(n=!0,o=!0,d=!0,!s&&l.trackingStatistic.isEnabled&&(u=!0)):a.isUndefined(i.fieldId)||(o=i.fieldId===k.rapidViewConfig.estimationStatistic.fieldId||i.fieldId===GH.EpicConfig.getEpicLinkFieldId(),d="fixVersions"===i.fieldId||"versions"===i.fieldId||i.fieldId===k.rapidViewConfig.estimationStatistic.fieldId),i.fieldChanges){var c=i.fieldChanges[f.getSprintFieldId()];c&&c.original!=c.updated&&(u=!0)}u?H&&r?k.loadData(H.SUBTASKS_CHANGED):k.loadData():(d?k.updateVersionData().always(k.reloadSingleIssue.bind(null,i.issueId)):k.reloadSingleIssue(i.issueId),n&&(H&&r?S.reloadDetailView(H.SUBTASKS_CHANGED):S.reloadDetailView()),o&&k.updateEpicData())}},k.handleIssuesRemovedFromSprint=function(e,i){k.visible&&(1===i.issueKeys.length&&(d.selectIssue(i.issueKeys[0]),d.selectionManager._addSelectedIssueKeys(i.issueKeys)),k.loadData())},k.reloadSingleIssue=function(e){var i={rapidViewId:k.rapidViewData.id,issueId:e,activeQuickFilters:C.quickfilters.getActiveQuickFilters()};GH.Ajax.get({url:"/xboard/plan/backlog/issue.json",data:i},"updateSingleIssue."+e).done(function(i){GH.log("loaded data for single issue with id "+e,GH.Logger.Contexts.ajax),k.updateIssues(i)})},k.updateIssues=function(e){a.isArray(e)||(e=[e]);var i=[],t=!1;if(a.each(e,function(e){var a=l.findModelWithIssue(e.key);if(a){if(!e.parentKey){var s=l.findModelsWithFakeParent(e.key);[].push.apply(i,s)}S.isEpicsPanelEnabled()&&e.typeId===GH.EpicConfig.getEpicIssueTypeId()?(a.getIssueList().removeIssues(e.key),t=!0):a.getIssueList().updateIssue(e),i.push(a),l.afterIssueUpdate(e)}}),l.updateFiltering(),t){k.updateEpicData(),d.validateCurrentSelection();var s=d.getSelectedIssueKey();GH.DetailsView.setSelectedIssueKey(s),S.reloadDetailView()}i=a.uniq(i),o.redrawChangedModels(i)},k.removeIssues=function(e,i){e.getIssueList().removeIssues(i),o.redrawChangedModel(e)},k.isFiltersActive=function(){return!a.isEmpty(C.quickfilters.getActiveQuickFilters())},k.executeSearch=function(e){if(GH.Logger.timeStart("BacklogController.executeSearch regex"),a.isNull(e))k.lastExecutedSearchFilter=null;else{var i=" ";k.lastExecutedSearchFilter=function(t){return t=t||{},e.test(t.key+i+t.summary+i+t.typeName+i+t.assignee+i+t.assigneeName)}}E.setInstantFilter(k.lastExecutedSearchFilter);var t=l.updateFiltering();return GH.Logger.timeStop("BacklogController.executeSearch regex"),GH.Logger.timeStart("BacklogController.executeSearch ui update"),t&&o.updateHiddenIssues(),GH.Logger.timeStop("BacklogController.executeSearch ui update"),!1},k.clearFilters=function(){var e=C.quickfilters.clearFilters();if(C.searchFilter.clearSearchBox(),GH.VersionController.setFilteredVersionId(null),GH.EpicController.setFilteredEpicKey(null),GH.EpicController.clearVersionFiltering(),e)E.clearAllFilters(),k.loadData().done(function(){GH.RapidBoard.State.pushState()});else{var i=E.clearAllFilters();if(i){GH.EpicView.deselectAllEpics(),GH.VersionView.deselectAllVersions();var t=l.updateFiltering();t&&o.updateHiddenIssues(),GH.RapidBoard.State.pushState()}}},k.updateEpicFiltering=function(e){var i=GH.EpicController.getFilteredEpicKey();E.setEpicFilter(i);var t=l.updateFiltering();t&&!e&&o.updateHiddenIssues()},k.updateVersionFiltering=function(e){var i=GH.VersionController.getFilteredVersionId();E.setVersionFilter(i);var t=l.updateFiltering();t&&!e&&o.updateHiddenIssues(),GH.EpicController.applyVersionFiltering()},k.calculateIssueRenderData=function(){var e=d.getSelectedIssueKeys(),i={};a.each(e,function(e){i[e]=!0});var t=d.getSelectedIssueKey(),s=l.getHiddenBySearchIssues();return{selectedIssueKeys:i,mainSelectedIssue:t,hiddenIssues:s}},k.extractPrintableIssuesFromAllSprints=function(){var e=[];return a.each(l.getSprintModels(),function(i){var s=i.getSprintData(),r=t(i.getIssueList().getAllIssues(),i.getIssueList().getVisibleRankables(),l.getHiddenBySearchIssues());a.isEmpty(r)||e.push({sprintId:s.id,sprintName:s.name,issues:r})}),e},k.getPrintableIssuesFromPlanBacklog=function(){var e=l.getBacklogModel2().getIssueList();return t(e.getAllIssues(),e.getVisibleRankables(),l.getHiddenBySearchIssues())},k.getEpicMap=function(){return GH.EpicController.getEpicModel().getEpicList().getAllIssues()},k});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/BacklogStatistics.js' */
define("jira-agile/rapid/ui/plan/backlog-statistics",["underscore","require"],function(t,e){"use strict";var i,a=e("jira-agile/rapid/global-events");a.on("pre-initialization",function(){i=e("jira-agile/rapid/ui/plan/backlog-model")});var s={EXCLUDE_SUBTASKS_COLUMN_CONSTRAINT:"issueCountExclSubs"};return s.ignoredStatisticTypes={issueCount:!0,none:!0},s.getIssueListEstimateStatistics=function(t){var e=s._calculateSprintModelStatistics(t),a=i.estimationStatistic,n={};n.shown=a&&a.isEnabled&&!s.ignoredStatisticTypes[a.typeId]||!1,n.shown&&(n.name=a?a.name:"",n.total={raw:e.estimate.total,formatted:s.formatStatisticForRendering(a,e.estimate.total)},n.visible={raw:e.estimate.visible,formatted:s.formatStatisticForRendering(a,e.estimate.visible)});var r=i.trackingStatistic,l={};return l.shown=r&&r.isEnabled&&!s.ignoredStatisticTypes[a.typeId]&&(e.estimate.total!=e.tracking.total||e.estimate.visible!=e.tracking.visible)||!1,l.shown&&(l.name=r?r.name:"",l.total={raw:e.tracking.total,formatted:s.formatStatisticForRendering(r,e.tracking.total)},l.visible={raw:e.tracking.visible,formatted:s.formatStatisticForRendering(r,e.tracking.visible)}),{estimate:n,tracking:l}},s._calculateSprintModelStatistics=function(e){var i,a=e.getAllIssues(),s=0,n=0,r=0,l=0,o=0,u=0;return t.each(a,function(a){var c=e.isIssueVisible(a.key);t.isUndefined(a.estimateStatistic)||t.isUndefined(a.estimateStatistic.statFieldValue.value)||(i=a.estimateStatistic.statFieldValue.value,s+=i,c&&(n+=i)),t.isUndefined(a.trackingStatistic)||t.isUndefined(a.trackingStatistic.statFieldValue.value)||(i=a.trackingStatistic.statFieldValue.value,r+=i,c&&(l+=i)),o++,c&&u++}),{estimate:{total:s,visible:n},tracking:{total:r,visible:l},issueCount:{total:o,visible:u}}},s.formatStatisticForRendering=function(t,e){return"duration"==t.renderer?GH.TimeFormat.formatShortDurationForTimeTrackingConfiguration(e):GH.NumberFormat.format(e)},s.getAllIssuesBeforeIndex=function(t,e,i,a){var n=[];a=a||function(t){return!s._isRankableId(e[t])};for(var r=i-1;r>=0&&a(r);r--)n=[e[r]].concat(n);return s._mapIssueKeysToIssues(t,n)},s._isRankableId=function(e){return t.isNumber(e)},s._mapIssueKeysToIssues=function(e,i){var a=t.map(i,function(t){return e[t]});return t.filter(a,function(e){return!t.isUndefined(e)})},s.getIssueListStats=function(e,i,a){var n,r=e.getAllIssues(),l=t.keys(r).length,o=e.getNumVisibleIssues(),u=l>0;return n=i?a?s.getActiveSprintEmptyMessage(!u):s.getFutureSprintEmptyMessage(!u):s.getBacklogEmptyMessage(!u),{totalCount:l,visibleCount:o,allVisible:l===o,noneVisible:0===o,hasIssues:u,empty:!u,emptyMessage:n}},s.calculateStatisticsFieldValue=function(e,i){if(i.typeId===s.EXCLUDE_SUBTASKS_COLUMN_CONSTRAINT){var a=e.getIssuesExcludingSubtasks().length,n=e.getVisibleIssuesBeforeRankable(!1),r=n.filter(function(i){return t.isUndefined(e.getIssueData(i).parentId)});return{statisticsFieldTotal:a,statisticsFieldVisible:r.length,excludeSubtasks:!0,subtasksTotal:t.keys(e.getAllIssues()).length-a,subtasksVisible:n.length-r.length}}return{statisticsFieldTotal:t.keys(e.getAllIssues()).length,statisticsFieldVisible:e.getNumVisibleIssues()}},s.getBacklogEmptyMessage=function(t){return t?"There are currently no issues in the backlog":"All issues in the backlog are currently filtered"},s.getFutureSprintEmptyMessage=function(t){return t?GH.RapidBoard.State.isScrumBoard()?"Plan a sprint by dragging the sprint footer down below some issues, or by dragging issues here":"Plan your work by dragging some issues here":GH.RapidBoard.State.isScrumBoard()?"All issues in this sprint are currently filtered":"All issues are currently filtered"},s.getActiveSprintEmptyMessage=function(t){return t?"This sprint contains no issues":"All issues in this sprint are currently filtered"},s.calculateSprintProgress=function(e,i,a){var n=s._getTodoInProgressDoneMapping(i),r=[{nameKey:"gh.boards.notstarted",name:"Not Started",title:"",total:{value:0,text:"0"}},{nameKey:"gh.boards.inprog",name:"In Progress",title:"",total:{value:0,text:"0"}},{nameKey:"gh.boards.done",name:"Done",title:"",total:{value:0,text:"0"}}];t.each(e.getAllIssues(),function(e){var i=n[e.statusId];t.isUndefined(i)||e.hidden||e.estimateStatistic&&e.estimateStatistic.statFieldValue&&e.estimateStatistic.statFieldValue.value&&(r[i].total.value+=e.estimateStatistic.statFieldValue.value)});var l=t.reduce(r,function(t,e){return t+e.total.value},0);if(!l)return t.each(r,function(t){t.total.text=""}),r;var o=s.formatStatisticForRendering(a,l);return t.each(r,function(t){t.total.text=s.formatStatisticForRendering(a,t.total.value),t.title=GH.tpl.sprintview.renderProgressIndicatorTitle({indicator:t,allIndicatorsTotalText:o,statLabel:a.name})}),r},s._getTodoInProgressDoneMapping=function(e){for(var i={},a=function(t){i[t]=n},s=0;s<e.length;s++){var n,r=e[s],l=r.statusIds;n=0===s?0:s===e.length-1?2:1,t.each(l,a)}return i},s.splitIssuesIntoNotDoneAndDone=function(e,i){var a=s._getTodoInProgressDoneMapping(i),n=[],r=[];return t.each(e,function(t){var e=a[t.statusId];2==e?r.push(t):n.push(t)}),{notDone:n,done:r}},s.getAssignedWorkStats=function(e){function a(t,e){return{assignee:t,assigneeName:e,totalEstimate:0,totalTrackingEstimate:0,issues:[]}}function n(e){e.totalEstimateText=s.formatStatisticForRendering(i.estimationStatistic,e.totalEstimate),!t.isUndefined(i.trackingStatistic)&&i.trackingStatistic.isEnabled&&(e.totalTrackingEstimateText=s.formatStatisticForRendering(i.trackingStatistic,e.totalTrackingEstimate))}var r=e.getVisibleIssues(),l=t.reduce(r,function(t,e){var i,s=e.assignee;s?(t.assignees[s]||(t.assignees[s]=a(s,e.assigneeName)),i=t.assignees[s]):i=t.unassigned,i.issues.push(e),t.all.issues.push(e);var n=e.estimateStatistic&&e.estimateStatistic.statFieldValue&&e.estimateStatistic.statFieldValue.value;n&&(i.totalEstimate+=n,t.all.totalEstimate+=n);var r=e.trackingStatistic&&e.trackingStatistic.statFieldValue&&e.trackingStatistic.statFieldValue.value;return r&&(i.totalTrackingEstimate+=r,t.all.totalTrackingEstimate+=r),t},{unassigned:a(null,null),assignees:{},all:a(null,null)}),o=t.toArray(l.assignees).sort(function(t,e){return e.totalEstimate-t.totalEstimate||t.assigneeName.localeCompare(e.assigneeName)}),u=i.estimationStatistic;return s.ignoredStatisticTypes[u.typeId]||(t.each(o,n),n(l.unassigned),n(l.all)),{unassigned:l.unassigned,assigned:o,all:l.all}},s});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/SprintBacklogController.js' */
define("jira-agile/rapid/ui/plan/sprint-backlog-controller",["require"],function(i){"use strict";var r=i("jira-agile/rapid/ui/plan/sprint-backlog-view"),n={};return n.init=function(){r.init()},n});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/SprintBacklogView.js' */
define("jira-agile/rapid/ui/plan/sprint-backlog-view",["require","underscore"],function(a,t){"use strict";function i(){s(".js-add-sprint").tooltip({html:!0,title:"data-tooltip"})}var e,s=a("jquery"),n=a("jira-agile/rapid/global-events"),r=a("jira-agile/rapid/ui/plan/sprint-controller"),l=a("jira-agile/rapid/ui/plan/backlog-model"),o=a("jira-agile/rapid/ui/plan/backlog-statistics"),c=a("jira-agile/rapid/ui/plan/issue-list-util"),u=a("jira-agile/rapid/ui/plan/subtasks-expanding-controller");n.on("pre-initialization",function(){e=a("jira-agile/rapid/ui/plan/backlog-controller")});var p={};p.containerSelector=".ghx-backlog-group",p.init=function(){s(document).on("click",".js-add-sprint",r.addSprint)},p.renderBacklog=function(a){var t=d(a),e=s(".ghx-backlog-group");e.append(s(t)),i()},p.updateBacklog=function(){var a=e.calculateIssueRenderData(),t=d(a),n=s(".ghx-backlog-group");n.empty().append(s(t)),i()},p.updateBacklogHeader=function(){var a=s(g()).html();s(".js-marker-backlog-header").html(a),i()},p.calculateBacklogIssueListStats=function(a){var i=o.getIssueListStats(a,!1);return GH.RapidBoard.State.isKanbanBoard()&&(i=t.extend({},i,o.calculateStatisticsFieldValue(a,e.rapidViewConfig.statisticConfig))),i};var d=function(a){var t=l.getBacklogModel2(),i=t.getIssueList(),e=p.calculateBacklogIssueListStats(i),s=i.getVisibleRankables(),n=i.getAllIssues(),r=c.issueListToTree(s.map(function(a){return n[a]}),l.getAllIssuesWithMissingParents());c.applySubtaskCount(r,i,a.hiddenIssues),u.applyExpandedState(r);var o={issueKeys:s,issues:r,issueListStats:e,epics:GH.EpicController.getEpicModel().getEpicList().getAllIssues(),issueRenderData:a,statLabel:l.estimationStatistic.name,isRankable:l.isRankable(),canManageSprints:l.canManageSprints(),showEpic:GH.RapidBoard.State.getEpicShownOnRapidBoard(),shouldDisplayCreateSprintButton:GH.RapidBoard.State.isScrumBoard(),extraClasses:GH.RapidBoard.State.isKanbanBoard()?"ghx-kanban-backlog":void 0,isKanbanBoard:GH.RapidBoard.State.isKanbanBoard()};return GH.tpl.sprintbacklogview.renderBacklogIssues(o)},g=function(){var a=l.getBacklogModel2(),t=a.getIssueList(),i=p.calculateBacklogIssueListStats(t),e={issueListStats:i,isRankable:l.isRankable(),canManageSprints:l.canManageSprints(),shouldDisplayCreateSprintButton:GH.RapidBoard.State.isScrumBoard()};return GH.tpl.sprintbacklogview.renderBacklogHeader(e)};return p});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/SprintBacklogView.soy' */
// This file was automatically generated from SprintBacklogView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.sprintbacklogview.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.sprintbacklogview == 'undefined') { GH.tpl.sprintbacklogview = {}; }


GH.tpl.sprintbacklogview.renderBacklogIssues = function(opt_data, opt_ignored) {
  return '<div class="ghx-onboarding-fillyourbacklog-group"/><div class="ghx-backlog-container ghx-open ghx-everything-else' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '">' + GH.tpl.sprintbacklogview.renderBacklogHeader(opt_data) + '<div class="js-issue-list' + ((opt_data.issueListStats.noneVisible) ? ' ghx-no-issues' + ((opt_data.issueListStats.empty) ? ' js-empty-list' : '') : ' ghx-has-issues') + '">' + GH.tpl.planissuelist.renderIssueList(opt_data) + '<div class="ghx-helper"><div class="ghx-description">' + soy.$$escapeHtml(opt_data.issueListStats.emptyMessage) + '</div></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintbacklogview.renderBacklogIssues.soyTemplateName = 'GH.tpl.sprintbacklogview.renderBacklogIssues';
}


GH.tpl.sprintbacklogview.renderBacklogHeader = function(opt_data, opt_ignored) {
  return '<div class="ghx-backlog-header js-marker-backlog-header"><div class="ghx-name">' + soy.$$escapeHtml("Backlog") + '</div>' + GH.tpl.planissuelist.renderIssueCount(opt_data) + '<div class="ghx-controls aui-group"><div class="aui-item">' + ((opt_data.shouldDisplayCreateSprintButton) ? '<button class="js-add-sprint aui-button ' + ((! opt_data.isRankable || ! opt_data.canManageSprints) ? ' disabled' : '') + '"' + ((! opt_data.isRankable || ! opt_data.canManageSprints) ? ((! opt_data.isRankable) ? 'data-tooltip="' + soy.$$escapeHtml("The board must be ordered by Rank in order to add a sprint") + '"' : 'data-tooltip="' + soy.$$escapeHtml("You need the Manage Sprints permission for all projects in the origin board to create a sprint. \x3ca class\x3d\x22manage-sprint-permission-help\x22 href\x3d\x22#\x22\x3eLearn more\x3c/a\x3e") + '"') + 'aria-disabled="true"' : 'data-tooltip=""') + '>' + soy.$$escapeHtml("Create Sprint") + '</button>' : '') + '</div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintbacklogview.renderBacklogHeader.soyTemplateName = 'GH.tpl.sprintbacklogview.renderBacklogHeader';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/PlanIssueListView.js' */
define("jira-agile/rapid/ui/plan/plan-issue-list-view",["require"],function(e){"use strict";function t(){return Array.prototype.join.call(arguments,", ")}var n=e("jquery"),s=(e("underscore"),"issue-key"),r="issue-id",a="fake-parent-issue-key",u=".js-issue",i=".ghx-marker",l=".ghx-parent-group",o="ghx-subtask",d={};return d.findPreviousVisibleIssueElementInList=function(e){var t=e.prevAll(u+":visible");return t.length?t:null},d.findPrevRankableElement=function(e){var n=e.prevAll().filter(t(i,u,l)).not(":hidden");return n.length&&this.getRankableId(e)===this.getRankableId(n)&&(n=n.prev()),n},d.findNextRankableElement=function(e){var n=e.nextAll().filter(t(i,u,l)).not(":hidden");return n.length&&this.getRankableId(e)===this.getRankableId(n)&&(n=n.next()),n},d.getIssueKey=function(e){return e.data(s)?e.data(s):d.getClosestIssueElement(e).data(s)},d.getIssueId=function(e){return e.data(r)?e.data(r):d.getClosestIssueElement(e).data(r)},d.isSubtask=function(e){return d.getClosestIssueElement(e).hasClass(o)},d.getRankableId=function(e){if(!e)return!1;var t=e.data(a)||e.data(s);if(!t){var n=d.getClosestIssueElement(e);if(n.length>0)return n.data(s)}return t},d.getIssueByKey=function(e){return n(".js-issue[data-issue-key="+e+"]")},d.getClosestIssueElement=function(e){return e.closest(u)},d.getClosestParent=function(e){return e.closest(l)},d});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/PlanIssueListView.soy' */
// This file was automatically generated from PlanIssueListView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.planissuelist.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.planissuelist == 'undefined') { GH.tpl.planissuelist = {}; }


GH.tpl.planissuelist.renderIssueList = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-plan-dropzone"></div>';
  var issueList4 = opt_data.issues;
  var issueListLen4 = issueList4.length;
  for (var issueIndex4 = 0; issueIndex4 < issueListLen4; issueIndex4++) {
    var issueData4 = issueList4[issueIndex4];
    var renderParentGroup__soy5 = issueData4.subtasksCount > 0 || issueData4.fakeParent;
    output += ((renderParentGroup__soy5) ? (issueData4.fakeParent) ? '<div class="ghx-parent-group ghx-away js-fake-parent js-parent-drag" data-fake-parent-issue-key="' + soy.$$escapeHtml(issueData4.key) + '">' : '<div class="ghx-parent-group ghx-home js-parent-drag' + ((issueData4.expanded) ? ' ghx-subtasks-expanded' : '') + '" role="listitem" aria-label="' + soy.$$escapeHtml(issueData4.key) + ' ' + soy.$$escapeHtml(issueData4.summary) + '" data-issue-id="' + soy.$$escapeHtml(issueData4.id) + '" data-issue-key="' + soy.$$escapeHtml(issueData4.key) + '">' : '') + ((! issueData4.fakeParent) ? GH.tpl.planissuelist.renderIssue({issue: issueData4, epic: issueData4.epic ? opt_data.epics[issueData4.epic] : null, selectedIssueKeys: opt_data.issueRenderData.selectedIssueKeys, mainSelectedIssue: opt_data.issueRenderData.mainSelectedIssue, statLabel: opt_data.statLabel, isRankable: opt_data.isRankable, hiddenIssues: opt_data.issueRenderData.hiddenIssues, showEpic: opt_data.showEpic, isKanbanBoard: opt_data.isKanbanBoard}) : '');
    if (issueData4.subTasks) {
      output += GH.tpl.planissuelist.renderFakeParent({key: issueData4.key, summary: issueData4.summary, filtered: issueData4.subtasksFiltered}) + '<div class="ghx-subtask-group">';
      var subTaskList46 = issueData4.subTasks;
      var subTaskListLen46 = subTaskList46.length;
      for (var subTaskIndex46 = 0; subTaskIndex46 < subTaskListLen46; subTaskIndex46++) {
        var subTaskData46 = subTaskList46[subTaskIndex46];
        output += GH.tpl.planissuelist.renderIssue({issue: subTaskData46, epic: null, selectedIssueKeys: opt_data.issueRenderData.selectedIssueKeys, mainSelectedIssue: opt_data.issueRenderData.mainSelectedIssue, statLabel: opt_data.statLabel, isRankable: opt_data.isRankable, hiddenIssues: opt_data.issueRenderData.hiddenIssues, showEpic: opt_data.showEpic, isKanbanBoard: opt_data.isKanbanBoard});
      }
      output += '</div>';
    }
    output += (renderParentGroup__soy5) ? GH.tpl.planissuelist.renderSubtasksFiltered({issue: issueData4}) + '</div>' : '';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.planissuelist.renderIssueList.soyTemplateName = 'GH.tpl.planissuelist.renderIssueList';
}


GH.tpl.planissuelist.renderIssue = function(opt_data, opt_ignored) {
  var output = '';
  var hasVersionOrEpic__soy66 = opt_data.issue.fixVersionsUI && opt_data.issue.fixVersionsUI.versions && opt_data.issue.fixVersionsUI.versions.length > 0 || opt_data.epic;
  output += '<div class="js-issue js-sortable' + ((opt_data.issue.parentKey) ? ' ghx-issue-subtask' : ' js-parent-drag') + ' ghx-issue-compact' + ((opt_data.isKanbanBoard) ? ' ghx-issue-kanban-compact' : '') + ((! opt_data.isRankable) ? ' ghx-not-rankable' : '') + ((opt_data.issue.done) ? ' ghx-done' : '') + ((opt_data.selectedIssueKeys[opt_data.issue.key]) ? ' ghx-selected' + ((opt_data.mainSelectedIssue == opt_data.issue.key) ? ' ghx-selected-primary' : '') : '') + ' ghx-type-' + soy.$$escapeHtml(opt_data.issue.typeId) + ((opt_data.hiddenIssues[opt_data.issue.key]) ? ' ghx-filtered' : '') + ((opt_data.issue.flagged) ? ' ghx-flagged' : '') + ((opt_data.issue.parentKey || opt_data.issue.parentId) ? ' ghx-subtask' : '') + ((opt_data.issue.shouldIndentTop) ? ' ghx-subtask-indent-top' : '') + '" data-issue-id="' + soy.$$escapeHtml(opt_data.issue.id) + '" data-issue-key="' + soy.$$escapeHtml(opt_data.issue.key) + '" ><div class="ghx-issue-content"><div class="ghx-row">' + ((opt_data.isKanbanBoard) ? (opt_data.issue.subtasksCount > 0) ? '<span class="ghx-card-expander ghx-iconfont aui-icon aui-icon-small"></span>' : '<span class="ghx-card-expander-spacer"></span>' : '') + ((opt_data.issue.typeUrl) ? '<span class="ghx-type" title="' + soy.$$escapeHtml(opt_data.issue.typeName) + '"><img src="' + soy.$$escapeHtml(opt_data.issue.typeUrl) + '"></span>' : '') + '<div class="ghx-flags">' + ((opt_data.issue.flagged) ? '<span class="ghx-flag"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-flag" title="' + soy.$$escapeHtml("Flagged") + '"></span></span>' : (opt_data.issue.priorityUrl) ? '<span class="ghx-priority" title="' + soy.$$escapeHtml(opt_data.issue.priorityName) + '"><img src="' + soy.$$escapeHtml(opt_data.issue.priorityUrl) + '"></span>' : '') + '</div><div class="ghx-key"><a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(opt_data.issue.key) + '" title="' + soy.$$escapeHtml(opt_data.issue.key) + '" class="js-key-link">' + soy.$$escapeHtml(opt_data.issue.key) + '</a></div><div class="ghx-summary" title="' + soy.$$escapeHtml(opt_data.issue.summary) + '"><span class="ghx-inner">' + soy.$$escapeHtml(opt_data.issue.summary) + '</span></div></div>';
  if (hasVersionOrEpic__soy66 || ! opt_data.issue.extraFields || opt_data.issue.subtasksCount > 0) {
    output += '<div class="ghx-end ghx-row ghx-row-version-epic-subtasks">' + GH.tpl.planissuelist.renderSubTasksCount({count: opt_data.issue.subtasksCount});
    var extraClass__soy152 = opt_data.issue.fixVersionsUI && opt_data.issue.fixVersionsUI.versions && opt_data.issue.fixVersionsUI.versions.length > 0 && opt_data.epic && opt_data.epic.epicLabel ? 'ghx-label-double' : 'ghx-label-single';
    if (opt_data.issue.fixVersionsUI && opt_data.issue.fixVersionsUI.versions && opt_data.issue.fixVersionsUI.versions.length > 0) {
      var extraClasses__soy155 = ['ghx-label-0', 'ghx-label', extraClass__soy152];
      var extraAttributes__soy156 = {title: opt_data.issue.fixVersionsUI.formattedVersions};
      if (opt_data.issue.fixVersionsUI.versions.length > 1) {
        var text__soy159 = soy.$$escapeHtml(opt_data.issue.fixVersionsUI.versions.length) + ' ' + soy.$$escapeHtml("Versions");
        output += aui.labels.label({extraClasses: extraClasses__soy155, text: text__soy159, extraAttributes: extraAttributes__soy156}) + ' ';
      } else {
        output += aui.labels.label({extraClasses: extraClasses__soy155, text: opt_data.issue.fixVersionsUI.versions[0].name, extraAttributes: extraAttributes__soy156}) + ' ';
      }
    }
    output += ((opt_data.showEpic && opt_data.epic && opt_data.epic.epicLabel) ? GH.tpl.field.epicLink.renderEpicLinkFromIssue({epic: opt_data.epic, extraClasses: 'ghx-label ' + extraClass__soy152}) + ' ' : '') + '<span class="ghx-end ghx-estimate">' + GH.tpl.planissuelist.renderAvatarAndEstimate(opt_data) + '</span></div>';
  }
  if (opt_data.issue.extraFields) {
    output += '<div class="ghx-plan-extra-fields ghx-plan-extra-fields-' + soy.$$escapeHtml(opt_data.issue.extraFields.length) + ' ghx-row">';
    var extraFieldList190 = opt_data.issue.extraFields;
    var extraFieldListLen190 = extraFieldList190.length;
    for (var extraFieldIndex190 = 0; extraFieldIndex190 < extraFieldListLen190; extraFieldIndex190++) {
      var extraFieldData190 = extraFieldList190[extraFieldIndex190];
      output += ((! (extraFieldIndex190 == 0)) ? '<span class="ghx-extra-field-seperator">&middot;</span>' : '') + GH.tpl.extraFields.renderExtraField({extraField: extraFieldData190});
    }
    output += ((! hasVersionOrEpic__soy66 && (! opt_data.issue.subtasksCount || opt_data.issue.subtasksCount == 0)) ? '<span class="ghx-end ghx-extra-field-estimate">' + GH.tpl.planissuelist.renderAvatarAndEstimate(opt_data) + '</span>' : '') + '</div>';
  }
  output += '</div>' + ((opt_data.issue.color != null) ? '<div class="ghx-grabber" style="background-color:' + soy.$$escapeHtml(opt_data.issue.color) + ';"></div>' : '<div class="ghx-grabber ghx-grabber-transparent"></div>') + '<div class="ghx-move-count"><b></b></div></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.planissuelist.renderIssue.soyTemplateName = 'GH.tpl.planissuelist.renderIssue';
}


GH.tpl.planissuelist.renderSubTasksCount = function(opt_data, opt_ignored) {
  return '' + ((opt_data.count > 0) ? '<span class="ghx-sub-tasks-count">' + soy.$$escapeHtml(AJS.format("{0} {0,choice,1#sub-task|1\x3csub-tasks}",opt_data.count)) + '</span>' : '');
};
if (goog.DEBUG) {
  GH.tpl.planissuelist.renderSubTasksCount.soyTemplateName = 'GH.tpl.planissuelist.renderSubTasksCount';
}


GH.tpl.planissuelist.renderFakeParent = function(opt_data, opt_ignored) {
  var output = '';
  var stubTitle__soy221 = '' + soy.$$escapeHtml(opt_data.key) + ((opt_data.summary) ? ' - ' + soy.$$escapeHtml(opt_data.summary) : '');
  output += '<div class="ghx-parent-stub ' + ((opt_data.filtered) ? 'ghx-filtered' : '') + '" title="' + soy.$$escapeHtml(stubTitle__soy221) + '" data-stub-issue-key="' + soy.$$escapeHtml(opt_data.key) + '"><div class="ghx-group"><span class="ghx-key">' + soy.$$escapeHtml(opt_data.key) + '</span>' + ((opt_data.summary) ? '<span class="ghx-summary">' + soy.$$escapeHtml(opt_data.summary) + '</span>' : '') + '</div></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.planissuelist.renderFakeParent.soyTemplateName = 'GH.tpl.planissuelist.renderFakeParent';
}


GH.tpl.planissuelist.renderSubtasksFiltered = function(opt_data, opt_ignored) {
  return '<div class="ghx-hidden-subtasks-count-container" data-subtasks-hidden-by-filters="' + soy.$$escapeHtml(opt_data.issue.hiddenByQuickFiltersSubtasks) + '">' + GH.tpl.planissuelist.renderSubtasksFilteredContent({hiddenSubtasks: opt_data.issue.hiddenSubtasks, allHidden: opt_data.issue.subtasksFiltered}) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.planissuelist.renderSubtasksFiltered.soyTemplateName = 'GH.tpl.planissuelist.renderSubtasksFiltered';
}


GH.tpl.planissuelist.renderSubtasksFilteredContent = function(opt_data, opt_ignored) {
  return '' + ((opt_data.hiddenSubtasks != 0) ? '<div class="ghx-hidden-subtasks-count">' + ((opt_data.allHidden) ? soy.$$escapeHtml("All sub-tasks hidden") : soy.$$escapeHtml(AJS.format("{0} {0,choice,1#sub-task|1\x3csub-tasks} hidden",opt_data.hiddenSubtasks))) + '</div>' : '');
};
if (goog.DEBUG) {
  GH.tpl.planissuelist.renderSubtasksFilteredContent.soyTemplateName = 'GH.tpl.planissuelist.renderSubtasksFilteredContent';
}


GH.tpl.planissuelist.renderAvatarAndEstimate = function(opt_data, opt_ignored) {
  return '' + GH.tpl.avatar.renderIssueAvatar({issue: opt_data.issue, tooltipHtml: soy.$$escapeHtml("Assignee") + ': ' + soy.$$escapeHtml(opt_data.issue.assigneeName)}) + GH.tpl.planissuelist.renderStatisticsValue({stat: opt_data.issue.estimateStatistic, label: opt_data.statLabel});
};
if (goog.DEBUG) {
  GH.tpl.planissuelist.renderAvatarAndEstimate.soyTemplateName = 'GH.tpl.planissuelist.renderAvatarAndEstimate';
}


GH.tpl.planissuelist.renderStatisticsValue = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.stat && opt_data.stat.statFieldId != 'issueCount') {
    var badgetext__soy275 = '' + ((opt_data.stat.statFieldValue && opt_data.stat.statFieldValue.text) ? soy.$$escapeHtml(opt_data.stat.statFieldValue.text) : ' ');
    output += aui.badges.badge({extraClasses: ['ghx-estimate-badge'], text: badgetext__soy275, extraAttributes: {title: opt_data.label}, extraClasses: ['ghx-statistic-badge']});
  } else {
    output += aui.badges.badge({text: '', extraClasses: ['ghx-spacer', 'ghx-statistic-badge']});
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.planissuelist.renderStatisticsValue.soyTemplateName = 'GH.tpl.planissuelist.renderStatisticsValue';
}


GH.tpl.planissuelist.renderIssueCount = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-issue-count">';
  var totalIssues__soy292 = opt_data.issueListStats.excludeSubtasks ? opt_data.issueListStats.statisticsFieldTotal : opt_data.issueListStats.totalCount;
  var visibleCount__soy293 = opt_data.issueListStats.excludeSubtasks ? opt_data.issueListStats.statisticsFieldVisible : opt_data.issueListStats.visibleCount;
  if (opt_data.issueListStats.allVisible) {
    output += (opt_data.issueListStats.excludeSubtasks) ? soy.$$escapeHtml(AJS.format("{0}{0,choice,0# issues|1# issue|1\x3c issues} and {1}{1,choice,0# sub-tasks|1# sub-task|1\x3c sub-tasks}",totalIssues__soy292,opt_data.issueListStats.subtasksTotal)) : soy.$$escapeHtml(AJS.format("{0}{0,choice,0# issues|1# issue|1\x3c issues}",totalIssues__soy292));
  } else {
    if (opt_data.issueListStats.excludeSubtasks) {
      var subtasksFiltered__soy304 = opt_data.issueListStats.subtasksTotal != opt_data.issueListStats.subtasksVisible;
      var issuesFiltered__soy305 = opt_data.issueListStats.statisticsFieldTotal != opt_data.issueListStats.statisticsFieldVisible;
      output += (issuesFiltered__soy305 && ! subtasksFiltered__soy304) ? soy.$$escapeHtml(AJS.format("{1} of {0}{0,choice,0# issues|1# issue|1\x3c issues} and {2}{2,choice,0# sub-tasks|1# sub-task|1\x3c sub-tasks} visible",opt_data.issueListStats.statisticsFieldTotal,opt_data.issueListStats.statisticsFieldVisible,opt_data.issueListStats.subtasksTotal)) : (! issuesFiltered__soy305 && subtasksFiltered__soy304) ? soy.$$escapeHtml(AJS.format("{0}{0,choice,0# issues|1# issue|1\x3c issues} and {2} of {1}{1,choice,0# sub-tasks|1# sub-task|1\x3c sub-tasks} visible",opt_data.issueListStats.statisticsFieldTotal,opt_data.issueListStats.subtasksTotal,opt_data.issueListStats.subtasksVisible)) : soy.$$escapeHtml(AJS.format("{1} of {0}{0,choice,0# issues|1# issue|1\x3c issues} and {3} of {2}{2,choice,0# sub-tasks|1# sub-task|1\x3c sub-tasks} visible",opt_data.issueListStats.statisticsFieldTotal,opt_data.issueListStats.statisticsFieldVisible,opt_data.issueListStats.subtasksTotal,opt_data.issueListStats.subtasksVisible));
    } else {
      output += soy.$$escapeHtml(AJS.format("{1} of {0,choice,0#0 issues|1#1 issue|1\x3c{0,number} issues} visible",totalIssues__soy292,visibleCount__soy293));
    }
    output += '<a class="ghx-reset js-clear-all-filters" title="' + soy.$$escapeHtml("Issues are currently filtered. Click to clear all filters on this board.") + '">' + soy.$$escapeHtml("Clear all filters") + '</a>';
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.planissuelist.renderIssueCount.soyTemplateName = 'GH.tpl.planissuelist.renderIssueCount';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/PlanIssueListFiltering.js' */
define("jira-agile/rapid/ui/plan/plan-issue-list-filtering",["require"],function(e){"use strict";var t=e("underscore"),i={};return i.EPIC_FILTER_KEY_NONE="none",i.VERSION_FILTER_ID_NONE="none",i.allFilters={},i.isNoneEpicFilterKey=function(e){return e===i.EPIC_FILTER_KEY_NONE},i.isNoneVersionFilterId=function(e){return e===i.VERSION_FILTER_ID_NONE},i.setFilter=function(e,t){t?i.allFilters[e]=t:delete i.allFilters[e]},i.clearAllFilters=function(){var e=!t.isEmpty(t.keys(i.allFilters));return i.allFilters={},e},i._getCompoundFilter=function(){return function(e,n){var r=t.any(i.allFilters,function(t){return!t(e,n)});return!r}},i.setEpicFilter=function(e){var n=null;return i.isNoneEpicFilterKey(e)?n=function(e){var i="object"==typeof e.parent&&e.parent.epic;return t.isEmpty(e.epic)&&!i}:i.isEpicIssueSelectable(e)&&(n=function(t){return t.epic===e||t.parent&&t.parent.epic===e}),i.setFilter("epics",n)},i.isEpicIssueSelectable=function(e){var t=GH.EpicController.getEpicModel().getEpicList();return t.isIssueValid(e)&&t.isIssueVisible(e)},i.setVersionFilter=function(e){var n=null;return i.isNoneVersionFilterId(e)?n=function(e){return t.isEmpty(e.fixVersions)}:i.isVersionSelectable(e)&&(n=function(i){return t.some(i.fixVersions,function(t){return t===parseInt(e,10)})}),i.setFilter("versions",n)},i.isVersionSelectable=function(e){return null!=e},i.setInstantFilter=function(e){i.setFilter("instant",e)},i.applyToIssueLists=function(e){var n=i._getCompoundFilter(),r=!1;return t.each(e,function(e){var t=e.applySearchFilter(n);r=r||t}),r},i.applyToIssueList=function(e){i.applyToIssueLists([e])},i});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/version/VersionView.js' */
define("jira-agile/rapid/ui/version/version-view",["require"],function(e){var i=e("jira-agile/rapid/ui/version/version-controller"),t={};return t.dropdowns=[],t.datePickerFormat=void 0,t.setDatePickerFormat=function(e){t.datePickerFormat=e},t.init=function(){t.initializeInlineEdits()},t.getContainer=function(e){return(e||_.isUndefined(t.container))&&(t.container=AJS.$("#ghx-version-column")),t.container},t.show=function(){var e=i.getVersionModel(),n=t.getContainer(!0);n.html(GH.tpl.versionview.renderSkeleton({canCreateVersion:e.canUserCreateVersion()}));var a=n.find(".ghx-classification-scrollview");a.delegate(".ghx-classification-item","click",function(e){AJS.$(e.target).closest(".js-version-details-link, .js-version-actions, .js-editable-field, .js-editing-field, .aui-iconfont-calendar, input.text").not(".js-edit-versionName-trigger").length>0||t.toggleFiltering(AJS.$(this))}),a.delegate(".js-version-details-toggle","click",function(e){return t.toggleVersionDisplay(AJS.$(this)),!1}),a.delegate(".js-version-name","click",function(e){e.preventDefault()}),GH.VersionQuickCreate.setAccessibleProjects(e.projects),t.renderVersions(),GH.VersionQuickCreate.registerCreateVersionDialog()},t.updateView=function(){t.renderVersions(),GH.PlanDragAndDrop.initializeClassificationDnD()},t.renderVersions=function(){var e=i.getVersionModel();if(!_.isUndefined(e)&&e.isValid()){var n={},a=i.getFilteredVersionId(),s=e.getUnreleasedVersionList(),o=GH.RapidBoard.State.isScrumBoard();_.each(s,function(e){n[e.id]="open"===t.getTwixieState(e.id),o&&(e.versionStats.estimateDone=GH.BacklogStatistics.formatStatisticForRendering(GH.BacklogModel.estimationStatistic,e.versionStats.doneEstimate),e.versionStats.estimateTotal=GH.BacklogStatistics.formatStatisticForRendering(GH.BacklogModel.estimationStatistic,e.versionStats.totalEstimate),e.versionStats.isIssueCountStatistic="issueCount"===GH.BacklogModel.estimationStatistic.typeId,e.versionStats.estimateStatisticName=GH.BacklogModel.estimationStatistic.name)}),t.getContainer().find(".ghx-classification-scrollview").html(GH.tpl.versionview.renderVersions({versions:s,isNoneSelected:GH.PlanIssueListFiltering.isNoneVersionFilterId(a),isAllSelected:!a,selectedVersionId:a,isVersionExpandedById:n,canEditVersions:e.canUserCreateVersion(),showProjects:e.hasMultiProjects(),isLinkToDevStatusVersionAvailable:e.isLinkToDevStatusVersionAvailable(),showEstimates:o})),AJS.$(".js-version-actions").each(function(){var e=this,i="#"+AJS.$(e).attr("id").replace(/^dd-trigger-/,"dd-content-"),n=AJS.$(i),a=AJS.Dropdown.create({trigger:e,content:n,alignment:AJS.LEFT});AJS.$(a).bind("showLayer",function(){GH.RapidBoard.Util.InlineEditable.submitActiveEdits()}),t.dropdowns.push(a[0])})}},t.toggleFiltering=function(e){GH.RapidBoard.Util.InlineEditable.submitActiveEdits(),t.deselectAllVersions();var n,a=e.attr("data-version-id");i.getFilteredVersionId()===a?n=null:(n=a,AJS.$("#ghx-version-column").find(".ghx-classification-all").removeClass("ghx-selected"),e.addClass("ghx-selected")),i.setFilteredVersionId(n),GH.RapidBoard.State.pushState(),GH.BacklogController.updateVersionFiltering(!1)},t.deselectAllVersions=function(){var e=AJS.$("#ghx-version-column"),i=e.find(".ghx-classification-item");i.removeClass("ghx-selected"),e.find(".ghx-classification-all").addClass("ghx-selected")},t.setTwixieState=function(e,i){var t="versionTwix-"+e;GH.BoardState.setPerViewValue(t,i)},t.getTwixieState=function(e){var i="versionTwix-"+e;return GH.BoardState.getPerViewValue(i,"closed")},t.toggleVersionDisplay=function(e){var i=e.parents(".ghx-classification-item");t.toggleVersionDisplayByElementWithAnimation(i)},t.toggleVersionDisplayByElement=function(e){var i=e.attr("data-version-id");e.hasClass("ghx-open")?(e.removeClass("ghx-open").addClass("ghx-closed"),t.setTwixieState(i,"closed")):e.hasClass("ghx-closed")&&(e.removeClass("ghx-closed").addClass("ghx-open"),t.setTwixieState(i,"open"))},t.toggleVersionDisplayByElementWithAnimation=function(e){var n=e.attr("data-version-id"),a=e.find(".ghx-expanded"),s=e.hasClass("ghx-open");s?GH.RapidBoard.Animation.animateHeight(a,195,0).done(function(){e.removeClass("ghx-open").addClass("ghx-closed"),t.setTwixieState(n,"closed")}):e.hasClass("ghx-closed")&&(e.removeClass("ghx-closed").addClass("ghx-open"),GH.RapidBoard.Animation.animateHeight(a,0,195).done(function(){t.setTwixieState(n,"open")})),i.sendAnalytics("versionToggled",{isOpen:!s})},t.hideDropdown=function(){_.each(t.dropdowns,function(e){e.hide()})},t.initializeInlineEdits=function(){GH.RapidBoard.Util.InlineEditable.register(".js-edit-version-name",{renderView:GH.RapidBoard.Util.InlineEditable.remoteTriggeredTextRenderView,preEdit:GH.RapidBoard.Util.InlineEditable.cancelActiveEdits,getViewElement:function(e){var i=AJS.$(this).parents(".js-version-actions-list").attr("data-version-id");return AJS.$('.ghx-classification-item[data-version-id="'+i+'"]').find(".js-edit-versionName-trigger")},getData:function(e){var i=GH.RapidBoard.Util.InlineEditable.defaultFieldData(e);return i.versionId=e.parents(".ghx-classification-item").attr("data-version-id"),GH.RapidBoard.Util.InlineEditable.submitActiveEdits(),AJS.$(e).closest(".ghx-header").addClass("ghx-editing-name"),i.maxLength=30,i},validate:function(e){var i=e.editElement.val();return!!GH.Validation.notBlank(e.editElement,"Version Name is required")&&(e.newValue=i,!0)},save:function(e){t.updateVersion(e.versionId,{name:e.newValue}).done(function(){GH.RapidBoard.Util.InlineEditable.updateView(e)})},postEdit:function(e){AJS.$(e.viewElement).closest(".ghx-header").removeClass("ghx-editing-name")}});var e={getData:function(e){GH.RapidBoard.Util.InlineEditable.cancelActiveEdits();var i=GH.RapidBoard.Util.InlineEditable.defaultFieldData(e);return i.versionId=e.parents(".ghx-classification-item").attr("data-version-id"),i}};GH.RapidBoard.Util.InlineEditable.register("#ghx-version-column .js-edit-description-trigger",_.extend({},e,{save:function(e){t.updateVersion(e.versionId,{description:e.newValue}),GH.RapidBoard.Util.InlineEditable.updateView(e)}}));var i=(new Calendar,_.extend({},e,{renderEdit:GH.RapidBoard.Util.InlineEditable.renderDatePickerInlineEdit,activate:function(e){GH.RapidBoard.Util.InlineEditable.datePickerActivate(e,{ifFormat:t.datePickerFormat,showsTime:!1})},validate:function(e){return e.newValue=e.editElement.find("input").val(),!0},postEdit:function(e){AJS.$(e.viewElement).closest(".js-version-date").siblings(".ghx-error").remove()}}));GH.RapidBoard.Util.InlineEditable.register("#ghx-version-column .js-edit-startDateFormatted-trigger",_.extend({},i,{save:function(e){t.updateVersion(e.versionId,{startDateFormatted:e.newValue}).done(function(){GH.RapidBoard.Util.InlineEditable.updateView(e)})}})),GH.RapidBoard.Util.InlineEditable.register("#ghx-version-column .js-edit-releaseDateFormatted-trigger",_.extend({},i,{save:function(e){t.updateVersion(e.versionId,{releaseDateFormatted:e.newValue}).done(function(){GH.RapidBoard.Util.InlineEditable.updateView(e)})}}))},t.updateVersion=function(e,t){var n='.ghx-classification-item[data-version-id="'+e+'"]';return i.updateVersion(e,t,{name:n+" .js-version-name",description:n+" .js-version-description",startDate:n+" .js-version-start-date",releaseDate:n+" .js-version-release-date"},function(){AJS.$(n+" .ghx-error").empty()}).done(function(){var e=_.keys(t);i.sendAnalytics("versionUpdated",{updatedProperty:_.first(e),propertiesCount:e.length})})},t.renderNewVersions=function(e){var i=AJS.$("#ghx-version-column");_.each(e,function(e){var n=i.find('.ghx-classification-item[data-version-id="'+e.id+'"]');n.hasClass("ghx-open")||t.toggleVersionDisplayByElement(n),GH.RapidBoard.Animation.animateHeight(n,0,251,GH.RapidBoard.Animation.LONG_DURATION)})},t});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/version/VersionView.soy' */
// This file was automatically generated from VersionView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.versionview.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.versionview == 'undefined') { GH.tpl.versionview = {}; }


GH.tpl.versionview.renderSkeleton = function(opt_data, opt_ignored) {
  return '<div class="ghx-classification-group"><div class="ghx-classification-header"><div class="ghx-actions">' + ((opt_data.canCreateVersion) ? aui.buttons.button({extraClasses: ['aui-button-link', 'js-create-version'], text: "Create version"}) + '<span class="ghx-divider">|</span>' : '') + '<div class="ghx-close js-release-toggle" title="' + soy.$$escapeHtml("Hide versions panel") + '"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-remove-label"></span></div></div><h2>' + soy.$$escapeHtml("Versions") + '</h2></div><div class="ghx-classification-scrollview"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.versionview.renderSkeleton.soyTemplateName = 'GH.tpl.versionview.renderSkeleton';
}


GH.tpl.versionview.renderVersions = function(opt_data, opt_ignored) {
  var output = GH.tpl.versionview.renderAllVersions(opt_data) + '<div class="ghx-classification-cards">';
  var versionList19 = opt_data.versions;
  var versionListLen19 = versionList19.length;
  for (var versionIndex19 = 0; versionIndex19 < versionListLen19; versionIndex19++) {
    var versionData19 = versionList19[versionIndex19];
    output += GH.tpl.versionview.renderVersion({version: versionData19, isSelected: opt_data.selectedVersionId == versionData19.id, isVersionExpanded: opt_data.isVersionExpandedById[versionData19.id], canEditVersions: opt_data.canEditVersions, showProjects: opt_data.showProjects, isLinkToDevStatusVersionAvailable: opt_data.isLinkToDevStatusVersionAvailable, showEstimates: opt_data.showEstimates});
  }
  output += '</div>' + ((opt_data.versions.length > 0) ? GH.tpl.versionview.renderVersionPending(opt_data) : '');
  return output;
};
if (goog.DEBUG) {
  GH.tpl.versionview.renderVersions.soyTemplateName = 'GH.tpl.versionview.renderVersions';
}


GH.tpl.versionview.renderVersion = function(opt_data, opt_ignored) {
  return '<div class="ghx-classification-item' + ((opt_data.isVersionExpanded) ? ' ghx-open' : ' ghx-closed') + ((! opt_data.canEditVersions) ? ' ghx-read-only' : '') + ((opt_data.isSelected) ? ' ghx-selected' : '') + '" data-version-id="' + soy.$$escapeHtml(opt_data.version.id) + '"><div class="ghx-inner"><div class="ghx-expander js-version-details-toggle" title="' + soy.$$escapeHtml("Hide/show version information") + '"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-expanded"></span></div><div class="ghx-header"><h3 class="ghx-name">' + ((opt_data.version.project && opt_data.showProjects) ? '<span class="ghx-project-key" title="' + soy.$$escapeHtml(opt_data.version.project.name) + '">' + soy.$$escapeHtml(opt_data.version.project.key) + '</span>' : '') + '<span class="js-version-name" role="button">' + GH.tpl.inlineeditfield.renderRemoteTriggeredTextView({fieldName: 'versionName', fieldValue: opt_data.version.name, displayValue: opt_data.version.name}) + '</span>' + ((opt_data.canEditVersions) ? '<span id="dd-trigger-' + soy.$$escapeHtml(opt_data.version.id) + '" class="ghx-swatch js-version-actions"></span>' : '') + '</h3><div id="dd-content-' + soy.$$escapeHtml(opt_data.version.id) + '" class="aui-list ghx-href-fix-list js-version-actions-list" data-version-id="' + soy.$$escapeHtml(opt_data.version.id) + '"><ul class="aui-list-section aui-last">' + ((opt_data.canEditVersions) ? '<li class="aui-list-item"><a role="button" class="aui-list-item-link js-edit-version-name">' + soy.$$escapeHtml("Edit name") + '</a></li>' : '') + '</ul></div></div><div class="ghx-expanded"><div class="ghx-summary js-version-description">' + GH.tpl.inlineeditfield.renderBasicTextView({canEdit: opt_data.canEditVersions, fieldName: 'description', fieldValue: opt_data.version.description, displayValue: opt_data.version.description, maxDisplayLength: 200, defaultValue: "No description"}) + '</div>' + ((opt_data.version.project && opt_data.isLinkToDevStatusVersionAvailable) ? '<div><a class="js-version-details-link" href="' + soy.$$escapeHtml("") + '/browse/' + soy.$$escapeHtml(opt_data.version.project.key) + '/fixforversion/' + soy.$$escapeHtml(opt_data.version.id) + '">' + soy.$$escapeHtml("Details") + '</a></div><hr />' : '') + '<div class="aui-group"><div class="aui-item">' + soy.$$escapeHtml("Start Date") + '</div><div class="aui-item ghx-version-date js-version-date js-version-start-date">' + GH.tpl.inlineeditfield.renderBasicTextView({canEdit: opt_data.canEditVersions, fieldName: 'startDateFormatted', fieldValue: opt_data.version.startDateFormatted, displayValue: opt_data.version.startDateFormatted, defaultValue: "None"}) + '</div></div><div class="aui-group"><div class="aui-item">' + soy.$$escapeHtml("Release Date") + '</div><div class="aui-item ghx-version-date js-version-date js-version-release-date">' + GH.tpl.inlineeditfield.renderBasicTextView({canEdit: opt_data.canEditVersions, fieldName: 'releaseDateFormatted', fieldValue: opt_data.version.releaseDateFormatted, displayValue: opt_data.version.releaseDateFormatted, defaultValue: "None"}) + '</div></div><div class="aui-group js-version-issues-count"><div class="aui-item">' + soy.$$escapeHtml("Issues") + '</div><div class="aui-item">' + aui.badges.badge({text: opt_data.version.versionStats.totalIssueCount}) + '</div></div><div class="aui-group"><div class="aui-item">' + soy.$$escapeHtml("Completed") + '</div><div class="aui-item">' + aui.badges.badge({text: opt_data.version.versionStats.done}) + '</div></div>' + ((opt_data.showEstimates) ? ((! opt_data.version.versionStats.isIssueCountStatistic) ? '<div class="aui-group ghx-estimates"><div class="aui-item">' + soy.$$escapeHtml("Unestimated") + '</div><div class="aui-item">' + aui.badges.badge({text: opt_data.version.versionStats.notEstimated}) + '</div></div>' : '') + '<div class="aui-group ghx-estimates"><div class="aui-item">' + soy.$$escapeHtml("Estimate") + '</div><div class="aui-item">' + aui.badges.badge({extraAttributes: {title: opt_data.version.versionStats.estimateStatisticName}, text: opt_data.version.versionStats.estimateTotal}) + '</div></div>' : '') + '</div>' + ((opt_data.showEstimates) ? '<div class="ghx-subheader"><ul class="ghx-classification-progress" title="' + soy.$$escapeHtml(AJS.format("{0} ({1} {2} {3} {4})",AJS.format("{0}% of {1} done",opt_data.version.versionStats.percentageCompleted,opt_data.version.versionStats.isIssueCountStatistic ? "issues" : "estimated work"),opt_data.version.versionStats.estimateDone,"of",opt_data.version.versionStats.estimateTotal,opt_data.version.versionStats.isIssueCountStatistic ? '' : opt_data.version.versionStats.estimateStatisticName)) + '" ><li class="ghx-implemented" style="width:' + soy.$$escapeHtml(opt_data.version.versionStats.percentageCompleted) + '%;"></li></ul></div>' : '') + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.versionview.renderVersion.soyTemplateName = 'GH.tpl.versionview.renderVersion';
}


GH.tpl.versionview.renderAllVersions = function(opt_data, opt_ignored) {
  return '<div class="ghx-classification-item ghx-classification-all' + ((opt_data.isAllSelected) ? ' ghx-selected' : '') + '"><div class="ghx-inner"><div class="ghx-header"><h3 class="ghx-name"><span class="js-version-name" role="button">' + soy.$$escapeHtml("All issues") + '</span></h3></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.versionview.renderAllVersions.soyTemplateName = 'GH.tpl.versionview.renderAllVersions';
}


GH.tpl.versionview.renderVersionPending = function(opt_data, opt_ignored) {
  return '<div class="ghx-classification-item ghx-classification-pending' + ((opt_data.isNoneSelected) ? ' ghx-selected' : '') + '" data-version-id="none"><div class="ghx-inner"><div class="ghx-header"><h3 class="ghx-name"><span class="js-version-name" role="button">' + soy.$$escapeHtml("Issues without versions") + '</span></h3></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.versionview.renderVersionPending.soyTemplateName = 'GH.tpl.versionview.renderVersionPending';
}


GH.tpl.versionview.renderDontAskAgain = function(opt_data, opt_ignored) {
  return '<div class="ghx-dialog-tip"><input id="ghx-dont-ask-for-confirmation" type="checkbox" name="dontask"><label for="ghx-dont-ask-for-confirmation" type="checkbox" checked=false><span class="checkbox-label">Don\u2019t show again</span></label></div>';
};
if (goog.DEBUG) {
  GH.tpl.versionview.renderDontAskAgain.soyTemplateName = 'GH.tpl.versionview.renderDontAskAgain';
}


GH.tpl.versionview.renderQuickCreateView = function(opt_data, opt_ignored) {
  var output = '<form class="aui"><fieldset><div class="field-group"><label for="projects">' + soy.$$escapeHtml("Project") + '<span class="aui-icon icon-required"></span></label><select id="ghx-version-project" class="hidden">';
  var projectList177 = opt_data.projects;
  var projectListLen177 = projectList177.length;
  for (var projectIndex177 = 0; projectIndex177 < projectListLen177; projectIndex177++) {
    var projectData177 = projectList177[projectIndex177];
    output += '<option value="' + soy.$$escapeHtml(projectData177.id) + '">' + soy.$$escapeHtml(projectData177.name) + '</option>';
  }
  output += '</select><div class="ghx-error"></div></div><div class="field-group"><label for="ghx-version-name">' + soy.$$escapeHtml("Name") + '<span class="aui-icon icon-required"></span></label><input class="text" type="text" maxlength="30" id="ghx-version-name"><div class="ghx-error"></div></div><div class="field-group"><label for="ghx-version-description">' + soy.$$escapeHtml("Description") + '</label><input class="text" type="text" maxlength="130" id="ghx-version-description"></div><div class="field-group"><label for="ghx-version-start-date">' + soy.$$escapeHtml("Start Date") + '</label><input id="ghx-version-start-date" class="text medium-field" type="text"><span id="ghx-version-start-date_trigger_c" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar" title="' + soy.$$escapeHtml("Edit Start Date") + '">' + soy.$$escapeHtml("Edit") + '</span><span id="ghx-version-start-date-error"></span></div><div class="field-group"><label for="ghx-version-release-date">' + soy.$$escapeHtml("Release Date") + '</label><input id="ghx-version-release-date" class="text medium-field" type="text"><span id="ghx-version-release-date_trigger_c" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar" title="' + soy.$$escapeHtml("Edit Release Date") + '">' + soy.$$escapeHtml("Edit") + '</span><span id="ghx-version-release-date-error"></span></div></fieldset></form>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.versionview.renderQuickCreateView.soyTemplateName = 'GH.tpl.versionview.renderQuickCreateView';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/version/VersionController.js' */
define("jira-agile/rapid/ui/version/version-controller",["require"],function(e){function r(e,r,n){r=r||[];var s=[],t=r.length,o=t>=1?r[0].key:void 0,a=t>=2?r[1].key:void 0;switch(e){case"gh.version.issues.removed":i.trace("gh.version.issues.removed",r.length,o,a),s.push(AJS.format("{0,choice,1#{1} has been removed from its version.|2#{1} and {2} have been removed from their version.|2\u003cYour issues have been have been removed from their versions.}",r.length,o,a));break;case"gh.version.issues.added":i.trace("gh.version.issues.added",r.length,o,a),s.push(AJS.format("{0,choice,1#{1} has|2#{1} and {2} have|2\u003cYour issues have} been added to this version.",r.length,o,a))}return n&&s.push("Issues that belong to different projects were skipped. "),s.join("<br /><br />")}var n=e("underscore"),i=e("jira/util/logger"),s=e("jira-agile/rapid/analytics-tracker"),t={};t.model=null,t.analytics=new s("gh.rapidboard.versions","versionCount","");var o=e("jira/analytics"),a=e("jira-agile/rapid/ui/plan/analytics-helper");return t.sendAnalytics=function(e,r,i){if(!e)throw new Error("You must specify a category");var s="jira-software."+GH.RapidBoard.State.getBoardType()+".plan.versions."+e,t=a.baseEventData();o.send({name:s,properties:i?r:n.extend(t,r)})},t.init=function(){t.model=new GH.VersionsModel([]);var e=AJS.$(GH);e.bind(GH.VersionQuickCreate.EVENT_VERSION_CREATED,function(e,r){t.handleVersionCreated(r.createdVersion)}),GH.VersionView.init()},t.setProjects=function(e){t.model.setProjects(e)},t.setVersions=function(e){t.model.updateRawData(e)},t.getVersionModel=function(){return t.model},t.registerVersionsCount=function(){var e=t.model,r=e.getUnreleasedVersionList().length;t._triggerVersionCount(r)},t._triggerVersionCount=n.once(function(e){t.analytics.trigger(e)}),t.getFilteredVersionId=function(){return GH.BoardState.getPerViewValue("planSelectedVersion",null)},t.setFilteredVersionId=function(e,r){GH.BoardState.setPerViewValue("planSelectedVersion",e),r||t.sendAnalytics(e?"versionFilterActive":"versionFilterInactive")},t.hasFilteredVersion=function(){return null!=t.getFilteredVersionId()},t.validateSelectedVersion=function(){var e=t.getVersionModel(),r=t.getFilteredVersionId(),i=n.isNull(r)||GH.PlanIssueListFiltering.isNoneVersionFilterId(r)&&!e.isEmpty()||e.containsId(r);i||(t.setFilteredVersionId(null),GH.RapidBoard.UrlState.replaceState())},t.setIssuesVersion=function(e,i,s){n.isEmpty(i)||(n.each(i,function(r){r.fixVersions=[e]}),GH.BacklogController.updateIssues(i));var o=n.pluck(i,"key");t.setIssuesVersionOnServer(e,o).done(function(){GH.Notification.showSuccess(r("gh.version.issues.added",i,s)),GH.PlanController.isActive()&&(GH.BacklogController.updateVersionData(),t._reloadDetailsView(GH.PlanController)),t.sendAnalytics("setIssuesVersion",{issueCount:i.length})}).fail(function(){GH.PlanController.isActive()&&GH.BacklogController.loadData()})},t.clearIssuesVersion=function(e){if(!n.isEmpty(e)){var i=[];if(n.each(e,function(e){e.fixVersions&&e.fixVersions.length>0&&(e.fixVersions=[],i.push(e))}),!n.isEmpty(i)){GH.BacklogController.updateIssues(i);var s=n.pluck(e,"key");t.clearIssuesVersionOnServer(s).done(function(){GH.Notification.showSuccess(r("gh.version.issues.removed",e)),GH.PlanController.isActive()?(GH.BacklogController.updateVersionData(),t._reloadDetailsView(GH.PlanController)):GH.WorkController.isActive()&&t._reloadDetailsView(GH.WorkController),t.sendAnalytics("clearIssuesVersion",{issueCount:e.length})}).fail(function(){GH.PlanController.isActive()&&GH.BacklogController.loadData()})}}},t.updateVersion=function(e,r,i,s){var o=t.getVersionModel(),a=o.getVersion(e),l=n.extend({},a,r);return s(),t.updateVersionOnServer(l,i).done(GH.BacklogController.loadData)},t.updateVersionOnServer=function(e,r){return GH.Ajax.post({url:"/versions/"+e.id,data:{id:e.id,projectId:e.project.id,name:e.name,description:e.description,releaseDate:e.releaseDateFormatted,startDate:e.startDateFormatted},errorContextMap:r})},t.setIssuesVersionOnServer=function(e,r){return GH.Ajax.put({url:"/xboard/issue/fixversion/set",data:{issueKeys:r,versionId:e}})},t.clearIssuesVersionOnServer=function(e){return GH.Ajax.put({url:"/xboard/issue/fixversion/clear",data:{issueKeys:e}})},t.handleVersionCreated=function(e){GH.BacklogController.visible&&setTimeout(function(){t.handleVersionCreatedImpl(e)},0)},t.handleVersionCreatedImpl=function(e){GH.BacklogController.updateVersionData().done(function(){GH.VersionView.renderNewVersions([e])}),t.sendAnalytics("versionCreated")},t._reloadDetailsView=function(r){if(GH.Features.EDITABLE_DETAIL_VIEW_ENABLED.isEnabled()){var n=e("jira-agile/rapid/ui/detail/inlineedit/details-view-reload-reason");r.reloadDetailView(n.VERSION_PANEL_CHANGED)}else r.reloadDetailView()},t});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/version/VersionQuickCreate.js' */
GH.VersionQuickCreate={},GH.VersionQuickCreate.EVENT_VERSION_CREATED="versionCreated",GH.VersionQuickCreate.datePickerFormat=void 0,GH.VersionQuickCreate.accessibleProjects=[],GH.VersionQuickCreate.setDatePickerFormat=function(e){GH.VersionQuickCreate.datePickerFormat=e},GH.VersionQuickCreate.setAccessibleProjects=function(e){GH.VersionQuickCreate.accessibleProjects=e},GH.VersionQuickCreate.showDialog=function(){AJS.dim(),AJS.$(".aui-blanket").html('<span class="ghx-wait"></span>'),GH.VersionQuickCreate.renderDialog()},GH.VersionQuickCreate.renderDialog=function(){var e=GH.Dialog.create({width:450,height:350,id:"ghx-dialog-create-version"});e.addHeader("Create Version"),e.addPanel("","panel"),e.getCurrentPanel().html(GH.tpl.versionview.renderQuickCreateView({projects:GH.VersionQuickCreate.accessibleProjects})),e.addButton("Create",function(){e.disableControls(),GH.VersionQuickCreate.submit(e)},"aui-button"),GH.Dialog.addCancelButton(e),GH.VersionQuickCreate.registerProjectControls(),GH.VersionQuickCreate.registerCalendarControls(),AJS.$(".aui-dialog").addClass("ghx-dialog"),e.show(),e.updateHeight(),AJS.$(".aui-blanket").empty(),AJS.$("#ghx-version-name").focus()},GH.VersionQuickCreate.submit=function(e){GH.Validation.clearContextualErrors(AJS.$("#ghx-dialog-create-version"));var r=GH.VersionQuickCreate._extractModel();GH.Ajax.post({url:"/versions",data:r,errorContextMap:{projectId:"#ghx-version-project",name:"#ghx-version-name",startDate:"#ghx-version-start-date-error",releaseDate:"#ghx-version-release-date-error"}}).done(function(r){var t=r.success;e.dispose(),GH.Notification.showSuccess(AJS.format("Version \'\'{0}\'\' was successfully created.","<strong>"+AJS.escapeHTML(String(t.name))+"</strong>")),AJS.$(GH).trigger(GH.VersionQuickCreate.EVENT_VERSION_CREATED,[{createdVersion:t}])}).fail(e.enableControls)},GH.VersionQuickCreate.registerCalendarControls=function(){new Calendar;Calendar.setup({firstDay:0,inputField:"ghx-version-release-date",button:"ghx-version-release-date_trigger_c",align:"Tl",singleClick:!0,showsTime:!1,timeFormat:12,positionStyle:"fixed",ifFormat:GH.VersionQuickCreate.datePickerFormat}),Calendar.setup({firstDay:0,inputField:"ghx-version-start-date",button:"ghx-version-start-date_trigger_c",align:"Tl",singleClick:!0,showsTime:!1,timeFormat:12,positionStyle:"fixed",ifFormat:GH.VersionQuickCreate.datePickerFormat})},GH.VersionQuickCreate.registerProjectControls=function(){return new AJS.SingleSelect({element:AJS.$("#ghx-version-project"),revertOnInvalid:!0,width:250})},GH.VersionQuickCreate.registerCreateVersionDialog=function(){var e=AJS.$("#ghx-version-column");e.find(".js-create-version").click(function(){GH.VersionQuickCreate.showDialog()})},GH.VersionQuickCreate._extractModel=function(){var e=AJS.$("#ghx-dialog-create-version");return{projectId:e.find("#ghx-version-project :selected").val(),name:e.find("#ghx-version-name").val(),description:e.find("#ghx-version-description").val(),releaseDate:e.find("#ghx-version-release-date").val(),startDate:e.find("#ghx-version-start-date").val()}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/version/LegacyVersionsInit.js' */
AJS.namespace("GH.VersionView",null,require("jira-agile/rapid/ui/version/version-view")),AJS.namespace("GH.VersionController",null,require("jira-agile/rapid/ui/version/version-controller"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/ConvertWorkflow.js' */
GH.Dialogs.ConvertWorkflow={},GH.Dialogs.ConvertWorkflow.EVENT_WORKFLOW_CONVERTED="workflowConverted",GH.Dialogs.ConvertWorkflow.statusSelect=void 0,function(){var o=require("jira-agile/rapid/analytics-tracker");GH.Dialogs.ConvertWorkflow.analytics=new o("gh.config.simplify.workflow.dialog.change")}(),GH.Dialogs.ConvertWorkflow.showDialog=function(o){GH.Dialog.dim(),GH.Ajax.get({url:"/workflow/convert.json",data:{rapidViewId:o}},"convertWorkflow").done(GH.Dialogs.ConvertWorkflow.renderDialog).fail(GH.Dialog.undim),GH.Dialogs.ConvertWorkflow.analytics.trigger("start")},GH.Dialogs.ConvertWorkflow.renderDialog=function(o){var e=function(){GH.Dialogs.ConvertWorkflow.analytics.trigger("cancel")},t=GH.Dialog.create({width:575,height:300,id:"ghx-dialog-convert-workflow",onCancelFn:e}),r=o.numIssuesToMigrate&&o.numIssuesToMigrate>0;GH.Dialogs.ConvertWorkflow.renderDialogIntroPage(t,o),GH.Dialogs.ConvertWorkflow.renderStatusResolutionDonePage(t,o,r),r&&GH.Dialogs.ConvertWorkflow.renderDialogIssuesUpdatePage(t,o),GH.Dialogs.ConvertWorkflow.renderDialogProgressPage(t,o),AJS.$(".aui-dialog").addClass("ghx-dialog"),t.gotoPage(0),t.gotoPanel(0),t.show(),t.updateHeight(),AJS.$(".aui-blanket").empty()},GH.Dialogs.ConvertWorkflow.renderDialogIntroPage=function(o,e){o.addHeader("Simplify workflow"),o.addPanel("",GH.tpl.dialogs.convertworkflow.renderConvertWorkflowDialogIntro({projectName:AJS.escapeHTML(String(e.projectName)),workflowSchemeName:AJS.escapeHTML(String(e.workflowSchemeName)),adminWorkflowUrl:GH.Ajax.CONTEXT_PATH+"/plugins/servlet/project-config/"+e.projectKey+"/workflows",simplifyWorkflowLearnMoreUrl:{"url":"https://docs.atlassian.com/jira/jsw-docs-078/Using+the+Simplified+Workflow","isLocal":false}.url})),o.addButton("Next",function(){o.nextPage(),_.each(e.statuses,function(o){o.resolutionDoneCandidate&&GH.Dialogs.ConvertWorkflow.statusSelect.addItem(new AJS.ItemDescriptor({value:o.id,label:o.name}))}),o.updateHeight()},"ghx-dialog-convert-next aui-button"),GH.Dialog.addCancelButton(o)},GH.Dialogs.ConvertWorkflow.renderStatusResolutionDonePage=function(o,e,t){o.addPage(),o.addHeader("Simplify workflow"),o.addPanel("",GH.tpl.dialogs.convertworkflow.renderStatusResolution({urls:{simplifiedWorkflow:{"url":"https://docs.atlassian.com/jira/jsw-docs-078/Using+the+Simplified+Workflow","isLocal":false}.url}}));var r=AJS.$("#ghx-resolution-done-statuses-select");GH.Dialogs.ConvertWorkflow.statusSelect=new AJS.MultiSelect({element:r,width:350,itemAttrDisplayed:"label",suggestions:function(){return _.map(e.statuses,function(o){return new AJS.ItemDescriptor({value:o.id,label:o.name})})}}),AJS.$("#ghx-resolution-done-statuses-select-multi-select").keydown(function(o){if(13==o.keyCode&&!GH.Dialogs.ConvertWorkflow.statusSelect.suggestionsVisible)return o.preventDefault(),!1}),t?o.addButton("Next",function(){GH.Dialogs.ConvertWorkflow.analytics.trigger("showWarning"),o.nextPage(),o.updateHeight()},"ghx-dialog-convert-next aui-button"):GH.Dialogs.ConvertWorkflow.addSimplifyButton(o,e),GH.Dialog.addCancelButton(o)},GH.Dialogs.ConvertWorkflow.renderDialogIssuesUpdatePage=function(o,e){o.addPage(),o.addHeader("Simplify workflow");var t=GH.tpl.dialogs.convertworkflow.renderConvertWorkflowDialogIssues({projectName:AJS.escapeHTML(String(e.projectName)),workflowSchemeName:AJS.escapeHTML(String(e.workflowSchemeName)),numIssuesToMigrate:GH.NumberFormat.format(e.numIssuesToMigrate),isSysAdmin:e.isSysAdmin,backupUrl:GH.Ajax.CONTEXT_PATH+"/secure/admin/XmlBackup!default.jspa"});o.addPanel("",t),GH.Dialogs.ConvertWorkflow.addSimplifyButton(o,e),GH.Dialog.addCancelButton(o)},GH.Dialogs.ConvertWorkflow.renderDialogProgressPage=function(o,e){o.addPage(),o.addHeader("Simplify workflow");var t=GH.tpl.dialogs.convertworkflow.renderConvertWorkflowDialogProgress({});o.addPanel("",t),GH.Dialogs.ConvertWorkflow.addAcknowledgeButton(o,e)},GH.Dialogs.ConvertWorkflow.addSimplifyButton=function(o,e){o.addButton("Simplify",function(){GH.Dialogs.ConvertWorkflow.analytics.trigger("simplify"),o.nextPage(),o.updateHeight(),o.disableControls(),GH.Dialogs.ConvertWorkflow.submit(o,e)},"aui-button")},GH.Dialogs.ConvertWorkflow.addAcknowledgeButton=function(o,e){o.addButton("Acknowledge",function(){o.disableControls(),o.dispose(),AJS.$(GH).trigger(GH.Dialogs.ConvertWorkflow.EVENT_WORKFLOW_CONVERTED)},"aui-button")},GH.Dialogs.ConvertWorkflow.submit=function(o,e){var t=AJS.$("#ghx-resolution-done-statuses-select"),r=t.val();GH.Ajax.post({url:"/workflow/convert.json",data:{projectKey:e.projectKey,resolutionDoneStatusIds:r}}).done(function(e){GH.Dialogs.ConvertWorkflow.handleConversionResult(o,e)}).fail(o.enableControls)},GH.Dialogs.ConvertWorkflow.handleConversionResult=function(o,e){var t=e.success.numIssuesToMigrate,r=e.success.taskId,n=function(e){GH.Dialogs.ConvertWorkflow.analytics.trigger("complete");var t=AJS.$("#ghx-convert-workflow-progress");if(t.find(".ghx-current-progress").css({width:"100%"}),o.enableControls(),e.successful)t.append(GH.tpl.rapid.notification.renderAuiMessage({title:"Workflow migration complete.",type:"success",icon:!0,messageHtml:!1}));else{var r=GH.Ajax._convertJiraErrors(e.errorCollection).getGlobalErrors();t.append(GH.tpl.rapid.notification.renderAuiMessage({title:"Workflow migration did not complete successfully.",type:"error",icon:!0,messageHtml:!0,message:GH.tpl.rapid.notification.renderErrorMessages({errors:r})}))}o.updateHeight()};t&&0!=t?r&&GH.Dialogs.ConvertWorkflow.getTaskStatus(r,n):n({finished:!0,successful:!0})},GH.Dialogs.ConvertWorkflow.getTaskStatus=function(o,e){GH.Ajax.get({url:"/configuration/jiraTask/"+o+".json"}).done(function(t){if(t.finished)console.log("Workflow migration finished. Successful? "+t.successful),e(t);else{console.log("Workflow migration progress: "+t.progress);var r=AJS.$("#ghx-convert-workflow-progress");r.find(".ghx-current-progress").css({width:""+t.progress+"%"}),setTimeout(function(){GH.Dialogs.ConvertWorkflow.getTaskStatus(o,e)},2e3)}})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/ConvertWorkflow.soy' */
// This file was automatically generated from ConvertWorkflow.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.convertworkflow.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.convertworkflow == 'undefined') { GH.tpl.dialogs.convertworkflow = {}; }


GH.tpl.dialogs.convertworkflow.renderConvertWorkflowDialogIntro = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$filterNoAutoescape(AJS.format("Simplifying the workflow for project {0}{1}{2} will make it managed by JIRA Software. This will allow Project Administrators to add and remove steps from the workflow by configuring the columns of the board.",'<b>',opt_data.projectName,'</b>')) + '</p><p>' + soy.$$filterNoAutoescape(AJS.format("The original workflow and scheme for this project will be copied and not modified. You can revert this change by re-associating the workflow scheme {0}{1}{2} to this project using JIRA\x27\x27s {3}administration interface{4}.",'<b>',opt_data.workflowSchemeName,'</b>','<a href="' + opt_data.adminWorkflowUrl + '">','</a>')) + '</p><p>' + soy.$$escapeHtml("The simplified workflow will:") + '<ul><li>' + soy.$$escapeHtml("allow free movement of issues between any column") + '</li><li>' + soy.$$escapeHtml("remove all transition conditions, validators, post functions and screens") + '</li></ul></p><p>' + soy.$$filterNoAutoescape(AJS.format("Read {0}the documentation{1} for more information.",'<a href="' + opt_data.simplifyWorkflowLearnMoreUrl + '">','</a>')) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.convertworkflow.renderConvertWorkflowDialogIntro.soyTemplateName = 'GH.tpl.dialogs.convertworkflow.renderConvertWorkflowDialogIntro';
}


GH.tpl.dialogs.convertworkflow.renderStatusResolution = function(opt_data, opt_ignored) {
  return '<p class="description">' + soy.$$filterNoAutoescape(AJS.format("Choose statuses that will trigger the {0}resolution{1} to be set to \x22Done\x22.",'<a href="' + opt_data.urls.simplifiedWorkflow + '">','</a>')) + '</p><div class="aui-item"><form class="aui"><fieldset><div class="field-group" id="ghx-status-picker"><label for="ghx-resolution-done-statuses-select">' + soy.$$escapeHtml("Statuses for \x27Done\x27") + '<span class="aui-icon icon-required"></span></label><select id="ghx-resolution-done-statuses-select" multiple="multiple" class="hidden"></select><div id="ghx-resolution-done-statuses-error"></div></div></fieldset></form></div>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.convertworkflow.renderStatusResolution.soyTemplateName = 'GH.tpl.dialogs.convertworkflow.renderStatusResolution';
}


GH.tpl.dialogs.convertworkflow.renderConvertWorkflowDialogIssues = function(opt_data, opt_ignored) {
  return '<div class="aui-message warning"><p><span class="aui-icon icon-warning"></span>' + soy.$$filterNoAutoescape(AJS.format("{0}Note{1}: You are about to change all {2} issues in project {0}{3}{1}.",'<b>','</b>',opt_data.numIssuesToMigrate,opt_data.projectName)) + '</p></div>' + ((opt_data.isSysAdmin) ? '<p>' + soy.$$filterNoAutoescape(AJS.format("This process can take a long time, and therefore it is advisable to perform this operation when the system is under \x3cstrong\x3elow load\x3c/strong\x3e. Please ensure that you have a {0}backup{1} of your data before proceeding.",'<a href="' + opt_data.backupUrl + '">','</a>')) + '</p>' : '<p>' + soy.$$filterNoAutoescape("This process can take a long time, and therefore it is advisable to perform this operation when the system is under \x3cstrong\x3elow load\x3c/strong\x3e. Please ensure that you contact a System Administrator to create an XML backup of your data before proceeding.") + '</p>') + '<p>' + soy.$$filterNoAutoescape(AJS.format("If the process fails or JIRA is shutdown before the process completes, you can attempt to associate the workflow scheme {0} with project {1} again.",opt_data.workflowSchemeName,opt_data.projectName)) + '</p>' + ((opt_data.isSysAdmin) ? '<p>' + soy.$$escapeHtml("If the process fails again, please restore from backup to ensure that issues in the project remain in a consistent state.") + '</p>' : '<p>' + soy.$$filterNoAutoescape("If the process fails again, please contact a System Administrator so they can restore from backup to ensure that issues in the project remain in a consistent state.") + '</p>');
};
if (goog.DEBUG) {
  GH.tpl.dialogs.convertworkflow.renderConvertWorkflowDialogIssues.soyTemplateName = 'GH.tpl.dialogs.convertworkflow.renderConvertWorkflowDialogIssues';
}


GH.tpl.dialogs.convertworkflow.renderConvertWorkflowDialogProgress = function(opt_data, opt_ignored) {
  return '<div id="ghx-convert-workflow-progress"><div class="ghx-progress-bar"><div class="ghx-current-progress" style="width: 1%;"></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.convertworkflow.renderConvertWorkflowDialogProgress.soyTemplateName = 'GH.tpl.dialogs.convertworkflow.renderConvertWorkflowDialogProgress';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/CreateStatus.js' */
GH.Dialogs.CreateStatus={},GH.Dialogs.CreateStatus.dialog=null,GH.Dialogs.CreateStatus.EVENT_STATUS_CREATED="statusCreated",GH.Dialogs.CreateStatus.statusCategoryPicker=null,GH.Dialogs.CreateStatus.statusNamePicker=null,GH.Dialogs.CreateStatus.statusNameChangedTimeout=null,function(){var t=require("jira-agile/rapid/analytics-tracker");GH.Dialogs.CreateStatus.analytics=new t("gh.config.add.status.dialog.change")}(),GH.Dialogs.CreateStatus.showDialog=function(t){GH.Dialogs.CreateStatus.renderDialog(t),GH.Dialogs.CreateStatus.analytics.trigger("start")},GH.Dialogs.CreateStatus.renderDialog=function(t){var a=function(){GH.Dialogs.CreateStatus.analytics.trigger("cancel")},e=GH.Dialogs.CreateStatus.dialog=GH.Dialog.create({width:575,height:200,id:"ghx-dialog-create-status",onCancelFn:a});e.addHeader("Add status"),e.addPanel("","panel");var s=AJS.$(GH.tpl.dialogs.createstatus.renderCreateStatusDialog({}));e.getCurrentPanel().html(s);var r=function(){return e.disableControls(),GH.Dialogs.CreateStatus.submit(e,t),!1};e.addButton("Add",r,"aui-button"),s.submit(r),GH.Dialog.addCancelButton(e),GH.Dialogs.CreateStatus.registerStatusCategoryControls(e),AJS.$(".aui-dialog").addClass("ghx-dialog"),e.show(),AJS.$(".aui-blanket").empty(),GH.Dialogs.CreateStatus.registerStatusNameField(),AJS.$("#ghx-status-name-field").focus()},GH.Dialogs.CreateStatus.registerStatusNameField=function(){GH.Dialogs.CreateStatus.statusNamePicker=new AJS.SingleSelect({removeOnUnSelect:!1,element:"#ghx-status-name",submitInputVal:!0,userEnteredOptionsMsg:"New Status",ajaxOptions:{url:GH.Ajax.buildBareRestUrl("/rest/api/2/status"),query:!0,formatResponse:function(t){var a=new AJS.GroupDescriptor({weight:0,label:"Existing Statuses"});return _.each(t,function(t){a.addItem(new AJS.ItemDescriptor({value:t.name,label:t.name,html:AJS.escapeHTML(String(t.name))}))}),[a]}}})},GH.Dialogs.CreateStatus.bindStatusNameEvents=function(){var t=AJS.$("#ghx-status-name-field");AJS.$("#ghx-status-name").change(GH.Dialogs.CreateStatus.handleStatusNameChanged);var a=GH.RapidBoard.Browsers.isInputEventSupported();t.on(a?"input":"keypress",function(){clearTimeout(GH.Dialogs.CreateStatus.statusNameChangedTimeout),GH.Dialogs.CreateStatus.statusNameChangedTimeout=setTimeout(GH.Dialogs.CreateStatus.handleStatusNameChanged,275)})},GH.Dialogs.CreateStatus.handleStatusNameChanged=function(){var t,a=AJS.$("#ghx-status-name-field").val()||"",e=AJS.$.trim(a.toLowerCase());t=a?AJS.$.get(GH.Ajax.buildBareRestUrl("/rest/api/2/status")):AJS.$.Deferred().resolve([]),t.done(function(t){var a=_.find(t,function(t){return t.name.toLowerCase()===e});a?(GH.Dialogs.CreateStatus.statusCategoryPicker.disableWithValue(a.statusCategory.id),GH.Dialogs.CreateStatus.addStatusExistsErrors()):(GH.Dialogs.CreateStatus.statusCategoryPicker.enableWithValueIfDisabled(GH.StatusCategoryPicker.defaultStatusCategoryId),GH.Dialogs.CreateStatus.clearErrors())})},GH.Dialogs.CreateStatus.addStatusExistsErrors=function(){AJS.$("#js-status-category-error").text("The category for the existing status with this name will be used")},GH.Dialogs.CreateStatus.clearErrors=function(){AJS.$("#js-status-category-error").text("Helps identify where an issue is in its lifecycle")},GH.Dialogs.CreateStatus.registerStatusCategoryControls=function(){GH.Dialogs.CreateStatus.fetchStatusCategoryConfig().done(function(t){t&&GH.Dialogs.CreateStatus.renderStatusCategoryPicker().done(function(){GH.Dialogs.CreateStatus.dialog.updateHeight()})})},GH.Dialogs.CreateStatus.renderStatusCategoryPicker=function(){return AJS.$.get(GH.Ajax.buildBareRestUrl("/rest/api/2/statuscategory")).then(function(t){var a=_.reject(t,function(t){return"undefined"===t.key});AJS.$("#js-status-category-picker-container").html(GH.tpl.dialogs.createstatus.renderCategoryPicker()),GH.Dialogs.CreateStatus.bindStatusNameEvents(),GH.Dialogs.CreateStatus.statusCategoryPicker=GH.StatusCategoryPicker.build({element:AJS.$("#ghx-status-category-picker"),statusCategories:a})})},GH.Dialogs.CreateStatus.fetchStatusCategoryConfig=function(){return AJS.$.get(GH.Ajax.buildBareRestUrl("/rest/api/2/status")).andThen(function(t){return _.find(t,function(t){return _.isObject(t.statusCategory)})})},GH.Dialogs.CreateStatus.submit=function(t,a){clearTimeout(GH.Dialogs.CreateStatus.statusNameChangedTimeout);var e=AJS.$("#ghx-status-name").val()||[],s=AJS.$("#ghx-status-category-picker").val(),r={rapidViewId:a,name:AJS.$.trim(e.pop()),statusCategoryId:parseInt(s,10)||GH.StatusCategoryPicker.defaultStatusCategoryId};GH.Ajax.post({url:"/workflow/status/create.json",data:r,errorContextMap:{name:"#ghx-status-name"}}).done(function(a){GH.Dialogs.CreateStatus.analytics.trigger("complete"),t.dispose(),AJS.$(GH).trigger(GH.Dialogs.CreateStatus.EVENT_STATUS_CREATED,a.success)}).fail(function(){GH.Dialogs.CreateStatus.dialog.updateHeight(),t.enableControls()})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/CreateStatus.soy' */
// This file was automatically generated from CreateStatus.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.createstatus.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.createstatus == 'undefined') { GH.tpl.dialogs.createstatus = {}; }


GH.tpl.dialogs.createstatus.renderCreateStatusDialog = function(opt_data, opt_ignored) {
  return '<form class="aui"><fieldset><div class="field-group"><label for="ghx-status-name">' + soy.$$escapeHtml("Name") + ':<span class="aui-icon icon-required"></span></label><select id="ghx-status-name"></select></div></fieldset><div id="js-status-category-picker-container"></div></form>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.createstatus.renderCreateStatusDialog.soyTemplateName = 'GH.tpl.dialogs.createstatus.renderCreateStatusDialog';
}


GH.tpl.dialogs.createstatus.renderCategoryPicker = function(opt_data, opt_ignored) {
  return '<fieldset><div class="field-group"><label for="ghx-status-category">' + soy.$$escapeHtml("Category") + ':<span class="aui-icon icon-required"></span></label><select id="ghx-status-category-picker" class="hidden"></select><div id="js-status-category-error" class="description">' + soy.$$escapeHtml("Helps identify where an issue is in its lifecycle") + '</div></div></fieldset>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.createstatus.renderCategoryPicker.soyTemplateName = 'GH.tpl.dialogs.createstatus.renderCategoryPicker';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/AddColumn.js' */
GH.Dialogs.AddColumn={},GH.Dialogs.AddColumn.EVENT_COLUMN_ADDED="columnAdded",GH.Dialogs.AddColumn.statusCategoryPicker=null,GH.Dialogs.AddColumn.statusNameChangedTimeout=null,function(){var a=require("jira-agile/rapid/analytics-tracker");GH.Dialogs.AddColumn.analytics=new a("gh.config.add.column.dialog.change")}(),GH.Dialogs.AddColumn.showDialog=function(a,t){var o={rapidViewId:a,alsoAddStatus:t};GH.Dialogs.AddColumn.renderDialog(o),GH.Dialogs.AddColumn.analytics.trigger("start")},GH.Dialogs.AddColumn.renderDialog=function(a){var t=function(){GH.Dialogs.AddColumn.analytics.trigger("cancel")},o=GH.Dialogs.AddColumn.dialog=GH.Dialog.create({width:575,height:200,id:"ghx-dialog-add-column",onCancelFn:t});o.addHeader("Add column"),o.addPanel("","panel");var e=AJS.$(GH.tpl.dialogs.addcolumn.renderAddColumnDialog({}));o.getCurrentPanel().html(e);var n=function(){return o.disableControls(),GH.Dialogs.AddColumn.submit(o,a),!1};o.addButton("Add",n,"aui-button"),e.submit(n),GH.Dialog.addCancelButton(o),GH.Dialogs.AddColumn.registerStatusCategoryControls(),AJS.$(".aui-dialog").addClass("ghx-dialog"),o.show(),AJS.$(".aui-blanket").empty(),AJS.$("#ghx-column-name").focus()},GH.Dialogs.AddColumn.submit=function(a,t){clearTimeout(GH.Dialogs.AddColumn.statusNameChangedTimeout);var o=AJS.$("#ghx-column-name").val(),e=AJS.$("#ghx-status-category-picker").val(),n={rapidViewId:t.rapidViewId,name:AJS.$.trim(o),alsoAddStatus:t.alsoAddStatus,statusCategoryId:parseInt(e,10)||GH.StatusCategoryPicker.defaultStatusCategoryId};GH.Ajax.post({url:"/rapidviewconfig/columns",data:n,errorContextMap:{name:"#ghx-column-name"}}).done(function(t){GH.Dialogs.AddColumn.analytics.trigger("complete"),a.dispose(),AJS.$(GH).trigger(GH.Dialogs.AddColumn.EVENT_COLUMN_ADDED,t.success)}).fail(function(){GH.Dialogs.AddColumn.dialog.updateHeight(),a.enableControls()})},GH.Dialogs.AddColumn.handleColumnNameChanged=function(){var a,t=AJS.$("#ghx-column-name").val()||"",o=AJS.$.trim(t.toLowerCase());a=t?AJS.$.get(GH.Ajax.buildBareRestUrl("/rest/api/2/status")):AJS.$.Deferred().resolve([]),a.done(function(a){var t=_.find(a,function(a){return a.name.toLowerCase()===o});t?(GH.Dialogs.AddColumn.statusCategoryPicker.disableWithValue(t.statusCategory.id),GH.Dialogs.AddColumn.addStatusExistsErrors()):(GH.Dialogs.AddColumn.statusCategoryPicker.enableWithValueIfDisabled(GH.StatusCategoryPicker.defaultStatusCategoryId),GH.Dialogs.AddColumn.clearErrors())})},GH.Dialogs.AddColumn.addStatusExistsErrors=function(){AJS.$("#js-status-category-error").text("The category for the existing status with this name will be used")},GH.Dialogs.AddColumn.clearErrors=function(){AJS.$("#js-status-category-error").text("Helps identify where an issue is in its lifecycle")},GH.Dialogs.AddColumn.registerStatusCategoryControls=function(){GH.Dialogs.AddColumn.fetchStatusCategoryConfig().done(function(a){a&&GH.Dialogs.AddColumn.renderStatusCategoryPicker().done(function(){GH.Dialogs.AddColumn.dialog.updateHeight()})})},GH.Dialogs.AddColumn.renderStatusCategoryPicker=function(){return AJS.$.get(GH.Ajax.buildBareRestUrl("/rest/api/2/statuscategory")).then(function(a){var t=_.reject(a,function(a){return"undefined"===a.key});AJS.$("#js-status-category-picker-container").html(GH.tpl.dialogs.createstatus.renderCategoryPicker()),GH.Dialogs.AddColumn.bindColumnNameEvents(),GH.Dialogs.AddColumn.statusCategoryPicker=GH.StatusCategoryPicker.build({element:AJS.$("#ghx-status-category-picker"),statusCategories:t})})},GH.Dialogs.AddColumn.fetchStatusCategoryConfig=function(){return AJS.$.get(GH.Ajax.buildBareRestUrl("/rest/api/2/status")).andThen(function(a){return _.find(a,function(a){return _.isObject(a.statusCategory)})})},GH.Dialogs.AddColumn.bindColumnNameEvents=function(){var a=AJS.$("#ghx-column-name"),t=GH.RapidBoard.Browsers.isInputEventSupported();a.on(t?"input":"keypress",function(){clearTimeout(GH.Dialogs.AddColumn.statusNameChangedTimeout),GH.Dialogs.AddColumn.statusNameChangedTimeout=setTimeout(GH.Dialogs.AddColumn.handleColumnNameChanged,275)})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/AddColumn.soy' */
// This file was automatically generated from AddColumn.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.addcolumn.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.addcolumn == 'undefined') { GH.tpl.dialogs.addcolumn = {}; }


GH.tpl.dialogs.addcolumn.renderAddColumnDialog = function(opt_data, opt_ignored) {
  return '<form class="aui"><fieldset><div class="field-group"><label for="ghx-column-name">' + soy.$$escapeHtml("Name") + ':<span class="aui-icon icon-required"></span></label><input class="text" type="text" maxlength="30" id="ghx-column-name" value=""></div></fieldset><div id="js-status-category-picker-container"></div></form>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.addcolumn.renderAddColumnDialog.soyTemplateName = 'GH.tpl.dialogs.addcolumn.renderAddColumnDialog';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/RemoveStatus.js' */
GH.Dialogs.RemoveStatus={},GH.Dialogs.RemoveStatus.EVENT_STATUS_REMOVED="statusRemoved",function(){var t=require("jira-agile/rapid/analytics-tracker");GH.Dialogs.RemoveStatus.analytics=new t("gh.config.remove.status.dialog.change")}(),GH.Dialogs.RemoveStatus.showDialog=function(t,a){GH.Dialog.dim(),GH.Ajax.get({url:"/workflow/status/remove.json",data:{rapidViewId:t,statusId:a}},"removeStatusDialog").done(GH.Dialogs.RemoveStatus.renderDialog).fail(GH.Dialog.undim),GH.Dialogs.RemoveStatus.analytics.trigger("start")},GH.Dialogs.RemoveStatus.renderDialog=function(t){var a=function(){GH.Dialogs.RemoveStatus.analytics.trigger("cancel")},e=GH.Dialog.create({width:575,height:250,id:"ghx-dialog-remove-status",onCancelFn:a});e.addHeader("Remove status"),e.addPanel("","panel");var i=AJS.escapeHTML(String(t.statusName)),s="",o="";if(t.isInitialStatus){var l=AJS.escapeHTML(String(t.newInitialStatusName));s=AJS.format("{0} is the initial status for project {1}.",t.statusName,t.projectName),o=AJS.format("Any issues which are created in this project will now default to status {0}{1}{2}.","<b>",l,"</b>")}e.getCurrentPanel().html(GH.tpl.dialogs.removestatus.renderRemoveStatusDialog({statusName:i,isInitialStatus:t.isInitialStatus,newInitialStatusTitle:s,newInitialStatusDesc:o})),e.addButton("Remove",function(){e.disableControls(),GH.Dialogs.RemoveStatus.submit(e,t)},"aui-button"),GH.Dialog.addCancelButton(e),AJS.$(".aui-dialog").addClass("ghx-dialog"),e.show(),e.updateHeight()},GH.Dialogs.RemoveStatus.submit=function(t,a){var e={statusId:a.statusId,workflowName:a.workflowName,isInitialStatus:!1};a.isInitialStatus&&(e.isInitialStatus=a.isInitialStatus,e.newInitialStatusId=a.newInitialStatusId),GH.Ajax.post({url:"/workflow/status/remove.json",data:e}).done(function(e){GH.Dialogs.RemoveStatus.analytics.trigger("complete"),t.dispose(),AJS.$(GH).trigger(GH.Dialogs.RemoveStatus.EVENT_STATUS_REMOVED,a.statusId)}).fail(t.enableControls)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/RemoveStatus.soy' */
// This file was automatically generated from RemoveStatus.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.removestatus.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.removestatus == 'undefined') { GH.tpl.dialogs.removestatus = {}; }


GH.tpl.dialogs.removestatus.renderRemoveStatusDialog = function(opt_data, opt_ignored) {
  return ((opt_data.isInitialStatus) ? GH.tpl.rapid.notification.renderAuiMessage({type: 'info', title: opt_data.newInitialStatusTitle, message: opt_data.newInitialStatusDesc, messageHtml: true, icon: true}) : '') + '<p>' + soy.$$filterNoAutoescape(AJS.format("Are you sure you want to remove status {0}{1}{2} from the current workflow?",'<b>',opt_data.statusName,'</b>')) + '</p><p>' + soy.$$escapeHtml("This will not affect any other workflows that use this status.") + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.removestatus.renderRemoveStatusDialog.soyTemplateName = 'GH.tpl.dialogs.removestatus.renderRemoveStatusDialog';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/StartSprintDialog.js' */
!function(){var t=require("jira-agile/rapid/analytics-tracker"),a=require("jira/featureflags/feature-manager"),i="com.atlassian.jira.agile.darkfeature.sprint.goal";GH.Dialogs.StartSprintDialog={},GH.Dialogs.StartSprintDialog.EVENT_SPRINT_STARTED="sprintStarted",GH.Dialogs.StartSprintDialog.dateTimePickerFormat=void 0,GH.Dialogs.StartSprintDialog.analytics=new t("gh.start.sprint.dialog.change"),GH.Dialogs.StartSprintDialog.analyticsMetaData=function(t){AJS.trigger("analyticsEvent",{name:"gh.sprint.start",data:t})},GH.Dialogs.StartSprintDialog.showDialog=function(t,a,i){AJS.dim(),AJS.$(".aui-blanket").html('<span class="ghx-wait"></span>'),GH.Ajax.get({url:"/sprint/"+a+"/start",data:{rapidViewId:t,sprintId:a}},"showStartSprintDialog").done(function(t){GH.Dialogs.StartSprintDialog.renderDialog(t,i<t.numIssues)}).fail(GH.Dialog.undim),GH.Dialogs.StartSprintDialog.analytics.trigger("start")},GH.Dialogs.StartSprintDialog.renderDialog=function(t,e){var r=function(){GH.Dialogs.StartSprintDialog.analytics.trigger("cancel")},n=a.isFeatureEnabled(i),s=GH.Dialog.create({width:575,height:390+(e?70:0)+(t.countNotEstimatedIssues>0?90:0)+(t.noTrackingEstimateIssueCount>0?90:0)+(n?70:0),id:"ghx-dialog-start-sprint",onCancelFn:r});s.addHeader("Start Sprint"),s.addPanel("","panel");var o=[{value:7,text:AJS.format("{0,choice,0#0 weeks|1#1 week|1\u003c{0,number} weeks} {1}",1)},{value:14,text:AJS.format("{0,choice,0#0 weeks|1#1 week|1\u003c{0,number} weeks} {1}",2)},{value:21,text:AJS.format("{0,choice,0#0 weeks|1#1 week|1\u003c{0,number} weeks} {1}",3)},{value:28,text:AJS.format("{0,choice,0#0 weeks|1#1 week|1\u003c{0,number} weeks} {1}",4)},{value:"custom",text:"Custom"}],l=function(t){return t?GH.tpl.detailview.renderIssueLink({issueKey:t}):t};s.getCurrentPanel().html(GH.tpl.dialogs.startsprint.renderStartSprintDialog({numIssues:t.numIssues,defaultName:t.defaultName,goal:t.goal||"",sprintGoalEnabled:n,defaultStartDate:t.defaultStartDate,defaultEndDate:t.defaultEndDate,showFilteredIssuesWarning:e,numNotEstimatedIssues:t.countNotEstimatedIssues,numExtraNotEstimatedIssues:t.countNotEstimatedIssues-t.issuesNotEstimated.length,snapshotIssuesNotEstimated:_.flatten([_.first(t.issuesNotEstimated,t.issuesNotEstimated.length-1)]).map(l).join(", "),lastIssueNotEstimated:l(_.last(t.issuesNotEstimated)),numNoTrackingEstimateIssues:t.noTrackingEstimateIssueCount,numExtraNoTrackingEstimateIssues:t.noTrackingEstimateIssueCount-t.noTrackingEstimateIssues.length,snapshotIssuesNoTrackingEstimate:_.flatten([_.first(t.noTrackingEstimateIssues,t.noTrackingEstimateIssues.length-1)]).map(l).join(", "),lastIssueNoTrackingEstimate:l(_.last(t.noTrackingEstimateIssues)),listOfSprintDurations:o,hasNoSubtaskDoneStatus:t.hasNoSubtaskDoneStatus,endSprintHelpUrl:{"url":"https://docs.atlassian.com/jira/jsw-docs-078/Completing+a+Sprint","isLocal":false}.url})),s.addButton("Start",function(){s.disableControls(),GH.Dialogs.StartSprintDialog.submit(s,t)},"aui-button"),GH.Dialog.addCancelButton(s),GH.Dialogs.StartSprintDialog.registerCalendarControls(t.dateTimePickerFormat),GH.Dialogs.StartSprintDialog.registerDurationDropdown(AJS.$(document.body),o),AJS.$(".aui-dialog").addClass("ghx-dialog"),s.show(),AJS.$(".aui-blanket").empty(),AJS.$("#ghx-sprint-name").focus(),GH.Dialogs.StartSprintDialog.registerWorkdayCounter(t.rapidViewId,s)},GH.Dialogs.StartSprintDialog.submit=function(t,a){var i=AJS.$("#ghx-dialog-start-sprint"),e={rapidViewId:a.rapidViewId,sprintId:a.sprintId,name:i.find("#ghx-sprint-name").val(),goal:i.find("#sprint-goal").val(),startDate:i.find("#ghx-sprint-start-date").val(),endDate:i.find("#ghx-sprint-end-date").val()};GH.Validation.clearContextualErrors(i),GH.Ajax.put({url:"/sprint/"+a.sprintId+"/start",data:e,errorContextMap:{name:"#ghx-sprint-name",startDate:"#ghx-sprint-start-date-error",endDate:"#ghx-sprint-end-date-error",dateFormatMismatch:GH.Notification.handleDateFormatMismatchError}}).done(function(i){var r=a.numIssues,n=GH.Dialogs.StartSprintDialog.calculateSprintDuration(e.startDate,e.endDate);a.totalStatistic;GH.Dialogs.StartSprintDialog.analytics.trigger("complete"),GH.Dialogs.StartSprintDialog.analyticsMetaData({sprintId:a.sprintId,numIssues:r,sprintDuration:n,totalStatistic:a.totalStatistic}),t.dispose(),GH.Notification.showSuccess(AJS.format("Sprint \'\'{0}\'\' has successfully been started.",AJS.escapeHTML(String(i.success.name)))),AJS.$(GH).trigger(GH.Dialogs.StartSprintDialog.EVENT_SPRINT_STARTED)}).fail(t.enableControls)},GH.Dialogs.StartSprintDialog.registerCalendarControls=function(t){GH.Dialogs.StartSprintDialog.dateTimePickerFormat=t;new Calendar;Calendar.setup({firstDay:0,inputField:"ghx-sprint-start-date",button:"ghx-sprint-start-date_trigger_c",align:"Tl",singleClick:!0,showsTime:!0,timeFormat:12,positionStyle:"fixed",ifFormat:GH.Dialogs.StartSprintDialog.dateTimePickerFormat}),Calendar.setup({firstDay:0,inputField:"ghx-sprint-end-date",button:"ghx-sprint-end-date_trigger_c",align:"Tl",singleClick:!0,showsTime:!0,timeFormat:12,positionStyle:"fixed",ifFormat:GH.Dialogs.StartSprintDialog.dateTimePickerFormat})},GH.Dialogs.StartSprintDialog.calculateWorkDaysRemaining=function(t,a,i,e){var r=Date.parseDate(t,GH.Dialogs.StartSprintDialog.dateTimePickerFormat).getTime(),n=Date.parseDate(a,GH.Dialogs.StartSprintDialog.dateTimePickerFormat).getTime();GH.Ajax.get({url:"/rapidviewconfig/workingdays/period",data:{rapidViewId:i,startDate:r,endDate:n}},"workingdaysperiod").done(function(t){AJS.$("#ghx-sprint-work-days-remaining").remove(),e.getCurrentPanel().body.append(GH.tpl.dialogs.startsprint.renderWorkDaysInSprint({numWorkDaysInSprint:t.days,helpLinkUrl:{"url":"https://docs.atlassian.com/jira/jsw-docs-078/Configuring+Working+Days","isLocal":false}.url})),AJS.$("#ghx-sprint-work-days-loading").hide()}).fail(function(){AJS.$("#ghx-sprint-work-days-remaining").remove()})},GH.Dialogs.StartSprintDialog.calculateSprintDuration=function(t,a){return Math.ceil(GH.Dialogs.StartSprintDialog.calculateSprintDurationExact(t,a)).toString()},GH.Dialogs.StartSprintDialog.calculateSprintDurationExact=function(t,a){var i=moment(Date.parseDate(t,GH.Dialogs.StartSprintDialog.dateTimePickerFormat)),e=moment(Date.parseDate(a,GH.Dialogs.StartSprintDialog.dateTimePickerFormat)),r=e.diff(i,"days",!0);return r},GH.Dialogs.StartSprintDialog.registerDurationDropdown=function(t,a){var i=t.find("#ghx-sprint-duration"),e=t.find("#ghx-sprint-start-date"),r=t.find("#ghx-sprint-end-date"),n=t.find("#ghx-sprint-end-date_trigger_c"),s=function(){if("custom"!==i.val()){var t=moment(Date.parseDate(e.val(),GH.Dialogs.StartSprintDialog.dateTimePickerFormat));t.add(parseInt(i.val()),"days"),r.val(t.toDate().print(GH.Dialogs.StartSprintDialog.dateTimePickerFormat))}};i.change(function(){var t="custom"!==i.val();r.prop("disabled",t),s()}),e.change(s);var o=function(t){var a=GH.Dialogs.StartSprintDialog.calculateSprintDurationExact(e.val(),r.val()),i=_.find(t,function(t){return a===t.value});return i?i.value:"custom"},l=function(){i.val(o(a)).trigger("change")};l(),n.click(function(){r.prop("disabled")&&(i.val("custom").trigger("change"),r.prop("disabled",!1).focus(),n.trigger("click"))}),e.focusout(l),r.focusout(l)},GH.Dialogs.StartSprintDialog.registerWorkdayCounter=function(t,a){var i=AJS.$("#ghx-sprint-start-date"),e=AJS.$("#ghx-sprint-end-date"),r=AJS.$("#ghx-sprint-duration"),n=function(){GH.Dialogs.StartSprintDialog.calculateWorkDaysRemaining(i.val(),e.val(),t,a)};n(),i.change(n),e.change(n),r.change(function(){"custom"!==r.val()&&n()})}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/StartSprintDialog.soy' */
// This file was automatically generated from StartSprintDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.startsprint.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.startsprint == 'undefined') { GH.tpl.dialogs.startsprint = {}; }


GH.tpl.dialogs.startsprint.renderStartSprintDialog = function(opt_data, opt_ignored) {
  var output = '' + ((opt_data.numNotEstimatedIssues > 0) ? '<div class="aui-message warning"><p class="title"><span class="aui-icon icon-warning"></span>' + soy.$$filterNoAutoescape(AJS.format("{0,choice,0#Issue|1#Issue|2#Issues} {0,choice,0#{2}|1#{3}|2#{2} and {3}|5#{2}, {3}} {1,choice,0# |1#and {1} other|2#and {1} others} {0,choice,0#does|1#does|2#do} not have a value for the \x27\x27Estimate\x27\x27 field. Values entered after the start of the sprint will be treated as scope change.",opt_data.numNotEstimatedIssues,opt_data.numExtraNotEstimatedIssues,opt_data.snapshotIssuesNotEstimated,opt_data.lastIssueNotEstimated)) + '</p></div>' : '') + ((opt_data.numNoTrackingEstimateIssues > 0) ? '<div class="aui-message warning"><p class="title"><span class="aui-icon icon-warning"></span>' + soy.$$filterNoAutoescape(AJS.format("{0,choice,0#Issue|1#Issue|2#Issues} {0,choice,0#{2}|1#{3}|2#{2} and {3}|5#{2}, {3}} {1,choice,0# |1#and {1} other|2#and {1} others} {0,choice,0#does|1#does|2#do} not have a value for the \x27\x27Remaining\x27\x27 field. Values entered after the start of the sprint will be treated as scope change.",opt_data.numNoTrackingEstimateIssues,opt_data.numExtraNoTrackingEstimateIssues,opt_data.snapshotIssuesNoTrackingEstimate,opt_data.lastIssueNoTrackingEstimate)) + '</p></div>' : '') + ((opt_data.showFilteredIssuesWarning) ? '<div class="aui-message warning"><p class="title"><span class="aui-icon icon-warning"></span>' + soy.$$escapeHtml("Includes issue(s) currently hidden by a Quick Filter or the Instant Filter.") + '</p></div>' : '') + ((opt_data.hasNoSubtaskDoneStatus) ? '<div class="aui-message warning"><p class="title"><span class="aui-icon icon-warning"></span>' + soy.$$escapeHtml("You will not be able to complete this sprint, as it includes sub-tasks that cannot be transitioned to the \x22Done\x22 column.") + ' <a href="' + soy.$$escapeHtml(opt_data.endSprintHelpUrl) + '" target="_blank">' + soy.$$escapeHtml("Learn more") + '</a></p></div>' : '') + '<p>' + soy.$$filterNoAutoescape(AJS.format("{1,choice,0#{0} issues|1#{0} issue|2#{0} issues} will be included in this sprint.",'<strong>' + opt_data.numIssues + '</strong>',opt_data.numIssues)) + '</p><form class="aui"><fieldset><div class="field-group"><label for="ghx-sprint-name">' + soy.$$escapeHtml("Sprint Name") + ':<span class="aui-icon icon-required"></span></label><input class="text" type="text" maxlength="30" id="ghx-sprint-name" value="' + soy.$$escapeHtml(opt_data.defaultName) + '"></div>' + ((opt_data.sprintGoalEnabled) ? '<div class="field-group"><label for="sprint-goal">' + soy.$$escapeHtml("Goal") + ':</label><textarea class="textarea long-field" id="sprint-goal" name="sprint-goal" title="' + soy.$$escapeHtml("Goal") + '" maxlength="1000">' + soy.$$escapeHtml(opt_data.goal) + '</textarea></div>' : '') + '<div class="field-group"><label for="ghx-sprint-duration">' + soy.$$escapeHtml("Duration") + ':<span class="aui-icon icon-required"></span></label><select class="select" id="ghx-sprint-duration" name="ghx-sprint-duration">';
  var durationList49 = opt_data.listOfSprintDurations;
  var durationListLen49 = durationList49.length;
  for (var durationIndex49 = 0; durationIndex49 < durationListLen49; durationIndex49++) {
    var durationData49 = durationList49[durationIndex49];
    output += '<option value="' + soy.$$escapeHtml(durationData49.value) + '">' + soy.$$escapeHtml(durationData49.text) + '</option>';
  }
  output += '</select></div><div class="field-group"><label for="ghx-sprint-start-date">' + soy.$$escapeHtml("Start Date") + ':<span class="aui-icon icon-required"></span></label><input id="ghx-sprint-start-date" class="text medium-field" type="text" value="' + soy.$$escapeHtml(opt_data.defaultStartDate) + '"><span id="ghx-sprint-start-date_trigger_c" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar" title="' + soy.$$escapeHtml("Edit start date") + '">' + soy.$$escapeHtml("Edit") + '</span><span id="ghx-sprint-start-date-error"></span></div><div class="field-group"><label for="ghx-sprint-end-date">' + soy.$$escapeHtml("End Date") + ':<span class="aui-icon icon-required"></span></label><input id="ghx-sprint-end-date" class="text medium-field" type="text" value="' + soy.$$escapeHtml(opt_data.defaultEndDate) + '"><span id="ghx-sprint-end-date_trigger_c" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar" title="' + soy.$$escapeHtml("Edit end date") + '">' + soy.$$escapeHtml("Edit") + '</span><span id="ghx-sprint-end-date-error"></span></div></fieldset></form><span id="ghx-sprint-work-days-loading" class="aui-icon aui-icon-wait">' + soy.$$escapeHtml("Loading...") + '</span>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.dialogs.startsprint.renderStartSprintDialog.soyTemplateName = 'GH.tpl.dialogs.startsprint.renderStartSprintDialog';
}


GH.tpl.dialogs.startsprint.renderWorkDaysInSprint = function(opt_data, opt_ignored) {
  return '<p id="ghx-sprint-work-days-remaining" class="ghx-sprint-dialog-working-days">' + soy.$$filterNoAutoescape(AJS.format("There {1,choice,0#are|1#is|1\x3care} {0}{1} working {1,choice,0#days|1#day|1\x3cdays}{2} in this sprint",'<strong>',opt_data.numWorkDaysInSprint,'</strong>')) + '<span id=\'ghx-sprint-work-days-help\'><span class="aui-icon aui-icon-small aui-iconfont-help ghx-sprint-help-icon"></span><a href=' + soy.$$escapeHtml(opt_data.helpLinkUrl) + ' target="_blank">' + soy.$$escapeHtml("More about working days") + '</a></span></p>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.startsprint.renderWorkDaysInSprint.soyTemplateName = 'GH.tpl.dialogs.startsprint.renderWorkDaysInSprint';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/RemoveIssuesFromSprintDialog.soy' */
// This file was automatically generated from RemoveIssuesFromSprintDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.removeissuesfromsprint.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.removeissuesfromsprint == 'undefined') { GH.tpl.dialogs.removeissuesfromsprint = {}; }


GH.tpl.dialogs.removeissuesfromsprint.renderRemoveIssuesFromSprintsDialog = function(opt_data, opt_ignored) {
  var output = '<div class="aui-message warning"><p class="title"><span class="aui-icon icon-warning"></span>' + soy.$$escapeHtml("Sprint scope will be affected by this action.") + '</p></div>';
  var changeList6 = opt_data.changes;
  var changeListLen6 = changeList6.length;
  for (var changeIndex6 = 0; changeIndex6 < changeListLen6; changeIndex6++) {
    var changeData6 = changeList6[changeIndex6];
    output += GH.tpl.dialogs.issuemovedialog.renderChange({change: changeData6});
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.dialogs.removeissuesfromsprint.renderRemoveIssuesFromSprintsDialog.soyTemplateName = 'GH.tpl.dialogs.removeissuesfromsprint.renderRemoveIssuesFromSprintsDialog';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/RemoveIssuesFromSprintDialog.js' */
GH.RemoveIssuesFromSprintDialog={},GH.RemoveIssuesFromSprintDialog.Analytics={},function(){var e=require("jira-agile/rapid/analytics-tracker");GH.RemoveIssuesFromSprintDialog.Analytics.remove=new e("gh.sprint.issue.remove")}(),GH.RemoveIssuesFromSprintDialog.constructDialog=function(e,i){var n=GH.Dialog.create({width:600,height:250,id:"ghx-remove-issues-from-sprint",onCancelFn:function(n){i.reject(e)}}),t=_.reduce(e.changes,function(e,i){return e+i.issueKeys.length},0);n.addHeader(AJS.format("Move {0,choice,1# issue|2\u003c issues}",t)),n.addPanel("","panel");var o=GH.tpl.dialogs.removeissuesfromsprint.renderRemoveIssuesFromSprintsDialog(e);n.getCurrentPanel().html(o);var s="Confirm";n.addButton(s,function(){n.disableControls(),n.dispose(),i.resolve(e)},"aui-button"),GH.Dialog.addCancelButton(n),n.show(),n.updateHeight(),AJS.$("#"+n.id).find(".dialog-button-panel .button-panel-cancel-link").focus()};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/AddIssuesToActiveSprintDialog.soy' */
// This file was automatically generated from AddIssuesToActiveSprintDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.addissuestoactivesprint.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.addissuestoactivesprint == 'undefined') { GH.tpl.dialogs.addissuestoactivesprint = {}; }


GH.tpl.dialogs.addissuestoactivesprint.renderAddIssuesToActiveSprintDialog = function(opt_data, opt_ignored) {
  var output = '<div class="aui-message warning"><p class="title"><span class="aui-icon icon-warning"></span>' + soy.$$escapeHtml("Sprint scope will be affected by this action.") + '</p></div>';
  var changeList6 = opt_data.changes;
  var changeListLen6 = changeList6.length;
  for (var changeIndex6 = 0; changeIndex6 < changeListLen6; changeIndex6++) {
    var changeData6 = changeList6[changeIndex6];
    output += GH.tpl.dialogs.issuemovedialog.renderChange({change: changeData6});
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.dialogs.addissuestoactivesprint.renderAddIssuesToActiveSprintDialog.soyTemplateName = 'GH.tpl.dialogs.addissuestoactivesprint.renderAddIssuesToActiveSprintDialog';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/AddIssuesToActiveSprintDialog.js' */
GH.AddIssuesToActiveSprintDialog={},GH.AddIssuesToActiveSprintDialog.Analytics={},function(){var e=require("jira-agile/rapid/analytics-tracker");GH.AddIssuesToActiveSprintDialog.Analytics.add=new e("gh.activesprint.issue.add")}(),GH.AddIssuesToActiveSprintDialog.showDialog=function(e,t){var i=GH.IssueMoveController.getAllIssueKeys(e),a=GH.Dialog.create({width:600,height:250,id:"ghx-add-issues-to-active-sprint",onCancelFn:function(e){t.reject(i)}});a.addHeader(AJS.format("Move {0,choice,1# issue|2\u003c issues}",i.length)),a.addPanel("","panel");var n=GH.tpl.dialogs.addissuestoactivesprint.renderAddIssuesToActiveSprintDialog(e);a.getCurrentPanel().html(n);var s="Confirm";a.addButton(s,function(){a.disableControls(),a.dispose(),t.resolve(e)},"aui-button"),GH.Dialog.addCancelButton(a),a.show(),a.updateHeight(),AJS.$("#"+a.id).find(".dialog-button-panel .button-panel-cancel-link").focus()};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/IssueMoveDialog.soy' */
// This file was automatically generated from IssueMoveDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.issuemovedialog.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.issuemovedialog == 'undefined') { GH.tpl.dialogs.issuemovedialog = {}; }


GH.tpl.dialogs.issuemovedialog.renderChange = function(opt_data, opt_ignored) {
  return '' + ((opt_data.change.issueKeys.length > 0) ? '<p>' + GH.tpl.dialogs.issuemovedialog.renderMoveMessage({issueKeys: opt_data.change.issueKeys, fromSprint: opt_data.change.currentSprint, toSprint: opt_data.change.targetSprint}) + '</p>' : '') + ((opt_data.change.doneIssueKeys.length > 0) ? '<p>' + GH.tpl.dialogs.issuemovedialog.renderRemoveMessage({issueKeys: opt_data.change.doneIssueKeys}) + '</p>' : '');
};
if (goog.DEBUG) {
  GH.tpl.dialogs.issuemovedialog.renderChange.soyTemplateName = 'GH.tpl.dialogs.issuemovedialog.renderChange';
}


GH.tpl.dialogs.issuemovedialog.renderRemoveMessage = function(opt_data, opt_ignored) {
  var output = '';
  var issuesHtml__soy18 = '' + GH.tpl.dialogs.issuemovedialog.renderIssues(opt_data);
  output += soy.$$filterNoAutoescape(AJS.format("{0} {1,choice,1# is|2\x3c are} done and will be removed and only appear in reports.",issuesHtml__soy18,opt_data.issueKeys.length));
  return output;
};
if (goog.DEBUG) {
  GH.tpl.dialogs.issuemovedialog.renderRemoveMessage.soyTemplateName = 'GH.tpl.dialogs.issuemovedialog.renderRemoveMessage';
}


GH.tpl.dialogs.issuemovedialog.renderMoveMessage = function(opt_data, opt_ignored) {
  var output = '';
  var issuesHtml__soy24 = '' + GH.tpl.dialogs.issuemovedialog.renderIssues(opt_data);
  var fromSprintHtml__soy27 = '' + GH.tpl.dialogs.issuemovedialog.renderSprintBacklog({sprint: opt_data.fromSprint});
  var toSprintHtml__soy30 = '' + GH.tpl.dialogs.issuemovedialog.renderSprintBacklog({sprint: opt_data.toSprint});
  output += soy.$$filterNoAutoescape(AJS.format("{0} will be moved from {1} to {2}.",issuesHtml__soy24,fromSprintHtml__soy27,toSprintHtml__soy30));
  return output;
};
if (goog.DEBUG) {
  GH.tpl.dialogs.issuemovedialog.renderMoveMessage.soyTemplateName = 'GH.tpl.dialogs.issuemovedialog.renderMoveMessage';
}


GH.tpl.dialogs.issuemovedialog.renderSprintBacklog = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.sprint) {
    var sprintHtml__soy38 = '' + GH.tpl.dialogs.issuemovedialog.emphasis({value: opt_data.sprint.name});
    output += soy.$$filterNoAutoescape(AJS.format("sprint {0}",sprintHtml__soy38));
  } else {
    output += soy.$$escapeHtml("the backlog");
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.dialogs.issuemovedialog.renderSprintBacklog.soyTemplateName = 'GH.tpl.dialogs.issuemovedialog.renderSprintBacklog';
}


GH.tpl.dialogs.issuemovedialog.renderIssues = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.issueKeys.length == 1) {
    var firstHtml__soy48 = '' + GH.tpl.dialogs.issuemovedialog.emphasis({value: opt_data.issueKeys[0]});
    output += soy.$$filterNoAutoescape(AJS.format("{0}",firstHtml__soy48));
  } else if (opt_data.issueKeys.length == 2) {
    var firstHtml__soy54 = '' + GH.tpl.dialogs.issuemovedialog.emphasis({value: opt_data.issueKeys[0]});
    var secondHtml__soy57 = '' + GH.tpl.dialogs.issuemovedialog.emphasis({value: opt_data.issueKeys[1]});
    output += soy.$$filterNoAutoescape(AJS.format("{0} and {1}",firstHtml__soy54,secondHtml__soy57));
  } else if (opt_data.issueKeys.length > 2) {
    var firstHtml__soy63 = '' + GH.tpl.dialogs.issuemovedialog.emphasis({value: opt_data.issueKeys[0]});
    var secondHtml__soy66 = '' + GH.tpl.dialogs.issuemovedialog.emphasis({value: opt_data.issueKeys[1]});
    var moreCountHtml__soy69 = '' + GH.tpl.dialogs.issuemovedialog.emphasis({value: opt_data.issueKeys.length - 2});
    output += soy.$$filterNoAutoescape(AJS.format("{0}, {1} and {2} more {3,choice,1# issue|2\x3c issues}",firstHtml__soy63,secondHtml__soy66,moreCountHtml__soy69,opt_data.issueKeys.length - 2));
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.dialogs.issuemovedialog.renderIssues.soyTemplateName = 'GH.tpl.dialogs.issuemovedialog.renderIssues';
}


GH.tpl.dialogs.issuemovedialog.emphasis = function(opt_data, opt_ignored) {
  return '<strong>' + soy.$$escapeHtml(opt_data.value) + '</strong>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.issuemovedialog.emphasis.soyTemplateName = 'GH.tpl.dialogs.issuemovedialog.emphasis';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/ConfirmDialog.js' */
GH.ConfirmDialog={},GH.ConfirmDialog.create=function(n,t){var i={header:"Confirmation",content:"Are you sure?",contentEscaping:!0,onConfirmFn:function(){},onCancelFn:function(){},width:433,height:184},e=_.defaults(t,i),o=GH.Dialog.create({id:n,width:e.width,height:e.height,closeOnOutsideClick:!1,onCancelFn:e.onCancelFn});o.addHeader(e.header);var a;return a=e.contentEscaping?AJS.$("<div />").text(e.content):AJS.$("<div />").html(e.content),o.addPanel("",a,"ghx-confirm-dialog-panel"),o.addButton("Confirm",function(n){n.dispose(),e.onConfirmFn()},"aui-button"),GH.Dialog.addCancelButton(o),AJS.$("#"+o.id).addClass("ghx-dialog"),o};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ops/IssueSelectionManager.js' */
GH.IssueSelectionManagerModel={isIssueValid:function(e){return!1},getIssueIndex:function(e){return-1},canAddToSelection:function(e,t){return!1},getIssueRange:function(e,t){return[e,t]}},GH.IssueSelectionManager=function(e,t){this.model=e,this.selectedIssuesStateKey=t,this.lastNonShiftSelectedKey=void 0,this.lastShiftSelectedKey=void 0},GH.IssueSelectionManager.prototype.validateCurrentSelection=function(){var e=this.getSelectedIssueKeys(),t=e.slice(0).reverse(),s=[];return _.each(t,function(e){this.model.isIssueValid(e)&&(0===s.length||this.model.canAddToSelection(s,e))&&s.push(e)},this),s.reverse(),!_.isEqual(e,s)&&(this.storeSelectedIssueStack(s),!0)},GH.IssueSelectionManager.prototype.selectIssue=function(e){var t=e?[e]:[];this._replaceSelectedIssueKeys(t),this._setLastNonShiftSelectedKey(e)},GH.IssueSelectionManager.prototype.getSelectedIssueKeys=function(){return GH.BoardState.getPerViewValue(this.selectedIssuesStateKey,[])},GH.IssueSelectionManager.prototype.storeSelectedIssueStack=function(e){GH.BoardState.setPerViewValue(this.selectedIssuesStateKey,e)},GH.IssueSelectionManager.prototype.getSelectedIssuesInOrder=function(){var e=this.getSelectedIssueKeys();return _.sortBy(e,this.model.getIssueIndex.bind(this.model))},GH.IssueSelectionManager.prototype.isInSelection=function(e){var t=this.getSelectedIssueKeys();return _.contains(t,e)},GH.IssueSelectionManager.prototype.hasSelection=function(){var e=this.getSelectedIssueKeys();return!_.isEmpty(e)},GH.IssueSelectionManager.prototype._addToSelection=function(e){if(!this.isInSelection(e)){var t=this.getSelectedIssueKeys();t.push(e),this.storeSelectedIssueStack(t)}},GH.IssueSelectionManager.prototype._prependToSelection=function(e){if(!this.isInSelection(e)){var t=this.getSelectedIssueKeys();t.unshift(e),this.storeSelectedIssueStack(t)}},GH.IssueSelectionManager.prototype._addSelectedIssueKeys=function(e){var t=this;_.each(e,function(e){t._addToSelection(e)})},GH.IssueSelectionManager.prototype._prependSelectedIssueKeys=function(e){var t=this;_.each(e,function(e){t._prependToSelection(e)})},GH.IssueSelectionManager.prototype._removeFromSelection=function(e){var t=this.getSelectedIssueKeys();t=_.without(t,e),this.storeSelectedIssueStack(t)},GH.IssueSelectionManager.prototype.removeSelectedIssueKeys=function(e){var t=this;_.each(e,function(e){t._removeFromSelection(e)})},GH.IssueSelectionManager.prototype._replaceSelectedIssueKeys=function(e){this._clearSelectedIssueKeys(),this._addSelectedIssueKeys(e)},GH.IssueSelectionManager.prototype._clearSelectedIssueKeys=function(){this.storeSelectedIssueStack([])},GH.IssueSelectionManager.prototype.getSelectedIssueKey=function(){var e=this.getSelectedIssueKeys(),t=e[e.length-1];return t||null},GH.IssueSelectionManager.prototype._getLastNonShiftSelectedKey=function(){if(!this.lastNonShiftSelectedKey){var e=this.getSelectedIssueKey();if(e&&this.model.isIssueValid(e))return this._setLastNonShiftSelectedKey(e),e}return this.lastNonShiftSelectedKey},GH.IssueSelectionManager.prototype._setLastNonShiftSelectedKey=function(e){this.lastNonShiftSelectedKey=e,this.lastShiftSelectedKey=void 0},GH.IssueSelectionManager.prototype._getLastShiftSelectedKey=function(){return this.lastShiftSelectedKey},GH.IssueSelectionManager.prototype._setLastShiftSelectedKey=function(e){this.lastShiftSelectedKey=e},GH.IssueSelectionManager.prototype.handleIssueClick=function(e,t){var s=GH.MouseUtils.isMetaPressed(e),i=GH.IssueSelectionManager.getMultiSelectType(e);if(!this.model.isIssueValid(t))return!1;if(i&&!this.model.canAddToSelection(this.getSelectedIssueKeys(),t))return!1;if(i)if(i===GH.IssueSelectionManager._META_MULTI_SELECT)this.isInSelection(t)?this.removeSelectedIssueKeys([t]):this._addSelectedIssueKeys([t]),this._setLastNonShiftSelectedKey(t);else{var n=this._getLastNonShiftSelectedKey(),o=this.getSelectedIssueKeys();if(0!==o.length&&n&&this.model.isIssueValid(n)){var c=this.model.getIssueRange(n,t);if(s){var l=[],a=this._getLastShiftSelectedKey();a&&(l=this.model.getIssueRange(n,a)||[],l=_.without(l,c)),this.removeSelectedIssueKeys(l),this._addSelectedIssueKeys(c)}else this._replaceSelectedIssueKeys(c)}else this.selectIssue(t);this._setLastShiftSelectedKey(t)}else this.selectIssue(t);return!0},GH.IssueSelectionManager._NO_MULTI_SELECT=0,GH.IssueSelectionManager._META_MULTI_SELECT=1,GH.IssueSelectionManager._SHIFT_MULTI_SELECT=2,GH.IssueSelectionManager.getMultiSelectType=function(e){var t=GH.MouseUtils.isMetaPressed(e),s=GH.MouseUtils.isShiftPressed(e),i=GH.IssueSelectionManager._NO_MULTI_SELECT;return s?i=GH.IssueSelectionManager._SHIFT_MULTI_SELECT:t&&!s&&(i=GH.IssueSelectionManager._META_MULTI_SELECT),i};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/PlanDragAndDrop.js' */
define("jira-agile/rapid/ui/plan/plan-drag-and-drop",["require"],function(e){"use strict";function t(e,t,r,i){var l=g.calculateIssueMoveModel(e,t),d=g.confirmMove(l);return d.fail(function(){p.reload()}),d.done(function(l){m.triggerAnalyticsIssuesDnD(l);var d=[],h=[],f=g.isMoveBetweenActiveSprints(l)||g.isOnlyRankOperation(l);if(f)d=e;else{var v=l.changes[0];d=v.issueKeys,h=v.doneIssueKeys}if(o.isEmpty(d)||a.moveIssues(d,t,r,i),!o.isEmpty(h)){var k=u.findModelWithIssue(h[0]);a.removeIssues(k,h)}var x=[];o.isEmpty(d)?x.push(s.Deferred().resolve(null)):x.push(GH.RankController.sprintRankIssues(u.getRankCustomFieldId(),d,t,i,r)),o.isEmpty(h)?x.push(s.Deferred().resolve(null)):x.push(GH.RankController.sprintRankIssues(u.getRankCustomFieldId(),h,null,null,null)),s.when.apply(null,x).done(function(e,a){m.triggerAnalytics(l);var r=e&&GH.RankController.getErrorRankResultFromResponse(e[0]);r||(r=a&&GH.RankController.getErrorRankResultFromResponse(a[0])),r?(GH.Notification.showWarning(r.errors[0]),p.reload()):(C.refreshDetailsView(l),c.showSprintRankSuccessMessage(l)),n.removeFromSelectionIssuesInDifferentModel(t)}).fail(function(){p.reload()})}),d.done(function(){C.rankingComplete=!0}),d}var a,n,r,i,s=e("jquery"),o=e("underscore"),l=e("jira-agile/rapid/global-events"),d=(e("jira/ajs/dark-features"),e("jira-agile/rapid/analytics-tracker")),u=e("jira-agile/rapid/ui/plan/backlog-model"),c=e("jira-agile/rapid/ui/plan/issue-actions"),g=e("jira-agile/rapid/ui/plan/issue-move-controller"),p=e("jira-agile/rapid/ui/plan/plan-controller"),h=e("jira-agile/rapid/ui/plan/plan-controls"),f=e("jira-agile/rapid/ui/plan/kanban-transition-and-rank"),v=e("jira-agile/rapid/ui/plan/plan-issue-list-filtering"),k=e("jira-agile/rapid/ui/plan/sprint-view"),m=e("jira-agile/rapid/ui/plan/sprint-controller"),x=3e3;l.on("pre-initialization",function(){a=e("jira-agile/rapid/ui/plan/backlog-controller"),n=e("jira-agile/rapid/ui/plan/backlog-selection-controller"),r=e("jira-agile/rapid/ui/plan/BacklogView"),i=e("jira-agile/rapid/ui/plan/plan-issue-list-view")});var C={};return C.currentDragElement=void 0,C.rankingComplete=!0,C.REJECTION_REASON_ATTRIBUTE="data-target-rejected-reason",C.DropRejectionReasons={VERSION_PROJECT_MISMATCH:"versionProjectMismatch",ISSUE_PROJECT_MISMATCH:"issueProjectMismatch"},C.analytics={},C.analytics.sprints=new d("gh.sprint.issues"),C.analytics.ranking=new d("gh.rapidboard.rankissues"),C.cancel=!1,C.skipNextRank=!1,C.getCancelSelector=function(){var e=":input,button,.js-fake-parent,.ghx-subtask-group,.ghx-parent-stub,.ghx-hidden-subtasks-count-container",t=u.isRankable(),a=u.canManageSprints();return t?a||(e+=",.ghx-marker"):(C.NotRankableHandler.register(".js-sortable.js-issue"),e+=",.js-issue"),e},C.COMMON_CUSTOM_SORTABLE_OPTIONS=Object.freeze({zIndex:x,appendTo:"body",helper:"clone",scroll:!0,ignoreOriginalScroll:!0,scrollSensitivity:20,additionalScrollParents:function(){return s("#ghx-backlog, .ghx-classification-scrollview")},autoScrollOffsets:function(){var e=s("#ghx-content-group");if(!r.isStickySprintHeadersEnabled())return{};var t=e.find(".ghx-backlog-header.stuck"),a=t.length?t.outerHeight(!0):0;return{top:a+20}}}),C.subtaskDnDContainment=function(){var e=1e4,t=s(".ghx-backlog-container.ghx-kanban-backlog"),a=s("#ghx-epic-column"),n=t.offset().top+t.outerHeight(),r=a.offset().top+a.outerHeight(),i=this.helper.width()*-1;return[isNaN(i)?0:i,0,e,Math.max(n,r)||e]},C.enableDragAndDrop=function(){function e(e){return e.find(".ghx-dropzone-active").length||!e.hasClass("ghx-open")||e.find(".ghx-no-issues").length}var t=s("#ghx-content-group"),a=C.getCancelSelector();C.skipNextRank=!1;var r=function(){document.activeElement&&"ghx-backlog-search-input"===document.activeElement.id&&s("#ghx-backlog-search-input").blur()};t.mousedown(function(e){s(e.target).is(".js-editing-field")||(r(),GH.RapidBoard.Util.InlineEditable.submitActiveEdits()&&e.stopPropagation())});var i=t.find(".js-issue").first();t.sortable(o.extend({},C.COMMON_CUSTOM_SORTABLE_OPTIONS,{revert:0,forceHelperSize:!0,helperProportions:{width:i.width(),height:i.height()},initializeTopAndLeft:!0,containment:function(){if(!this.helper.hasClass("ghx-marker"))return!1;var e=this.currentItem.parent(),t=(e.offset(),e.find(".js-issue-list")),a=t.offset(),n=e.parent().find(".js-sprint-header"),r=a.top;return n.hasClass("stuck")&&(r=n.offset().top+n.outerHeight()),[0,r,1e4,1e4]},items:".js-parent-drag:not(.ghx-filtered)",cancel:a,intersectionOverride:function(e){var t=s.ui.isOverAxis(this.positionAbs.top+this.helperProportions.height/2,e.top,e.height),a=s.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),n=t&&a,r=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection();return!!n&&(this.floating?i&&"right"==i||"down"==r?2:1:r&&("down"==r?2:1))},helperAdjusted:function(){C.markerMove&&C.adjustMarkerDragOverlayHeight.apply(this)},axisAdjusted:function(){var e="y";this.currentItem.is(".js-issue")&&(e="both"),this.options.axis=e},start:function(e,a){C.skipNextRank=!1,t.addClass("ghx-drag-in-progress"),C.dragStartHandler.apply(this,[e,a])},update:function(e,a){C.skipNextRank?t.sortable("cancel"):C.updateHandler.apply(this,[e,a])},stop:function(e,a){t.removeClass("ghx-drag-in-progress"),C.dragStopHandler.apply(this,[e,a])},change:C.changeHandler,disabled:!u.isRankable()})),s(".ghx-backlog-container").droppable({accept:".js-sortable.js-issue",hoverClass:"ghx-target-hover",tolerance:"pointer",activate:function(e,t){var a=s(this),n=t.draggable.hasClass("ghx-subtask");n&&!a.has(t.draggable).length&&a.find(".js-issue-list .ghx-plan-dropzone").addClass("ghx-dropzone-active")},deactivate:function(e,t){s(this).find(".js-issue-list .ghx-plan-dropzone").removeClass("ghx-dropzone-active")},drop:function(t,a){var r=s(this),i=r.hasClass("ghx-everything-else");if(e(r)&&!C.cancel){var l=n.getSelectedIssueKeys();l=n.filterIssuesThatCanBeRanked(l);var d=i?null:parseInt(s(this).attr("data-sprint-id"),10),c=i?u.getBacklogModel2():u.getSprintModel(d);if(c){C.analytics.sprints.trigger("addbydragndrop","selectedIssuesCount",l.length);var g=o.last(c.getIssueList().getOrder());C.rankIssues(l,d,g,null),C.skipNextRank=!0}}}}),t.find(".ghx-subtask-group").sortable(o.extend({},C.COMMON_CUSTOM_SORTABLE_OPTIONS,{revert:0,items:".ghx-subtask",containment:C.subtaskDnDContainment,start:function(e,a){C.skipNextRank=!1,t.addClass("ghx-drag-in-progress"),C.dragStartHandler.apply(this,[e,a])},stop:function(e,a){t.removeClass("ghx-drag-in-progress"),C.dragStopHandler.apply(this,[e,a])},update:function(e,a){C.skipNextRank?t.sortable("cancel"):C.updateHandler.apply(this,[e,a])}})),C.initializeClassificationDnD()},C.initializeClassificationDnD=function(){var e=C.getCancelSelector(),t=s(".ghx-classification-cards"),a=s("#ghx-epic-column").find(".ghx-classification-cards");a.sortable({helper:"clone",axis:"y",revert:0,zIndex:x,containment:"parent",start:function(e,t){C.dragStartHandler.apply(this,[e,t])},stop:C.dragStopHandler,tolerance:"pointer",items:".js-parent-drag, .js-sortable",cancel:e,update:function(e,t){C.updateHandler.apply(this,[e,t])}});var r=t.find(".ghx-classification-item").add(s(".ghx-classification-pending")),i=0;r.droppable({accept:".js-sortable.js-issue",hoverClass:"ghx-target-hover",tolerance:"pointer",over:function(e,t){s(this).hasClass("ghx-target-hover-rejected")&&(i++,i>0&&t.helper.css("cursor","not-allowed"))},out:function(e,t){s(this).hasClass("ghx-target-hover-rejected")&&(i--,i<=0&&t.helper.css("cursor",""))},drop:function(){i=0;var e=s(this),t=e.attr("data-epic-key"),a=e.attr("data-version-id");if(!C.cancel){var r=n.getSelectedIssueKeys();if(o.isEmpty(t)){if(!o.isEmpty(a))if(e.hasClass("ghx-target-hover-rejected")){var l=e.attr(C.REJECTION_REASON_ATTRIBUTE);if(l===C.DropRejectionReasons.VERSION_PROJECT_MISMATCH||l===C.DropRejectionReasons.ISSUE_PROJECT_MISMATCH){var d=AJS.format("Issues can only be added to a version that belongs to the same project as the {0,choice,0#issues|1#issue|2#issues}",r.length);GH.Notification.showError(null,d,!0,{autoHide:!0,showTitle:!1})}}else{var c=o.compact(o.map(r,function(e){return u.getIssueData(e)})),g=GH.VersionController.getVersionModel().getVersion(parseInt(a,10));if(!v.isNoneVersionFilterId(a)){var p=c.length;c=o.filter(c,function(e){return g.project.id===e.projectId}),p-=c.length}var h=o.some(c,function(e){return e.fixVersions.length>1}),f=function(){v.isNoneVersionFilterId(a)?GH.VersionController.clearIssuesVersion(c):GH.VersionController.setIssuesVersion(parseInt(a,10),c,p)};if(h&&!GH.storage.get("gh.dialog.versionChangeConfirm.dontAsk",!1)){var k;k=v.isNoneVersionFilterId(a)?AJS.format("This action will remove any versions from the {0,choice,0#issues|1#issue|2#issues}",c.length):AJS.format("Adding the selected {1,choice,0#issues|1#issue|2#issues} to version {0} will remove the {1,choice,0#issues|1#issue|2#issues} from any other versions","<b>"+AJS.escapeHTML(String(g.name))+"</b>",c.length);var m="ghx-version-change-confirm-dialog";GH.ConfirmDialog.create(m,{content:k,contentEscaping:!1,onConfirmFn:function(){f()}}).show(),s("#"+m).find(".dialog-button-panel").prepend(GH.tpl.versionview.renderDontAskAgain());var x=s("#ghx-dont-ask-for-confirmation");x.change(function(){GH.storage.put("gh.dialog.versionChangeConfirm.dontAsk",x.is(":checked"),!1)})}else f()}}else v.isNoneEpicFilterKey(t)?GH.EpicController.removeIssuesFromAssociatedEpics(r):GH.EpicController.addIssuesToEpic(t,r);C.skipNextRank=!0}}})},C.dragStartHandler=function(e,t){C.cancel=!1;var n=s(t.item),r=s(this),i=n.hasClass("ghx-marker")||n.hasClass("js-parent-drag");setTimeout(function(){h.stopEdits()},0),GH.EpicView.hideDropdown(),GH.VersionView.hideDropdown(),GH.PlanContextMenuController.hideContextMenu(),s(document).bind("keydown.planDragAndDrop",function(e){27==e.keyCode&&(C.cancel=!0,r.sortable("cancel"),i&&(a.revertStatistics(),GH.BacklogView.enableStickyHeaders()))}),n.hasClass("js-issue")?(C.markerMove=!1,C.issueDragStartHandler.apply(this,[e,t])):i&&(C.markerMove=!0,C.markerDragStartHandler.apply(this,[e,t])),GH.LinkedPagesController.hideCurrentDialog()},C.dragStopHandler=function(e,t){var a=s(t.item);s(document).unbind("keydown.planDragAndDrop"),a.hasClass("js-issue")?C.issueDragStopHandler.apply(this,[e,t]):(a.hasClass("ghx-marker")||a.hasClass("js-parent-drag"))&&C.markerDragStopHandler.apply(this,[e,t])},C.updateHandler=function(e,t){var a=t.item;C.cancel||(a.hasClass("js-issue")?C.issueUpdateHandler(e,t):a.hasClass("ghx-marker")||a.hasClass("js-parent-drag")?C.markerUpdateHandler(e,t):a.hasClass("ghx-classification-item")&&C.epicUpdateHandler(e,t))},C.changeHandler=function(e,t){var a=s(t.item),n=a.hasClass("js-issue"),r=t.placeholder,i=r.parent(),o=i.hasClass("js-issue-list");if(n){if(!o){var l=r.prevAll(".js-issue-list");l.length&&l.append(r)}}else{var d=k.getSprintIdForMarker(s(t.item)),u=k.getSprintIdForElement(r),c=d===u;if(c){if(o){var g=!r.next(".js-issue").length;g&&i.after(r)}}else if(!o){var l=r.prevAll(".js-issue-list");l.length&&l.append(r)}}a.hasClass("js-issue")||(a.hasClass("ghx-marker")||a.hasClass("js-parent-drag"))&&C.markerChangeHandler(e,t)},C.issueDragStartHandler=function(e,t){var a=s(t.helper);C.currentDragElement=a;var r=i.getIssueKey(a);n.ensureIssueSelected(e,r);var l=n.getSelectedIssueKeys();l=n.filterIssuesThatCanBeRanked(l),l.length>1&&(a.hasClass("ghx-parent-group")?a.children(".js-issue").addClass("ghx-move-main").find(".ghx-move-count > b").text(l.length):a.addClass("ghx-move-main").find(".ghx-move-count > b").text(l.length));var d=o.chain(l).map(function(e){return u.getIssueData(e).projectId}).uniq().value(),c=s("#ghx-version-column").find(".ghx-classification-cards .ghx-classification-item"),g=o.flatten(d.map(function(e){return GH.VersionController.getVersionModel().getVersionsIdsForProject(e)}));c.filter(function(e,t){return!o.contains(g,parseInt(s(t).attr("data-version-id"),10))}).addClass("ghx-target-hover-rejected").attr("data-target-rejected-reason","versionProjectMismatch")},C.issueDragStopHandler=function(e,t){var a=t.item;a.css("cursor",""),a.hasClass("ghx-parent-group")?a.children(".js-issue").removeClass("ghx-move-main"):a.removeClass("ghx-move-main"),C.currentDragElement=null,s(".ghx-classification-cards").find(".ghx-target-hover-rejected").removeClass("ghx-target-hover-rejected").removeAttr(C.REJECTION_REASON_ATTRIBUTE)},C.issueUpdateHandler=function(e,t){C.rankingComplete=!1;var a=s(t.item),r=n.getSelectedAndVisibleIssuesInOrder();C.analytics.ranking.trigger("dragAndDrop",r.length);var o=i.findPrevRankableElement(a),l=i.getRankableId(o),d=i.findNextRankableElement(a),u=i.getRankableId(d),c=k.getSprintIdForElement(a),g=!!l,p=!!u;g&&p&&(u=!1),C.rankIssues(r,c,l,u)},C.epicUpdateHandler=function(e,t){function a(e){return{key:e.attr("data-epic-key"),id:e.attr("data-epic-id")}}var n=s(t.item),r=a(n),i=n.prev(),o=i.length>0&&a(i),l=n.next(),d=l.length>0&&a(l),c=[r.key];GH.EpicController.reorderEpics(c,o.key,d.key);var g=function(){p.reload()},h=function(e){var t=GH.RankController.getErrorRankResultFromResponse(e);t&&(GH.Notification.showWarning(t.errors[0]),p.reload())};GH.RankController.rankEpics(u.getRankCustomFieldId(),r.id,d.id,o.id).fail(g).done(h)},C.rankIssues=function(e,a,n,r){return GH.RapidBoard.State.isKanbanBoard()?(f.transitionAndRankIssues(e,a,n,r),s.Deferred().resolve()):t(e,a,n,r)},C.refreshDetailsView=function(e){if(p.isDetailsViewOpened()&&!g.isOnlyRankOperation(e)){var t=GH.DetailsView.selectedIssueKey,a=g.getAllIssueKeys(e);o.contains(a,t)&&GH.DetailsView.reload()}},C.markerDragStartHandler=function(e,t){var a=s(t.item),n=a.parent(),r=n.offset(),i=a.height(),o=n.closest(".ghx-backlog-container").find(".js-sprint-header"),l=s(GH.tpl.backlogview.renderDragOverlay({})),d=s("#ghx-backlog").offset().top,u=function(){var e=o.length?o.get(0).getBoundingClientRect().bottom:0;return e<d?d:e},c=function(e){return t.helper.offset().top-e+i},g=u(),p=c(g);l.css({top:g,left:r.left+1,height:p,width:n.outerWidth()-2}).appendTo("body"),C.adjustMarkerDragOverlayHeight=function(){this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");var e=u(),t=c(e);l[0].style.top=e+"px",l[0].style.height=t+"px"};var h=s(t.helper);a.closest(".ghx-sprint-planned").addClass("ghx-active-drag"),C.currentDragElement=h},C.markerChangeHandler=function(e,t){var a=s(t.placeholder),n=k.getSprintIdForMarker(t.item);if(n){var r=k.getSprintIdForElement(a),o=i.findPreviousVisibleIssueElementInList(a),l=i.getRankableId(o);C.updateTemporarySprintStatistics(n,r,l)}},C.markerDragStopHandler=function(){var e=s(".ghx-backlog-container");e.removeClass("ghx-active-drag ghx-overtaken"),s(".ghx-drag-overlay").remove(),C.currentDragElement=null,r.adjustStickyHeader()},C.markerUpdateHandler=function(e,t){C.analytics.sprints.trigger("footerdrag");var a=s(t.item),n=k.getSprintIdForMarker(a);if(n){var r=k.getSprintIdForElement(a),o=i.findPreviousVisibleIssueElementInList(a),l=i.getRankableId(o);C.handleMarkerDragRanking(n,r,l)}},C.handleMarkerDragRanking=function(e,t,a){var i=u.calculateRankingDataForSprintMarkerMove(e,t,a);if(i){var s=C.rankIssues(i.issueKeys,i.sprintId,i.prevRankableId,i.nextRankableId);s.done(function(){var e=n.validateCurrentSelection();e&&r.updateIssueSelectionState(!1)})}if(e!=t&&!a){var o=[];t?o.push(u.getSprintModel(t)):o.push(u.getBacklogModel2()),i||o.push(u.getSprintModel(e)),r.redrawChangedModels(o)}},C.updateTemporarySprintStatistics=function(e,t,a){var n=u.getSprintModel(e);if(n){var r=u.calculateTemporaryDataForSprintWithMarker(e,t,a);k.markAsOvertaken(r.modelsData.otherAffectedModels),k.updateSprintStatisticForDraggedSprint(n,r.issueList)}},C._findShownElementByClass=function(e){return function(t){var a=s(t);return a.hasClass(e)&&!a.is(":hidden")}},C._findShownElement=function(e){var t=s(e);return!t.is(":hidden")},C.NotRankableHandler={mouseXStart:0,mouseYStart:0,register:function(e){s(document).delegate(e,"mousedown",C.NotRankableHandler.mouseDownHandler)},registerOutUpHandlers:function(e){e.bind("mouseout",C.NotRankableHandler.mouseOutHandler),e.bind("mouseup",C.NotRankableHandler.mouseUpHandler)},unregisterOutUpHandlers:function(e){e.unbind("mouseout",C.NotRankableHandler.mouseOutHandler),e.unbind("mouseup",C.NotRankableHandler.mouseUpHandler)},mouseDownHandler:function(){var e=s(this);C.NotRankableHandler.registerOutUpHandlers(e)},mouseOutHandler:function(){var e=s(this);C.NotRankableHandler.unregisterOutUpHandlers(e),C.NotRankableHandler.showNotRankableWarning()},mouseUpHandler:function(){var e=s(this);C.NotRankableHandler.unregisterOutUpHandlers(e)},showNotRankableWarning:function(){var e=GH.RapidBoard.getRapidViewConfigurationUrl(a.rapidViewData.id,"filter"),t='<a href="'+e+'">',n="</a>",r=AJS.format("Ranking is disabled, as the Filter Query for this board is not ordered by ascending Rank. Please check your {0}filter configuration{1}.",t,n);GH.Notification.showWarning(r)}},C});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/KanbanTransitionAndRank.js' */
define("jira-agile/rapid/ui/plan/kanban-transition-and-rank",["require"],function(e){"use strict";function n(){b.showLoadingBacklog()}function i(){b.hideLoadingBacklog()}function r(e,n,i,r,a){var o,u=n.success;if(0===u.possibleTransitions.length)o=s(e,u,i,r);else if(u.possibleTransitions.length>1){var c=a?"Backlog":r.changes[0].targetSprint.name;o=l(e,u,i,r,c)}else o=t(e,u.possibleTransitions[0],r);return A.trace("jira.software.ranking.complete"),o}function a(e){var n=y.Deferred();return GH.Ajax.put({url:"/xboard/transitionAndRank",deferErrorHandling:!0,data:e}).done(n.resolve).fail(function(i){var r=i.error.errors&&i.error.errors[0]&&i.error.errors[0].message||"Sorry an unexpected error occurred! Please try again. \u003cbr\u003eIf this error persists please contact your JIRA Administrator.",a=1===e.issueKeys.length?"We can\'t move this issue right now":"We can\'t move all these issues together right now",s="<p>"+G.escapeHtml(r)+"</p>";GH.Notification.showError(a,s),S.reload(n.reject)}),n.promise()}function s(e,n,i,r){return d(e,r,n),j.refreshDetailsView(r),e.calculateNewIssuesOrder&&w.reorderIssuesInSprint(n.newIssuesOrder,i),w.updateIssues(n.updatedIssues),x.removeFromSelectionIssuesInDifferentModel(i),e.issueKeys.forEach(function(n){var i=K.getIssueData(n);i.parentKey&&!T.contains(e.issueKeys,i.parentKey)&&O.toggleExpandStateForKey(n,!0)}),j.rankingComplete=!0,y.Deferred().resolve().promise()}function t(e,n,i){d(e,i),k(e,i);var r=K.getIssueIdForKey(e.issueKeys[0]);return GH.WorkDragAndDrop.executeWorkflowTransition(r,n.id,n.targetStatus),o(e),y.Deferred().resolve().promise()}function o(e){var n=y.Deferred();return GH.RankController.rankIssues(e.rankCustomFieldId,e.issueKeys,e.rankBeforeIssueIdOrKey,e.rankAfterIssueIdOrKey).fail(function(){S.reload(n.reject)}).done(function(e){if(e){var i=GH.RankController.getErrorRankResultFromResponse(e);i?(GH.Notification.showWarning(i.errors[0]),S.reload(n.reject)):(j.rankingComplete=!0,A.trace("jira.software.ranking.complete"),n.resolve())}}),n.promise()}function l(e,n,i,r,o){var l=R.createTransitionStatusDialog(n.possibleTransitions,o,e.issueKeys.length),u=y.Deferred();return g(e,r,n),l.on("submit",function(o){f(e,r,n);var l=T.find(n.possibleTransitions,function(e){return e.id===parseInt(o,10)});l.hasTransitionView?t(e,l,r).then(u.resolve,u.reject):(e.selectedTransitionId=l.id,a(e).done(function(n){E.showTransitionSuccessMessage(e.issueKeys),s(e,n.success,i,r),u.resolve()}).fail(function(){v(e,r),u.reject()}))},l),l.on("cancel",function(){m(e,r,n),S.reload(u.reject)},l),l.show(),l.updateHeight(),u.promise()}function u(e,n){var i=M.baseEventData();return i.src=M.getSrcColumnName(n),i.dest=M.getDestColumnName(n),i.rankOnly=i.src===i.dest,i.issuesCount=e.issueKeys.length,i.subtasksCount=K.filterOnlySubtasks(e.issueKeys).length,i}function c(e){var n=M.baseEventData();n.src=M.getColumnName(!e),n.dest=M.getColumnName(e),n.rankOnly=!1,F.send({name:"jira-software.plan.issuecard.transition.view.dialog.cancelled",properties:n})}function d(e,n,i){var r=u(e,n);i&&(r.rankingTime=i.rankingTime,r.transitionTime=i.transitionTime),F.send({name:"jira-software.plan.issuecard.drop.success",properties:r})}function p(e,n,i,r){var a=u(n,i);a.optionsCount=r.possibleTransitions.length,F.send({name:e,properties:a})}function g(e,n,i){p("jira-software.plan.transition-menu.view.show",e,n,i)}function f(e,n,i){p("jira-software.plan.transition-menu.view.confirm",e,n,i)}function m(e,n,i){p("jira-software.plan.transition-menu.view.cancel",e,n,i)}function k(e,n){var i=u(e,n);F.send({name:"jira-software.plan.transition.screen.view",properties:i})}function v(e,n){var i=u(e,n);F.send({name:"jira-software.plan.issuecard.drop.failure",properties:i})}function I(e){var n,i=H.isMoveToBacklog(e);return n=i?K.getBacklogModel2().getColumn():K.getSprintModels()[0].sprintData.column,n.id}var j,w,h,b,y=e("jquery"),T=e("underscore"),D=e("jira-agile/rapid/global-events"),K=e("jira-agile/rapid/ui/plan/backlog-model"),S=e("jira-agile/rapid/ui/plan/plan-controller"),C=e("jira-agile/rapid/ui/plan/plan-controls"),H=e("jira-agile/rapid/ui/plan/issue-move-controller"),R=e("jira-agile/rapid/ui/kanplan/kan-plan-dialog-utils"),O=e("jira-agile/rapid/ui/plan/subtasks-expanding-controller"),x=e("jira-agile/rapid/ui/plan/backlog-selection-controller"),B=e("jira/util/events"),G=e("jira/util/strings"),M=e("jira-agile/rapid/ui/plan/analytics-helper"),N=e("jira/util/formatter"),A=e("jira/util/logger"),F=e("jira/analytics"),E={};return E._preInitialization=function(){w=e("jira-agile/rapid/ui/plan/backlog-controller"),h=e("jira-agile/rapid/ui/plan/BacklogView"),j=e("jira-agile/rapid/ui/plan/plan-drag-and-drop"),b=e("jira-agile/rapid/ui/plan/plan-view")},D.on("pre-initialization",E._preInitialization),B.bind("Dialog.hide",function(e,n,i,r){if(GH.RapidBoard.State.isPlanMode()&&GH.RapidBoard.State.isKanbanBoard()&&r&&r.match(/^workflow-transition-(\d+)-dialog$/)&&JIRA.Dialogs[r].cancelled){S.reload();var a=K.sprintModels[0];if(a){var s=a.sprintData.column.statusIds,t=GH.WorkDragAndDrop.transitionTargetStatus,o=s.indexOf(t.toString())===-1;c(o)}}}),E.transitionAndRankIssues=function(e,s,t,l){if(0!==e.length){var u=H.calculateIssueMoveModel(e,s),c=w.moveIssues(e,s,t,l),p=H.isMoveToBacklog(u),g={rapidViewId:GH.RapidBoard.State.getRapidViewId(),issueKeys:e,targetColumn:I(u),rankCustomFieldId:K.getRankCustomFieldId(),calculateNewIssuesOrder:c,rankBeforeIssueIdOrKey:l||void 0,rankAfterIssueIdOrKey:t||void 0,activeQuickFilters:C.quickfilters.getActiveQuickFilters()};H.isOnlyRankOperation(u)?o(g).done(function(){d(g,u)}).fail(function(){v(g,u)}):(n(),a(g).done(function(e){r(g,e,s,u,p).always(i)}).fail(function(){v(g,u),i()}))}},E.showTransitionSuccessMessage=function(e){1===e.length?GH.Notification.showSuccess(N.format("Issue {0} successfully transitioned.",e)):GH.Notification.showSuccess(N.format("Issues {0} successfully transitioned.",e.join(", ")))},E});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/PlanController.js' */
define("jira-agile/rapid/ui/plan/plan-controller",["require"],function(e){"use strict";var i,t,a=e("jquery"),n=e("underscore"),o=e("jira-agile/rapid/global-events"),l=e("jira-agile/rapid/analytics-tracker"),s=e("jira-agile/rapid/ui/plan/analytics-helper"),r=e("jira-agile/rapid/ui/plan/plan-controls"),d=e("jira-agile/rapid/ui/plan/plan-issue-list-filtering"),u=e("jira-agile/rapid/ui/plan/plan-view"),p=e("jira-agile/rapid/ui/kanplan/kan-plan-feature-service"),c=e("jira-agile/rapid/ui/kanplan/KanPlanInlineDialogController");o.on("pre-initialization",function(){i=e("jira-agile/rapid/ui/plan/backlog-selection-controller"),t=e("jira-agile/rapid/ui/plan/backlog-controller")});var V={};V.isVisible=!1,V.viewData=void 0,V.currentViewConfig={},V.analytics=function(e){return new l("gh.planningboard."+e)},V.init=n.once(function(){u.init(),r.init(),GH.VersionController.init(),GH.EpicController.init(),t.init(),c.init()}),V.isActive=function(){return V.isVisible},V.setRapidView=function(e){V.rapidViewData=e,t.setRapidView(e)},V.show=function(){GH.log("PlanController.show",GH.Logger.Contexts.ui),V.rapidViewData&&(V.isVisible=!0,u.show(),V.configureUI(),V.loadRapidViewConfig(),V.attachControlFHandler())},V.configureUI=function(){var e=i.getSelectedIssueKey();GH.DetailsView.setRapidViewId(V.rapidViewData.id),e&&GH.DetailsView.setSelectedIssueKey(e),u.updateDetailViewState(),u.updateVersionColumnState(),u.updateEpicsColumnState()},V.lastPushUpdate=0,V.pushTimeoutHandler=void 0,V.updateDetailsView=function(e,i,t){var a=300,n=(new Date).getTime();return V.lastPushUpdate<n-a?(V.doUpdateDetailsView(e,i,t),void(V.lastPushUpdate=n+a)):(V.pushTimeoutHandler&&window.clearTimeout(V.pushTimeoutHandler),void(V.pushTimeoutHandler=window.setTimeout(function(){V.doUpdateDetailsView(e,i,t),V.lastPushUpdate=(new Date).getTime()},a)))},V.doUpdateDetailsView=function(e,t,a){(GH.RapidBoard.State.isDetailsViewPlanOpened()||t)&&(GH.DetailsView.setSelectedIssueKey(e),null==i.getSelectedIssueKey()?(V.setDetailViewOpenedState(!1),GH.DetailsView.hide()):(V.setDetailViewOpenedState(!0),GH.DetailsView.show(a)),e&&setTimeout(function(){GH.RapidBoard.State.pushState()},0),u.doUpdateDetailsView())},V.reloadDetailView=function(e){V.isDetailsViewOpened()&&(V.setDetailViewOpenedState(!0),GH.DetailsView.show(e))},V.reload=function(e){V.isVisible&&t.show(e)},V.hide=function(){GH.log("PlanController.hide",GH.Logger.Contexts.ui),V.isVisible=!1,t.hide(),GH.DetailsView.hide(),V.detachControlFHandler(),u.hide(),GH.planOnboarding.refresh()},V.loadRapidViewConfig=function(){var e=function(e){V.currentViewConfig=e,(GH.RapidBoard.State.isScrumBoard()||p.shouldShowKanbanBacklog())&&V.initializePlanMode()};GH.RapidViewConfig.fetchConfiguration(V.rapidViewData.id).done(e)},V.initializePlanMode=function(){V.isVisible&&(r.setRapidViewConfig(V.currentViewConfig),t.setRapidViewConfig(V.currentViewConfig),GH.DetailsView.setRapidViewConfig(V.currentViewConfig),r.renderControls(),GH.RapidBoard.ViewController.shouldShowSubnavigator()&&GH.RapidBoard.SubnavigatorController.render(),u.hideLoadingFilter(),d.setInstantFilter(null),t.show(w),GH.RapidBoard.ViewController.updateContentContainer())};var w=function(){var e="jira-software."+GH.RapidBoard.State.getBoardType()+".plan.view",i=s.baseEventData();p.sendAnalyticsInfo(e,i)};return V.isDetailsViewOpened=function(){return GH.RapidBoard.State.isDetailsViewPlanOpened()},V.setDetailViewOpenedState=function(e){e=e||!1,GH.RapidBoard.State.setPlanViewDetailsViewOpened(e),u.updateDetailViewState()},V.closeDetailsView=function(){GH.DetailsView.hasCurrentError()||V.isDetailsViewOpened()&&(V.setDetailViewOpenedState(!1),GH.RapidBoard.State.pushState(),GH.DetailsView.hide(),u.updateHorizontalPositioning())},V.toggleDetailsView=function(){if(V.isDetailsViewOpened())V.closeDetailsView();else{var e=i.getSelectedIssueKey();V.updateDetailsView(e,!0)}},V.toggleEpicsShowOnBacklog=function(){GH.ViewActions.toggleEpicsShowOnRapidBoard(),V.reload()},V.isEpicsPanelEnabled=function(){return GH.RapidBoard.State.isScrumBoard()||p.shouldShowEpicsPanel()},V.isVersionsPanelEnabled=function(){return GH.RapidBoard.State.isScrumBoard()||p.isEpicsAndVersionsEnabled()},V.isVersionsColumnVisible=function(){return GH.BoardState.getPerViewValue("planVersionsVisible",!1)},V.isEpicsColumnVisible=function(){return GH.BoardState.getPerViewValue("planEpicsVisible",!1)},V.isVersionsColumnVisiblePersisted=function(){return GH.BoardState.getPerViewValue("planVersionsVisible",!1)},V.isEpicsColumnVisiblePersisted=function(){return GH.BoardState.getPerViewValue("planEpicsVisible",!1)},V.setVersionsColumnVisible=function(e){GH.BoardState.setPerViewValue("planVersionsVisible",!!e)},V.setEpicsColumnVisible=function(e){GH.BoardState.setPerViewValue("planEpicsVisible",!!e)},V.toggleVersionsColumn=function(){var e=V.isVersionsColumnVisible();e=!e,V.setVersionsColumnVisible(e),GH.RapidBoard.State.pushState(),GH.VersionController.sendAnalytics("toggleVersionsColumn",{versionsColumnVisible:e}),u.updateVersionColumnState(),u.updateHorizontalPositioning(),c.trigger("updateepicsonboardingposition",V.isEpicsColumnVisible())},V.toggleEpicsColumn=function(){var e=V.isEpicsColumnVisible();e=!e,V.setEpicsColumnVisible(e),GH.RapidBoard.State.pushState(),GH.EpicController.sendAnalytics("toggleEpicsColumn",{epicsColumnVisible:e}),u.updateEpicsColumnState(),u.updateHorizontalPositioning(),c.trigger("updateepicsonboardingposition",e)},V.attachControlFHandler=function(){a(document).bind("keydown",V.controlFHandler)},V.detachControlFHandler=function(){a(document).unbind("keydown",V.controlFHandler)},V.controlFHandler=function(e){e.ctrlKey&&"f"===String.fromCharCode(e.which).toLowerCase()&&V.analytics("shortcuts").trigger("controlf")},V.collectPrintableIssues=function(){return{sprintIssues:t.extractPrintableIssuesFromAllSprints(),backlogIssues:t.getPrintableIssuesFromPlanBacklog(),epics:t.getEpicMap(),viewMode:"plan",boardType:GH.RapidBoard.State.getBoardType()}},V});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/kanplan/KanPlanDialogUtils.js' */
define("jira-agile/rapid/ui/kanplan/kan-plan-dialog-utils",["jquery","underscore","jira-agile/rapid/events"],function(t,n,a){"use strict";function e(e){var i=GH.Dialog.create({width:e.width,id:e.id,onCancelFn:function(){i.trigger("cancel")}});new a(i);var r=t("#"+i.id);return r.addClass("ghx-dialog"),i.addHeader(e.header),i.addPanel("","panel"),i.getCurrentPanel().html(e.message),i.addButton(e.submitButton,function(){var t={};n.isFunction(e.getSubmitModel)&&(t=e.getSubmitModel()),i.disableControls(),i.dispose(),i.trigger("submit",t)},"aui-button aui-button-primary"),n.isUndefined(e.cancelLink)||i.addCancel(e.cancelLink,function(){i.cancel(i)}),i}var i={};return i.createTransitionStatusDialog=function(n,a,i){var r=t("<span/>",{text:a,class:"column-name"}).get(0).outerHTML;return e({width:500,id:"ghx-kanplan-transition-status",header:"Select a transition",message:GH.tpl.kanplan.dialogutils.transitionStatusContent({transitions:n,targetColumnNameHtml:r,numIssues:i}),submitButton:"OK",cancelLink:"Cancel",getSubmitModel:function(){var n=t("#ghx-kanplan-transition-status input[name=status]:checked");return n.attr("id")}})},i});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/kanplan/KanPlanDialogUtils.soy' */
// This file was automatically generated from KanPlanDialogUtils.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.kanplan.dialogutils.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.kanplan == 'undefined') { GH.tpl.kanplan = {}; }
if (typeof GH.tpl.kanplan.dialogutils == 'undefined') { GH.tpl.kanplan.dialogutils = {}; }


GH.tpl.kanplan.dialogutils.transitionStatusContent = function(opt_data, opt_ignored) {
  var output = '<p>' + ((opt_data.numIssues == 1) ? soy.$$filterNoAutoescape(AJS.format("Select a transition to move your issue to {0}",opt_data.targetColumnNameHtml)) : soy.$$filterNoAutoescape(AJS.format("Select a transition to move your issues to {0}",opt_data.targetColumnNameHtml))) + '</p><form>';
  var transitionList12 = opt_data.transitions;
  var transitionListLen12 = transitionList12.length;
  for (var transitionIndex12 = 0; transitionIndex12 < transitionListLen12; transitionIndex12++) {
    var transitionData12 = transitionList12[transitionIndex12];
    output += '<div class="kanplan-transition-status-option"><input id="' + soy.$$escapeHtml(transitionData12.id) + '" type="radio" name="status" value="' + soy.$$escapeHtml(transitionData12.targetStatus) + '" ' + ((transitionIndex12 == 0) ? ' checked ' : '') + ' /><label for="' + soy.$$escapeHtml(transitionData12.id) + '">' + soy.$$escapeHtml(transitionData12.name) + '</label></div>';
  }
  output += '</form>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.kanplan.dialogutils.transitionStatusContent.soyTemplateName = 'GH.tpl.kanplan.dialogutils.transitionStatusContent';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/PlanController.soy' */
// This file was automatically generated from PlanController.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.plancontroller.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.plancontroller == 'undefined') { GH.tpl.plancontroller = {}; }


GH.tpl.plancontroller.renderSkeleton = function(opt_data, opt_ignored) {
  return '<div id="ghx-plan-group" class="ghx-plan-group ' + ((! opt_data.shouldShowEpicPanel) ? ' ghx-no-epic-panel' : '') + '">' + ((opt_data.shouldShowEpicAndVersionPanels) ? '<div id="ghx-classification-menu-column"><ul id="ghx-classification-menu" class="ghx-ide-menu ghx-classification-menu"><li role="button" class="js-release-toggle ghx-release-toggle"><span class="ghx-inner">' + soy.$$escapeHtml("Versions") + '</span></li>' + ((opt_data.shouldShowEpicPanel) ? '<li role="button" class="js-epic-toggle ghx-epic-toggle"><span class="ghx-inner">' + soy.$$escapeHtml("Epics") + '</span></li>' : '') + '</ul></div>' : '') + '<div id="ghx-version-column" class="ghx-version-column ghx-classification-column"></div><div id="ghx-epic-column" class="ghx-epic-column ghx-classification-column"></div><div id="ghx-backlog-column" class="ghx-backlog-column"><div id="ghx-backlog" class="ghx-backlog"></div></div><div id="ghx-detail-view" class="ghx-detail-view"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.plancontroller.renderSkeleton.soyTemplateName = 'GH.tpl.plancontroller.renderSkeleton';
}


GH.tpl.plancontroller.renderEpicPanelTipsyExpand = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml("Show epics panel") + '<b>' + soy.$$escapeHtml("Use epics to plan features across multiple sprints.") + '</b>';
};
if (goog.DEBUG) {
  GH.tpl.plancontroller.renderEpicPanelTipsyExpand.soyTemplateName = 'GH.tpl.plancontroller.renderEpicPanelTipsyExpand';
}


GH.tpl.plancontroller.renderVersionPanelTipsyExpand = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml("Show versions panel") + '<b>' + soy.$$escapeHtml("Use versions to keep track of code releases.") + '</b>';
};
if (goog.DEBUG) {
  GH.tpl.plancontroller.renderVersionPanelTipsyExpand.soyTemplateName = 'GH.tpl.plancontroller.renderVersionPanelTipsyExpand';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/PlanControls.js' */
define("jira-agile/rapid/ui/plan/plan-controls",["require"],function(e){var i=e("jquery"),n={};return n.rapidViewConfig={},n.quickfilters=void 0,n.searchFilter=void 0,n.init=function(){n.quickfilters=new GH.Components.QuickFilters("planQuickFilters"),n.searchFilter=new GH.Components.SearchFilter(GH.BacklogController.executeSearch)},n.setRapidViewConfig=function(e){n.rapidViewConfig=e,n.quickfilters.setRapidViewConfig(e)},n.renderControls=function(){var e=i("#ghx-controls-plan");e.empty(),e.append(n.quickfilters.renderQuickFilters({mode:"plan"})),e.append(n.searchFilter.render()),GH.PresentationMode.render(!0,e),GH.ViewActions.setMode(GH.ViewActions.PLAN_MODE)},n.stopEdits=function(){n.searchFilter.stopEdit(i("#ghx-controls-plan"))},n.resizeQuickFilters=function(){n.quickfilters.quickExpanderLayout({mode:"plan"})},n});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/PlanUrlState.js' */
define("jira-agile/rapid/ui/plan/plan-url-state",["require"],function(e){"use strict";var i=e("underscore"),l=e("jira-agile/rapid/ui/plan/plan-controller"),r=e("jira-agile/rapid/ui/plan/plan-controls"),s=(e("jira-agile/rapid/ui/plan/backlog-selection-controller"),{});return s.self="PlanUrlState",s.isApplicable=function(e){return"plan"==e.mode},s.getNormalizedFromUrl=function(e,i){i["plan.selectedIssue"]=GH.RapidBoard.UrlState.normalizeStringParam(e.selectedIssue,null),i.quickFilter=GH.RapidBoard.UrlState.normalizeNumberArrayParam(e.quickFilter),i.versions="visible"===GH.RapidBoard.UrlState.normalizeStringParam(e.versions,""),i.epics="visible"===GH.RapidBoard.UrlState.normalizeStringParam(e.epics,""),i["plan.selectedEpic"]=GH.RapidBoard.UrlState.normalizeStringParam(e.selectedEpic,null),i["plan.selectedVersion"]=GH.RapidBoard.UrlState.normalizeStringParam(e.selectedVersion,null)},s.toUrl=function(e,l){i.isNull(e["plan.selectedIssue"])||(l.selectedIssue=e["plan.selectedIssue"]),e.quickFilter.length>0&&(l.quickFilter=e.quickFilter),e.versions&&(l.versions="visible"),e.epics&&(l.epics="visible"),i.isNull(e["plan.selectedEpic"])||(l.selectedEpic=e["plan.selectedEpic"]),i.isNull(e["plan.selectedVersion"])||(l.selectedVersion=e["plan.selectedVersion"])},s.getNormalizedFromInternal=function(e){l.init(),e["plan.selectedIssue"]=GH.BacklogSelectionController.getSelectedIssueKey(),e.quickFilter=r.quickfilters.getActiveQuickFilters(),e.versions=l.isVersionsColumnVisiblePersisted(),e.epics=l.isEpicsColumnVisiblePersisted(),e["plan.selectedEpic"]=GH.EpicController.getFilteredEpicKey(),e["plan.selectedVersion"]=GH.VersionController.getFilteredVersionId()},s.updateInternalFromNormalized=function(e){l.init(),GH.BacklogSelectionController.setIssueFromUrlState(e["plan.selectedIssue"]),r.quickfilters.setActiveQuickFilters(e.quickFilter),l.setVersionsColumnVisible(e.versions),l.setEpicsColumnVisible(e.epics),GH.EpicController.setFilteredEpicKey(e["plan.selectedEpic"],!0),GH.VersionController.setFilteredVersionId(e["plan.selectedVersion"],!0)},s});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/PlanRankController.js' */
define("jira-agile/rapid/ui/plan/plan-rank-controller",["require"],function(e){"use strict";var r,s=e("underscore"),a=e("jquery"),n=e("jira-agile/rapid/global-events"),i=e("jira-agile/rapid/ui/plan/backlog-selection-controller"),t=e("jira-agile/rapid/ui/plan/backlog-model"),l=e("jira-agile/rapid/ui/plan/backlog-model2");n.on("pre-initialization",function(){r=e("jira-agile/rapid/ui/plan/backlog-controller")});var u={};return u.init=function(){r.registerIssueCreatedCallback("rankIssues",u.rankCreatedIssues)},u.rankCreatedIssues=function(e){var r=i.getSelectedIssuesInOrder();return r&&r.length>0?u.rankCreatedIssuesBySelection(e,r):u.rankCreatedIssuesByVisibility(e)},u.rankCreatedIssuesBySelection=function(e,r){var a,n,i=s.last(r),o=t.findModelWithIssue(s.first(r));if(o&&l.isBacklogModel(o)?(a=i,n=!1):(a=t.getBacklogModel2().getIssueList().getFirstRankableIssueKeyInColumn(null,!0),n=!0),a)return u.rankCreatedIssuesAgainstIssue(e,a,n)},u.rankCreatedIssuesByVisibility=function(e){function r(e){var r=e.offset().top;return r>l&&r<t+l}var s,n=a(".ghx-backlog-group"),i=a(".js-issue",n),t=a(document).height(),l=a(document).scrollTop(),o=i.filter(function(){var e=a(this);return r(e)});if(s=o.length>0?o.first():i.first(),s&&1===s.length){var d=s.attr("data-issue-key");return u.rankCreatedIssuesAgainstIssue(e,d,!0)}},u.rankCreatedIssuesAgainstIssue=function(e,r,a){var n=s.pluck(e,"issueKey"),i=n.reverse();return GH.RankController.rankIssues(t.getRankCustomFieldId(),i,a?r:null,a?null:r,{deferErrorHandling:!0})},u});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/BacklogModel.js' */
define("jira-agile/rapid/ui/plan/backlog-model2",["require"],function(e){var t=e("jira-agile/rapid/ui/plan/issue-list-model"),s=function(e,s){this.column=s,this.issueList=new t("backlog",e,GH.VersionController.getVersionModel())};return s.isBacklogModel=function(e){return"backlog"===e.getType()},s.prototype.getIssueList=function(){return this.issueList},s.prototype.getId=function(){return"backlog"},s.prototype.getType=function(){return"backlog"},s.prototype.getColumn=function(){return this.column},s}),define("jira-agile/rapid/ui/plan/backlog-model",["require"],function(e){"use strict";function t(e){var t=e.issues,s=e.sprints,n={};r.each(s,function(e){r.each(e.issuesIds,function(t){n[t]=e.id})});var i={};r.each(s,function(e){i[e.id]=[]});var u=[];r.each(t,function(e){GH.ExtraFieldsHelper.prepareExtraFields(e.extraFields);var t=n[e.id];t?i[t].push(e):u.push(e)});var l=[];r.each(s,function(e){var t=new a(e,i[e.id]);l.push(t)});var o=new GH.BacklogModel2(u,e.backlogColumn);d.sprintModels=l,d.backlogModel2=o}function s(e){var t=n(e.issues,[].concat(r.toArray(e.issues)).concat(r.toArray(e.missingParents))),s=e.backlogColumn.statusIds;if(e.selectedForDevelopmentColumn)var i=e.selectedForDevelopmentColumn.statusIds;var u=[],l=[];r.each(t,function(e){GH.ExtraFieldsHelper.prepareExtraFields(e.extraFields),s.indexOf(e.statusId)!==-1?u.push(e):i&&i.indexOf(e.statusId)!==-1&&l.push(e)}),d.backlogModel2=new GH.BacklogModel2(u,e.backlogColumn),e.selectedForDevelopmentColumn?d.sprintModels=[new a({id:-1,name:e.selectedForDevelopmentColumn.name,state:"FUTURE",column:e.selectedForDevelopmentColumn},l)]:d.sprintModels=[]}function n(e,t){var s=r.indexBy(t,"key");return e.map(function(e){return"string"==typeof e.parentKey&&e.parentKey.length>0?r.defaults({parent:s[e.parentKey]},e):e})}var i,r=e("underscore"),u=e("jira-agile/rapid/global-events"),a=e("jira-agile/rapid/ui/plan/sprint-model"),l=e("jira-agile/rapid/ui/plan/plan-issue-list-filtering"),o=e("jira-agile/rapid/ui/plan/issue-list-model");u.on("pre-initialization",function(){i=e("jira-agile/rapid/ui/plan/sprint-controller")});var d={};return d.rankCustomFieldId=void 0,d.estimationStatistic={},d.trackingStatistic={},d.sprintModels=[],d.backlogModel2=null,d.missingParentsByKey={},d.setData=function(e){d.calculateIssueLists(e),d.hasBulkChangePermission=e.hasBulkChangePermission,e.missingParents&&(d.missingParentsByKey=r.indexBy(e.missingParents,"key"))},d.calculateIssueLists=function(e){GH.RapidBoard.State.isScrumBoard()?t(e):s(e)},d.addNewSprint=function(e){var t=new a(e,[]);d.sprintModels.push(t)},d.removeSprintAndMoveIssues=function(e){for(var t,s,n=d.getAllModels(),i=0;i<n.length;i++){var u=n[i];if(a.isSprintModel(u)&&u.getSprintId()===e){t=u,s=n[i+1];break}}var l=!1;if(t){var o=t.getIssueList().getIssuesInOrder();if(!r.isEmpty(o)){var c=s.getIssueList();c.prependIssues(o),l=GH.BacklogModel2.isBacklogModel(s)}d.sprintModels=r.reject(d.sprintModels,function(t){return t.getSprintId()===e})}return l},d.updateDataForSprint=function(e,t){var s=d.getSprintModel(e);return s&&s.setSprintData(t),s},d.moveSprintUp=function(e){return d._swapSprint(e,-1)},d.moveSprintDown=function(e){return d._swapSprint(e,1)},d._swapSprint=function(e,t){var s=GH.Util.indexOf(d.sprintModels,function(t){if(t.getSprintId()===e)return t});if(GH.Util.swapArrayItems(d.sprintModels,s,s+t)){var n=d.sprintModels[s];return n.getSprintId()}return null},d.getSprintModels=function(){return d.sprintModels},d.getActiveSprintModels=function(){return r.filter(d.sprintModels,function(e){return"ACTIVE"===e.getSprintData().state})},d.getFutureSprintModels=function(){return r.filter(d.sprintModels,function(e){return"FUTURE"===e.getSprintData().state})},d.getSprintModel=function(e){return r.find(d.sprintModels,function(t){return e===t.getSprintId()})},d.findTargetModel=function(e){var t=e||"backlog";return r.find(d.getAllModels(),function(e){return t===e.getId()})},d.getBacklogModel2=function(){return d.backlogModel2},d.getAllModels=function(){var e=d.getSprintModels(),t=d.getBacklogModel2();return r.flatten([e,t],!0)},d.getAllIssueListsNew=function(){var e=r.reject(d.getAllModels(),r.isEmpty);return r.map(e,function(e){return e.getIssueList()})},d.getAllIssuesWithMissingParents=function(){var e=d.getAllModels().reduce(function(e,t){return r.extend({},e,t.issueList.getAllIssues())},{});return r.extend({},e,d.missingParentsByKey)},d.findModelWithIssue=function(e){var t=null;return r.any(d.getAllModels(),function(s){return!!s.getIssueList().isIssueValid(e)&&(t=s,!0)}),t},d.findModelsWithFakeParent=function(e){return r.filter(d.getAllModels(),function(t){return!t.issueList.isIssueValid(e)&&r.any(t.issueList.data.issueByKey,function(t){return t.parentKey===e})})},d.getNextModel=function(e){for(var t=d.getAllModels(),s=0;s<t.length;s++)if(e.getId()===t[s].getId()){if(s+1<t.length)return t[s+1];break}return null},d.calculateRankingDataForSprintMarkerMove=function(e,t,s){var n=d._calculateIncludedModelsData(e,t);if(e===t){var i=[];if(i=s?n.draggedSprintModel.getIssueList().getVisibleIssuesDataAfterKey(s):n.draggedSprintModel.getIssueList().getAllVisibleIssuesData(),!r.isEmpty(i)){var u=d.getNextModel(n.draggedSprintModel);if(u){var l=a.isSprintModel(u)?u.getSprintId():null,o=r.first(u.getIssueList().getIssuesInOrder()),c=o?o.key:null,g=r.map(i,function(e){return e.key});if(!r.isEmpty(g))return{sprintId:l,nextRankableId:c,issueKeys:g}}}}else{var f=d.getIssueDataForVisisbleIssuesInModelsUpToIssueKey(n.otherAffectedModels,t,s),l=e,p=r.last(n.draggedSprintModel.getIssueList().getIssuesInOrder()),I=p?p.key:null,g=r.map(f,function(e){return e.key});if(!r.isEmpty(g))return{sprintId:l,prevRankableId:I,issueKeys:g}}return null},d.calculateTemporaryDataForSprintWithMarker=function(e,t,s){var n=d._calculateIncludedModelsData(e,t),i=n.draggedSprintModel.getIssueList().getAllInvisibleIssuesData(),u=d.getIssueDataForVisisbleIssuesInModelsUpToIssueKey(n.models,t,s),a=r.flatten([i,u],!0),l=r.map(i,function(e){return e.key}),c=new o("fakesprint-"+e,a,GH.VersionController.getVersionModel());return c.setHiddenBySearchIssues(l),{issueList:c,modelsData:n}},d._calculateIncludedModelsData=function(e,t){for(var s=d.getSprintModels(),n=!1,r={draggedSprintModel:null,otherAffectedModels:[],models:[]},u=0;u<s.length;u++){var a=s[u],l=a.getSprintId();if(l==e?(r.draggedSprintModel=a,r.models.push(a),n=!0):n&&i.isTwixieOpen(l)&&(r.otherAffectedModels.push(a),r.models.push(a)),l==t)break}return t||(r.otherAffectedModels.push(d.getBacklogModel2()),r.models.push(d.getBacklogModel2())),r},d.getIssueDataForVisisbleIssuesInModelsUpToIssueKey=function(e,t,s){for(var n=[],i=0;i<e.length;i++){var u=e[i],l=u.getIssueList(),o=a.isSprintModel(u);o&&u.getSprintId()===t||!o&&!t?s&&n.push(l.getVisibleIssuesDataBeforeIncludingKey(s)):n.push(l.getAllVisibleIssuesData())}return n=r.flatten(n,!0)},d.reorderIssuesInModel=function(e,t){var s=d.findTargetModel(t);if(s){var n=s.getIssueList(),i=n.getAllIssues();return n.setOrder(e.filter(function(e){return i[e]})),[s]}return[]},d.moveIssuesNew=function(e,t,s,n){if(0!==e.length){var i=[],u=[],a=t||"backlog",l=null;if(r.each(d.getAllModels(),function(t){if(t.getId()===a)l=t;else{var s=t.getIssueList(),n=s.removeIssues(e);r.isEmpty(n)||(u.push(t),i.push(n))}}),i=r.flatten(i,!0),l){var o=l.getIssueList();o.addIssues(i),o.reorderIssues(e,s,n),u.push(l)}return u}},d.hasAnySubtasks=function(e){if(!e)throw"Selection of issueKeys as an {array} must be provided.";return e.some(function(e){return this.isSubtask(e)}.bind(this))},d.afterIssueUpdate=function(e){var t=this;if(this.isSubtask(e.key)){if("string"==typeof e.parentKey){var s=this.findModelWithIssue(e.key).getIssueList(),n=s.getIssueData(e.key),i="string"==typeof n.parentKey&&this.getAllIssuesWithMissingParents()[n.parentKey];r.isObject(i)&&s.updateIssue(r.extend({},n,{parent:i}))}}else{var u=r.chain(this.getAllIssuesWithMissingParents()).filter(function(e){return t.isSubtask(e.key)}).filter(function(t){return t.parentKey===e.key}).value();u.forEach(function(t){t.parent=e})}},d.filterOnlySubtasks=function(e){return e?e.filter(function(e){return this.isSubtask(e)}.bind(this)):[]},d.isSubtask=function(e){var t=this.getIssueData(e);return!(!t||!t.parentKey)},d.isIssueSelectable=function(e){var t=d.getAllIssueListsNew();return r.any(t,function(t){return t.isIssueValid(e)&&t.isIssueVisible(e)})},d.getIssueIndex=function(e){var t=-1,s=d.getAllIssueListsNew();return r.any(s,function(s){return!!s.isIssueValid(e)&&(t=s.getIssueIndex(e),!0)}),t},d.canAddToSelection=function(e,t){var s=d.getAllIssueListsNew();return r.any(s,function(s){return s.isIssueValid(t)&&s.canAddToSelection(e,t)})},d.getIssueRange=function(e,t){var s=[],n=d.getAllIssueListsNew();return r.any(n,function(n){return!(!n.isIssueValid(e)||!n.isIssueValid(t))&&(s=n.getIssueRange(e,t),!0)}),s},d.getNextIssueKey=function(e){for(var t=d.getAllModels(),s=0;s<t.length;s++){var n=t[s];if(n.getIssueList().isIssueValid(e)){var r=!1,u=a.isSprintModel(n),l=i.isTwixieOpen(n.getId());if((u&&l||!u)&&(r=n.getIssueList().getNextIssueKey(e)))return r;for(var o=s+1;o<t.length;o++){var c=t[o];if(u=a.isSprintModel(c),l=i.isTwixieOpen(c.getId()),(!u||l)&&(r=c.getIssueList().getFirstVisibleIssueKey()))break}return r}}},d.getPreviousIssueKey=function(e){for(var t=d.getAllModels(),s=0;s<t.length;s++){var n=t[s];if(n.getIssueList().isIssueValid(e)){var r=!1,u=a.isSprintModel(n),l=i.isTwixieOpen(n.getId());if((u&&l||!u)&&(r=n.getIssueList().getPreviousIssueKey(e)))return r;for(var o=s-1;o>=0;o--){var c=t[o];if(u=a.isSprintModel(c),l=i.isTwixieOpen(c.getId()),(!u||l)&&(r=c.getIssueList().getLastVisibleIssueKey()))break}return r}}},d.getFirstRankableIssueKeyInColumn=function(e,t){var s=null!=e,n=s?[e]:[],i=!1,u=d.getAllIssueListsNew();return r.any(u,function(r){return!(s&&!r.isIssueValid(e))&&(i=r.getFirstRankableIssueKeyInColumn(n,t),!0)}),i},d.getLastRankableIssueKeyInColumn=function(e,t){var s=null!=e,n=s?[e]:[],i=!1,u=d.getAllIssueListsNew();return r.any(u,function(r){return!(s&&!r.isIssueValid(e))&&(i=r.getLastRankableIssueKeyInColumn(n,t),!0)}),i},d.getBestFitSelectionAfterRank=function(e){var t=d.findModelWithIssue(r.first(e));return t?t.getIssueList().getBestFitSelectionAfterRank(e):null},d.setRankCustomFieldId=function(e){d.rankCustomFieldId=e},d.setEstimationStatistic=function(e){d.estimationStatistic={isEnabled:e.isEnabled,typeId:e.typeId,name:e.name,renderer:e.renderer}},d.setTrackingStatistic=function(e){d.trackingStatistic={isEnabled:e.isEnabled,typeId:e.typeId,name:e.name,renderer:e.renderer}},d.isRankable=function(){return!r.isUndefined(d.rankCustomFieldId)},d.getRankCustomFieldId=function(){return d.rankCustomFieldId},d.getHiddenBySearchIssues=function(){var e={};return r.each(d.getAllIssueListsNew(),function(t){var s=t.getHiddenBySearchIssues();e=r.extend(e,s)}),e},d.getIssueData=function(e){return d._anyIssueList(e,function(t){return t.getIssueData(e)})},d.getIssueDataForId=function(e){return d._anyIssueList(e,function(t){return t.getIssueDataForId(e)})},d.getIssueIdForKey=function(e){return d._anyIssueList(e,function(t){return t.getIssueIdForKey(e)})},d._anyIssueList=function(e,t){var s=null;return r.any(d.getAllIssueListsNew(),function(n){return!!n.isIssueValid(e)&&(s=t(n),!0)}),s},d.isIssueVisible=function(e){var t=d.findModelWithIssue(e);if(t){var s=t.getIssueList();return s.isIssueValid(e)&&s.isIssueVisible(e)}return!1},d.hasAnyIssueInvisible=function(e){return e.some(function(e){return!d.isIssueVisible(e)})},d.canManageSprints=function(){return d._canManageSprints},d.setCanManageSprints=function(e){d._canManageSprints=e},d.canCreateIssue=function(){return d._canCreateIssue},d.setCanCreateIssue=function(e){d._canCreateIssue=e},d.supportsPages=function(){return d._supportsPages},d.setSupportsPages=function(e){d._supportsPages=e},d.updateFiltering=function(){var e=d.getAllIssueListsNew();return l.applyToIssueLists(e)},d.getEpicsFilteredForVersion=function(e){var t=!1;r.isString(e)&&(l.isNoneVersionFilterId(e)?t=!0:e=parseInt(e,10));var s=GH.EpicController.getEpicModel().getEpicList();if(0===s.getIssueCount())return[];var n=s.getOrder(),i=[];return r.each(d.getAllIssueListsNew(),function(s){if(n.length>0){var u=s.getAllIssues();r.each(u,function(s){if(s.epic&&r.contains(n,s.epic)){var u=!1;if(t&&r.isEmpty(s.fixVersions)?u=!0:!t&&r.contains(s.fixVersions,e)&&(u=!0),u&&(i.push(s.epic),n=r.without(n,s.epic),0===n.length))return!1}})}}),{filtered:n,unfiltered:i}},d.removeEpicFromIssues=function(e){var t=[];return r.each(e,function(e){var s=d.getIssueData(e);s&&s.epic&&(delete s.epic,t.push(s))}),t},d});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/SprintController.js' */
define("jira-agile/rapid/ui/plan/sprint-controller",["require"],function(t){"use strict";var e,i,n=t("jquery"),r=t("jira-agile/rapid/global-events"),a=t("jira-agile/rapid/analytics-tracker"),s=t("jira/analytics"),o=t("jira-agile/rapid/ui/plan/sprint-view"),p=t("jira-agile/rapid/ui/plan/backlog-model");r.on("pre-initialization",function(){e=t("jira-agile/rapid/ui/plan/backlog-controller"),i=t("jira-agile/rapid/ui/plan/BacklogView")});var d={};return d.analytics=new a("gh.rapidboard.sprint.controller"),d.activeSprintInlineEdits=void 0,d.init=function(){o.init(),n(GH).bind(GH.Components.EVENT_SPRINT_UPDATED,d.handleSprintUpdated),d.initInlineEdits()},d.initInlineEdits=function(){var t=function(t){var e=p.getSprintModel(t);return e?e.getSprintData():null};d.activeSprintInlineEdits=new GH.Components.ActiveSprintInlineEdit(t),d.activeSprintInlineEdits.initializeInlineEdits()},d.handleSprintUpdated=function(t,e){var n=p.updateDataForSprint(e.id,e);n&&i.redrawChangedModel(n)},d.addSprint=function(){var t=n(this);GH.Util.UI.isDisabled(t)||(GH.Util.UI.ariaDisable(t),GH.Ajax.post({url:"/sprint/"+e.rapidViewData.id}).done(function(t){d.analytics.trigger("addsprint");var e=t.success;p.addNewSprint(e),i.updateSprintsAfterAddRemove()}).always(function(){GH.Util.UI.ariaEnable(t)}))},d.openStartSprintDialog=function(t){var e=GH.RapidBoard.State.getRapidViewId(),i=p.getSprintModel(t),n=i.getIssueList();if(!(n.getAllIssues().length<1)){var r=n.getNumVisibleIssues();GH.Dialogs.StartSprintDialog.showDialog(e,t,r)}},d.deleteSprint=function(t){var e=GH.RapidBoard.State.getRapidViewId(),i=p.getSprintModel(t);GH.ConfirmDialog.create("ghx-remove-planned-sprint-confirm-dialog",{contentEscaping:!1,content:AJS.format("Are you sure you want to delete sprint {0}?","<b>"+AJS.escapeHTML(String(i.getName()))+"</b>"),header:"Delete sprint",onConfirmFn:function(){d.doDeleteSprint(e,t)}}).show()},d.doDeleteSprint=function(t,e){var n=p.removeSprintAndMoveIssues(e);n?i.draw():i.updateSprintsAfterAddRemove(),d.analytics.trigger("deletesprint"),GH.Ajax.del({url:"/sprint/"+e+"?rapidViewId="+t}).done(function(){JIRA.trace("gh.sprint.deleted")})},d.addGoal=function(t){var e=n('.js-sprint-container[data-sprint-id="'+t+'"] .ghx-sprint-goal');e.removeClass("ghx-hidden"),n(".js-edit-sprintGoal-trigger",e).click()},d.isTwixieOpen=function(t){return"open"===d._getTwixieState(t)},d.toggleTwixie=function(t){var e=d.isTwixieOpen(t);d.setTwixieOpen(t,!e)},d.setTwixieOpen=function(t,e){var i=e?"open":"closed";d._setTwixieState(t,i),o.updateTwixieState(t)},d._setTwixieState=function(t,e){var i="sprintTwix-"+t;GH.BoardState.setPerViewValue(i,e)},d._getTwixieState=function(t){var e="sprintTwix-"+t;return GH.BoardState.getPerViewValue(e,"open")},d.moveSprintUp=function(t){d._moveSprint(t,p.moveSprintUp)},d.moveSprintDown=function(t){d._moveSprint(t,p.moveSprintDown)},d._moveSprint=function(t,e){var n=e(t);null!=n&&(i.updateSprintsAfterAddRemove(),GH.Ajax.put({url:"/sprint/"+t+"/swap",data:{otherSprintId:n}}).done(function(){d.analytics.trigger("movesprint")}).fail(function(){e(n),i.updateSprintsAfterAddRemove()}))},d.triggerAnalytics=function(t){if(1===t.changes.length){var e,i=t.changes[0],n=i.currentSprint,r=i.targetSprint;n&&r&&"FUTURE"===n.state&&"FUTURE"===r.state&&(e="movebetweenfuturesprints"),n&&r&&"ACTIVE"===n.state&&"ACTIVE"===r.state&&(e="movebetweenactivesprints"),n&&r&&"FUTURE"===n.state&&"ACTIVE"===r.state&&(e="movefromfuturetoactivesprint"),n&&r&&"ACTIVE"===n.state&&"FUTURE"===r.state&&(e="movefromactivetofuturesprint"),!n&&r&&"ACTIVE"===r.state&&(e="addtoactivesprint"),!n&&r&&"FUTURE"===r.state&&(e="addtofuturesprint"),n&&!r&&"FUTURE"===n.state&&(e="removefromfuturesprint"),n&&!r&&"ACTIVE"===n.state&&(e="removefromactivesprint"),e&&d.analytics.trigger(e)}},d.triggerAnalyticsIssuesDnD=function(t){t.changes.forEach(function(t){var i=t.currentSprint?t.currentSprint.id:-1,n=t.targetSprint?t.targetSprint.id:-1;s.send({name:"jira-software.scrum.plan.issuecard.dnd",properties:{issues:t.issueKeys.length+t.doneIssueKeys.length,boardId:e.rapidViewData.id,currentSprintId:i,targetSprintId:n}})})},d});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/SprintModel.js' */
define("jira-agile/rapid/ui/plan/sprint-model",["require"],function(t){"use strict";var i=t("underscore"),n=t("jira-agile/rapid/ui/plan/issue-list-model"),e=function(t,i){this.sprintData=t,this.issueList=new n("sprint-"+t.id,i,GH.VersionController.getVersionModel())};return e.isSprintModel=function(t){return"sprint"===t.getType()},e.prototype.getSprintData=function(){return this.sprintData},e.prototype.setSprintData=function(t){this.sprintData=t},e.prototype.getIssueList=function(){return this.issueList},e.prototype.getId=function(){return this.sprintData.id},e.prototype.getType=function(){return"sprint"},e.prototype.getName=function(){return this.sprintData.name},e.prototype.getSprintId=function(){return this.sprintData.id},e.prototype.isFutureSprint=function(){return"FUTURE"===this.sprintData.state},e.prototype.isActiveSprint=function(){return"ACTIVE"===this.sprintData.state},e.prototype.getLinkedPagesCount=function(){var t=this.sprintData.linkedPagesCount,n=GH.PageIssueLinksModel.list(this.sprintData.id).length,e=t;return(!i.isNumber(t)||t<n)&&(e=n),e},e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/AssignedWorkDialog.js' */
define("jira-agile/rapid/ui/plan/assigned-work-dialog",["require"],function(t){"use strict";var i=t("underscore"),e=t("jira/dialog/form-dialog"),a=e.extend({_getDefaultOptions:function(){return i.extend(this._super(),{content:function(t){var i=GH.tpl.assignedWorkDialog.renderDialogContents({assignedWorkStats:this.options.assignedWorkStats,sprintName:this.options.sprintName,estimateStatisticName:this.options.estimateStatisticName,trackingStatisticName:this.options.trackingStatisticName});t(i)}})}});return a});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/AssignedWorkDialog.soy' */
// This file was automatically generated from AssignedWorkDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.assignedWorkDialog.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.assignedWorkDialog == 'undefined') { GH.tpl.assignedWorkDialog = {}; }


GH.tpl.assignedWorkDialog.renderDialogContents = function(opt_data, opt_ignored) {
  var output = '<h2>' + soy.$$escapeHtml("Workload by assignee") + ' - ' + soy.$$escapeHtml(opt_data.sprintName) + '</h2><div class="form-body ghx-assigned-work-table"><table class="aui"><thead><tr><th>' + soy.$$escapeHtml("Assignee") + '</th><th class="ghx-right">' + soy.$$escapeHtml("Issues") + '</th>' + ((opt_data.assignedWorkStats.all.totalEstimateText != null) ? '<th class="ghx-right">' + soy.$$escapeHtml(opt_data.estimateStatisticName) + '</th>' : '') + ((opt_data.assignedWorkStats.all.totalTrackingEstimateText != null) ? '<th class="ghx-right">' + soy.$$escapeHtml(opt_data.trackingStatisticName) + '</th>' : '') + '</tr></thead><tbody>' + GH.tpl.assignedWorkDialog.renderTableRow({assignedWorkEntry: opt_data.assignedWorkStats.unassigned, noAssigneeText: '' + soy.$$escapeHtml("Unassigned")});
  var assignedWorkEntryList27 = opt_data.assignedWorkStats.assigned;
  var assignedWorkEntryListLen27 = assignedWorkEntryList27.length;
  for (var assignedWorkEntryIndex27 = 0; assignedWorkEntryIndex27 < assignedWorkEntryListLen27; assignedWorkEntryIndex27++) {
    var assignedWorkEntryData27 = assignedWorkEntryList27[assignedWorkEntryIndex27];
    output += GH.tpl.assignedWorkDialog.renderTableRow({assignedWorkEntry: assignedWorkEntryData27});
  }
  output += '</tbody><tfoot>' + GH.tpl.assignedWorkDialog.renderTableRow({assignedWorkEntry: opt_data.assignedWorkStats.all, noAssigneeText: '' + soy.$$escapeHtml("Total")}) + '</tfoot></table></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.assignedWorkDialog.renderDialogContents.soyTemplateName = 'GH.tpl.assignedWorkDialog.renderDialogContents';
}


GH.tpl.assignedWorkDialog.renderTableRow = function(opt_data, opt_ignored) {
  return '<tr><td>' + ((opt_data.noAssigneeText) ? '<span class="ghx-no-avatar">' + soy.$$escapeHtml(opt_data.noAssigneeText) + '</span>' : GH.tpl.avatar.renderIssueAvatar({issue: opt_data.assignedWorkEntry.issues[0]}) + soy.$$escapeHtml(opt_data.assignedWorkEntry.assigneeName)) + '</td><td class="ghx-right">' + soy.$$escapeHtml(opt_data.assignedWorkEntry.issues.length) + '</td>' + ((opt_data.assignedWorkEntry.totalEstimateText != null) ? '<td class="ghx-right">' + soy.$$escapeHtml(opt_data.assignedWorkEntry.totalEstimateText) + '</td>' : '') + ((opt_data.assignedWorkEntry.totalTrackingEstimateText != null) ? '<td class="ghx-right">' + soy.$$escapeHtml(opt_data.assignedWorkEntry.totalTrackingEstimateText) + '</td>' : '') + '</tr>';
};
if (goog.DEBUG) {
  GH.tpl.assignedWorkDialog.renderTableRow.soyTemplateName = 'GH.tpl.assignedWorkDialog.renderTableRow';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/SprintView.js' */
define("jira-agile/rapid/ui/plan/sprint-view",["require"],function(t){"use strict";var i,a,n=t("underscore"),e=t("jquery"),r=t("jira-agile/rapid/global-events"),s=t("jira-agile/rapid/analytics-tracker"),o=t("jira-agile/rapid/ui/plan/sprint-model"),l=t("jira-agile/rapid/ui/plan/assigned-work-dialog"),d=t("jira-agile/rapid/ui/plan/backlog-model"),p=t("jira-agile/rapid/ui/plan/backlog-statistics"),g=t("jira-agile/rapid/ui/plan/issue-list-util"),c=t("jira-agile/rapid/ui/plan/subtasks-expanding-controller"),u=t("jira/featureflags/feature-manager"),S=t("jira-help-tips/feature/help-tip"),h=t("jira/util/formatter"),k=t("wrm/data"),f="com.atlassian.jira.agile.darkfeature.sprint.goal";r.on("pre-initialization",function(){i=t("jira-agile/rapid/ui/plan/sprint-controller"),a=t("jira-agile/rapid/ui/plan/backlog-controller")});var m={};return m.sprintGoalOnboardingState=k.claim("com.pyxis.greenhopper.jira:wrm-data.sprint-goal-onboarding")||{},m._sprintGoalOnboardingDialog=null,m.init=function(){var t=AJS.$(document);t.on("click",".js-sprint-start",m.handleStartSprintClick),t.on("click",".js-sprint-container .js-view-entity-pages",m.handleViewSprintLinkedPages),t.on("click",".js-assigned-work-dialog-trigger",m.handleViewAllAssignedWork)},m._initSprintGoalOnboardingHandlers=n.once(function(){GH.RapidBoard.ViewController.on("before:navigate",function(){m._hideSprintGoalOnboardingDialog()})}),m._hideSprintGoalOnboardingDialog=function(){m._sprintGoalOnboardingDialog&&(m._sprintGoalOnboardingDialog.hide(),m._sprintGoalOnboardingDialog=null)},m.handleStartSprintClick=function(t){if(!AJS.$(t.target).hasClass("disabled")){var a=m.getSprintIdForElement(t.target);i.openStartSprintDialog(a)}},m.handleViewSprintLinkedPages=function(t){var i=AJS.$(t.target),a=m.getSprintIdForElement(i);GH.LinkedPagesController.showDialogForSprint(GH.LinkedPagesController.PLAN,a,i)},m.handleDeleteSprintClick=function(t){if(!AJS.$(t.target).hasClass("disabled")){var a=m.getSprintIdForElement(t.target);i.deleteSprint(a)}},m.handleViewAllAssignedWork=function(t){t.preventDefault();var i=m.getSprintIdForElement(t.target),a=d.getSprintModel(i),n="medium";d.trackingStatistic.isEnabled&&(n="large");var e=new l({id:"assigned-work-dialog",assignedWorkStats:p.getAssignedWorkStats(a.getIssueList()),sprintName:a.getName(),estimateStatisticName:d.estimationStatistic.name,trackingStatisticName:d.trackingStatistic.name,widthClass:n});e.show(),GH.Tooltip.hide(".js-assigned-work-dialog-trigger"),new s("gh.assignedWork.dialog").trigger("show")},m.registerTwixies=function(){AJS.$("#ghx-backlog").undelegate(".ghx-backlog-container .ghx-expander","click.sprintTwix"),AJS.$("#ghx-backlog").delegate(".ghx-backlog-container .ghx-expander","click.sprintTwix",m.handleTwixieClick)},m.handleTwixieClick=function(t){var a=AJS.$(this).closest(".ghx-backlog-container"),n=a.attr("data-sprint-id");i.toggleTwixie(n)},m.updateTwixieState=function(t){var a=i.isTwixieOpen(t),n=AJS.$('.js-sprint-container[data-sprint-id="'+t+'"]'),e=n.find(".ghx-backlog-header"),r=e.parent(".sticky-wrapper");a?n.removeClass("ghx-closed").addClass("ghx-open"):(n.removeClass("ghx-open").addClass("ghx-closed"),e.hasClass("stuck")&&r.get(0).scrollIntoView(!0)),GH.BacklogView.adjustStickyHeader()},m.updateSprintViewForModel=function(t){m._updateSprint(t)},m.renderAllSprints=function(t){var a=d.getSprintModels(),r=e("#ghx-backlog").find(".ghx-sprint-group").empty();n.each(a,function(a,n){var e=AJS.$(GH.tpl.sprintview.renderSprintContainer({sprintData:a.getSprintData(),isMetaExpanded:i.isTwixieOpen(a.getSprintId()),isKanbanColumn:GH.RapidBoard.State.isKanbanBoard()})),s=m._renderSprintContent(a,t);e.append(s),r.append(e),0===n&&m.shouldDisplaySprintGoalOnboarding(a)&&(m._initSprintGoalOnboardingHandlers(),m.displaySprintGoalOnboarding(a.getSprintId()))}),m.enableTooltips()},m.shouldDisplaySprintGoalOnboarding=function(t){var i=u.isFeatureEnabled(f),a=t.getSprintData()&&t.getSprintData().goal;return!(!i||m.sprintGoalOnboardingState.isSprintGoalOnboardingClosed||a)},m.displaySprintGoalOnboarding=function(t){if(!(!n.isFinite(t)||t<0||m._sprintGoalOnboardingDialog)){var i=e("#ghx-backlog").find(".ghx-sprint-group"),a=i.find('.js-sprint-container[data-sprint-id="'+t+'"]'),r=a.find(".js-sprint-actions-trigger");if(r.length){var s=m._sprintGoalOnboardingDialog=new S({title:"Set your goals",bodyHtml:"Let your team know what you want to achieve by adding a goal for this sprint.",anchor:r,showCloseButton:!0,closeButtonText:"OK, got it",callbacks:{init:function(){s.view.$el.find(".helptip-close").on("click",function(){return GH.Ajax.post({url:"/xboard/plan/sprintGoalOnboarding/closeSprintGoalOnboarding"}).done(function(){m.sprintGoalOnboardingState.isSprintGoalOnboardingClosed=!0})})}}});i.on("click",".js-sprint-actions-trigger",function(){m._hideSprintGoalOnboardingDialog()}),s.show({force:!0})}}},m._updateSprint=function(t){GH.Logger.log("Redrawing sprint "+t.getSprintId(),GH.Logger.Contexts.ui);var i=AJS.$('.js-sprint-container[data-sprint-id="'+t.getSprintId()+'"]');if(0!==i.length){var n=a.calculateIssueRenderData(),e=m._renderSprintContent(t,n);i.empty().append(e),m.enableTooltips()}},m._renderSprintContent=function(t,i){var a=m.calculateSprintIssueListStats(t,t.getIssueList()),n=t.getSprintData(),e=m._getManageSprintData(n),r=GH.RapidBoard.State.isKanbanBoard()?n.column.min:void 0,s=GH.RapidBoard.State.isKanbanBoard()?n.column.max:void 0,o=t.getIssueList().getVisibleRankables(),l=t.getIssueList().getAllIssues(),p=g.issueListToTree(o.map(function(t){return l[t]}),d.getAllIssuesWithMissingParents()),S=u.isFeatureEnabled(f),h=GH.RapidBoard.State.isScrumBoard()&&(S&&!n.goal||"FUTURE"===n.state),k=GH.RapidBoard.State.isScrumBoard()&&(e.parallelSprints&&"FUTURE"===n.state||e.firstFutureSprintId===n.id);g.applySubtaskCount(p,t.getIssueList(),i.hiddenIssues),c.applyExpandedState(p);var b={sprintData:n,manageSprintData:e,isRankable:d.isRankable(),showLinkedPages:d.supportsPages()&&GH.RapidBoard.State.isScrumBoard(),linkedPagesCount:t.getLinkedPagesCount(),issues:p,issueListStats:a,epics:GH.EpicController.getEpicModel().getEpicList().getAllIssues(),issueRenderData:i,statLabel:d.estimationStatistic.name,trackLabel:d.trackingStatistic.name,showEpic:GH.RapidBoard.State.getEpicShownOnRapidBoard(),showAssignedWorkStats:GH.RapidBoard.State.isScrumBoard(),showSprintActions:h,showSprintStartButton:k,showSprintFooter:GH.RapidBoard.State.isScrumBoard(),minIssueCount:r,maxIssueCount:s,issueCount:Object.keys(p).length,isKanbanBoard:GH.RapidBoard.State.isKanbanBoard(),isSprintGoalEnabled:S};return AJS.$(GH.tpl.sprintview.renderSprintContent(b))},m.updateSprintStatistics=function(){var t=d.getSprintModels();n.each(t,function(t){var i=m.calculateSprintIssueListStats(t,t.getIssueList());m._updateSprintStatisticsDom(t,i,!1)})},m.updateSprintStatisticForDraggedSprint=function(t,i){var a=m.calculateSprintIssueListStats(t,i);m._updateSprintStatisticsDom(t,a,!0)},m.markAsOvertaken=function(t){var i=!1,a=[];n.each(t,function(t){o.isSprintModel(t)?a.push(t.getSprintId()):i=!0}),AJS.$(".js-sprint-container").each(function(){var t=AJS.$(this);n.contains(a,m.getSprintIdForElement(t))?t.addClass("ghx-overtaken"):t.removeClass("ghx-overtaken")}),AJS.$(".ghx-everything-else").each(function(){var t=AJS.$(this);i?t.addClass("ghx-overtaken"):t.removeClass("ghx-overtaken")})},m._updateSprintStatisticsDom=function(t,i,a){var n=AJS.$('.js-sprint-container[data-sprint-id="'+t.getSprintId()+'"]'),e=m._renderSprintIssueCount(i);if(n.find(".ghx-issue-count").replaceWith(e),GH.RapidBoard.State.isScrumBoard()&&n.find(".ghx-assigned-work-stats").replaceWith(GH.tpl.sprintview.renderAssignedWork({assignedWork:i.assignedWorkStats.assigned,estimateStatisticName:d.estimationStatistic.name,trackingStatisticName:d.trackingStatistic.name})),t.isFutureSprint()){var r=m._renderFutureSprintFooterContent(i);n.find(".js-marker-divider").empty().append(r),a&&AJS.$('.js-marker-divider[data-sprint-id="'+t.getSprintId()+'"]').empty().append(r)}m.enableTooltips()},m._renderSprintMetaInfos=function(t){return GH.tpl.sprintview.renderSprintMetaInfos({sprintData:t.getSprintData()})},m._renderSprintIssueCount=function(t){return GH.tpl.planissuelist.renderIssueCount({issueListStats:t})},m._renderFutureSprintFooterContent=function(t){return GH.RapidBoard.State.isScrumBoard()?GH.tpl.sprintview.renderFutureSprintFooterContent({issueListStats:t}):""},m._getManageSprintData=function(t){var i=d.getActiveSprintModels(),a=d.getFutureSprintModels(),n=i.length>0,e=GH.RapidBoard.parallelSprints,r=a.length>0?a[0].getSprintData().id:null,s=(e||!n)&&t.canUpdateSprint,o=d.canManageSprints();return{canStartSprint:s,canUpdateSprint:t.canUpdateSprint,canManageSprints:o,hasOpenSprints:n,parallelSprints:e,firstFutureSprintId:r}},m.calculateSprintIssueListStats=function(t,i){var e=p.getIssueListStats(i,!0,t.isActiveSprint());if(t.isFutureSprint()){var r=p.getIssueListEstimateStatistics(i);n.extend(e,r)}else e.progressIndicators=p.calculateSprintProgress(i,a.rapidViewConfig.columns,d.estimationStatistic);return e.assignedWorkStats=p.getAssignedWorkStats(i),GH.RapidBoard.State.isKanbanBoard()&&(e=n.extend({},e,p.calculateStatisticsFieldValue(i,a.rapidViewConfig.statisticConfig))),e},m.getSprintIdForElement=function(t){var i=AJS.$(t).closest(".js-sprint-container");return i.length?parseInt(i.attr("data-sprint-id"),10):null},m.getSprintIdForMarker=function(t){var i=AJS.$(t).closest(".js-marker");if(!i.length)return null;var a=parseInt(i.attr("data-sprint-id"),10);return a},m.enableTooltips=function(){e(".js-sprint-start").tooltip({html:!0,title:"data-tooltip"}),e(".ghx-sprint-goal .js-edit-sprintGoal-trigger").tooltip({title:"data-fieldvalue"}),GH.Tooltip.tipsify({selector:".js-assigned-work-dialog-trigger"})},m});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/SprintView.soy' */
// This file was automatically generated from SprintView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.sprintview.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.sprintview == 'undefined') { GH.tpl.sprintview = {}; }


GH.tpl.sprintview.renderSprintContainer = function(opt_data, opt_ignored) {
  return '<div data-sprint-id="' + soy.$$escapeHtml(opt_data.sprintData.id) + '" class="ghx-backlog-container ' + soy.$$escapeHtml(opt_data.sprintData.state == 'FUTURE' ? 'ghx-sprint-planned' : 'ghx-sprint-active') + ' js-sprint-container ' + soy.$$escapeHtml(opt_data.isMetaExpanded ? 'ghx-open' : 'ghx-closed') + ((opt_data.isKanbanColumn) ? ' ghx-kanban-column' : '') + '" ></div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderSprintContainer.soyTemplateName = 'GH.tpl.sprintview.renderSprintContainer';
}


GH.tpl.sprintview.renderSprintContent = function(opt_data, opt_ignored) {
  return GH.tpl.sprintview.renderSprintHeader(opt_data) + '<div class="ghx-meta' + ((! opt_data.manageSprintData.canManageSprints) ? ' ghx-disabled' : '') + '" ><div class="ghx-issues js-issue-list' + ((opt_data.issueListStats.noneVisible) ? ' ghx-no-issues' + ((opt_data.issueListStats.empty) ? ' js-empty-list' : '') : ' ghx-has-issues') + '">' + GH.tpl.planissuelist.renderIssueList(opt_data) + '<div class="ghx-helper"><div class="ghx-description">' + soy.$$escapeHtml(opt_data.issueListStats.emptyMessage) + '</div></div></div>' + ((opt_data.sprintData.state == 'FUTURE') ? '<div class="ghx-marker js-parent-drag js-marker ' + ((! opt_data.isRankable) ? 'ghx-not-rankable' : '') + '" data-sprint-id="' + soy.$$escapeHtml(opt_data.sprintData.id) + '">' + GH.tpl.sprintview.renderFutureSprintFooter(opt_data) + '</div>' : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderSprintContent.soyTemplateName = 'GH.tpl.sprintview.renderSprintContent';
}


GH.tpl.sprintview.renderSprintHeader = function(opt_data, opt_ignored) {
  return '<div class="ghx-backlog-header js-sprint-header" data-sprint-id="' + soy.$$escapeHtml(opt_data.sprintData.id) + '"><div class="ghx-expander"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-expanded"></span></div><div class="ghx-name">' + GH.tpl.inlineeditfield.renderBasicTextView({canEdit: opt_data.manageSprintData.canUpdateSprint, fieldName: 'sprintName', fieldValue: opt_data.sprintData.name, displayValue: opt_data.sprintData.name}) + '</div>' + ((opt_data.minIssueCount) ? '<div class="ghx-kanban-column-min">' + aui.lozenges.lozenge({text: soy.$$escapeHtml("Min") + ' ' + soy.$$escapeHtml(opt_data.minIssueCount), type: '' + ((opt_data.issueListStats.statisticsFieldTotal < opt_data.minIssueCount) ? 'current' : '')}) + '</div>' : '') + ((opt_data.maxIssueCount) ? '<div class="ghx-kanban-column-max">' + aui.lozenges.lozenge({text: soy.$$escapeHtml("Max") + ' ' + soy.$$escapeHtml(opt_data.maxIssueCount), type: '' + ((opt_data.issueListStats.statisticsFieldTotal > opt_data.maxIssueCount) ? 'error' : '')}) + '</div>' : '') + GH.tpl.planissuelist.renderIssueCount(opt_data) + ((opt_data.sprintData.state == 'ACTIVE') ? '<span class="active-sprint-lozenge aui-lozenge aui-lozenge-success">' + soy.$$escapeHtml("Active") + '</span>' : '') + ((opt_data.showSprintActions || opt_data.showSprintStartButton) ? GH.tpl.sprintview.renderSprintControls(opt_data) : '') + ((opt_data.sprintData.state != 'FUTURE') ? GH.tpl.sprintview.renderSprintProgress(opt_data) : '') + GH.tpl.sprintview.renderSprintInfo(opt_data) + ((opt_data.isSprintGoalEnabled) ? GH.tpl.sprintview.sprintGoalEdit({sprintData: opt_data.sprintData, canUpdateSprint: opt_data.manageSprintData.canUpdateSprint}) : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderSprintHeader.soyTemplateName = 'GH.tpl.sprintview.renderSprintHeader';
}


GH.tpl.sprintview.renderSprintInfo = function(opt_data, opt_ignored) {
  return '<div class="ghx-sprint-info">' + ((opt_data.showAssignedWorkStats) ? GH.tpl.sprintview.renderAssignedWork({assignedWork: opt_data.issueListStats.assignedWorkStats.assigned, estimateStatisticName: opt_data.statLabel, trackingStatisticName: opt_data.trackLabel}) : '') + '<div class="ghx-dates">' + ((opt_data.sprintData.state != 'FUTURE') ? GH.tpl.sprintview.renderSprintMetaInfos(opt_data) : '') + '</div>' + ((opt_data.showLinkedPages) ? GH.tpl.sprintview.renderSprintMetaLinkedTrigger(opt_data) : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderSprintInfo.soyTemplateName = 'GH.tpl.sprintview.renderSprintInfo';
}


GH.tpl.sprintview.renderSprintControls = function(opt_data, opt_ignored) {
  return '<div class="ghx-controls aui-group">' + ((opt_data.showSprintStartButton) ? GH.tpl.sprintview.renderStartSprintItem(opt_data) : '') + ((opt_data.showSprintActions) ? GH.tpl.sprintview.renderSprintActions(opt_data) : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderSprintControls.soyTemplateName = 'GH.tpl.sprintview.renderSprintControls';
}


GH.tpl.sprintview.renderSprintMetaInfos = function(opt_data, opt_ignored) {
  return '<div class="ghx-date">' + GH.tpl.inlineeditfield.renderBasicTextView({canEdit: opt_data.manageSprintData.canUpdateSprint, fieldName: 'startDate', fieldValue: opt_data.sprintData.startDate, displayValue: opt_data.sprintData.startDate}) + '</div><div class="ghx-divider">&bull;</div><div class="ghx-date">' + GH.tpl.inlineeditfield.renderBasicTextView({canEdit: opt_data.manageSprintData.canUpdateSprint, fieldName: 'endDate', fieldValue: opt_data.sprintData.endDate, displayValue: opt_data.sprintData.endDate}) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderSprintMetaInfos.soyTemplateName = 'GH.tpl.sprintview.renderSprintMetaInfos';
}


GH.tpl.sprintview.renderSprintMetaLinkedTrigger = function(opt_data, opt_ignored) {
  return '<div class="ghx-linked aui-item">' + GH.tpl.component.linkedpages.renderTrigger({linkedPagesCount: opt_data.linkedPagesCount, title: "Create and view pages linked to this sprint"}) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderSprintMetaLinkedTrigger.soyTemplateName = 'GH.tpl.sprintview.renderSprintMetaLinkedTrigger';
}


GH.tpl.sprintview.renderSprintProgress = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.issueListStats.progressIndicators) {
    output += '<div class="ghx-badge-group ghx-right">';
    var indicatorList186 = opt_data.issueListStats.progressIndicators;
    var indicatorListLen186 = indicatorList186.length;
    for (var indicatorIndex186 = 0; indicatorIndex186 < indicatorListLen186; indicatorIndex186++) {
      var indicatorData186 = indicatorList186[indicatorIndex186];
      var state__soy187 = '' + ((indicatorIndex186 == 0) ? ' ghx-not-started' : (indicatorIndex186 == indicatorListLen186 - 1) ? ' ghx-done' : ' ghx-in-progress');
      var text__soy195 = '' + ((indicatorData186.total.text) ? soy.$$escapeHtml(indicatorData186.total.text) : ' ');
      output += aui.badges.badge({text: text__soy195, extraAttributes: {title: indicatorData186.title}, extraClasses: [state__soy187]});
    }
    output += '</div>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderSprintProgress.soyTemplateName = 'GH.tpl.sprintview.renderSprintProgress';
}


GH.tpl.sprintview.renderProgressIndicatorTitle = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml(opt_data.indicator.name) + ': ' + soy.$$escapeHtml(opt_data.indicator.total.text) + ' ' + soy.$$escapeHtml("of") + ' ' + soy.$$escapeHtml(opt_data.allIndicatorsTotalText) + ' (' + soy.$$escapeHtml(opt_data.statLabel) + ')';
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderProgressIndicatorTitle.soyTemplateName = 'GH.tpl.sprintview.renderProgressIndicatorTitle';
}


GH.tpl.sprintview.renderStartSprintItem = function(opt_data, opt_ignored) {
  return '<div class="aui-item">' + ((opt_data.manageSprintData.canStartSprint && opt_data.issueListStats.hasIssues) ? '<button class="js-sprint-start aui-button" data-tooltip="">' + soy.$$escapeHtml("Start Sprint") + '</button>' : '<button class="js-sprint-start aui-button disabled" aria-disabled="true"' + ((! opt_data.issueListStats.hasIssues) ? 'data-tooltip="' + soy.$$escapeHtml("Sprint cannot be started because it contains no issues") + '"' : (opt_data.manageSprintData.hasOpenSprints && ! opt_data.manageSprintData.parallelSprints) ? 'data-tooltip="' + soy.$$escapeHtml("Can be planned but not started until the completion of above active sprint") + '"' : (! opt_data.manageSprintData.canStartSprint) ? 'data-tooltip="' + soy.$$escapeHtml("You need the Manage Sprints permission for all projects in the origin board to manage this sprint. \x3ca class\x3d\x22manage-sprint-permission-help\x22 href\x3d\x22#\x22\x3eLearn more\x3c/a\x3e") + '"' : '') + '>' + soy.$$escapeHtml("Start Sprint") + '</button>') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderStartSprintItem.soyTemplateName = 'GH.tpl.sprintview.renderStartSprintItem';
}


GH.tpl.sprintview.renderSprintActions = function(opt_data, opt_ignored) {
  var output = '<div class="aui-item">';
  var url__soy246 = soy.$$escapeHtml("") + '/rest/greenhopper/1.0/xboard/plan/sprints/actions?sprintId=' + soy.$$escapeHtml(opt_data.sprintData.id);
  output += aui.buttons.button({extraClasses: ['aui-button-compact', 'js-sprint-actions-trigger'], tagName: 'a', text: '', iconClass: 'ghx-iconfont aui-icon-small aui-iconfont-more', iconType: 'aui', extraAttributes: {href: url__soy246, 'data-sprint-id': opt_data.sprintData.id}}) + '</a></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderSprintActions.soyTemplateName = 'GH.tpl.sprintview.renderSprintActions';
}


GH.tpl.sprintview.renderAssignedWork = function(opt_data, opt_ignored) {
  var output = '';
  var assigneeCount__soy259 = opt_data.assignedWork.length;
  var assigneeDisplayLimit__soy260 = 5;
  var remainingAssigneeCount__soy261 = assigneeCount__soy259 - assigneeDisplayLimit__soy260;
  output += '<div class="ghx-assigned-work-stats">';
  var assignedWorkEntryList263 = opt_data.assignedWork;
  var assignedWorkEntryListLen263 = assignedWorkEntryList263.length;
  for (var assignedWorkEntryIndex263 = 0; assignedWorkEntryIndex263 < assignedWorkEntryListLen263; assignedWorkEntryIndex263++) {
    var assignedWorkEntryData263 = assignedWorkEntryList263[assignedWorkEntryIndex263];
    output += (assignedWorkEntryIndex263 < assigneeDisplayLimit__soy260) ? GH.tpl.avatar.renderIssueAvatar({issue: assignedWorkEntryData263.issues[0], tooltipHtml: soy.$$escapeHtml(assignedWorkEntryData263.assigneeName) + '<table>' + ((assignedWorkEntryData263.totalEstimateText) ? '<tr><td>' + soy.$$escapeHtml(assignedWorkEntryData263.totalEstimateText) + '</td><td>' + soy.$$escapeHtml(opt_data.estimateStatisticName) + '</td></tr>' : '') + ((assignedWorkEntryData263.totalTrackingEstimateText) ? '<tr><td>' + soy.$$escapeHtml(assignedWorkEntryData263.totalTrackingEstimateText) + '</td><td>' + soy.$$escapeHtml(opt_data.trackingStatisticName) + '</td></tr>' : '') + '<tr><td>' + soy.$$escapeHtml(assignedWorkEntryData263.issues.length) + '</td><td>' + soy.$$escapeHtml("Issues") + '</td></tr></table>'}) : '';
  }
  output += (assigneeCount__soy259 > assigneeDisplayLimit__soy260) ? '<span class="remaining-assignee-count">+' + soy.$$escapeHtml(remainingAssigneeCount__soy261) + '</span>' : '';
  if (opt_data.assignedWork.length) {
    var tooltip__soy298 = '' + soy.$$escapeHtml("View summary of assigned work");
    output += aui.buttons.button({extraAttributes: {'data-tooltip': tooltip__soy298}, extraClasses: ['js-assigned-work-dialog-trigger', 'aui-button-subtle', 'aui-button-compact'], text: '', iconClass: 'ghx-iconfont aui-icon-small aui-iconfont-more', iconType: 'aui', iconText: tooltip__soy298});
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderAssignedWork.soyTemplateName = 'GH.tpl.sprintview.renderAssignedWork';
}


GH.tpl.sprintview.renderFutureSprintFooter = function(opt_data, opt_ignored) {
  return '<div class="js-marker-divider js-marker" data-sprint-id="' + soy.$$escapeHtml(opt_data.sprintData.id) + '">' + ((opt_data.showSprintFooter) ? GH.tpl.sprintview.renderFutureSprintFooterContent(opt_data) : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderFutureSprintFooter.soyTemplateName = 'GH.tpl.sprintview.renderFutureSprintFooter';
}


GH.tpl.sprintview.renderFutureSprintFooterContent = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-stats ' + ((! opt_data.issueListStats.allVisible) ? 'ghx-is-filtered' : '') + '"><div class="ghx-stat-total"><span class="ghx-label">' + ((opt_data.issueListStats.allVisible) ? soy.$$escapeHtml(AJS.format("{0}{0,choice,0# issues|1# issue|1\x3c issues}",opt_data.issueListStats.totalCount)) : soy.$$escapeHtml(AJS.format("{1} of {0,choice,0#0 issues|1#1 issue|1\x3c{0,number} issues} visible",opt_data.issueListStats.totalCount,opt_data.issueListStats.visibleCount))) + '</span>';
  if (opt_data.issueListStats.tracking.shown) {
    output += '<span class="ghx-label">' + soy.$$escapeHtml("Remaining") + '</span>';
    var label__soy334 = '' + ((opt_data.issueListStats.allVisible) ? soy.$$escapeHtml(opt_data.issueListStats.tracking.total.formatted) + ' ' + soy.$$escapeHtml(opt_data.issueListStats.tracking.name) : soy.$$escapeHtml(AJS.format("{0} of {1} {2} visible",opt_data.issueListStats.tracking.visible.formatted,opt_data.issueListStats.tracking.total.formatted,opt_data.issueListStats.tracking.name)));
    var badgetext__soy342 = '' + ((opt_data.issueListStats.allVisible) ? soy.$$escapeHtml(opt_data.issueListStats.tracking.total.formatted) : soy.$$escapeHtml(opt_data.issueListStats.tracking.visible.formatted) + '/' + soy.$$escapeHtml(opt_data.issueListStats.tracking.total.formatted));
    output += aui.badges.badge({extraClasses: ['ghx-estimate-badge'], text: badgetext__soy342, extraAttributes: {title: label__soy334}});
  }
  if (opt_data.issueListStats.estimate.shown) {
    output += '<span class="ghx-label">' + soy.$$escapeHtml("Estimate") + '</span>';
    var label__soy359 = '' + ((opt_data.issueListStats.allVisible) ? soy.$$escapeHtml(opt_data.issueListStats.estimate.total.formatted) + ' ' + soy.$$escapeHtml(opt_data.issueListStats.estimate.name) : soy.$$escapeHtml(AJS.format("{0} of {1} {2} visible",opt_data.issueListStats.estimate.visible.formatted,opt_data.issueListStats.estimate.total.formatted,opt_data.issueListStats.estimate.name)));
    var badgetext__soy367 = '' + ((opt_data.issueListStats.allVisible) ? soy.$$escapeHtml(opt_data.issueListStats.estimate.total.formatted) : soy.$$escapeHtml(opt_data.issueListStats.estimate.visible.formatted) + '/' + soy.$$escapeHtml(opt_data.issueListStats.estimate.total.formatted));
    output += aui.badges.badge({text: badgetext__soy367, extraAttributes: {title: label__soy359}});
  }
  output += '</div></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderFutureSprintFooterContent.soyTemplateName = 'GH.tpl.sprintview.renderFutureSprintFooterContent';
}


GH.tpl.sprintview.sprintGoalEdit = function(opt_data, opt_ignored) {
  var output = '';
  var goal__soy380 = opt_data.sprintData.goal;
  output += '<div class="ghx-sprint-goal ' + ((! goal__soy380) ? 'ghx-hidden' : '') + '">' + GH.tpl.inlineeditfield.renderBasicTextView({canEdit: opt_data.canUpdateSprint, fieldName: 'sprintGoal', fieldValue: goal__soy380, displayValue: goal__soy380 ? goal__soy380 : '', extraClasses: 'overflow-ellipsis'}) + '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.sprintview.sprintGoalEdit.soyTemplateName = 'GH.tpl.sprintview.sprintGoalEdit';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/sprintactions/SprintActions.js' */
define("jira-agile/rapid/ui/component/sprintactions/sprint-actions",["require"],function(n){"use strict";var t=n("jquery"),i=n("underscore"),e=n("jira-agile/rapid/ui/plan/backlog-model"),r=n("jira-agile/rapid/ui/plan/sprint-controller"),o=AJS.Dropdown,a=function(){};return a.CORE_SPRINT_ACTIONS={"gh-sprint-move-up":r.moveSprintUp,"gh-sprint-move-down":r.moveSprintDown,"gh-sprint-delete":r.deleteSprint,"gh-sprint-add-goal":r.addGoal,"gh-sprint-add-goal-disabled":t.noop,"gh-sprint-delete-disabled":t.noop},a.prototype={createDropdown:function(){var n=this;o.create({trigger:t(".js-sprint-actions-trigger"),ajaxOptions:{dataType:"json",cache:!1,formatSuccess:function(i){var e=i.id,r=n.getSprintData(e);i.sections=n.filterActions(i.sections,r);var o=t(GH.tpl.component.sprintactions.sprintActionsDropdown(i));return o.find(".js-sprint-action").tooltip({html:!0}),o}}}),t(document).off("click",".js-sprint-action"),t(document).on("click",".js-sprint-action",function(t){n.clickSprintAction(t)})},getSprintData:function(n){var t=!1,r=!1,o=e.getFutureSprintModels(),a=e.getSprintModel(n);return o.length>1&&a.isFutureSprint()&&(t=o[0].getSprintId()!==n,r=i.last(o).getSprintId()!==n),{canMoveUp:t,canMoveDown:r,canManageSprints:e.canManageSprints()}},filterActions:function(n,t){return i.each(n,function(n){n.actions=i.reject(n.actions,function(n){return"gh-sprint-move-up"===n.id&&!(t.canMoveUp&&t.canManageSprints)||"gh-sprint-move-down"===n.id&&!(t.canMoveDown&&t.canManageSprints)}),i.each(n.actions,function(n){n.disabled=n.styleClass&&n.styleClass.indexOf("disabled")>=0})}),i.filter(n,function(n){return n.actions.length>0})},clickSprintAction:function(n){var i=t(n.currentTarget),e=i.data("sprint-id"),r=i.attr("id"),o=a.CORE_SPRINT_ACTIONS[r];o&&(n.preventDefault(),o(e))}},a});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/sprintactions/SprintActions.soy' */
// This file was automatically generated from SprintActions.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.component.sprintactions.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.component == 'undefined') { GH.tpl.component = {}; }
if (typeof GH.tpl.component.sprintactions == 'undefined') { GH.tpl.component.sprintactions = {}; }


GH.tpl.component.sprintactions.sprintActionsDropdown = function(opt_data, opt_ignored) {
  var output = '<div class="aui-list js-sprint-actions-list">';
  if (opt_data.sections && opt_data.sections.length > 0) {
    var sectionList6 = opt_data.sections;
    var sectionListLen6 = sectionList6.length;
    for (var sectionIndex6 = 0; sectionIndex6 < sectionListLen6; sectionIndex6++) {
      var sectionData6 = sectionList6[sectionIndex6];
      output += '<ul class=" aui-list-section' + ((sectionIndex6 == sectionListLen6 - 1) ? ' aui-last' : '') + '">';
      var actionList12 = sectionData6.actions;
      var actionListLen12 = actionList12.length;
      for (var actionIndex12 = 0; actionIndex12 < actionListLen12; actionIndex12++) {
        var actionData12 = actionList12[actionIndex12];
        output += '<li class="aui-list-item' + ((actionData12.disabled) ? ' disabled' : '') + '"><a href="' + soy.$$escapeHtml(actionData12.url) + '" class="aui-list-item-link js-sprint-action' + ((actionData12.styleClass) ? ' ' + soy.$$escapeHtml(actionData12.styleClass) : '') + '" data-sprint-id="' + soy.$$escapeHtml(opt_data.id) + '" id="' + soy.$$escapeHtml(actionData12.id) + '"' + ((actionData12.desc) ? 'title="' + soy.$$escapeHtml(actionData12.desc) + '"' : '') + '>' + soy.$$escapeHtml(actionData12.name) + '</a></li>';
      }
      output += '</ul>';
    }
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.sprintactions.sprintActionsDropdown.soyTemplateName = 'GH.tpl.component.sprintactions.sprintActionsDropdown';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/PlanKBShortcuts.js' */
define("jira-agile/rapid/ui/plan/plan-kb-shortcuts",["require"],function(e){"use strict";function i(e,i){return a.any(i,function(i){var a=e.getIssueList(),n=a.getIssueData(i);if(a.isSubtask(i)){if(a.isIssueValid(n.parentKey)){var t=u.isIssueCollapsed(n.parentKey);return!t}return!0}})}var a=e("underscore"),n=e("jira-agile/rapid/analytics-tracker"),t=e("jira-agile/rapid/ui/plan/backlog-model"),s=e("jira-agile/rapid/ui/plan/backlog-selection-controller"),r=e("jira-agile/rapid/ui/plan/plan-controller"),l=e("jira-agile/rapid/ui/plan/plan-drag-and-drop"),o=e("jira-agile/rapid/ui/plan/sprint-model"),u=e("jira-agile/rapid/ui/plan/subtasks-expanding-controller"),d={};return d.analytics=new n("gh.rapidboard.rankissues"),d.sendToTop=function(e){if(t.isRankable()){var a=s.getSelectedIssueKey();if(a){var n=t.getFirstRankableIssueKeyInColumn(a,!0),u=s.getSelectedAndVisibleIssuesInOrder();if(d.analytics.trigger("sendToTop"+(e?e:""),u.length),n){var c=t.findModelWithIssue(a);if(!i(c,u)){var g=t.getBestFitSelectionAfterRank(u);g&&s.selectIssue(g);var p=o.isSprintModel(c),f=p?c.getSprintId():null;l.rankIssues(u,f,null,n).done(function(e){GH.Notification.showSuccess("Issue has been re-ranked to the top of its column.")}).fail(function(){r.reload()})}}}}},d.sendToBottom=function(e){if(t.isRankable()){var a=s.getSelectedIssueKey();if(a){var n=t.getLastRankableIssueKeyInColumn(a,!0),u=s.getSelectedAndVisibleIssuesInOrder();if(d.analytics.trigger("sendToBottom"+(e?e:""),u.length),n){var c=t.findModelWithIssue(a);if(!i(c,u)){var g=t.getBestFitSelectionAfterRank(u);g&&s.selectIssue(g);var p=o.isSprintModel(c),f=p?c.getSprintId():null;l.rankIssues(u,f,n,null).done(function(e){GH.Notification.showSuccess("Issue has been re-ranked to the bottom of its column.")}).fail(function(){r.reload()})}}}}},d});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/BacklogSelectionController.js' */
define("jira-agile/rapid/ui/plan/backlog-selection-controller",["require"],function(e){"use strict";var t,s,n=e("jquery"),a=e("jira-agile/rapid/global-events"),l=e("jira-agile/rapid/ui/plan/backlog-model"),i=e("jira-agile/rapid/ui/plan/plan-issue-list-view"),u=e("jira-agile/rapid/ui/plan/plan-context-menu-controller"),r=e("jira-agile/rapid/ui/plan/subtasks-expanding-controller");a.on("pre-initialization",function(){t=e("jira-agile/rapid/ui/plan/backlog-controller"),s=e("jira-agile/rapid/ui/plan/BacklogView")});var o={};return o.selectionDataModel={},o.selectionManager=void 0,o.init=function(){o.selectionDataModel={isIssueValid:l.isIssueSelectable,getIssueIndex:l.getIssueIndex,canAddToSelection:l.canAddToSelection,getIssueRange:l.getIssueRange},o.selectionManager=new GH.IssueSelectionManager(o.selectionDataModel,"backlog.selectedIssues"),n(document).on("click",s.containerSelector+" .js-issue",o.handleIssueClick),n(document).on("contextmenu",s.containerSelector+" .js-issue",o.handleIssueContextMenu),n(document).on("click",s.containerSelector+" .js-issue .ghx-card-expander",o.handleParentExpanderClick)},o.handleIssueContextMenu=function(e){var t=i.getIssueKey(n(this)),s=o.isInSelection(t);s||(o.selectionManager.handleIssueClick(GH.MouseUtils.getMetaKeys(e),t),o.updateUIAndState({openDetailsView:!1,doScroll:!0})),u.showContextMenuAt(e)},o.handleIssueClick=function(e){var t=i.getIssueKey(n(this)),s=n(e.target).hasClass("js-key-link"),a=!GH.MouseUtils.openInSameTab(e);return!(!s||!a)||(e.preventDefault(),void o.handleIssueSelectionEvent(e,t,!0))},o.validateCurrentSelection=function(){var e=o.selectionManager.validateCurrentSelection();return e&&(GH.RapidBoard.State.replaceState(),o.deferredPushState()),e},o.handleIssueSelectionEvent=function(e,t,s){var n=GH.MouseUtils.getMetaKeys(e),a=o.selectionManager.handleIssueClick(n,t),l=GH.IssueSelectionManager.getMultiSelectType(n);l&&(s=!1),a&&o.updateUIAndState({openDetailsView:s,doScroll:!1})},o.handleParentExpanderClick=function(e){e.stopPropagation();var t=i.getClosestIssueElement(n(this)),s=i.getIssueKey(t),a=r.toggleExpandState(t);a||o.selectIssue(s),r.sendAnalytics(a)},o.selectIssue=function(e){o.selectionManager.selectIssue(e),o.updateUIAndState({openDetailsView:!1,doScroll:!0})},o.selectAllCollapsedSubtasks=function(){var e=r.getCollapsedSubTasksToSelection(o.getSelectedIssueKeys());o.selectionManager._prependSelectedIssueKeys(e)},o.clearSelection=function(){o.selectIssue(null)},o.selectNextIssue=function(){var e=null,t=o.getSelectedIssueKey();e=t?l.getNextIssueKey(t):l.getFirstRankableIssueKeyInColumn(null),e||(e=t),o.selectIssue(e)},o.selectPreviousIssue=function(){var e=null,t=o.getSelectedIssueKey();e=t?l.getPreviousIssueKey(t):l.getLastRankableIssueKeyInColumn(null),e||(e=t),o.selectIssue(e)},o.updateUIAndState=function(e){o.selectAllCollapsedSubtasks(),t.updateUIAfterSelectionChange(e),o.deferredPushState()},o.pushTimeoutHandler=void 0,o.deferredPushState=function(){var e=1e3,t=new Date;GH.RapidBoard.UrlState.pushTimeoutHandler&&window.clearTimeout(GH.RapidBoard.UrlState.pushTimeoutHandler),GH.RapidBoard.UrlState.pushTimeoutHandler=window.setTimeout(function(){GH.RapidBoard.UrlState.deferredPushState(t)},e)},o.ensureIssueSelected=function(e,t){if(!o.selectionManager.isInSelection(t))if(l.canAddToSelection(o.selectionManager.getSelectedIssueKeys(),t))o.handleIssueSelectionEvent(e,t);else{o.selectionManager.selectIssue(t);var s=!0;GH.RapidBoard.State.isDetailsViewPlanOpened()||(s=!1),o.updateUIAndState({openDetailsView:s,doScroll:!0})}},o.getSelectedIssueKeys=function(){return o.selectionManager.getSelectedIssueKeys()},o.getSelectedIssueKey=function(){return o.selectionManager.getSelectedIssueKey()},o.isInSelection=function(e){return o.selectionManager.isInSelection(e)},o.setIssueFromUrlState=function(e){o.selectionManager.selectIssue(e)},o.getSelectedIssuesInOrder=function(){return o.selectionManager.getSelectedIssuesInOrder()},o.getSelectedAndVisibleIssuesInOrder=function(){return o.filterIssuesThatCanBeRanked(o.getSelectedIssuesInOrder())},o.filterIssuesThatCanBeRanked=function(e){function t(e){return!e.hidden&&!s[e.key]}var s=l.getHiddenBySearchIssues();return e.filter(function(e){var s=l.findModelWithIssue(e);if(!s)return!1;var n=s.getIssueList().getIssueData(e);if(s.getIssueList().isSubtask(e)){var a=n.parentKey,i=s.getIssueList().isIssueValid(a),u=s.getIssueList().getIssueData(a),o=r.isIssueCollapsed(a);if(i&&o&&t(u))return!0}return t(n)})},o.removeFromSelectionIssuesInDifferentModel=function(e){var t=l.findTargetModel(e);if(t){var s=o.getSelectedIssueKeys(),n=t.getIssueList(),a=s.filter(function(e){return!n.isIssueValid(e)});a.length>0&&(o.selectionManager.removeSelectedIssueKeys(a),o.updateUIAndState({}))}},o});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/IssueListModel.js' */
define("jira-agile/rapid/ui/plan/issue-list-model",["require"],function(e){"use strict";var t=e("jira-agile/rapid/ui/plan/subtasks-expanding-controller"),s=e("underscore"),r=function(e,t,s){this.fixVersions=s;var r=this.data={};r.id=e,r.issueByKey={},r.order=[],r.visibleIssueKeys=new GH.Collection.OrderedSet,r.hiddenIssueKeys={},r.parentSubtaskKeys={},this.addIssues(t)};return r.prototype.addIssues=function(e){var t=this.data.issueByKey,r=this.data.order;s.each(e,function(e){this.fixVersions&&this.processFixVersion(e);var s=e.key;t[s]=e,r.push(s)},this),this.buildCache()},r.prototype.prependIssues=function(e){var t=this.data.issueByKey,r=this.data.order;s.each(e,function(e){this.fixVersions&&this.processFixVersion(e);var s=e.key;t[s]=e},this);var i=s.map(e,function(e){return e.key});this.data.order=s.flatten([i,r],!0),this.buildCache()},r.getOrderKeyForMarkerId=function(e){return"%%-"+e},r.prototype.getIssuesInOrder=function(){var e=[],t=this.data.order,r=this.data.issueByKey;return s.forEach(t,function(t,s){e.push(r[t])},this),e},r.prototype.getId=function(){return this.data.id},r.prototype.buildCache=function(){var e=this.data.visibleIssueKeys.clear(),t=this.data.orderByKey={};s.forEach(this.data.order,function(s,i){if(this._isMarkerId(s))t[r.getOrderKeyForMarkerId(s)]=i;else{t[s]=i;var a=this.data.issueByKey[s];a&&!a.hidden&&e.push(s)}},this),this.data.parentSubtaskKeys={},s.forEach(this.data.issueByKey,function(e,t){var s=e.parentKey;s&&(this.data.parentSubtaskKeys[s]||(this.data.parentSubtaskKeys[s]=[]),this.data.parentSubtaskKeys[s].push(t))}.bind(this))},r.prototype._isMarkerId=function(e){return s.isNumber(e)},r.prototype.indexOfRankable=function(e){this._isMarkerId(e)&&(e=r.getOrderKeyForMarkerId(e));var t=this.data.orderByKey[e];return s.isUndefined(t)?-1:t},r.prototype.containsRankable=function(e){return this.indexOfRankable(e)!==-1},r.prototype.insertMarker=function(e,t){var i=0,a=this.data.order;this.containsRankable(e)&&(a=s.without(a,e)),t&&(i=s.indexOf(a,t),i<0?i=0:i++),0===i?a.unshift(e):a=s.flatten([a.slice(0,i),e,a.slice(i)]);var n={};s.forEach(a,function(e,t){this._isMarkerId(e)&&(e=r.getOrderKeyForMarkerId(e)),n[e]=t},this),this.data.order=a,this.data.orderByKey=n},r.prototype.removeMarker=function(e){if(this.containsRankable(e)){var t=s.without(this.data.order,e),i={};s.forEach(t,function(e,t){this._isMarkerId(e)&&(e=r.getOrderKeyForMarkerId(e)),i[e]=t},this),this.data.order=t,this.data.orderByKey=i}},r.prototype.isSubtask=function(e){var t=this.getIssueData(e);return!(!t||!t.parentKey)},r.prototype.reorderIssues=function(e,t,r){var i,a=this.data.order,n=t||r;if(t){var u=this.getRealAfterKey(t);i=a.indexOf(u)+1}else{var o=this.getRealBeforeKey(r);i=a.indexOf(o)}if(this.isSubtask(n)){var d=this.getIssueData(n).parentKey;e=e.filter(function(e){var t=this.getIssueData(e);return t&&t.parentKey===d}.bind(this))}else{var h=[];e.forEach(function(e){if(this.isIssueValid(e)&&!this.isSubtask(e)){var t=this.getSubtasks(e).map(function(e){return e.key});h.push(e),t.forEach(function(e){h.push(e)})}}.bind(this)),e=h}var y=a.slice(0,i),f=a.slice(i);y=this.withoutArray(y,e),f=this.withoutArray(f,e);var p=s.flatten([y,e,f]);this.setOrder(p)},r.prototype.getRealAfterKey=function(e){if(this.isSubtask(e))return e;var t=s.clone(this.data.order).reverse(),r=this.findFirstSubtaskOfParentInList(t,e);return r?r:e},r.prototype.getRealBeforeKey=function(e){return this.isSubtask(e)||s.contains(this.data.order,e)?e:this.findFirstSubtaskOfParentInList(this.data.order,e)},r.prototype.findFirstSubtaskOfParentInList=function(e,t){return s.find(e,function(e){var s=this.getIssueData(e);return s&&s.parentKey===t}.bind(this))},r.prototype.getRankableBeforeId=function(e){var t=this.indexOfRankable(e);return t>0&&this.data.order[t-1]},r.prototype.isIssueHiddenBySearchByKey=function(e){return this.data.hiddenIssueKeys[e]||!1},r.prototype.isIssueHidden=function(e){if(this.isSubtask(e)){var s=this.getIssueData(e).parentKey;if(this.isIssueValid(s)&&t.isIssueCollapsed(s))return!0}return this.isIssueHiddenBySearchByKey(e)},r.prototype.updateIssue=function(e){return GH.ExtraFieldsHelper.prepareExtraFields(e.extraFields),this.processFixVersion(e),!s.isUndefined(this.data.issueByKey[e.key])&&(this.data.issueByKey[e.key]=e,this.buildCache(),!0)},r.prototype.processFixVersion=function(e){this.fixVersions&&(e.fixVersionsUI=this.fixVersions.getVersionsForIds(e.fixVersions))},r.prototype.getNumVisibleIssues=function(){return this.getNumVisibleIssuesBeforeRankable(!1)},r.prototype.getVisibleIssuesBeforeRankable=function(e){var t;if(e!==!1){var r=this.indexOfRankable(e);if(r<0)return!1;t=this._first(this.data.order,r)}else t=this.data.order;return s.filter(t,function(e){return this.isIssueVisible(e)}.bind(this))},r.prototype.getNumVisibleIssuesBeforeRankable=function(e){return this.getVisibleIssuesBeforeRankable(e).length},r.prototype.getAllIssues=function(){return this.data.issueByKey},r.prototype.getVisibleIssues=function(){var e={};return s.each(this.data.issueByKey,function(t,s){this.isIssueVisible(s)&&(e[s]=t)},this),e},r.prototype.getVisibleRankables=function(){var e=this;return s.filter(e.data.order,function(t){return!!e.isIssueValid(t)&&(!!e._isMarkerId(t)||e.getIssueIndex(t)!==-1)})},r.prototype.getVisibleIssueKeys=function(){return this.data.visibleIssueKeys},r.prototype.getHiddenBySearchIssues=function(){return this.data.hiddenIssueKeys},r.prototype.setHiddenBySearchIssues=function(e){this.data.hiddenIssueKeys=e},r.prototype.getIssueKeyAtIndex=function(e){var t=this.data.visibleIssueKeys;return t.length>e?t.get(e):t.last()},r.prototype.getFirstVisibleIssueKey=function(){for(var e=this.data.visibleIssueKeys,t=0;t<e.length;t++){var s=e.get(t);if(!this.isIssueHidden(s))return s}return!1},r.prototype.getLastVisibleIssueKey=function(){for(var e=this.data.visibleIssueKeys,t=e.length-1;t>=0;t--){var s=e.get(t);if(!this.isIssueHidden(s))return s}return!1},r.prototype.getIssueIndex=function(e){return this.data.visibleIssueKeys.indexOf(e)},r.prototype.getIssueData=function(e){return this.data.issueByKey[e]},r.prototype.getIssueDataForId=function(e){return s.find(this.data.issueByKey,function(t){return t.id===e})||void 0},r.prototype.getIssueKeyForId=function(e){var t=this.getIssueDataForId(e);return t?t.key:void 0},r.prototype.getIssueIdForKey=function(e){var t=this.getIssueData(e);if(t)return t.id},r.prototype.isIssueVisible=function(e){return this.getIssueIndex(e)!==-1&&!this.isIssueHiddenBySearchByKey(e)},r.prototype.isIssueValid=function(e){return s.isString(e)?!s.isUndefined(this.data.issueByKey[e]):s.any(this.data.issueByKey,function(t){return e==t.id})},r.prototype.areIssuesValid=function(e){if(0===e.length)return!1;var t=this;return s.all(e,function(e){return t.isIssueValid(e)})},r.prototype.getFirstRankableIssueKeyInColumn=function(e,t){return this._getFirstOrLastRankableIssueKeyInColumn(e,t,!0)},r.prototype.getLastRankableIssueKeyInColumn=function(e,t){return this._getFirstOrLastRankableIssueKeyInColumn(e,t,!1)},r.prototype._getFirstOrLastRankableIssueKeyInColumn=function(e,t,r){var i;i=s.isArray(e)?e:s.isString(e)?[e]:[];var a=this.data.visibleIssueKeys,n=s.range(0,a.length);r||n.reverse();for(var u=0;u<n.length;u++){var o=a.get(n[u]);if(!s.contains(i,o))return t&&this.isSubtask(o)?this.getIssueData(o).parentKey:o}return!1},r.prototype.getBestFitSelectionAfterRank=function(e){var t=this.getNextIssueKeyAfterRank(e);return t||(t=this.getPreviousIssueKeyAfterRank(e)),t},r.prototype.getNextIssueKeyAfterRank=function(e){var t=s.last(e);return this.getNextIssueKey(t)},r.prototype.getNextIssueKey=function(e){for(var t=this.getIssueIndex(e),s=this.data.visibleIssueKeys;++t<s.length;){var r=s.get(t);if(!this.isIssueHidden(r))return r}return!1},r.prototype.getPreviousIssueKeyAfterRank=function(e){var t=s.first(e);return this.getPreviousIssueKey(t)},r.prototype.getPreviousIssueKey=function(e){for(var t=this.getIssueIndex(e),s=this.data.visibleIssueKeys;--t>=0;){var r=s.get(t);if(!this.isIssueHidden(r))return r}return!1},r.prototype.getIssueRange=function(e,t){var r,i,a=[],n=this.data.visibleIssueKeys,u=this.getIssueIndex(e),o=this.getIssueIndex(t);if(s.isUndefined(u)||s.isUndefined(o))return a;if(u<o)for(r=u;r<=o;r++)i=n.get(r),this.isIssueHiddenBySearchByKey(i)||a.push(i);else for(r=u;o<=r;r--)i=n.get(r),this.isIssueHiddenBySearchByKey(i)||a.push(i);return a},r.prototype.canAddToSelection=function(e,t){var r=s.filter(e,function(e){return this.getIssueIndex(e)!==-1},this);return!(e.length>0&&r.length!=e.length)&&this.isIssueVisible(t)},r.prototype.removeIssues=function(e){var t=this;e="object"==typeof e?e:[e];var r=[];return s.each(e,function(e){var i=t.data.issueByKey[e];i&&(r.push(i),delete t.data.issueByKey[e],t.data.order=s.without(t.data.order,e),delete t.data.hiddenIssueKeys[e])}),this.buildCache(),r},r.prototype.getLastVisibleKeyBefore=function(e){if(void 0!==e){for(var t,s=0;s<this.data.order.length;s++){var r=this.data.order[s];if(!this._isMarkerId(r)&&this.isIssueVisible(r)&&(t=r),r===e)break}return t}},r.prototype.getOrder=function(){return this.data.order},r.prototype.setOrder=function(e){this.data.order=e,this.buildCache()},r.prototype.applySearchFilter=function(e){var t=this,s=!1;return t.data.visibleIssueKeys.forEach(function(r){var i=t.data.issueByKey[r],a=t.data.hiddenIssueKeys[r]||!1,n=!e(i,t.data.issueByKey);s=s||a!==n,n?t.data.hiddenIssueKeys[r]=!0:delete t.data.hiddenIssueKeys[r]}),s},r.prototype.areIssuesBetweenMarkers=function(e,t,r){var i=this.getIssuesBetweenMarkers(t,r),a=!0;return s.forEach(e,function(e){s.contains(i,e)||(a=!1)}),a},r.prototype.getIssuesBetweenMarkers=function(e,t){var s=this.indexOfRankable(e),r=this.indexOfRankable(t);if(s>r){var i=r;r=s,s=i}return this.getOrder().slice(s+1,r)},r.prototype.getMarkerIdBeforeId=function(e){this._isMarkerId(e)&&(e=r.getOrderKeyForMarkerId(e));var t=this.data.orderByKey[e];if(s.isUndefined(t))return!1;for(var i=t-1;i>=0;i--)if(this._isMarkerId(this.data.order[i]))return this.data.order[i];return!1},r.prototype.getLastMarkerId=function(){for(var e=!1,t=this.data.order,s=t.length,r=s-1;r>=0;r--){var i=t[r];if(this._isMarkerId(i)){e=i;break}}return e},r.prototype.getMarkerIds=function(){var e=[];return s.each(this.data.order,function(t){this._isMarkerId(t)&&e.push(t)},this),e},r.prototype.withoutArray=function(e,t){var r=e;return s.each(t,function(e){r=s.without(r,e)}),r},r.prototype._first=function(e,t){return t=parseInt(t,10),0===t?[]:s.first(e,t)},r.prototype.getIssueCount=function(){var e=0;return s.each(this.data.issueByKey,function(t){e++}),e},r.prototype.getAllInvisibleIssuesData=function(){var e=this.data.order;return this._getInvisibleIssuesDataForKeys(e)},r.prototype.getAllVisibleIssuesData=function(){var e=this.data.order;return this._getVisibleIssuesDataForKeys(e)},r.prototype.getVisibleIssuesDataBeforeIncludingKey=function(e){var t=this.indexOfRankable(e);if(t<0)return[];var s=this.data.order.slice(0,t+1);return this._getVisibleIssuesDataForKeys(s)},r.prototype.getVisibleIssuesDataAfterKey=function(e){var t=this.indexOfRankable(e);if(t<0)return[];var s=this.data.order.slice(t+1);return this._getVisibleIssuesDataForKeys(s)},r.prototype.getSubtasks=function(e){return this.getSubtasksKeys(e).map(function(e){return this.getIssueData(e)}.bind(this))},r.prototype.getSubtasksKeys=function(e){var t=this.data.parentSubtaskKeys[e];if(!s.isUndefined(t))return t;var r=this.getIssueDataForId(e);return r?this.data.parentSubtaskKeys[r.key]||[]:[]},r.prototype.isParent=function(e){return!!this.data.parentSubtaskKeys[e]},r.prototype.getParentKey=function(e){return this.isSubtask(e)?this.getIssueData(e).parentKey:e},r.prototype._getVisibleIssuesDataForKeys=function(e){var t=[];return s.each(e,function(e){if(this.isIssueVisible(e)){var s=this.getIssueData(e);t.push(s)}},this),t},r.prototype._getInvisibleIssuesDataForKeys=function(e){var t=[];return s.each(e,function(e){var s=this.getIssueData(e);(s.hidden||this.isIssueHiddenBySearchByKey(e))&&t.push(s)},this),t},r.prototype.getIssuesExcludingSubtasks=function(){return s.filter(this.data.issueByKey,function(e){return s.isUndefined(e.parentId)})},r});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/IssueMoveController.js' */
define("jira-agile/rapid/ui/plan/issue-move-controller",["require"],function(t){"use strict";var r,n=t("underscore"),e=t("jquery"),i=t("jira-agile/rapid/global-events"),a=t("jira-agile/rapid/ui/plan/backlog-model"),u=t("jira-agile/rapid/ui/plan/backlog-statistics"),s=t("jira-agile/rapid/ui/plan/sprint-model");i.on("pre-initialization",function(){r=t("jira-agile/rapid/ui/plan/backlog-controller")});var o={};return o.confirmMove=function(t){var r=e.Deferred(),n=o.isMoveFromActiveSprints(t),i=o.isAddToActiveSprint(t);return n?GH.RemoveIssuesFromSprintDialog.constructDialog(t,r):i?GH.AddIssuesToActiveSprintDialog.showDialog(t,r):r.resolve(t),r},o.calculateIssueMoveModel=function(t,e){var i=null,o=null,c=!1,p=!1;n.each(a.getAllModels(),function(r){var n=s.isSprintModel(r);r.getIssueList().areIssuesValid(t)&&(i=r,c=n),e&&n&&r.getSprintId()===e?(o=r,p=!0):e||n||(o=r,p=!1)});var l=c&&!i.isFutureSprint()&&(!p||o.isFutureSprint()),g=[],S=[];if(l){var d=[],f=i.getIssueList();n.each(t,function(t){var r=f.getIssueData(t);r&&d.push(r)});var v=r.rapidViewConfig.columns,m=u.splitIssuesIntoNotDoneAndDone(d,v);g=n.map(m.notDone,function(t){return t.key}),S=n.map(m.done,function(t){return t.key})}else g=t;return{changes:[{currentSprint:c?i.getSprintData():null,targetSprint:p?o.getSprintData():null,issueKeys:g,doneIssueKeys:S}]}},o.isMoveBetweenActiveSprints=function(t){return n.some(t.changes,function(t){var r=t.currentSprint&&"FUTURE"!=t.currentSprint.state,n=t.targetSprint&&"FUTURE"!=t.targetSprint.state;return r&&n})},o.isMoveFromActiveSprints=function(t){return n.some(t.changes,function(t){var r=t.currentSprint&&"FUTURE"!=t.currentSprint.state,n=t.currentSprint&&t.targetSprint&&t.currentSprint.id===t.targetSprint.id;return r&&!n})},o.isOnlyRankOperation=function(t){return n.some(t.changes,function(t){var r=t.currentSprint&&t.targetSprint&&t.currentSprint.id===t.targetSprint.id,n=!t.currentSprint&&!t.targetSprint;return r||n})},o.isRankBetweenFutureAndBacklog=function(t){return n.some(t.changes,function(t){var r=!t.currentSprint||"FUTURE"===t.currentSprint.state,n=!t.targetSprint||"FUTURE"===t.targetSprint.state;return r&&n})},o.isMoveToBacklog=function(t){return n.some(t.changes,function(t){var r=!!t.currentSprint,n=!t.targetSprint;return r&&n})},o.isSourceBacklog=function(t){return n.some(t.changes,function(t){return!t.currentSprint})},o.isTargetBacklog=function(t){return n.some(t.changes,function(t){return!t.targetSprint})},o.isAddToActiveSprint=function(t){return n.some(t.changes,function(t){var r=t.targetSprint&&"FUTURE"!==t.targetSprint.state,n=!t.currentSprint||!t.targetSprint||t.currentSprint.id!==t.targetSprint.id;return n&&r})},o.getAllIssueKeys=function(t){var r=[];return n.each(t.changes,function(t){r.push(t.issueKeys),r.push(t.doneIssueKeys)}),n.flatten(r,!0)},o});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/kanplan/KanPlanInlineDialog.js' */
define("jira-agile/rapid/ui/kanplan/KanPlanInlineDialog",["jquery","jira-agile/rapid/events","jira-help-tips/feature/help-tip"],function(n,i,t){"use strict";var e=function(){new i(this)};return e.prototype.getInlineDialogAnchor=function(){return this.inlineDialogContainer},e.prototype.setInlineDialogAnchor=function(n){this.inlineDialogContainer=n},e.prototype.getInlineDialog=function(){return this.dialog},e.prototype.render=function(){this.isRendered||(this.dialog=new t({title:"Kanban backlog",bodyHtml:"This column is getting full. Want an easier way to manage it?",anchor:n(document.body),showCloseButton:!0,closeButtonText:"Not now",showNextButton:!0,nextButtonText:"Tell me more",callbacks:{init:function(){this.trigger("dialog:init"),this.initEvents()}.bind(this)}}),this.dialog.show=function(){this.view.show()},this.isRendered=!0)},e.prototype.getInlineDialogDomElement=function(){return this.getInlineDialog().view.$el},e.prototype.initEvents=function(){var n=this.getInlineDialogDomElement(),i=function(){this.trigger("moreButton:click")}.bind(this);n.find(".helptip-next").off("click",i).on("click",i);var t=function(){this.trigger("closeButton:click")}.bind(this);n.find(".helptip-close").off("click",t).on("click",t),n.addClass("js-kanplan-enable-inline-dialog")},e.prototype.show=function(){this.render();var n=this.getInlineDialogAnchor();this.getInlineDialog().view.changeAnchor(n),this.getInlineDialog().show()},e.prototype.hide=function(){this.getInlineDialog()&&this.getInlineDialog().hide()},e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/kanplan/KanPlanInlineDialogController.js' */
define("jira-agile/rapid/ui/kanplan/KanPlanInlineDialogController",["jira-agile/rapid/events","jira-agile/rapid/ui/kanplan/KanPlanInlineDialog","jira-agile/rapid/ui/kanplan/KanplanEpicsInlineDialog","jira-agile/rapid/ui/kanplan/kan-plan-feature-service"],function(i,n,a,o){"use strict";function e(i){return"plan"===i?GH.EpicController.getEpicModel().getEpicList().getIssueCount():GH.GridDataController.getEpicsCount()}var s,t=new n,l="ghx.kanplan.inlineDialog.dismissed",r="jira-software.kanplan.enable-prompt.",d=20,g=3,p={};return p.init=function(){t.on("moreButton:click",function(){p.trigger(p.CONTINUE_EVENT),o.sendAnalyticsInfo(r+"tellmemore",{issueCount:s,boardId:GH.RapidBoard.State.getRapidViewId()})}),t.on("closeButton:click",function(){p.markAsDismissed(),o.showKanPlanInlineDialogDismissedFlag(),o.sendAnalyticsInfo(r+"notnow",{issueCount:s,boardId:GH.RapidBoard.State.getRapidViewId()})}),this.off(this),this.on("showepicsonboarding",this.showEpicsOnboarding,this),this.on("updateepicsonboardingposition",this.updateEpicsOnboardingDialogPosition,this)},p.changeVisibility=function(i){t.setInlineDialogAnchor(GH.WorkView.getFirstColumnHeader().find("h2")),p.isVisible(i)?(t.show(),o.sendAnalyticsInfo(r+"show",{issueCount:s,boardId:GH.RapidBoard.State.getRapidViewId()})):p.showEpicsOnboarding("work")},p.showEpicsOnboarding=function(i){p.shouldShowEpicsOnboarding(i)&&p.createEpicsOnboardingDialog(i,GH.PlanController.isEpicsColumnVisible())},p.createEpicsOnboardingDialog=function(i,n){var o=e(i);return this.epicsOnboardingDialog=new a({mode:i,epicsPanelState:n,epicsCount:o}),this.epicsOnboardingDialog.render(),this.epicsOnboardingDialog},p.shouldShowEpicsOnboarding=function(i){return this.epicsOnboardingDialog&&this.epicsOnboardingDialog.hide(),!(!GH.RapidBoard.State.isKanbanBoard()||!GH.RapidViewConfig.kanPlanEnabled)&&(!o.shouldShowAcknowledge()&&(!!o.shouldShowEpicsPanel()&&(!(e(i)<1)&&!!o.shouldShowEpicsOnboarding(i))))},p.updateEpicsOnboardingDialogPosition=function(i){this.epicsOnboardingDialog&&this.epicsOnboardingDialog.updatePosition(i)},p.hide=function(){t.hide()},p.isVisible=function(i){return!(!GH.RapidBoard.State.isKanbanBoard()||GH.RapidViewConfig.kanPlanEnabled)&&(!!o.isFeatureEnabled()&&(!(!GH.UserData.userConfig.isGlobalAdmin&&!GH.RapidViewConfig.isBoardAdmin)&&(!GH.BoardState.getPerViewValue(l)&&(!(i.getColumns().length<g)&&(s=i.getColumnIssueCount(i.getFirstColumn().id),!(s<d))))))},p.markAsDismissed=function(){GH.BoardState.setPerViewValue(l,!0)},p.CONTINUE_EVENT="kanplan.inlineDialog.continue.event",new i(p)});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/kanplan/KanPlanOnboardingController.js' */
define("jira-agile/rapid/ui/kanplan/KanPlanOnboardingController",["jira/util/browser","jira-agile/rapid/events","jira-agile/rapid/ui/kanplan/KanPlanInlineDialogController","jira-agile/rapid/ui/kanplan/KanPlanConvertDialog","jira-agile/rapid/ui/kanplan/kan-plan-feature-service"],function(a,n,i,e,o){var t,r,s={};return s.init=function(){r=GH.RapidBoard.State.getRapidViewId(),i.init(),i.on(i.CONTINUE_EVENT,function(){t.show()},this),t=new e,t.on(e.CONVERT_SUCCESS,function(){i.markAsDismissed(),GH.storage.put("gh.kanplan.onboarding.autoconvert.success.flag",!0,!0),a.reloadViaWindowLocation()},this);var n=GH.storage.get("gh.kanplan.onboarding.autoconvert.success.flag",!0);if(n){GH.storage.put("gh.kanplan.onboarding.autoconvert.success.flag",!1,!0);var s=!o.shouldShowAcknowledge();o.showAutoConvertSuccessFlag(s)}},s.update=function(a){t&&(t.setRapidViewId(r),t.setIssuesCount(a.getColumnIssueCount(a.getFirstColumn().id)),t.setColumnName(a.getFirstColumn().name),i.changeVisibility(a))},s.hide=function(){i.hide()},s});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/kanplan/KanplanEpicsInlineDialog.js' */
function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}();define("jira-agile/rapid/ui/kanplan/KanplanEpicsInlineDialog",["jquery","jira-help-tips/feature/help-tip","jira/util/formatter","jira-agile/rapid/ui/kanplan/kan-plan-feature-service"],function(e,n,t,i){"use strict";var a="plan",o="work",s="MANAGE YOUR EPICS",l="Missing your epics? They\'re still here, but now live in the epics panel in the backlog.",r="Take me there",c="No, thanks",d="Epic cards have been removed from your board and backlog, but you can still view them in the epics panel.",u="Don\'t like this change? Your board admin can switch it back.",p="OK, got it",g="Let me change this",h=Object.freeze({TAKE_ME_THERE:"jira-software.kanplan.epics.onboarding.on.work.mode.takemethere.clicked",NO_THANKS:"jira-software.kanplan.epics.onboarding.on.work.mode.nothanks.clicked",SHOWN:"jira-software.kanplan.epics.onboarding.on.work.mode.shown"}),f=Object.freeze({OK_GOT_IT:"jira-software.kanplan.epics.onboarding.on.plan.mode.okgotit.clicked",LET_ME_CHANGE_THIS:"jira-software.kanplan.epics.onboarding.on.plan.mode.letmechangethis.clicked",SHOWN:"jira-software.kanplan.epics.onboarding.on.plan.mode.shown"}),k=function(){function t(e){_classCallCheck(this,t),this.mode=e.mode,this.isEpicsPanelOpen=e.epicsPanelState,this.epicsCount=e.epicsCount;var n=this.mode===o?h.SHOWN:f.SHOWN;i.sendAnalyticsInfo(n,this.extraEventAttributes(),!0)}return _createClass(t,[{key:"render",value:function(){this.dialog=this.createDialog(),this.dialog.show(),this.dialog.refresh()}},{key:"hide",value:function(){this.dialog&&this.dialog.view.dismiss()}},{key:"createDialog",value:function(){var e=this,t={inlineDialogOpts:{gravity:"w",offsetY:50},callbacks:{init:function(){e.bindEvents()}}};return new n(Object.assign(t,this.getOptionsForMode()))}},{key:"bindEvents",value:function(){var e=this,n=this.dialog.view.$el;n.find(".helptip-next").on("click",function(){e.nextHandler()}),n.find(".helptip-close").on("click",function(){e.closeHandler()})}},{key:"getOptionsForMode",value:function(){return this.mode===o?{title:s,bodyHtml:l,anchor:e(".aui-icon.agile-icon-plan").closest("a"),showNextButton:!0,nextButtonText:r,showCloseButton:!0,closeButtonText:c,inlineDialogOpts:{offsetY:105,arrowOffsetY:-60,gravity:"w"}}:{title:s,bodyHtml:this.getTextForPlanMode(),anchor:this.getAnchor(),showNextButton:!0,nextButtonText:p,showCloseButton:this.isBoardAdmin(),closeButtonText:g}}},{key:"getAnchor",value:function(){return e(this.isEpicsPanelOpen?"#ghx-epic-column .ghx-classification-header":".js-epic-toggle")}},{key:"getTextForPlanMode",value:function(){return this.isBoardAdmin()?d:d.concat("<br/>",u)}},{key:"isBoardAdmin",value:function(){return GH.UserData.userConfig.isGlobalAdmin||GH.RapidViewConfig.isBoardAdmin}},{key:"nextHandler",value:function(){var e=this;i.dismissEpicsOnboardingDialog().done(function(){e.mode===o?(GH.RapidBoard.ViewController.setMode("plan"),i.sendAnalyticsInfo(h.TAKE_ME_THERE,e.extraEventAttributes(),!0)):i.sendAnalyticsInfo(f.OK_GOT_IT,e.extraEventAttributes(),!0)})}},{key:"closeHandler",value:function(){var e=this;i.dismissEpicsOnboardingDialog().done(function(){e.mode===a?(setTimeout(function(){GH.RapidBoard.gotoRapidViewConfiguration(GH.RapidBoard.State.getRapidViewId(),"columns")},0),i.sendAnalyticsInfo(f.LET_ME_CHANGE_THIS,e.extraEventAttributes(),!0)):i.sendAnalyticsInfo(h.NO_THANKS,e.extraEventAttributes(),!0)})}},{key:"updatePosition",value:function(e){this.isEpicsPanelOpen=e,this.dialog.dismiss(),this.render()}},{key:"extraEventAttributes",value:function(){return{epicsCount:this.epicsCount}}}]),t}();return k});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/WorkController.soy' */
// This file was automatically generated from WorkController.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.workcontroller.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.workcontroller == 'undefined') { GH.tpl.workcontroller = {}; }


GH.tpl.workcontroller.renderSkeleton = function(opt_data, opt_ignored) {
  return '<div id="ghx-pool-column"><div id="ghx-pool" data-skate-ignore></div></div><div id="ghx-detail-view" class="ghx-detail-view"></div>';
};
if (goog.DEBUG) {
  GH.tpl.workcontroller.renderSkeleton.soyTemplateName = 'GH.tpl.workcontroller.renderSkeleton';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/WorkControls.js' */
define("jira-agile/rapid/work/work-controls",["jquery"],function(i){var t={};return t.rapidViewConfig={},t.quickfilters=void 0,t.sprintfilters=void 0,t.init=function(){t.quickfilters=new GH.Components.QuickFilters("activeQuickFilters"),t.sprintfilters=new GH.Components.SprintFilters("workSprintFilters"),GH.Components.sprintFiltersInit(),t.sprintfilters.initializeInlineEdits(),i(document).delegate("#ghx-complete-sprint","click",t.openCompleteSprintDialog),i(GH).bind(GH.Dialogs.CompleteSprintDialog.EVENT_SPRINT_COMPLETED,function(t,e){i("#ghx-modes-tools .ghx-sprint-meta").remove(),GH.ReportController.selectChart("sprintRetrospective"),GH.RapidBoard.ViewController.setMode("report"),GH.SprintRetrospectiveController.sprintPicker.storeSelectedItemId(e),GH.SprintRetrospectiveController.tryMarkSprintForRetroDialog(e)}),i(GH).bind(GH.Components.EVENT_SPRINT_UPDATED,t.handleSprintUpdated)},t.setRapidViewConfig=function(i){t.rapidViewConfig=i,t.quickfilters.setRapidViewConfig(i),t.sprintfilters.setRapidViewConfig(i)},t.hasSprints=function(){return t.sprintfilters.hasSprints()},t.getBoardType=function(){return t.hasSprints()?"scrum":"kanban"},t.setSprintData=function(i,e){this.canManageSprints=e,t.sprintfilters.setSprintData(i,e),t.sprintfilters.validateActiveSprints()},t.drawSprints=function(){t.sprintfilters.drawSprints()},t.handleSprintUpdated=function(i,e){t.sprintfilters.updateSprintData(e.id,e)},t.getActiveQuickFilterIds=function(){return t.quickfilters.getActiveQuickFilters()},t.getActiveQuickFilterCount=function(){return t.getActiveQuickFilterIds().length},t.setActiveQuickFilterIds=function(i){t.quickfilters.setActiveQuickFilters(i)},t.getActiveSprintIds=function(){return t.sprintfilters.getActiveSprintFilters()},t.setActiveSprintFilterIds=function(i){t.sprintfilters.setActiveSprintFilters(i)},t.renderControls=function(){var e=i("#ghx-controls-work");e.empty(),t.rapidViewConfig.sprintSupportEnabled&&!GH.RapidBoard.ViewController.shouldShowSubnavigator()&&e.append(t.sprintfilters.renderComponent()),e.append(t.quickfilters.renderQuickFilters({mode:"work"})),GH.PresentationMode.render(!0,e),GH.ViewActions.setMode(GH.ViewActions.WORK_MODE),GH.ViewActions.setSwimlanes(!1)},t.updateSwimlaneOptions=function(i){GH.ViewActions.setSwimlanes(i)},t.openCompleteSprintDialog=function(e){e.preventDefault();var r=i(this);if(!r.hasClass("ghx-disabled")){var n=parseInt(r.attr("data-sprint-id"),10),s=t.sprintfilters.getSprintById(n);if(s){t.sprintfilters.removeDialog();var o=GH.RapidBoard.State.getRapidViewId();GH.Dialogs.CompleteSprintDialog.showDialog(o,s.id)}}},t.resizeQuickFilters=function(){t.quickfilters.quickExpanderLayout({mode:"work"})},t}),AJS.namespace("GH.WorkControls",null,require("jira-agile/rapid/work/work-controls"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/linkedpages/LinkedPagesService.js' */
GH.LinkedPagesService=function(){return{initiateRemoteLinkConversation:function(){return GH.Ajax.get({url:"/remoteLinkConversation",dataType:"text"},"remoteLinkConversation")}}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/linkedpages/LinkedPagesController.js' */
GH.LinkedPagesController={},GH.LinkedPagesController.EPIC="epic",GH.LinkedPagesController.VERSION="version",GH.LinkedPagesController.SPRINT="sprint",GH.LinkedPagesController.PLAN="plan",GH.LinkedPagesController.REPORT="report",GH.LinkedPagesController.CONFLUENCE_CREATE_PAGE_ACTION="/plugins/createcontent/init-dialog.action",GH.LinkedPagesController._dialog=null,GH.LinkedPagesController._authenticated=!1,function(){var e=require("jira-agile/rapid/analytics-tracker");GH.LinkedPagesController.analytics={show:new e("gh.linkedPages.dialog.show"),count:new e("gh.linkedPages.dialog.count"),action:new e("gh.linkedPages.dialog.action")}}(),GH.LinkedPagesController._pollingConversations=!1,GH.LinkedPagesController._dialogByLinkCreationToken={},GH.LinkedPagesController.initDialogTrigger=function(e,n,o,r){r.on("click",GH.Util.wrapPreventDefault(function(){GH.LinkedPagesController._showDialog(e,n,o,r)}))},GH.LinkedPagesController._showDialog=function(e,n,o,r){var i=new GH.LinkedPagesInlineDialog({entityType:e,agileMode:n,entityId:o,trigger:r});i.show(),GH.LinkedPagesController.analytics.show.trigger([n,e].join(".")),GH.LinkedPagesController._dialog=i,GH.LinkedPagesController._authenticated||(AJS.$(document).bind("applinks.auth.completion",GH.LinkedPagesController._handleAuthenticationCompleted),GH.LinkedPagesController._authenticated=!0)},GH.LinkedPagesController.showDialogForEpic=_.partial(GH.LinkedPagesController._showDialog,GH.LinkedPagesController.EPIC),GH.LinkedPagesController.showDialogForSprint=_.partial(GH.LinkedPagesController._showDialog,GH.LinkedPagesController.SPRINT),GH.LinkedPagesController.hideCurrentDialog=function(){GH.LinkedPagesController._dialog&&GH.LinkedPagesController._dialog.hide()},GH.LinkedPagesController.getLinkedPagesForEntity=function(e,n){switch(e){case GH.LinkedPagesController.EPIC:return GH.LinkedPagesController._getLinkedPagesForEpic(n);case GH.LinkedPagesController.VERSION:break;case GH.LinkedPagesController.SPRINT:return GH.LinkedPagesController._getLinkedPagesForSprint(n)}},GH.LinkedPagesController._getLinkedPagesForEpic=function(e){return GH.Ajax.get({url:"/epics/"+e+"/pages"},"getEpicLinkedPages").done(function(n){GH.PageIssueLinksModel.set(e,n.pages),GH.LinkedPagesController.analytics.count.trigger("epic","pages",n.pages.length)})},GH.LinkedPagesController._getLinkedPagesForSprint=function(e){return GH.Ajax.get({url:"/sprint/"+e+"/pages"},"getSprintLinkedPages").done(function(n){GH.PageIssueLinksModel.set(e,n.pages),GH.LinkedPagesController.analytics.count.trigger("sprint","pages",n.pages.length)})},GH.LinkedPagesController.startRemoteLinkCreationConversation=function(e){return GH.LinkedPagesController._ensurePolling(),GH.LinkedPagesService.initiateRemoteLinkConversation().done(function(n){GH.LinkedPagesController._dialogByLinkCreationToken[n]=e})},GH.LinkedPagesController.removeLinkedPage=function(e,n,o){var r;switch(e){case GH.LinkedPagesController.EPIC:r=GH.Ajax.del({url:"/issuelink/"+o});break;case GH.LinkedPagesController.VERSION:break;case GH.LinkedPagesController.SPRINT:r=GH.Ajax.del({url:"/api/sprints/"+n+"/remotelink/"+o})}return r.done(function(){GH.PageIssueLinksModel.removeLink(n,o),GH.LinkedPagesController.analytics.action.trigger([e,"removeLink"].join("."))}),r},GH.LinkedPagesController.searchPages=function(e,n,o){return GH.PageSearchRequestService.search(n,o).andThen(function(e){var o=GH.PageIssueLinksModel.list(n);return e.pages=_.reject(e.pages,function(e){return _.findWhere(o,{pageId:e.id})}),GH.PagesSearchModel.set(n,e.pages),e})},GH.LinkedPagesController.addLink=function(e,n,o,r){switch(e){case GH.LinkedPagesController.EPIC:return GH.LinkedPagesController._addLinkForEpic(n,o);case GH.LinkedPagesController.VERSION:break;case GH.LinkedPagesController.SPRINT:return GH.LinkedPagesController._addLinkForSprint(n,o,r)}},GH.LinkedPagesController._addLinkForEpic=function(e,n){return GH.Ajax.post({url:"/epics/"+e+"/pages",data:{pageId:n}},"addConfluencePageToEpic").andThen(function(o){var r=o.success;return GH.PageIssueLinksModel.addLink(e,r),GH.PagesSearchModel.removePage(e,n),GH.LinkedPagesController.analytics.action.trigger("epic.addLink"),r})},GH.LinkedPagesController._addLinkForSprint=function(e,n,o){return GH.Ajax.post({url:"/sprint/"+e+"/pages",data:{pageId:n,pageTitle:o}},"addConfluencePageToSprint").andThen(function(o){var r=o.success;return GH.PageIssueLinksModel.addLink(e,r),GH.PagesSearchModel.removePage(e,n),GH.LinkedPagesController.analytics.action.trigger("sprint.addLink"),r})},GH.LinkedPagesController._handleAuthenticationCompleted=function(e,n,o,r,i){var a=GH.LinkedPagesController._dialog;o&&a?a.isSearchMode()?(a.showSearch(a.getSearchQuery()),a.refresh()):a.show():GH.Notification.showWarning("Authentication with Confluence failed. Please check your credentials or Application Links configuration in Confluence.")},GH.LinkedPagesController._ensurePolling=function(){GH.LinkedPagesController._pollingConversations||(GH.Poller.addPoller("linkedPagePoller",function(){GH.Ajax.get({url:"/remoteLinkConversation/statuses",traditional:!0,data:{token:_.keys(GH.LinkedPagesController._dialogByLinkCreationToken)}},"remoteLinksConversationStatuses").done(function(e){var n=_.pluck(_.where(e,{status:"REDEEMED"}),"token"),o=_.pick(GH.LinkedPagesController._dialogByLinkCreationToken,n);_.each(o,function(e,n){var o=GH.LinkedPagesController._dialog;o===e&&o.isVisible()&&o.show(),delete GH.LinkedPagesController._dialogByLinkCreationToken[n]})})}),GH.LinkedPagesController._pollingConversations=!0)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/linkedpages/PageSearchRequestService.js' */
GH.PageSearchRequestService={},GH.PageSearchRequestService.delay=400,GH.PageSearchRequestService.timeoutId=null,GH.PageSearchRequestService.search=function(e,c){GH.PageSearchRequestService.cancel();var t=AJS.$.Deferred();return GH.PageSearchRequestService.timeoutId=setTimeout(function(){GH.PageSearchRequestService._execute(t,e,c)},GH.PageSearchRequestService.delay),t.promise()},GH.PageSearchRequestService.cancel=function(){null!=GH.PageSearchRequestService.timeoutId&&(clearTimeout(GH.PageSearchRequestService.timeoutId),GH.PageSearchRequestService.timeoutId=null)},GH.PageSearchRequestService._scheduleRequest=function(e,c){GH.PageSearchRequestService.timeoutId=setTimeout(function(){GH.PageSearchRequestService._execute(e,c)},GH.PageSearchRequestService.delay)},GH.PageSearchRequestService._execute=function(e,c,t){var r=GH.PageSearchRequestService.timeoutId,a=GH.Ajax.get({url:"/integration/confluence/pages/search",data:{searchQuery:t},deferErrorHandling:!0},"searchConfluencePagesForEpic");a.done(function(c){r===GH.PageSearchRequestService.timeoutId&&(GH.PageSearchRequestService._replaceHighlightTokensWithHtml(c.pages),e.resolveWith(e,arguments))}),a.fail(function(c){r===GH.PageSearchRequestService.timeoutId&&e.rejectWith(e,arguments)})},GH.PageSearchRequestService.HIGHLIGHT_TOKEN_START="@@@hl@@@",GH.PageSearchRequestService.HIGHLIGHT_TOKEN_END="@@@endhl@@@",GH.PageSearchRequestService._replaceHighlightTokensWithHtml=function(e){var c=function(e){return e.replace(new RegExp(GH.PageSearchRequestService.HIGHLIGHT_TOKEN_START,"g"),"<strong>").replace(new RegExp(GH.PageSearchRequestService.HIGHLIGHT_TOKEN_END,"g"),"</strong>")},t=function(e){return e.replace(new RegExp(GH.PageSearchRequestService.HIGHLIGHT_TOKEN_START,"g"),"").replace(new RegExp(GH.PageSearchRequestService.HIGHLIGHT_TOKEN_END,"g"),"")};return _.each(e,function(e){e.title&&(e.titleHtml=c(e.title),e.title=t(e.title)),e.space&&(e.spaceHtml=c(e.space),e.space=t(e.space))}),e};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/linkedpages/PageIssueLinksModel.js' */
GH.PageIssueLinksModel={},GH.PageIssueLinksModel.model={},GH.PageIssueLinksModel.set=function(e,s){GH.PageIssueLinksModel.model[e]=s},GH.PageIssueLinksModel.get=function(e,s){return _.find(GH.PageIssueLinksModel.model[e],function(e){return e.id===s})},GH.PageIssueLinksModel.list=function(e){return GH.PageIssueLinksModel.model[e]||[]},GH.PageIssueLinksModel.removeLink=function(e,s){s=parseInt(s,10),GH.PageIssueLinksModel.model[e]=_.reject(GH.PageIssueLinksModel.model[e],function(e){return e.id===s})},GH.PageIssueLinksModel.addLink=function(e,s){_.isArray(GH.PageIssueLinksModel.model[e])||(GH.PageIssueLinksModel.model[e]=[]),GH.PageIssueLinksModel.model[e].push(s)},GH.PageIssueLinksModel.clear=function(e){delete GH.PageIssueLinksModel.model[e]};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/linkedpages/PagesSearchModel.js' */
GH.PagesSearchModel={},GH.PagesSearchModel.model={},GH.PagesSearchModel.set=function(e,a){GH.PagesSearchModel.model[e]=a},GH.PagesSearchModel.list=function(e){return GH.PagesSearchModel.model[e]},GH.PagesSearchModel.get=function(e,a){return a=parseInt(a,10),_.find(GH.PagesSearchModel.model[e],function(e){return e.id===a})},GH.PagesSearchModel.removePage=function(e,a){a=parseInt(a,10),GH.PagesSearchModel.model[e]=_.reject(GH.PagesSearchModel.model[e],function(e){return e.id===a})},GH.PagesSearchModel.clear=function(e){delete GH.PagesSearchModel.model[e]};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/linkedpages/LinkedPagesCommon.soy' */
// This file was automatically generated from LinkedPagesCommon.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.component.linkedpages.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.component == 'undefined') { GH.tpl.component = {}; }
if (typeof GH.tpl.component.linkedpages == 'undefined') { GH.tpl.component.linkedpages = {}; }


GH.tpl.component.linkedpages.createPageInputs = function(opt_data, opt_ignored) {
  return '<input type="hidden" name="' + soy.$$escapeHtml(opt_data.entityTypeParam) + '" value="' + soy.$$escapeHtml(opt_data.entityId) + '"><input type="hidden" name="applinkId" value="' + soy.$$escapeHtml(opt_data.applinkId) + '"><input type="hidden" name="agileMode" value="' + soy.$$escapeHtml(opt_data.agileMode) + '">' + ((opt_data.fallbackUrl) ? '<input type="hidden" name="fallbackUrl" value="' + soy.$$escapeHtml(opt_data.fallbackUrl) + '">' : '');
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.createPageInputs.soyTemplateName = 'GH.tpl.component.linkedpages.createPageInputs';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/linkedpages/LinkedPagesInlineDialog.js' */
GH.LinkedPagesInlineDialog=function(e){if(this.entityType=e.entityType,"sprint"==this.entityType)this.entityTypeParam="sprintId";else{if("epic"!=this.entityType)throw new Error("Did not understand entity type: "+this.entityType);this.entityTypeParam="issueKey"}this.entityId=e.entityId,this.agileMode=e.agileMode,this.$trigger=e.trigger,this.$content=null,this.dialog=null,this.dialogOptions=_.extend({},GH.LinkedPagesInlineDialog.DIALOG_OPTIONS)},GH.LinkedPagesInlineDialog.INITIAL_SHOWN_PAGES_COUNT=3,GH.LinkedPagesInlineDialog.DIALOG_OPTIONS={fadeTime:0,noBind:!0,width:300,cacheContent:!1,hideDelay:6e4},GH.LinkedPagesInlineDialog.prototype.isVisible=function(){return AJS.$("#inline-dialog-viewPagesDialog").is(":visible")},GH.LinkedPagesInlineDialog.prototype.show=function(){return this.showDeferred=AJS.$.Deferred(),this.dialog=GH.SideInlineDialog.create("viewPagesDialog",this.$trigger,_.bind(this._render,this),this.dialogOptions),this.dialog.show(),this.showDeferred.promise()},GH.LinkedPagesInlineDialog.prototype.hide=function(){this.dialog.hide()},GH.LinkedPagesInlineDialog.prototype.refresh=function(){this.dialog.refresh()},GH.LinkedPagesInlineDialog.prototype._render=function(e,i,n){this.$content=e,this.showDeferred.notify("EmptyBegin"),e.html(GH.tpl.component.linkedpages.renderEmptyDialog({entityId:this.entityId})),this.showDeferred.notify("EmptyRender"),e.click(function(e){e.stopPropagation()}),e.closest(".aui-inline-dialog").addClass("ghx-inline-dialog"),e.find(".ghx-progress-indicator.ghx-initial").spin("medium"),_.isFunction(n)&&n(),this.showDeferred.notify("EmptyDone"),this.showDeferred.notify("AjaxCall");var t=GH.LinkedPagesController.getLinkedPagesForEntity(this.entityType,this.entityId);return t.done(_.bind(function(i){this.showDeferred.notify("AjaxDone");var t=_.findWhere(i.applicationLinks,{primary:!0}),a=!!t&&t.url+GH.LinkedPagesController.CONFLUENCE_CREATE_PAGE_ACTION;e.find(".ghx-progress-indicator.ghx-initial").spin("medium");var s=i.pages;this.canModify=i.canModifyPages,this.applicationLinks=i.applicationLinks;var o=s.length>0&&i.applicationLinks.length<=1&&_.all(s,function(e){return e.serverUnavailable}),l=_.where(s,{authenticationRequired:!0}),r=_.groupBy(l,"applicationLinkId"),d=_.keys(r),h=_.map(d,function(e){var n=r[e][0].authenticationUrl,t=_.findWhere(i.applicationLinks,{id:e});return{applicationLink:t,authenticateUrl:n}}),c=s.length,g=GH.LinkedPagesInlineDialog.INITIAL_SHOWN_PAGES_COUNT;g+1==c&&g++,this.showDeferred.notify("ContentRender"),e.html(GH.tpl.component.linkedpages.renderDialog({entityId:this.entityId,entityType:this.entityType,linkedPages:s,initiallyShownCount:g,canEdit:this.canModify,appLink:t,serverUnavailable:o,needAuthenticationApplications:h})),this._updateViewLinkedPagesText(s.length),e.find("a.applink-authenticate").click(function(e){window.open(this.href,"com_atlassian_applinks_authentication"),e.preventDefault()}),e.closest(".aui-inline-dialog").addClass("ghx-inline-dialog"),this._initCreateAndLink({createPageAction:a,entityId:this.entityId,entityType:this.entityType,entityTypeParam:this.entityTypeParam,agileMode:this.agileMode,jiraApplicationId:i.jiraApplicationId,jiraUrl:i.jiraBaseUrl}),e.find(".js-wiki-remove").click(_.bind(this._handleRemovePageClick,this)),e.find(".js-wiki-view-more-pages-link").click(_.bind(this._handleShowMoreClick,this));var p=e.find(".js-page-search");p.click(function(e){return e.preventDefault(),!1}),p.keydown(_.bind(this._handleSelectNextItem,this)),p.keydown(_.bind(this._handleSelectPreviousItem,this)),p.keydown(_.bind(this._handleAddSelectedItem,this)),p.keyup(_.bind(this._handlePageSearchQueryChanged,this)),e.find(".js-search-panel-hide").on("click",_.bind(this._handleCloseSearchPanelClick,this)),e.find(".js-search-page-icon").click(_.bind(this._handleClearSearchIconClick,this)),this._showLinkedPagesPanel(),_.isFunction(n)&&n(),this.showDeferred.notify("ContentDone"),this.dialog.refresh(),this.showDeferred.resolve()},this)),!1},GH.LinkedPagesInlineDialog.prototype._renderPageSearchResults=function(e){this._hideSearchingSpinner();var i=this.$content.find(".js-entity-view-pages-search-result");if(e.authenticationRequired){var n=_.findWhere(this.applicationLinks,{id:e.applicationLinkId})||{};i.html(GH.tpl.component.linkedpages.renderSearchAuthenticationRequest({authenticationUrl:e.authenticationUrl,authenticationLinkUrl:n.url,authenticationLinkName:n.name})),i.find("a.applink-authenticate").click(function(e){window.open(this.href,"com_atlassian_applinks_authentication"),e.preventDefault()})}else i.html(GH.tpl.component.linkedpages.renderPageResults({pages:e.pages,isComplete:e.isComplete})),e.pages.length&&this._reselectItem("first",_.identity),i.find(".ghx-doco-list-item").click(_.bind(this._handlePageSearchResultClick,this))},GH.LinkedPagesInlineDialog.prototype._renderPageSearchFailed=function(e){this._hideSearchingSpinner();var i=e.getGlobalErrors();AJS.messages.warning(AJS.$(".js-link-page-panel"),{title:AJS.format("Error while searching",""),body:i&&i[0].message})},GH.LinkedPagesInlineDialog.prototype._handleCloseSearchPanelClick=GH.Util.wrapPreventDefault(function(e){this._showLinkedPagesPanel()}),GH.LinkedPagesInlineDialog.prototype._handleClearSearchIconClick=function(e){return GH.PageSearchRequestService.cancel(),this._emptySearchResults(),this._hideSearchingSpinner(),this.$content.find(".js-search-existing-pages-input").val(""),e.preventDefault(),!1},GH.LinkedPagesInlineDialog.prototype._handleRemovePageClick=function(e){var i=AJS.$(e.target),n=i.attr("data-page-id");i.hide().closest("li").find(".js-wiki-spin").removeClass("ghx-hidden").find(".ghx-progress-indicator.ghx-small").spin("small");var t=GH.LinkedPagesController.removeLinkedPage(this.entityType,this.entityId,n);return t.done(_.bind(function(){i.closest("li").remove();var e=GH.PageIssueLinksModel.list(this.entityId);0===e.length&&this.$content.find(".js-no-linked-pages").removeClass("hidden"),this._updateViewLinkedPagesText(e.length)},this)),this._showMoreLinkedPages(),e.preventDefault(),!1},GH.LinkedPagesInlineDialog.prototype._handleShowMoreClick=function(e){return e.preventDefault(),e.stopPropagation(),this._showMoreLinkedPages(),!1},GH.LinkedPagesInlineDialog.prototype._handlePageSearchQueryChanged=function(e){if(13!=e.keyCode&&38!=e.keyCode&&40!=e.keyCode){var i=AJS.$(e.target).val();this._performSearch(i)}},GH.LinkedPagesInlineDialog.prototype._performSearch=function(e){this._emptySearchResults(),e.length>0?(GH.LinkedPagesController.searchPages(this.entityType,this.entityId,e).done(_.bind(this._renderPageSearchResults,this)).fail(_.bind(this._renderPageSearchFailed,this)),this._showSearchingSpinner(),this._showClearSearchIcon()):this._hideClearSearchIcon()},GH.LinkedPagesInlineDialog.prototype._handleSelectNextItem=function(e){if(40==e.keyCode)return e.preventDefault(),this._reselectItem("first",function(e){return e+1})},GH.LinkedPagesInlineDialog.prototype._handleSelectPreviousItem=function(e){if(38==e.keyCode)return e.preventDefault(),this._reselectItem("last",function(e){return e-1})},GH.LinkedPagesInlineDialog.prototype._reselectItem=function(e,i){var n=AJS.$(".ghx-doco-list-result");if(0!==n.length){var t=n.filter(".ghx-doco-list-selected"),a=null;if(0===t.length)a=n[e]();else{var s=n.index(t);t.removeClass("ghx-doco-list-selected");var o=i(s);a=o<0||o>n.length-1?n[e]():AJS.$(n[o])}if(a){a.addClass("ghx-doco-list-selected");var l=a.parent(),r=l.position().top,d=r+l.height(),h=a.position().top,c=a.height();(h<r||d<h+c)&&a.get(0).scrollIntoView()}}},GH.LinkedPagesInlineDialog.prototype._handleAddSelectedItem=function(e){if(13==e.keyCode){e.preventDefault();var i=AJS.$(".ghx-doco-list-result"),n=i.filter(".ghx-doco-list-selected");0!==n.length&&this._addSearchResult(n)}},GH.LinkedPagesInlineDialog.prototype._handlePageSearchResultClick=function(e){e.preventDefault();var i=AJS.$(e.target).closest("[data-page-id]");this._addSearchResult(i)},GH.LinkedPagesInlineDialog.prototype._addSearchResult=function(e){var i=e.attr("data-page-id"),n=GH.PagesSearchModel.get(this.entityId,i),t=this.$content.find(".js-linked-pages-list"),a=n.title;this._showMoreLinkedPages();var s=AJS.$(GH.tpl.component.linkedpages.renderStubLinkedPageListItem({pageTitle:a}));t.append(s);var o=GH.LinkedPagesController.addLink(this.entityType,this.entityId,i,a);o.done(_.bind(function(e){var i=AJS.$(GH.tpl.component.linkedpages.renderLinkedPageListItem({page:e,entityId:this.entityId,canEdit:this.canModify,hidden:!1}));s.replaceWith(i),i.find(".js-wiki-remove").click(_.bind(this._handleRemovePageClick,this)),i.hide().fadeIn(200),this._updateViewLinkedPagesText(GH.PageIssueLinksModel.list(this.entityId).length)},this)),e.parent().fadeOut(200,function(){e.parent().remove()}),this.$content.find(".js-no-linked-pages").addClass("hidden"),this._showLinkedPagesPanel()},GH.LinkedPagesInlineDialog.prototype._emptySearchResults=function(){this.$content.find(".js-entity-view-pages-search-result").empty(),this._hideClearSearchIcon(),this.$content.find(".js-link-page-panel").find(".aui-message").remove()},GH.LinkedPagesInlineDialog.prototype._showClearSearchIcon=function(){this.$content.find(".js-search-page-icon").removeClass("aui-iconfont-search-small ghx-iconfont-inactive").addClass("aui-iconfont-remove")},GH.LinkedPagesInlineDialog.prototype._hideClearSearchIcon=function(){this.$content.find(".js-search-page-icon").removeClass("aui-iconfont-remove").addClass("ghx-iconfont-inactive aui-iconfont-search-small")},GH.LinkedPagesInlineDialog.prototype._initCreateAndLink=function(e){this.$content.find(".js-create-page-link").click(_.bind(function(){var i=window.open("","_blank");return GH.LinkedPagesController.startRemoteLinkCreationConversation(this).done(function(n){GH.LinkedPagesController.analytics.action.trigger([e.entityType,"createPage"].join("."));var t={applinkId:e.jiraApplicationId,agileMode:e.agileMode,fallbackUrl:e.jiraUrl,creationToken:n};t[e.entityTypeParam]=e.entityId,i.location=e.createPageAction+"?"+AJS.$.param(t)}),!1},this)),this.$content.find(".js-link-pages-link").click(_.bind(function(){return this._showLinkPagePanel(),!1},this))},GH.LinkedPagesInlineDialog.prototype._updateViewLinkedPagesText=function(e){var i=e>0?AJS.format("{0}{0,choice,0# Linked|1# linked|1\u003c linked} {0,choice,0# pages|1# page|1\u003c pages}",e):AJS.format("{0}{0,choice,0# Linked|1# linked|1\u003c linked} {0,choice,0# pages|1# page|1\u003c pages}","");this.$trigger.text(i);var n=e>0?AJS.format("{0} linked {0,choice,0# pages|1# page|1\u003c pages}",e):"Linked pages";this.$content.find(".js-entity-pages-header").text(n)},GH.LinkedPagesInlineDialog.prototype._showLinkPagePanel=function(){this.$content.find(".js-link-page-panel").show(),this.$content.find(".js-search-panel-hide").show(),this.$content.find(".js-linked-pages-actions").hide(),this.$content.find(".js-linked-pages-panel").hide(),this.$content.find(".js-search-existing-pages-input").focus(),this.dialog.refresh()},GH.LinkedPagesInlineDialog.prototype._showLinkedPagesPanel=function(){this.$content.find(".js-linked-pages-panel").show(),this.$content.find(".js-search-panel-hide").hide(),this.$content.find(".js-linked-pages-actions").show(),this.$content.find(".js-link-page-panel").hide(),this.$content.find(".js-entity-view-pages-search-result").empty(),this.$content.find(".js-search-existing-pages-input").val(""),this._hideClearSearchIcon(),this.dialog.refresh()},GH.LinkedPagesInlineDialog.prototype._showMoreLinkedPages=function(){this.$content.find(".ghx-doco-list-item").show(),this.$content.find(".ghx-doco-list-view-more").hide()},GH.LinkedPagesInlineDialog.prototype._showSearchingSpinner=function(){var e=this.$content.find(".js-entity-view-pages-searching");e.hasClass("hidden")&&e.removeClass("hidden").spin("medium")},GH.LinkedPagesInlineDialog.prototype._hideSearchingSpinner=function(){this.$content.find(".js-entity-view-pages-searching").addClass("hidden")},GH.LinkedPagesInlineDialog.prototype._hideClearSearchIcon=function(){this.$content.find(".js-search-page-icon").removeClass("aui-iconfont-remove").addClass("ghx-iconfont-inactive").addClass("aui-iconfont-search-small")},GH.LinkedPagesInlineDialog.prototype.isSearchMode=function(){return this.$content.find(".js-link-page-panel").is(":visible")},GH.LinkedPagesInlineDialog.prototype.getSearchQuery=function(){return this.$content.find(".js-search-existing-pages-input").val()},GH.LinkedPagesInlineDialog.prototype.showSearch=function(e){this._showLinkPagePanel(),this.$content.find(".js-search-existing-pages-input").val(e).focus(),this._performSearch(e)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/linkedpages/LinkedPagesInlineDialog.soy' */
// This file was automatically generated from LinkedPagesInlineDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.component.linkedpages.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.component == 'undefined') { GH.tpl.component = {}; }
if (typeof GH.tpl.component.linkedpages == 'undefined') { GH.tpl.component.linkedpages = {}; }


GH.tpl.component.linkedpages.renderDialogHeader = function(opt_data, opt_ignored) {
  return '<h2>' + aui.buttons.button({extraClasses: ['js-search-panel-hide', 'ghx-search-return', 'aui-button-link'], text: "Back"}) + '<span class="js-pages-header">' + soy.$$escapeHtml("Linked pages") + '</span></h2>';
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderDialogHeader.soyTemplateName = 'GH.tpl.component.linkedpages.renderDialogHeader';
}


GH.tpl.component.linkedpages.renderEmptyDialog = function(opt_data, opt_ignored) {
  return '<div class="ghx-linked-pages-inline-dialog-panel ghx-inline-dialog-content js-entity-view-pages-content" data-entity-id="' + soy.$$escapeHtml(opt_data.entityId) + '">' + GH.tpl.component.linkedpages.renderDialogHeader(null) + '<div class="ghx-progress-indicator ghx-initial"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderEmptyDialog.soyTemplateName = 'GH.tpl.component.linkedpages.renderEmptyDialog';
}


GH.tpl.component.linkedpages.renderDialog = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-linked-pages-inline-dialog-panel ghx-inline-dialog-content js-entity-view-pages-content" data-entity-id="' + soy.$$escapeHtml(opt_data.entityId) + '">' + GH.tpl.component.linkedpages.renderDialogHeader(null) + '<div class="ghx-inline-dialog-container ghx-full-width js-linked-pages-panel">';
  if (opt_data.serverUnavailable) {
    output += '<p class="ghx-embedded">' + soy.$$escapeHtml("The Confluence server is currently unreachable.") + '</p>';
  } else if (! opt_data.appLink) {
    output += '<p class="ghx-embedded">' + soy.$$escapeHtml("No Confluence server is configured. Please check your Application Links configuration.") + '</p>';
  } else {
    output += ((opt_data.needAuthenticationApplications.length > 0) ? GH.tpl.component.linkedpages.renderAuthenticationRequest(opt_data) : '') + '<div class="ghx-embedded js-no-linked-pages ' + ((opt_data.linkedPages.length > 0) ? 'hidden' : '') + '">' + ((opt_data.canEdit) ? '<p>' + soy.$$escapeHtml("No linked pages yet.") + ' ' + ((opt_data.entityType == 'sprint') ? soy.$$filterNoAutoescape(AJS.format("Try linking meeting notes or {0}create a new page{1}.",'<a class="js-create-page-link">','</a>')) : soy.$$filterNoAutoescape(AJS.format("Try linking requirements pages or {0}create a new page{1}.",'<a class="js-create-page-link">','</a>'))) + '</p>' : '<p>' + soy.$$escapeHtml("No linked pages yet.") + ' ' + soy.$$escapeHtml("Edit Issue permissions are required to add pages.") + '</p>') + '</div><ul class="ghx-doco-list js-linked-pages-list">';
    var pageList61 = opt_data.linkedPages;
    var pageListLen61 = pageList61.length;
    for (var pageIndex61 = 0; pageIndex61 < pageListLen61; pageIndex61++) {
      var pageData61 = pageList61[pageIndex61];
      output += GH.tpl.component.linkedpages.renderLinkedPageListItem({page: pageData61, entityId: opt_data.entityId, canEdit: opt_data.canEdit, hidden: pageIndex61 > opt_data.initiallyShownCount - 1});
    }
    output += '</ul>';
    if (opt_data.linkedPages.length > opt_data.initiallyShownCount) {
      output += '<div class="ghx-doco-list-view-more">';
      var viewMoreText__soy72 = '' + soy.$$escapeHtml(AJS.format("{0} more\u2026",opt_data.linkedPages.length - opt_data.initiallyShownCount));
      output += aui.buttons.button({extraClasses: ['js-wiki-view-more-pages-link', 'aui-button-link'], text: viewMoreText__soy72}) + '</div>';
    }
  }
  output += '</div>' + ((opt_data.canEdit && ! opt_data.serverUnavailable && opt_data.appLink) ? GH.tpl.component.linkedpages.renderPagesActions(null) : '') + ((opt_data.canEdit && ! opt_data.serverUnavailable && opt_data.appLink) ? GH.tpl.component.linkedpages.renderSearchPagesPanel(null) : '') + '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderDialog.soyTemplateName = 'GH.tpl.component.linkedpages.renderDialog';
}


GH.tpl.component.linkedpages.renderAuthenticationRequest = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-embedded"><span class="applinks-auth-request"><span class="applinks-request-description">' + soy.$$escapeHtml("Please authenticate to view more:") + '<ul>';
  var appList90 = opt_data.needAuthenticationApplications;
  var appListLen90 = appList90.length;
  for (var appIndex90 = 0; appIndex90 < appListLen90; appIndex90++) {
    var appData90 = appList90[appIndex90];
    var authenticateLink__soy91 = '<a href="' + soy.$$escapeHtml(appData90.authenticateUrl) + '" class="applink-authenticate">';
    var serverLink__soy95 = '<a href="' + soy.$$escapeHtml(appData90.applicationLink.url) + '" target="_blank">' + soy.$$escapeHtml(appData90.applicationLink.name) + '</a>';
    output += '<li>' + soy.$$filterNoAutoescape(AJS.format("{0}Authenticate{1} with {2}",authenticateLink__soy91,'</a>',serverLink__soy95)) + '</li>';
  }
  output += '</ul></span></span></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderAuthenticationRequest.soyTemplateName = 'GH.tpl.component.linkedpages.renderAuthenticationRequest';
}


GH.tpl.component.linkedpages.renderPagesActions = function(opt_data, opt_ignored) {
  return '<div class="ghx-inline-dialog-container ghx-divided js-linked-pages-actions" >' + aui.buttons.button({extraClasses: ['js-link-pages-link'], text: "Link page"}) + aui.buttons.button({extraClasses: ['js-create-page-link'], text: "Create page"}) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderPagesActions.soyTemplateName = 'GH.tpl.component.linkedpages.renderPagesActions';
}


GH.tpl.component.linkedpages.renderSearchPagesPanel = function(opt_data, opt_ignored) {
  return '<div class="ghx-inline-dialog-container ghx-full-width ghx-final-container js-link-page-panel"><div class="js-page-search"><form class="aui ghx-page-search-form"><input class="ghx-search aui-field check-list-field text js-search-existing-pages-input" type="text" placeholder="' + soy.$$escapeHtml("Search") + '"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-search-small js-search-page-icon js-search-trigger ghx-clickable"></span></form></div><div class="js-entity-view-pages-search-result"></div><div class="js-entity-view-pages-searching hidden"><div class="ghx-progress-indicator ghx-initial"></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderSearchPagesPanel.soyTemplateName = 'GH.tpl.component.linkedpages.renderSearchPagesPanel';
}


GH.tpl.component.linkedpages.renderPageResults = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-search-pages-result-panel"><div class="ghx-list-suggestions js-entity-view-pages-search-no-matches ' + ((opt_data.pages.length > 0) ? 'hidden' : '') + '">' + soy.$$escapeHtml("No matches") + '</div><ul class="ghx-doco-list">';
  var pageList128 = opt_data.pages;
  var pageListLen128 = pageList128.length;
  for (var pageIndex128 = 0; pageIndex128 < pageListLen128; pageIndex128++) {
    var pageData128 = pageList128[pageIndex128];
    output += '<li class="ghx-doco-list-item ghx-doco-list-result" data-page-id="' + soy.$$escapeHtml(pageData128.id) + '"><div class="ghx-doco-list-item-text"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-doc" title="' + soy.$$escapeHtml("Wiki page") + '"></span><span class="ghx-name" title="' + soy.$$escapeHtml(pageData128.title) + '">' + soy.$$filterNoAutoescape(pageData128.title) + '</span><span class="ghx-sub">' + soy.$$escapeHtml(pageData128.space) + '</span></div></li>';
  }
  output += ((! opt_data.isComplete) ? '<li class="ghx-list-suggestions">' + soy.$$escapeHtml("Continue typing to refine further") + '</li>' : '') + '</ul></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderPageResults.soyTemplateName = 'GH.tpl.component.linkedpages.renderPageResults';
}


GH.tpl.component.linkedpages.renderLinkedPageListItem = function(opt_data, opt_ignored) {
  return '<li class="ghx-doco-list-item ' + ((opt_data.hidden) ? ' ghx-hidden' : '') + '">' + ((opt_data.canEdit) ? '<div class="js-wiki-remove ghx-remove"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-remove" title="' + soy.$$escapeHtml("Remove link to this wiki page") + '" data-page-id="' + soy.$$escapeHtml(opt_data.page.id) + '" data-entity-id="' + soy.$$escapeHtml(opt_data.entityId) + '"></span></div><div class="js-wiki-spin ghx-remove-spin ghx-hidden"><span class="ghx-spinner"></span></div>' : '') + '<div class="ghx-doco-list-item-text">' + ((opt_data.page.permissionDenied || opt_data.page.authenticationRequired) ? '<span class="ghx-iconfont ghx-iconfont-inactive aui-icon aui-icon-small aui-iconfont-locked" title="' + soy.$$escapeHtml("Restricted wiki page") + '"></span>' : '<span class="ghx-iconfont ghx-iconfont-inactive aui-icon aui-icon-small aui-iconfont-doc" title="' + soy.$$escapeHtml("Wiki page") + '"></span>') + ((! opt_data.page.appLinkExists || opt_data.page.pageDeleted || opt_data.page.serverUnavailable) ? '<span class="ghx-name">' + soy.$$escapeHtml("Wiki page failed to load") + '</span>' : '<span class="ghx-name" title="' + soy.$$escapeHtml(opt_data.page.title) + '"><a target="_blank" href="' + soy.$$escapeHtml(opt_data.page.url) + '">' + soy.$$escapeHtml(opt_data.page.title) + '</a></span>') + '</div></li>';
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderLinkedPageListItem.soyTemplateName = 'GH.tpl.component.linkedpages.renderLinkedPageListItem';
}


GH.tpl.component.linkedpages.renderStubLinkedPageListItem = function(opt_data, opt_ignored) {
  return '<li class="ghx-doco-list-item"><div class="js-wiki-spin ghx-remove-spin"><span class="ghx-spinner"></span></div><span class="ghx-iconfont ghx-iconfont-inactive aui-icon aui-icon-small aui-iconfont-doc" title="' + soy.$$escapeHtml("Wiki page") + '"></span><span class="ghx-name"><a href="#">' + soy.$$escapeHtml(opt_data.pageTitle) + '</a></span></li>';
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderStubLinkedPageListItem.soyTemplateName = 'GH.tpl.component.linkedpages.renderStubLinkedPageListItem';
}


GH.tpl.component.linkedpages.renderTrigger = function(opt_data, opt_ignored) {
  var output = '';
  var buttonText__soy194 = AJS.format("{0}{0,choice,0# Linked|1# linked|1\x3c linked} {0,choice,0# pages|1# page|1\x3c pages}",opt_data.linkedPagesCount ? opt_data.linkedPagesCount : '');
  output += aui.buttons.button({extraAttributes: {title: opt_data.title}, extraClasses: ['aui-button-link', 'js-view-entity-pages', 'ghx-linked-pages-trigger'], text: buttonText__soy194});
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderTrigger.soyTemplateName = 'GH.tpl.component.linkedpages.renderTrigger';
}


GH.tpl.component.linkedpages.renderSearchAuthenticationRequest = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-embedded"><span class="applinks-auth-request"><span class="applinks-request-description">';
  var authenticateLink__soy201 = '<a href="' + soy.$$escapeHtml(opt_data.authenticationUrl) + '" class="applink-authenticate">';
  var serverLink__soy205 = '<a href="' + soy.$$escapeHtml(opt_data.authenticationLinkUrl) + '" target="_blank">' + soy.$$escapeHtml(opt_data.authenticationLinkName) + '</a>';
  output += soy.$$filterNoAutoescape(AJS.format("Please {0}Authenticate{1} with {2} to perform search",authenticateLink__soy201,'</a>',serverLink__soy205)) + '</span></span></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderSearchAuthenticationRequest.soyTemplateName = 'GH.tpl.component.linkedpages.renderSearchAuthenticationRequest';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/ReportController.js' */
define("jira-agile/rapid/ui/chart/report-controller",["require"],function(t){var e=t("jquery"),r=t("underscore"),i=t("jira-agile/rapid/analytics-tracker"),n=t("jira-agile/rapid/ui/chart/burndown-chart-controller"),a=t("jira-agile/rapid/ui/chart/cfd-controller"),o=t("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-controller"),l=t("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-report-controller"),c=t("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-report-controller"),p=t("jira-agile/rapid/ui/chart/v2/burnup/burnup-report-controller"),d=t("jira-agile/rapid/ui/chart/version-report-controller"),h=t("jira/featureflags/feature-manager"),s=t("jira-agile-sprint-actions-controller-init"),g=t("wrm/context-path"),u={};return u.charts=[],u.rapidViewData={},u.visible=!1,u.rapidViewConfig={},u.analytics=new i("gh.report"),u.ANALYTICS_TIME_SPENT_MILESTONES=[1e4,3e4,6e4,12e4,24e4,48e4],u.init=r.once(function(){u.initCharts(),r.each(u.getCharts(),function(t){t.controller.setRapidView(u.rapidViewData)}),GH.ChartTimeFrames.init(),GH.ChartFilters.init(),e(GH).bind("issueCreated",u.handleIssueCreated),e(GH).bind(GH.Dialogs.ReopenSprintDialog.EVENT_SPRINT_REOPENED,u.handleSprintReopened)}),u.initCharts=function(){u.charts=[{id:n.id,name:"Burndown Chart",description:"Track the total work remaining and project the likelihood of achieving the sprint goal. This helps your team manage its progress and respond accordingly.",tooltip:"Track the total work remaining and project the likelihood of achieving the sprint goal",preview:"burndown",controller:n},{id:GH.SprintRetrospectiveController.id,name:"Sprint Report",description:"Understand the work completed or pushed back to the backlog in each sprint. This helps you determine if your team is overcommitting or if there is excessive scope creep.",tooltip:"Understand the work completed or pushed back to the backlog in each sprint",preview:"sprint-retrospective",controller:GH.SprintRetrospectiveController},{id:GH.EpicReportController.id,name:"Epic Report",description:"Understand the progress towards completing an epic over time. This helps you manage your team\'s progress by tracking the remaining incomplete/unestimated work.",tooltip:"Understand the progress towards completing an epic over time",preview:"epic-report",controller:GH.EpicReportController},{id:l.id,name:"Epic Burndown",description:"Track the projected number of sprints required to complete the epic (optimized for Scrum). This helps you monitor whether the epic will release on time, so you can take action if work is falling behind.",tooltip:"Understand the progress towards completing an epic and the effort remaining for it to be released",howTos:[{title:"View progress",description:"See sprint by sprint progress for an epic."},{title:"View scope change",description:"Track scope added and removed, indicated by the bottom of the bars."},{title:"Predict completion",description:"Use past performance to predict the number of sprints needed until completion."}],documentation:{"url":"https://docs.atlassian.com/jira/jsw-docs-078/Epic+Burndown","isLocal":false}.url,controller:new l},{id:d.id,name:"Version Report",description:"Track the projected release date for a version. This helps you monitor whether the version will release on time, so you can take action if work is falling behind.",tooltip:"Understand the progress towards completing a version and the likelihood of releasing it on time",preview:"version-report",controller:d},{id:c.id,name:"Release Burndown",description:"Track the projected release date for a version (optimized for Scrum). This helps you monitor whether the version will release on time, so you can take action if work is falling behind.",tooltip:"Understand the progress towards completing a version and the effort remaining for it to be released",howTos:[{title:"View progress",description:"See sprint by sprint progress for a version."},{title:"View scope change",description:"Track scope added and removed, indicated by the bottom of the bars."},{title:"Predict release",description:"Use past performance to predict the number of sprints needed until completion."}],documentation:{"url":"https://docs.atlassian.com/jira/jsw-docs-078/Release+Burndown","isLocal":false}.url,controller:new c},{id:GH.VelocityChartController.id,name:"Velocity Chart",description:"Track the amount of work completed from sprint to sprint. This helps you determine your team\'s velocity and estimate the work your team can realistically achieve in future sprints.",tooltip:"Track the amount of work completed from sprint to sprint. This helps to predict future performance",preview:"velocity",controller:GH.VelocityChartController},{id:o.id,name:"Control Chart",description:"Shows the cycle time for your product, version or sprint. This helps you identify whether data from the current process can be used to determine future performance.",tooltip:"Identify whether data from the current process can be used to determine future performance. Analyse the cycle time of issues to determine patterns in your process",preview:"control-chart",howTos:[{title:"Visibility",description:"See outliers and investigate their cause to reduce them in the future."},{title:"Efficiency",description:"Decreasing rolling average indicates process improvements and increased throughput."},{title:"Predictability",description:"Narrow standard deviation through process improvements to improve predictability of cycle time."}],documentation:{"url":"https://docs.atlassian.com/jira/jsw-docs-078/Control+Chart","isLocal":false}.url,controller:o},{id:a.id,name:"Cumulative Flow Diagram",description:"Shows the statuses of issues over time. This helps you identify potential bottlenecks that need to be investigated.",tooltip:"Identify the number of issues in each status over time. An increase in the number of issues in a particular status means there could be a bottleneck to be investigated",preview:"cumulative-flow-diagram",controller:a}],h.isFeatureEnabled("com.atlassian.jira.agile.darkfeature.burnupchart")&&u.getCharts().unshift({id:"burnupChart",name:"Burnup Chart",description:"Track the total scope independently from the total work done. This helps your team manage its progress and better understand the effect of scope change.  The Burnup Chart is a JIRA Software Labs feature and is subject to change. Currently, the Burnup Chart tracks only the scope within a sprint. Please give us your valuable feedback.",tooltip:"Track the total scope independently from the total work done. This helps your team manage its progress and better understand the effect of scope change.  The Burnup Chart is a JIRA Software Labs feature and is subject to change. Currently, the Burnup Chart tracks only the scope within a sprint. Please give us your valuable feedback.",documentation:{"isLocal":false}.url,controller:new p}),r.each(u.getCharts(),function(t){t.controller.init&&t.controller.init()})},u.getCharts=function(){return u.charts},u.getApplicableCharts=function(){return r.filter(u.getCharts(),function(t){return t.controller.isApplicable(u.rapidViewConfig)})},u.isApplicableChart=function(t){var e=!1;return r.each(u.getApplicableCharts(),function(r){r.id===t&&(e=!0)}),e},u.getChart=function(t){return r.findWhere(u.charts,{id:t})},u.getSelectedChart=function(){return GH.RapidBoard.State.getChartType()},u.renderReportView=function(){var t=!GH.RapidBoard.ViewController.shouldShowSubnavigator();e("#ghx-report").html(GH.tpl.reportcontroller.renderReportView({shouldShowNavigation:t}));var r=e("#ghx-controls-report");GH.PresentationMode.render(!0,r)},u.renderReopenButton=function(t,e,i,n){if(t.empty(),"CLOSED"===n.state){var a=GH.RapidBoard.parallelSprints,o=r.any(i,function(t){return"ACTIVE"===t.state});t.append(GH.tpl.reportcontroller.renderReopenSprintButton({noSprintReopenPermissions:!GH.RapidViewConfig.canManageSprints,noParallelSprintsAndSprintActive:!a&&o})),t.find("#ghx-reopen-sprint").on("click",function(t){t.preventDefault(),GH.Dialogs.ReopenSprintDialog.showDialog(e,n.id)})}},u.renderActions=function(t,e,r,i){var n=GH.RapidBoard.State.getRapidViewId();t.empty(),u.actionsController&&u.actionsController.off(),e.length&&(u.actionsController=s.init({id:r.id,name:r.name,goal:r.goal,state:r.state,startDate:r.startDate,endDate:r.endDate},e),t.append(u.actionsController.view.$el),u.actionsController.bind("action:sprint-reopen",function(){GH.Dialogs.ReopenSprintDialog.showDialog(n,r.id)}),u.actionsController.bind("action:sprint-view-in-issuenav",function(){window.location.href=g()+"/issues/?jql="+i}),u.actionsController.on("sprint-edited sprint-deleted",function(){u.handleSprintEdited()}))},u.setRapidView=function(t){u.rapidViewData=t||{},r.each(u.getCharts(),function(t){t.controller.setRapidView(u.rapidViewData)})},u.show=function(){u.rapidViewData.id&&(u.visible=!0,GH.ChartTimeFrameService.setRapidViewId(u.rapidViewData.id),u.renderReportView(),u.loadRapidViewConfig())},u.loadRapidViewConfig=function(){var t=function(t){u.visible&&(u.rapidViewConfig=t,u.configureContent())};e.when(GH.RapidViewConfig.fetchConfiguration(u.rapidViewData.id),JIRA.API.getSidebar()).done(t)},u.configureContent=function(){GH.ViewActions.setMode(GH.ViewActions.REPORT_MODE);var t=GH.RapidBoard.State.getChartType();if(u.isApplicableChart(t)||(t=!1),!t){var e=u.getApplicableCharts();GH.RapidBoard.State.setChartType(r.first(e).id)}GH.RapidBoard.ViewController.shouldShowSubnavigator()&&GH.RapidBoard.SubnavigatorController.render(),GH.RapidBoard.ViewController.updateContentContainer(),u.showChart()},u.hide=function(){u.visible&&(u.hideCharts(),u.visible=!1,e("#ghx-report").empty(),u.analyticsTimer&&u.analyticsTimer.destroy())},u.hideCharts=function(t){r.each(u.getCharts(),function(e){e.id!==t&&e.controller.hide()})},u.selectChart=function(t){GH.SprintRetrospectiveView.clearDialog(),GH.RapidBoard.State.setChartType(t),u.showChart()},u.getCurrentChart=function(){var t=GH.RapidBoard.State.getChartType();if(t)return u.getChart(t)},u.showChart=function(){var t=u.getCurrentChart();t&&(u.updateChartMenu(t.id),u.updateChartHeader(t),u.hideCharts(),t.controller.show(),u.handleIntroState(),u.analyticsTimer&&u.analyticsTimer.destroy(),u.analyticsTimer=new GH.DurationsTimer(u.ANALYTICS_TIME_SPENT_MILESTONES).on("tick",function(e){var r=t.id+(t.inLabs?".new":"")+".view."+(u.rapidViewConfig.sprintSupportEnabled?"scrum":"kanban");u.analytics.trigger(r,"duration",e/1e3)}))},u.updateChartMenu=function(t){var r=e("#ghx-chart-nav");r.html(e(GH.tpl.reportcontroller.renderChartMenu({activeChart:t,availableCharts:u.getApplicableCharts(),board:u.rapidViewConfig})));var i=r.find("li");i.bind("simpleClick",GH.Util.wrapPreventDefault(function(t){u.handleChartSelection(t,e(this))})),e(".tipsy").remove(),GH.Tooltip.tipsify({selector:i,gravity:"w",className:"ghx-tipsy-left"})},u.updateChartHeader=function(t){var r=e("#ghx-chart-message");r.empty(),e("#ghx-chart-header .ghx-linked-pages-trigger").remove(),e("#ghx-chart-selector").empty(),e("#ghx-chart-snapshot").empty(),e(".ghx-chart-legend").hide(),e("#ghx-chart-reopen-sprint").empty(),e("#ghx-chart-actions").empty(),e("#ghx-chart-title").html(GH.tpl.reportcontroller.renderChartTitle({activeChart:t})),e("#ghx-chart-intro").html(GH.tpl.reportcontroller.renderChartIntro({activeChart:t})),e("#ghx-chart-help").html(GH.tpl.reportcontroller.renderChartDescriptionClosed()),e("#ghx-chart-panel-content").find(".js-chart-intro-toggle").on("click",function(t){u.toggleIntroState(t)})},u.handleChartSelection=function(t,e){var r=e.find("a").attr("data-chart");u.selectChart(r)},u.handleIssueCreated=function(t,e){u.visible&&GH.RapidBoard.QuickCreate.showCreatedIssuesMessage(e)},u.handleSprintReopened=function(t,r){GH.RapidBoard.ViewController.setMode("work"),GH.CallbackManager.registerCallback(GH.WorkController.CALLBACK_POOL_RENDERED,"afterSprintReopened",function(){GH.WorkControls.sprintfilters.setActiveSprintFilters([r]),e(GH.WorkControls.sprintfilters).trigger("sprintFilterChange"),GH.RapidBoard.State.pushState()})},u.handleSprintEdited=function(t,e){GH.SprintRetrospectiveController.loadSprintOptions()},u.handleIntroState=function(){GH.RapidBoard.State.getStoredChartIntroState()===!1&&u.closeIntro()},u.toggleIntroState=function(){var t=e(".ghx-intro-content"),r=e("#ghx-chart-help");t.hasClass("ghx-closed")?(t.removeClass("ghx-closed"),GH.RapidBoard.Animation.animateHeightToAuto(t),r.addClass("ghx-closed"),GH.RapidBoard.State.setChartIntroState(!0)):(GH.RapidBoard.Animation.animateHeightToZero(t).done(function(){t.addClass("ghx-closed"),r.removeClass("ghx-closed")}),GH.RapidBoard.State.setChartIntroState(!1))},u.closeIntro=function(){e(".ghx-intro-content").height(0).addClass("ghx-closed"),e("#ghx-chart-help").removeClass("ghx-closed")},u});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/ReportController.soy' */
// This file was automatically generated from ReportController.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.reportcontroller.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.reportcontroller == 'undefined') { GH.tpl.reportcontroller = {}; }


GH.tpl.reportcontroller.renderReportView = function(opt_data, opt_ignored) {
  return '<div id="ghx-report-scrollarea"><div class="aui-page-panel"><div class="aui-page-panel-inner">' + ((opt_data.shouldShowNavigation) ? '<div class="aui-page-panel-nav js-reports-nav"><nav class="aui-navgroup aui-navgroup-vertical"><div class="aui-navgroup-inner"><div class="aui-nav-heading"><strong>' + soy.$$escapeHtml("Reports") + '</strong></div><ul id="ghx-chart-nav" class="aui-nav"></ul></div></nav></div>' : '') + '<section id="ghx-chart-panel-content" class="aui-page-panel-content"><div id="ghx-chart-message"></div><div id="ghx-chart-intro"></div><div id="ghx-chart-header" class="aui-group aui-group-split ghx-fluid"><div id="ghx-chart-header-primary" class="aui-item"><div id="ghx-chart-title"></div><div id="ghx-chart-selector"></div><div id="ghx-chart-controls"></div><div id="ghx-chart-help" class="ghx-closed"></div><div id="ghx-chart-snapshot"></div></div><div id="ghx-chart-header-secondary" class="aui-item"><div id="ghx-chart-actions"></div><div id="ghx-chart-reopen-sprint"></div><div class="ghx-chart-legend"></div></div></div><div id="ghx-chart-content"></div></section></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.reportcontroller.renderReportView.soyTemplateName = 'GH.tpl.reportcontroller.renderReportView';
}


GH.tpl.reportcontroller.renderReopenSprintButton = function(opt_data, opt_ignored) {
  return '' + aui.buttons.button({id: 'ghx-reopen-sprint', isDisabled: opt_data.noSprintReopenPermissions || opt_data.noParallelSprintsAndSprintActive, type: 'link', text: "Reopen sprint", extraClasses: 'js-reopen-sprint', extraAttributes: {title: opt_data.noSprintReopenPermissions ? "You need the Manage Sprints permission for all projects in the origin board to manage this sprint. \x3ca class\x3d\x22manage-sprint-permission-help\x22 href\x3d\x22#\x22\x3eLearn more\x3c/a\x3e" : opt_data.noParallelSprintsAndSprintActive ? "This sprint cant be reopened at the moment! Complete your currently active sprint, or enable Parallel Sprints to work on multiple sprints concurrently." : ''}});
};
if (goog.DEBUG) {
  GH.tpl.reportcontroller.renderReopenSprintButton.soyTemplateName = 'GH.tpl.reportcontroller.renderReopenSprintButton';
}


GH.tpl.reportcontroller.renderChartMenu = function(opt_data, opt_ignored) {
  var output = '';
  var chartList19 = opt_data.availableCharts;
  var chartListLen19 = chartList19.length;
  for (var chartIndex19 = 0; chartIndex19 < chartListLen19; chartIndex19++) {
    var chartData19 = chartList19[chartIndex19];
    output += '<li ' + ((opt_data.activeChart == chartData19.id) ? 'class="aui-nav-selected"' : '') + ' data-tooltip="' + soy.$$escapeHtml(chartData19.tooltip) + '"><a data-chart="' + soy.$$escapeHtml(chartData19.id) + '" href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/secure/RapidBoard.jspa?rapidView=' + soy.$$escapeHtml(opt_data.board.id) + '&amp;view=reporting&amp;chart=' + soy.$$escapeHtml(chartData19.id) + '">' + soy.$$escapeHtml(chartData19.name) + ((chartData19.inLabs) ? ' <span class="aui-lozenge aui-lozenge-subtle aui-lozenge-success">' + soy.$$escapeHtml("New") + '</span>' : '') + '</a></li>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reportcontroller.renderChartMenu.soyTemplateName = 'GH.tpl.reportcontroller.renderChartMenu';
}


GH.tpl.reportcontroller.renderChartTitle = function(opt_data, opt_ignored) {
  return '<h2>' + soy.$$escapeHtml(opt_data.activeChart.name) + '</h2>';
};
if (goog.DEBUG) {
  GH.tpl.reportcontroller.renderChartTitle.soyTemplateName = 'GH.tpl.reportcontroller.renderChartTitle';
}


GH.tpl.reportcontroller.renderChartIntro = function(opt_data, opt_ignored) {
  return '<div class="ghx-intro-content ghx-open"><div class="aui-group ghx-content-open">' + GH.tpl.reportcontroller.renderChartDescription(opt_data) + '<div class="aui-item ghx-item-how"><div class="aui-group ghx-group-how">' + GH.tpl.reportcontroller.renderChartHow(opt_data) + '</div></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.reportcontroller.renderChartIntro.soyTemplateName = 'GH.tpl.reportcontroller.renderChartIntro';
}


GH.tpl.reportcontroller.renderChartDescription = function(opt_data, opt_ignored) {
  return '<div class="aui-item"><h4 class="ghx-margin-none"><span class="ghx-iconfont ghx-iconfont-inactive aui-icon aui-icon-small aui-iconfont-help ghx-margin-right"></span>' + soy.$$escapeHtml("How to read this chart") + '</h4><p>' + soy.$$escapeHtml(opt_data.activeChart.description) + '</p><p>' + ((opt_data.activeChart.documentation) ? aui.buttons.button({extraAttributes: {href: opt_data.activeChart.documentation, target: '_blank'}, text: "Learn more", tagName: 'a'}) : '') + aui.buttons.button({extraClasses: ['aui-button-link', 'js-chart-intro-toggle'], text: "Hide this information"}) + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.reportcontroller.renderChartDescription.soyTemplateName = 'GH.tpl.reportcontroller.renderChartDescription';
}


GH.tpl.reportcontroller.renderChartDescriptionClosed = function(opt_data, opt_ignored) {
  return '<div class="ghx-howto-trigger ghx-closed"><span class="ghx-iconfont ghx-iconfont-inactive aui-icon aui-icon-small aui-iconfont-help"></span> ' + aui.buttons.button({extraClasses: ['aui-button-link', 'js-chart-intro-toggle'], text: "How to read this chart", tagName: 'a'}) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.reportcontroller.renderChartDescriptionClosed.soyTemplateName = 'GH.tpl.reportcontroller.renderChartDescriptionClosed';
}


GH.tpl.reportcontroller.renderChartHow = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.activeChart.howTos) {
    var howToList81 = opt_data.activeChart.howTos;
    var howToListLen81 = howToList81.length;
    for (var howToIndex81 = 0; howToIndex81 < howToListLen81; howToIndex81++) {
      var howToData81 = howToList81[howToIndex81];
      output += GH.tpl.reportcontroller.renderChartHowItem({howTitle: howToData81.title, howDescription: howToData81.description});
    }
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reportcontroller.renderChartHow.soyTemplateName = 'GH.tpl.reportcontroller.renderChartHow';
}


GH.tpl.reportcontroller.renderChartHowItem = function(opt_data, opt_ignored) {
  return '<div class="aui-item"><svg class="ghx-svg-chart"></svg><strong class="ghx-how-title">' + soy.$$escapeHtml(opt_data.howTitle) + '</strong><div class="ghx-how-description">' + soy.$$escapeHtml(opt_data.howDescription) + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.reportcontroller.renderChartHowItem.soyTemplateName = 'GH.tpl.reportcontroller.renderChartHowItem';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/ReportUrlState.js' */
GH.ReportUrlState={},GH.ReportUrlState.self="ReportUrlState",GH.ReportUrlState.isApplicable=function(r){return"report"===r.mode},GH.ReportUrlState.getNormalizedFromUrl=function(r,t){GH.ReportController.init();var e=t.chart=GH.RapidBoard.UrlState.normalizeStringParam(r.chart,""),o=GH.ReportController.getChart(e);o&&_.defaults(t,o.controller.getNormalizedFromUrl(r))},GH.ReportUrlState.toUrl=function(r,t){var e=t.chart=r.chart,o=GH.ReportController.getChart(e);o&&_.defaults(t,o.controller.toUrl(r))},GH.ReportUrlState.getNormalizedFromInternal=function(r){GH.ReportController.init();var t=GH.ReportController.getCurrentChart();r.chart=GH.RapidBoard.State.getChartType(),t&&_.defaults(r,t.controller.getNormalizedFromInternal())},GH.ReportUrlState.updateInternalFromNormalized=function(r){GH.ReportController.init(),GH.RapidBoard.State.setChartType(r.chart);var t=GH.ReportController.getChart(r.chart);t&&t.controller.updateInternalFromNormalized(r)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/Chart.js' */
define("jira-agile/rapid/ui/chart/chart",["require"],function(r){"use strict";var e=r("jquery"),i=GH.Layout,n=GH.log,t=GH.Logger,o={};return o.EVENT_RESIZE_REDRAW="gh.chart.resize_redraw",o.defaultOptions={colors:["#9eb6d4","#afd8f8","#cb4b4b","#4da74d","#9440ed"],grid:{backgroundColor:"#fff",borderColor:"#bbb",borderWidth:1,internalLineWidth:0,labelMargin:2,minBorderMargin:1},legend:{container:"#ghx-chart-legend",noColumns:1},shadowSize:0,xaxis:{tickLength:4},yaxis:{tickLength:4}},o.draw=function(r,i,n,t){i=e(i);var d=e.extend(!0,{},o.defaultOptions);t&&e.extend(!0,d,t);var a=e.plot(i,n,d);return o.bindToWindowSize(r,a),a},o.bindToWindowSize=function(r,d){e(GH).bind(i.EVENT_DELAYED_RESIZE+"."+r,function(){n("adjusting chart ["+r+"] to window size"),e(GH).trigger(o.EVENT_RESIZE_REDRAW,{id:r,chart:d});try{d.resize(),d.setupGrid(),d.draw()}catch(r){n("Got an error while trying to resize chart: "+r,t.Contexts.ui)}})},o.destroy=function(r){e(GH).unbind(i.EVENT_DELAYED_RESIZE+"."+r)},o});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/ChartUtils.js' */
GH.ChartUtils={},GH.ChartUtils.oneMinuteInMillis=6e4,GH.ChartUtils.oneHourInMillis=60*GH.ChartUtils.oneMinuteInMillis,GH.ChartUtils.oneDayInMillis=24*GH.ChartUtils.oneHourInMillis,GH.ChartUtils.fixButtons=function(t){var r,a,i,e,n,o=AJS.$(t).find(".aui-buttons");o.each(function(){a=AJS.$(this).position(),i=a.left,r=AJS.$(this).find(".aui-button"),r.each(function(){e=AJS.$(this).position(),n=e.left,n===i&&(AJS.$(this).addClass("first"),AJS.$(this).prev(".aui-button").addClass("last"))})})},GH.ChartUtils.registerInlineDialogHacks=function(t){AJS.$(document).bind("showLayer",function(r,a,i){GH.log(r.type+" handled","anonymous function"),"inlineDialog"===a&&AJS&&AJS.InlineDialog&&AJS.InlineDialog.current&&AJS.InlineDialog.current.id===t&&(i._validateClickToClose=function(t){return!(AJS.$(t.target).parents(".calendar").length>0)&&!(AJS.$(t.target).parents("#inline-dialog-"+AJS.InlineDialog.current.id).length>0)},AJS.$("body").unbind("click."+AJS.InlineDialog.current.id+".inline-dialog-check"),setTimeout(function(){AJS.InlineDialog.current&&AJS.InlineDialog.current.id&&GH.ChartUtils.fixButtons("#inline-dialog-"+AJS.InlineDialog.current.id)},0))})},GH.ChartUtils.createIssueJql=function(t){var r=_.pluck(t,"key");return"issueKey in ("+r.join(",")+")"},GH.ChartUtils.createEpicJql=function(t){return'"'+GH.EpicConfig.getEpicLinkFieldName()+'" = "'+t.key+'"'},GH.ChartUtils.createVersionJql=function(t){return"fixVersion="+encodeURIComponent(t.jqlEncodedName)+" AND project="+t.projectKey},GH.ChartUtils.createStatusJql=function(t){var r=_.pluck(t,"name");return'Status IN ("'+r.join('","')+'")'},GH.ChartUtils.getStatisticConsumer=function(t){var r=require("jira-agile/rapid/ui/chart/burndown-timeline-producer");return t?r.TimeTrackingStatisticConsumer:r.EstimateStatisticConsumer},GH.ChartUtils.renderStatisticText=function(t,r,a){r=!_.isUndefined(r)&&r;var i=r?Math.abs(t):t;if("duration"===a){var e=!r&&t<0?"-":"";return i=Math.abs(i),e+GH.TimeFormat.formatShortDurationForTimeTrackingConfiguration(i)}return GH.NumberFormat.format(i)},GH.ChartUtils.renderUTCMillisAsDate=function(t){return GH.ChartUtils.renderUTCMillisInFormat(t,GH.ChartTimeFrames.momentTimeFormat)},GH.ChartUtils.renderUTCMillisAsDateWithoutTime=function(t){return GH.ChartUtils.renderUTCMillisInFormat(t,GH.ChartTimeFrames.momentDateFormat)},GH.ChartUtils.renderUTCMillisInFormat=function(t,r){var a=moment.utc(t).format(r);return a},GH.ChartUtils.getTimeFrameReportUrlParams=function(t){var r={days:GH.RapidBoard.State.getBoardSetting(null,"chart.timeframe.days",7),swimlane:GH.RapidBoard.State.getBoardSetting(null,"chart.filters.swimlanes",[]),column:GH.RapidBoard.State.getBoardSetting(null,"chart.filters.columns."+t,[]),quickFilter:GH.RapidBoard.State.getBoardSetting(null,"chart.filters.quickFilters",[])};return r.days===-1?(r.from=GH.RapidBoard.State.getBoardSetting(null,"chart.timeframe.from"),r.to=GH.RapidBoard.State.getBoardSetting(null,"chart.timeframe.to")):(r.from=0,r.to=0),r},GH.ChartUtils.timeFrameReportParamsToUrl=function(t){var r={};return t.swimlane.length>0&&(r.swimlane=t.swimlane),t.column.length>0&&(r.column=t.column),t.quickFilter.length>0&&(r.quickFilter=t.quickFilter),t.days===-1?(r.from=new Date(t.from).print(GH.RapidBoard.UrlState.dateFormat),r.to=new Date(t.to).print(GH.RapidBoard.UrlState.dateFormat)):t.days>0&&(r.days=t.days),r},GH.ChartUtils.getNormalizedFromUrlForTimeFrameReport=function(t){var r={swimlane:GH.RapidBoard.UrlState.normalizeNumberArrayParam(t.swimlane),column:GH.RapidBoard.UrlState.normalizeNumberArrayParam(t.column),quickFilter:GH.RapidBoard.UrlState.normalizeNumberArrayParam(t.quickFilter)},a=GH.RapidBoard.UrlState.normalizeNumberParam(t.days,0),i=GH.RapidBoard.UrlState.normalizeDateParam(t.from,null),e=GH.RapidBoard.UrlState.normalizeDateParam(t.to,null);return null!==i&&null!==e?(r.days=-1,r.from=i.getTime(),r.to=e.getTime()):(r.days=a,r.from=0,r.to=0),r},GH.ChartUtils.getChartOptions=function(t){var r=require("jira-agile/rapid/ui/chart/chart-controller");return{xaxis:{mode:"time",min:t.getXAxisStart(),max:t.getXAxisEnd()},yaxes:t.getYAxes(),legend:{container:AJS.$("#ghx-chart-legend"),backgroundOpacity:.5,position:"se"},grid:{markings:r.getNonWorkingBlocks,hoverable:!0,clickable:!1,autoHighlight:!1},mouseEnterExitEvents:!0}},GH.ChartUtils.updateFromNormalizedStateDateTimeParams=function(t){GH.RapidBoard.State.setBoardSetting("chart.timeframe.days",t.days),GH.RapidBoard.State.setBoardSetting("chart.timeframe.from",t.from),GH.RapidBoard.State.setBoardSetting("chart.timeframe.to",t.to),GH.RapidBoard.State.setBoardSetting("chart.filters.swimlanes",t.swimlane),GH.RapidBoard.State.setBoardSetting("chart.filters.columns."+t.chart,t.column),GH.RapidBoard.State.setBoardSetting("chart.filters.quickFilters",t.quickFilter)},GH.ChartUtils.calculateYProjection=function(t,r,a){function i(t){return _.isArray(t)?{x:t[0],y:t[1]}:t}t=i(t),r=i(r),a=i(a);var e=r.x-t.x,n=a.x-t.x,o=r.y-t.y,l=o*n/e;return l+t.y};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/ChartColors.js' */
define("jira-agile/rapid/ui/chart/chart-colors",function(){"use strict";var e={estimate:"#89c495",trend:"#3b73af",scope:"#cccccc",completed:"#3b7fc4",issueCount:"#205081",unestimated:"#815b3a",unestimatedPercent:"#d04437",timeSpent:"#14892c",nonWorkingDays:"#f2f2f2",nonWorkingDaysWallboard:"#333",dashedMarking:"#000",releaseDate:"#999",wallboard:{backgroundColor:"#000",borderColor:"#999",textColor:"#999",tickColor:"#999"}};return e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/FlotChartUtils.js' */
GH.FlotChartUtils={},GH.FlotChartUtils.handlePlotClick=function(t,r,i){},GH.FlotChartUtils.deferredRenderPoints=function(t,r){r.save(),r.translate(t.getPlotOffset().left,t.getPlotOffset().top),r.strokeStyle="rgb(100, 100, 100)",r.fillStyle="rgba(255, 255, 255, 0.5)",_.each(t.realPointsPerSeries,function(t){_.each(t,function(t){GH.FlotChartUtils.drawPoint(r,t)})}),r.restore()},GH.FlotChartUtils.drawPoint=function(t,r){t.beginPath(),t.arc(r.x,r.y,3,0,2*Math.PI,!1),t.fill(),t.closePath(),t.stroke()},GH.FlotChartUtils.handleMouseOverStateChange=function(t,r){GH.Logger.log("Handling mouse over state change in ChartView",GH.Logger.Contexts.ui),r.realPointsPerSeries={},r.draw()},GH.FlotChartUtils.setAndAlignAxisLabels=function(t,r,i){AJS.$("#ghx-axis-x").text(t),AJS.$("#ghx-axis-y").find(".ghx-inner").text(r),i&&AJS.$("#ghx-axis-y-right").find(".ghx-inner").text(i)},GH.FlotChartUtils.calculateYAxis=function(t,r){return"duration"===r.renderer?GH.FlotChartUtils.createYAxisForDuration(t):"issueCount"===r.typeId?GH.FlotChartUtils.createYAxisForIssueCount(t):{tickFormatter:GH.FlotChartUtils.numberFormatter}},GH.FlotChartUtils.issueCountFormatter=function(t,r){return t.toFixed(0)},GH.FlotChartUtils.durationFormatter=function(t,r){return GH.TimeFormat.formatShortDurationForTimeTrackingConfiguration(t,{timeFormat:GH.TimeFormatDisplays.HOURS,durationUnit:GH.TimeFormatDurationUnits.SECONDS})},GH.FlotChartUtils.numberFormatter=function(t,r){return GH.NumberFormat.format(t)},GH.FlotChartUtils.createYAxisForIssueCount=function(t){var r={tickFormatter:GH.FlotChartUtils.issueCountFormatter};if(t<15)r.minTickSize=1;else{var i=8,e=Math.ceil(t/i);r.tickSize=e}return r},GH.FlotChartUtils.createYAxisForDuration=function(t){var r=8,i=parseInt(t/r,10);0===t&&(i=3600);var e=i%3600;return 0!==e&&(i+=3600-e),{tickSize:i,tickFormatter:GH.FlotChartUtils.durationFormatter}},GH.FlotChartUtils.gatherPoints=function(t,r){for(var i=t.datapoints,e=i.points,a=i.pointsize,o=t.xaxis,n=t.yaxis,s=[],l=0;l<e.length;l+=a){var u=Math.ceil(l/a),h=r[u];if(!_.isEmpty(h)){var F=e[l],c=e[l+1];if(!(null==F||F<o.min||F>o.max||c<n.min||c>n.max)){var m=o.p2c(F),f=n.p2c(c);s.push({x:m,y:f,time:F,statValue:c})}}}return s};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/ChartPicker.js' */
define("jira-agile/rapid/ui/component/chart-picker",["require"],function(e){var t,i=e("jquery"),r=e("underscore"),s=e("jira-agile/rapid/global-events"),n=e("jira/ajs/select/single-select"),o=GH.tpl;s.on("pre-initialization",function(){t=GH.BoardState});var c=function(e,t){this.selectedItemStateKey=e,this.items=[],this.defaultItem=void 0,this.emptyItemsMsg=t||"There are no available sprints for this board."};return c.prototype.setItems=function(e){this.items=e||[]},c.prototype.getItems=function(){return this.items},c.prototype.hasItems=function(){return!r.isEmpty(this.items)},c.prototype.getDefaultItem=function(){return this.defaultItem},c.prototype.getDefaultItemId=function(){return!!this.defaultItem&&this.defaultItem.id},c.prototype.setDefaultItem=function(e){this.defaultItem=e||void 0},c.prototype.getItemById=function(e){var t=r.find(this.items,function(t){return t.id.toString()===e.toString()});return!r.isUndefined(t)&&t},c.prototype.getSelectedItem=function(){var e,t=this.getStoredSelectedItemId();if(t&&(e=this.getItemById(t)),e||(this.getDefaultItem()?e=this.getDefaultItem():this.hasItems()&&(e=r.last(this.getItems()))),e){var i=this.getDefaultItemId()===e.id?-1:e.id;this.storeSelectedItemId(i)}return e||!1},c.prototype.setSelectedItem=function(e,t){this.previousSelectedItem=this.getSelectedItem();var r=this.getItemById(e);if(r){var s=this.getDefaultItemId()===r.id?-1:r.id;this.storeSelectedItemId(s)}else this.storeSelectedItemId(!1);t||i(this).trigger("selectedItemChanged",{item:r})},c.prototype.removeSelectedItemAndRevert=function(e){if(this.previousSelectedItem){var t=this.getSelectedItem().id;this.items=r.reject(this.items,function(e){return e.id===t}),this.setSelectedItem(this.previousSelectedItem.id),this.render(e)}},c.prototype.getStoredSelectedItemId=function(){return t.getPerViewValue(this.selectedItemStateKey,!1)},c.prototype.storeSelectedItemId=function(e){t.setPerViewValue(this.selectedItemStateKey,e||!1)},c.prototype.render=function(e){var t=this.items.length>1,r=this.getSelectedItem(),s=this,n=function(e,t){s.setSelectedItem(t.value())},c=function(t){s.showDropdown(t,function(){s.render(e)},n)};t?(e.html(o.component.chartpicker.renderSingleSelect({items:this.items,selectedItem:r})),i("#ghx-items-trigger").click(c)):r?e.html(o.component.chartpicker.renderSingleItem({selectedItemId:r.id,selectedItemName:r.name||""})):i("#ghx-chart-content").html(o.component.chartpicker.renderEmpty({emptyItemsMsg:this.emptyItemsMsg})),i("#ghx-chart-picker-form").submit(function(){return!1})},c.prototype.showDropdown=function(e,t,r){i(e.target).hide();var s=i("#ghx-chart-picker"),o=(new n({element:s,width:250,errorMessage:"",setMaxHeightToWindow:!0}),i("#ghx-chart-picker-field"));s.bind("selected",function(e,t){t.value()&&r(e,t),o.blur()}),o.blur(t),o.focus().select(),setTimeout(function(){i("#ghx-chart-picker-field").trigger("click")},20)},c});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/ChartPicker.soy' */
// This file was automatically generated from ChartPicker.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.component.chartpicker.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.component == 'undefined') { GH.tpl.component = {}; }
if (typeof GH.tpl.component.chartpicker == 'undefined') { GH.tpl.component.chartpicker = {}; }


GH.tpl.component.chartpicker.renderSingleItem = function(opt_data, opt_ignored) {
  return '<div class="ghx-selector-single" data-item-id="' + soy.$$escapeHtml(opt_data.selectedItemId) + '">' + soy.$$escapeHtml(opt_data.selectedItemName) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.component.chartpicker.renderSingleItem.soyTemplateName = 'GH.tpl.component.chartpicker.renderSingleItem';
}


GH.tpl.component.chartpicker.renderEmpty = function(opt_data, opt_ignored) {
  return '<div class="aui-message info"><p class="title"><span class="aui-icon icon-info"></span>' + soy.$$escapeHtml(opt_data.emptyItemsMsg) + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.component.chartpicker.renderEmpty.soyTemplateName = 'GH.tpl.component.chartpicker.renderEmpty';
}


GH.tpl.component.chartpicker.renderDropdown = function(opt_data, opt_ignored) {
  var output = '<div class="aui-list" id="js-ghx-items-dropdown"><ul class="aui-list-section aui-first aui-last">';
  var itemList14 = opt_data.items;
  var itemListLen14 = itemList14.length;
  for (var itemIndex14 = 0; itemIndex14 < itemListLen14; itemIndex14++) {
    var itemData14 = itemList14[itemIndex14];
    output += (itemData14.id != opt_data.itemId) ? '<li class="aui-list-item" data-value="' + soy.$$escapeHtml(itemData14.id) + '"><a class="aui-list-item-link">' + soy.$$escapeHtml(itemData14.name) + '</a></li>' : '';
  }
  output += '</ul></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.chartpicker.renderDropdown.soyTemplateName = 'GH.tpl.component.chartpicker.renderDropdown';
}


GH.tpl.component.chartpicker.renderSingleSelect = function(opt_data, opt_ignored) {
  var output = '<form id="ghx-chart-picker-form" class="aui ghx-chart-picker">' + aui.buttons.button({id: 'ghx-items-trigger', tagName: 'a', extraClasses: ['js-nav-items', 'aui-button-subtle', 'ghx-dropdown-trigger'], text: opt_data.selectedItem.name, extraAttributes: {'data-item-id': opt_data.selectedItem.id}}) + '<select id="ghx-chart-picker" class="hidden"><option value="' + soy.$$escapeHtml(opt_data.selectedItem.id) + '" selected>' + soy.$$escapeHtml(opt_data.selectedItem.name) + '</option>';
  var itemList37 = opt_data.items;
  var itemListLen37 = itemList37.length;
  for (var itemIndex37 = 0; itemIndex37 < itemListLen37; itemIndex37++) {
    var itemData37 = itemList37[itemIndex37];
    output += (itemData37.id != opt_data.selectedItem.id) ? '<option value="' + soy.$$escapeHtml(itemData37.id) + '">' + soy.$$escapeHtml(itemData37.name) + '</option>' : '';
  }
  output += '</select></form>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.chartpicker.renderSingleSelect.soyTemplateName = 'GH.tpl.component.chartpicker.renderSingleSelect';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/EstimatePicker.js' */
define("jira-agile/rapid/ui/component/estimate-picker",["require"],function(t){var e=t("jquery"),i=t("underscore"),r=t("jira-agile/rapid/ui/chart/chart-view"),s=t("jira/ajs/select/single-select"),n=GH.Ajax,o=GH.BoardState,a=GH.RapidBoard.State,c=GH.tpl,d=function(t,e){this.selectedItemStateKey=t,this.items=[],this.defaultItem=void 0,this.supportTimeTracking=e};return d.prototype.setItems=function(t){this.items=t||[]},d.prototype.getItems=function(){return this.items},d.prototype.hasItems=function(){return!i.isEmpty(this.items)},d.prototype.getDefaultItem=function(){return this.defaultItem},d.prototype.getDefaultItemId=function(){return!!this.defaultItem&&this.defaultItem.id},d.prototype.setDefaultItem=function(t){this.defaultItem=t||void 0},d.prototype.getItemById=function(t){var e=i.find(this.items,function(e){return e.id===t});return e},d.prototype.getSelectedItem=function(){var t=this.getStoredSelectedItemId(),e=t?this.getItemById(t):null;return e||(this.getDefaultItem()?e=this.getDefaultItem():this.hasItems()&&(e=i.last(this.getItems())),this.storeSelectedItemId(),a.pushState()),e||!1},d.prototype.setSelectedItem=function(t,i){this.previousSelectedItem=this.getSelectedItem();var r=this.getItemById(t);r?this.storeSelectedItemId(t):this.storeSelectedItemId(),i||e(this).trigger("selectedItemChanged",{item:r})},d.prototype.getStoredSelectedItemId=function(){return o.getPerViewValue(this.selectedItemStateKey,null)},d.prototype.storeSelectedItemId=function(t){o.setPerViewValue(this.selectedItemStateKey,t)},d.prototype.render=function(t){var i=this.items.length>1,r=this.getSelectedItem(),s=this,n=function(t,e){s.setSelectedItem(e.value())},o=function(e){s.showDropdown(e,function(){s.render(t)},n)};i?(t.html(c.component.estimatePicker.renderSingleSelect({items:this.items,selectedItem:r})),e("#ghx-estimate-picker-trigger").click(o)):r&&t.html(c.component.estimatePicker.renderSingleItem({selectedItemId:r.id,selectedItemName:r.name||""})),e("#ghx-estimate-picker-form").submit(function(){return!1})},d.prototype.showDropdown=function(t,i,r){e(t.target).hide();var n=e("#ghx-estimate-picker"),o=(new s({element:n,width:250,errorMessage:"",setMaxHeightToWindow:!0}),e("#ghx-estimate-picker-field"));n.bind("selected",function(t,e){e.value()&&r(t,e),o.blur()}),o.blur(i),o.focus().select(),setTimeout(function(){e("#ghx-estimate-picker-field").trigger("click")},20)},d.prototype.load=function(t,i){var s=this;return n.get({url:"/rapidviewconfig/estimation.json",data:{rapidViewId:t}},"rapidBoardEstimateStatistics").done(function(t){if(t.availableEstimationStatistics){var n=t.availableEstimationStatistics,o=t.currentEstimationStatistic;s.supportTimeTracking&&t.currentTrackingStatistic.isEnabled&&(n.push(t.currentTrackingStatistic),o=t.currentTrackingStatistic),s.setItems(n),s.setDefaultItem(o);var a=function(){var t=s.getSelectedItem().id;i(t)};e(s).bind("selectedItemChanged",a),s.render(r.getChartControls(!0)),r.showChartControls()}})},d});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/EstimatePicker.soy' */
// This file was automatically generated from EstimatePicker.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.component.estimatePicker.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.component == 'undefined') { GH.tpl.component = {}; }
if (typeof GH.tpl.component.estimatePicker == 'undefined') { GH.tpl.component.estimatePicker = {}; }


GH.tpl.component.estimatePicker.renderSingleItem = function(opt_data, opt_ignored) {
  return '<div class="ghx-selector-single" data-item-id="' + soy.$$escapeHtml(opt_data.selectedItemId) + '">' + soy.$$escapeHtml(opt_data.selectedItemName) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.component.estimatePicker.renderSingleItem.soyTemplateName = 'GH.tpl.component.estimatePicker.renderSingleItem';
}


GH.tpl.component.estimatePicker.renderEmpty = function(opt_data, opt_ignored) {
  return '<div class="aui-message info"><p class="title"><span class="aui-icon icon-info"></span>' + soy.$$escapeHtml(opt_data.emptyItemsMsg) + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.component.estimatePicker.renderEmpty.soyTemplateName = 'GH.tpl.component.estimatePicker.renderEmpty';
}


GH.tpl.component.estimatePicker.renderDropdown = function(opt_data, opt_ignored) {
  var output = '<div class="aui-list" id="js-ghx-estimate-items-dropdown"><ul class="aui-list-section aui-first aui-last">';
  var itemList14 = opt_data.items;
  var itemListLen14 = itemList14.length;
  for (var itemIndex14 = 0; itemIndex14 < itemListLen14; itemIndex14++) {
    var itemData14 = itemList14[itemIndex14];
    output += (itemData14.id != opt_data.itemId) ? '<li class="aui-list-item" data-value="' + soy.$$escapeHtml(itemData14.id) + '"><a class="aui-list-item-link">' + soy.$$escapeHtml(itemData14.name) + '</a></li>' : '';
  }
  output += '</ul></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.estimatePicker.renderDropdown.soyTemplateName = 'GH.tpl.component.estimatePicker.renderDropdown';
}


GH.tpl.component.estimatePicker.renderSingleSelect = function(opt_data, opt_ignored) {
  var output = '<form id="ghx-estimate-picker-form" class="aui ghx-estimate-picker">' + aui.buttons.button({id: 'ghx-estimate-picker-trigger', tagName: 'a', extraClasses: ['js-nav-items', 'aui-button-subtle', 'ghx-dropdown-trigger'], text: opt_data.selectedItem.name, extraAttributes: {'data-item-id': opt_data.selectedItem.id}}) + '<select id="ghx-estimate-picker" class="hidden"><option value="' + soy.$$escapeHtml(opt_data.selectedItem.id) + '" selected>' + soy.$$escapeHtml(opt_data.selectedItem.name) + '</option>';
  var itemList37 = opt_data.items;
  var itemListLen37 = itemList37.length;
  for (var itemIndex37 = 0; itemIndex37 < itemListLen37; itemIndex37++) {
    var itemData37 = itemList37[itemIndex37];
    output += (itemData37.id != opt_data.selectedItem.id) ? '<option value="' + soy.$$escapeHtml(itemData37.id) + '">' + soy.$$escapeHtml(itemData37.name) + '</option>' : '';
  }
  output += '</select></form>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.estimatePicker.renderSingleSelect.soyTemplateName = 'GH.tpl.component.estimatePicker.renderSingleSelect';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/SprintSelect.js' */
define("jira-agile/rapid/ui/component/sprint-select",["require"],function(e){var t=e("jquery"),i=e("jira/ajs/select/single-select"),n=e("jira-agile/rapid/events"),r=function(){n(this),this.singleSelect=void 0};return r.prototype.initDropdown=function(){var e=this,n=function(){e.trigger("change",this.value)},r=t("#ghx-sprint-select");this.singleSelect=new i({element:r,itemAttrDisplayed:"label"}),r.on("change",n),r.on("unselect",n),t("#ghx-sprint-select-form").submit(function(){return!1})},r});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/SprintSelect.soy' */
// This file was automatically generated from SprintSelect.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.component.sprintselect.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.component == 'undefined') { GH.tpl.component = {}; }
if (typeof GH.tpl.component.sprintselect == 'undefined') { GH.tpl.component.sprintselect = {}; }


GH.tpl.component.sprintselect.renderSingleSelect = function(opt_data, opt_ignored) {
  return '<div><form id="ghx-sprint-select-form" class="aui ghx-sprint-select"><div class="field-group"><label>' + soy.$$escapeHtml("Move to") + '</label>' + GH.tpl.component.sprintselect.renderSelectElement({items: opt_data.items, selectedItem: opt_data.selectedItem, id: 'ghx-sprint-select', cssClass: 'hidden'}) + '</div></form></div>';
};
if (goog.DEBUG) {
  GH.tpl.component.sprintselect.renderSingleSelect.soyTemplateName = 'GH.tpl.component.sprintselect.renderSingleSelect';
}


GH.tpl.component.sprintselect.renderSelectElement = function(opt_data, opt_ignored) {
  var output = '<select ' + ((opt_data.id) ? 'id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' ' + ((opt_data.cssClass) ? 'class="' + soy.$$escapeHtml(opt_data.cssClass) + '"' : '') + '><option value="' + soy.$$escapeHtml(opt_data.selectedItem.id) + '" selected>' + soy.$$escapeHtml(opt_data.selectedItem.name) + '</option>';
  var itemList30 = opt_data.items;
  var itemListLen30 = itemList30.length;
  for (var itemIndex30 = 0; itemIndex30 < itemListLen30; itemIndex30++) {
    var itemData30 = itemList30[itemIndex30];
    output += (itemData30.id != opt_data.selectedItem.id) ? '<option value="' + soy.$$escapeHtml(itemData30.id) + '">' + soy.$$escapeHtml(itemData30.name) + '</option>' : '';
  }
  output += '</select>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.sprintselect.renderSelectElement.soyTemplateName = 'GH.tpl.component.sprintselect.renderSelectElement';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/ChartTooltip.js' */
GH.ChartTooltip=function(t,e,a){this.item=t,this.data=e,this.type=a},GH.ChartTooltip.prototype.render=function(){var t,e=require("jira-agile/rapid/ui/chart/change-event");t=this.type===e.releaseDate?AJS.$(GH.tpl.charttooltip.renderReleaseDatePredictionTooltip({data:this.data})):this.type===e.startDate?AJS.$(GH.tpl.charttooltip.renderStartDateTooltip({data:this.data})):this.type===e.uncertainty?AJS.$(GH.tpl.charttooltip.renderUncertainty({tooltipData:this.data})):AJS.$(GH.tpl.charttooltip.renderTooltip({tooltipData:this.data}));var a=this.item.pageX,i=this.item.pageY,o=this.item.series;t.css({position:"absolute",display:"none",top:i+5,"border-left-color":o.color}),t.appendTo("body");var r=t.width(),s=AJS.$("#ghx-chart-view canvas.base");a+r>s.offset().left+s.width()?t.css({left:a-(30+r)}):t.css({left:a+15}),t.fadeIn(200)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/ChartTooltip.soy' */
// This file was automatically generated from ChartTooltip.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.charttooltip.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.charttooltip == 'undefined') { GH.tpl.charttooltip = {}; }


GH.tpl.charttooltip.renderTooltip = function(opt_data, opt_ignored) {
  var output = '<div id="ghx-tooltip">';
  if (opt_data.tooltipData.initial || opt_data.tooltipData.complete) {
    output += '<strong>' + soy.$$escapeHtml(AJS.format("{0}{0,choice,0# issues|1# issue|1\x3c issues}",opt_data.tooltipData.issueCount)) + '</strong><br/>' + soy.$$escapeHtml(opt_data.tooltipData.event.type) + '<br />' + soy.$$escapeHtml(opt_data.tooltipData.statisticName) + ': ' + soy.$$escapeHtml(opt_data.tooltipData.statisticValue) + '<br />' + soy.$$escapeHtml(opt_data.tooltipData.dateText);
  } else {
    var changeList17 = opt_data.tooltipData.changes;
    var changeListLen17 = changeList17.length;
    for (var changeIndex17 = 0; changeIndex17 < changeListLen17; changeIndex17++) {
      var changeData17 = changeList17[changeIndex17];
      output += '<strong>' + soy.$$escapeHtml(changeData17.key) + '</strong><br/>' + ((changeData17.event.typeAsHtml) ? soy.$$filterNoAutoescape(changeData17.event.type) : soy.$$escapeHtml(changeData17.event.type)) + '<br/>' + soy.$$escapeHtml(changeData17.event.detail) + '<br/>&#x394; ' + soy.$$escapeHtml(changeData17.statisticName) + ': ' + soy.$$escapeHtml(changeData17.statisticDelta) + '<br />';
    }
    output += soy.$$escapeHtml(opt_data.tooltipData.dateText);
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.charttooltip.renderTooltip.soyTemplateName = 'GH.tpl.charttooltip.renderTooltip';
}


GH.tpl.charttooltip.renderReleaseDatePredictionTooltip = function(opt_data, opt_ignored) {
  return '<div id="ghx-tooltip"><strong>' + soy.$$escapeHtml(opt_data.data.description) + '</strong><br />' + soy.$$escapeHtml(opt_data.data.predictedReleaseDate) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.charttooltip.renderReleaseDatePredictionTooltip.soyTemplateName = 'GH.tpl.charttooltip.renderReleaseDatePredictionTooltip';
}


GH.tpl.charttooltip.renderStartDateTooltip = function(opt_data, opt_ignored) {
  return '<div id="ghx-tooltip"><strong>' + soy.$$escapeHtml(opt_data.data.description) + '</strong><br />' + soy.$$escapeHtml(opt_data.data.dateText) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.charttooltip.renderStartDateTooltip.soyTemplateName = 'GH.tpl.charttooltip.renderStartDateTooltip';
}


GH.tpl.charttooltip.renderUncertainty = function(opt_data, opt_ignored) {
  var output = '<div id="ghx-tooltip">';
  var changeList51 = opt_data.tooltipData.changes;
  var changeListLen51 = changeList51.length;
  for (var changeIndex51 = 0; changeIndex51 < changeListLen51; changeIndex51++) {
    var changeData51 = changeList51[changeIndex51];
    output += '<strong>' + soy.$$escapeHtml(changeData51.key) + '</strong><br/>' + soy.$$escapeHtml(changeData51.event.detail) + '<br/>';
  }
  output += soy.$$filterNoAutoescape(AJS.format("{0}% Unestimated Issues",opt_data.tooltipData.unestimated)) + '<br />' + soy.$$escapeHtml(opt_data.tooltipData.dateText) + '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.charttooltip.renderUncertainty.soyTemplateName = 'GH.tpl.charttooltip.renderUncertainty';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/ChartController.js' */
define("jira-agile/rapid/ui/chart/chart-controller",["require"],function(i){"use strict";var r=i("underscore"),a=i("jira-agile/rapid/ui/chart/burndown-rate"),n=i("jira-agile/rapid/ui/chart/chart-colors"),o=GH.RapidViewConfig,e={};return e.loadRapidViewConfig=function(i,r){var a=function(a){i.displayed&&(i.rapidViewConfig=a,r(a))};o.fetchConfiguration(i.rapidViewData.id).done(a)},e.getNonWorkingBlocks=function(){var i=a.getNonWorkingDays(),o=r.map(i,function(i){return{xaxis:{from:i.start,to:i.end},color:n.nonWorkingDays}});return o},e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/ChartView.js' */
define("jira-agile/rapid/ui/chart/chart-view",["require"],function(t){"use strict";var e=t("jquery"),r={};return r.getChartContentElem=function(t){return r.chartContentElem&&!t||(r.chartContentElem=e("#ghx-chart-content")),r.chartContentElem},r.getChartGroup=function(t){return r.chartGroup&&!t||(r.chartGroup=e("#ghx-chart-group")),r.chartGroup},r.getChartStatus=function(t){return r.chartStatus&&!t||(r.chartStatus=e("#ghx-chart-status")),r.chartStatus},r.getChartView=function(t){return r.chartView&&!t||(r.chartView=e("#ghx-chart-view")),r.chartView},r.getChartControls=function(t){return r.chartControls&&!t||(r.chartControls=e("#ghx-chart-controls")),r.chartControls},r.getChartAllControlsElem=function(t){return r.chartAllControlsElem&&!t||(r.chartAllControlsElem=e("#ghx-chart-options")),r.chartAllControlsElem},r.getChartTimeControlsElem=function(t){return r.chartTimeControlsElem&&!t||(r.chartTimeControlsElem=e("#ghx-chart-options-time")),r.chartTimeControlsElem},r.getChartSelector=function(t){return r.chartSelector&&!t||(r.chartSelector=e("#ghx-chart-selector")),r.chartSelector},r.getChartLegend=function(t){return r.chartLegend&&!t||(r.chartLegend=e("#ghx-chart-legend")),r.chartLegend},r.getChartLegendD3=function(t){return r.chartLegendD3&&!t||(r.chartLegendD3=e(".ghx-chart-legend")),r.chartLegendD3},r.getChartSnapshot=function(t){return r.chartSnapshot&&!t||(r.chartSnapshot=e("#ghx-chart-snapshot")),r.chartSnapshot},r.getReopenButton=function(t){return r.reopenButton&&!t||(r.reopenButton=e("#ghx-chart-reopen-sprint")),r.reopenButton},r.showChartGroup=function(){r.getChartGroup().show()},r.hideChartGroup=function(){r.getChartGroup().hide()},r.showChartStatus=function(){r.getChartStatus().show()},r.hideChartStatus=function(){r.getChartStatus().hide()},r.hideChartControls=function(){r.getChartControls().hide()},r.showChartControls=function(){r.getChartControls().show()},r.showSpinner=function(){var t=r.getChartGroup(!0).spin("medium");0===t.find(".ghx-chart-blanket.js-blanket-spinner").length&&e("<div></div>").addClass("ghx-chart-blanket js-blanket-spinner").appendTo(t)},r.hideSpinner=function(){r.getChartGroup(!0).spinStop().find(".ghx-chart-blanket.js-blanket-spinner").remove()},r.showBlankStateMessage=function(t){var n=r.getChartGroup(!0),a=n.find(".ghx-chart-blanket.ghx-blank-state").empty();0===a.length&&(a=e("<div></div>").addClass("ghx-chart-blanket ghx-blank-state").appendTo(n)),a.append(t)},r.hideBlankStateMessage=function(){r.getChartGroup(!0).find(".ghx-chart-blanket.ghx-blank-state").remove()},r.showIE8SupportMessage=function(t){var n=r.getChartContentElem(),a=n.find(".ghx-chart-blanket.ghx-no-ie8").empty();0===a.length&&(a=e("<div></div>").addClass("ghx-chart-blanket ghx-blank-state").appendTo(n)),a.append(t)},r.hideIE8SupportMessage=function(){r.getChartContentElem(!0).find(".ghx-chart-blanket.ghx-no-ie8").remove()},r.showToast=function(){function t(t){var r=e("#ghx-report-scrollarea"),n=r.offset().top-t.offset().top;return Math.max(n,0)+o}var n=1e3,a=500,h=1e3,o=20,c=null;return function(s){var i=r.getChartGroup(!0),u=i.find(".ghx-chart-toast");0===u.length&&(u=e("<div></div>").addClass("ghx-chart-toast").appendTo(i)),u.stop().text(s).css({opacity:0,top:t(i),right:o}).animate({opacity:.9},a),null!==c&&clearTimeout(c),c=setTimeout(function(){u.closest("html").length&&u.fadeOut(h,function(){u.remove()})},n)}}(),r.showChartUpdatedToast=function(){r.showToast("Chart updated")},r});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/ChartView.soy' */
// This file was automatically generated from ChartView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.chartview.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.chartview == 'undefined') { GH.tpl.chartview = {}; }


GH.tpl.chartview.renderChartControls = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-timeframe">' + GH.tpl.charttimeframes.renderChartTimeFrame(null) + '</div><div id="ghx-chart-filter">' + GH.tpl.chartfilters.renderChartFilter(null) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.chartview.renderChartControls.soyTemplateName = 'GH.tpl.chartview.renderChartControls';
}


GH.tpl.chartview.renderChartBody = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-status"></div><div id="ghx-chart-group"><div id="ghx-chart-wrap"><div id="ghx-chart-view"></div><div id="ghx-axis-x" class="ghx-axis"></div><div id="ghx-axis-y" class="ghx-axis ghx-axis-y"><span class="ghx-inner"></span></div></div><div id="ghx-chart-overview-group"><h4></h4><p class="ghx-description"></p><div id="ghx-chart-overview"></div></div><div id="ghx-chart-legend"></div><div id="ghx-chart-data"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.chartview.renderChartBody.soyTemplateName = 'GH.tpl.chartview.renderChartBody';
}


GH.tpl.chartview.renderDataExceeded = function(opt_data, opt_ignored) {
  return '<div class="aui-message warning closeable"><p><span class="aui-icon icon-warning"></span>' + soy.$$escapeHtml("Maximum number of viewable issues exceeded for this chart.") + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.chartview.renderDataExceeded.soyTemplateName = 'GH.tpl.chartview.renderDataExceeded';
}


GH.tpl.chartview.renderCfdTooltip = function(opt_data, opt_ignored) {
  var output = '<div id="ghx-tooltip"' + ((opt_data.changes.length > 8) ? 'class="ghx-alt"' : '') + '>';
  if (opt_data.changes.length > 8) {
    var changeList22 = opt_data.changes;
    var changeListLen22 = changeList22.length;
    for (var changeIndex22 = 0; changeIndex22 < changeListLen22; changeIndex22++) {
      var changeData22 = changeList22[changeIndex22];
      output += ((! (changeIndex22 == 0)) ? ', ' : '') + '<strong>' + soy.$$escapeHtml(changeData22.key) + '</strong>: ' + ((changeData22.columnFrom) ? soy.$$escapeHtml(changeData22.columnFrom) + ' >> ' : '') + ((changeData22.columnTo) ? soy.$$escapeHtml(changeData22.columnTo) : '');
    }
  } else {
    var changeList38 = opt_data.changes;
    var changeListLen38 = changeList38.length;
    for (var changeIndex38 = 0; changeIndex38 < changeListLen38; changeIndex38++) {
      var changeData38 = changeList38[changeIndex38];
      output += ((! (changeIndex38 == 0)) ? '<br/>' : '') + '<strong>' + soy.$$escapeHtml(changeData38.key) + '</strong><br/>' + ((changeData38.columnFrom) ? soy.$$escapeHtml(changeData38.columnFrom) + ' >> ' : '') + ((changeData38.columnTo) ? soy.$$escapeHtml(changeData38.columnTo) : '');
    }
  }
  output += '<br/>' + soy.$$escapeHtml(opt_data.time) + '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.chartview.renderCfdTooltip.soyTemplateName = 'GH.tpl.chartview.renderCfdTooltip';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/ChartFilters.js' */
GH.ChartFilters={},GH.ChartFilters.rapidViewConfig={},GH.ChartFilters.columns=[],GH.ChartFilters.quickFilters=[],GH.ChartFilters.swimlanes=[],GH.ChartFilters.chartType=null,GH.ChartFilters.defaultColumns=[],GH.ChartFilters.init=function(){GH.ChartUtils.registerInlineDialogHacks("chartFiltersInlineDialog")},GH.ChartFilters.update=function(t,i,e){GH.ChartFilters.chartType=t,GH.ChartFilters.rapidViewConfig=i,GH.ChartFilters.defaultColumns=e.defaultColumns,GH.ChartFilters.initializeColumns(t),GH.ChartFilters.initializeQuickFilters(t),GH.ChartFilters.initializeSwimlanes(t);var r=GH.ChartFilters.getDefaultColumnIds(),a=GH.RapidBoard.State.getNumberArrayBoardSetting(null,"chart.filters.columns."+t,r);a.length<1&&(a=r),GH.ChartFilters.setActiveColumnIds(a);var l=GH.ChartFilters.getDefaultQuickFilterIds(),s=GH.RapidBoard.State.getNumberArrayBoardSetting(null,"chart.filters.quickFilters",l);GH.ChartFilters.setActiveQuickFilterIds(s);var n=GH.ChartFilters.getDefaultSwimlaneIds(),u=GH.RapidBoard.State.getNumberArrayBoardSetting(null,"chart.filters.swimlanes",n);u.length<1&&(u=n),GH.ChartFilters.setActiveSwimlaneIds(u),GH.ChartFilters.updateFilterInfo()},GH.ChartFilters.updateFilterInfo=function(){var t=GH.ChartFilters.isDefaultColumns()&&GH.ChartFilters.isDefaultQuickFilters()&&GH.ChartFilters.isDefaultSwimlanes(),i=AJS.$("#js-chart-filter"),e=AJS.$(i).find(".aui-icon"),r=AJS.$(e).text();t?(i.addClass("ghx-icon-hide"),e.removeAttr("title")):(i.removeClass("ghx-icon-hide"),e.attr("title",r))},GH.ChartFilters.addRequestParams=function(t){var i=[];_.each(GH.ChartFilters.swimlanes,function(t,e){t.active&&i.push(t.id)}),i.length>0&&(t.swimlaneId=i);var e=[];_.each(GH.ChartFilters.quickFilters,function(t,i){t.active&&e.push(t.id)}),e.length>0&&(t.quickFilterId=e);var r=[];_.each(GH.ChartFilters.columns,function(t){t.active&&r.push(t.id)}),r.length>0&&(t.columnId=r)},GH.ChartFilters.initializeColumns=function(t){for(var i=GH.ChartFilters.rapidViewConfig.columns,e=[],r=0;r<i.length;r++){var a=i[r];e.push({id:a.id,name:a.name,active:!1})}GH.ChartFilters.columns=e},GH.ChartFilters.getColumns=function(){return GH.ChartFilters.columns},GH.ChartFilters.isDefaultColumns=function(){for(var t=GH.ChartFilters.getDefaultColumns(),i=0;i<GH.ChartFilters.columns.length;i++)if(GH.ChartFilters.columns[i].active!=t[i])return!1;return!0},GH.ChartFilters.getDefaultColumnIds=function(){for(var t=GH.ChartFilters.getDefaultColumns(),i=[],e=0;e<GH.ChartFilters.columns.length;e++)t[e]&&i.push(GH.ChartFilters.columns[e].id);return i},GH.ChartFilters.getActiveColumns=function(){return _.filter(GH.ChartFilters.columns,function(t){return t.active})},GH.ChartFilters.getActiveColumnIds=function(){for(var t=[],i=0;i<GH.ChartFilters.columns.length;i++)GH.ChartFilters.columns[i].active&&t.push(GH.ChartFilters.columns[i].id);return t},GH.ChartFilters.setActiveColumnIds=function(t){_.each(GH.ChartFilters.columns,function(i){i.active=!1,_.each(t,function(t){t==i.id&&(i.active=!0)})}),GH.RapidBoard.State.setNumberArrayBoardSetting("chart.filters.columns."+GH.ChartFilters.chartType,t)},GH.ChartFilters.getDefaultColumns=function(){return GH.ChartFilters.defaultColumns},GH.ChartFilters.isColumnActive=function(t){var i=GH.ChartFilters.getColumn(t);return!!i&&i.active},GH.ChartFilters.getColumn=function(t){for(var i=0;i<GH.ChartFilters.columns.length;i++){var e=GH.ChartFilters.columns[i];if(e.id==t)return e}return!1},GH.ChartFilters.initializeQuickFilters=function(t){for(var i=GH.ChartFilters.rapidViewConfig.quickFilters,e=[],r=0;r<i.length;r++){var a=i[r];e.push({id:a.id,name:a.name,active:!1})}GH.ChartFilters.quickFilters=e},GH.ChartFilters.isDefaultQuickFilters=function(){return 0===GH.ChartFilters.getActiveQuickFilterIds().length},GH.ChartFilters.getDefaultQuickFilterIds=function(){return[]},GH.ChartFilters.getActiveQuickFilterIds=function(){var t=[];return _.each(GH.ChartFilters.quickFilters,function(i){i.active&&t.push(i.id)}),t},GH.ChartFilters.setActiveQuickFilterIds=function(t){_.each(GH.ChartFilters.quickFilters,function(i){i.active=!1,_.each(t,function(t){t==i.id&&(i.active=!0)})}),GH.RapidBoard.State.setNumberArrayBoardSetting("chart.filters.quickFilters",t)},GH.ChartFilters.getQuickFilters=function(){return GH.ChartFilters.quickFilters},GH.ChartFilters.isQuickFilterActive=function(t){var i=GH.ChartFilters.getQuickFilter(t);return!!i&&i.active},GH.ChartFilters.getQuickFilter=function(t){for(var i=0;i<GH.ChartFilters.quickFilters.length;i++){var e=GH.ChartFilters.quickFilters[i];if(e.id==t)return e}return!1},GH.ChartFilters.initializeSwimlanes=function(t){for(var i=GH.ChartFilters.rapidViewConfig.swimlanes,e=[],r=0;r<i.length;r++){var a=i[r];e.push({id:a.id,name:a.name,active:!1})}GH.ChartFilters.swimlanes=e},GH.ChartFilters.isDefaultSwimlanes=function(){return GH.ChartFilters.getDefaultSwimlaneIds().length==GH.ChartFilters.getActiveSwimlaneIds().length},GH.ChartFilters.getDefaultSwimlaneIds=function(){var t=[];return _.each(GH.ChartFilters.swimlanes,function(i){t.push(i.id)}),t},GH.ChartFilters.getActiveSwimlaneIds=function(){var t=[];return _.each(GH.ChartFilters.swimlanes,function(i){i.active&&t.push(i.id)}),t},GH.ChartFilters.setActiveSwimlaneIds=function(t){var i=_.filter(t,function(t){return _.find(GH.ChartFilters.swimlanes,function(i){return t==i.id})});0===i.length&&(i=_.pluck(GH.ChartFilters.swimlanes,"id")),_.each(GH.ChartFilters.swimlanes,function(t){t.active=!1,_.each(i,function(i){i==t.id&&(t.active=!0)})}),GH.RapidBoard.State.setNumberArrayBoardSetting("chart.filters.swimlanes",i)},GH.ChartFilters.getSwimlanes=function(){return GH.ChartFilters.swimlanes},GH.ChartFilters.isSwimlaneActive=function(t){var i=GH.ChartFilters.getSwimlane(t);return!!i&&i.active},GH.ChartFilters.getSwimlane=function(t){for(var i=0;i<GH.ChartFilters.swimlanes.length;i++){var e=GH.ChartFilters.swimlanes[i];if(e.id==t)return e}return!1},GH.ChartFilters.initializeDialog=function(){AJS.$("#inline-dialog-chartFiltersInlineDialog").remove(),AJS.InlineDialog.current&&AJS.InlineDialog.current.hide();var t={width:500,cacheContent:!1,hideDelay:6e4};AJS.InlineDialog("#js-chart-filter","chartFiltersInlineDialog",GH.ChartFilters.renderChartFiltersDialog,t)},GH.ChartFilters.renderChartFiltersDialog=function(t,i,e){var r=GH.ChartFilters.getColumns(),a=GH.ChartFilters.getSwimlanes(),l=GH.ChartFilters.getQuickFilters();t.html(GH.tpl.chartfilters.renderChartFilters({columns:r,swimlanes:a,quickFilters:l})),t.closest(".aui-inline-dialog").addClass("ghx-inline-dialog"),t.find(".js-toggle").click(function(i){i.preventDefault();var e=AJS.$(this),r=e.hasClass("active"),a=!r;a?e.addClass("active"):e.removeClass("active"),GH.ChartFilters.checkFilterValidity(t)}),t.find(".js-save-button").click(function(i){i.preventDefault(),GH.ChartFilters.handleDialogSave(t)}),t.find(".js-cancel-button").click(function(t){AJS.InlineDialog.current.hide()}),e()},GH.ChartFilters.checkFilterValidity=function(t){t.find(".ghx-error").remove();var i=!0;return t.find(".js-column-options .js-toggle.active").length<1&&(i=!1,t.find(".js-column-options").after('<div class="ghx-error">'+"At least one column must be selected"+"</div>")),t.find(".js-swimlane-options .js-toggle.active").length<1&&(i=!1,t.find(".js-swimlane-options").after('<div class="ghx-error">'+"At least one swimlane must be selected"+"</div>")),i},GH.ChartFilters.handleDialogSave=function(t){if(GH.ChartFilters.checkFilterValidity(t)){var i=[];t.find(".js-column-options .js-toggle").each(function(t,e){var r=AJS.$(e),a=r.attr("data-column-id"),l=r.hasClass("active");l&&i.push(parseInt(a,10))});var e=[];t.find(".js-swimlane-options .js-toggle").each(function(t,i){var r=AJS.$(i),a=r.attr("data-swimlane-id"),l=r.hasClass("active");l&&e.push(parseInt(a,10))});var r=[];t.find(".js-quickfilter-options .js-toggle").each(function(t,i){var e=AJS.$(i),a=e.attr("data-quickfilter-id"),l=e.hasClass("active");l&&r.push(parseInt(a,10))});var a=!_.isEqual(e,GH.ChartFilters.getActiveSwimlaneIds()),l=!_.isEqual(r,GH.ChartFilters.getActiveQuickFilterIds()),s=!_.isEqual(i,GH.ChartFilters.getActiveColumnIds());GH.ChartFilters.setActiveColumnIds(i),GH.ChartFilters.setActiveSwimlaneIds(e),GH.ChartFilters.setActiveQuickFilterIds(r),GH.RapidBoard.State.pushState(),AJS.$(GH).trigger("chartFiltersChanged",{swimlanesChanged:a,quickFiltersChanged:l,columnsChanged:s}),GH.ChartFilters.updateFilterInfo(),AJS.InlineDialog.current.hide()}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/ChartFilters.soy' */
// This file was automatically generated from ChartFilters.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.chartfilters.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.chartfilters == 'undefined') { GH.tpl.chartfilters = {}; }


GH.tpl.chartfilters.renderChartFilter = function(opt_data, opt_ignored) {
  var output = '';
  var tooltip__soy3 = ' ' + soy.$$escapeHtml("Chart is using non-default settings");
  var buttonText__soy6 = ' ' + soy.$$escapeHtml("Refine report");
  output += aui.buttons.button({id: ['js-chart-filter'], extraClasses: ['aui-button-icon', 'aui-button-subtle', 'ghx-dropdown-trigger'], text: buttonText__soy6, iconClass: 'ghx-iconfont aui-icon-small aui-iconfont-info', iconText: tooltip__soy3, iconType: 'aui'});
  return output;
};
if (goog.DEBUG) {
  GH.tpl.chartfilters.renderChartFilter.soyTemplateName = 'GH.tpl.chartfilters.renderChartFilter';
}


GH.tpl.chartfilters.renderChartFilters = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-chart-filters ghx-inline-dialog-content"><h2>' + soy.$$escapeHtml("Report Filters") + '</h2><form class="aui gh-aui"><fieldset><h3>' + soy.$$escapeHtml("Columns") + '</h3><div class="ghx-group aui-buttons js-column-options">';
  var columnList22 = opt_data.columns;
  var columnListLen22 = columnList22.length;
  for (var columnIndex22 = 0; columnIndex22 < columnListLen22; columnIndex22++) {
    var columnData22 = columnList22[columnIndex22];
    if (columnData22.active) {
      var buttonText__soy25 = '' + soy.$$escapeHtml(columnData22.name);
      var buttonClass__soy27 = 'js-toggle active';
      output += aui.buttons.button({extraAttributes: {'data-column-id': columnData22.id}, extraClasses: [buttonClass__soy27], text: buttonText__soy25});
    } else {
      var buttonText__soy34 = '' + soy.$$escapeHtml(columnData22.name);
      var buttonClass__soy36 = 'js-toggle';
      output += aui.buttons.button({extraAttributes: {'data-column-id': columnData22.id}, extraClasses: [buttonClass__soy36], text: buttonText__soy34});
    }
  }
  output += '</div><h3>' + soy.$$escapeHtml("Swimlanes") + '</h3><div class="ghx-group aui-buttons js-swimlane-options">';
  var swimlaneList46 = opt_data.swimlanes;
  var swimlaneListLen46 = swimlaneList46.length;
  for (var swimlaneIndex46 = 0; swimlaneIndex46 < swimlaneListLen46; swimlaneIndex46++) {
    var swimlaneData46 = swimlaneList46[swimlaneIndex46];
    if (swimlaneData46.active) {
      var buttonText__soy49 = '' + soy.$$escapeHtml(swimlaneData46.name);
      var buttonClass__soy51 = 'js-toggle active';
      output += aui.buttons.button({extraAttributes: {'data-swimlane-id': swimlaneData46.id}, extraClasses: [buttonClass__soy51], text: buttonText__soy49});
    } else {
      var buttonText__soy58 = '' + soy.$$escapeHtml(swimlaneData46.name);
      var buttonClass__soy60 = 'js-toggle';
      output += aui.buttons.button({extraAttributes: {'data-swimlane-id': swimlaneData46.id}, extraClasses: [buttonClass__soy60], text: buttonText__soy58});
    }
  }
  output += '</div><h3>' + soy.$$escapeHtml("Quick Filters") + '</h3><div class="ghx-group aui-buttons js-quickfilter-options">';
  var quickFilterList70 = opt_data.quickFilters;
  var quickFilterListLen70 = quickFilterList70.length;
  for (var quickFilterIndex70 = 0; quickFilterIndex70 < quickFilterListLen70; quickFilterIndex70++) {
    var quickFilterData70 = quickFilterList70[quickFilterIndex70];
    if (quickFilterData70.active) {
      var buttonText__soy73 = '' + soy.$$escapeHtml(quickFilterData70.name);
      var buttonClass__soy75 = 'js-toggle active';
      output += aui.buttons.button({extraAttributes: {'data-quickfilter-id': quickFilterData70.id}, extraClasses: [buttonClass__soy75], text: buttonText__soy73});
    } else {
      var buttonText__soy82 = '' + soy.$$escapeHtml(quickFilterData70.name);
      var buttonClass__soy84 = 'js-toggle';
      output += aui.buttons.button({extraAttributes: {'data-quickfilter-id': quickFilterData70.id}, extraClasses: [buttonClass__soy84], text: buttonText__soy82});
    }
  }
  output += '</div></fieldset><div class="buttons-container"><div class="buttons"><button class="aui-button js-save-button">' + soy.$$escapeHtml("Apply") + '</button><a class="js-cancel-button"><span>' + soy.$$escapeHtml("Cancel") + '</span></a></div></div></form></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.chartfilters.renderChartFilters.soyTemplateName = 'GH.tpl.chartfilters.renderChartFilters';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/ChartTimeFrames.js' */
GH.ChartTimeFrames={},GH.ChartTimeFrames.day=864e5,GH.ChartTimeFrames.dateFormat="%d.%m.%Y",GH.ChartTimeFrames.timeFormat="%d/%m/%Y %H:%M",GH.ChartTimeFrames.momentDateFormat="LL",GH.ChartTimeFrames.momentTimeFormat="LLL",GH.ChartTimeFrames.from=null,GH.ChartTimeFrames.to=null,GH.ChartTimeFrames.days=7,GH.ChartTimeFrames.now=(new Date).getTime(),GH.ChartTimeFrames.isRelative=!0,GH.ChartTimeFrames.minXValue=null,GH.ChartTimeFrames.chartId=null,GH.ChartTimeFrames.init=function(){GH.ChartUtils.registerInlineDialogHacks("chartTimeFramesInlineDialog")},GH.ChartTimeFrames.isValidDate=function(e){var a=function(e){return 0===e.getHours()&&0===e.getMinutes()&&0===e.getSeconds()&&0===e.getMilliseconds()};return a(Date.parseDate(e,GH.ChartTimeFrames.dateFormat))&&a(Date.parseDate(e,GH.ChartTimeFrames.dateFormat))},GH.ChartTimeFrames.getDateAsText=function(e){return new Date(e).print(GH.ChartTimeFrames.dateFormat)},GH.ChartTimeFrames.roundMillisToNextDay=function(e){var a,r=GH.ChartTimeFrames.roundMillisToBeginOfDay(e);return a=r<e?r+GH.ChartTimeFrames.day:r},GH.ChartTimeFrames.roundMillisToBeginOfDay=function(e){var a=Math.floor(e/GH.ChartTimeFrames.day);return a*GH.ChartTimeFrames.day},GH.ChartTimeFrames.millisToDays=function(e){return e?e/GH.ChartTimeFrames.day:e},GH.ChartTimeFrames.daysToMillis=function(e){return e?e*GH.ChartTimeFrames.day:e},GH.ChartTimeFrames.timeFrames=[{relative:!0,days:7,name:"Past Week"},{relative:!0,days:14,name:"Past 2 Weeks"},{relative:!0,days:30,name:"Past Month"},{relative:!0,days:90,name:"Past 3 Months"},{relative:!0,days:180,name:"Past 6 Months"},{relative:!0,days:0,name:"All Time"},{relative:!1,days:-1,name:"Custom"}],GH.ChartTimeFrames.getSelectedTimeFrame=function(){for(var e=0;e<GH.ChartTimeFrames.timeFrames.length;e++){if(!GH.ChartTimeFrames.isRelative&&!GH.ChartTimeFrames.timeFrames[e].relative)return GH.ChartTimeFrames.timeFrames[e];if(GH.ChartTimeFrames.timeFrames[e].days==GH.ChartTimeFrames.days)return GH.ChartTimeFrames.timeFrames[e]}return!1},GH.ChartTimeFrames.getChartStartDate=function(){var e=GH.ChartTimeFrames.day;if(GH.ChartTimeFrames.isRelative){if(0==GH.ChartTimeFrames.days){var a=GH.ChartTimeFrames.minXValue,r=GH.ChartTimeFrames.now-1*e;return(!a||a>r)&&(a=r),a}return GH.ChartTimeFrames.now-GH.ChartTimeFrames.days*e}return GH.ChartTimeFrames.from},GH.ChartTimeFrames.getChartEndDate=function(){GH.ChartTimeFrames.day;return GH.ChartTimeFrames.isRelative?GH.ChartTimeFrames.now:GH.ChartTimeFrames.to},GH.ChartTimeFrames.update=function(){var e=GH.RapidBoard.State.getBoardSetting(null,"chart.timeframe.days",7),a=(new Date).getTime();a=GH.RapidBoard.State.getBoardSetting(null,"chart.timeframe.from",a);var r=(new Date).getTime()-7*GH.ChartTimeFrames.day;r=GH.RapidBoard.State.getBoardSetting(null,"chart.timeframe.to",r),GH.ChartTimeFrames.setNewChartLimits(e,a,r,!0)},GH.ChartTimeFrames.setBoundaries=function(e,a){GH.ChartTimeFrames.now=a,GH.ChartTimeFrames.minXValue=e||a-7*GH.ChartTimeFrames.day,GH.ChartTimeFrames.updateDatesInfo()},GH.ChartTimeFrames.updateDialogFromAndToDates=function(e){var a=e.find(".js-timeframe-button.active"),r=a.attr("data-timeframe-id");if(r!=-1){var t,i=GH.ChartTimeFrames.now;t=r>0?i-r*GH.ChartTimeFrames.day:GH.ChartTimeFrames.minXValue;var m=new Date(t).print(GH.ChartTimeFrames.dateFormat),s=new Date(i).print(GH.ChartTimeFrames.dateFormat);e.find("#ghx-field-from").val(m),e.find("#ghx-field-to").val(s)}},GH.ChartTimeFrames.updateDatesInfo=function(){var e=GH.ChartTimeFrames.getSelectedTimeFrame();e.relative&&(GH.ChartTimeFrames.to=GH.ChartTimeFrames.now,e.days>0?GH.ChartTimeFrames.from=GH.ChartTimeFrames.to-e.days*GH.ChartTimeFrames.day:GH.ChartTimeFrames.from=GH.ChartTimeFrames.minXValue);var a=new Date(GH.ChartTimeFrames.from).print(GH.ChartTimeFrames.dateFormat),r=new Date(GH.ChartTimeFrames.to).print(GH.ChartTimeFrames.dateFormat),t=AJS.format("{0} to {1} ({2})",a,r,e.name);AJS.$(".js-timeframe-info").text(t)},GH.ChartTimeFrames.setNewChartLimits=function(e,a,r,t){e<0?(GH.ChartTimeFrames.from=a,GH.ChartTimeFrames.to=r,GH.ChartTimeFrames.isRelative=!1,GH.ChartTimeFrames.days=-1):(GH.ChartTimeFrames.isRelative=!0,GH.ChartTimeFrames.days=e),GH.RapidBoard.State.setBoardSetting("chart.timeframe.days",GH.ChartTimeFrames.days),GH.RapidBoard.State.setBoardSetting("chart.timeframe.from",a),GH.RapidBoard.State.setBoardSetting("chart.timeframe.to",r),GH.ChartTimeFrames.updateDatesInfo(),t||AJS.$(GH).trigger("chartTimeFramesChanged")},GH.ChartTimeFrames.initializeDialog=function(e){AJS.$("#inline-dialog-chartTimeFramesInlineDialog").remove(),GH.ChartTimeFrames.chartId=e;var a={width:710,cacheContent:!1,hideDelay:6e4};AJS.InlineDialog("#js-chart-timeframe","chartTimeFramesInlineDialog",GH.ChartTimeFrames.renderChartTimeFramesDialog,a)},GH.ChartTimeFrames.renderChartTimeFramesDialog=function(e,a,r){var t=GH.ChartTimeFrames.from?new Date(GH.ChartTimeFrames.from).print(GH.ChartTimeFrames.dateFormat):"",i=GH.ChartTimeFrames.to?new Date(GH.ChartTimeFrames.to).print(GH.ChartTimeFrames.dateFormat):"",m=!1;GH.ChartTimeFrames.chartId==GH.CFDController.id?m="Alternatively, click and drag cursor across chart to select date range (double-click overview to reset).":GH.ChartTimeFrames.chartId==GH.Reports.ControlChartController.id&&(m="Alternatively, click and drag cursor across chart to select date range (double-click to reset)."),e.html(GH.tpl.charttimeframes.renderChartTimeFrames({timeFrames:GH.ChartTimeFrames.timeFrames,relative:GH.ChartTimeFrames.isRelative,days:GH.ChartTimeFrames.days,from:t,to:i,desc:m})),e.closest(".aui-inline-dialog").addClass("ghx-inline-dialog"),GH.ChartTimeFrames.updateDialogFromAndToDates(e);var s=function(a){a.hasClass("disabled")||(e.find(".js-timeframe-button").removeClass("active"),a.addClass("active"),GH.ChartTimeFrames.updateDialogFromAndToDates(e))};e.find(".js-timeframe-button").click(function(e){e.preventDefault(),s(AJS.$(this))}),Calendar.setup({firstDay:0,inputField:"ghx-field-from",button:"ghx-field-from-button",align:"Tl",singleClick:!0,cache:!1,positionStyle:"fixed",ifFormat:GH.ChartTimeFrames.dateFormat,showsTime:!1,onUpdate:function(){s(e.find('.js-timeframe-button[data-timeframe-id="-1"]'))}}),Calendar.setup({firstDay:0,inputField:"ghx-field-to",button:"ghx-field-to-button",align:"Tl",singleClick:!0,cache:!1,positionStyle:"fixed",ifFormat:GH.ChartTimeFrames.dateFormat,showsTime:!1,onUpdate:function(){s(e.find('.js-timeframe-button[data-timeframe-id="-1"]'))}}),e.find(".js-save-button").click(function(a){a.preventDefault(),GH.ChartTimeFrames.handleDialogSave(e)}),e.find(".js-cancel-button").click(function(e){AJS.InlineDialog.current.hide()}),r()},GH.ChartTimeFrames.handleDialogSave=function(e){var a=e.find(".js-timeframe-button.active"),r=parseInt(a.attr("data-timeframe-id"),10),t=null,i=null;if(e.find(".ghx-error").remove(),r<0){var m=e.find("#ghx-field-from").val();if(!m||!GH.ChartTimeFrames.isValidDate(m))return void e.find("#ghx-field-from").closest(".field-group").append('<div class="ghx-error">'+"From-date required"+"</div>");m=Date.parseDate(m,GH.ChartTimeFrames.dateFormat);var s=e.find("#ghx-field-to").val();if(!s||!GH.ChartTimeFrames.isValidDate(s))return void e.find("#ghx-field-to").closest(".field-group").append('<div class="ghx-error">'+"To-date required"+"</div>");if(s=Date.parseDate(s,GH.ChartTimeFrames.dateFormat),m.getTime()>s.getTime())return void e.find("#ghx-field-to").closest(".field-group").append('<div class="ghx-error">'+"From-date must be before to-date"+"</div>");t=m.getTime(),i=s.getTime()}GH.ChartTimeFrames.setNewChartLimits(r,t,i),GH.RapidBoard.State.pushState(),AJS.InlineDialog.current&&AJS.InlineDialog.current.hide()};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/ChartTimeFrames.soy' */
// This file was automatically generated from ChartTimeFrames.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.charttimeframes.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.charttimeframes == 'undefined') { GH.tpl.charttimeframes = {}; }


GH.tpl.charttimeframes.renderChartTimeFrame = function(opt_data, opt_ignored) {
  return '' + aui.buttons.button({id: ['js-chart-timeframe'], extraClasses: ['aui-button-subtle', 'ghx-dropdown-trigger', 'js-timeframe-info', 'ghx-pull-left'], text: ''});
};
if (goog.DEBUG) {
  GH.tpl.charttimeframes.renderChartTimeFrame.soyTemplateName = 'GH.tpl.charttimeframes.renderChartTimeFrame';
}


GH.tpl.charttimeframes.renderChartTimeFrames = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-chart-filters ghx-inline-dialog-content"><h2>' + soy.$$escapeHtml("Report Timeframe") + '</h2><form class="aui gh-aui"><fieldset><h3>' + soy.$$escapeHtml("Timeframe") + '</h3><div class="ghx-group aui-buttons js-timeframe-options">';
  var timeFrameList13 = opt_data.timeFrames;
  var timeFrameListLen13 = timeFrameList13.length;
  for (var timeFrameIndex13 = 0; timeFrameIndex13 < timeFrameListLen13; timeFrameIndex13++) {
    var timeFrameData13 = timeFrameList13[timeFrameIndex13];
    if (timeFrameData13.days == opt_data.days) {
      var buttonText__soy16 = '' + soy.$$escapeHtml(timeFrameData13.name);
      var buttonClass__soy18 = 'js-timeframe-button active';
      output += aui.buttons.button({extraAttributes: {'data-timeframe-id': timeFrameData13.days}, extraClasses: [buttonClass__soy18], text: buttonText__soy16});
    } else if (timeFrameData13.disabled) {
      var buttonText__soy25 = '' + soy.$$escapeHtml(timeFrameData13.name);
      var buttonClass__soy27 = 'js-timeframe-button disabled';
      output += aui.buttons.button({extraAttributes: {'data-timeframe-id': timeFrameData13.days}, extraClasses: [buttonClass__soy27], text: buttonText__soy25});
    } else {
      var buttonText__soy34 = '' + soy.$$escapeHtml(timeFrameData13.name);
      var buttonClass__soy36 = 'js-timeframe-button';
      output += aui.buttons.button({extraAttributes: {'data-timeframe-id': timeFrameData13.days}, extraClasses: [buttonClass__soy36], text: buttonText__soy34});
    }
  }
  output += '</div><div class="field-group"><label for="ghx-field-from">' + soy.$$escapeHtml("From") + '</label><input class="text medium-field" type="text" id="ghx-field-from" value="' + soy.$$escapeHtml(opt_data.from) + '"><span id="ghx-field-from-button" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar"></span></div><div class="field-group"><label for="ghx-field-to">' + soy.$$escapeHtml("To") + '</label><input class="text medium-field" type="text" id="ghx-field-to" value="' + soy.$$escapeHtml(opt_data.to) + '"><span id="ghx-field-to-button" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar"></span></div>' + ((opt_data.desc) ? '<div class="field-group"><div class="description">' + soy.$$escapeHtml(opt_data.desc) + '</div></div>' : '') + '</fieldset><div class="buttons-container"><div class="buttons"><button class="aui-button js-save-button">' + soy.$$escapeHtml("Apply") + '</button><a class="js-cancel-button"><span>' + soy.$$escapeHtml("Cancel") + '</span></a></div></div></form></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.charttimeframes.renderChartTimeFrames.soyTemplateName = 'GH.tpl.charttimeframes.renderChartTimeFrames';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/CFDController.js' */
define("jira-agile/rapid/ui/chart/cfd-controller",["require"],function(a){"use strict";var e=a("jquery"),r=a("jira-agile/rapid/analytics-tracker"),t=a("jira-agile/rapid/ui/chart/cfd-data"),i=a("jira-agile/rapid/ui/chart/cfd-view"),n=a("jira-agile/rapid/ui/chart/chart-controller"),o=a("jira-agile/rapid/ui/chart/chart-view"),d=GH.Ajax,l=GH.ChartFilters,h=GH.ChartTimeFrames,s=GH.ChartUtils,C=GH.log,u=GH.Logger,c=GH.RapidBoard.State,p=GH.tpl,m={};return m.id="cumulativeFlowDiagram",m.displayed=!1,m.rapidViewData={},m.rapidViewConfig={},m.analytics=new r("gh.report.cumulativeFlowDiagram"),m.setRapidView=function(a){m.rapidViewData=a||{}},m.isApplicable=function(a){return!0},m.getNormalizedFromInternal=function(){return s.getTimeFrameReportUrlParams(m.id)},m.toUrl=function(a){return s.timeFrameReportParamsToUrl(a)},m.updateInternalFromNormalized=function(a){s.updateFromNormalizedStateDateTimeParams(a)},m.getNormalizedFromUrl=function(a){return s.getNormalizedFromUrlForTimeFrameReport(a)},m.show=function(){if(C("CFDController.show",u.Contexts.ui),m.displayed=!0,m.rapidViewData){e(GH).unbind("."+m.id).bind("chartTimeFramesChanged."+m.id,m.handleChartTimeFramesChangedEvent).bind("chartFiltersChanged."+m.id,m.handleChartFiltersChangedEvent),i.show(),m.renderChartView();var a="show."+(m.rapidViewConfig.sprintSupportEnabled?"scrum":"kanban");m.analytics.trigger(a)}},m.hide=function(){C("CFDController.hide",u.Contexts.ui),m.displayed=!1,i.hide(),e("#ghx-chart-controls").hide(),e(GH).unbind("."+m.id)},m.renderChartView=function(){m.initializeControls(),o.getChartContentElem(!0).html(p.chartview.renderChartBody()),o.showSpinner(),n.loadRapidViewConfig(m,m.loadChartData)},m.initializeControls=function(){o.hideChartControls(),o.getChartControls(!0).html(p.chartview.renderChartControls()),l.initializeDialog(),h.initializeDialog(m.id)},m.loadChartData=function(){m.updateTools(),o.showChartControls();var a={rapidViewId:c.getRapidViewId()};l.addRequestParams(a),d.get({url:"/rapid/charts/cumulativeflowdiagram.json",data:a},"rapidChartData").done(m.processChartData).always(o.hideSpinner)},m.updateTools=function(){h.update();var a=m.rapidViewConfig,e=m.buildChartFilterConfig(a);l.update(m.id,a,e),c.pushState()},m.buildChartFilterConfig=function(a){var e={};e.defaultColumns=[];for(var r=0;r<a.columns.length;r++)e.defaultColumns.push(!0);return e},m.processChartData=function(a){m.displayed&&(t.setRawData(a),h.setBoundaries(a.firstChangeTime,a.now),i.renderChart(a))},m.handleChartFiltersChangedEvent=function(a,e){m.displayed&&(C("CFDController.handleChartFiltersChangedEvent",u.Contexts.event),m.loadChartData())},m.handleChartTimeFramesChangedEvent=function(a){if(m.displayed){C("CFDController.handleChartTimeFramesChangedEvent",u.Contexts.event);var e=t.getRawData();i.renderChart(e)}},m});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/CFDData.js' */
define("jira-agile/rapid/ui/chart/cfd-data",["require"],function(n){"use strict";var u=n("jquery"),a=n("underscore"),e=AJS.escapeHtml,o={};return o.raw={},o.getRawData=function(){return o.raw},o.setRawData=function(n){o.raw=n},o.computeSeries=function(n,u){var o=[],t=n.columnChanges,r=n.columns;a.each(r,function(n){n.issueCount=0,n.data=[]}),a.each(t,function(n,u){u=parseInt(u,10),a.each(n,function(n){a.each(r,function(a,e){n.columnFrom==e&&a.issueCount--,n.columnTo==e&&a.issueCount++,a.data.push([u,a.issueCount])})})});for(var c=r.length-1;c>=0;c--){var i=r[c],s=i.data;s.length>0&&s[s.length-1][0]<u&&s.push([u,s[s.length-1][1]]),o.push({data:s,label:e(String(i.name)),columnIndex:c})}return o},o.getChangeDetails=function(n){var e=o.raw,t=[];return a.each(e.columnChanges[n],function(n){n=u.extend(!0,{},n),void 0!=n.columnFrom&&(n.columnFrom=e.columns[n.columnFrom].name),void 0!=n.columnTo&&(n.columnTo=e.columns[n.columnTo].name),t.push(n)}),t},o.isRealDatapoint=function(n,u){var e=o.raw,t=e.columnChanges[n];return a.any(t,function(n){return u==n.columnTo})},o});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/CFDView.js' */
define("jira-agile/rapid/ui/chart/cfd-view",["require"],function(e){"use strict";var t,i,n=e("jquery"),o=e("underscore"),a=e("jira-agile/rapid/ui/chart/chart"),r=e("jira-agile/rapid/ui/chart/chart-view"),s=e("jira-agile/rapid/global-events");s.on("pre-initialization",function(){t=e("jira-agile/rapid/ui/chart/cfd-controller"),i=e("jira-agile/rapid/ui/chart/cfd-data")});var l=GH.ChartFilters,d=GH.ChartTimeFrames,c=GH.FlotChartUtils,h=GH.Logger,u=GH.tpl,v={};return v.COLUMN_COLORS=["#FF800D","#23819C","#9669FE","#59955C","#B9264F","#B05F3C","#2966B8","#9A03FE","#FF2626","#FF5353","#C8B400","#79FC4E","#8C8CFF","#C48484","#4FBDDD","#FFBE28","#99C7FF","#AE70ED","#FFA8A8","#DAAF85"],v.context={},v.previousPlotHoverPoint=null,v.init=function(){},v.show=function(){n(GH).unbind(a.EVENT_RESIZE_REDRAW+"."+t.id),n(GH).bind(a.EVENT_RESIZE_REDRAW+"."+t.id,function(e,i){i.id===t.id&&(h.log("Updating CFD after window resize event",h.Contexts.ui),v.resetRealPoints(),v._reverseLegendTable())})},v.hide=function(){n(GH).unbind(a.EVENT_RESIZE_REDRAW+"."+t.id),a.destroy(t.id+"Overview"),a.destroy(t.id)},v.renderChart=function(e){a.destroy(t.id+"Overview"),a.destroy(t.id);var o=d.getChartStartDate(),s=d.getChartEndDate(),h=i.computeSeries(e,e.now),u=v.getColors(l.getColumns(),l.getActiveColumns()),g={colors:u,xaxis:{mode:"time",min:o,max:s},yaxis:{tickDecimals:0,minTickSize:1,min:0,tickLength:"full"},series:{stack:!0,lines:{show:!0,fill:1,lineWidth:1}},grid:{hoverable:!0,clickable:!0,autoHighlight:!1},mouseEnterExitEvents:!0,selection:{mode:"x"},legend:{container:null,backgroundOpacity:.5,position:"nw"}},p={colors:u,xaxis:{mode:"time"},yaxis:{show:!1},series:{stack:!0,lines:{show:!0,fill:1,lineWidth:1}},selection:{mode:"x"},legend:{show:!1}};r.hideChartStatus(),r.showChartGroup(),c.setAndAlignAxisLabels("Time","Number of Issues");var f=r.getChartView(!0),x=n("#ghx-chart-overview-group"),C=n("#ghx-chart-overview"),w=n(x).find("h4"),m=n(x).find(".ghx-description");n(w).text("Overview"),n(m).text("Click and drag cursor across chart or chart overview to select date range (double-click overview to reset)."),w.show(),m.show(),f.show(),x.show();var P=v.context={chartContainer:f,series:h,options:g,realPoints:[],showPoints:!1};f.unbind("plothover plotselected"),f.bind("plotselected",v.handleSelection),f.bind("plothover",v.handlePlotHover),P.mainChart=a.draw(t.id,f,h,g),f.unbind("flotMouseEnter flotMouseLeave").bind("flotMouseEnter",v.handleMouseEnter).bind("flotMouseLeave",v.handleMouseLeave),P.mainChart.hooks.drawSeries.push(v.gatherPoints),P.mainChart.hooks.draw.push(v.deferredRenderPoints),v._reverseLegendTable(),C.unbind("plotselected dblclick"),C.bind("plotselected",v.handleSelection),C.bind("dblclick",v.resetSelection),P.overviewChart=a.draw(t.id+"Overview",C,h,p),P.overviewChart.setSelection({xaxis:{from:o,to:s}},!0)},v.getColors=function(e,t){var i=[];return o.each(e,function(e,n){var a=o.any(t,function(t){return t.id==e.id});a&&i.push(v.COLUMN_COLORS.slice(n))}),i.reverse()},v._reverseLegendTable=function(){var e=r.getChartView().find(".legend").find("tbody");e.children().each(function(){e.prepend(n(this))})},v.updateTimeFrameSelection=function(){var e=d.getChartStartDate(),i=d.getChartEndDate(),n=v.context;n.options.xaxis.min=e,n.options.xaxis.max=i;var o=d.getSelectedTimeFrame();0!=o.days&&n.overviewChart.setSelection({xaxis:{from:e,to:i}},!0),n.mainChart=a.draw(t.id,n.chartContainer,n.series,n.options),v._reverseLegendTable()},v.handleSelection=function(e,t){var i=t.xaxis.from,n=t.xaxis.to;d.setNewChartLimits(-1,i,n)},v.resetSelection=function(e){var t=v.context.overviewChart.getXAxes()[0];d.setNewChartLimits(-1,t.min,t.max)},v.handlePlotHover=function(e,t,i){i?i.dataIndex!=v.previousPlotHoverPoint&&v.isRealPoint(i)&&(n("#ghx-tooltip").remove(),v.previousPlotHoverPoint=i.dataIndex,v.renderTooltip(i.datapoint[0],i.pageX,i.pageY)):(n("#ghx-tooltip").remove(),v.previousPlotHoverPoint=null)},v.isRealPoint=function(e){var t=e.series.xaxis,i=e.series.yaxis,n=t.p2c(e.datapoint[0]),a=i.p2c(e.datapoint[1]);return o.any(v.context.realPoints,function(e){var o=t.p2c(e.time),r=i.p2c(e.issueCount);return Math.abs(n-o)<1&&Math.abs(a-r)<1})},v.handleMouseEnter=function(e){var t=v.context;t.showPoints||(t.showPoints=!0,t.realPoints=[],t.mainChart.draw())},v.handleMouseLeave=function(e){var t=v.context;t.showPoints&&(t.showPoints=!1,t.mainChart.draw())},v.renderTooltip=function(e,t,o){var a=new Date(e),r=new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds()),s=i.getChangeDetails(e),l=n(u.chartview.renderCfdTooltip({changes:s,time:r.print(d.timeFormat)})).css({position:"absolute",display:"none",top:o+5});l.appendTo("body");var c=l.width(),h=n("#ghx-chart-view canvas.base");t+c>h.offset().left+h.width()?l.css({left:t-(30+c)}):l.css({left:t+15}),l.fadeIn(200)},v.resetRealPoints=function(e,t){v.context.realPoints=[]},v.gatherPoints=function(e,n,o){if(t.displayed&&v.context.showPoints)for(var a=o.datapoints,r=a.points,s=a.pointsize,l=o.xaxis,d=o.yaxis,c=0;c<r.length;c+=s){var h=r[c],u=r[c+1];if(i.isRealDatapoint(h,o.columnIndex)&&!(null==h||h<l.min||h>l.max||u<d.min||u>d.max)){var g=l.p2c(h),p=d.p2c(u);v.context.realPoints.push({x:g,y:p,time:h,issueCount:u})}}},v.deferredRenderPoints=function(e,i){t.displayed&&v.context.showPoints&&(i.save(),i.translate(e.getPlotOffset().left,e.getPlotOffset().top),i.strokeStyle="rgb(100, 100, 100)",i.fillStyle="rgba(255, 255, 255, 0.5)",o.each(v.context.realPoints,function(e){c.drawPoint(i,e)}),i.restore())},n(v.init),v});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/BurndownChartController.js' */
define("jira-agile/rapid/ui/chart/burndown-chart-controller",["require"],function(t){"use strict";var e=t("jquery"),r=t("underscore"),i=t("jira-agile/rapid/analytics-tracker"),n=t("jira-agile/rapid/ui/chart/burndown-chart-view"),a=t("jira-agile/rapid/ui/chart/burndown-report-chart-controller"),d=t("jira-agile/rapid/ui/chart/chart"),o=t("jira-agile/rapid/ui/component/chart-picker"),s=t("jira-agile/rapid/ui/chart/chart-view"),l=t("jira-agile/rapid/ui/component/estimate-picker"),c=GH.Ajax,p=GH.log,u=GH.Logger,h=GH.RapidBoard.State,m=GH.RapidBoard.UrlState,S={};return S.id="burndownChart",S.displayed=!1,S.rapidViewId=void 0,S.analytics=new i("gh.report.burndownChart"),S.setRapidView=function(t){S.rapidViewId=t.id,a.setRapidView(t.id)},S.getNormalizedFromInternal=function(){return{sprint:S.getSprintIdForUrl()||null,estimate:S.getEstimateIdForUrl()||null}},S.getSprintIdForUrl=function(){var t=S.sprintPicker.getSelectedItem();if(t)return t.id;var e=S.sprintPicker.getStoredSelectedItemId();return e!==-1?e:null},S.getEstimateIdForUrl=function(){var t=S.estimatePicker.getStoredSelectedItemId();return t!==-1?t:null},S.toUrl=function(t){var e={};return null!==t.sprint&&(e.sprint=t.sprint),null!==t.estimate&&(e.estimate=t.estimate),e},S.updateInternalFromNormalized=function(t){S.setSelectedSprintFromUrlState(t.sprint),S.setSelectedEstimateFromUrlState(t.estimate)},S.setSelectedSprintFromUrlState=function(t){t&&S.sprintPicker.storeSelectedItemId(t)},S.setSelectedEstimateFromUrlState=function(t){t&&S.estimatePicker.storeSelectedItemId(t)},S.getNormalizedFromUrl=function(t){return{sprint:m.normalizeNumberParam(t.sprint,null),estimate:m.normalizeStringParam(t.estimate,null)}},S.isApplicable=function(t){return t.sprintSupportEnabled},S.init=function(){S.sprintPicker=new o("burndown.selectedSprintId"),S.estimatePicker=new l("burndown.selectedEstimate",(!0))},S.show=function(){if(p("BurndownChartController.show",u.Contexts.ui),S.displayed=!0,a.show(),S.rapidViewId){var t="."+S.id;e(GH).unbind(t),e(GH).bind(d.EVENT_RESIZE_REDRAW+t,S.handleResizeEvent),S.loadChart(),S.analytics.trigger("show")}},S.hide=function(){p("BurndownChartController.hide",u.Contexts.ui),a.hide(),S.displayed=!1,e(GH).unbind("."+S.id),d.destroy(n.id),e(GH).unbind("."+S.id)},S.loadChart=function(){n.renderChartLoading(),e(S.sprintPicker).bind("selectedItemChanged",S.handleSprintChanged),a.setNonWorkingDaysShown(h.getNonWorkingDaysShown("burndown"));var t=S.rapidViewId;S.loadSprintOptions(t).done(function(t){S.processSprintsData(t),t.sprints&&t.sprints.length>0&&S.estimatePicker.load(S.rapidViewId,S.handleEstimateChanged).done(function(){var t=S.sprintPicker.getSelectedItem(),e=S.estimatePicker.getSelectedItem();t?(a.setSprintId(t.id),a.setEstimationStatistic(e.id),a.loadChartData()):s.hideSpinner()})})},S.loadSprintOptions=function(t){return c.get({url:"/sprintquery/"+t,data:{includeHistoricSprints:!1,includeFutureSprints:!1}},"sprintOptions")},S.processSprintsData=function(t){S.displayed&&(t.sprints.reverse(),S.sprintPicker.setItems(t.sprints),S.sprintPicker.setDefaultItem(S.getDefaultSprintForPicker(t.sprints)),n.renderAndShowSprintPicker(),t.sprints&&0!==t.sprints.length||(S.estimatePicker.shouldRender=!1),h.replaceState())},S.handleSprintChanged=function(){S.displayed&&(p("BurndownChartController.handleSprintChanged",u.Contexts.event),h.pushState(),a.setSprintId(S.sprintPicker.getSelectedItem().id),a.loadChartData())},S.getDefaultSprintForPicker=function(t){var e=r.filter(t,function(t){return!t.closed});return e.length>0?r.first(e):r.first(t)},S.handleEstimateChanged=function(t){S.displayed&&(p("BurndownChartController.handleEstimateChanged",u.Contexts.event),h.pushState(),a.setEstimationStatistic(t),a.loadChartData())},S.handleResizeEvent=function(t,e){e.id===S.id&&(u.log("Updating BurndownChart after window resize event",u.Contexts.ui),e.chart.realPointsPerSeries={},setTimeout(n.addNonWorkingDaysToLegend,0))},S});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/BurndownReportChartController.js' */
define("jira-agile/rapid/ui/chart/burndown-report-chart-controller",["require"],function(i){"use strict";var t=i("jira-agile/rapid/ui/chart/burndown-chart-model"),a=i("jira-agile/rapid/ui/chart/burndown-chart-view"),n=i("jira-agile/rapid/ui/chart/chart-view"),r=GH.Ajax,d={};return d.displayed=!1,d.rapidViewId=void 0,d.sprintId=void 0,d.estimationStatisticId=void 0,d.nonWorkingDaysShown=void 0,d.setRapidView=function(i){d.rapidViewId=i},d.setSprintId=function(i){d.sprintId=i},d.setEstimationStatistic=function(i){d.estimationStatisticId=i},d.show=function(){d.displayed=!0},d.hide=function(){d.displayed=!1},d.setNonWorkingDaysShown=function(i){d.nonWorkingDaysShown=i},d.loadChartData=function(){if(d.sprintId){var i={rapidViewId:d.rapidViewId,sprintId:d.sprintId,statisticFieldId:d.estimationStatisticId};return r.get({url:"/rapid/charts/scopechangeburndownchart.json",data:i},"rapidChartData").done(d.processChartData).fail(n.hideSpinner)}},d.processChartData=function(i){d.displayed&&(t.setRawData(i),a.setNonWorkingDaysShown(d.nonWorkingDaysShown),a.showChart())},d});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/BurndownChartModel.js' */
define("jira-agile/rapid/ui/chart/burndown-chart-model",["require"],function(e){"use strict";var t,a,i=e("underscore"),n=e("jira-agile/rapid/ui/chart/burndown-chart-view"),r=e("jira-agile/rapid/ui/chart/burndown-rate"),s=e("jira-agile/rapid/ui/chart/chart-colors"),l=e("jira-agile/rapid/global-events"),u=GH.ChartUtils,c=GH.FlotChartUtils;l.on("pre-initialization",function(){t=e("jira-agile/rapid/ui/chart/burndown-table-producer"),a=e("jira-agile/rapid/ui/chart/burndown-timeline-producer")});var o={};return o.rawData={},o.tableHandler={},o.timelineData={},o.series=[],o.seriesData={},o.yAxisData={},o.dataTable={},o.setRawData=function(e){o.rawData=e,r.setRateData(e.workRateData),o.prepareData()},o.getStatistic=function(){return o.rawData.statisticField},o.isTimeTracking=function(){return"timeestimate"===o.getStatistic().fieldId},o.getParentIssueKey=function(e){return!i.isUndefined(o.rawData.issueToParentKeys)&&(o.rawData.issueToParentKeys[e]||!1)},o.prepareData=function(){var e=o.isTimeTracking();e?o.tableHandler=t.TimeTrackingTableHandler:o.tableHandler=t.EstimateStatisticTableHandler;var i=u.getStatisticConsumer(e);o.timelineData=a.calculateTimelineData(o.rawData,i),o.calculateSeries();var n=o.rawData.lastUserWhoClosedHtml,r=t.getDataTable(o.timelineData,o.tableHandler,i,n);o.renderDataTableValues(r),o.dataTable=r},o.getChartStartTime=function(){var e=o.timelineData;return e.startTime},o.calculateGuidelineSeries=function(e){var t=e.startValue,a=r.getRateDefinitions(),n=r.limitToTimeRange(a,e.startTime,e.endTime),s=o.calculateTimePerUnit(n,t),l=[[e.startTime,e.startValue]].concat(i.map(n,function(a){if(a.rate===r.WORKING_DAY){var n=a.start-a.end,l=n/s;t-=l}return[i.min([a.end,e.endTime]),i.max([t,0])]}));return l=i.reject(l,function(e){return 0===e.length}),{id:"guideline",data:l,color:"#999",label:"Guideline"}},o.calculateTimePerUnit=function(e,t){var a=r.limitToWorkingDays(e),n=i.reduce(a,function(e,t){return e+(t.start-t.end)},0);return n/t},o.calculateSeries=function(){var e=o.timelineData,t=e.timeline;if(!i.isEmpty(t)){var a=t[0],r=[];r.push(o.calculateGuidelineSeries({startTime:e.startTime,startValue:a.values.estimate,endTime:e.endTime}));var l=["estimate"];o.isTimeTracking()&&l.push("timeSpent");var u={},c={};if(i.each(l,function(e){u[e]=[],c[e]=[]}),i.each(t,function(e){e.openCloseEntries||i.each(l,function(t){e.deltas&&i.isNumber(e.deltas[t])&&0!==e.deltas[t]&&(u[t].push([e.time,e.values[t]-e.deltas[t]]),c[t].push({})),u[t].push([e.time,e.values[t]]),c[t].push(e)})}),!e.completeTime){var d=i.last(t);i.each(l,function(t){u[t].push([Math.max(e.startTime,e.now),d.values[t]])})}o.isTimeTracking()&&r.push({id:"timeSpent",data:u.timeSpent,color:"#14892c",label:"Time Spent"}),r.push({id:"estimate",data:u.estimate,color:"#d04437",label:"Remaining Values"});var g;g=n.wallboardMode?s.nonWorkingDaysWallboard:s.nonWorkingDays,r.push({id:"markings",color:g,data:[],label:"Non-Working Days"});var m=0;i.each(l,function(t){m=Math.max(m,e.maxValues[t]||0)}),o.calculateYAxis(m),o.series=r,o.seriesData=c}},o.calculateYAxis=function(e){o.yAxisData=c.calculateYAxis(e,o.getStatistic())},o.getDataTable=function(){return o.dataTable},o.getSeries=function(){return o.series},o.getYAxis=function(){return o.yAxisData},o.getDataBySeries=function(e){return o.seriesData[e]},o.getDataBySeriesAtIndex=function(e,t){if(o.seriesData[e])return o.seriesData[e][t]},o.getStatisticDefinitionForSeries=function(e){var t=o.getStatisticDefinitions(),a=i.find(t,function(t){return e===t.valueId});return a},o.getStatisticDefinitions=function(){return o.dataTable.statistics},o.getWarning=function(){return o.rawData.warningMessage},o.isEmpty=function(){return 0===Object.keys(o.rawData.changes).length},o.renderDataTableValues=function(e){var t="";i.each(e.rows,function(e){var a,n=u.renderUTCMillisAsDate(e.time);e.recordedTime&&(a=u.renderUTCMillisAsDate(e.recordedTime)),(n!==t||a)&&(e.dateString=n,e.recordedDateString=a,t=n),e.valuesText={},i.each(i.keys(e.values),function(t){e.valuesText[t]=o.renderStatisticText(e.values[t])}),e.initial||e.complete?(i.each(e.issues,function(e){e.valuesText={},i.each(i.keys(e.values),function(t){e.valuesText[t]=o.renderStatisticText(e.values[t])}),e.parentKey=o.getParentIssueKey(e.key)}),e.issues=i.sortBy(e.issues,function(e){return e.parentKey||e.key})):e.openClose||(e.deltasType={},e.deltasText={},i.each(i.keys(e.deltas),function(t){e.deltasText[t]=o.renderStatisticText(e.deltas[t],!0),e.deltasType[t]=e.deltas[t]<0?"dec":"inc"}),e.parentKey=o.getParentIssueKey(e.key))})},o.renderStatisticText=function(e,t){return u.renderStatisticText(e,t,o.getStatistic().renderer)},o.getTooltipData=function(e,a){var n=a,r={},s=o.getStatisticDefinitionForSeries(e);return r.statistic=s,n.initial||n.complete?(n.initial?(r.initial=!0,r.event=t.getSprintStartChangeEvent()):(r.complete=!0,r.event=t.getSprintCompleteChangeEvent()),r.issueCount=i.size(n.issues),r.statisticName=s.name,r.statisticValue=o.renderStatisticText(n.values[s.valueId])):(r.changes=[],i.each(n.issues,function(e){var t={};t.key=e.key,t.statisticName=s.name,t.statisticDelta=o.renderStatisticText(e.deltas[s.valueId]),t.event=o.tableHandler.getChangeEvent(e),r.changes.push(t)})),r.dateText=u.renderUTCMillisAsDate(n.time),r},o.hasAnyWorkingDays=function(){return r.getWorkingDays().length>0},o});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/BurndownRate.js' */
define("jira-agile/rapid/ui/chart/burndown-rate",["require"],function(t){"use strict";var n=t("underscore"),r={};return r.WORKING_DAY=1,r.NON_WORKING_DAY=0,r.setRateData=function(t){r.rateData=t},r.getRateDefinitions=function(){return r.rateData.rates},r.getNonWorkingDays=function(){var t=r.getRateDefinitions();return r.limitToNonWorkingDays(t)},r.getWorkingDays=function(){var t=r.getRateDefinitions();return r.limitToWorkingDays(t)},r.limitToWorkingDays=function(t){return n.filter(t,function(t){return t.rate===r.WORKING_DAY})},r.limitToNonWorkingDays=function(t){return n.filter(t,function(t){return t.rate===r.NON_WORKING_DAY})},r.limitToTimeRange=function(t,r,e){var i=n.reject(t,function(t){return e<t.start||t.end<r});return n.map(i,function(t){return{start:Math.max(r,t.start),rate:t.rate,end:Math.min(e,t.end)}})},r.isDateInNonWorkingBlock=function(t){for(var n=!1,e=r.getNonWorkingDays(),i=0;i<e.length;i++){var a=e[i];if(a.start<=t&&a.end>t){n=!0;break}}return n},r.getAdjustedNonWorkingDays=function(t){var e=r.getNonWorkingDays(),i=n.filter(e,function(n){return n.end>t});return n.map(i,function(n){return{moveTo:n.start===t?n.end:n.start,start:n.start,end:n.end}})},r});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/BurndownTableProducer.js' */
define("jira-agile/rapid/ui/chart/burndown-table-producer",["require"],function(e){"use strict";var t=e("underscore"),n=e("jira-agile/rapid/ui/chart/burndown-chart-model"),a=e("jira-agile/rapid/ui/chart/burndown-timeline-producer"),i=GH.ChartUtils,r=GH.tpl,d={};return d.getDataTable=function(e,n,i,r){var s={rows:[],pastChangeRows:{},currentValues:[]};t.each(e.timeline,function(e){if(e.initial){var o={initial:!0,time:e.time,event:d.getSprintStartChangeEvent(),values:e.values,issues:e.issues};s.rows.push(o),s.currentValues=t.clone(e.values)}else if(e.complete){var g={complete:!0,time:e.time,event:d.getSprintCompleteChangeEvent(r),values:e.values,issues:e.issues};s.rows.push(g)}else e.openCloseInstances?t.each(e.openCloseInstances,function(t){s.rows.push({time:e.time,event:d.getSprintStateChangeEvent(t),openClose:!0,values:{}})}):t.each(e.issues,function(r){a.addStatisticValueDeltas(r.deltas,s.currentValues,1,i);var d={time:e.time,key:r.key,deltas:r.deltas,values:t.clone(s.currentValues)};d.event=n.getChangeEvent(r),n.addAdditionalRowInformation(s,e,r,d),s.rows.push(d)})});var o={statistics:n.getStatisticDefinitions(),rows:s.rows};return o},d.getSprintStartChangeEvent=function(){return{type:"Sprint start",detail:""}},d.getSprintCompleteChangeEvent=function(e){return{type:r.burndownchart.renderSprintCompleteEventType({closingUserHtml:e}),typeAsHtml:!0,detail:""}},d.getSprintReopenChangeEvent=function(e){return{type:GH.tpl.burndownchart.renderSprintReopenEventType({reopenUserHtml:e}),typeAsHtml:!0,detail:""}},d.getSprintStateChangeEvent=function(e){return"CLOSE"===e.operation?d.getSprintCompleteChangeEvent(e.user||e.userDisplayNameHtml):d.getSprintReopenChangeEvent(e.user||e.userDisplayNameHtml)},d.getSprintOrColumnChangeEvent=function(e,t){return e.scopeChange?e.inScope?{type:"Scope change",detail:"Issue added to sprint"}:{type:"Scope change",detail:"Issue removed from sprint"}:d.getColumnChangeEvent(e,t)},d.getColumnChangeEvent=function(e,t){return!!e.columnChange&&("notDone"===e.column?e.oldColumn?{type:t,detail:"Issue reopened"}:{type:"Scope change",detail:"Open issue moved into board (from an unmapped status)"}:"done"===e.column?e.oldColumn?{type:t,detail:"Issue completed"}:{type:"Scope change",detail:"Done issue moved into board (from an unmapped status)"}:"notDone"===e.oldColumn?{type:"Scope change",detail:"Open issue moved out of board (into an unmapped status)"}:{type:"Scope change",detail:"Done issue moved out of board (into an unmapped status)"})},d.TimeTrackingTableHandler={getStatisticDefinitions:function(){var e=[{id:"timeSpent",name:"Time Spent",isSum:!0},n.getStatistic()];return e[0].valueId="timeSpent",e[1].valueId="estimate",e},addAdditionalRowInformation:function(e,n,r,d){if(r.change&&r.change.timeC&&r.change.timeC.changeDate){var s=r.change.timeC.changeDate;n.time-n.time%6e4!==s-s%6e4&&(d.recordedTime=s),e.pastChangeRows[r.key+"-"+s]=d}var o=a.TimeTrackingStatisticConsumer.getAffectingEstimateChanges(r,r.change);t.each(o,function(t){var n=e.pastChangeRows[t.issueKey+"-"+t.date];if(n){if(n.event.loggedNoteAdded)return;n.event.loggedNoteAdded=!0,n.event.notes||(n.event.notes=[]),n.event.notes.push(AJS.format("Backdated event, recorded at {0}",i.renderUTCMillisAsDate(t.date)))}})},getChangeEvent:function(e){var r="Issue state change",s=d.getSprintOrColumnChangeEvent(e,r);if(s)return s;if(e.estimateChange||e.timeChange){var o=0,g=!1,c=0,u=!1,h=0,p=!1;e.timeChange&&(o=e.deltas.timeSpent,g=!0),e.estimateChange&&(h=e.values.estimate,c=e.values.estimate-e.deltas.estimate||0,u=!t.isUndefined(c),p=!t.isUndefined(h));var l={};if(g)l.type="Work logged";else{var v="Remaining Time Estimate",m="RTE",S='<acronym title="'+v+'">'+m+"</acronym>";l.type=AJS.format("{0} change",S),l.typeAsHtml=!0}var w="",T=[];if(g&&(w+=AJS.format("{0} logged",n.renderStatisticText(o))),u||p){var C=u?n.renderStatisticText(c):"no value",f=p?n.renderStatisticText(h):"no value";w+=w.length>0?", ":"",w+=AJS.format("{0} changed from {1} to {2}",n.getStatistic().name,C,f);var A=a.TimeTrackingStatisticConsumer.getAffectingEstimateChanges(e,e.change);t.each(A,function(e){T.push(AJS.format("Includes {0} backdated to {1}, recorded at {2}",i.renderStatisticText(e.delta),i.renderUTCMillisAsDate(e.worklogDate),i.renderUTCMillisAsDate(e.date)))})}return l.detail=w,l.notes=T,l}return{type:"unknown",detail:["unknown change"]}}},d.EstimateStatisticTableHandler={getStatisticDefinitions:function(){var e=[n.getStatistic()];return e[0].valueId="estimate",e},addAdditionalRowInformation:function(e,t,n,a){},getChangeEvent:function(e){var a="Burndown",i=d.getSprintOrColumnChangeEvent(e,a);if(i)return i;if(e.estimateChange){var r=e.values.oldEstimateFieldValue,s=e.values.estimateFieldValue,o=!t.isUndefined(r),g=!t.isUndefined(s);return o&&g?{type:"Scope change",detail:AJS.format("Estimate changed from {0} to {1}",n.renderStatisticText(r),n.renderStatisticText(s))}:o?{type:"Scope change",detail:AJS.format("Estimate of {0} has been removed",n.renderStatisticText(r))}:{type:"Scope change",detail:AJS.format("Estimate of {0} has been added",n.renderStatisticText(s))}}return{type:"unknown",detail:"unknown change"}}},d});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/BurndownTimelineProducer.js' */
define("jira-agile/rapid/ui/chart/burndown-timeline-producer",["require"],function(e){"use strict";var t=e("underscore"),a={};return a.calculateTimelineData=function(e,s){var i={timeline:[]};if(e.startTime===e.endTime)return i;var n=!t.isUndefined(e.completeTime)&&e.completeTime,u=a.calculateTimeline(e.startTime,n,e.changes,e.openCloseChanges,s,e.estimatableIssueKeys);return i.timeline=u.timeline,i.now=e.now,i.startTime=e.startTime,i.endTime=e.endTime,i.completeTime=n,i.maxValues=u.maxValues,i.statisticField=e.statisticField,i.finalIssueStates=u.issueState,i},a.calculateTimeline=function(e,s,i,n,u,r){var l={issueState:{},timeline:[],currentValues:{},maxValues:{},pastSprintStart:!1,statisticConsumer:u,estimatableIssueKeys:r};a.addStatisticValueDeltas({},l.currentValues,1,u);for(var o=t.keys(i),m=n?t.keys(n):[],c=0,d=0;d<o.length;d++){var C=o[d],S=parseInt(C,10);if(!l.pastSprintStart&&e<=S&&(a.addSprintStartTimelineEntry(l,e),l.pastSprintStart=!0),s&&s<S)break;var h=i[C],p=a.processTimeChanges(l,h,S);if(l.pastSprintStart&&p){if(m.length>0)for(var f=m[c];f<C;){var v=parseInt(f,10),g=n[f];a.addSprintStateChangeTimelineEntry(l,v,g),c++,f=m[c]}a.addChangeTimelineEntry(l,S,p.issues,p.deltas)}}return l.pastSprintStart||(a.addSprintStartTimelineEntry(l,e),l.pastSprintStart=!0),s&&a.addSprintCompleteTimelineEntry(l,s),l},a.processTimeChanges=function(e,s,i){var n={},u=[];return t.each(s,function(s){var r={},l=e.issueState[s.key];l||(l={key:s.key,isInChart:!1,burned:!1,values:{},estimatable:t.contains(e.estimatableIssueKeys,s.key)},e.issueState[s.key]=l),a.removeStatisticValues(l,r,e.statisticConsumer),a.removeStatisticValues(l,n,e.statisticConsumer),e.statisticConsumer.beforeProcessChange(l,i,s);var o=l.isInChart||!1;if(a.processInChartChanges(l,s),e.statisticConsumer.processChange(l,s),a.addStatisticValues(l,r,e.statisticConsumer),a.addStatisticValues(l,n,e.statisticConsumer),o||l.isInChart){var m=a.getCurrentState(e,l,r);m.change=s,u.push(m)}e.statisticConsumer.afterProcessChange(l,i,s)}),!t.isEmpty(u)&&(a.addStatisticValueDeltas(n,e.currentValues,1,e.statisticConsumer),{issues:u,deltas:n})},a.processInChartChanges=function(e,a){t.isUndefined(a.added)?e.scopeChange=!1:(e.inScope=a.added,e.scopeChange=!0),a.column?(a.column.done===!1&&(a.column.notDone=!0),a.column.notDone===!1&&(a.column.done=!0),a.column.notDone?(e.column="notDone",t.isBoolean(a.column.done)?e.oldColumn="done":e.oldColumn=void 0):a.column.done?(e.column="done",t.isBoolean(a.column.notDone)?e.oldColumn="notDone":e.oldColumn=void 0):(e.column=void 0,t.isBoolean(a.column.notDone)?e.oldColumn="notDone":e.oldColumn="done"),e.columnChange=!0):e.columnChange=!1,e.isInChart=!(!e.column||!e.inScope),e.burned="done"===e.column},a.addStatisticValues=function(e,t,s){e.isInChart&&a.addStatisticValueDeltas(e.values,t,1,s)},a.removeStatisticValues=function(e,t,s){e.isInChart&&a.addStatisticValueDeltas(e.values,t,-1,s)},a.addStatisticValueDeltas=function(e,a,s,i){s||(s=1),t.each(i.dataFields,function(t){a[t]=(a[t]||0)+(e[t]||0)*s})},a.getMaxStatisticValues=function(e,a,s){var i={};return t.each(s.dataFields,function(t){i[t]=e[t]>a[t]?e[t]:a[t]}),i},a.addChangeTimelineEntry=function(e,s,i,n){var u={time:s,issues:i,values:t.clone(e.currentValues),deltas:n};e.timeline.push(u),e.maxValues=a.getMaxStatisticValues(e.maxValues,e.currentValues,e.statisticConsumer)},a.addSprintStateChangeTimelineEntry=function(e,t,a){var s={time:t,issues:{},values:{},deltas:{},openCloseInstances:a};e.timeline.push(s)},a.addSprintStartTimelineEntry=function(e,s){e.statisticConsumer.beforeSprintStart(e);var i=a.getTimelineEntryForCurrentState(e,s);i.initial=!0,e.timeline.push(i),e.maxValues=t.clone(e.currentValues)},a.addSprintCompleteTimelineEntry=function(e,t){var s=a.getTimelineEntryForCurrentState(e,t);s.complete=!0,e.timeline.push(s)},a.getTimelineEntryForCurrentState=function(e,s){var i=[];t.each(e.issueState,function(t){t.isInChart&&i.push(a.getCurrentState(e,t))});var n={time:s,issues:i,values:t.clone(e.currentValues)};return n},a.getCurrentState=function(e,a,s){var i=t.clone(a);return i.values=t.clone(a.values),s&&(i.deltas=s,e.statisticConsumer.copyToCurrentState(i,a)),i},a.TimeTrackingStatisticConsumer={dataFields:["estimate","timeSpent"],processChange:function(e,a){a.timeC&&(t.isUndefined(a.timeC.timeSpent)?e.timeChange=!1:e.isInChart&&(e.values.timeSpent=(e.values.timeSpent||0)+(a.timeC.timeSpent||0),e.timeChange=!0),t.isUndefined(a.timeC.newEstimate)?e.estimateChange=!1:(e.values.estimate=(e.values.estimate||0)+((a.timeC.newEstimate||0)-(a.timeC.oldEstimate||0)),e.estimateChange=!0))},beforeProcessChange:function(e,t,s){a.TimeTrackingStatisticConsumer.removeExpiredEstimateChanges(e,t)},afterProcessChange:function(e,t,s){a.TimeTrackingStatisticConsumer.addEstimateChange(e,t,s)},beforeSprintStart:function(e){t.each(e.issueState,function(e){t.isUndefined(e.values.timeSpent)||(e.values.timeSpent=0)}),e.maxValues.timeSpent=0,e.currentValues.timeSpent=0},copyToCurrentState:function(e,a){e.estimateDeltas=t.clone(a.estimateDeltas)},removeExpiredEstimateChanges:function(e,a){e.estimateDeltas||(e.estimateDeltas=[]),e.estimateDeltas=t.reject(e.estimateDeltas,function(e){return e.date<=a})},addEstimateChange:function(e,t,a){if(e.estimateDeltas||(e.estimateDeltas=[]),a.timeC&&a.timeC.changeDate){var s=a.timeC.changeDate,i=(a.timeC.newEstimate||0)-(a.timeC.oldEstimate||0);e.estimateDeltas.push({worklogDate:t,date:s,issueKey:a.key,delta:i,change:a})}},getAffectingEstimateChanges:function(e,a){return a.timeC&&a.timeC.changeDate?t.filter(e.estimateDeltas,function(e){return a.timeC.changeDate<e.date}):[]}},a.EstimateStatisticConsumer={dataFields:["realValue","estimate"],processChange:function(e,t){t.statC?(e.values.oldEstimateFieldValue=t.statC.oldValue,e.values.estimateFieldValue=t.statC.newValue,e.estimateChange=!0):e.estimateChange=!1,e.isInChart&&!e.burned?e.values.estimate=e.values.estimateFieldValue:e.values.estimate=e.values.estimateFieldValue?0:e.values.estimateFieldValue},beforeProcessChange:function(e,t,a){},afterProcessChange:function(e,t,a){},beforeSprintStart:function(e){},copyToCurrentState:function(e,t){}},a.ProgressConsumer={dataFields:["issueCount","unestimatedIssueCount","totalEstimate","completedEstimate"],processChange:function(e,a){if(a.statC?(e.values.oldEstimateFieldValue=a.statC.oldValue,e.values.estimateFieldValue=a.statC.newValue,e.estimateChange=!0):e.estimateChange=!1,e.isInChart){e.values.issueCount=1,e.values.unestimatedIssueCount=e.estimatable&&t.isUndefined(e.values.estimateFieldValue)&&!e.burned?1:0;var s=e.values.estimateFieldValue||0;e.values.totalEstimate=s,e.values.completedEstimate=e.burned?s:0}else e.values.issueCount=0,e.values.unestimatedIssueCount=0,e.values.totalEstimate=0,e.values.completedEstimate=0;e.isInChart&&!e.burned?e.values.estimate=e.values.estimateFieldValue:e.values.estimate=e.values.estimateFieldValue?0:e.values.estimateFieldValue},beforeProcessChange:function(e,t,a){},afterProcessChange:function(e,t,a){},beforeSprintStart:function(e){},copyToCurrentState:function(e,t){}},a});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/BurndownChartView.js' */
define("jira-agile/rapid/ui/chart/burndown-chart-view",["require"],function(r){"use strict";var e,n,o,t=r("jquery"),a=r("underscore"),i=r("jira-agile/rapid/ui/chart/chart"),d=r("jira-agile/rapid/ui/chart/chart-colors"),s=r("jira-agile/rapid/ui/chart/chart-controller"),l=r("jira-agile/rapid/ui/chart/chart-view"),h=r("jira-agile/rapid/global-events"),g=r("jira-agile/rapid/ui/chart/non-working-days-util"),c=GH.ChartTimeFrames,u=GH.ChartTooltip,p=GH.FlotChartUtils,w=GH.RapidBoard,f=GH.tpl;h.on("pre-initialization",function(){e=r("jira-agile/rapid/ui/chart/burndown-chart-controller"),n=r("jira-agile/rapid/ui/chart/burndown-chart-model"),o=r("jira-agile/rapid/ui/chart/report-controller")});var k={};return k.gadgetMode=!1,k.wallboardMode=!1,k.nonWorkingDaysShown=void 0,k.renderStats=!0,k.renderNonWorkingDayControls=!0,k.renderDataPoints=!0,k.setNonWorkingDaysShown=function(r){k.nonWorkingDaysShown=r},k.setGadgetMode=function(r){k.gadgetMode=r,k.renderStats=!r,k.renderNonWorkingDayControls=!r,k.renderDataPoints=!r},k.setWallboardMode=function(r){k.wallboardMode=r},k.renderChartLoading=function(){l.hideChartControls(),l.getChartContentElem(!0).html(f.burndownchart.renderChartBody()),l.showSpinner()},k.showWarning=function(r){var e=AJS.$(f.burndownchart.renderWarningMessage({message:r}));e.prependTo("#ghx-chart-content"),l.hideSpinner()},k.showChart=function(){l.hideSpinner(),n.getWarning()&&k.showWarning(n.getWarning()),n.isEmpty()||(k.renderUI(),k.gadgetMode||k.handleReopenButton())},k.handleReopenButton=function(){o.renderReopenButton(l.getReopenButton(!0),w.State.getRapidViewId(),e.sprintPicker.getItems(),e.sprintPicker.getSelectedItem())},k.renderUI=function(){l.showChartGroup(),k.renderChart(),k.renderStats&&k.renderChartStats()},k.renderChartStats=function(){var r=n.getDataTable(),e=t(f.burndownchart.renderBurndownChartTable({statistics:r.statistics,rows:r.rows}));t("#ghx-chart-data").empty().append(e)},k.renderChart=function(){return n.hasAnyWorkingDays()?(t("#ghx-chart-empty").hide(),t("#ghx-chart-wrap").show(),void(k.nonWorkingDaysShown?k.renderChartWithNonWorkingDays():k.renderChartWithoutNonWorkingDays())):(t("#ghx-chart-wrap").hide(),void t("#ghx-chart-empty").html(f.burndownchart.renderNoWorkingDaysMessage({})).show())},k.renderChartWithoutNonWorkingDays=function(){var r=n.getChartStartTime(),e=g.transformSeriesExcludingNonWorkingDays(n.getSeries(),r);k.showNotificationIfEmpty(e);var o=function(r,e){var o=g.transformDateIfInNonWorkingDays(r,n.getChartStartTime()),a="%b %d";return"hour"===e.tickSize[1]&&(a+=" %h:%M"),t.plot.formatDate(o,a)},a=k.getDefaultPlotOptions();a.xaxis.tickFormatter=o,k.renderBurndownChart(e,a)},k.renderChartWithNonWorkingDays=function(){var r=n.getSeries();k.showNotificationIfEmpty(r);var e=k.getDefaultPlotOptions();e.grid.markings||(e.grid.markings=s.getNonWorkingBlocks),k.renderBurndownChart(r,e),k.renderNonWorkingDayControls&&k.addNonWorkingDaysToLegend()},k.renderBurndownChart=function(r,n){p.setAndAlignAxisLabels("Time",k.getYAxisLabel());var o=l.getChartView(!0),t=i.draw(e.id,o,r,n);k.renderDataPoints&&(t.hooks.drawSeries.push(k.gatherPoints),t.hooks.draw.push(p.deferredRenderPoints),k.bindEvents(o)),k.renderNonWorkingDayControls&&k.addNonWorkingDaysToLegend()},k.addNonWorkingDaysToLegend=function(){var r=l.getChartView().find(".legend").find("tbody"),e=r.find("#ghx-chart-show-non-working-days");if(0===e.length){var n=t(f.burndownchart.renderShowNonWorkingDaysOption({checked:k.nonWorkingDaysShown}));r.append(n),r.find("#ghx-chart-show-non-working-days").click(k.toggleNonWorkingDays)}},k.toggleNonWorkingDays=function(){k.nonWorkingDaysShown=t("#ghx-chart-show-non-working-days").is(":checked"),w.State.setNonWorkingDaysShown("burndown",k.nonWorkingDaysShown),k.renderChart()},k.showNotificationIfEmpty=function(r){if(a.isEmpty(r)){var e=t(f.burndownchart.renderBurndownNoSprint()).css({"margin-top":"0px"});e.prependTo("#ghx-chart-content")}},k.renderAndShowSprintPicker=function(){e.sprintPicker.render(l.getChartSelector(!0)),l.showChartGroup()},k.getDefaultPlotOptions=function(){var r={xaxis:{mode:"time"},yaxis:n.getYAxis(),series:{points:{show:!1,radius:3,symbol:"circle"},lines:{show:!0}},grid:{hoverable:!0,clickable:!1,autoHighlight:!1},mouseEnterExitEvents:!0,legend:{container:null,backgroundOpacity:.5,position:"ne"}};return(k.gadgetMode||k.wallboardMode)&&(r.series={lines:{show:!0,lineWidth:k.wallboardMode?4:2},points:{show:!1},shadowSize:0},k.wallboardMode?r.grid={backgroundColor:d.wallboard.backgroundColor,borderWidth:1,borderColor:d.wallboard.borderColor,color:d.wallboard.textColor,noGridBottomOffsetDelta:0,tickColor:d.wallboard.tickColor,markings:k.getMarkingsForGadget}:r.grid={color:"#333",borderWidth:1,borderColor:"#999",tickColor:"#eee"}),r},k.getMarkingsForGadget=function(){var r=d.nonWorkingDaysWallboard,e=s.getNonWorkingBlocks();return a.map(e,function(e){return e.color=r,e})},k.bindEvents=function(r){r.unbind("flotMouseEnter flotMouseLeave").bind("flotMouseEnter flotMouseLeave",p.handleMouseOverStateChange),r.unbind("plothover plotclick plotselected dblclick"),r.bind("plothover",k.handlePlotHover),r.bind("plotclick",p.handlePlotClick),r.bind("plotselected",k.handleRangeSelection),r.bind("dblclick",k.resetRangeSelection)},k.handlePlotHover=function(r,e,o){var i=t("#ghx-tooltip");if(o){var d=o.series.id,s=o.dataIndex,h=n.getDataBySeriesAtIndex(d,s);if(!a.isEmpty(h))return void(k.previousPlotHoverPoint!==o.dataIndex&&(k.previousPlotHoverPoint=o.dataIndex,i.remove(),k.showChartTooltip(o,d,h,o.datapoint[0]),i.hasClass("ghx-has-warnings")||l.getChartView().addClass("ghx-clickable")))}i.remove(),k.previousPlotHoverPoint=null,l.getChartView().removeClass("ghx-clickable")},k.previousPlotHoverPoint=void 0,k.roundDuration=function(r){return 0!==r?Math.round(10*r)/10:0},k.showChartTooltip=function(r,e,o){if(o){var t=n.getTooltipData(e,o),a=new u(r,t);a.render()}},k.gatherPoints=function(r,e,o){if(r.mouseEntered){var t=o.id,a=n.getDataBySeries(t);if(a){var i=p.gatherPoints(o,a);r.realPointsPerSeries[t]=i}}},k.getYAxisLabel=function(){return n.getStatistic().name},k.handleRangeSelection=function(r,e){var n=e.xaxis.from,o=e.xaxis.to;c.setNewChartLimits(-1,n,o)},k.resetRangeSelection=function(r){c.setNewChartLimits(0,0,0)},k});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/BurndownChart.soy' */
// This file was automatically generated from BurndownChart.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.burndownchart.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.burndownchart == 'undefined') { GH.tpl.burndownchart = {}; }


GH.tpl.burndownchart.renderChartBody = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-status"></div><div id="ghx-chart-group"><div id="ghx-chart-empty"></div><div id="ghx-chart-wrap"><div id="ghx-chart-view"></div><div id="ghx-axis-x" class="ghx-axis"></div><div id="ghx-axis-y" class="ghx-axis ghx-axis-y"><span class="ghx-inner"></span></div></div><div id="ghx-chart-overview-group"><h4></h4><p class="ghx-description"></p><div id="ghx-chart-overview"></div></div><div id="ghx-chart-legend"></div><div id="ghx-chart-data"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.burndownchart.renderChartBody.soyTemplateName = 'GH.tpl.burndownchart.renderChartBody';
}


GH.tpl.burndownchart.renderBurndownNoSprint = function(opt_data, opt_ignored) {
  return '<div class="aui-message info ghx-notify"><p><span class="aui-icon icon-generic"></span>' + soy.$$escapeHtml("There are no sprints currently in progress.") + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.burndownchart.renderBurndownNoSprint.soyTemplateName = 'GH.tpl.burndownchart.renderBurndownNoSprint';
}


GH.tpl.burndownchart.renderBurndownChartTable = function(opt_data, opt_ignored) {
  var output = '<table class="aui ghx-hover-highlight ghx-vertical-lines"><thead><tr><th></th><th></th><th></th><th></th>';
  var statisticList10 = opt_data.statistics;
  var statisticListLen10 = statisticList10.length;
  for (var statisticIndex10 = 0; statisticIndex10 < statisticListLen10; statisticIndex10++) {
    var statisticData10 = statisticList10[statisticIndex10];
    output += '<th colspan="3" id="series-' + soy.$$escapeHtml(statisticData10.id) + '" class="ghx-center">' + soy.$$escapeHtml(statisticData10.name) + '</th>';
  }
  output += '</tr><tr><th id="series-date">' + soy.$$escapeHtml("Date") + '</th><th id="series-issue">' + soy.$$escapeHtml("Issue") + '</th><th id="series-event-type">' + soy.$$escapeHtml("Event Type") + '</th><th id="series-event-detail">' + soy.$$escapeHtml("Event Detail") + '</th>';
  var statisticList26 = opt_data.statistics;
  var statisticListLen26 = statisticList26.length;
  for (var statisticIndex26 = 0; statisticIndex26 < statisticListLen26; statisticIndex26++) {
    var statisticData26 = statisticList26[statisticIndex26];
    output += '<th id="series-' + soy.$$escapeHtml(statisticData26.id) + '-inc" class="ghx-center ghx-minimal"><abbr title="' + soy.$$escapeHtml("Increase") + '">' + soy.$$escapeHtml("Inc.") + '</abbr></th><th id="series-' + soy.$$escapeHtml(statisticData26.id) + '-dec" class="ghx-center ghx-minimal"><abbr title="' + soy.$$escapeHtml("Decrease") + '">' + soy.$$escapeHtml("Dec.") + '</abbr></th><th id="series-' + soy.$$escapeHtml(statisticData26.id) + '-value" class="ghx-right ghx-minimal">' + ((statisticData26.isSum) ? 'Sum' : soy.$$escapeHtml("Remaining")) + '</th>';
  }
  output += '</tr></thead><tbody>';
  var rowList50 = opt_data.rows;
  var rowListLen50 = rowList50.length;
  for (var rowIndex50 = 0; rowIndex50 < rowListLen50; rowIndex50++) {
    var rowData50 = rowList50[rowIndex50];
    output += '<tr><td headers="series-date">' + ((rowData50.dateString) ? (rowData50.recordedDateString) ? '<span class="ghx-backdated-event" title="' + soy.$$escapeHtml(AJS.format("Recorded at {0}",rowData50.recordedDateString)) + '">' + soy.$$escapeHtml(rowData50.dateString) + '</span>' : soy.$$escapeHtml(rowData50.dateString) : '') + '</td><td headers="series-issue">';
    if (rowData50.initial || rowData50.complete) {
      var issueList66 = rowData50.issues;
      var issueListLen66 = issueList66.length;
      for (var issueIndex66 = 0; issueIndex66 < issueListLen66; issueIndex66++) {
        var issueData66 = issueList66[issueIndex66];
        output += ((issueData66.parentKey) ? GH.tpl.burndownchart.renderIssueKeyLink({key: issueData66.parentKey}) + ' / ' : '') + GH.tpl.burndownchart.renderIssueKeyLink({key: issueData66.key}) + '<br />';
      }
    } else if (! rowData50.openClose) {
      output += ((rowData50.parentKey) ? GH.tpl.burndownchart.renderIssueKeyLink({key: rowData50.parentKey}) + ' / ' : '') + GH.tpl.burndownchart.renderIssueKeyLink({key: rowData50.key});
    }
    output += '</td><td headers="series-event-type">' + ((rowData50.event.typeAsHtml) ? soy.$$filterNoAutoescape(rowData50.event.type) : soy.$$escapeHtml(rowData50.event.type)) + '</td><td headers="series-event-detail">' + soy.$$escapeHtml(rowData50.event.detail);
    if (rowData50.event.notes) {
      output += '<div class="description">';
      var noteList96 = rowData50.event.notes;
      var noteListLen96 = noteList96.length;
      for (var noteIndex96 = 0; noteIndex96 < noteListLen96; noteIndex96++) {
        var noteData96 = noteList96[noteIndex96];
        output += ((! (noteIndex96 == 0)) ? '<br />' : '') + soy.$$escapeHtml(noteData96);
      }
      output += '</div>';
    }
    output += '</td>';
    var statisticList104 = opt_data.statistics;
    var statisticListLen104 = statisticList104.length;
    for (var statisticIndex104 = 0; statisticIndex104 < statisticListLen104; statisticIndex104++) {
      var statisticData104 = statisticList104[statisticIndex104];
      if (rowData50.initial) {
        output += '<td headers="series-' + soy.$$escapeHtml(statisticData104.id) + '-inc" class="ghx-right">';
        var issueList110 = rowData50.issues;
        var issueListLen110 = issueList110.length;
        for (var issueIndex110 = 0; issueIndex110 < issueListLen110; issueIndex110++) {
          var issueData110 = issueList110[issueIndex110];
          output += '<div class="ghx-nowrap">' + ((issueData110.valuesText[statisticData104.valueId]) ? soy.$$escapeHtml(issueData110.valuesText[statisticData104.valueId]) : '-') + '</div>';
        }
        output += '</td><td headers="series-' + soy.$$escapeHtml(statisticData104.id) + '-dec"></td>';
      } else if (rowData50.complete || rowData50.openClose) {
        output += '<td headers="series-' + soy.$$escapeHtml(statisticData104.id) + '-inc"></td><td headers="series-' + soy.$$escapeHtml(statisticData104.id) + '-dec"></td>';
      } else {
        output += (rowData50.deltasType[statisticData104.valueId] == 'inc') ? '<td headers="series-' + soy.$$escapeHtml(statisticData104.id) + '-inc" class="ghx-right"><div class="ghx-nowrap">' + soy.$$escapeHtml(rowData50.deltasText[statisticData104.valueId]) + '</div></td><td headers="series-' + soy.$$escapeHtml(statisticData104.id) + '-dec"></td>' : '<td headers="series-' + soy.$$escapeHtml(statisticData104.id) + '-inc"></td><td headers="series-' + soy.$$escapeHtml(statisticData104.id) + '-dec" class="ghx-right"><div class="ghx-nowrap">' + soy.$$escapeHtml(rowData50.deltasText[statisticData104.valueId]) + '</div></td>';
      }
      output += '<td headers="series-' + soy.$$escapeHtml(statisticData104.id) + '-value" class="ghx-right">';
      if (rowData50.initial) {
        var issueList151 = rowData50.issues;
        var issueListLen151 = issueList151.length;
        for (var issueIndex151 = 0; issueIndex151 < issueListLen151; issueIndex151++) {
          var issueData151 = issueList151[issueIndex151];
          output += '<br />';
        }
      } else if (rowData50.complete) {
        var issueList155 = rowData50.issues;
        var issueListLen155 = issueList155.length;
        for (var issueIndex155 = 0; issueIndex155 < issueListLen155; issueIndex155++) {
          var issueData155 = issueList155[issueIndex155];
          output += '<div class="ghx-nowrap">' + ((issueData155.valuesText[statisticData104.valueId]) ? soy.$$escapeHtml(issueData155.valuesText[statisticData104.valueId]) : '-') + '</div>';
        }
      }
      output += ((! rowData50.openClose) ? '<div class="ghx-nowrap">' + soy.$$escapeHtml(rowData50.valuesText[statisticData104.valueId]) + '</div>' : '') + '</td>';
    }
    output += '</tr>';
  }
  output += '</tbody></table>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.burndownchart.renderBurndownChartTable.soyTemplateName = 'GH.tpl.burndownchart.renderBurndownChartTable';
}


GH.tpl.burndownchart.renderIssueKeyLink = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(opt_data.key) + '">' + soy.$$escapeHtml(opt_data.key) + '</a>';
};
if (goog.DEBUG) {
  GH.tpl.burndownchart.renderIssueKeyLink.soyTemplateName = 'GH.tpl.burndownchart.renderIssueKeyLink';
}


GH.tpl.burndownchart.renderShowNonWorkingDaysOption = function(opt_data, opt_ignored) {
  return '<tr><td></td><td><input type="checkbox" id="ghx-chart-show-non-working-days" ' + ((opt_data.checked) ? ' checked="checked"' : '') + '/> <label for="ghx-chart-show-non-working-days"><span class="ghx-description">' + soy.$$escapeHtml("Show Non-Working Days") + '</span></label></td></tr>';
};
if (goog.DEBUG) {
  GH.tpl.burndownchart.renderShowNonWorkingDaysOption.soyTemplateName = 'GH.tpl.burndownchart.renderShowNonWorkingDaysOption';
}


GH.tpl.burndownchart.renderNoWorkingDaysMessage = function(opt_data, opt_ignored) {
  return '<div class="aui-message info"><p class="title"><span class="aui-icon icon-info"></span><strong>' + soy.$$escapeHtml("Chart cannot be displayed") + '</strong></p><p>' + soy.$$filterNoAutoescape(AJS.format("All of the days within this sprint are {0}configured as non-working days{1}. To display a Burndown Chart some days need to be working days.",'<a href="' + GH.Ajax.CONTEXT_PATH + '/secure/RapidView.jspa?tab=time&rapidView=' + GH.RapidViewConfig.currentData.data.id + '">','</a>')) + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.burndownchart.renderNoWorkingDaysMessage.soyTemplateName = 'GH.tpl.burndownchart.renderNoWorkingDaysMessage';
}


GH.tpl.burndownchart.renderSprintCompleteEventType = function(opt_data, opt_ignored) {
  return '' + ((opt_data.closingUserHtml) ? soy.$$filterNoAutoescape(AJS.format("Sprint ended by {0}",opt_data.closingUserHtml)) : soy.$$escapeHtml("Sprint ended"));
};
if (goog.DEBUG) {
  GH.tpl.burndownchart.renderSprintCompleteEventType.soyTemplateName = 'GH.tpl.burndownchart.renderSprintCompleteEventType';
}


GH.tpl.burndownchart.renderSprintReopenEventType = function(opt_data, opt_ignored) {
  return '' + ((opt_data.reopenUserHtml) ? soy.$$filterNoAutoescape(AJS.format("Sprint reopened by {0}",opt_data.reopenUserHtml)) : soy.$$escapeHtml("Sprint reopened"));
};
if (goog.DEBUG) {
  GH.tpl.burndownchart.renderSprintReopenEventType.soyTemplateName = 'GH.tpl.burndownchart.renderSprintReopenEventType';
}


GH.tpl.burndownchart.renderWarningMessage = function(opt_data, opt_ignored) {
  return '' + aui.message.warning({closeable: 'false', content: '<p>' + soy.$$escapeHtml(opt_data.message) + '</p>'});
};
if (goog.DEBUG) {
  GH.tpl.burndownchart.renderWarningMessage.soyTemplateName = 'GH.tpl.burndownchart.renderWarningMessage';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/SprintReportController.js' */
!function(){var t=require("jquery");GH.SprintRetrospectiveController={},GH.SprintRetrospectiveController.id="sprintRetrospective",GH.SprintRetrospectiveController.displayed=!1,GH.SprintRetrospectiveController.supportsPages=!1,GH.SprintRetrospectiveController.rapidViewData={},GH.SprintRetrospectiveController.rapidViewConfig={},GH.SprintRetrospectiveController.referredBySprintCompleteDialog=!1;var e=require("jira-agile/rapid/analytics-tracker");GH.SprintRetrospectiveController.analytics=new e("gh.report.sprintRetrospective"),GH.SprintRetrospectiveController.linkPagesAnalytics={action:new e("gh.linkedPages.discovery.action"),show:new e("gh.linkedPages.discovery.show")},GH.SprintRetrospectiveController.setRapidView=function(t){GH.SprintRetrospectiveController.rapidViewData=t||{}},GH.SprintRetrospectiveController.isApplicable=function(t){return t.sprintSupportEnabled},GH.SprintRetrospectiveController.getNormalizedFromInternal=function(){return{sprint:GH.SprintRetrospectiveController.getSelectedSprintId()||null}},GH.SprintRetrospectiveController.toUrl=function(t){return _.isNull(t.sprint)?{}:{sprint:t.sprint}},GH.SprintRetrospectiveController.updateInternalFromNormalized=function(t){GH.SprintRetrospectiveController.setSelectedSprintFromUrlState(t.sprint)},GH.SprintRetrospectiveController.getNormalizedFromUrl=function(t){return{sprint:GH.RapidBoard.UrlState.normalizeNumberParam(t.sprint,null)}},GH.SprintRetrospectiveController.init=function(){var t=require("jira-agile/rapid/ui/component/chart-picker");GH.SprintRetrospectiveController.sprintPicker=new t("sprintRetrospective.selectedSprintId")},GH.SprintRetrospectiveController.show=function(){GH.log("GH.SprintRetrospectiveController.show",GH.Logger.Contexts.ui),GH.SprintRetrospectiveController.displayed=!0,GH.SprintRetrospectiveController.rapidViewData&&(GH.SprintRetrospectiveController.renderChartView(),GH.SprintRetrospectiveController.analytics.trigger("show"))},GH.SprintRetrospectiveController.hide=function(){GH.log("GH.SprintRetrospectiveController.hide",GH.Logger.Contexts.ui),GH.SprintRetrospectiveController.displayed=!1,GH.SprintRetrospectiveView.hide(),AJS.$(GH).unbind("."+GH.SprintRetrospectiveController.id)},GH.SprintRetrospectiveController.renderChartView=function(){GH.SprintRetrospectiveController.initializeControls(),GH.ChartView.getChartContentElem(!0).html(GH.tpl.sprintretrospective.renderReportBody()),GH.ChartView.showSpinner(),GH.SprintRetrospectiveController.loadRapidViewConfig()},GH.SprintRetrospectiveController.initializeControls=function(){AJS.$("#ghx-chart-controls").hide(),AJS.$(GH.SprintRetrospectiveController.sprintPicker).bind("selectedItemChanged",GH.SprintRetrospectiveController.handleSprintChanged)},GH.SprintRetrospectiveController.loadRapidViewConfig=function(){var t=function(t){GH.SprintRetrospectiveController.displayed&&(GH.SprintRetrospectiveController.rapidViewConfig=t,GH.SprintRetrospectiveController.loadSprintOptions())};GH.RapidViewConfig.fetchConfiguration(GH.SprintRetrospectiveController.rapidViewData.id).done(t)},GH.SprintRetrospectiveController.loadSprintOptions=function(){var t=GH.RapidBoard.State.getRapidViewId();GH.Ajax.get({url:"/sprintquery/"+t,data:{includeHistoricSprints:!1,includeFutureSprints:!1}},"rapidChartData").done(GH.SprintRetrospectiveController.processSprintsData)},GH.SprintRetrospectiveController.processSprintsData=function(e){if(GH.SprintRetrospectiveController.displayed){e.sprints.reverse(),GH.SprintRetrospectiveController.sprintPicker.setItems(e.sprints),GH.SprintRetrospectiveController.sprintPicker.setDefaultItem(GH.SprintRetrospectiveController.getDefaultSprintForPicker(e.sprints));var r=GH.SprintRetrospectiveController.sprintPicker.getSelectedItem();GH.SprintRetrospectiveController.sprintPicker.render(AJS.$("#ghx-chart-selector")),GH.ChartView.showChartGroup(),GH.RapidBoard.State.pushState(),r?GH.SprintRetrospectiveController.loadReportData():(GH.ChartView.hideSpinner(),GH.ReportController.updateChartHeader(GH.ReportController.getCurrentChart()),GH.ReportController.closeIntro(),GH.RapidBoard.State.setChartIntroState(!1),GH.ReportController.renderActions(t("#ghx-chart-actions"),[]))}},GH.SprintRetrospectiveController.loadReportData=function(){var t=GH.SprintRetrospectiveController.sprintPicker.getSelectedItem();GH.Ajax.get({url:"rapid/charts/sprintreport",data:{rapidViewId:GH.SprintRetrospectiveController.rapidViewConfig.id,sprintId:t.id}},"rapidChartData").done(function(e){GH.SprintRetrospectiveController.displayed&&GH.SprintRetrospectiveController.processReportData(t,e)}).fail(GH.ChartView.hideSpinner),GH.Ajax.get({url:"/rapid/charts/scopechangeburndownchart.json",data:{rapidViewId:GH.SprintRetrospectiveController.rapidViewConfig.id,sprintId:t.id}},"rapidChartData.burndown").done(function(t){GH.SprintRetrospectiveController.displayed&&GH.SprintRetrospectiveView.showMiniBurndown(t)}).fail(GH.ChartView.hideSpinner)},GH.SprintRetrospectiveController.processReportData=function(t,e){GH.SprintRetrospectiveController.supportsPages=e.supportsPages,GH.SprintRetrospectiveView.show();var r;r="duration"==GH.SprintRetrospectiveController.rapidViewConfig.estimationStatistic.renderer?GH.TimeFormat.formatShortDurationForTimeTrackingConfiguration:GH.NumberFormat.format;var i=function(t){return null==t?"-":r(t)};e.contents.completedIssuesEstimateSum.text=i(e.contents.completedIssuesEstimateSum.value),e.contents.completedIssuesInitialEstimateSum.text=i(e.contents.completedIssuesInitialEstimateSum.value),e.contents.issuesNotCompletedEstimateSum.text=i(e.contents.issuesNotCompletedEstimateSum.value),e.contents.issuesNotCompletedInitialEstimateSum.text=i(e.contents.issuesNotCompletedInitialEstimateSum.value),e.contents.issuesCompletedInAnotherSprintEstimateSum.text=i(e.contents.issuesCompletedInAnotherSprintEstimateSum.value),e.contents.issuesCompletedInAnotherSprintInitialEstimateSum.text=i(e.contents.issuesCompletedInAnotherSprintInitialEstimateSum.value),e.contents.puntedIssuesEstimateSum.text=i(e.contents.puntedIssuesEstimateSum.value),e.contents.puntedIssuesInitialEstimateSum.text=i(e.contents.puntedIssuesInitialEstimateSum.value),e.contents.allIssuesEstimateSum.text=i(e.contents.allIssuesEstimateSum.value);var n=function(t){GH.SprintRetrospectiveController._setStatsValueToRenderValueOrDash(t,"estimateStatistic",r),GH.SprintRetrospectiveController._setStatsValueToRenderValueOrDash(t,"currentEstimateStatistic",r)};_.each(e.contents.completedIssues,n),_.each(e.contents.issuesNotCompletedInCurrentSprint,n),_.each(e.contents.issuesCompletedInAnotherSprint,n),_.each(e.contents.puntedIssues,n);var o=GH.ChartUtils.createIssueJql(e.contents.completedIssues.concat(e.contents.issuesNotCompletedInCurrentSprint).concat(e.contents.puntedIssues)),s=GH.ChartUtils.createIssueJql(e.contents.completedIssues),p=GH.ChartUtils.createIssueJql(e.contents.issuesNotCompletedInCurrentSprint),l=GH.ChartUtils.createIssueJql(e.contents.issuesCompletedInAnotherSprint),a=GH.ChartUtils.createIssueJql(e.contents.puntedIssues),c=!0;GH.SprintRetrospectiveView.showSprintReport(t,e,GH.SprintRetrospectiveController.rapidViewConfig.estimationStatistic,encodeURIComponent(o),encodeURIComponent(s),encodeURIComponent(p),encodeURIComponent(l),encodeURIComponent(a),c),GH.SprintRetrospectiveController.postProcessReportData(t)},GH.SprintRetrospectiveController.handleSprintChanged=function(t){GH.SprintRetrospectiveView.clearDialog(),GH.SprintRetrospectiveController.displayed&&(GH.log("GH.SprintRetrospectiveController.handleSprintChanged",GH.Logger.Contexts.event),GH.RapidBoard.State.pushState(),GH.SprintRetrospectiveController.loadReportData())},GH.SprintRetrospectiveController.getDefaultSprintForPicker=function(t){var e=_.filter(t,function(t){return"CLOSED"===t.state});return e.length>0?_.first(e):_.first(t)},GH.SprintRetrospectiveController.getSelectedSprintId=function(){var t=GH.SprintRetrospectiveController.sprintPicker.getSelectedItem();if(t)return t.id;var e=GH.SprintRetrospectiveController.sprintPicker.getStoredSelectedItemId();return e!=-1?e:null},GH.SprintRetrospectiveController.setSelectedSprintFromUrlState=function(t){GH.SprintRetrospectiveController.sprintPicker.storeSelectedItemId(t)},GH.SprintRetrospectiveController.postProcessReportData=function(t){GH.SprintRetrospectiveController.supportsPages&&GH.SprintRetrospectiveController.shouldShowCreateRetroDialog(t.id)&&GH.SprintRetrospectiveView.showCreateRetrospectiveDialog(t)},GH.SprintRetrospectiveController.shouldShowCreateRetroDialog=function(t){return!!_.find(GH.SprintRetrospectiveController.getSprintsMarkedForRetroDialog(),function(e){return e.sprintId===t&&!e.dismissed})},GH.SprintRetrospectiveController.getSprintsMarkedForRetroDialog=function(){return GH.storage.get("gh.markedSprintsForRetroDialog")||[]},GH.SprintRetrospectiveController.markSprintAsDismissed=function(t){var e=GH.SprintRetrospectiveController.getSprintsMarkedForRetroDialog();_.each(e,function(e){e.sprintId===t&&(e.dismissed=!0)}),GH.storage.put("gh.markedSprintsForRetroDialog",e)},GH.SprintRetrospectiveController.tryMarkSprintForRetroDialog=function(t){function e(e){return e.sprintId===t}var r=GH.SprintRetrospectiveController.getSprintsMarkedForRetroDialog();!_.find(r,e)&&r.length<5&&r.push({dismissed:!1,sprintId:t}),GH.storage.put("gh.markedSprintsForRetroDialog",r)},GH.SprintRetrospectiveController.getAppLinkData=function(){function t(t){var e=_.findWhere(t,{primary:!0});return e?e.url+GH.LinkedPagesController.CONFLUENCE_CREATE_PAGE_ACTION:null}var e=GH.SprintRetrospectiveController.sprintPicker.getSelectedItem();return GH.LinkedPagesController.getLinkedPagesForEntity(GH.LinkedPagesController.SPRINT,e.id).andThen(function(r){var i={jiraApplicationId:r.jiraApplicationId,appLinkUrl:t(r.applicationLinks),entityId:e.id,jiraUrl:r.jiraBaseUrl};return i})},GH.SprintRetrospectiveController._setStatsValueToRenderValueOrDash=function(t,e,r){_.isUndefined(t[e])||_.isUndefined(t[e].statFieldValue.value)?t[e]={statFieldValue:{text:"-"}}:t[e].statFieldValue.text=r(t[e].statFieldValue.value)}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/SprintReportView.js' */
GH.SprintRetrospectiveView={},GH.SprintRetrospectiveView.createRetroDialog=null,GH.SprintRetrospectiveView.retroApplinkData=null,GH.SprintRetrospectiveView.showSprintReport=function(e,t,r,i,o,n,s,a){var p=require("jira/featureflags/feature-manager"),l=!0,c=p.isFeatureEnabled("com.atlassian.jira.agile.darkfeature.sprint.goal");AJS.$("#ghx-report-content .ghx-sprint-report").empty().append(GH.tpl.sprintretrospective.renderSprintReport({sprint:t,estimationStatistic:r,completedIssuesJql:o,incompletedIssuesJql:n,puntedIssuesJql:a,issuescompletedInAnotherSprintJql:s,hasIssuesAddedAfterSprintStart:_.keys(t.contents.issueKeysAddedDuringSprint).length})).show(),AJS.$("#ghx-sprint-report-meta").empty().append(GH.tpl.sprintretrospective.renderSprintReportHeader({sprint:t.sprint,showPages:l,linkedPagesCount:t.sprint.remoteLinks.length,endedByHtml:t.lastUserToClose,showGoal:c})).show(),AJS.$("#ghx-sprint-report-meta").find(".ghx-sprint-goal").tooltip({className:"ghx-sprint-report-goal-tooltip"}),GH.LinkedPagesController.initDialogTrigger(GH.LinkedPagesController.SPRINT,GH.LinkedPagesController.REPORT,t.sprint.id,AJS.$("#ghx-sprint-report-meta .js-view-entity-pages")),AJS.$("#ghx-report-controls").empty(),GH.ReportController.renderActions(AJS.$("#ghx-chart-actions"),GH.SprintRetrospectiveController.sprintPicker.getItems(),t.sprint,i)},GH.SprintRetrospectiveView.doesEndDateNeedExtraRoom=function(e,t){var r;return 3===e.length?(r=.1*(e[2]-e[0]),e[1]-e[0]<r||e[2]-e[1]<r):e[1]<t&&(r=.1*(t-e[0]),e[1]-e[0]<r)},GH.SprintRetrospectiveView.clearDialog=function(){GH.SprintRetrospectiveView.createRetroDialog&&GH.SprintRetrospectiveView.createRetroDialog._hide()},GH.SprintRetrospectiveView.showMiniBurndown=function(e){var t=require("jira-agile/rapid/ui/chart/burndown-chart-controller"),r=require("jira-agile/rapid/ui/chart/burndown-chart-model"),i=require("jira-agile/rapid/ui/chart/chart"),o=require("jira-agile/rapid/ui/chart/chart-controller");if(r.setRawData(e),e.warningMessage)return void AJS.$("#ghx-report-content").prepend(GH.tpl.sprintretrospective.renderWarningMessage({message:e.warningMessage}));var n=[e.startTime,e.endTime];_.isNumber(e.completeTime)&&n.push(e.completeTime),n=n.sort(),GH.SprintRetrospectiveView.doesEndDateNeedExtraRoom(n,e.now)&&AJS.$(".ghx-sprint-report-burndown").addClass("ghx-close-ticklabels");var s={xaxis:{mode:"time",ticks:n,reserveSpace:!0},yaxis:r.getYAxis(),series:{points:{show:!1,radius:3,symbol:"circle"},lines:{show:!0}},grid:{markings:o.getNonWorkingBlocks}},a=AJS.$("#ghx-report-content .ghx-sprint-report-burndown");i.draw(t.id,a,r.getSeries(),s)},GH.SprintRetrospectiveView.show=function(){GH.ChartView.hideSpinner()},GH.SprintRetrospectiveView.hide=function(){},GH.SprintRetrospectiveView.showCreateRetrospectiveDialog=function(e){var t={noBind:!0,width:320,addActiveClass:!1,persistent:!0,container:"#ghx-report-controls-group",calculatePositions:function(e,t){var r=t.target.offset(),i=AJS.$("#ghx-report-controls-group").offset();return{popupCss:{top:r.top-i.top+40,left:r.left-i.left},arrowCss:{left:40},displayAbove:!1}}};GH.SprintRetrospectiveView.createRetroDialog=GH.InlineDialog.create("retroDialog",AJS.$("#ghx-sprint-report-meta .js-view-entity-pages"),GH.SprintRetrospectiveView.renderCreateRetroDialog,t),GH.SprintRetrospectiveView.createRetroDialog.show(),GH.SprintRetrospectiveView.disableRetroDialogDismissalOnBlur(),GH.SprintRetrospectiveController.linkPagesAnalytics.show.trigger("sprint.retroDialog"),AJS.$(".js-retro-dialog-dismiss, #ghx-sprint-report-meta .js-view-entity-pages").live("click",function(t){GH.SprintRetrospectiveView.createRetroDialog._hide(),GH.SprintRetrospectiveController.markSprintAsDismissed(e.id),GH.SprintRetrospectiveController.linkPagesAnalytics.action.trigger("sprint.retroDialog.createPage")}),AJS.$(document).on("submit","#js-create-page-form",function(e){var t=window.open("","_blank");GH.LinkedPagesService.initiateRemoteLinkConversation().done(function(e){var r={applinkId:GH.SprintRetrospectiveView.retroApplinkData.jiraApplicationId,agileMode:"report",fallbackUrl:GH.SprintRetrospectiveView.retroApplinkData.jiraUrl,creationToken:e};r.sprintId=GH.SprintRetrospectiveView.retroApplinkData.entityId,t.location=GH.SprintRetrospectiveView.retroApplinkData.appLinkUrl+"?"+AJS.$.param(r)}),e.preventDefault()})},GH.SprintRetrospectiveView.renderCreateRetroDialog=function(e,t,r){GH.SprintRetrospectiveController.getAppLinkData().done(function(t){t.appLinkUrl&&(GH.SprintRetrospectiveView.retroApplinkData=t,e.html(GH.tpl.sprintretrospective.renderCreateRetroDialog(t)).addClass("ghx-inline-dialog"),r())})},GH.SprintRetrospectiveView.disableRetroDialogDismissalOnBlur=function(){GH.SprintRetrospectiveView.createRetroDialog._hide=GH.SprintRetrospectiveView.createRetroDialog.hide,AJS.$(document).bind("showLayer",function(e,t,r){"inlineDialog"===t&&"retroDialog"===r.id&&(AJS.$(document.body).unbind("click.retroDialog.inline-dialog-check"),r.hide=function(){return!1})})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/SprintReport.soy' */
// This file was automatically generated from SprintReport.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.sprintretrospective.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.sprintretrospective == 'undefined') { GH.tpl.sprintretrospective = {}; }


GH.tpl.sprintretrospective.renderReportBody = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-status"></div><div id="ghx-chart-group"><div id="ghx-report-controls-group"><div id="ghx-report-controls"></div><div id="ghx-sprint-report-meta"></div></div><div id="ghx-report-content"><div class="ghx-sprint-report-burndown"></div><div class="ghx-sprint-report"></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintretrospective.renderReportBody.soyTemplateName = 'GH.tpl.sprintretrospective.renderReportBody';
}


GH.tpl.sprintretrospective.issueNavLink = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/issues/?jql=' + soy.$$filterNoAutoescape(opt_data.jql);
};
if (goog.DEBUG) {
  GH.tpl.sprintretrospective.issueNavLink.soyTemplateName = 'GH.tpl.sprintretrospective.issueNavLink';
}


GH.tpl.sprintretrospective.renderSprintReportHeader = function(opt_data, opt_ignored) {
  return '<span class="ghx-sprint-status">' + ((opt_data.sprint.state == 'CLOSED') ? (opt_data.endedByHtml) ? soy.$$filterNoAutoescape(AJS.format("Closed Sprint, ended by {0}",opt_data.endedByHtml)) : soy.$$escapeHtml("Closed Sprint") : '<em>' + soy.$$escapeHtml("Active Sprint") + '</em>') + '</span><span title="' + soy.$$escapeHtml("Start Date") + '">' + soy.$$escapeHtml(opt_data.sprint.startDate) + '</span> - ' + ((opt_data.sprint.state == 'CLOSED') ? '<span title="' + soy.$$escapeHtml("Completion Date") + '">' + soy.$$escapeHtml(opt_data.sprint.completeDate) + '</span>' : '<span class="ghx-projected" title="' + soy.$$escapeHtml("Projected End Date") + '">' + soy.$$escapeHtml(opt_data.sprint.endDate) + '</span>') + ((opt_data.showPages) ? GH.tpl.component.linkedpages.renderTrigger({linkedPagesCount: opt_data.linkedPagesCount, title: "Create and view pages linked to this sprint"}) : '') + ((opt_data.showGoal && opt_data.sprint.goal) ? '<div class="ghx-sprint-goal-container"><div class="ghx-sprint-goal" title="' + soy.$$escapeHtml(opt_data.sprint.goal) + '">' + soy.$$escapeHtml(opt_data.sprint.goal) + '</div></div>' : '');
};
if (goog.DEBUG) {
  GH.tpl.sprintretrospective.renderSprintReportHeader.soyTemplateName = 'GH.tpl.sprintretrospective.renderSprintReportHeader';
}


GH.tpl.sprintretrospective.renderSprintReport = function(opt_data, opt_ignored) {
  return '<div class="aui-group"><div class="aui-item"><h3>' + soy.$$escapeHtml("Status Report") + '</h3></div>' + ((opt_data.hasIssuesAddedAfterSprintStart) ? '<div class="ghx-added-legend aui-item">* ' + soy.$$escapeHtml("Issue added to sprint after start time") + '</div>' : '') + '</div><div class="ghx-sprint-report-table ghx-report-issue-list">' + ((opt_data.sprint.contents.completedIssues.length != 0) ? GH.tpl.reports.issueTable.renderIssueTable({listName: '' + soy.$$escapeHtml("Completed Issues"), issueNavLink: '' + GH.tpl.sprintretrospective.issueNavLink({jql: opt_data.completedIssuesJql}), issues: opt_data.sprint.contents.completedIssues, addedIssues: opt_data.sprint.contents.issueKeysAddedDuringSprint, estimationStatistic: opt_data.estimationStatistic, estimationValue: opt_data.sprint.contents.completedIssuesInitialEstimateSum.text, currentEstimationValue: opt_data.sprint.contents.completedIssuesEstimateSum.text}) : '') + ((opt_data.sprint.contents.issuesNotCompletedInCurrentSprint.length != 0) ? GH.tpl.reports.issueTable.renderIssueTable({listName: '' + soy.$$escapeHtml("Issues Not Completed"), issueNavLink: '' + GH.tpl.sprintretrospective.issueNavLink({jql: opt_data.incompletedIssuesJql}), issues: opt_data.sprint.contents.issuesNotCompletedInCurrentSprint, addedIssues: opt_data.sprint.contents.issueKeysAddedDuringSprint, estimationStatistic: opt_data.estimationStatistic, estimationValue: opt_data.sprint.contents.issuesNotCompletedInitialEstimateSum.text, currentEstimationValue: opt_data.sprint.contents.issuesNotCompletedEstimateSum.text}) : '') + ((opt_data.sprint.contents.issuesCompletedInAnotherSprint.length != 0) ? GH.tpl.reports.issueTable.renderIssueTable({listName: '' + soy.$$escapeHtml("Issues completed outside of this sprint"), issueNavLink: '' + GH.tpl.sprintretrospective.issueNavLink({jql: opt_data.issuescompletedInAnotherSprintJql}), issues: opt_data.sprint.contents.issuesCompletedInAnotherSprint, addedIssues: opt_data.sprint.contents.issueKeysAddedDuringSprint, estimationStatistic: opt_data.estimationStatistic, estimationValue: opt_data.sprint.contents.issuesCompletedInAnotherSprintInitialEstimateSum.text, currentEstimationValue: opt_data.sprint.contents.issuesCompletedInAnotherSprintEstimateSum.text}) : '') + ((opt_data.sprint.contents.puntedIssues.length != 0) ? GH.tpl.reports.issueTable.renderIssueTable({listName: '' + soy.$$escapeHtml("Issues Removed From Sprint"), issueNavLink: '' + GH.tpl.sprintretrospective.issueNavLink({jql: opt_data.puntedIssuesJql}), issues: opt_data.sprint.contents.puntedIssues, addedIssues: opt_data.sprint.contents.issueKeysAddedDuringSprint, estimationStatistic: opt_data.estimationStatistic, estimationValue: opt_data.sprint.contents.puntedIssuesInitialEstimateSum.text, currentEstimationValue: opt_data.sprint.contents.puntedIssuesEstimateSum.text}) : '') + '</table>';
};
if (goog.DEBUG) {
  GH.tpl.sprintretrospective.renderSprintReport.soyTemplateName = 'GH.tpl.sprintretrospective.renderSprintReport';
}


GH.tpl.sprintretrospective.renderCreateRetroDialog = function(opt_data, opt_ignored) {
  return '<div class="ghx-inline-dialog-container"><h2>' + soy.$$escapeHtml("Retrospective time!") + '</h2><p>' + soy.$$escapeHtml("Create a retrospective page to review \x26 improve your iterations!") + '</p><form id="js-create-page-form" class="aui" target="_blank" action="' + soy.$$escapeHtml(opt_data.appLinkUrl) + '" method="post"><div class="buttons-container">' + aui.buttons.button({extraClasses: ['js-retro-dialog-dismiss'], text: "Create"}) + aui.buttons.button({extraClasses: ['js-retro-dialog-dismiss'], tagName: 'a', text: "Close", type: 'link'}) + '</div>' + GH.tpl.component.linkedpages.createPageInputs({entityTypeParam: 'sprintId', entityId: opt_data.entityId, applinkId: opt_data.jiraApplicationId, agileMode: 'report', fallbackUrl: opt_data.jiraUrl}) + '</form></div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintretrospective.renderCreateRetroDialog.soyTemplateName = 'GH.tpl.sprintretrospective.renderCreateRetroDialog';
}


GH.tpl.sprintretrospective.renderWarningMessage = function(opt_data, opt_ignored) {
  return '' + aui.message.warning({closeable: 'false', content: '<p>' + soy.$$escapeHtml(opt_data.message) + '</p>'});
};
if (goog.DEBUG) {
  GH.tpl.sprintretrospective.renderWarningMessage.soyTemplateName = 'GH.tpl.sprintretrospective.renderWarningMessage';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/VelocityChartController.js' */
GH.VelocityChartController={},GH.VelocityChartController.id="velocityChart",GH.VelocityChartController.displayed=!1,GH.VelocityChartController.rapidViewData={},GH.VelocityChartController.rapidViewConfig={},function(){var t=require("jira-agile/rapid/analytics-tracker");GH.VelocityChartController.analytics=new t("gh.report.velocityChart")}(),GH.VelocityChartController.setRapidView=function(t){GH.VelocityChartController.rapidViewData=t||{}},GH.VelocityChartController.isApplicable=function(t){return t.sprintSupportEnabled},GH.VelocityChartController.getNormalizedFromInternal=function(){return{}},GH.VelocityChartController.toUrl=function(){return{}},GH.VelocityChartController.updateInternalFromNormalized=function(t){},GH.VelocityChartController.getNormalizedFromUrl=function(t){return{}},GH.VelocityChartController.init=function(){},GH.VelocityChartController.show=function(){GH.log("GH.VelocityChartController.show",GH.Logger.Contexts.ui),GH.VelocityChartController.displayed=!0,GH.VelocityChartController.rapidViewData&&(GH.RapidBoard.State.pushState(),GH.VelocityChartController.renderChartView(),GH.VelocityChartController.analytics.trigger("show"))},GH.VelocityChartController.hide=function(){GH.log("GH.VelocityChartController.hide",GH.Logger.Contexts.ui),GH.VelocityChartController.displayed=!1,GH.SprintRetrospectiveView.hide(),AJS.$(GH).unbind("."+GH.VelocityChartController.id)},GH.VelocityChartController.renderChartView=function(){GH.VelocityChartController.initializeControls(),GH.ChartView.getChartContentElem(!0).html(GH.tpl.velocity.renderReportBody()),GH.ChartView.showSpinner(),GH.VelocityChartController.loadRapidViewConfig()},GH.VelocityChartController.initializeControls=function(){AJS.$("#ghx-chart-controls").hide()},GH.VelocityChartController.loadRapidViewConfig=function(){var t=function(t){GH.VelocityChartController.displayed&&(GH.VelocityChartController.rapidViewConfig=t,GH.VelocityChartController.loadReportData())};GH.RapidViewConfig.fetchConfiguration(GH.VelocityChartController.rapidViewData.id).done(t)},GH.VelocityChartController.loadReportData=function(){GH.Ajax.get({url:"/rapid/charts/velocity.json",data:{rapidViewId:GH.VelocityChartController.rapidViewConfig.id}},"rapidChartData.velocity").done(GH.VelocityChartController.processChartData).fail(GH.ChartView.hideSpinner)},GH.VelocityChartController.processChartData=function(t){if(GH.VelocityChartController.displayed){var r;r="duration"==GH.VelocityChartController.rapidViewConfig.estimationStatistic.renderer?GH.TimeFormat.formatShortDurationForTimeTrackingConfiguration:GH.NumberFormat.format,_.each(t.velocityStatEntries,function(t){t.estimated.text=r(t.estimated.value),t.completed.text=r(t.completed.value)}),GH.VelocityChartView.showVelocityChart(t)}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/VelocityChartView.js' */
GH.VelocityChartView={},GH.VelocityChartView.showVelocityChart=function(t){var e=require("jira-agile/rapid/ui/chart/burndown-chart-controller"),i=require("jira-agile/rapid/ui/chart/chart");if(0===t.sprints.length)return AJS.$("#ghx-chart-content").html(GH.tpl.velocity.renderNoSprintsMessage({})),void GH.ChartView.hideSpinner();var a=[],r=[],l=[],n=[],o=t.sprints.reverse(),d=0;_.each(o,function(e,i){var o=t.velocityStatEntries[e.id],c=o.estimated.value,s=o.completed.value;d=Math.max(d,c,s),a[i]=[i,c],r[i]=[i,s];var h=GH.tpl.velocity.formatSprintName({sprintName:e.name});l[i]=[i,h],n[i]={sprint:{name:h,id:e.id},estimated:o.estimated.text,completed:o.completed.text}});var c=[{label:"Commitment",data:a},{label:"Completed",data:r}];GH.ChartView.hideSpinner();var s=GH.VelocityChartController.rapidViewConfig.estimationStatistic,h=(i.draw(e.id,GH.ChartView.getChartView(!0),c,{series:{bars:{show:!0,barWidth:.2,align:"center",lineWidth:0,fillColor:{colors:[{opacity:1},{opacity:1}]}}},colors:["#ccc","#14892c"],xaxis:{ticks:l,min:-.5,max:6.5},yaxis:GH.FlotChartUtils.calculateYAxis(d,s),legend:{container:null,position:"ne"},multiplebars:!0}),AJS.$(GH.tpl.velocity.renderVelocityChartTable({rows:n,rapidBoardId:GH.RapidViewConfig.currentData.id})));GH.FlotChartUtils.setAndAlignAxisLabels(void 0,s.name);var p=h.find("tbody").find("tr").find(":first").find("a");p.mousedown(function(t){if(1===t.which){var e=parseInt(AJS.$(this).attr("data-value"),10);GH.BoardState.setPerViewValue("sprintRetrospective.selectedSprintId",e),GH.ReportController.selectChart(GH.SprintRetrospectiveController.id)}}),AJS.$("#ghx-chart-data").empty().append(h),GH.ChartView.hideSpinner()};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/VelocityChart.soy' */
// This file was automatically generated from VelocityChart.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.velocity.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.velocity == 'undefined') { GH.tpl.velocity = {}; }


GH.tpl.velocity.renderReportBody = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-status"></div><div id="ghx-chart-group"><div id="ghx-report-controls-group"><div id="ghx-report-controls"></div></div><div id="ghx-chart-wrap"><div id="ghx-chart-view"></div><div id="ghx-axis-x" class="ghx-axis"></div><div id="ghx-axis-y" class="ghx-axis ghx-axis-y"><span class="ghx-inner"></span></div></div><div id="ghx-chart-data"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.velocity.renderReportBody.soyTemplateName = 'GH.tpl.velocity.renderReportBody';
}


GH.tpl.velocity.renderNoSprintsMessage = function(opt_data, opt_ignored) {
  return '<div class="aui-message info"><p class="title"><span class="aui-icon icon-info"></span>' + soy.$$escapeHtml("There are no available sprints for this board.") + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.velocity.renderNoSprintsMessage.soyTemplateName = 'GH.tpl.velocity.renderNoSprintsMessage';
}


GH.tpl.velocity.renderVelocityChartTable = function(opt_data, opt_ignored) {
  var output = '<table class="aui ghx-auto"><thead><tr><th>' + soy.$$escapeHtml("Sprint") + '</th><th class="ghx-right">' + soy.$$escapeHtml("Commitment") + '</th><th class="ghx-right">' + soy.$$escapeHtml("Completed") + '</th></tr></thead><tbody>';
  var rowList16 = opt_data.rows;
  var rowListLen16 = rowList16.length;
  for (var rowIndex16 = 0; rowIndex16 < rowListLen16; rowIndex16++) {
    var rowData16 = rowList16[rowIndex16];
    output += '<tr><td><a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/secure/RapidBoard.jspa?rapidView=' + soy.$$escapeHtml(opt_data.rapidBoardId) + '&view=reporting&chart=sprintRetrospective&sprint=' + soy.$$escapeHtml(rowData16.sprint.id) + '" data-value=' + soy.$$escapeHtml(rowData16.sprint.id) + '>' + soy.$$escapeHtml(rowData16.sprint.name) + '</a></td><td class="ghx-right">' + soy.$$escapeHtml(rowData16.estimated) + '</td><td class="ghx-right">' + soy.$$escapeHtml(rowData16.completed) + '</td></tr>';
  }
  output += '</tbody></table>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.velocity.renderVelocityChartTable.soyTemplateName = 'GH.tpl.velocity.renderVelocityChartTable';
}


GH.tpl.velocity.formatSprintName = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml(opt_data.sprintName);
};
if (goog.DEBUG) {
  GH.tpl.velocity.formatSprintName.soyTemplateName = 'GH.tpl.velocity.formatSprintName';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/ChangesReportModel.js' */
define("jira-agile/rapid/ui/chart/changes-report-model",["require"],function(t){"use strict";var e=t("underscore"),i=t("jira-agile/rapid/ui/chart/burndown-rate"),s=t("jira-agile/rapid/ui/chart/burndown-table-producer"),a=t("jira-agile/rapid/ui/chart/burndown-timeline-producer"),r=t("jira-agile/rapid/ui/chart/chart-colors"),n=GH.FlotChartUtils,o=GH.ChartUtils,u=GH.TimeFormat,c=GH.NumberFormat,d=function(){};return d.prototype.setParams=function(t){this.statistic=t.statistic,this.issueAddedText=t.issueAddedText,this.issueRemovedText=t.issueRemovedText,this.startText=t.startText},d.prototype.setRawData=function(t){this.data=t,this.processData()},d.prototype.processData=function(){this.ensureIssuesHaveEstimateText(),this.makeStatisticsValuesRenderable()},d.prototype.setRawChartData=function(t){this.chartData=t,this.processChartData()},d.prototype.getStartTime=function(){return this.chartData.startTime},d.prototype.processChartData=function(){this.chartData.endTime||(this.chartData.endTime=this.chartData.now),i.setRateData(this.chartData.workRateData);var t=a.ProgressConsumer;this.timelineData=a.calculateTimelineData(this.chartData,t),this.calculateSeries()},d.prototype.hasIssues=function(){var t=this.getReportContent();return t?t.completedIssues.length>0||t.incompleteEstimatedIssues.length>0||t.incompleteUnestimatedIssues.length>0:!!this.chartData&&!e.isEmpty(this.chartData.changes)},d.prototype.getReportContent=function(){if(this.data)return this.data.contents},d.prototype.getRenderer=function(){return this.statistic.renderer},d.prototype.isIssueCountStatistic=function(){return"issueCount"===this.statistic.typeId},d.prototype.isTimeTracking=function(){return"timeSpent"===this.statistic.fieldId},d.prototype.shouldAddToSeries=function(t,i){var s=!1;return e.each(i,function(e){s=s||e.deltas&&0!==e.deltas[t.id]}),s},d.prototype.getAllSeriesDefinitions=function(){var t=this.statistic.name;return{totalEstimate:{id:"totalEstimate",label:AJS.format("Total {0}",t),renderer:this.getRenderer(),statisticName:t},completedEstimate:{id:"completedEstimate",label:AJS.format("Completed {0}",t),renderer:this.getRenderer(),statisticName:t},issueCount:{id:"issueCount",label:"Number of issues",renderer:"number",statisticName:"Issue Count"},unestimatedIssueCount:{id:"unestimatedIssueCount",label:"Number of unestimated issues",renderer:"number",statisticName:"Issue Count"}}},d.prototype.calculateSeries=function(){var t=[],i=this.getAllSeriesDefinitions();this.isIssueCountStatistic()?(t.push(e.defaults({color:r.scope,yaxis:1,fill:.3,lineWidth:1},i.totalEstimate)),t.push(e.defaults({color:r.completed,yaxis:1,fill:.2,lineWidth:1},i.completedEstimate))):(t.push(e.defaults({color:r.scope,yaxis:1,fill:.3,lineWidth:1},i.totalEstimate)),t.push(e.defaults({color:r.completed,yaxis:1,fill:.2,lineWidth:1},i.completedEstimate)),t.push(e.defaults({color:r.issueCount,yaxis:2,lineWidth:1},i.issueCount)),t.push(e.defaults({color:r.unestimated,yaxis:2,lineWidth:1},i.unestimatedIssueCount))),this.calculateSeriesFromIds(t)},d.prototype.calculateSeriesFromIds=function(t){var i=this.timelineData,s=i?i.timeline:void 0,a=this.series=[];if(!e.isEmpty(s)){var o={},u={};e.each(t,function(t){o[t.id]=[],u[t.id]=[]}),e.each(s,function(i){e.each(t,function(t){this.shouldAddToSeries(t,i.issues)&&(i.deltas&&e.isNumber(i.deltas[t.id])&&0!=i.deltas[t.id]&&(o[t.id].push([i.time,i.values[t.id]-i.deltas[t.id]]),u[t.id].push({})),o[t.id].push([i.time,i.values[t.id]]),u[t.id].push(i))},this)},this);var c=e.last(s);!i.completeTime||i.completeTime>i.now?e.each(t,function(t){o[t.id].push([Math.max(i.startTime,i.now),c.values[t.id]])}):e.each(t,function(t){o[t.id].push([i.completeTime,c.values[t.id]])}),this.isTimeTracking()&&a.push({id:"timeSpent",data:o.timeSpent,color:r.timeSpent,label:"Time Spent"}),e.each(t,function(t){a.push({id:t.id,data:o[t.id],color:t.color,label:t.label,yaxis:t.yaxis,lines:{fill:t.fill,lineWidth:t.lineWidth,show:!0}})}),a.push({id:"markings",color:r.nonWorkingDays,data:[],label:"Non-Working Days"});var d=i.maxValues.totalEstimate;this.yAxisData=n.calculateYAxis(d,this.statistic),this.yAxisData.min=0,this.yAxisData.max=d,this.series=a,this.seriesData=u}},d.prototype.getXAxisStart=function(){var t=.02;return this.chartData.startTime-(this.chartData.endTime-this.chartData.startTime)*t},d.prototype.getYAxes=function(){var t=[];if(t.push(this.yAxisData),!this.isIssueCountStatistic()){var e=this.timelineData.maxValues.issueCount,i=1;e>15&&(i=Math.ceil(e/8)),t.push({position:"right",min:0,tickFormatter:function(t,e){return t.toFixed(0)},tickSize:i})}return t},d.prototype.getDataBySeries=function(t){return this.seriesData&&this.seriesData[t]},d.prototype.getTooltipData=function(t,i){var s={};return i.initial?(i.initial&&(s.initial=!0,s.event=this.getEpicStartChangeEvent()),s.issueCount=e.size(i.issues),s.statisticName=this.getSeriesStatisticName(t),s.statisticValue=o.renderStatisticText(i.values[t],!1,this.getSeriesRenderer(t))):(s.changes=[],e.each(i.issues,function(e){var i={};i.key=e.key,i.statisticName=this.getSeriesStatisticName(t),i.statisticDelta=o.renderStatisticText(e.deltas[t],!1,this.getSeriesRenderer(t)),i.event=this.getChangeEvent(e),s.changes.push(i)},this)),s.dateText=o.renderUTCMillisAsDate(i.time),s},d.prototype.getSeriesRenderer=function(t){var e=this.getAllSeriesDefinitions();return e[t].renderer},d.prototype.getSeriesStatisticName=function(t){var e=this.getAllSeriesDefinitions();return e[t].statisticName},d.prototype.getDataBySeriesAtIndex=function(t,e){var i=this.getDataBySeries(t);if(i)return i[e]},d.prototype.getChangeEvent=function(t){var i="Burnup",s=this.getScopeOrColumnChangeEvent(t,i);if(s)return s;if(t.estimateChange){var a=t.values.oldEstimateFieldValue,r=t.values.estimateFieldValue,n=!e.isUndefined(a),o=!e.isUndefined(r);return n&&o?{type:"Scope change",detail:AJS.format("Estimate changed from {0} to {1}",this.renderStatisticText(a),this.renderStatisticText(r))}:n?{type:"Scope change",detail:AJS.format("Estimate of {0} has been removed",this.renderStatisticText(a))}:{type:"Scope change",detail:AJS.format("Estimate of {0} has been added",this.renderStatisticText(r))}}return{type:"unknown",detail:"unknown change"}},d.prototype.getScopeOrColumnChangeEvent=function(t,e){return t.scopeChange?t.inScope?{type:"Scope change",detail:this.issueAddedText}:{type:"Scope change",detail:this.issueRemovedText}:s.getColumnChangeEvent(t,e)},d.prototype.getStartChangeEvent=function(){return{type:this.startText,detail:""}},d.prototype.getSeries=function(){return this.series},d.prototype.getXAxisEnd=function(){},d.prototype.ensureIssuesHaveEstimateText=function(){function t(t){return e.isUndefined(t.estimateStatistic)||e.isUndefined(t.estimateStatistic.statFieldValue.value)?t.estimateStatistic={statFieldValue:{text:"-"}}:t.estimateStatistic.statFieldValue.text=s(t.estimateStatistic.statFieldValue.value),t}var i=this.getReportContent(),s=this._getValueRenderer();i.completedIssues=e.map(this.data.contents.completedIssues,t),i.incompleteUnestimatedIssues=e.map(this.data.contents.incompleteUnestimatedIssues,t),i.incompleteEstimatedIssues=e.map(this.data.contents.incompleteEstimatedIssues,t)},d.prototype._getValueRenderer=function(){var t;return t="duration"===this.getStatistic().renderer?u.formatShortDurationForTimeTrackingConfiguration:c.format},d.prototype.makeStatisticsValuesRenderable=function(){var t=this.getReportContent(),e=this._getValueRenderer();t.completedIssuesEstimateSum.text=e(t.completedIssuesEstimateSum.value),t.incompletedIssuesEstimateSum.text=e(t.incompletedIssuesEstimateSum.value)},d.prototype.getJql=function(){return this.jql},d.prototype.getDoneStatuses=function(){return this.data.doneStatuses},d.prototype.getNotDoneStatuses=function(){return this.data.notDoneStatuses},d.prototype.renderStatisticText=function(t,e){return o.renderStatisticText(t,e,this.getStatistic().renderer)},d});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/NonWorkingDaysUtils.js' */
define("jira-agile/rapid/ui/chart/non-working-days-util",["require"],function(n){"use strict";var r=n("underscore"),e=n("jira-agile/rapid/ui/chart/burndown-rate"),t={};return t.transformSeriesExcludingNonWorkingDays=function(n,t,a){r.isUndefined(a)&&(a=r.pluck(n,"id"));var u=function(n,r){if(n.xValue>=r.start){if(!(r.start<=t&&r.end>=t))return n.xValue<r.end?n.xValue-r.moveTo:r.end-r.moveTo;if(n.xValue>=r.end)return r.end-t}return 0},i=r.map(n,function(n){var e=r.clone(n);return e.data=r.map(n.data,function(n){return{xValue:n[0],yValue:n[1],xTransform:0}}),e}),o=e.getAdjustedNonWorkingDays(t);return r.each(o,function(n){r.each(i,function(e){e.data=r.map(e.data,function(r){return{xValue:r.xValue,yValue:r.yValue,xTransform:r.xTransform+u(r,n)}})})}),r.map(i,function(n){var e=r.clone(n);return r.indexOf(a,n.id)>-1?e.data=r.map(n.data,function(n){return[n.xValue-n.xTransform,n.yValue]}):e.data=r.map(n.data,function(n){return[n.xValue,n.yValue]}),e})},t.transformDateIfInNonWorkingDays=function(n,t){if(n<t)return new Date(n);var a=e.getAdjustedNonWorkingDays(t),u=n;return r.each(a,function(n){u>=n.start&&(u+=n.end-n.moveTo)}),new Date(u)},t.deductNonWorkingDays=function(n,t){var a=e.getAdjustedNonWorkingDays(t),u=r.filter(a,function(n){return t>=n.start&&t<n.end}),i=r.filter(a,function(r){return n>=r.start&&n<r.end}),o=n;i.length>0&&(o=i[0].start);var d=t;u.length>0&&(d=u[0].end,o-=d-t);var f=r.filter(a,function(n){return n.end>d&&n.start<o});return r.each(f,function(n){o-=n.end-n.start}),o},t});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/EpicReportController.js' */
GH.EpicReportController={},GH.EpicReportController.id="epicReport",function(){var e=require("jira-agile/rapid/analytics-tracker");GH.EpicReportController.analytics=new e("gh.report.epicReport")}(),GH.EpicReportController.init=function(){var e=require("jira-agile/rapid/ui/component/chart-picker");GH.EpicReportController.epicPicker=new e("epicReport.selectedEpicId","There are currently no epics on this board"),AJS.$(GH.EpicReportController.epicPicker).bind("selectedItemChanged",GH.EpicReportController.handleEpicChanged)},GH.EpicReportController.setRapidView=function(e){GH.EpicReportController.rapidViewData=e||{}},GH.EpicReportController.isApplicable=function(e){return e.sprintSupportEnabled},GH.EpicReportController.getNormalizedFromInternal=function(){return{epic:GH.EpicReportController.getSelectedEpicKey()||null}},GH.EpicReportController.toUrl=function(e){return _.isNull(e.epic)?{}:{epic:e.epic}},GH.EpicReportController.updateInternalFromNormalized=function(e){GH.EpicReportController.setSelectedEpicFromUrlState(e.epic)},GH.EpicReportController.getNormalizedFromUrl=function(e){return{epic:GH.RapidBoard.UrlState.normalizeStringParam(e.epic,null)}},GH.EpicReportController.hide=function(){GH.log("GH.EpicReportController.hide",GH.Logger.Contexts.ui),GH.EpicReportController.displayed=!1},GH.EpicReportController.show=function(){var e=require("jira-agile/rapid/ui/chart/chart-controller");GH.log("GH.EpicReportController.show",GH.Logger.Contexts.ui),GH.EpicReportController.displayed=!0,GH.EpicReportController.rapidViewData&&(GH.EpicReportView.renderChartLoading(),e.loadRapidViewConfig(GH.EpicReportController,GH.EpicReportController.loadEpicsList),GH.EpicReportController.analytics.trigger("show"))},GH.EpicReportController.loadEpicsList=function(){var e={rapidViewId:GH.EpicReportController.rapidViewData.id};GH.Ajax.get({url:"/xboard/plan/backlog/epics.json",data:e},"epicListForEpicReport").done(GH.EpicReportController.processEpicData).fail(GH.ChartView.hideSpinner)},GH.EpicReportController.processEpicData=function(e){if(GH.EpicReportController.displayed){GH.EpicReportController.epicsData=e;var r=_.map(e.epics,function(e){return{id:e.key,name:GH.EpicConfig.getEpicNameString(e.epicLabel,e.key)}});GH.EpicReportController.epicPicker.setItems(r),GH.EpicReportController.epicPicker.setDefaultItem(_.first(r)),GH.EpicReportView.renderEpicPicker(),GH.EpicReportView.setUserTimeZoneLabel(GH.TimeFormat.userTimeZoneLabel),GH.EpicReportController.epicPicker.getSelectedItem()?GH.EpicReportController.loadReportData():GH.ChartView.hideSpinner(),GH.RapidBoard.State.replaceState()}},GH.EpicReportController.loadReportData=function(){GH.EpicReport.createModel();var e=GH.EpicReportController.epicPicker.getSelectedItem().id,r={rapidViewId:GH.EpicReportController.rapidViewData.id,epicKey:e},t=GH.Ajax.get({url:"/rapid/charts/epicreport",data:r},"epicReportData"+e).done(GH.EpicReportController.processReportData),o=GH.Ajax.get({url:"/rapid/charts/epicprogresschart",data:r},"epicprogresschart"+e).done(GH.EpicReportController.processChartData);AJS.$.when(t,o).then(GH.EpicReportController.performDataConsistencyCheck,GH.EpicReportController.failedToLoad)},GH.EpicReportController.failedToLoad=function(){GH.ChartView.hideSpinner(),GH.EpicReportController.epicPicker.removeSelectedItemAndRevert(GH.ChartView.getChartSelector(!0))},GH.EpicReportController.processReportData=function(e){if(GH.EpicReportController.displayed){var r=_.findWhere(GH.EpicReportController.epicsData.epics,{id:e.epic.id});r&&(e.epic.linkedPagesCount=r.linkedPagesCount,_.extend(e,_.pick(GH.EpicReportController.epicsData,"canEditEpics","supportsPages"))),GH.EpicReport.model.setRawData(e),GH.EpicReportView.renderReport()}},GH.EpicReportController.processChartData=function(e){GH.EpicReportController.displayed&&(GH.EpicReport.model.setRawEpicChartData(e),GH.EpicReportView.renderChart())},GH.EpicReportController.performDataConsistencyCheck=function(){if(GH.EpicReportController.displayed){var e=GH.EpicReport.model.getIssuesWithStatisticFieldMismatch();_.isEmpty(e)||GH.EpicReportView.renderStatisticMismatchWarning(e)}},GH.EpicReportController.handleEpicChanged=function(){GH.EpicReportController.displayed&&(GH.log("GH.EpicReportController.handleEpicChanged",GH.Logger.Contexts.event),GH.RapidBoard.State.pushState(),GH.EpicReportController.loadReportData())},GH.EpicReportController.getSelectedEpicKey=function(){var e=GH.EpicReportController.epicPicker.getSelectedItem();if(e)return e.id},GH.EpicReportController.setSelectedEpicFromUrlState=function(e){GH.EpicReportController.epicPicker.storeSelectedItemId(e)},GH.EpicReportController.setPointsForChart=function(e,r){var t=r.id,o=GH.EpicReport.model.getDataBySeries(t);if(o){var i=GH.FlotChartUtils.gatherPoints(r,o);e.realPointsPerSeries[t]=i}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/EpicReportView.js' */
GH.EpicReportView={},GH.EpicReportView.setUserTimeZoneLabel=function(e){GH.EpicReportView.userTimeZoneLabel=e},GH.EpicReportView.renderChartLoading=function(){GH.ChartView.getChartContentElem(!0).html(GH.tpl.epicreport.renderReportBody()),GH.ChartView.showSpinner()},GH.EpicReportView.toggleChartVisibility=function(){GH.ChartView.hideSpinner(),AJS.$("#ghx-chart-mismatch").empty(),GH.EpicReport.model.hasIssues()?(AJS.$("#ghx-epic-report-no-issues").hide(),AJS.$("#ghx-report-content").show()):(AJS.$("#ghx-report-content").hide(),AJS.$("#ghx-epic-report-no-issues").show())},GH.EpicReportView.renderReport=function(){GH.EpicReportView.toggleChartVisibility(),GH.EpicReportView.renderMeta(),GH.EpicReport.model.hasIssues()&&(GH.EpicReportView.renderIssuesReport(),GH.EpicReportView.renderSummary())},GH.EpicReportView.renderEpicPicker=function(){GH.EpicReportController.epicPicker.render(GH.ChartView.getChartSelector(!0))},GH.EpicReportView.renderIssuesReport=function(){var e=GH.EpicReport.model.getReportContent(),t=GH.EpicReport.model.hasIssues(),i=AJS.$("#ghx-report-content .ghx-epic-report");i.empty().html(GH.tpl.epicreport.renderEpicReport({content:e,jql:GH.EpicReport.model.getJql(),estimationStatistic:GH.EpicReportController.rapidViewConfig.estimationStatistic,hasIssues:t})),i.find(".issue-table-title-tooltip").tooltip()},GH.EpicReportView.renderSummary=function(){AJS.$("#ghx-report-content .ghx-epic-summary").empty().html(GH.tpl.epicreport.renderEpicSummary({epic:GH.EpicReport.model.getEpicSummary(),issuesJql:GH.EpicReport.model.getJql().allIssues}))},GH.EpicReportView.renderMeta=function(){var e=GH.EpicReport.model.getEpic();AJS.$("#ghx-epic-meta").empty().append(GH.tpl.epicreport.renderEpicReportHeader({epic:e,showPages:GH.EpicReport.model.supportsPages()})).show(),GH.LinkedPagesController.initDialogTrigger(GH.LinkedPagesController.EPIC,GH.LinkedPagesController.REPORT,e.id,AJS.$("#ghx-epic-meta .js-view-entity-pages"))},GH.EpicReportView.renderStatisticMismatchWarning=function(e){var t=_.pluck(e,"key"),i=GH.tpl.epicreport.renderStatisticValueMismatchMessage({statisticName:GH.EpicReport.model.getStatistic().name,keys:t.join(", ")});AJS.messages.warning("#ghx-chart-mismatch",{body:i,closeable:!0,shadowed:!1})},GH.EpicReportView.renderChart=function(){var e=require("jira-agile/rapid/ui/chart/chart");if(GH.EpicReportView.toggleChartVisibility(),GH.EpicReport.model.hasIssues()){var t=GH.ChartView.getChartView(!0),i=GH.EpicReport.model.getSeries(),r=e.draw(GH.EpicReportController.id,t,i,GH.ChartUtils.getChartOptions(GH.EpicReport.model)),o=!1;GH.EpicReport.model.getYAxes().length>1&&(o="Issue Count"),GH.FlotChartUtils.setAndAlignAxisLabels(AJS.format("Time ({0})",GH.EpicReportView.userTimeZoneLabel),GH.EpicReport.model.getStatistic().name,o),r.hooks.drawSeries.push(GH.EpicReportView.gatherPoints),r.hooks.draw.push(GH.FlotChartUtils.deferredRenderPoints),GH.EpicReportView.bindEvents(t)}},GH.EpicReportView.handlePlotHover=function(e,t,i){if(i){var r=i.series.id,o=i.dataIndex,p=GH.EpicReport.model.getDataBySeriesAtIndex(r,o);if(!_.isEmpty(p))return void(GH.EpicReportView.previousPlotHoverPoint!=i.dataIndex&&(GH.EpicReportView.previousPlotHoverPoint=i.dataIndex,AJS.$("#ghx-tooltip").remove(),GH.EpicReportView.showChartTooltip(i,r,p,i.datapoint[0]),AJS.$("#ghx-tooltip").hasClass("ghx-has-warnings")||GH.ChartView.getChartView().addClass("ghx-clickable")))}AJS.$("#ghx-tooltip").remove(),GH.EpicReportView.previousPlotHoverPoint=null,GH.ChartView.getChartView().removeClass("ghx-clickable")},GH.EpicReportView.showChartTooltip=function(e,t,i){if(i){var r=GH.EpicReport.model.getTooltipData(t,i),o=new GH.ChartTooltip(e,r);o.render()}},GH.EpicReportView.previousPlotHoverPoint=void 0,GH.EpicReportView.gatherPoints=function(e,t,i){e.mouseEntered&&GH.EpicReportController.setPointsForChart(e,i)},GH.EpicReportView.bindEvents=function(e){e.unbind("flotMouseEnter flotMouseLeave").bind("flotMouseEnter flotMouseLeave",GH.FlotChartUtils.handleMouseOverStateChange),e.unbind("plothover plotclick"),e.bind("plothover",GH.EpicReportView.handlePlotHover),e.bind("plotclick",GH.FlotChartUtils.handlePlotClick)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/EpicReportModel.js' */
GH.EpicReport={},GH.EpicReport.createModel=function(){GH.EpicReport.model=new GH.EpicReportModel,GH.EpicReport.model.setParams({statistic:GH.EpicReportController.rapidViewConfig.estimationStatistic,issueAddedText:"Issue added to epic",issueRemovedText:"Issue removed from epic",startText:"Epic Created"})},GH.EpicReportModel=function(){},function(){var t=require("jira-agile/rapid/ui/chart/changes-report-model");GH.EpicReportModel.prototype=new t}(),GH.EpicReportModel.prototype.setRawEpicChartData=function(t){t.startTime=t.epicCreationTime,this.setRawChartData(t)},GH.EpicReportModel.prototype.setRawData=function(t){this.data=t,this.processData(),this.generateJql(),this.generateSummary()},GH.EpicReportModel.prototype.generateSummary=function(){function t(t){return _.reduce(t,function(t,e){var i=e.estimateStatistic.statFieldValue.value;return _.isUndefined(i)&&(i=0),t+i},0)}var e={},i={},s=this.getReportContent();i.done=s.completedIssues.length,i.notEstimated=s.incompleteUnestimatedIssues.length,i.totalIssueCount=i.done+i.notEstimated+s.incompleteEstimatedIssues.length,e.epicStats=i,e.estimateDone=t(s.completedIssues),e.estimateTotal=e.estimateDone+t(s.incompleteEstimatedIssues),e.estimateStatisticName=this.getStatistic().name,e.isIssueCountStatistic=this.isIssueCountStatistic(),e.estimateDone=GH.BacklogStatistics.formatStatisticForRendering(GH.EpicReportController.rapidViewConfig.estimationStatistic,e.estimateDone),e.estimateTotal=GH.BacklogStatistics.formatStatisticForRendering(GH.EpicReportController.rapidViewConfig.estimationStatistic,e.estimateTotal);var a=this.getEpic();e.epicName=GH.EpicConfig.getEpicNameString(a.label,a.key),this.data.epicSummary=e},GH.EpicReportModel.prototype.generateJql=function(){var t=this.getStatistic();this.jql={};var e=GH.ChartUtils.createEpicJql(this.data.epic),i=e+" AND "+GH.ChartUtils.createStatusJql(this.getNotDoneStatuses());if(this.isIssueCountStatistic())this.jql.incompleteEstimatedIssues=i;else{var s=t.fieldId,a=/^customfield_(\d+)/.exec(s),o=a&&a.length>0;o&&(s="cf["+a[1]+"]"),this.jql.incompleteUnestimatedIssues=i+" AND "+s+" IS EMPTY",o?this.data.contents.incompleteEstimatedIssues.length>0&&(this.jql.incompleteEstimatedIssues=GH.ChartUtils.createIssueJql(this.data.contents.incompleteEstimatedIssues)):this.jql.incompleteEstimatedIssues=i+" AND "+s+" IS NOT EMPTY"}this.jql.completedIssues=e+" AND "+GH.ChartUtils.createStatusJql(this.getDoneStatuses()),this.jql.allIssues=e},GH.EpicReportModel.prototype.getEpic=function(){return this.data.epic},GH.EpicReportModel.prototype.getEpicSummary=function(){return this.data.epicSummary},GH.EpicReportModel.prototype.getStatistic=function(){return GH.EpicReportController.rapidViewConfig.estimationStatistic},GH.EpicReportModel.prototype.canUserEditEpics=function(){return!!this.data.canEditEpics},GH.EpicReportModel.prototype.supportsPages=function(){return!!this.data.supportsPages},GH.EpicReportModel.prototype.getIssuesWithStatisticFieldMismatch=function(){if(this.isIssueCountStatistic())return[];var t=this.timelineData.finalIssueStates,e=this.data.contents,i=_.flatten([e.completedIssues,e.incompleteEstimatedIssues,e.incompleteUnestimatedIssues]),s=[];return _.each(i,function(e){var i=t[e.key];i&&e.estimateStatistic&&e.estimateStatistic.statFieldValue&&e.estimateStatistic.statFieldValue.value!=i.values.estimateFieldValue&&s.push({key:i.key,reportValue:e.estimateStatistic.statFieldValue.value,chartValue:i.values.estimateFieldValue,reportIssue:e,chartIssue:i})}),s};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/EpicReport.soy' */
// This file was automatically generated from EpicReport.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.epicreport.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.epicreport == 'undefined') { GH.tpl.epicreport = {}; }


GH.tpl.epicreport.renderReportBody = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-status"></div><div id="ghx-chart-group"><div id="ghx-chart-controls-group"><div id="ghx-chart-controls"></div><div id="ghx-epic-meta" class="ghx-epic-meta"></div><div id="ghx-epic-report-no-issues" style="display:none"><div class="aui-message info"><p class="title"><span class="aui-icon icon-info"></span>' + soy.$$escapeHtml("This epic does not contain any issues.") + '</p></div></div></div><div id="ghx-report-content"><div id="ghx-chart-mismatch"></div><div class="ghx-epic-summary-wrap"><div id="ghx-chart-legend" class="ghx-epic-chart-legend"></div><div class="ghx-epic-summary"></div></div><div id="ghx-chart-wrap" class="ghx-epic-chart-wrap"><div id="ghx-chart-view"></div><div id="ghx-axis-x" class="ghx-axis"></div><div id="ghx-axis-y" class="ghx-axis ghx-axis-y"><span class="ghx-inner"></span></div><div id="ghx-axis-y-right" class="ghx-axis ghx-axis-y-right"><span class="ghx-inner"></span></div></div><div class="ghx-epic-report ghx-margin-top"></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.epicreport.renderReportBody.soyTemplateName = 'GH.tpl.epicreport.renderReportBody';
}


GH.tpl.epicreport.renderStatisticValueMismatchMessage = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml(AJS.format("Some issues have {0} even though their current configuration does not allow a value to be set.",opt_data.statisticName)) + ' ' + soy.$$escapeHtml("As a result the numbers in the chart will be different to the summary and status report.") + '<br>' + soy.$$escapeHtml(AJS.format("Affected issues are: {0}",opt_data.keys));
};
if (goog.DEBUG) {
  GH.tpl.epicreport.renderStatisticValueMismatchMessage.soyTemplateName = 'GH.tpl.epicreport.renderStatisticValueMismatchMessage';
}


GH.tpl.epicreport.renderEpicReport = function(opt_data, opt_ignored) {
  return '<h3>' + soy.$$escapeHtml("Status Report") + '</h3><div class="ghx-epic-report-table ghx-report-issue-list">' + ((opt_data.content.completedIssues.length != 0) ? GH.tpl.reports.issueTable.renderIssueTable({listName: '' + soy.$$escapeHtml("Completed Issues"), issueNavLink: '' + GH.tpl.epicreport.issueNavLink({jql: opt_data.jql.completedIssues}), issues: opt_data.content.completedIssues, estimationStatistic: opt_data.estimationStatistic, estimationValue: opt_data.content.completedIssuesEstimateSum.text}) : '') + ((opt_data.content.incompleteEstimatedIssues.length != 0) ? GH.tpl.reports.issueTable.renderIssueTable({listName: '' + soy.$$escapeHtml("Incomplete Issues"), issueNavLink: '' + GH.tpl.epicreport.issueNavLink({jql: opt_data.jql.incompleteEstimatedIssues}), issues: opt_data.content.incompleteEstimatedIssues, estimationStatistic: opt_data.estimationStatistic, estimationValue: opt_data.content.incompletedIssuesEstimateSum.text}) : '') + ((opt_data.content.incompleteUnestimatedIssues.length != 0) ? GH.tpl.reports.issueTable.renderIssueTable({listName: "Incomplete Unestimated Issues", titleTooltip: "\x22Unestimated issues\x22 also includes issues that cannot be estimated due to their configuration, e.g. no Story Points field.", issueNavLink: '' + GH.tpl.epicreport.issueNavLink({jql: opt_data.jql.incompleteUnestimatedIssues}), issues: opt_data.content.incompleteUnestimatedIssues, estimationStatistic: opt_data.estimationStatistic, estimationValue: 0}) : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.epicreport.renderEpicReport.soyTemplateName = 'GH.tpl.epicreport.renderEpicReport';
}


GH.tpl.epicreport.renderEpicSummary = function(opt_data, opt_ignored) {
  var output = '<h4>' + soy.$$escapeHtml("Summary") + '</h4><h5>' + soy.$$escapeHtml("Issues") + '</h5><div class="aui-group ghx-inline-blocks"><div class="aui-item">' + soy.$$escapeHtml("Total") + ':</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.epic.epicStats.totalIssueCount) + '</div></div><div class="aui-group ghx-inline-blocks"><div class="aui-item">' + soy.$$escapeHtml("Completed") + ':</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.epic.epicStats.done) + '</div></div>' + ((! opt_data.epic.isIssueCountStatistic) ? '<div class="aui-group ghx-inline-blocks"><div class="aui-item">' + soy.$$escapeHtml("Unestimated") + ':</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.epic.epicStats.notEstimated) + '</div></div><h5 id="ghx-stat-name">' + soy.$$escapeHtml(opt_data.epic.estimateStatisticName) + '</h5><div class="aui-group ghx-inline-blocks"><div class="aui-item">' + soy.$$escapeHtml("Total") + ':</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.epic.estimateTotal) + '</div></div><div class="aui-group ghx-inline-blocks"><div class="aui-item">' + soy.$$escapeHtml("Done") + ':</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.epic.estimateDone) + '</div></div>' : '') + '<div class="ghx-margin-top">';
  var issueNavLink__soy82 = '' + GH.tpl.epicreport.issueNavLink({jql: opt_data.issuesJql});
  output += '<a href="' + soy.$$escapeHtml(issueNavLink__soy82) + '">' + soy.$$escapeHtml(AJS.format("View {0} in Issue Navigator",opt_data.epic.epicName)) + '</a></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.epicreport.renderEpicSummary.soyTemplateName = 'GH.tpl.epicreport.renderEpicSummary';
}


GH.tpl.epicreport.issueNavLink = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/issues/?jql=' + soy.$$filterNoAutoescape(opt_data.jql);
};
if (goog.DEBUG) {
  GH.tpl.epicreport.issueNavLink.soyTemplateName = 'GH.tpl.epicreport.issueNavLink';
}


GH.tpl.epicreport.renderEpicReportHeader = function(opt_data, opt_ignored) {
  return '<div class="aui-group ghx-inline-blocks"><div class="aui-item"><a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(opt_data.epic.key) + '">' + soy.$$escapeHtml(opt_data.epic.key) + '</a> ' + soy.$$escapeHtml(opt_data.epic.summary) + '</div>' + ((opt_data.showPages) ? '<div class="aui-item">' + GH.tpl.component.linkedpages.renderTrigger({linkedPagesCount: opt_data.epic.linkedPagesCount, title: "Create and view pages linked to this epic"}) + '</div>' : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.epicreport.renderEpicReportHeader.soyTemplateName = 'GH.tpl.epicreport.renderEpicReportHeader';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/VersionReportController.js' */
define("jira-agile/rapid/ui/chart/version-report-controller",["require"],function(e){"use strict";var r=e("jquery"),t=e("underscore"),i=e("jira-agile/rapid/analytics-tracker"),a=e("jira-agile/rapid/ui/chart/burndown-rate"),n=e("jira-agile/rapid/ui/chart/chart-controller"),o=e("jira-agile/rapid/ui/component/chart-picker"),s=e("jira-agile/rapid/ui/chart/chart-view"),d=e("jira-agile/rapid/ui/chart/version-report"),l=e("jira-agile/rapid/ui/chart/version-report-view"),c=GH.Ajax,p=GH.ChartUtils,u=GH.FlotChartUtils,g=GH.log,v=GH.Logger,h=GH.RapidBoard.State,f=GH.RapidBoard.UrlState,D=GH.TimeFormat,m=GH.VersionsModel,V={};return V.nonWorkingDaysShown=!0,V.id="versionReport",V.analytics=new i("gh.report.versionReport"),V.init=function(){V.versionPicker=new o("versionReport.selectedVersionId","There are currently no versions on this board.")},V.isApplicable=function(e){return e.sprintSupportEnabled},V.setRapidView=function(e){V.rapidViewData=e||{}},V.getRapidView=function(){return V.rapidViewData},V.getNormalizedFromInternal=function(){return{version:V.getSelectedVersionId()||null}},V.toUrl=function(e){return t.isNull(e.version)?{}:{version:e.version}},V.updateInternalFromNormalized=function(e){V.setSelectedVersionFromState(e.version)},V.getNormalizedFromUrl=function(e){return{version:f.normalizeNumberParam(e.version,null)}},V.getSelectedVersionId=function(){var e=V.versionPicker.getSelectedItem();if(e)return e.id;var r=V.versionPicker.getStoredSelectedItemId();return r!=-1?r:null},V.show=function(){g("VersionReportController.show",v.Contexts.ui),V.displayed=!0,V.rapidViewData&&(l.renderChartLoading(),n.loadRapidViewConfig(V,V.loadVersionsList),V.analytics.trigger("show"))},V.hide=function(){g("VersionReportController.hide",v.Contexts.ui),V.displayed=!1},V.loadVersionsList=function(){var e={rapidViewId:V.rapidViewData.id};c.get({url:"/xboard/plan/backlog/versions.json",data:e},"versionsListForReport").done(V.processVersionData).fail(s.hideSpinner)},V.processVersionData=function(e){if(V.displayed){var r=V.versionModel=new m(e.projects);r.updateRawData(e.versionData);var i=t.map(r.getAllVersions(),function(e){return{id:e.id,name:e.project?e.project.key+": "+e.name:e.name}});i.reverse(),V.versionPicker.setItems(i),V.versionPicker.setDefaultItem(t.first(i)),l.setUserTimeZoneLabel(D.userTimeZoneLabel),l.renderVersionPicker(),V.versionPicker.getSelectedItem()?V.loadReportData():s.hideSpinner(),V.nonWorkingDaysShown=h.getNonWorkingDaysShown("version"),h.replaceState()}},V.loadReportData=function(){d.createModel(V.rapidViewConfig.estimationStatistic);var e={rapidViewId:V.getRapidView().id,versionId:V.getSelectedVersionId()},t=c.get({url:"/rapid/charts/versionprogresschart",data:e},"versionChartData").done(V.processChartData),i=c.get({url:"/rapid/charts/versionreport",data:e},"versionReportData").done(V.processReportData);r.when(t,i).then(V.calculatePredictions,V.failedToLoad)},V.failedToLoad=function(){s.hideSpinner(),V.versionPicker.removeSelectedItemAndRevert(s.getChartSelector(!0))},V.processChartData=function(e){V.displayed&&d.model.setRawVersionChartData(e)},V.calculatePredictions=function(){var e=d.model.getFurthestDateForNonWorkingDaysData();if(e<1/0&&e>d.model.getVersionStartDate()){var r=e,t=(new Date).valueOf()+90*p.oneDayInMillis;e<=t&&(r=t),c.get({url:"/rapidviewconfig/workingdays/rates",data:{rapidViewId:V.rapidViewData.id,startDate:d.model.getVersionStartDate()-3*p.oneDayInMillis,endDate:r}},"workingdaysrates").done(function(e){a.setRateData(e),V.renderChart()})}else V.renderChart()},V.renderChart=function(){V.displayed&&(l.renderChart(),l.renderIssuesLink(),l.renderMeta())},V.setSelectedVersionFromState=function(e){V.versionPicker.storeSelectedItemId(e)},V.setPointsForChart=function(e,r){var t=r.id,i=d.model.getDataBySeries(t);if(i){var a=u.gatherPoints(r,i);e.realPointsPerSeries[t]=a}},V.handleVersionChanged=function(e){V.displayed&&(g("VersionReportController.handleVersionChanged",v.Contexts.event),h.pushState(),V.loadReportData())},V.processReportData=function(e){V.displayed&&(d.model.setRawData(e),l.renderReport())},V});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/VersionReportView.js' */
define("jira-agile/rapid/ui/chart/version-report-view",["require"],function(e){"use strict";var t,r=e("jquery"),i=e("underscore"),o=e("jira-agile/rapid/ui/chart/change-event"),a=e("jira-agile/rapid/ui/chart/chart"),n=e("jira-agile/rapid/ui/chart/chart-colors"),s=e("jira-agile/rapid/ui/chart/chart-controller"),d=e("jira-agile/rapid/ui/chart/chart-view"),l=e("jira-agile/rapid/global-events"),h=e("jira-agile/rapid/ui/chart/non-working-days-util"),g=e("jira-agile/rapid/ui/chart/version-report"),p=GH.ChartTooltip,c=GH.ChartUtils,m=GH.FlotChartUtils,u=GH.tpl;l.on("pre-initialization",function(){t=e("jira-agile/rapid/ui/chart/version-report-controller")});var f={};return f.unmodifiedSeries=void 0,f.series=void 0,f.setUserTimeZoneLabel=function(e){f.userTimeZoneLabel=e},f.renderChartLoading=function(){d.getChartContentElem(!0).html(u.versionreport.renderReportBody()),r(t.versionPicker).bind("selectedItemChanged",t.handleVersionChanged),d.showSpinner()},f.renderVersionPicker=function(){t.versionPicker.render(d.getChartSelector(!0))},f.renderChart=function(){if(f.toggleChartVisibility(!0),g.model.hasIssues()&&!g.model.notStarted()){var e=d.getChartView(!0),o=g.model.getVersionSeries();if(f.wallboardMode){var s=i.findWhere(o,{id:"markings"});s.color=n.nonWorkingDaysWallboard}var l=f.getChartOptions();if(f.unmodifiedSeries=o,f.series=o,!t.nonWorkingDaysShown){var p=g.model.getXAxisStart();if(o=h.transformSeriesExcludingNonWorkingDays(o,p),f.series=o,i.findWhere(o,{id:"prediction"})){var u=i.findWhere(o,{id:"pessimistic"}),v=i.findWhere(o,{id:"prediction"}),x=i.first(u.data),S=i.last(u.data),k=i.last(v.data),D=c.calculateYProjection(x,S,k);i.findWhere(o,{id:"pessimisticFillerBottom"}).data[0][1]=D}if(i.findWhere(o,{id:"scope"})){var w=i.last(i.findWhere(o,{id:"scope"}).data);w[0]=l.xaxis.max}l.xaxis.tickFormatter=function(e,t){var i=h.transformDateIfInNonWorkingDays(e,p),o="%b %d";return"hour"===t.tickSize[1]?o+=" %h:%M":"minute"===t.tickSize[1]?o=" %h:%M":"second"===t.tickSize[1]&&(o=" %h:%M:%S"),r.plot.formatDate(i,o)}}var C=a.draw(t.id,e,o,l),y=!1;g.model.getYAxes().length>1&&(y="Percent"),f.renderLabelsForNowAndRelease(C),f.setLegendOpacity(),m.setAndAlignAxisLabels(AJS.format("Time ({0})",f.userTimeZoneLabel),g.model.getStatistic().name,y),C.hooks.drawSeries.push(f.gatherPoints),C.hooks.draw.push(m.deferredRenderPoints),C.hooks.draw.push(f.renderLabelsForNowAndRelease),C.hooks.draw.push(f.setLegendOpacity),f.bindEvents(e)}},f.getChartOptions=function(){var e=g.model,o=c.getChartOptions(e);return t.nonWorkingDaysShown||(o.xaxis.max=h.deductNonWorkingDays(o.xaxis.max,o.xaxis.min)),f.gadgetMode&&(o.legend.position="nw",o.legend.container=null,o.legend.backgroundOpacity=.5,o.legend.margin=[6,12],r("#ghx-chart-legend").hide()),f.wallboardMode?o.grid={backgroundColor:n.wallboard.backgroundColor,borderWidth:1,borderColor:n.wallboard.borderColor,color:n.wallboard.textColor,noGridBottomOffsetDelta:0,tickColor:n.wallboard.tickColor,markings:f.getMarkingsForGadget}:o.grid.markings=function(r){var a=s.getNonWorkingBlocks(),d=e.getNow(),l=[],g=[];if(!e.getVersion().released&&r.xmax>d){t.nonWorkingDaysShown||(d=h.deductNonWorkingDays(d,o.xaxis.min));var p=r.ymax/198,c=4*p;l=f.drawDashedMarkings(d,c,p,70);var m=e.getVersion().releaseDate;t.nonWorkingDaysShown||(m=h.deductNonWorkingDays(m,o.xaxis.min)),i.isUndefined(m)||(c=2*c,p=2*p,g=f.drawDashedMarkings(m,c,p,20,n.releaseDate))}return t.nonWorkingDaysShown?a.concat(l,g):l.concat(g)},o},f.getMarkingsForGadget=function(){var e=n.nonWorkingDaysWallboard,t=s.getNonWorkingBlocks();return i.map(t,function(t){return t.color=e,t})},f.drawDashedMarkings=function(e,t,r,i,o){for(var a=[],s=0;s<i;s++){var d=s*(t+r);a.push({color:o||n.dashedMarking,lineWidth:1,xaxis:{from:e,to:e},yaxis:{from:d,to:d+t}})}return a},f.setLegendOpacity=function(){var e=r("#ghx-chart-legend").find(".legendColorBox");r(e[0]).find("div").find("div").css("opacity",.3),r(e[1]).find("div").find("div").css("opacity",.8)},f.renderIssuesLink=function(){var e=g.model.getVersion(),t=e.name,i=!0;t.length>60&&(i=!1),r("#ghx-report-controls").empty().append(u.versionreport.renderViewIssuesLink({projectKey:g.model.getProjectKey(),version:e,nameUse:i})).show()},f.renderLabelsForNowAndRelease=function(e){var o=e.getXAxes()[0],a=e.getYAxes()[0];if(g.model.chartData){var n=g.model.getNow();t.nonWorkingDaysShown||(n=h.deductNonWorkingDays(n,g.model.getXAxisStart()));var s=g.model.getVersion(),d=s.releaseDate;t.nonWorkingDaysShown||(d=h.deductNonWorkingDays(d,g.model.getXAxisStart()));var l,p=r("#ghx-axis-x-top");if(p.empty(),n<o.max&&(l=r(u.versionreport.renderXaxisTopLabel({text:"Today",left:e.pointOffset({x:n,y:a.max}).left})),p.append(l)),!i.isUndefined(d)&&!s.released&&d>o.min&&d<o.max){var m=e.pointOffset({x:d,y:a.max}).left,v=r(u.versionreport.renderXaxisTopLabel({text:"Release Date",date:c.renderUTCMillisAsDateWithoutTime(g.model.getVersion().releaseDate),left:m}));p.append(v),i.isUndefined(l)||f.labelsAreOverlapping(l,v)&&v.addClass("ghx-raised")}}},f.labelsAreOverlapping=function(e,t){var r=e.position().left,i=r+e.width(),o=t.position().left,a=o+t.width();return o>r&&o<i||a>r&&a<i||o<r&&a>i},f.toggleChartVisibility=function(e){r("#ghx-chart-mismatch").empty(),e&&g.model.notStarted()?(r("#ghx-version-report-no-issues").hide(),r("#ghx-report-content").hide(),r("#ghx-version-report-not-started").show(),d.hideSpinner()):g.model.hasIssues()?(r("#ghx-version-report-no-issues").hide(),r("#ghx-version-report-not-started").hide(),r("#ghx-report-content").show()):(r("#ghx-report-content").hide(),r("#ghx-version-report-not-started").hide(),r("#ghx-version-report-no-issues").show(),d.hideSpinner())},f.gatherPoints=function(e,r,i){e.mouseEntered&&t.setPointsForChart(e,i)},f.bindEvents=function(e){e.unbind("flotMouseEnter flotMouseLeave").bind("flotMouseEnter flotMouseLeave",m.handleMouseOverStateChange),e.unbind("plothover plotclick"),e.bind("plothover",f.handlePlotHover),e.bind("plotclick",m.handlePlotClick)},f.handlePlotHover=function(e,t,o){if(o){var a=o.series.id,n=o.dataIndex,s=g.model.getDataBySeriesAtIndex(a,n);if(!i.isEmpty(s))return void(f.isDataPointSameAsPrevious(o)||(f.previousPlotHoverPoint={dataIndex:o.dataIndex,seriesIndex:o.seriesIndex},r("#ghx-tooltip").remove(),f.showChartTooltip(o,a,s,o.datapoint[0]),r("#ghx-tooltip").hasClass("ghx-has-warnings")||d.getChartView().addClass("ghx-clickable")))}r("#ghx-tooltip").remove(),f.previousPlotHoverPoint=null,d.getChartView().removeClass("ghx-clickable")},f.isDataPointSameAsPrevious=function(e){return!i.isUndefined(f.previousPlotHoverPoint)&&!i.isNull(f.previousPlotHoverPoint)&&(e.dataIndex==f.previousPlotHoverPoint.dataIndex&&e.seriesIndex==f.previousPlotHoverPoint.seriesIndex)},f.showChartTooltip=function(e,t,r){if(r){var a,n;if(g.model.isReleaseDatePredictionSeriesId(t)){var s="Predicted Completion Date",d=i.findWhere(f.unmodifiedSeries,{id:"prediction"}).data[1][0];"optimistic"===t?(s="Predicted Completion Date"+" ("+"Optimistic"+")",d=i.findWhere(f.unmodifiedSeries,{id:"optimistic"}).data[1][0]):"pessimisticFillerBottom"===t&&(s="Predicted Completion Date"+" ("+"Pessimistic"+")",d=i.findWhere(f.unmodifiedSeries,{id:"pessimisticFillerBottom"}).data[1][0]),n={predictedReleaseDate:c.renderUTCMillisAsDateWithoutTime(d),description:s},a=new p(e,n,o.releaseDate)}else"trendline"===t?(n={description:"Start Date",dateText:c.renderUTCMillisAsDateWithoutTime(e.datapoint[0])},a=new p(e,n,o.startDate)):"unestimatedPercent"===t?(n={unestimated:(r.values.unestimatedIssueCount/r.values.issueCount*100).toFixed(2),dateText:c.renderUTCMillisAsDate(r.time)},n.changes=i.map(r.issues,function(e){return{key:e.key,event:this.getChangeEvent(e)}},g.model),a=new p(e,n,o.uncertainty)):(n=g.model.getTooltipData(t,r),a=new p(e,n));a.render()}},f.renderMeta=function(){if(g.model.hasIssues()&&!g.model.notStarted()){var e=g.model.getVersion(),t=i.findWhere(f.unmodifiedSeries,{id:"prediction"}),r=i.findWhere(f.unmodifiedSeries,{id:"optimistic"}),o=i.findWhere(f.unmodifiedSeries,{id:"pessimisticFillerBottom"}),a=e.released?"Released":"Unreleased",n={prediction:t?c.renderUTCMillisAsDateWithoutTime(t.data[1][0]):null,optimistic:r?c.renderUTCMillisAsDateWithoutTime(r.data[1][0]):null,pessimisticFillerBottom:o?c.renderUTCMillisAsDateWithoutTime(o.data[1][0]):null};f.gadgetMode?(AJS.$("#ghx-gadget-version-meta").empty().append(u.versionreport.renderVersionReportGadgetHeader({version:e,formattedReleaseDate:e.formattedReleaseDate,formattedStartDate:e.formattedStartDate,startTimezone:e.startTimeOffset,releaseTimezone:e.releaseTimeOffset,completionDate:n})).show(),AJS.$("#ghx-chart-header .ghx-version-report-version-status").text(" ("+a+")")):(AJS.$("#ghx-version-meta").empty().append(GH.tpl.versionreport.renderVersionReportHeader({version:e,formattedReleaseDate:e.formattedReleaseDate,formattedStartDate:e.formattedStartDate,startTimezone:e.startTimeOffset,releaseTimezone:e.releaseTimeOffset})).show(),e.released||AJS.$("#ghx-report-content .ghx-version-report-completion-date-estimates").empty().append(GH.tpl.versionreport.renderNonGadgetCompletionDates({completionDate:n})).show())}},f.renderReport=function(){f.toggleChartVisibility(),g.model.hasIssues()&&f.renderIssuesReport()},f.renderIssuesReport=function(){var e=g.model.getReportContent(),t=g.model.hasIssues();r("#ghx-report-content .ghx-version-report").empty().html(u.versionreport.renderVersionReport({content:e,jql:g.model.getJql(),estimationStatistic:g.model.getStatistic(),hasIssues:t})),d.hideSpinner()},f.setGadgetMode=function(e){f.gadgetMode=e},f.setWallboardMode=function(e){f.wallboardMode=e},f});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/VersionReportModel.js' */
define("jira-agile/rapid/ui/chart/version-report-model",["require"],function(t){"use strict";var e=t("underscore"),i=t("jira-agile/rapid/ui/chart/changes-report-model"),s=t("jira-agile/rapid/ui/chart/chart-colors"),r=t("jira-agile/rapid/ui/chart/chart-controller"),a=t("jira-agile/rapid/ui/chart/release-date-predictor"),n=GH.ChartUtils,o=function(t){this.estimationStatistic=t};return o.prototype=new i,o.prototype.getStatistic=function(){return this.estimationStatistic},o.prototype.getProjectKey=function(){return this.chartData.projectKey},o.prototype.getVersionName=function(){return this.chartData.version.name},o.prototype.getNow=function(){return this.chartData.now},o.prototype.getVersion=function(){return this.data&&this.data.version?this.data.version:this.chartData&&this.chartData.version?this.chartData.version:{}},o.prototype.setRawVersionChartData=function(t){t.version.released&&(t.endTime=t.version.releaseDate,t.completeTime=t.endTime),this.setRawChartData(t)},o.prototype.getXAxisEnd=function(){return e.isUndefined(this.xAxisEndDate)?this.chartData.endTime:this.xAxisEndDate},o.prototype.getYAxes=function(){var t=[];return t.push(this.yAxisData),this.isIssueCountStatistic()||t.push({position:"right",min:0,max:100,tickFormatter:function(t,e){return t.toFixed(0)},tickSize:10}),t},o.prototype.setRawData=function(t){this.data=t,this.processData(),this.generateJql()},o.prototype.generateJql=function(){var t=this.getStatistic();this.jql={};var e=n.createVersionJql(this.getVersion()),i=e+" AND "+n.createStatusJql(this.getNotDoneStatuses());if(this.isIssueCountStatistic())this.jql.incompleteEstimatedIssues=i;else{var s=t.fieldId,r=/^customfield_(\d+)/.exec(s),a=r&&r.length>0;a&&(s="cf["+r[1]+"]"),this.jql.incompleteUnestimatedIssues=i+" AND "+s+" IS EMPTY",a?this.data.contents.incompleteEstimatedIssues.length>0&&(this.jql.incompleteEstimatedIssues=n.createIssueJql(this.data.contents.incompleteEstimatedIssues)):this.jql.incompleteEstimatedIssues=i+" AND "+s+" IS NOT EMPTY"}this.jql.completedIssues=e+" AND "+n.createStatusJql(this.getDoneStatuses()),this.jql.allIssues=e},o.prototype.getDataBySeries=function(t){var s=i.prototype.getDataBySeries.call(this,t);if(s)return s;if(this.isReleaseDatePredictionSeriesId(t)&&(s=e.findWhere(this.series,{id:t}),s&&s.data.length>0)){var r=new Array(s.data.length-1);return r.push(e.last(s.data)),r}return"trendline"===t&&(s=e.findWhere(this.series,{id:t}))?[e.first(s.data)]:"unestimatedPercent"===t&&(s=e.findWhere(this.series,{id:t}),s&&s.data.length>0)?e.map(s.data,function(t,i,s){var r=s[i+1];if(e.isUndefined(r)||t[0]!==r[0])return t}):void 0},o.prototype.getDataBySeriesAtIndex=function(t,s){var r=this.getDataBySeries(t);if(r){if("unestimatedPercent"!==t)return r[s];var a=r[s];if(a){var n=i.prototype.getDataBySeries.call(this,"issueCount"),o=e.findWhere(n,{time:a[0]});if(!e.isUndefined(o))return o;var d=i.prototype.getDataBySeries.call(this,"unestimatedIssueCount"),c=e.findWhere(d,{time:a[0]});return c}}},o.prototype.getVersionSeries=function(t){var i=this.getVersion();if(!this.attemptedTrendlinePrediction&&e.isUndefined(e.findWhere(this.series,{id:"trendline"}))&&(this.series=this.series.concat(this.getTrendlineSeries()),this.attemptedTrendlinePrediction=!0),!this.isIssueCountStatistic()&&e.isUndefined(e.findWhere(this.series,{id:"unestimatedPercent"}))&&(this.series=this.series.concat(this.getUnestimatedSeries()),this.series=e.reject(this.series,function(t){return"issueCount"===t.id||"unestimatedIssueCount"===t.id})),i.released)return this.series;if(e.isUndefined(e.findWhere(this.series,{id:"prediction"}))){this.series=this.series.concat(this.getPredictedSeries());var s=e.findWhere(this.series,{id:"trendline"});e.isUndefined(s)||(s.label="Predicted Completion Date")}return this.series},o.prototype.getPredictedSeries=function(){var t=this.getPredictionData();t.xAxisEndDate&&(this.xAxisEndDate=t.xAxisEndDate);var i=e.last(t.optimistic),r=e.last(t.standard),a=e.last(t.pessimistic);if(e.isUndefined(r))return[];var o={lineWidth:0},d={lineWidth:0,fill:.3},c={lineWidth:3},h={color:s.trend,data:t.standard,id:"prediction",lines:c},l={color:s.trend,data:t.optimistic,id:"optimistic",lines:d,fillBetween:"prediction"},u={color:s.trend,data:[i,r],id:"optimisticFiller",lines:d,fillBetween:"prediction",hoverable:!1},p={color:s.trend,data:t.pessimistic,id:"pessimistic",lines:d,fillBetween:"prediction",hoverable:!1},f={color:s.trend,data:[r,a],id:"pessimisticFillerTop",lines:o,hoverable:!1},m=e.first(t.pessimistic),g=n.calculateYProjection(m,a,r),D={color:s.trend,data:[[r[0],g],a],id:"pessimisticFillerBottom",lines:d,fillBetween:"pessimisticFillerTop"},v={color:s.scope,data:t.scope,id:"scope",lines:{lineWidth:1,fill:.3}};return[v,h,l,u,p,D,f]},o.prototype.getPredictionData=function(){var t=e.last(e.findWhere(this.series,{id:"totalEstimate"}).data),i=e.last(e.findWhere(this.series,{id:"completedEstimate"}).data),s=this.getPredictedCompletedEstimatePerDay();return a.calculateSeries({startDate:this.getNow(),totalScope:t[1],totalCompleted:i[1],estimatePerDay:s})},o.prototype.getPredictedCompletedEstimatePerDay=function(){var t=this.getVersionStartDate(),i=this.chartData.now+n.oneDayInMillis,s=e.findWhere(this.series,{id:"completedEstimate"}).data;return a.getPredictedCompletedEstimatePerDay(s,t,i,this.seriesData.completedEstimate)},o.prototype.getFurthestDateForNonWorkingDaysData=function(){if(e.isUndefined(this.series)||0==this.series.length)return 1/0;var t=e.last(e.findWhere(this.series,{id:"totalEstimate"}).data),i=e.last(e.findWhere(this.series,{id:"completedEstimate"}).data),s=t[1]-i[1];if(0===s)return this.getXAxisEnd();var r=this.getPredictedCompletedEstimatePerDay();return r.pessimistic>0?a.calculatePredictionDate(this.getVersionStartDate(),r.pessimistic/5,s):r.standard>0?a.calculatePredictionDate(this.getVersionStartDate(),r.standard/5,s):a.calculatePredictionDate(this.getVersionStartDate(),r.optimistic/5,s)},o.prototype.getTrendlineSeries=function(){var t;t=this.isIssueCountStatistic()?e.findWhere(this.series,{id:"totalEstimate"}).data:e.findWhere(this.series,{id:"issueCount"}).data;var i=e.first(t),r=e.findWhere(this.series,{id:"completedEstimate"}).data,a=e.last(r),n=this.getVersionStartDate(),o=[n,0],d=a;if(n>i[0]){var c=e.chain(r).filter(function(t){return t[0]<n}).last().value();e.isUndefined(c)&&(c=e.first(r)),o=[n,c[1]]}return 0===d[1]||d[1]<=o[1]?[]:[{id:"trendline",color:s.trend,data:[o,d],lines:{lineWidth:3},label:"Trend"}]},o.prototype.getUnestimatedSeries=function(){function t(t,i){return e.reduce(t,function(t,s){var r={time:s[0]};r[i]=s[1];var a=e.last(t);return e.isUndefined(a)||a.time!==r.time?t.push(r):a[i]=r[i],t},[])}var i=e.findWhere(this.series,{id:"issueCount"}).data,r=e.findWhere(this.series,{id:"unestimatedIssueCount"}).data,a=e.first(i)[1],n=e.first(r)[1],o=t(i,"total"),d=t(r,"unestimated"),c=e.sortBy(e.flatten([o,d],!0),"time"),h=e.reduce(c,function(t,i){var s=e.last(t);return e.isUndefined(s)||s.time!=i.time?t.push(i):e.defaults(s,i),t},[]),l=e.flatten(e.map(h,function(t,i,s){if(i<s.length-1){var r=s[i+1];return[t,e.defaults({time:r.time},t)]}return[t]}),!0);l.unshift({time:l[0].time,total:a,unestimated:n}),e.each(l,function(t,i,s){if(!(i<1)){var r=s[i-1];e.isUndefined(t.total)&&(t.total=r.total),e.isUndefined(t.unestimated)&&(t.unestimated=r.unestimated)}});var u=e.map(l,function(t){return[t.time,0===t.total?0:t.unestimated/t.total*100]});return{id:"unestimatedPercent",label:"Percent Unestimated Issues",color:s.unestimatedPercent,data:u,yaxis:2,lines:{lineWidth:1}}},o.prototype.getChartOptions=function(){var t=n.getChartOptions(this);return t.grid.markings=this.getMarkings(),t},o.prototype.getMarkings=function(){var t=this;return function(i){var a=r.getNonWorkingBlocks(),n=t.getNow();if(i.xmax>n&&(!t.getVersion().released||t.getVersion().releaseDate<=i.xmax)){var o=i.ymax/198,d=4*o;t.drawDashedMarkings(a,n,d,o,70);var c=t.getVersion().releaseDate;e.isUndefined(c)||(d=2*d,o=2*o,t.drawDashedMarkings(a,c,d,o,20,s.releaseDate))}return a}},o.prototype.drawDashedMarkings=function(t,e,i,r,a,n){for(var o=0;o<a;o++){var d=o*(i+r);t.push({color:n||s.dashedMarking,lineWidth:1,xaxis:{from:e,to:e},yaxis:{from:d,to:d+i}})}},o.prototype.isReleaseDatePredictionSeriesId=function(t){switch(t){case"prediction":case"optimistic":case"pessimisticFillerBottom":return!0}return!1},o.prototype.getStartTime=function(){return this.chartData.startTime?this.chartData.startTime:this.getNow()},o.prototype.getVersionStartDate=function(){return this.getVersion().startDate?this.getVersion().startDate:this.getStartTime()},o.prototype.notStarted=function(){return this.getVersionStartDate()>this.getNow()},o.prototype.getXAxisStart=function(){var t=.02,e=this.chartData.startTime;return this.getVersion().startDate&&(e=this.getVersion().startDate),e-(this.chartData.endTime-e)*t},o});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/VersionReport.js' */
define("jira-agile/rapid/ui/chart/version-report",["require"],function(e){"use strict";var t=e("jira-agile/rapid/ui/chart/version-report-model"),r={};return r.createModel=function(e){r.model=new t(e),r.model.setParams({statistic:e,issueAddedText:"Issue added to version",issueRemovedText:"Issue removed from version",startText:"Version start date"})},r});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/VersionReport.soy' */
// This file was automatically generated from VersionReport.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.versionreport.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.versionreport == 'undefined') { GH.tpl.versionreport = {}; }


GH.tpl.versionreport.renderReportBody = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-status"></div><div id="ghx-chart-group"><div id="ghx-chart-controls-group"><div id="ghx-report-controls"></div><div id="ghx-version-meta" class="ghx-version-meta"></div><div id="ghx-version-report-no-issues" style="display:none"><div class="aui-message info"><p class="title"><span class="aui-icon icon-info"></span>' + soy.$$escapeHtml("This version does not contain any issues.") + '</p></div></div><div id="ghx-version-report-not-started" style="display:none"><div class="aui-message info"><p class="title"><span class="aui-icon icon-info"></span>' + soy.$$escapeHtml("The chart cannot be generated because the version has a start date in the future.") + '</p></div></div></div><div id="ghx-report-content"><div id="ghx-chart-mismatch"></div><div class="ghx-version-summary-wrap"><div id="ghx-chart-legend" class="ghx-release-chart-legend"></div><div class="ghx-release-summary"></div></div><div id="ghx-chart-wrap" class="ghx-version-chart-wrap"><div id="ghx-axis-x-top"></div><div id="ghx-chart-view"></div><div id="ghx-axis-x" class="ghx-axis"></div><div id="ghx-axis-y" class="ghx-axis ghx-axis-y"><span class="ghx-inner"></span></div><div id="ghx-axis-y-right" class="ghx-axis ghx-axis-y-right"><span class="ghx-inner"></span></div></div><div class="ghx-version-report-completion-date-estimates ghx-margin-top"></div><div class="ghx-version-report ghx-margin-top"></div></div><div id="ghx-gadget-version-meta" class="ghx-version-meta"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.versionreport.renderReportBody.soyTemplateName = 'GH.tpl.versionreport.renderReportBody';
}


GH.tpl.versionreport.renderViewIssuesLink = function(opt_data, opt_ignored) {
  return '<div class="ghx-controls"><a href="' + GH.tpl.versionreport.issueNavLink({jql: 'fixVersion=' + soy.$$escapeUri(opt_data.version.jqlEncodedName) + ' AND project=' + soy.$$escapeHtml(opt_data.projectKey)}) + '">' + ((opt_data.nameUse == true) ? soy.$$escapeHtml(AJS.format("View {0} in Issue Navigator",opt_data.version.name)) : soy.$$escapeHtml("View in Issue Navigator")) + '</a></div>';
};
if (goog.DEBUG) {
  GH.tpl.versionreport.renderViewIssuesLink.soyTemplateName = 'GH.tpl.versionreport.renderViewIssuesLink';
}


GH.tpl.versionreport.renderVersionReportHeader = function(opt_data, opt_ignored) {
  return '<p>' + ((opt_data.version.startDate) ? soy.$$escapeHtml("Start Date:") + ' ' + soy.$$escapeHtml(opt_data.formattedStartDate) + '<br />' : '') + ((opt_data.version.released && opt_data.version.releaseDate) ? soy.$$escapeHtml(AJS.format("Released on {0}",opt_data.formattedReleaseDate)) : (opt_data.version.released) ? soy.$$escapeHtml("Released") : (opt_data.version.releaseDate) ? soy.$$escapeHtml(AJS.format("Scheduled Release Date: {0}",opt_data.formattedReleaseDate)) : soy.$$escapeHtml("Unreleased")) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.versionreport.renderVersionReportHeader.soyTemplateName = 'GH.tpl.versionreport.renderVersionReportHeader';
}


GH.tpl.versionreport.renderVersionReportGadgetHeader = function(opt_data, opt_ignored) {
  return '<div class="ghx-version-report-completion-date-body">' + ((opt_data.version.startDate) ? '<p><span class="ghx-date-title">' + soy.$$escapeHtml("Start date") + ':</span><span class="ghx-date-value"> ' + soy.$$escapeHtml(opt_data.formattedStartDate) + '</span></p>' : '') + ((opt_data.version.released && opt_data.version.releaseDate) ? '<p><span class="ghx-date-title">' + soy.$$escapeHtml("Released") + ':</span><span class="ghx-date-value"> ' + soy.$$escapeHtml(opt_data.formattedReleaseDate) + '</span></p>' : '') + ((! opt_data.version.released) ? GH.tpl.versionreport.renderCompletionDates(opt_data) : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.versionreport.renderVersionReportGadgetHeader.soyTemplateName = 'GH.tpl.versionreport.renderVersionReportGadgetHeader';
}


GH.tpl.versionreport.renderNonGadgetCompletionDates = function(opt_data, opt_ignored) {
  return '<div class="ghx-version-report-completion-date-body">' + GH.tpl.versionreport.renderCompletionDates(opt_data) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.versionreport.renderNonGadgetCompletionDates.soyTemplateName = 'GH.tpl.versionreport.renderNonGadgetCompletionDates';
}


GH.tpl.versionreport.renderCompletionDates = function(opt_data, opt_ignored) {
  return '' + ((opt_data.completionDate.prediction) ? GH.tpl.versionreport.renderCompletionDate({dateTitle: '' + soy.$$escapeHtml("Predicted"), dateValue: '' + soy.$$escapeHtml(opt_data.completionDate.prediction), showTitle: 'true'}) + '<br>' : '') + ((opt_data.completionDate.optimistic) ? GH.tpl.versionreport.renderCompletionDate({dateTitle: '' + soy.$$escapeHtml("Optimistic"), dateValue: '' + soy.$$escapeHtml(opt_data.completionDate.optimistic), showTitle: 'false'}) + '<br>' : '') + ((opt_data.completionDate.pessimisticFillerBottom) ? GH.tpl.versionreport.renderCompletionDate({dateTitle: '' + soy.$$escapeHtml("Pessimistic"), dateValue: '' + soy.$$escapeHtml(opt_data.completionDate.pessimisticFillerBottom), showTitle: 'false'}) + '<br>' : '');
};
if (goog.DEBUG) {
  GH.tpl.versionreport.renderCompletionDates.soyTemplateName = 'GH.tpl.versionreport.renderCompletionDates';
}


GH.tpl.versionreport.renderCompletionDate = function(opt_data, opt_ignored) {
  return ((opt_data.showTitle) ? '<span class="ghx-date-title">' + soy.$$escapeHtml(opt_data.dateTitle) + ' ' + soy.$$escapeHtml("completion date") + ':</span>' : '') + '<span class="ghx-date-value"> ' + soy.$$escapeHtml(opt_data.dateValue) + '</span>';
};
if (goog.DEBUG) {
  GH.tpl.versionreport.renderCompletionDate.soyTemplateName = 'GH.tpl.versionreport.renderCompletionDate';
}


GH.tpl.versionreport.renderVersionReport = function(opt_data, opt_ignored) {
  return '<h3>' + soy.$$escapeHtml("Status Report") + '</h3><div class="ghx-version-report-table ghx-report-issue-list">' + ((opt_data.content.completedIssues.length != 0) ? GH.tpl.reports.issueTable.renderIssueTable({listName: '' + soy.$$escapeHtml("Completed Issues"), issueNavLink: '' + GH.tpl.versionreport.issueNavLink({jql: opt_data.jql.completedIssues}), issues: opt_data.content.completedIssues, showEpicColumn: true, estimationStatistic: opt_data.estimationStatistic, estimationValue: opt_data.content.completedIssuesEstimateSum.text}) : '') + ((opt_data.content.incompleteEstimatedIssues.length != 0) ? GH.tpl.reports.issueTable.renderIssueTable({listName: '' + soy.$$escapeHtml("Incomplete Issues"), issueNavLink: '' + GH.tpl.versionreport.issueNavLink({jql: opt_data.jql.incompleteEstimatedIssues}), issues: opt_data.content.incompleteEstimatedIssues, estimationStatistic: opt_data.estimationStatistic, estimationValue: opt_data.content.incompletedIssuesEstimateSum.text}) : '') + ((opt_data.content.incompleteUnestimatedIssues.length != 0) ? GH.tpl.reports.issueTable.renderIssueTable({listName: '' + soy.$$escapeHtml("Incomplete Unestimated Issues"), issueNavLink: '' + GH.tpl.versionreport.issueNavLink({jql: opt_data.jql.incompleteUnestimatedIssues}), issues: opt_data.content.incompleteUnestimatedIssues, estimationStatistic: opt_data.estimationStatistic, estimationValue: 0}) : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.versionreport.renderVersionReport.soyTemplateName = 'GH.tpl.versionreport.renderVersionReport';
}


GH.tpl.versionreport.issueNavLink = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/issues/?jql=' + soy.$$filterNoAutoescape(opt_data.jql);
};
if (goog.DEBUG) {
  GH.tpl.versionreport.issueNavLink.soyTemplateName = 'GH.tpl.versionreport.issueNavLink';
}


GH.tpl.versionreport.renderXaxisTopLabel = function(opt_data, opt_ignored) {
  return '<div style="left:' + soy.$$escapeHtml(opt_data.left) + 'px" class="ghx-axis-x-top-label">' + soy.$$escapeHtml(opt_data.text) + ((opt_data.date) ? ': ' + soy.$$escapeHtml(opt_data.date) : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.versionreport.renderXaxisTopLabel.soyTemplateName = 'GH.tpl.versionreport.renderXaxisTopLabel';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/ReleaseDatePredictor.js' */
define("jira-agile/rapid/ui/chart/release-date-predictor",["require"],function(e){"use strict";var t=e("underscore"),a=e("jira-agile/rapid/ui/chart/burndown-rate"),r=e("jira-agile/rapid/ui/chart/change-event"),i=GH.ChartUtils,n={};return n.calculateSeries=function(e){var a={standard:[],optimistic:[],pessimistic:[],scope:[]};if(e.totalCompleted/e.totalScope<.1||e.totalCompleted===e.totalScope)return a;var r=n.createDataSeries(t.defaults({estimatePerDay:e.estimatePerDay.standard},e)),i=1/0;if(r.length>0&&(i=t.last(r)[0]),i==1/0)return a;var s=n.createDataSeries(t.defaults({estimatePerDay:e.estimatePerDay.optimistic},e)),o=n.createDataSeries(t.defaults({estimatePerDay:e.estimatePerDay.pessimistic},e)),l=n.calculateXAxisEndDate(o,i),c=[];return c.push([e.startDate,e.totalScope]),c.push([l,e.totalScope]),{standard:r,optimistic:s,pessimistic:o,scope:c,xAxisEndDate:l}},n.calculateXAxisEndDate=function(e,a){var r=1/0;return e.length>0&&(r=t.last(e)[0]+i.oneDayInMillis),r===1/0&&(r=a+i.oneDayInMillis),r},n.createDataSeries=function(e){var r=[],n=e.estimatePerDay;if(r.push([e.startDate,e.totalCompleted]),n<=0)return r.push([1/0,e.totalCompleted]),r;var s=a.getWorkingDays();if(0===s.length)return[];for(var o=e.totalScope-e.totalCompleted,l=e.totalCompleted,c=0;c<s.length;c++){var u=s[c];if(u.end>e.startDate){var d=u.start;u.start>e.startDate?r.push([u.start,l]):d=e.startDate;var p=(u.end-d)/i.oneDayInMillis,m=o/n;if(m<=p){var D=new Date(d+m*i.oneDayInMillis);r.push([D.valueOf(),e.totalScope]);break}var f=p*n;l+=f,o-=f,r.push([u.end,l])}}return[t.first(r),t.last(r)]},n.getCompletedEstimatePerDay=function(e,n,s,o){function l(e){var t=r.getChangeEvent(e);t!=r.burndown&&t!=r.completeScopeAdded||m.push(e.key)}function c(e,a){if(t.contains(m,a.key)){var i=r.getChangeEvent(a);if(i===r.completeScopeAdded||i===r.scopeAdded)return e-a.completedEstimate}return e}for(var u=[],d=0,p=0,m=[],D=0,f=n;f<=s;f+=i.oneDayInMillis){a.isDateInNonWorkingBlock(f)||D++;for(var v,h=0,g=p;g<e.length;g++){var y=e[g][0];if(!(y<=f)){d=e[g][1],p=g;break}if(y>n){var C=e[g][1];v=o[g]?o[g].issues:[],v&&(C=t.reduce(v,c,C),t.each(v,l)),C>d&&(h+=C-d),d=e[g][1]}else v=o[g]?o[g].issues:[],v&&t.each(v,l),d=e[g][1]}u.push({time:f,estimate:h})}return{completedData:u,workingDays:D}},n.calculateAverageEstimateCompletedPerDay=function(e){var a=e.workingDays;if(0===a)return 0;var r=t.reduce(e.completedData,function(e,t){return e+t.estimate},0);return r/a},n.calculateDeviation=function(e){return.1*e},n.getPredictedCompletedEstimatePerDay=function(e,t,a,r){var i=n.getCompletedEstimatePerDay(e,t,a,r),s=n.calculateAverageEstimateCompletedPerDay(i),o=n.calculateDeviation(s),l=s+o,c=Math.max(s-o,0);return{standard:s,optimistic:l,pessimistic:c}},n.calculatePredictionDate=function(e,t,a){if(t<=0)return 1/0;var r=a/t;return new Date(e+i.oneDayInMillis*r).valueOf()},n});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/ChangeEvent.js' */
define("jira-agile/rapid/ui/chart/change-event",["require"],function(e){"use strict";var n=e("underscore"),t={scopeAdded:"scopeAdded",scopeRemoved:"scopeRemoved",reopened:"reopened",burndown:"burndown",completeScopeAdded:"completeScopeAdded",estimateChanged:"estimateChanged",estimateAdded:"estimateAdded",estimateRemoved:"estimateRemoved",releaseDate:"releaseDate",uncertainty:"uncertainty",unknown:"unknown",startDate:"startDate"};return t.getScopeOrColumnChangeEvent=function(e,n){return e.scopeChange?e.inScope?t.scopeAdded:t.scopeRemoved:!!e.columnChange&&("notDone"===e.column?e.oldColumn?t.reopened:t.scopeAdded:"done"===e.column?e.oldColumn?t.burndown:t.completeScopeAdded:"notDone"===e.oldColumn?t.scopeRemoved:t.scopeRemoved)},t.getChangeEvent=function(e){var d="Burnup",o=t.getScopeOrColumnChangeEvent(e,d);if(o)return o;if(e.estimateChange){var a=e.values.oldEstimateFieldValue,r=e.values.estimateFieldValue,s=!n.isUndefined(a),i=!n.isUndefined(r);return s&&i?t.estimateChanged:s?t.estimateRemoved:t.estimateAdded}return t.unknown},t});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/MultipleCharts.js' */
GH.Reports=GH.Reports||{},GH.Reports.multipleCharts=function(){return c3.component("multipleCharts").extend({charts:c3.prop([]),chartSelector:c3.prop(".ghx-svg-chart")}).extend(function(){this.selection().selectAll(this.chartSelector()).data(this.charts()).each(function(t){t&&t(d3.select(this))})})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/ChartConfigService.js' */
!function(){function t(t,a){var o=GH.RapidBoard.State.getBoardSetting(t,"chart.config."+a,{});return o}function a(){}a.prototype={mapOldConfigToNewConfig:function(a,o){var n=t(a,o),i=GH.RapidBoard.State.getCycleTimeCalculationType();n.includeNonWorkingDays="total"===i,GH.RapidBoard.State.setBoardSetting("chart.config."+o,n)},mapNewConfigToOldConfig:function(a,o){var n=t(a,o),i=n.includeNonWorkingDays?"total":"workingDays";GH.RapidBoard.State.setCycleTimeCalculationType(i)}},GH.ChartNWDConfigService=a,GH.chartNWDConfigService=new a}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/ChartTimeFrameModel.js' */
!function(t,e,i){function r(e,i){if(!t.isDate(e))throw i+" must be a Date object";return e}function a(t){return h.floor(h.offset(t,1))}function s(t){return new Date(a(t)-1)}function m(){}var n="%Y-%m-%d",o=90,u="custom",h=e.time.day;m.prototype={timeFrame:null,fromDate:null,toDate:null,setSimpleDates:function(t,e){return this.timeFrame=u,this.fromDate=h.floor(r(t,"fromDate")),this.toDate=s(r(e,"toDate")),this},setExactDates:function(t,e){return this.timeFrame=u,this.fromDate=r(t),this.toDate=r(e),this},setDays:function(t){return this.timeFrame=t,this},setAllTime:function(){return this.timeFrame=0,this},resetToDefault:function(){return this.timeFrame=o,this},isDefault:function(){return this.timeFrame===o},setBounds:function(t,e){return this.earliestDate=r(t,"earliestDate"),this.currentDate=r(e,"currentDate"),this},getTimeFrame:function(){return t.findWhere(i,{days:this.timeFrame})?this.timeFrame:u},getTimeFrameDates:function(){if(!this.earliestDate||!this.currentDate)throw"Cannot calculate time frame dates without earliestDate and currentDate";var t,e;return this.timeFrame>0?(t=h.offset(a(this.currentDate),-1*this.timeFrame),e=s(this.currentDate)):this.timeFrame<=0?(t=h.floor(this.earliestDate),e=s(this.currentDate)):this.timeFrame===u&&(t=this.fromDate,e=this.toDate),{fromDate:t,toDate:e}},getTimeFrameDuration:function(){var t=this.getTimeFrameDates();return t.toDate-t.fromDate+1},fromNormalized:function(t){if(null==t.days)this.resetToDefault();else if(t.days>0)this.setDays(Number(t.days));else if(t.days===u)try{this.setSimpleDates(Date.parseDate(t.from,n),Date.parseDate(t.to,n))}catch(t){this.resetToDefault()}else this.setAllTime();return this},toNormalized:function(){var e={};return t.isNumber(this.timeFrame)&&this.timeFrame!==o?e.days=this.timeFrame:this.timeFrame===u&&(e.days=this.timeFrame,e.from=this.fromDate.print(n),e.to=this.toDate.print(n)),e},clone:function(){return(new m).fromNormalized(this.toNormalized())}},GH.Reports.ChartTimeFrameModel=m}(_,d3,GH.ChartTimeFrames.timeFrames);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/ChartTimeFrameService.js' */
GH.ChartTimeFrameService={},GH.ChartTimeFrameService.rapidViewId=null,GH.ChartTimeFrameService.normalizedDateFormat="%Y-%m-%d",GH.ChartTimeFrameService.setRapidViewId=function(e){GH.ChartTimeFrameService.rapidViewId=e},GH.ChartTimeFrameService.getTimeFramesConfigForChart=function(e){var r=GH.RapidBoard.State.getBoardSetting(GH.ChartTimeFrameService.rapidViewId,"chart.config."+e,{});return r},GH.ChartTimeFrameService.saveTimeFrameConfigForChart=function(e,r){var t={view:"reporting"};GH.RapidBoard.State.setBoardSetting("chart.config."+e,_.defaults(r,t))},GH.ChartTimeFrameService._getFormattedDate=function(e){return e=_.isNumber(e)?new Date(e):e,_.isDate(e)?e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate():e},GH.ChartTimeFrameService._convertDateFormattedStringToDate=function(e){return _.isString(e)&&e.length>0?new Date(Date.parse(e)):null},GH.ChartTimeFrameService.mapOldConfigToNewConfig=function(e){var r=GH.ChartTimeFrameService.rapidViewId,t=GH.RapidBoard.State.getBoardSetting(r,"chart.timeframe.days",GH.ChartTimeFrames.days),a=GH.RapidBoard.State.getBoardSetting(r,"chart.timeframe.from",""),i=GH.RapidBoard.State.getBoardSetting(r,"chart.timeframe.to","");a=GH.ChartTimeFrameService._getFormattedDate(a),i=GH.ChartTimeFrameService._getFormattedDate(i);var m=GH.ChartTimeFrameService.getTimeFramesConfigForChart(e);m.days=t>=0?t:"custom",m.from=a,m.to=i,GH.ChartTimeFrameService.saveTimeFrameConfigForChart(e,m)},GH.ChartTimeFrameService.mapNewConfigToOldConfig=function(e){var r=GH.ChartTimeFrameService.getTimeFramesConfigForChart(e),t=r.days,a=null,i=null;if(t<0||"custom"===t){t=-1;try{a=GH.ChartTimeFrameService._convertDateFormattedStringToDate(r.from).getTime(),i=GH.ChartTimeFrameService._convertDateFormattedStringToDate(r.to).getTime()}catch(e){t=0}}else _.isUndefined(t)&&(t=0);GH.ChartTimeFrames.setNewChartLimits(t,a,i,!1)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/ScopeBurndownBySprintTransformer.js' */
!function(e,t,n,r,i,s,a,o,d,u){"use strict";function m(t){function n(e,t){var n={time:+r,key:i.key};n[e]=t,a.push(n)}var r,i,s=t.changes,a=[];for(r in s)if(s.hasOwnProperty(r))for(var o=0;o<s[r].length;o++)i=s[r][o],i.column&&n("done",!i.column.notDone),i.statC&&n("estimate",i.statC.newValue),"added"in i&&n("added",i.added);return e.sortBy(a,"time")}function c(t){function n(t){i=e.reject(i,function(e){return e.key===t&&(e.wasDone&&(e.wasDone=!1),"done"in e)}),s[t].done=!1}function r(n){var r=e.where(t,{key:n,done:!0});return e.last(r).time}var i=[],s={};return e.each(t,function(t){if(!("estimate"in t)){var a=t.key;s[a]||(s[a]={});var o=s[a];"added"in t?o.added!==t.added&&(o.done&&(t=e.extend({wasDone:!0},t),t.added&&(t.time=r(t.key),i=e.reject(i,function(e){return e.key===a&&"done"in e}),i.push({key:t.key,done:!0,time:t.time}))),i.push(t),o.added=t.added):"done"in t&&(t.done?o.done||o.added===!1||i.push(t):n(a),o.done=t.done)}}),{changes:i,issueStates:s}}function p(t){var n={};return e.each(t,function(e){"added"in e&&(e.added?n[e.key]=!0:delete n[e.key])}),e.keys(n)}function l(t,n){var r={},i=e.groupBy(n);return e.each(t,function(t){"estimate"in t&&e.has(i,t.key)&&(e.isNumber(t.estimate)?r[t.key]=t.estimate:delete r[t.key])}),r}function f(t,n){var r=e.find(t,function(e){return!(null!=n&&e.time<n)&&"done"in e});return r?r.time:-1}function k(t,n){if(!t.length||t[0].startTime>n)return"original";var r=e.find(t,function(e,r){return r===t.length-1||e.startTime<=n&&t[r+1].startTime>n});return r.id}function v(t,n){var r={},i=f(t);if(i===-1)r.original=t;else{var s=k(n,i);e.each(t,function(e){var t=k(n,e.time);e.time<i&&t!==s&&(t="original"),r[t]||(r[t]=[]),r[t].push(e)})}return g(r)}function g(t){var n={};return e.each(t,function(t,r){function i(t,n){return e.find(e.clone(t).reverse(),function(e){return e.added===n})}function s(t){return e.reject(t,function(e){return"added"in e})}n[r]=n[r]||[],e.each(t,function(e){"added"in e||n[r].push(e)});var a={};e.each(t,function(e){"added"in e&&(a[e.key]=a[e.key]||[],a[e.key].push(e))}),e.each(a,function(t,o){var d=e.reduce(t,function(e,t){return e+(t.added?1:-1)},0);if(d>0){var u=i(t,!0);u&&(a[o]=s(),a[o].push(u))}else if(d<0){var m=i(t,!1);m&&(a[o]=s(),a[o].push(m))}else a[o]=s(),e.last(t).added===!1&&(n[r]=e.reject(n[r],function(e){return e.key===o}))}),e.each(e.flatten(a),function(e){n[r].push(e)})}),n}function w(t,n){var r={added:0,removed:0,net:0};return e.each(n||[],function(e){if("added"in e){var n=t[e.key]||0;e.added?r.added+=n:e.wasDone||(r.removed+=n)}}),r.net=r.added-r.removed,r}function h(t,n){return e.reduce(n,function(e,n){if(n.done){var r=t[n.key]||0;return e+r}return e},0)}function y(e){var t;switch(e){case"duration":t={formatFull:function(e){return GH.TimeFormat.formatShortDurationForTimeTrackingConfiguration(e,{durationUnit:GH.TimeFormatDurationUnits.SECONDS,dropMinutesIfLongerThanADay:!0})},formatCompact:function(e){return GH.TimeFormat.formatShortDurationForTimeTrackingConfiguration(e,{durationUnit:GH.TimeFormatDurationUnits.SECONDS,timeFormat:GH.TimeFormatDisplays.MOST_SIGNIFICANT})}};break;default:t={formatFull:GH.NumberFormat.format,formatCompact:GH.NumberFormat.format}}return t}function I(t){function n(e){return Math.round(r.mean(e,function(e){return e.workCompleted}))}var i=e.last(t),s=i&&i.isActive,a=s?t.slice(0,-1):t,o={baseline:i?i.baseline:0};if(a.length<F)return e.extend(o,{forecastError:AJS.format("A forecast cannot be shown until at least {0,choice,1#1 sprint has|1\u003c{0,number} sprints have} been completed.",F)});if(0===i.workRemaining)return e.extend(o,{sprintsRemaining:0});var d=n(e.last(a,F)),u=i.workRemaining,m=!1;if(s)if(i.workCompleted>d)d=n(e.last(t,F));else{var c=i.workAtStart+i.workAdded-i.workRemoved;u=c-Math.min(c,d),m=!0}return 0===d?e.extend(o,{forecastError:AJS.format("A forecast cannot be shown until at least one of {0,number} most recent {0,choice,1#sprint|1\u003csprints} contains completed work.",F)}):e.extend(o,{sprintsRemaining:Math.ceil(u/d),velocity:d,workRemaining:u,isLastSprintForecast:m})}function S(t,n){if(t.forecastError||0===t.sprintsRemaining)return e.map(e.range(n),function(e){return{sprintId:"forecast"+e,sprintName:"",baseline:t.baseline,workAtStart:0,workAdded:0,workRemoved:0,workCompleted:0,workRemaining:0,isForecast:!0,isActive:!1}});var r=t.workRemaining;return e.map(e.range(n),function(e){var n=r,i=Math.min(r,t.velocity);return r-=i,{sprintId:"forecast"+e,sprintName:"",baseline:t.baseline,workAtStart:n,workAdded:0,workRemoved:0,workCompleted:i,workRemaining:r,isForecast:!0,isActive:!1}})}function T(t,n){function r(e){return function(t){return e[t].added}}var i={sprints:[],series:{baseline:[],workAdded:[],workRemaining:[],workCompleted:[]},estimationStatistic:t.estimationStatistic,labels:t.labels||{},rapidViewId:t.rapidViewId};t.epic&&(i.epic=t.epic),t.version&&(i.version=t.version);var s=m(t),a=c(s),o=a.changes,u=l(s,t.estimatableIssueKeys),g=e.sortBy(t.sprints,"startTime"),y=v(o,g),T=w(u,y.original).net,R=h(u,y.original),b={sprintId:"original",sprintName:i.labels.originalEstimate,baseline:0,workAtStart:T,workAdded:0,workRemoved:0,workCompleted:R,workRemaining:T-R,isForecast:!1,isActive:!1,issues:e.pluck(e.where(y.original,{done:!0}),"key")},C=b;if(i.sprints=e.map(g,function(t){var r=y[t.id],i=w(u,r),s=h(u,r),a={sprintId:t.id,sprintName:t.name,baseline:n?0:C.baseline-i.net,workAtStart:C.workRemaining,workAdded:i.added,workRemoved:i.removed,workCompleted:s,workRemaining:C.workRemaining-s+i.net,startTime:t.startTime,endTime:t.endTime,isForecast:!1,isActive:"ACTIVE"===t.state,issues:e.pluck(e.where(r,{done:!0}),"key")};return C=a,a}),i.sprints.length){var F=f(o,i.sprints[0].startTime),A=k(g,F),G=d.indexOf(i.sprints,function(e){return e.sprintId===A}),H=d.indexOf(i.sprints,function(e){return e.workAdded||e.workRemoved||e.workCompleted||e.workRemaining},!0);i.sprints=G>=0&&H>=0?i.sprints.slice(G,H+1):[]}var N=e.last(i.sprints),D=i.sprints.length?N.workRemaining:b.workRemaining,E=b.workCompleted+e.reduce(i.sprints,function(e,t){return e+t.workCompleted},0),U=i.forecast=I(i.sprints);i.sprints.unshift(b),i.getForecast=e.partial(S,U);var x=p(o),B=e.intersection(x,e.keys(u));if(0===D){var j=e.pluck(e.where(o,{done:!0}),"key"),V=e.filter(j,r(a.issueStates)),M=e.filter(t.estimatableIssueKeys,r(a.issueStates)),O=e.difference(M,V),J=O.length;i.forecast.remainingEstimatableIssueCount=J}return i.snapshot={workRemaining:D,workCompleted:E,estimatedIssueCount:B.length,estimatableIssueCount:e.intersection(x,t.estimatableIssueKeys).length,issueCount:x.length},i}function R(n,r){var i=n.contents,s=e.object(e.pluck(i.completedIssues,"key"),i.completedIssues);return n.estimationStatistic=r.estimationStatistic,i.incompleteIssues=e.union(i.incompleteEstimatedIssues,i.incompleteUnestimatedIssues),i.incompleteIssuesSum={text:n.estimationStatistic.formatter.formatFull(i.incompletedIssuesEstimateSum.value),value:i.incompletedIssuesEstimateSum.value},i.incompleteIssuesUrl=u.getUrlForIssues(i.incompleteIssues),n.sprints=e.filter(r.sprints,function(e){return"original"!==e.sprintId||e.issues.length}).reverse(),n.sprints=e.map(n.sprints,function(r){var i={sprintId:r.sprintId};return i.issues=e.map(r.issues,function(e){return s[e]}),i.issues=e.compact(i.issues),i.issueNavUrl=u.getUrlForIssues(i.issues),"original"===r.sprintId?i.sprintName="Before initial sprint":(i.sprintName=r.sprintName,i.sprintReportUrl=u.prependBaseUrl("/secure/RapidBoard.jspa?rapidView="+n.rapidViewId+"&view=reporting&chart=sprintRetrospective&sprint="+r.sprintId)),r.startTime&&(i.formattedStartTime=t(r.startTime).format(C)),r.endTime&&(i.formattedEndTime=t(r.endTime).format(C)),i.formatedWorkCompleted=n.estimationStatistic.formatter.formatFull(r.workCompleted),i}),n}function b(t){var n=m(t),r={};return e.each(n,function(e){var t=r[e.key]=r[e.key]||[];t.push(e)}),r}var C="LL",F=3,A={getScopeBySprintData:T,getIssuesBySprintData:R,getEstimationStatisticFormatter:y,_getIssueHistory:b};GH.Reports=GH.Reports||{},GH.Reports.ScopeBurndownBySprintTransformer=A}(_,moment,AJS.$,d3,GH.Ajax,GH.RapidViewConfig,GH.NumberFormat,GH.TimeFormat,GH.Util,GH.UrlFormat);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/ReportIssueTable.soy' */
// This file was automatically generated from ReportIssueTable.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.reports.issueTable.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.reports == 'undefined') { GH.tpl.reports = {}; }
if (typeof GH.tpl.reports.issueTable == 'undefined') { GH.tpl.reports.issueTable = {}; }


GH.tpl.reports.issueTable.renderIssueTable = function(opt_data, opt_ignored) {
  var output = '<div class="aui-group ghx-issue-table-title"><div class="aui-item">';
  if (opt_data.sprint || opt_data.listName) {
    output += '<h4>';
    if (opt_data.sprint) {
      var sprintName__soy9 = '' + ((opt_data.sprint.isActive) ? soy.$$escapeHtml(AJS.format("{0} (active)",opt_data.sprint.sprintName)) : soy.$$escapeHtml(opt_data.sprint.sprintName));
      output += (opt_data.sprint.sprintReportUrl) ? '<a href="' + soy.$$escapeHtml(opt_data.sprint.sprintReportUrl) + '">' + soy.$$escapeHtml(sprintName__soy9) + '</a>' : soy.$$escapeHtml(sprintName__soy9);
    } else {
      output += soy.$$escapeHtml(opt_data.listName);
    }
    output += '</h4>' + ((opt_data.titleTooltip) ? '<span class="aui-icon aui-icon-small aui-iconfont-help issue-table-title-tooltip" title="' + soy.$$escapeHtml(opt_data.titleTooltip) + '"></span>' : '');
  }
  output += ((opt_data.sprint && opt_data.sprint.formattedStartTime && opt_data.sprint.formattedEndTime) ? ' <span>' + soy.$$escapeHtml(opt_data.sprint.formattedStartTime) + ' - ' + soy.$$escapeHtml(opt_data.sprint.formattedEndTime) + '</span>' : '') + '</div><div class="aui-item">' + ((opt_data.issues.length > 0) ? '<a class="ghx-controls" href="' + soy.$$escapeHtml(opt_data.issueNavLink) + '">' + soy.$$escapeHtml("View in Issue navigator") + '</a>' : '') + '</div></div>' + ((opt_data.issues.length > 0) ? '<table class="aui">' + GH.tpl.reports.issueTable.renderIssueTableHeader({estimateStatisticName: opt_data.estimationStatistic.name, estimateStatisticValue: opt_data.estimationValue, currentEstimateStatisticValue: opt_data.currentEstimationValue, showEpicColumn: opt_data.showEpicColumn}) + GH.tpl.reports.issueTable.renderIssueTableRows(opt_data) + '</table>' : (opt_data.emptyMessage) ? '<p>' + soy.$$escapeHtml(opt_data.emptyMessage) + '</p>' : '');
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.issueTable.renderIssueTable.soyTemplateName = 'GH.tpl.reports.issueTable.renderIssueTable';
}


GH.tpl.reports.issueTable.renderIssueTableHeader = function(opt_data, opt_ignored) {
  var output = '<tr><th>' + soy.$$escapeHtml("Key") + '</th><th>' + soy.$$escapeHtml("Summary") + '</th><th>' + soy.$$escapeHtml("Issue Type") + '</th><th>' + soy.$$escapeHtml("Priority") + '</th><th>' + soy.$$escapeHtml("Status") + '</th>' + ((opt_data.showEpicColumn) ? '<th>' + soy.$$escapeHtml("Epic") + '</th>' : '');
  var headerTooltip__soy82 = opt_data.currentEstimateStatisticValue && opt_data.estimateStatisticValue != opt_data.currentEstimateStatisticValue ? AJS.format("Estimate modified from {0} to {1}",opt_data.estimateStatisticValue,opt_data.currentEstimateStatisticValue) : '';
  output += '<th class="ghx-right ghx-minimal ghx-nowrap" title="' + soy.$$escapeHtml(headerTooltip__soy82) + '">' + soy.$$escapeHtml(opt_data.estimateStatisticName) + ' <span>(';
  if (opt_data.currentEstimateStatisticValue && opt_data.estimateStatisticValue != opt_data.currentEstimateStatisticValue) {
    output += GH.tpl.reports.issueTable.renderChangedEstimateIndicator({initialEstimate: opt_data.estimateStatisticValue, currentEstimate: opt_data.currentEstimateStatisticValue});
  } else {
    var className__soy94 = '' + GH.tpl.reports.issueTable.returnEmptyModeClassForDashChar({value: opt_data.estimateStatisticValue});
    output += '<span class="' + soy.$$escapeHtml(className__soy94) + '">' + soy.$$escapeHtml(opt_data.estimateStatisticValue) + '</span>';
  }
  output += ')</span></th></tr>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.issueTable.renderIssueTableHeader.soyTemplateName = 'GH.tpl.reports.issueTable.renderIssueTableHeader';
}


GH.tpl.reports.issueTable.renderIssueTableRows = function(opt_data, opt_ignored) {
  var output = '';
  var issueList104 = opt_data.issues;
  var issueListLen104 = issueList104.length;
  for (var issueIndex104 = 0; issueIndex104 < issueListLen104; issueIndex104++) {
    var issueData104 = issueList104[issueIndex104];
    var issueAdded__soy105 = opt_data.addedIssues && opt_data.addedIssues[issueData104.key];
    output += '<tr' + ((issueAdded__soy105) ? ' class="ghx-added" title="' + soy.$$escapeHtml("Issue added to sprint after start time") + '"' : '') + '><td class="ghx-nowrap"><a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(issueData104.key) + '">' + soy.$$escapeHtml(issueData104.key) + '</a>' + ((issueAdded__soy105) ? ' *' : '') + '</td><td>' + soy.$$escapeHtml(issueData104.summary) + '</td><td class="ghx-nowrap">' + ((issueData104.typeName) ? '<img src="' + soy.$$escapeHtml(issueData104.typeUrl) + '" />' + soy.$$escapeHtml(issueData104.typeName) : soy.$$escapeHtml("None")) + '</td><td class="ghx-nowrap">' + ((issueData104.priorityName) ? '<img src="' + soy.$$escapeHtml(issueData104.priorityUrl) + '" />' + soy.$$escapeHtml(issueData104.priorityName) : soy.$$escapeHtml("None")) + '</td><td class="ghx-nowrap">' + GH.tpl.status.renderFull({status: issueData104.status}) + '</td>' + ((opt_data.showEpicColumn) ? '<td class="ghx-nowrap">' + ((issueData104.epic) ? aui.labels.label({extraClasses: [issueData104.epicColor], text: '' + GH.tpl.epic.getEpicNameString({epicLabel: issueData104.epicLabel, epicKey: issueData104.epic}), url: GH.Ajax.CONTEXT_PATH + '/browse/' + issueData104.epic, extraAttributes: {title: issueData104.epic}}) : '') + '</td>' : '');
    var tooltip__soy160 = issueData104.estimateStatistic && issueData104.currentEstimateStatistic && issueData104.estimateStatistic.statFieldValue.text != issueData104.currentEstimateStatistic.statFieldValue.text ? AJS.format("Estimate modified from {0} to {1}",issueData104.estimateStatistic.statFieldValue.text,issueData104.currentEstimateStatistic.statFieldValue.text) : '';
    output += '<td class="ghx-right ghx-minimal ghx-nowrap" title="' + soy.$$escapeHtml(tooltip__soy160) + '">' + ((issueData104.estimateStatistic && issueData104.estimateStatistic.statFieldValue && issueData104.estimateStatistic.statFieldValue.text) ? (issueData104.currentEstimateStatistic && issueData104.estimateStatistic.statFieldValue.text != issueData104.currentEstimateStatistic.statFieldValue.text) ? GH.tpl.reports.issueTable.renderChangedEstimateIndicator({initialEstimate: issueData104.estimateStatistic.statFieldValue.text, currentEstimate: issueData104.currentEstimateStatistic.statFieldValue.text}) : soy.$$escapeHtml(issueData104.estimateStatistic.statFieldValue.text) : '-') + '</td></tr>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.issueTable.renderIssueTableRows.soyTemplateName = 'GH.tpl.reports.issueTable.renderIssueTableRows';
}


GH.tpl.reports.issueTable.renderChangedEstimateIndicator = function(opt_data, opt_ignored) {
  return '<span class="ghx-previous-value  ' + GH.tpl.reports.issueTable.returnEmptyModeClassForDashChar({value: opt_data.initialEstimate}) + '">' + soy.$$escapeHtml(opt_data.initialEstimate) + ((opt_data.initialEstimate == '-') ? ' ' : '') + ' &#8594; </span><span class="ghx-current-value ' + GH.tpl.reports.issueTable.returnEmptyModeClassForDashChar({value: opt_data.currentEstimate}) + '">' + soy.$$escapeHtml(opt_data.currentEstimate) + '</span>';
};
if (goog.DEBUG) {
  GH.tpl.reports.issueTable.renderChangedEstimateIndicator.soyTemplateName = 'GH.tpl.reports.issueTable.renderChangedEstimateIndicator';
}


GH.tpl.reports.issueTable.returnEmptyModeClassForDashChar = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml(opt_data.value == '-' ? 'empty-mode' : '');
};
if (goog.DEBUG) {
  GH.tpl.reports.issueTable.returnEmptyModeClassForDashChar.soyTemplateName = 'GH.tpl.reports.issueTable.returnEmptyModeClassForDashChar';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/ScopeBurndownBySprint.soy' */
// This file was automatically generated from ScopeBurndownBySprint.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.reports.scopeBurndownBySprint.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.reports == 'undefined') { GH.tpl.reports = {}; }
if (typeof GH.tpl.reports.scopeBurndownBySprint == 'undefined') { GH.tpl.reports.scopeBurndownBySprint = {}; }


GH.tpl.reports.scopeBurndownBySprint.renderSprintScopeDialogContent = function(opt_data, opt_ignored) {
  var output = '';
  var statistic__soy3 = opt_data.estimationStatistic.name;
  output += '<div class="ghx-inline-dialog-container">' + ((opt_data.url != '') ? '<a href="' + soy.$$escapeHtml(opt_data.url) + '">' : '') + '<strong>' + soy.$$escapeHtml(opt_data.sprint.sprintName) + '</strong>' + ((opt_data.url != '') ? '</a>' : '') + ((opt_data.sprint.formattedStartDate) ? '<p class="ghx-sprint-dialog-dates">' + soy.$$escapeHtml(opt_data.sprint.formattedStartDate) + ' - ' + soy.$$escapeHtml(opt_data.sprint.formattedEndDate) + '</p>' : '') + '<table class="ghx-stat-table">' + GH.tpl.reports.scopeBurndownBySprint.renderDialogWorkEstimate({estimateLabel: "at start of sprint", estimateValue: opt_data.sprint.formattedWorkAtStart, estimationStatistic: statistic__soy3}) + ((opt_data.sprint.workAdded) ? GH.tpl.reports.scopeBurndownBySprint.renderDialogWorkEstimate({estimateLabel: opt_data.labels.workAdded, estimateValue: opt_data.sprint.formattedWorkAdded, estimationStatistic: statistic__soy3}) : '') + ((opt_data.sprint.workRemoved) ? GH.tpl.reports.scopeBurndownBySprint.renderDialogWorkEstimate({estimateLabel: opt_data.labels.workRemoved, estimateValue: opt_data.sprint.formattedWorkRemoved, estimationStatistic: statistic__soy3}) : '') + ((opt_data.sprint.workCompleted) ? GH.tpl.reports.scopeBurndownBySprint.renderDialogWorkEstimate({estimateLabel: '' + soy.$$escapeHtml("completed") + ((opt_data.sprint.isForecast) ? ' (' + soy.$$escapeHtml("forecast") + ')' : ''), estimateValue: opt_data.sprint.formattedWorkCompleted, estimationStatistic: statistic__soy3}) : '') + GH.tpl.reports.scopeBurndownBySprint.renderDialogWorkEstimate({estimateLabel: '' + soy.$$escapeHtml("remaining") + ((opt_data.sprint.isForecast) ? ' (' + soy.$$escapeHtml("forecast") + ')' : ''), estimateValue: opt_data.sprint.formattedWorkRemaining, estimationStatistic: statistic__soy3}) + '</table></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.scopeBurndownBySprint.renderSprintScopeDialogContent.soyTemplateName = 'GH.tpl.reports.scopeBurndownBySprint.renderSprintScopeDialogContent';
}


GH.tpl.reports.scopeBurndownBySprint.renderDialogWorkEstimate = function(opt_data, opt_ignored) {
  return '<tr><td class="ghx-stat-table-number"><span title="' + soy.$$escapeHtml(opt_data.estimationStatistic) + '">' + soy.$$escapeHtml(opt_data.estimateValue) + '</span></td><th class="ghx-stat-table-label">' + soy.$$escapeHtml(opt_data.estimateLabel) + '</th></tr>';
};
if (goog.DEBUG) {
  GH.tpl.reports.scopeBurndownBySprint.renderDialogWorkEstimate.soyTemplateName = 'GH.tpl.reports.scopeBurndownBySprint.renderDialogWorkEstimate';
}


GH.tpl.reports.scopeBurndownBySprint.renderIssueList = function(opt_data, opt_ignored) {
  var output = '' + ((opt_data.sprints.length > 0) ? '<h3>' + soy.$$escapeHtml("Completed Issues") + '</h3>' : '');
  var sprintList77 = opt_data.sprints;
  var sprintListLen77 = sprintList77.length;
  for (var sprintIndex77 = 0; sprintIndex77 < sprintListLen77; sprintIndex77++) {
    var sprintData77 = sprintList77[sprintIndex77];
    output += GH.tpl.reports.scopeBurndownBySprint.renderIssueTable({listName: sprintData77.sprintName, sprint: sprintData77, issues: sprintData77.issues, issueNavLink: sprintData77.issueNavUrl, estimationStatistic: opt_data.estimationStatistic, estimationValue: sprintData77.formatedWorkCompleted, showEpicColumn: opt_data.showEpicColumn, emptyMessage: opt_data.emptySprintMessage});
  }
  output += (opt_data.contents.incompleteIssues.length > 0) ? '<h3>' + soy.$$escapeHtml("Incomplete Issues") + '</h3>' + GH.tpl.reports.scopeBurndownBySprint.renderIssueTable({issues: opt_data.contents.incompleteIssues, issueNavLink: opt_data.contents.incompleteIssuesUrl, estimationStatistic: opt_data.estimationStatistic, estimationValue: opt_data.contents.incompleteIssuesSum.text, showEpicColumn: opt_data.showEpicColumn}) : '';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.scopeBurndownBySprint.renderIssueList.soyTemplateName = 'GH.tpl.reports.scopeBurndownBySprint.renderIssueList';
}


GH.tpl.reports.scopeBurndownBySprint.renderIssueTable = function(opt_data, opt_ignored) {
  return '<div class="ghx-scope-burndown-table-section">' + GH.tpl.reports.issueTable.renderIssueTable(opt_data) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.scopeBurndownBySprint.renderIssueTable.soyTemplateName = 'GH.tpl.reports.scopeBurndownBySprint.renderIssueTable';
}


GH.tpl.reports.scopeBurndownBySprint.renderInfographicNoSprints = function(opt_data, opt_ignored) {
  return '<img class="ghx-infographic-trophy" src="' + soy.$$escapeHtml(opt_data.imageURL) + '"><p class="ghx-work-done-message">' + soy.$$escapeHtml(AJS.format("{0,choice,0#All issues are done!|1\x3c All estimated issues are done!}",opt_data.unestimatedIssuesCount)) + ((opt_data.unestimatedIssuesCount) ? ' ' + soy.$$escapeHtml(AJS.format("{0,choice,1#There is 1 unestimated issue.|1\x3cThere are {0} unestimated issues.}",opt_data.unestimatedIssuesCount)) : '') + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.reports.scopeBurndownBySprint.renderInfographicNoSprints.soyTemplateName = 'GH.tpl.reports.scopeBurndownBySprint.renderInfographicNoSprints';
}


GH.tpl.reports.scopeBurndownBySprint.renderInfographicContent = function(opt_data, opt_ignored) {
  return '<h2><span class="aui-icon aui-icon-small aui-iconfont-success"></span> ' + soy.$$escapeHtml(AJS.format("{0,choice,0#0 sprints|1#1 sprint|1\x3c{0,number} sprints} remaining",opt_data.sprintsRemaining)) + '</h2><p>' + soy.$$escapeHtml(opt_data.description) + '</p><table class="ghx-stat-table"><tr><td class="ghx-stat-table-number"><span title="' + soy.$$escapeHtml(opt_data.estimationStatistic) + '">' + soy.$$escapeHtml(opt_data.velocity) + '</span></td><td class="ghx-stat-table-label">' + soy.$$escapeHtml("Velocity per sprint") + '</td></tr><tr><td class="ghx-stat-table-number"><span title="' + soy.$$escapeHtml(opt_data.estimationStatistic) + '">' + soy.$$escapeHtml(opt_data.workRemaining) + '</span></td><td class="ghx-stat-table-label">' + soy.$$escapeHtml("remaining") + '</td></tr></table><p>' + GH.tpl.reports.scopeBurndownBySprint.renderHelpLink(opt_data) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.reports.scopeBurndownBySprint.renderInfographicContent.soyTemplateName = 'GH.tpl.reports.scopeBurndownBySprint.renderInfographicContent';
}


GH.tpl.reports.scopeBurndownBySprint.renderInfographicHelpMessage = function(opt_data, opt_ignored) {
  return '<h2>' + soy.$$escapeHtml(opt_data.title) + '</h2><p>' + soy.$$escapeHtml(opt_data.description) + '</p><p>' + GH.tpl.reports.scopeBurndownBySprint.renderHelpLink(opt_data) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.reports.scopeBurndownBySprint.renderInfographicHelpMessage.soyTemplateName = 'GH.tpl.reports.scopeBurndownBySprint.renderInfographicHelpMessage';
}


GH.tpl.reports.scopeBurndownBySprint.renderHelpLink = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(opt_data.helpUrl) + '" target="_blank">' + soy.$$escapeHtml("Learn more") + '</a>';
};
if (goog.DEBUG) {
  GH.tpl.reports.scopeBurndownBySprint.renderHelpLink.soyTemplateName = 'GH.tpl.reports.scopeBurndownBySprint.renderHelpLink';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/ScopeBurndownBySprintChartDialog.js' */
!function(e,t,i,r,n){function o(e,t){var i=t.formatter.formatFull;return e.startTime&&e.endTime&&(e.formattedStartDate=moment(e.startTime).format(m),e.formattedEndDate=moment(e.endTime).format(m)),e.formattedWorkAtStart=i(e.workAtStart),e.formattedWorkAdded=i(e.workAdded),e.formattedWorkRemoved=i(e.workRemoved),e.formattedWorkCompleted=i(e.workCompleted),e.formattedWorkRemaining=i(e.workRemaining),e}function a(e,t,i){var r="";return e.isForecast&&!e.isActive||"original"===e.sprintId||(r=n.buildBareRestUrl("secure/RapidBoard.jspa?rapidView="+e.rapidViewId+"&view=reporting&chart=sprintRetrospective&sprint="+e.sprintId)),GH.tpl.reports.scopeBurndownBySprint.renderSprintScopeDialogContent({sprint:o(e,t),estimationStatistic:t,url:r,labels:i})}function d(t,i,n,o){if(s()&&i.sprintId===f)l.hide();else{var d=e.select(t);d.classed("active",!0),l=r.create(c,t,function(e,t,r){e.closest(".aui-inline-dialog").addClass("ghx-inline-dialog"),e.html(a(i,n,o)),r()},{addActiveClass:!1,container:p,fadeTime:0,noBind:!0,cacheContent:!1,hideDelay:6e4,persistent:!0,offsetX:8,hideCallback:function(){d.classed("active",!1)}}),f=i.sprintId,l.show()}return l}function s(){return!!l&&l.is(":visible")}var l,c="scope-by-sprint-dlg",p="#ghx-report-scrollarea > .aui-page-panel",m="LL",f=null;i.preventCloseOnClick(c),GH.Reports.ScopeBurndownBySprintChartDialog={show:d,hide:function(){l&&(l.hide(),f=null)},isVisible:s}}(d3,GH.Reports,GH.InlineDialog,GH.SideInlineDialog,GH.Ajax);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/ScopeBurndownBySprintChart.js' */
!function(t,e,i,n,r,s){"use strict";function a(t){return t.workRemaining-o(t)}function o(t){var e=Math.max(0,t.workAdded-t.workRemoved);return Math.min(t.workRemaining,e)}function l(t){return t.isForecast&&!t.isActive}function c(){var r=function(){return i.floatingBarChart().baselineAccessor(function(t){return t.baseline}).xAccessor(function(t){return t.sprintId}).yAccessor(function(t){return t.baseline+t.workCompleted+a(t)+o(t)}).maxBarWidth(h).extend({emptyBarHeight:i.prop(u),labelAccessor:function(){return function(t){return t.isActive?AJS.format("{0} (active)",t.sprintName):t.sprintName}},isCollapsedBar:function(){return function(t){return!!t.collapsed}},isEmptyBar:function(){var t=this.baselineAccessor(),e=this.yAccessor(),i=this.isCollapsedBar();return function(n){return!i(n)&&e(n)===t(n)}},barHeight:function(){var t=this.baselineAccessor(),e=this.yAccessor(),i=this.yScale(),n=this.isEmptyBar(),r=this.emptyBarHeight();return function(s){return n(s)?r:i(t(s))-i(e(s))}},data:function(){return C.sprints()}}).update(function(t){var e=this.x(),i=this.y(),n=this.isEmptyBar(),r=this.emptyBarHeight();t.selection.attr("transform",function(t,s){var a=i(t,s);return n(t)&&(a-=r),"translate("+e(t,s)+","+a+")"})})},c=function(){var t=i.stack().classPrefix("ghx").showLabels(!0).extend({barWidth:i.prop(),labelAccessor:function(){return function(t){return t[2]||""}},labelFormatter:i.prop()});return t.data.get(function(t){if(!t)return[];var e=o(t),i=a(t),n=this.labelFormatter(),r=[];return r.push([e+i,t.workCompleted,t.workCompleted?"-"+n(t.workCompleted):""]),r.push([e,i,n(i)]),r.push([0,e,e?"+"+n(e):""]),r}),t},f=function(){return i.drawable().extend(i.withDimensions()).enter(function(t){var e=t.selection;e.append("rect").classed("ghx-series-0",!0),e.append("text").classed("ghx-series-label-0 bar-label",!0),e.append("polyline").classed("ghx-bar-underlined",!0)}).update(function(t){var e=this.height(),i=this.width(),n=t.selection;n.selectAll("rect").attr("height",e).attr("width",i),n.selectAll("text").attr("x",i/2).attr("y",e/2).attr("dy","0.45em").text(0),n.selectAll("polyline").attr("points","0,"+e+" "+i+","+e)})},g=function(){var t=e.scale.linear().domain([d,h]).range([3,5]);return i.circlePlot().extend({yRange:function(){var t=this.height();return[0,t]},radiusAccessor:function(){var e=this.width();return function(){return t(e)}}}).elementClass("ghx-ellipsis").data([[0,0],[1,0],[2,0]]).xDomain([-1,3]).yDomain([-1,1])},x=function(){return i.drawable().extend(i.withDimensions()).elementClass("ghx-collapsed-sprint").extend({ellipsisHeight:function(){return.5*this.width()}}).enter(function(t){t.selection.append("text").attr({"text-anchor":"middle",y:-this.ellipsisHeight(),dy:"-.4em"})}).update(function(t){var n=this.width();t.selection.select("text").each(function(t){var r=e.select(this).text(AJS.format("{0,choice,0#0 sprints|1#1 sprint|1\u003c{0,number} sprints} not shown",t));i.utils.wrapText(r,n,!0)}),g().height(-this.ellipsisHeight()).width(n)(t.selection)})},w=function(){return r().elementTag("g").showLabels(!0).update(function(t){var i=this.barWidth(),n=this.barHeight(),r=this.isEmptyBar(),s=this.isCollapsedBar(),a=C.data().estimationStatistic.formatter.formatCompact,o=this.showLabels();t.selection.each(function(t){var l=n(t),h=s(t),d=r(t),u=e.select(this).classed("ghx-prediction",t.isForecast);c().elementClass("ghx-stack").height(l).barWidth(i).showLabels(o).labelFormatter(a).data(h||d?null:t)(u),f().elementClass("ghx-zero-value-sprint").height(l).width(i).data(d?[0]:[])(u),x().width(i).data(h?[t.collapsed]:[])(u)})})},b=i.labelledAxis().height(60).text("Sprints").orient("bottom").axisConstructor(function(){return e.svg.axis().outerTickSize(0)}),v=i.labelledAxis().width(50).orient("left").extend({text:function(){return C.data().estimationStatistic.name}}).axisConstructor(function(){var t=C.data().estimationStatistic.formatter.formatCompact;return e.svg.axis().outerTickSize(0).tickFormat(function(e){return t(Math.abs(e))}).tickValues([0])}),y=i.layerable().addLayer("grid",i.gridLines().orient("left").extend({width:function(){return C.restrictedWidth()}})).addLayer("divider",i.singular().extend(i.withDimensions()).elementTag("line").elementClass("chart-divider").update(function(t){t.selection.attr({x1:C.restrictedWidth(),x2:C.restrictedWidth(),y1:-m,y2:this.height()+m})})).addLayer("border",i.drawable().extend(i.withDimensions()).data([{from:[0,0],to:[1,0]},{from:[1,0],to:[1,1]}]).elementTag("line").update(function(t){var i=e.scale.linear().domain([0,1]).range([0,this.width()]),n=e.scale.linear().domain([0,1]).range([0,this.height()]);t.selection.each(function(t){return e.select(this).attr({x1:i(t.from[0]),y1:n(t.from[1]),x2:i(t.to[0]),y2:n(t.to[1])})})})).addLayer("sprints",w().elementClass("ghx-bar-sprint").dataFilter(function(t){return n.reject(t,l)})).addLayer("forecastSprints",w().elementClass("ghx-bar-sprint").showLabels(!1).dataFilter(function(t){return n.filter(t,function(t){return l(t)&&t.workAtStart>0})})).addLayer("dialogTargets",r().enter(function(t){s.hide(),t.selection.on("click.dialog",function(t){var e=C.data();t.rapidViewId=e.rapidViewId,s.show(this,t,e.estimationStatistic,e.labels)})}).elementClass("ghx-clickable-bar-sprint").dataFilter(function(t){return n.reject(t,l)})),C=i.component().extend(function(){var t=this.data().sprints,e=this.positions().center.width,i=e-p,n=r(),s=n.padding(),a=n.outerPadding(),o=d/(1-s),l=h/(1-s),c=Math.max(Math.min(i/t.length,l),o),u=Math.max(Math.ceil(p/c),Math.ceil((e-l*t.length)/c)),m=Math.floor((e-o*(2*a-s))/o),f=t.length+u-m+1;if(f>1){var g=t[1+f];t=t.slice(),t.splice(1,f,{sprintId:"sprints collapsed",sprintName:"",baseline:Math.min(0,g.baseline),workAtStart:0,workAdded:0,workRemoved:0,workCompleted:0,workRemaining:0,isForecast:!1,isActive:!1,collapsed:f})}var x=this.data(),w=x.getForecast(u),b=t.concat(w);c=e/(b.length+a),x.forecast.forecastError?this.restrictedWidth(c*(t.length+2*a-s)):this.restrictedWidth(c*(t.length+a-s/2)),this.sprints(b)}).extend(i.borderLayout()).extend(i.utils.defaultViewBox).center(y).north(i.withDimensions().height(25)).south(b).west(v).east(i.withDimensions().width(1)).extend({sprints:i.prop([]),restrictedWidth:i.prop(null),xDomain:function(){return n.pluck(this.sprints(),"sprintId")},yDomain:function(){var t=this.sprints(),i=n.min(n.pluck(t,"baseline")),r=e.max(t,function(t){return t.baseline+t.workCompleted+o(t)+a(t)});return[i,r]}}),k=i.singular().extend(i.withDimensions()).elementTag("div").elementClass("ghx-infographic-overlay").update(function(e){var i=C.data();i.forecast.forecastError?e.selection.html(GH.tpl.reports.scopeBurndownBySprint.renderInfographicHelpMessage({title:"No forecast available yet",description:i.forecast.forecastError,helpUrl:i.labels.helpUrl})):0===i.forecast.sprintsRemaining?e.selection.html(GH.tpl.reports.scopeBurndownBySprint.renderInfographicNoSprints({unestimatedIssuesCount:i.forecast.remainingEstimatableIssueCount,imageURL:AJS.contextPath()+"/download/resources/"+t.getPluginKey()+"/images/trophy.svg"})):e.selection.html(GH.tpl.reports.scopeBurndownBySprint.renderInfographicContent({sprintsRemaining:i.forecast.sprintsRemaining,velocity:i.estimationStatistic.formatter.formatFull(i.forecast.velocity),workRemaining:i.estimationStatistic.formatter.formatFull(i.forecast.workRemaining),description:i.labels.forecastDescription(i.forecast.sprintsRemaining),estimationStatistic:i.estimationStatistic.name,helpUrl:i.labels.helpUrl}));var n=C.height(),r=C.width(),s=C.positions(),a=s.west.width+C.restrictedWidth(),o=r-a,l=s.center.height,c=e.selection.node().offsetHeight,h=e.selection.node().offsetWidth,d=a+o/2,u=s.north.height+l/2;e.selection.style({left:d/r*100+"%",top:u/n*100+"%","margin-left":-h/2+"px","margin-top":-c/2+"px"})}),A=i.component().extend(i.withData()).extend(function(){var t=this.selection(),e=i.singular().elementTag("svg").elementClass("ghx-svg-chart");e(t),C.parent(this)(e.elements()),k.parent(this)(t)});return A}var h=80,d=40,u=25,p=320,m=20;GH.Reports.ScopeBurndownBySprintChart=c}(GH.Util,d3,c3,_,GH.NumberFormat,GH.Reports.ScopeBurndownBySprintChartDialog);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/ScopeBurndownBySprintChartHowTo.js' */
!function(t,n,e,r){function c(){var c=function(){return n.floatingBarChart().elementClass("ghx-bar-sprint").elementTag("g").yAccessor(function(t){return t[0]+e.reduce(t[1],function(t,n){return t+n},0)}).yDomain([-1,9]).update(function(e){var r=this.barWidth(),c=this.barHeight();e.selection.each(function(e){n.stack().classPrefix("ghx").height(c(e)).extend({barWidth:function(){return r},data:function(){var t=e[1];return[[t[0]+t[1],t[2]],[t[0],t[1]],[0,t[0]]]}})(t.select(this))})})},a=c().data([[0,[0,8,0]],[0,[0,6,2]],[0,[0,4,2]],[0,[0,2,2]],[0,[0,0,2]]]),i=c().data([[2,[0,6,0]],[0,[2,4.5,1.5]],[0,[0,5,1.5]],[2,[0,1.5,1.5]],[2,[0,0,1.5]]]),o=c().data([[0,[0,6,1.5]],[0,[0,4.5,1.5]],[0,[0,3,1.5]],[0,[0,1.5,1.5]],[0,[0,0,1.5]]]).update(function(t){t.selection.classed("ghx-prediction",function(t,n){return n>=2})});return n.component("scopeBurndownBySprintChartHowTo").extend(r.multipleCharts()).extend(function(){this.selection().selectAll(this.chartSelector()).classed("ghx-scope-burndown-chart-svg",!0)}).charts([a,i,o])}r.ScopeBurndownBySprintChartHowTo=c}(d3,c3,_,GH.Reports);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/ScopeBurndownBySprintChartLegend.js' */
!function(t,e){"use strict";function n(){function n(t,e,n){return t.append("g").classed(e,!0).append("rect").attr("width","100%").attr("height","100%").classed(n,!0)}function r(t,e,n,r){var s=t.append("g").classed(e,!0);return s.append("rect").classed(n,!0).attr({y:0,width:"100%",height:"50%"}),s.append("rect").classed(r,!0).attr({y:"50%",width:"100%",height:"50%"}),s}var s=function(t){n(t,"ghx-bar-sprint","ghx-series-0")},i=function(t){n(t,"ghx-bar-sprint","ghx-series-1")},a=function(t){n(t,"ghx-bar-sprint","ghx-series-2")},c=function(t){r(t,"ghx-prediction","ghx-series-0","ghx-series-1")};return e.component("scopeBurndownBySprintChartLegend").extend(t()).charts([s,c,i,a])}GH.Reports.ScopeBurndownBySprintChartLegend=n}(GH.Reports.multipleCharts,c3);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/burnup/BurnupChart.js' */
define("jira-agile/rapid/ui/chart/v2/burnup/burnup-chart",["require"],function(t){"use strict";function e(){}var n,r,a=t("underscore"),i=t("jira-agile/d3"),o=t("jira-agile/rapid/global-events");return o.on("pre-initialization",function(){n=c3,r=GH.FlotChartUtils}),e.prototype={hide:function(t){GH.Reports.BurnupChartDialog.hide(),t.html("")},show:function(t,e){e.html("");var r=GH.Reports.BurnupChartScrubber();e=e.append("svg").attr("height",parseInt(e.style("height"))).attr("width",parseInt(e.style("width")));var o=[t.start,t.end],c=[i.min(t.scope.concat(t.work),function(t){return t.value}),i.max([{value:8}].concat(t.scope.concat(t.work)),function(t){return t.value})],s=n.component().extend(function(){r.enableScrubber(),GH.Reports.BurnupChartDialog.hide()}).extend(n.borderLayout()).extend(n.utils.defaultViewBox).extend({xDomain:function(){var t=o;return a.each(t,function(t){n.checkIsNumber(t)}),t},yDomain:function(){var t=c;return a.each(t,function(t){n.checkIsNumber(t)}),t},clusters:n.prop()}).xScaleConstructor(i.time.scale).yScaleConstructor(i.scale.linear),u=n.labelledAxis().axisConstructor(function(){return i.svg.axis().tickFormat(function(e){return t.formatShortDate(e)})}).extend(function(){this.selection().selectAll("g.tick").filter(function(){return this.getAttribute("transform").indexOf("translate(-")!==-1}).remove()}).height(50).text("Time").orient("bottom"),l=this.calculateYTicks(c[1],t.statisticField),d=n.labelledAxis().axisConstructor(function(){return i.svg.axis().tickValues(l.tickValues).tickFormat(t.formatStatistic).ticks(8)}).width(60).text(t.statisticField.name).orient("left"),h=n.fillWithRect().elementClass("ghx-dragging"),p=this.buildGuideline(t),f=n.component().extend(n.interactive().domContext(AJS.$("#ghx-chart-group")).region(h)).extend(n.layerable());t.sprintCompleted||f.addLayer("today-line",n.linePlot().extend({data:function(){return[[t.now,c[0]],[t.now,c[1]]]}}).elementClass("today-line")).addLayer("today-line-label",n.label().extend({width:function(){return 2*s.xScale()(t.now)},height:function(){return s.yScale()(c[1])},orient:function(){return"bottom"},text:function(){return "Today"}})),f.extend(r).addLayer("grid",n.gridLines().orient("left")).addLayer("non-work-days",n.areaPlot().extend({data:function(){return s.data().nonWorkPeriods.map(function(t){return[[t.start,c[0]],[t.start,c[1]],[t.end,c[1]],[t.end,c[0]]]}).reduce(function(t,e){return t.concat(e)},[])}}).elementClass("non-working-days")).addLayer("guideline",n.linePlot().extend({data:function(){return p}}).elementClass("guide-line")).addLayer("scope-projection",n.linePlot().extend({data:function(){var e=s.data().scope[t.scope.length-1];return[[e.timestamp,e.value],[t.end,e.value]]}}).elementClass("scope-projection-line")).addLayer("scope",this.steppedLinePlot().extend({data:function(){return s.data().scope.map(function(t){return[t.timestamp,t.value]})}}).elementClass("scope-line")).addLayer("work",this.steppedLinePlot().extend({data:function(){return s.data().work.map(function(t){return[t.timestamp,t.value]})}}).elementClass("work-line")).addLayer("filler",h).addLayer("scope-marker",n.circlePlot().xAccessor(function(t){return t.timestamp}).yAccessor(function(t){return t.value}).extend({data:function(){return s.data().scope.slice(1,-1)}}).enter(function(e){e.selection.on("click.dialog",function(e){GH.Reports.BurnupChartDialog.show(this,t,e),r.hideScrubber()})}).elementClass("scope-line-marker")).addLayer("work-marker",n.circlePlot().xAccessor(function(t){return t.timestamp}).yAccessor(function(t){return t.value}).extend({data:function(){return s.data().work.slice(1,-1)}}).enter(function(e){e.selection.on("click.dialog",function(e){GH.Reports.BurnupChartDialog.show(this,t,e),r.hideScrubber()})}).elementClass("work-line-marker")),s=s.center(f).north(n.withDimensions().height(20)).south(u).east(n.withDimensions().width(40)).west(d),s.data(t),s(e)},buildGuideline:function(t){var e=[[t.start,0]],n=t.scope[t.scope.length-1].value,r=t.end-t.start;t.nonWorkPeriods.forEach(function(t){r-=t.end-t.start});var a=0;return t.nonWorkPeriods.forEach(function(i){var o=i.start-t.start;o-=a;var c=Math.min(o/r,1);e.push([i.start,c*n]),e.push([i.end,c*n]),a+=i.end-i.start}),e.push([t.end,n]),e},steppedLinePlot:function(){return n.component("steppedlinePlot").extend(n.linePlot()).update(function(t){var e=this.lineConstructor()().x(this.x()).y(this.y());e.interpolate("step-after"),t.selection.attr("d",e(this.data())).attr("stroke","black").attr("fill","none")})},calculateYTicks:function(t,e){var n,a=r.calculateYAxis(t,e),i=a.tickSize||a.minTickSize;if(i){n=[];for(var o=0;o<=t;o+=i)n.push(o)}return{tickValues:n}}},e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/burnup/BurnupChartLegend.js' */
!function(n,e){"use strict";function t(){function t(n,e,t){return n.append("g").classed(e,!0).append("line").attr("stroke-linecap","round").attr("x1","0").attr("y1","20").attr("x2","20").attr("y2","20").attr("transform","translate(-10,3), rotate(-45)").classed(t,!0)}var r=function(n){t(n,"ghx-burnup-line-legend","completed-work")},u=function(n){t(n,"ghx-burnup-line-legend","guideline")},o=function(n){t(n,"ghx-burnup-line-legend","scope")},a=function(n){t(n,"ghx-burnup-line-legend","scope-projection")};return e.component("sprintBurnupChartLegend").extend(n()).charts([o,a,r,u])}GH.Reports.BurnupChartLegend=t}(GH.Reports.multipleCharts,c3);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/burnup/BurnupTransformer.js' */
!function(e,t,n,r,a,s,i,u,o,d,p){"use strict";function c(e){var n=m(e),r=S(e,n);return e.chartData={now:e.now,start:e.startTime,startKeys:r.startKeys,end:n,sprintCompleted:!!e.completeTime,endKeys:r.endKeys,nonWorkPeriods:x(e.workRateData),scope:r.scope,work:r.done,statisticField:e.statisticField,rapidViewId:e.rapidViewId,estimatedIssueEvents:r.scope.filter(function(e){return e.value>0}).length,issueToSummary:e.issueToSummary},e.chartData.formatDate=function(e){return t.utc(e).format("lll")},e.chartData.formatShortDate=function(n){return t.duration(t.utc(e.chartData.end).diff(e.chartData.start)).years()>0?t.utc(n).format("MMM YYYY"):t.utc(n).format("MMM D")},e.chartData.formatStatistic=function(t){return p.renderStatisticText(t,!1,e.chartData.statisticField.renderer)},e.chartData.formatEventType=function(e){switch(e){case"estimate update":return "Estimate updated";case"issue done":return "Issue completed";case"issue not done":return "Issue re-opened";case"issue removed":return "Removed from sprint";case"issue added":return "Added to sprint";case"start event":return "Sprint Started";case"end event":return "Sprint Finished";default:return e}},e}function m(e){return e.completeTime?e.completeTime:e.now>e.endTime?e.now:e.endTime}function f(e,t){var n=[],r=[];return e.forEach(function(e){var a=t[e.key];a||(a={key:e.key,prevEstimate:0,estimate:0,inSprint:!1,done:!1},t[e.key]=a);var s=!1,i=!1;switch(e.type){case"estimate update":a.estimate!==e.newEstimate&&(a.prevEstimate=a.estimate,a.estimate=e.newEstimate,s=a.inSprint&&!a.isExcluded,i=a.inSprint&&!a.isExcluded&&a.done);break;case"issue done":a.done||(a.done=!0,i=a.inSprint&&!a.isExcluded);break;case"issue not done":a.done&&(a.done=!1,a.isExcluded?(e.isInclusion=!0,a.isExcluded=!1,s=a.inSprint):i=a.inSprint);break;case"issue removed":a.inSprint&&(a.inSprint=!1,s=!a.isExcluded,i=!a.isExcluded&&a.done);break;case"issue added":a.inSprint||(a.inSprint=!0,s=!0,i=a.done)}s&&n.push(v("scope",e.timestamp,y(t,!1),e,a)),i&&r.push(v("done",e.timestamp,y(t,!0),e,a))}),{scope:n,done:r}}function h(e,t,n){return v(e,t,n,{type:"start event"},{})}function l(e,t,n){return v(e,t,n,{type:"end event"},{})}function v(e,t,n,r,a){r=r||{},a=a||{};var s=0,i=0;return"issue removed"===r.type?(s=0,i=a.estimate):"issue added"===r.type?(s=a.estimate,i=0):"issue not done"===r.type?r.isInclusion?(s=a.estimate,i=0):(s=0,i=a.estimate):(s=a.estimate,i=a.prevEstimate),{timestamp:t,value:n,change:{type:r.type,line:e,key:a.key,fromValue:i,toValue:s}}}function y(e,t){var n=0;for(var r in e)if(e.hasOwnProperty(r)){var a=e[r];a.inSprint&&!a.isExcluded&&(t&&a.done||!t)&&(n+=a.estimate)}return n}function S(e,t){var n=g(e.changes).sort(function(e,t){return e.timestamp>t.timestamp?1:e.timestamp===t.timestamp?0:-1}),r=parseInt(e.startTime),a=e.now>t?t:e.now,s={};f(n.filter(function(e){return e.timestamp<=r}),s);for(var i in s)if(s.hasOwnProperty(i)){var u=s[i];u.done&&(u.isExcluded=!0)}var o=k(s),d=[h("scope",r,y(s,!1))],p=[h("done",r,0,"start event")],c=f(n.filter(function(e){return e.timestamp>r&&e.timestamp<=a}),s),m=k(s);return d=d.concat(c.scope),p=p.concat(c.done),d.push(l("scope",a,d[d.length-1].value)),p.push(l("done",a,p[p.length-1].value)),{scope:d,done:p,startKeys:o,endKeys:m}}function k(e){return Object.keys(e).filter(function(t){var n=e[t];return n.inSprint&&!n.isExcluded}).sort(w)}function w(e,t){if(e===t)return 0;var n=/(\w+)-(\d+)/,r=n.exec(e);if(!r)return-1;var a=n.exec(t);if(!a)return 1;var s=r[1],i=a[1];if(s!==i)return s>i?1:-1;var u=parseInt(r[2],10),o=parseInt(a[2],10);return u===o?0:u>o?1:-1}function g(e){var t=[],n=function(e){e.column&&(e.column.notDone?t.push({type:"issue not done",key:e.key,timestamp:parseInt(r)}):e.column.notDone||t.push({type:"issue done",key:e.key,timestamp:parseInt(r)})),e.statC&&e.statC.newValue&&t.push({type:"estimate update",key:e.key,timestamp:parseInt(r),newEstimate:e.statC.newValue>0?e.statC.newValue:0}),e.added===!1&&t.push({type:"issue removed",key:e.key,timestamp:parseInt(r)}),e.added===!0&&t.push({type:"issue added",key:e.key,timestamp:parseInt(r)})};for(var r in e)e.hasOwnProperty(r)&&e[r].forEach(n);return t}function x(e){var t=[];return e.rates.forEach(function(e){e.rate<1&&t.push({start:e.start,end:e.end})}),t}var E={getBurnupModelFromScopeBurndownModel:c};GH.Reports=GH.Reports||{},GH.Reports.SprintBurnupTransformer=E}(_,moment,AJS.$,d3,GH.Ajax,GH.RapidViewConfig,GH.NumberFormat,GH.TimeFormat,GH.Util,GH.UrlFormat,GH.ChartUtils);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/controlchart/ControlChart.js' */
GH.Reports=GH.Reports||{},GH.Reports.controlChart=function(){"use strict";var e=c3.component().extend(function(){this.clusters(e.data().getClusteredIssueSeries(20,this.xScale(),this.yScale())),e.data().issues.length>0?o.enableScrubber():o.disableScrubber(),GH.Reports.ControlChartDialog.hide()}).extend(c3.borderLayout()).extend(c3.utils.defaultViewBox).extend({xDomain:function(){var t=e.data().bounds.x;return _.each(t,function(e){c3.checkIsNumber(e)}),t},yDomain:function(){var t=e.data().bounds.y;return _.each(t,function(e){c3.checkIsNumber(e)}),t},clusters:c3.prop()}).xScaleConstructor(d3.time.scale).yScaleConstructor(function(){return e.data().bounds.y[1]<30?d3.scale.linear():d3.scale.pow().exponent(1/3)}),t=c3.labelledAxis().axisConstructor(function(){return d3.svg.axis().tickFormat(function(t){var n=moment(e.data().bounds.x[1]).diff(e.data().bounds.x[0],"days");return moment(t).format(n<2?"LLL":"LL")})}).extend(function(){this.selection().selectAll("g.tick").filter(function(){return this.getAttribute("transform").indexOf("translate(-")!==-1}).remove()}).height(50).text("Issue Transition Date").orient("bottom"),n=c3.labelledAxis().axisConstructor(function(){return d3.svg.axis().tickFormat(function(e){return GH.NumberFormat.format(e)})}).width(60).text("Elapsed time (days)").orient("left"),r=function(){return c3.circlePlot().xAccessor(function(e){return e.point[0]}).yAccessor(function(e){return e.point[1]})},a=d3.scale.log().domain([2,100]).range([6,15]).clamp(!0),i=c3.fillWithRect().elementClass("ghx-dragging"),o=GH.Reports.ControlChartScrubber(),s=c3.component().extend(c3.interactive().domContext(AJS.$("#ghx-chart-group")).region(i)).extend(c3.layerable()).extend(o).clipped(!0).addLayer("standard-deviation",c3.deviationPlot().extend({data:function(){return e.data().series.standardDeviationArea}}).elementClass("standard-deviation")).addLayer("grid",c3.gridLines().orient("left")).addLayer("mean",c3.linePlot().extend({data:function(){return e.data().series.meanLine}}).elementClass("control-chart-mean")).addLayer("aggregate-mean",c3.linePlot().extend({data:function(){return e.data().series.rollingAverageLine}}).elementClass("control-chart-aggregate-mean")).addLayer("filler",i).addLayer("issues",r().extend({data:function(){return e.clusters().unclustered}}).enter(function(e){e.selection.on("click.dialog",function(e){GH.Reports.ControlChartDialog.show(this,e.issue),o.hideScrubber()})}).dataKey(function(e){return e.issue.key}).elementClass("issue")).addLayer("issue-clusters",r().extend({data:function(){return e.clusters().clustered}}).enter(function(e){e.selection.on("click.dialog",function(e){GH.Reports.ControlChartDialog.show(this,e.issues),o.hideScrubber()})}).dataKey(function(e){return e.point[0]}).elementClass("cluster").radiusAccessor(function(e){return a(e.size)}));return e.center(s).north(c3.withDimensions().height(10)).south(t).west(n)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/controlchart/ControlChartHowTo.js' */
GH.Reports=GH.Reports||{},GH.Reports.controlChartHowTo=function(){var e=_.range(8),t=c3.circlePlot().data(_.zip(e,[0,2,1,1.5,2,0,11,1.2])).xDomain([-1,8]).yDomain([-2,14]).elementClass("issue").update(function(e){e.selection.each(function(e){11===e[1]&&d3.select(this).classed("active",!0)})}),a=c3.linePlot().data(_.zip(e,[7,5,5.5,3.5,4,3,3,2])).yDomain([0,10]).elementClass("control-chart-aggregate-mean"),n=[4,6,3,4,5,4,4.5,4],o=[4,4,3.5,2,2,1.5,1,1],l=c3.layerable().xDomain([0,e.length-1]).yDomain([0,10]).addLayer("standard-deviation",c3.deviationPlot().data(_.zip(e,n,o)).elementClass("standard-deviation")).addLayer("rolling-average",c3.linePlot().data(_.zip(e,n)).elementClass("control-chart-aggregate-mean"));return c3.component("controlChartHowTo").extend(GH.Reports.multipleCharts()).extend(function(){this.selection().selectAll(this.chartSelector()).classed("ghx-control-chart-svg",!0)}).charts([t,a,l])};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/controlchart/ControlChartLegend.js' */
GH.Reports=GH.Reports||{},GH.Reports.controlChartLegend=function(){var t=[[0,0],[1,1]],e=function(t){t.append("circle").attr("cx","50%").attr("cy","50%").attr("r",4).classed("issue",!0)},a=function(t){t.append("circle").attr("cx","50%").attr("cy","50%").attr("r",9).classed("cluster",!0)},r=c3.linePlot().data(t).elementClass("control-chart-mean"),n=c3.linePlot().data(t).elementClass("control-chart-aggregate-mean"),c=function(t){t.append("rect").attr("width","100%").attr("height","100%").classed("standard-deviation",!0)};return c3.component("controlChartLegend").extend(GH.Reports.multipleCharts()).charts([e,a,r,n,c])};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/controlchart/ControlChartViewingOptionsModel.js' */
!function(){function n(){}var i=!1;n.prototype={includeNonWorkingDays:i,resetToDefaults:function(){return this.includeNonWorkingDays=i,this},fromNormalized:function(n){return"includeNonWorkingDays"in n?this.includeNonWorkingDays=n.includeNonWorkingDays:this.resetToDefaults(),this},toNormalized:function(){var n={};return this.includeNonWorkingDays&&(n.includeNonWorkingDays=this.includeNonWorkingDays),n},isDefault:function(){return this.includeNonWorkingDays===i}},GH.Reports.ControlChartViewingOptionsModel=n}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/controlchart/ControlChartRefinementsModel.js' */
!function(e){function t(){}t.prototype={available:null,selected:null,setAvailable:function(e){return this.available=e,this.fromNormalized(this.selected),this},getDefaults:function(){if(!this.available)return null;var t=e.pluck(this.available.columns,"id"),i=t.length<3?[e.last(t)]:t.slice(1,-1);return{columnIds:i,swimlaneIds:e.pluck(this.available.swimlanes,"id"),quickFilterIds:[]}},resetToDefaults:function(){return this.selected=this.getDefaults(),this},fromNormalized:function(t){t=t?e.pick(t,"columnIds","swimlaneIds","quickFilterIds"):{};var i={columnIds:"columns",swimlaneIds:"swimlanes",quickFilterIds:"quickFilters"},l=this.available;return l&&e.each(t,function(s,n){var a=e.pluck(l[i[n]],"id"),u=e.intersection(t[n],a);u.length?t[n]=u:delete t[n]}),this.selected=e.defaults(t,this.getDefaults()),this},toNormalized:function(){function t(t){e.isEqual(l[t].sort(),i[t].sort())||(s[t]=l[t])}var i=this.getDefaults(),l=this.selected,s={};return i?(t("columnIds"),t("swimlaneIds"),t("quickFilterIds"),s):e.extend(s,l)},isDefault:function(){return e.isEmpty(this.toNormalized())}},GH.Reports.ControlChartRefinementsModel=t}(_);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/controlchart/ControlChartDataService.js' */
define("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-data-service",["require"],function(e){"use strict";function t(e){var t={url:"/rapid/charts/controlchart.json",data:e};return v.get(t,"rapidChartData")}function n(e,t,n,a){var r=-1,i=0,m=[];return f.each(n,function(n){var o=e.leaveTimes[n];if(o!==t.currentTime){var s=a?e.totalTime[n]:e.workingTime[n];i+=s,m.push({name:t.columns[n].name,duration:s}),o>r&&(r=o)}}),r===-1?null:{key:e.key,summary:e.summary,endTime:r,duration:i,columns:m}}function a(e,t){var a=[];t=t||{},f.each(e.columns,function(e,n){f.contains(t.refinements.selected.columnIds,e.id)&&a.push(n)});var r=f.compact(f.map(e.issues,function(r){return n(r,e,a,t.viewingOptions.includeNonWorkingDays)}));return f.sortBy(r,"endTime")}function r(e,t,n){var a=0,r=0;f.each(t,function(t){n&&(t=n(t)),r=t-e,a+=r*r});var i=a/(t.length>0?t.length:1);return Math.sqrt(i)}function i(e,t,n,a,r){var i=new h(e,t,n,a,r);return{clustered:f.filter(i,function(e){return e.cluster}),unclustered:f.reject(i,function(e){return e.cluster})}}function m(e,t,n){var a=5,i=.2,m={rollingAverageLine:[],standardDeviationArea:[],rollingAverageWindow:0,maxStandardDeviation:0};if(!t.length)return m;var o=Math.max(a,t.length*i),s=Math.floor((o-1)/2);m.rollingAverageWindow=2*s+1;var u=f.indexOf(e,t[0]),l=t[0].endTime>n.timeFrameTimes.from?Math.max(0,u-1):u,c=f.last(t).endTime<n.timeFrameTimes.to?Math.min(e.length,u+t.length+1):u+t.length,d=e.slice(l,c);f.each(d,function(t,n){var a=Math.max(0,l+n-s),i=Math.min(e.length,l+n+s+1),o=e.slice(a,i),u=g.mean(o,F),c=u/D,d=r(u,o,F)/D;m.rollingAverageLine.push([t.endTime,c]),m.standardDeviationArea.push([t.endTime,c,d]),m.maxStandardDeviation=Math.max(m.maxStandardDeviation,c+d)});var h=f.last(m.rollingAverageLine),v=f.last(m.standardDeviationArea);return h[0]<n.timeFrameTimes.to&&(m.rollingAverageLine.push([n.timeFrameTimes.to,h[1]]),m.standardDeviationArea.push([n.timeFrameTimes.to,v[1],v[2]])),m}function o(e,t){return e/=D,[[t.timeFrameTimes.from,e],[t.timeFrameTimes.to,e]]}function s(e,t){return f.filter(e,function(e){return t.timeFrameTimes.from<=e.endTime&&e.endTime<=t.timeFrameTimes.to})}function u(e,t){return{mean:g.mean(e,F),median:g.median(e,F),min:g.min(e,F),max:g.max(e,F),rollingAverageWindow:t}}function l(e){return f.map(e,function(e){return[e.endTime,e.duration/D]})}function c(e,t,n){var a=Math.ceil(g.max(e,F)/D),r=Math.max(a,t),i=1.1*r;return{x:[n.timeFrameTimes.from,n.timeFrameTimes.to],y:[0,i]}}function d(){}var h,v,f=e("underscore"),g=e("jira-agile/d3"),T=e("jira-agile/rapid/global-events");T.on("pre-initialization",function(){h=clusterVectors,v=GH.Ajax});var D=864e5,F=function(e){return e.duration};return d._calculateRollingSeries=m,d.prototype={get:function(e,t){return t=t||{},this._getData(e,t).andThen(function(e){var n=a(e,t),r=n.length?n[0].endTime:e.currentTime;t.timeFrame=t.timeFrame.clone(),t.timeFrame.setBounds(new Date(r),new Date(e.currentTime));var d=t.timeFrame.getTimeFrameDates();t.timeFrameTimes={from:d.fromDate.getTime(),to:d.toDate.getTime()};var h=s(n,t),v=m(n,h,t),f=u(h,v.rollingAverageWindow),g=l(h);return{issues:h,series:{meanLine:o(f.mean||0,t),rollingAverageLine:v.rollingAverageLine,standardDeviationArea:v.standardDeviationArea},stats:f,bounds:c(h,v.maxStandardDeviation,t),earliestTime:r,currentTime:e.currentTime,getClusteredIssueSeries:function(e,t,n){return i(g,h,e,t,n)}}})},clearCache:function(){this._dataPromise&&(this._dataPromise=null,this._dataRequestParams=null)},_getData:function(e,n){var a={rapidViewId:e,swimlaneId:n.refinements.selected.swimlaneIds,quickFilterId:n.refinements.selected.quickFilterIds};return this._dataPromise&&"rejected"!==this._dataPromise.state()&&f.isEqual(this._dataRequestParams,a)||(this._dataRequestParams=a,this._dataPromise=t(a)),this._dataPromise}},d});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/controlchart/ControlChartController.js' */
define("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-controller",["require"],function(e){var i,t,r,a,n,o,s,l={},d=e("underscore"),c=e("jira-agile/rapid/global-events"),m=e("jira-agile/rapid/analytics-tracker"),u=e("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-view"),p=e("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-data-service"),f=e("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-refinements-controller"),g=e("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-viewing-options-controller"),h=new p;return c.on("pre-initialization",function(){i=GH.Reports.ChartTimeFrameModel,t=GH.Reports.ControlChartRefinementsModel,r=GH.Reports.ControlChartViewingOptionsModel,a=GH.ChartTimeFrames,n=GH.PromiseKeeper,o=GH.RapidBoard.State,s=GH.RapidViewConfig}),l.id="controlChart",l.SETTINGS_KEY="chart.config.controlChart",l.displayed=!1,l.rapidViewData=null,l.initPhasePromise=null,l.filterOptions=null,l.firstTimeLoadingData=!0,l.analytics=new m("gh.report.controlChart"),l.setRapidView=function(e){l.rapidViewData=e||{}},l.update=function(){l.saveFilterOptions(),o.pushState(),l.loadAndProcess()},l.show=function(){var e=l,i=e.getFilterOptions();e.initPhasePromise||(e.initPhasePromise=s.fetchConfiguration(e.rapidViewData.id).done(function(e){i.refinements.setAvailable(d.pick(e,"columns","swimlanes","quickFilters"))})),e._dataPromiseKeeper=new n,e.initPhasePromise.done(function(){e.displayed=!0;var t=(l.getFilterOptions(),"custom"===s.currentData.data.swimlaneStrategy);t||(i.refinements.selected.swimlaneIds=d.pluck(i.refinements.available.swimlanes,"id")),o.pushState(),u.init(),f.start(i.refinements),g.start(i.viewingOptions),l.loadAndProcess();var r="show."+(l.rapidViewData.sprintSupportEnabled?"scrum":"kanban");l.analytics.trigger(r)})},l.hide=function(){l.displayed=!1,l._dataPromiseKeeper&&l._dataPromiseKeeper.reset(),u.destroy(),h.clearCache()},l.loadAndProcess=function(){u.showSpinner();var e=l.getFilterOptions(),i=h.get(l.rapidViewData.id,e);return l._dataPromiseKeeper.add(i).done(function(i){l.displayed&&(i.issues.length>0?u.hideBlankState():(u.showBlankState(e),l.analytics.trigger("blank")),l.processChartData(i))}).always(function(e){"abort"!==e&&u.hideSpinner()})},l.getFilterOptions=function(){if(!l.filterOptions){var e=o.getBoardSetting(o.getRapidViewId(),l.SETTINGS_KEY,{});l.filterOptions={timeFrame:(new i).fromNormalized(e),refinements:(new t).fromNormalized(e),viewingOptions:(new r).fromNormalized(e)}}return l.filterOptions},l.saveFilterOptions=function(){o.setBoardSetting(l.SETTINGS_KEY,l.getNormalizedFromInternal())},l.processChartData=function(e){var i=new Date(e.earliestTime),t=new Date(e.currentTime),r=l.getFilterOptions();if(r.timeFrame.setBounds(i,t),l.firstTimeLoadingData){var n=(t-i)/a.day;l.firstTimeLoadingData=!1,r.timeFrame.isDefault()&&n<90&&(r.timeFrame.setAllTime(),o.pushState())}u.render(e,r.timeFrame)},l.isApplicable=function(e){return!0},l.getNormalizedFromInternal=function(){var e=l.getFilterOptions();return d.extend({chart:l.id},e.timeFrame.toNormalized(),e.refinements.toNormalized(),e.viewingOptions.toNormalized())},l.updateInternalFromNormalized=function(e){var i=l.getFilterOptions();i.timeFrame.fromNormalized(e),i.refinements.fromNormalized(e),i.viewingOptions.fromNormalized(e),l.saveFilterOptions()},l.toUrl=function(e){return{days:e.days,from:e.from,to:e.to,column:e.columnIds,swimlane:e.swimlaneIds,quickfilter:e.quickFilterIds,nwd:e.includeNonWorkingDays}},l.getNormalizedFromUrl=function(e){function i(e){return d.isArray(e)?d.map(e,Number):[Number(e)]}function t(e){return e===(!0).toString()}var r={};return"days"in e&&(r.days=isNaN(e.days)?e.days:Number(e.days)),"to"in e&&(r.to=e.to),"from"in e&&(r.from=e.from),"column"in e&&(r.columnIds=i(e.column)),"swimlane"in e&&(r.swimlaneIds=i(e.swimlane)),"quickfilter"in e&&(r.quickFilterIds=i(e.quickfilter)),"nwd"in e&&(r.includeNonWorkingDays=t(e.nwd)),r},l});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/controlchart/ControlChartView.js' */
define("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-view",["require"],function(e){var t,r,a,o,n,i,l,s,d,m,u,c={},h=e("jquery"),f=e("jira-agile/d3"),g=e("jira/moment"),p=e("jira-agile/rapid/global-events");return p.on("pre-initialization",function(){t=e("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-controller"),i=e("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-refinements-controller"),r=GH.ChartView,a=GH.Reports.controlChart,o=GH.Reports.controlChartHowTo,n=GH.Reports.controlChartLegend,l=GH.Layout,s=GH.RapidViewConfig,d=GH.TimeFormat,m=GH.NumberFormat,u=GH.ChartTimeFrames}),c.$timeWindowSelect=null,c.$fromDateInput=null,c.$toDateInput=null,c.$timeFrameResetLink=null,c.ControlChart=null,c.bindingToModel=!1,c._firstRender=null,c.init=function(){c._firstRender=!0;var e=s.currentData.data.swimlaneStrategy;r.getChartContentElem(!0).html(GH.tpl.reports.controlChart.renderChartBody({shouldShowSwimlaneRefine:"custom"===e})),r.getChartLegendD3(!0).html(GH.tpl.reports.controlChart.renderLegend()),h("#ghx-chart-header-secondary .ghx-chart-legend").show();var t=new o;t(f.select(".ghx-group-how"));var i=new n;i(f.select(".ghx-chart-legend")),c.renderControls(),c.renderChartSelector(),c.ControlChart=new a,c.bindToWindowResize()},c.destroy=function(){c.unbindToWindowResize()},c.render=function(e,t){c.bindModelToView(e,t),c._firstRender||r.showChartUpdatedToast(),c._firstRender=!1},c.renderChart=function(){c.ControlChart(f.select("#control-chart .ghx-svg-chart"))},c.renderChartSelector=function(){r.getChartSelector(!0).html(GH.tpl.reports.controlChart.renderChartSelector())},c.bindModelToChartHeader=function(e,t){var a=t.getTimeFrameDates(),o="LL",n=GH.tpl.reports.controlChart.renderChartTimeWindow({fromDate:g(a.fromDate).format(o),toDate:g(a.toDate).format(o),timeFrame:t.timeFrame});h(".js-chart-time-window").text(n);var i=0===e.issues.length?"":GH.tpl.reports.controlChart.renderChartSnapshots({mean:d.formatSensibleShortDuration(e.stats.mean),median:d.formatSensibleShortDuration(e.stats.median),min:d.formatSensibleShortDuration(e.stats.min),max:d.formatSensibleShortDuration(e.stats.max),issueCount:m.format(e.issues.length)});r.getChartSnapshot(!0).html(i);var l=h(".js-chart-legend-rollingaveragewindow");e.stats.rollingAverageWindow?l.text(AJS.format("{0,number} issue window",e.stats.rollingAverageWindow)):l.text("Not available")},c.bindModelToControls=function(e){c.bindingToModel=!0;var t=e.getTimeFrameDates(),r=c.$timeFrameResetLink;c.$timeWindowSelect.val(e.getTimeFrame()).trigger("change"),c.updateCustomDatesFields(t.fromDate,t.toDate),c.validateCustomDates(),e.isDefault()?r.attr("aria-disabled","true").attr("title","Time scale is currently using default settings"):r.removeAttr("aria-disabled title"),c.bindingToModel=!1},c.bindModelToChart=function(e){c.ControlChart.data(e),c.renderChart()},c.bindModelToView=function(e,t){c.bindModelToChart(e),c.bindModelToChartHeader(e,t),c.bindModelToControls(t)},c.bindToWindowResize=function(){l.bindDelayedWindowResize(),h(GH).bind(l.EVENT_DELAYED_RESIZE+"."+t.id,function(){c.renderChart()})},c.unbindToWindowResize=function(){h(GH).unbind(l.EVENT_DELAYED_RESIZE+"."+t.id)},c.showBlankState=function(e){var t=h(GH.tpl.reports.controlChart.renderBlankStateMessage({canResetRefinements:!e.timeFrame.isDefault()||!e.refinements.isDefault()}));t.find(".js-options-reset").on("click",function(e){c.resetDefaultTimeWindow(e),i.resetToDefaults()}),r.showBlankStateMessage(t)},c.hideBlankState=function(){r.hideBlankStateMessage()},c.showSpinner=function(){r.showSpinner()},c.hideSpinner=function(){r.hideSpinner()},c.handleTimeWindowChanged=function(e){if(!c.bindingToModel){var r=c.$timeWindowSelect.val();if("custom"===r){var a=c.getCustomDates();t.getFilterOptions().timeFrame.setSimpleDates(a.fromDate,a.toDate)}else t.getFilterOptions().timeFrame.setDays(+r);t.update()}},c.renderControls=function(){Calendar.setup({firstDay:0,inputField:"js-option-timeframe-custom-from",button:"js-option-timeframe-custom-from_trigger_c",align:"Tl",singleClick:!0,cache:!1,positionStyle:"fixed",ifFormat:u.dateFormat,showsTime:!1}),Calendar.setup({firstDay:0,inputField:"js-option-timeframe-custom-to",button:"js-option-timeframe-custom-to_trigger_c",align:"Tl",singleClick:!0,cache:!1,positionStyle:"fixed",ifFormat:u.dateFormat,showsTime:!1}),c.$timeWindowSelect=h("#js-option-timeframe"),c.$fromDateInput=h("#js-option-timeframe-custom-from"),c.$toDateInput=h("#js-option-timeframe-custom-to"),c.$timeFrameResetLink=h("#js-option-timeframe-reset"),c.$timeWindowSelect.change(c.handleTimeWindowChanged),c.$fromDateInput.change(c.handleCustomDateSelected),c.$toDateInput.change(c.handleCustomDateSelected),c.$timeFrameResetLink.click(c.resetDefaultTimeWindow)},c.handleCustomDateSelected=function(){if(!c.bindingToModel&&c.validateCustomDates()){c.$timeWindowSelect.val("custom");var e=c.getCustomDates();t.getFilterOptions().timeFrame.setSimpleDates(e.fromDate,e.toDate),t.update()}},c.getCustomDates=function(){var e=c.$fromDateInput.val(),t=c.$toDateInput.val();return{fromDate:Date.parseDate(e,u.dateFormat),toDate:Date.parseDate(t,u.dateFormat),fromText:e,toText:t}},c.updateCustomDatesFields=function(e,t){c.$fromDateInput.val(e.print(u.dateFormat)),c.$toDateInput.val(t.print(u.dateFormat))},c.resetDefaultTimeWindow=function(e){c.bindingToModel||(t.getFilterOptions().timeFrame.resetToDefault(),t.update(),e.preventDefault())},c.validateCustomDates=function(){var e=c.getCustomDates(),t=!0,r="";return e.fromDate&&e.toDate&&u.isValidDate(e.fromText)&&u.isValidDate(e.toText)?e.fromDate>e.toDate&&(r="From-date must be before to-date",t=!1):(r=AJS.format("Date format should be as follows: {0}",u.getDateAsText(new Date)),t=!1),c.setTimeFrameError(r),t},c.setTimeFrameError=function(e){h(".js-timeframes-error").html(e)},c});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/controlchart/ControlChartRefinementsView.js' */
GH.Reports.ControlChartRefinementsView=function(e,t,n,l){function i(e,t,i,o){var c=e.find("select"),u=e.find(".ghx-refinement-selector"),d=_.map(p.available[t],function(e){return{value:e.id,label:e.name,selected:!1}});c.empty().append(GH.tpl.reports.controlChart.renderSelectOptions({options:d}));var f=new l({element:c,itemAttrDisplayed:"label"});f.$container.addClass("hidden").append(GH.tpl.reports.controlChart.renderRefineInfoMessage({message:o}));var m=n.create({content:f.$container,offsetTarget:u,width:"auto"});return u.on("click",function(e){e.preventDefault(),m.toggle(),f.$field.focus()}),f.model.$element.on("unselect selected",function(){h&&(r()?(p.selected[i]=_.map(f.model.getSelectedValues(),function(e){return+e}),a()):setTimeout(function(){s()},0))}),{multiSelect:f,$button:u}}function r(){var e=u.multiSelect.model.getSelectedValues().length>0,t=!d||d.multiSelect.model.getSelectedValues().length>0;return e&&t}function o(e){g=null;var t=GH.RapidViewConfig.currentData.data.swimlaneStrategy,n="custom"===t;u=i(e.find("#js-options-refine-columns"),"columns","columnIds","At least one column must be selected"),n&&(d=i(e.find("#js-options-refine-swimlanes"),"swimlanes","swimlaneIds","At least one swimlane must be selected")),f=i(e.find("#js-options-refine-quickfilters"),"quickFilters","quickFilterIds",""),m=e.find(".js-reset-btn").on("click",function(e){e.preventDefault(),c()})}function a(){_.isEqual(p.toNormalized(),g)||(null!==g&&S("modelChanged"),s(),g=p.toNormalized())}function s(){function e(e,n){if(e){e.multiSelect.clear(),_.each(n,function(t){var n=e.multiSelect.model.getDescriptor(t.toString());e.multiSelect.selectItem(n,!0)});var l=t(e.multiSelect.model.$element);e.$button.find(".ghx-refinement-wrap").text(l||"None")}}function t(e){var t=e.find("option:selected").map(function(){return this.text}).get().join(", ");return t}h=!1,e(u,p.selected.columnIds),e(d,p.selected.swimlaneIds),e(f,p.selected.quickFilterIds),p.isDefault()?m.attr("aria-disabled","true"):m.removeAttr("aria-disabled"),h=!0}function c(){S("resetToDefaults")}var u,d,f,m,p=null,g=null,S=e.noop,h=!0;return{start:function(t){p=t,o(e("#ghx-controlchart-refine-options"))},digest:function(){a()},setHandler:function(e){S=e},getModel:function(){return p}}}(AJS.$,AJS.I18n,AJS.InlineLayer,AJS.CheckboxMultiSelect);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/controlchart/ControlChartRefinementsController.js' */
define("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-refinements-controller",["require"],function(t){"use strict";function e(){n.setHandler(function(t){o[t]()})}var r,n=GH.Reports.ControlChartRefinementsView,i=t("jira-agile/rapid/global-events");i.on("pre-initialization",function(){r=t("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-controller")});var o={modelChanged:function(){r.update()},resetToDefaults:function(){n.getModel().resetToDefaults(),n.digest()}};return{start:function(t){e(),n.start(t),n.digest()},resetToDefaults:o.resetToDefaults}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/controlchart/ControlChartViewingOptionsView.js' */
GH.Reports.ControlChartViewingOptionsView=function(n){function t(n){a=null,r=n.find("#js-option-nwd").on("change",function(){d&&(u.includeNonWorkingDays=this.checked,o())}),l=n.find(".js-reset-btn").on("click",function(n){n.preventDefault(),i()})}function o(){_.isEqual(u.toNormalized(),a)||(null!==a&&c("modelChanged"),e(),a=u.toNormalized())}function e(){d=!1,r.prop("checked",u.includeNonWorkingDays),u.isDefault()?l.attr("aria-disabled","true"):l.removeAttr("aria-disabled"),d=!0}function i(){c("resetToDefaults")}var r,l,u=null,a=null,c=n.noop,d=!0;return{start:function(o){u=o,t(n("#ghx-controlchart-viewing-options"))},digest:function(){o()},setHandler:function(n){c=n},getModel:function(){return u}}}(AJS.$);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/controlchart/ControlChartViewingOptionsController.js' */
define("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-viewing-options-controller",["require"],function(t){"use strict";function r(){e.setHandler(function(t){o[t]()})}var i,e=GH.Reports.ControlChartViewingOptionsView,n=t("jira-agile/rapid/global-events");n.on("pre-initialization",function(){i=t("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-controller")});var o={modelChanged:function(){i.update()},resetToDefaults:function(){e.getModel().resetToDefaults(),e.digest()}};return{start:function(t){r(),e.start(t),e.digest()}}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/controlchart/ControlChartDialog.js' */
GH.Reports=GH.Reports||{},GH.Reports.ControlChartDialog=function(){function e(e){return _.each(e.columns,function(e){e.formattedDuration=s(e.duration)}),e.formattedDuration=s(e.duration),e}function t(e){var t=function(e){return e.duration};return[{label:"Max time",value:s(d3.max(e,t))},{label:"Average time",value:s(d3.mean(e,t))},{label:"Min time",value:s(d3.min(e,t))}]}function n(t){return GH.tpl.reports.controlChart.renderDialogIssueContent({issue:e(t),url:GH.Ajax.CONTEXT_PATH+"/browse/"+encodeURIComponent(t.key)})}function r(e){var n=_.pluck(e,"key");return GH.tpl.reports.controlChart.renderDialogClusterContent({issueCount:e.length,stats:t(e),url:GH.Ajax.CONTEXT_PATH+"/secure/GHViewInNavigator.jspa?issueKeys="+encodeURIComponent(n.join(","))})}function a(e,t){var a=d3.select(e);a.classed("active",!0);var o=_.isArray(t);return i=GH.SideInlineDialog.create(l,e,function(e,a,i){e.closest(".aui-inline-dialog").addClass("ghx-inline-dialog"),e.html(o?r(t):n(t)),i()},{addActiveClass:!1,container:c,fadeTime:0,noBind:!0,cacheContent:!1,hideDelay:6e4,persistent:!0,hideCallback:function(){a.classed("active",!1)}}),i.show(),i}function o(){return!!i&&i.is(":visible")}var i,l="control-chart-issues",c="#ghx-report-scrollarea > .aui-page-panel",s=GH.TimeFormat.formatShortDuration;return GH.InlineDialog.preventCloseOnClick(l),{show:a,hide:function(){i&&i.hide()},isVisible:o}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/controlchart/ControlChartScrubberDialog.js' */
GH.Reports.ControlChartScrubberDialog=function(){function e(e){return moment(e).format("LLL")}function n(e){return moment(e).format("LL")}function i(e){m=e,f=GH.SideInlineDialog.create(C,e,function(e,n,i){e.closest(".aui-inline-dialog").addClass("ghx-inline-dialog ghx-scrubber-dialog"),e.addClass("ghx-scrubber-contents"),e.next("#arrow-"+C).addClass("ghx-arrow-scrubber-dialog"),i()},H),a()}function r(){b=!1}function t(){b=!0}function o(){!GH.Reports.ControlChartDialog.isVisible()&&b&&f.show()}function a(){GH.InlineDialog.registerInlineDialogHacks(C,{validateClickToCloseFn:function(){return!1}})}function l(){f&&f.hide()}function s(e){g(),c(e),f.refresh()}function c(e){var n;n=e.time?GH.tpl.reports.controlChart.renderScrubberDialogContent({indicatedTime:u(e.time),rollingAverage:GH.Util.roundToDecimalPlaces(e.rollingAverage,1),standardDeviation:GH.Util.roundToDecimalPlaces(e.standardDeviation,1)}):GH.tpl.reports.controlChart.renderScrubberBrushingDialogContent({startTime:u(e.startTime),endTime:u(e.endTime)}),d().find(".ghx-scrubber-contents").html(n)}function u(i){var r=GH.Reports.ControlChartController.getFilterOptions().timeFrame,t=r.getTimeFrameDuration()/GH.ChartTimeFrames.day;return i=t>30?n(i):e(i)}function d(){return AJS.$("#inline-dialog-"+C)}function g(){h()||o()}function h(){return!!f&&f.is(":visible")}var f,m,b=!0,C="scrubber-dialog",D="#ghx-chart-group",H={container:D,fadeTime:0,noBind:!0,cacheContent:!1,hideDelay:6e4,width:230,closeOthers:!1,persistent:!0,addActiveClass:!1};return{init:i,show:o,hide:l,isVisible:h,refresh:s,disable:r,enable:t}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/controlchart/ControlChartScrubber.js' */
GH.Reports.ControlChartScrubber=function(){function r(){GH.Reports.ControlChartScrubberDialog.disable()}function e(){GH.Reports.ControlChartScrubberDialog.enable()}function t(){GH.Reports.ControlChartScrubberDialog.show()}function n(){GH.Reports.ControlChartScrubberDialog.hide()}function i(){c.hideScrubber()}function o(){u.cancelDrag()}function a(r,e){var t={};if(r.rollingAverageLine.length&&r.rollingAverageLine[0][0]<=e){var n=GH.Util.indexOf(r.rollingAverageLine,function(r){return r[0]<=e},!0);t.rollingAverage=r.rollingAverageLine[n][1],t.standardDeviation=r.standardDeviationArea[n][2]}return t}function l(){var r=this.mouseCoordinates(),e=this.xScale().invert;if(r)if(u.isDragging()){var t=u.currentRange();GH.Reports.ControlChartScrubberDialog.refresh({startTime:e(t[0]),endTime:e(t[1])})}else{var n=e(r[0]),i=a(this.data().series,n);GH.Reports.ControlChartScrubberDialog.refresh({time:n,rollingAverage:i.rollingAverage,standardDeviation:i.standardDeviation})}}function s(){var r=this.selection();c.parent(this),c.interactiveLayer(this),c(r),u.parent(this),u.interactiveLayer(this),u(r),GH.Reports.ControlChartScrubberDialog.init(c.elements()[0]);var e=this;u.onEndDrag(_.bind(l,e)),this.mouseover(function(){t.call(e)}),this.mousemove("ccscrubber",function(){l.call(e)}),this.mouseout(function(){n.call(e)})}var c=c3.scrubber().elementClass("ghx-scrubber").shouldHideScrubber(function(){return GH.Reports.ControlChartDialog.isVisible()}),u=GH.Reports.ControlChartBrush();return c3.component().extend(_.once(s)).extend(o).extend({hideScrubber:i,disableScrubber:r,enableScrubber:e})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/ControlChartBrush.js' */
GH.Reports.ControlChartBrush=function(){return c3.brush().elementClass("ghx-chart-brush").enter(function(){var t=this;AJS.$(document).on("click mouseup",function(e){0===AJS.$(e.target).closest(t.parent().selection().node()).size()&&t.cancelDrag()}),AJS.$(document).on("keydown",function(e){27===e.keyCode&&t.cancelDrag()})}).onDrag(function(){AJS.$(d3.event.target).closest(this.parent().selection().node()).size()>0?GH.Reports.ControlChartDialog.hide():this.cancelDrag()}).onEndDrag(function(t){var e=this;t[1]-t[0]<5||(t=_.map(t,function(t){return e.parent().xScale().invert(t)}),GH.Reports.ControlChartController.getFilterOptions().timeFrame.setSimpleDates(t[0],t[1]),GH.Reports.ControlChartController.update())})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/controlchart/ControlChart.soy' */
// This file was automatically generated from ControlChart.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.reports.controlChart.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.reports == 'undefined') { GH.tpl.reports = {}; }
if (typeof GH.tpl.reports.controlChart == 'undefined') { GH.tpl.reports.controlChart = {}; }


GH.tpl.reports.controlChart.renderChartBody = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-group"><div id="control-chart" class="ghx-control-chart-svg"><svg class="ghx-svg-chart"></svg></div></div><div id="ghx-chart-options" class="aui-group"><div id="ghx-chart-options-time" class="aui-item">' + GH.tpl.reports.controlChart.renderChartTimeOptions(null) + '</div><div id="ghx-chart-options-refine" class="aui-item">' + GH.tpl.reports.controlChart.renderChartRefineOptions(opt_data) + '</div><div id="ghx-chart-options-view" class="aui-item">' + GH.tpl.reports.controlChart.renderChartViewingOptions(null) + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderChartBody.soyTemplateName = 'GH.tpl.reports.controlChart.renderChartBody';
}


GH.tpl.reports.controlChart.renderBlankStateMessage = function(opt_data, opt_ignored) {
  return '<div class="ghx-blank-message"><h2>' + soy.$$escapeHtml("This chart cannot be displayed") + '</h2><p>' + soy.$$escapeHtml("There are either no issues on this board, or all the issues have been filtered out by the chart refinements.") + '</p>' + ((opt_data.canResetRefinements) ? '<p class="ghx-margin-top-x2">' + aui.buttons.button({extraClasses: ['js-options-reset'], text: "Reset the report filters"}) + '</p>' : '<p>' + soy.$$escapeHtml("Change the filter values for this report below") + '</p>') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderBlankStateMessage.soyTemplateName = 'GH.tpl.reports.controlChart.renderBlankStateMessage';
}


GH.tpl.reports.controlChart.renderChartSnapshots = function(opt_data, opt_ignored) {
  return '<div class="ghx-chart-snapshot"><dl><dt class="js-chart-snapshot-mean">' + soy.$$escapeHtml(opt_data.mean) + '</dt><dd>' + soy.$$escapeHtml("Average") + '</dd></dl><dl><dt class="js-chart-snapshot-median">' + soy.$$escapeHtml(opt_data.median) + '</dt><dd>' + soy.$$escapeHtml("Median") + '</dd></dl><dl><dt class="js-chart-snapshot-min-time">' + soy.$$escapeHtml(opt_data.min) + '</dt><dd>' + soy.$$escapeHtml(AJS.format("Min {0}","Time")) + '</dd></dl><dl><dt class="js-chart-snapshot-max-time">' + soy.$$escapeHtml(opt_data.max) + '</dt><dd>' + soy.$$escapeHtml(AJS.format("Max {0}","Time")) + '</dd></dl><dl><dt class="js-chart-snapshot-issue-count">' + soy.$$escapeHtml(opt_data.issueCount) + '</dt><dd>' + soy.$$escapeHtml("Issues") + '</dd></dl></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderChartSnapshots.soyTemplateName = 'GH.tpl.reports.controlChart.renderChartSnapshots';
}


GH.tpl.reports.controlChart.renderChartSelector = function(opt_data, opt_ignored) {
  return '<div class="ghx-time-window js-chart-time-window"></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderChartSelector.soyTemplateName = 'GH.tpl.reports.controlChart.renderChartSelector';
}


GH.tpl.reports.controlChart.renderChartTimeWindow = function(opt_data, opt_ignored) {
  var output = '';
  switch (opt_data.timeFrame) {
    case 0:
      output += soy.$$escapeHtml(AJS.format("{0} to {1} ({2})",opt_data.fromDate,opt_data.toDate,"All Time"));
      break;
    case 7:
      output += soy.$$escapeHtml(AJS.format("{0} to {1} ({2})",opt_data.fromDate,opt_data.toDate,"Past Week"));
      break;
    case 14:
      output += soy.$$escapeHtml(AJS.format("{0} to {1} ({2})",opt_data.fromDate,opt_data.toDate,"Past 2 Weeks"));
      break;
    case 30:
      output += soy.$$escapeHtml(AJS.format("{0} to {1} ({2})",opt_data.fromDate,opt_data.toDate,"Past Month"));
      break;
    case 90:
      output += soy.$$escapeHtml(AJS.format("{0} to {1} ({2})",opt_data.fromDate,opt_data.toDate,"Past 3 Months"));
      break;
    case 180:
      output += soy.$$escapeHtml(AJS.format("{0} to {1} ({2})",opt_data.fromDate,opt_data.toDate,"Past 6 Months"));
      break;
    default:
      output += soy.$$escapeHtml(AJS.format("{0} to {1} ({2})",opt_data.fromDate,opt_data.toDate,"Custom"));
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderChartTimeWindow.soyTemplateName = 'GH.tpl.reports.controlChart.renderChartTimeWindow';
}


GH.tpl.reports.controlChart.renderLegend = function(opt_data, opt_ignored) {
  return '<div class="ghx-legend-column"><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-control-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml("Issue") + '</li></ul><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-control-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml("Cluster of issues") + '</li></ul></div><div class="ghx-legend-column"><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-control-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml("Average") + '</li></ul><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-control-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml("Rolling average") + '<div class="ghx-description js-chart-legend-rollingaveragewindow"></div></li></ul></div><div class="ghx-legend-column"><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-control-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml("Standard deviation") + '</li></ul></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderLegend.soyTemplateName = 'GH.tpl.reports.controlChart.renderLegend';
}


GH.tpl.reports.controlChart.renderChartTimeOptions = function(opt_data, opt_ignored) {
  return '<h5>' + soy.$$escapeHtml("Time scale") + '</h5><form class="aui"><fieldset><div class="field-group"><label for="js-option-timeframe">' + soy.$$escapeHtml("Timeframe") + '</label><select class="select" id="js-option-timeframe" title="' + soy.$$escapeHtml("Timeframe") + '"><option value="7">' + soy.$$escapeHtml("Past Week") + '</option><option value="14">' + soy.$$escapeHtml("Past 2 Weeks") + '</option><option value="30">' + soy.$$escapeHtml("Past Month") + '</option><option value="90">' + soy.$$escapeHtml("Past 3 Months") + '</option><option value="180">' + soy.$$escapeHtml("Past 6 Months") + '</option><option value="0">' + soy.$$escapeHtml("All Time") + '</option><option value="custom">' + soy.$$escapeHtml("Custom") + '</option></select></div></fieldset><fieldset><div class="field-group"><label>' + soy.$$escapeHtml("Custom dates") + '</label><div class="ghx-calendar-wrap"><span id="js-option-timeframe-custom-from_trigger_c" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar" title="' + soy.$$escapeHtml("Edit date") + '">' + soy.$$escapeHtml("Edit") + '</span><input class="text" type="text" id="js-option-timeframe-custom-from"></div><span class="ghx-conjunction">' + soy.$$escapeHtml("to") + '</span><div class="ghx-calendar-wrap"><span id="js-option-timeframe-custom-to_trigger_c" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar" title="' + soy.$$escapeHtml("Edit date") + '">' + soy.$$escapeHtml("Edit") + '</span><input class="text" type="text" id="js-option-timeframe-custom-to"></div><div class="ghx-error js-timeframes-error"></div></div></fieldset><fieldset>' + aui.buttons.button({id: ['js-option-timeframe-reset'], extraClasses: ['js-reset-btn', 'js-options-timeframe-reset', 'aui-button-link', 'ghx-margin-top'], text: "Reset to default", type: 'link', tagName: 'a'}) + '</fieldset></form>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderChartTimeOptions.soyTemplateName = 'GH.tpl.reports.controlChart.renderChartTimeOptions';
}


GH.tpl.reports.controlChart.renderChartRefineOptions = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<h5>' + soy.$$escapeHtml("Refine report") + '</h5><form id="ghx-controlchart-refine-options" class="aui">' + GH.tpl.reports.controlChart.renderRefineOption({id: 'js-options-refine-columns', label: "Columns"}) + ((opt_data.shouldShowSwimlaneRefine) ? GH.tpl.reports.controlChart.renderRefineOption({id: 'js-options-refine-swimlanes', label: "Swimlanes"}) : '') + GH.tpl.reports.controlChart.renderRefineOption({id: 'js-options-refine-quickfilters', label: "Quick Filters"}) + '<fieldset>' + aui.buttons.button({extraClasses: ['js-reset-btn', 'js-options-refine-reset', 'aui-button-link', 'ghx-margin-top'], text: "Reset to default", type: 'link', tagName: 'a'}) + '</fieldset></form>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderChartRefineOptions.soyTemplateName = 'GH.tpl.reports.controlChart.renderChartRefineOptions';
}


GH.tpl.reports.controlChart.renderRefineOption = function(opt_data, opt_ignored) {
  return '<fieldset><div id="' + soy.$$escapeHtml(opt_data.id) + '" class="field-group"><label>' + soy.$$escapeHtml(opt_data.label) + '</label><button id="' + soy.$$escapeHtml(opt_data.id) + '-selector" type="button" class="ghx-refinement-selector aui-button aui-button-subtle ghx-drop-arrow"><div class="ghx-refinement-wrap"></div></button><select id="' + soy.$$escapeHtml(opt_data.id) + '-select" multiple="multiple" class="hidden"></select></div></fieldset>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderRefineOption.soyTemplateName = 'GH.tpl.reports.controlChart.renderRefineOption';
}


GH.tpl.reports.controlChart.renderRefineInfoMessage = function(opt_data, opt_ignored) {
  return '<div class="ghx-description ghx-sparkler-description js-options-refine-error">' + soy.$$escapeHtml(opt_data.message) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderRefineInfoMessage.soyTemplateName = 'GH.tpl.reports.controlChart.renderRefineInfoMessage';
}


GH.tpl.reports.controlChart.renderSelectOptions = function(opt_data, opt_ignored) {
  var output = '';
  var optionList158 = opt_data.options;
  var optionListLen158 = optionList158.length;
  for (var optionIndex158 = 0; optionIndex158 < optionListLen158; optionIndex158++) {
    var optionData158 = optionList158[optionIndex158];
    output += '<option' + ((optionData158.value) ? ' value="' + soy.$$escapeHtml(optionData158.value) + '"' : '') + ((optionData158.selected) ? ' selected="selected"' : '') + '>' + soy.$$escapeHtml(optionData158.label) + '</option>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderSelectOptions.soyTemplateName = 'GH.tpl.reports.controlChart.renderSelectOptions';
}


GH.tpl.reports.controlChart.renderChartViewingOptions = function(opt_data, opt_ignored) {
  return '<h5>' + soy.$$escapeHtml("Viewing options") + '</h5><form  id="ghx-controlchart-viewing-options" class="aui"><fieldset><div class="checkbox"><input class="checkbox" type="checkbox" id="js-option-nwd" /><label for="js-option-nwd">' + soy.$$escapeHtml("Include non-working days in calculations") + '</label></div></fieldset><fieldset>' + aui.buttons.button({extraClasses: ['js-reset-btn', 'aui-button-link', 'ghx-margin-top'], text: "Reset to default", type: 'link', tagName: 'a'}) + '</fieldset></form>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderChartViewingOptions.soyTemplateName = 'GH.tpl.reports.controlChart.renderChartViewingOptions';
}


GH.tpl.reports.controlChart.renderDialogIssueContent = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-inline-dialog-container"><a href="' + soy.$$escapeHtml(opt_data.url) + '">' + soy.$$escapeHtml(opt_data.issue.key) + '</a> <span>' + soy.$$escapeHtml(opt_data.issue.summary) + '</span>';
  var columnList192 = opt_data.issue.columns;
  var columnListLen192 = columnList192.length;
  for (var columnIndex192 = 0; columnIndex192 < columnListLen192; columnIndex192++) {
    var columnData192 = columnList192[columnIndex192];
    output += GH.tpl.reports.controlChart.renderDialogItem({label: columnData192.name, value: columnData192.formattedDuration});
  }
  output += GH.tpl.reports.controlChart.renderDialogItem({label: "Cycle time", value: opt_data.issue.formattedDuration}) + '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderDialogIssueContent.soyTemplateName = 'GH.tpl.reports.controlChart.renderDialogIssueContent';
}


GH.tpl.reports.controlChart.renderDialogClusterContent = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-inline-dialog-container"><strong>' + soy.$$escapeHtml(AJS.format("{0}{0,choice,0# issues|1# issue|1\x3c issues}",opt_data.issueCount)) + '</strong> <a href="' + soy.$$escapeHtml(opt_data.url) + '">' + soy.$$escapeHtml("View in Issue navigator") + '</a>';
  var statList209 = opt_data.stats;
  var statListLen209 = statList209.length;
  for (var statIndex209 = 0; statIndex209 < statListLen209; statIndex209++) {
    var statData209 = statList209[statIndex209];
    output += GH.tpl.reports.controlChart.renderDialogItem(statData209);
  }
  output += '</div></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderDialogClusterContent.soyTemplateName = 'GH.tpl.reports.controlChart.renderDialogClusterContent';
}


GH.tpl.reports.controlChart.renderDialogItem = function(opt_data, opt_ignored) {
  return '<div class="aui-group"><div class="aui-item">' + soy.$$escapeHtml(opt_data.label) + '</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.value) + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderDialogItem.soyTemplateName = 'GH.tpl.reports.controlChart.renderDialogItem';
}


GH.tpl.reports.controlChart.renderScrubberDialogContent = function(opt_data, opt_ignored) {
  return '<div class="ghx-inline-dialog-container"><p><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar"></span>' + soy.$$escapeHtml(opt_data.indicatedTime) + '</p>' + ((opt_data.rollingAverage != null || opt_data.standardDeviation != null) ? '<table class="aui-table">' + ((opt_data.rollingAverage != null) ? GH.tpl.reports.controlChart.renderScrubberDialogItem({label: "Rolling average", value: AJS.format("{0,choice,0#{0,number} days|1#{0,number} day|1\x3c{0,number} days}",opt_data.rollingAverage)}) : '') + ((opt_data.standardDeviation != null) ? GH.tpl.reports.controlChart.renderScrubberDialogItem({label: "Standard deviation", value: AJS.format("{0,choice,0#{0,number} days|1#{0,number} day|1\x3c{0,number} days}",opt_data.standardDeviation)}) : '') + '</table>' : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderScrubberDialogContent.soyTemplateName = 'GH.tpl.reports.controlChart.renderScrubberDialogContent';
}


GH.tpl.reports.controlChart.renderScrubberBrushingDialogContent = function(opt_data, opt_ignored) {
  return '<div class="ghx-inline-dialog-container"><table class="aui-table">' + GH.tpl.reports.controlChart.renderScrubberDialogItem({label: "From", value: opt_data.startTime}) + GH.tpl.reports.controlChart.renderScrubberDialogItem({label: "To", value: opt_data.endTime}) + '</table></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderScrubberBrushingDialogContent.soyTemplateName = 'GH.tpl.reports.controlChart.renderScrubberBrushingDialogContent';
}


GH.tpl.reports.controlChart.renderScrubberDialogItem = function(opt_data, opt_ignored) {
  return '<tr><th>' + soy.$$escapeHtml(opt_data.label) + '</th><td>' + soy.$$escapeHtml(opt_data.value) + '</td></tr>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderScrubberDialogItem.soyTemplateName = 'GH.tpl.reports.controlChart.renderScrubberDialogItem';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/releaseburndown/ReleaseBurndownChartDataService.js' */
define("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-chart-data-service",["require"],function(t){"use strict";function e(t){var e={url:"/rapid/charts/releaseburndownchart",data:t};return i.get(e,"rapidChartData")}function a(t,e){return s.getScopeBySprintData(t,e)}function r(){}var i,n,s,o=t("underscore"),d=t("jira-agile/rapid/global-events");return d.on("pre-initialization",function(){i=GH.Ajax,n=GH.RapidViewConfig,s=GH.Reports.ScopeBurndownBySprintTransformer}),r.prototype={get:function(t,e,r){return this._getData(t,e,r).andThen(function(t){return t.rapidViewId=n.currentData.id,t.estimationStatistic=n.currentData.data.estimationStatistic,t.estimationStatistic.formatter=s.getEstimationStatisticFormatter(t.estimationStatistic.renderer),t.labels={originalEstimate:"Original estimate at start of version",workAdded:"added to version",workRemoved:"removed from version",forecastDescription:function(t){return AJS.format("Based on your velocity for the last 3 sprints, it will take {0,choice,0#0 more sprints|1#1 more sprint|1\u003c{0,number} more sprints} to complete this version.",t)},helpUrl:{"url":"https://docs.atlassian.com/jira/jsw-docs-078/Release+Burndown","isLocal":false}.url},a(t,r.zeroBaseline)})},clearCache:function(){this._dataPromise&&(this._dataPromise=null,this._dataRequestParams=null)},_transformData:a,_getData:function(t,a,r){var i={rapidViewId:t,versionId:a};return this._dataPromise&&"rejected"!==this._dataPromise.state()&&o.isEqual(this._dataRequestParams,i)||(this._dataRequestParams=i,this._dataPromise=e(i)),this._dataPromise}},r});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/releaseburndown/ReleaseBurndownChartTableDataService.js' */
define("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-chart-table-data-service",["require"],function(t){"use strict";function a(t){var a={url:"/rapid/charts/versionreport",data:t};return i.get(a,"versionReportData")}function e(t,a){return t.showIssueEpic=!0,n.getIssuesBySprintData(t,a)}function r(){}var i,n,s=t("underscore"),o=t("jira-agile/rapid/global-events");return o.on("pre-initialization",function(){i=GH.Ajax,n=GH.Reports.ScopeBurndownBySprintTransformer}),r.prototype={get:function(t,a,r){return this._getData(t,a).andThen(function(a){return a.rapidViewId=t,e(a,r)})},clearCache:function(){this._dataPromise&&(this._dataPromise=null,this._dataRequestParams=null)},_transformData:e,_getData:function(t,e){var r={rapidViewId:t,versionId:e};return this._dataPromise&&"rejected"!==this._dataPromise.state()&&s.isEqual(this._dataRequestParams,r)||(this._dataRequestParams=r,this._dataPromise=a(r)),this._dataPromise}},r});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/releaseburndown/ReleaseBurndownReport.soy' */
// This file was automatically generated from ReleaseBurndownReport.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.reports.releaseBurndownReport.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.reports == 'undefined') { GH.tpl.reports = {}; }
if (typeof GH.tpl.reports.releaseBurndownReport == 'undefined') { GH.tpl.reports.releaseBurndownReport = {}; }


GH.tpl.reports.releaseBurndownReport.renderChartBody = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-group"><div id="ghx-release-burndown-report" class="ghx-scope-burndown-chart-svg ghx-release-burndown-chart-svg"></div></div><div id="ghx-chart-options" class="aui-group"></div><div class="ghx-version-metadata"></div><div class="ghx-report-issue-list"></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.releaseBurndownReport.renderChartBody.soyTemplateName = 'GH.tpl.reports.releaseBurndownReport.renderChartBody';
}


GH.tpl.reports.releaseBurndownReport.renderBlankStateMessage = function(opt_data, opt_ignored) {
  return '<div class="ghx-blank-message"><h2>' + soy.$$escapeHtml("This chart cannot be displayed") + '</h2>' + ((opt_data.hasNoVersion) ? '<p>' + soy.$$escapeHtml("There are no versions on this board.") + '</p>' : (opt_data.hasNoEstimatedStories) ? '<p>' + soy.$$escapeHtml("There are no estimated issues in this version.") + '</p>' : '') + '<p class="ghx-margin-top-x2">' + aui.buttons.button({extraClasses: ['js-plan-mode'], text: opt_data.hasNoVersion ? "Add versions in the Versions panel of the Backlog" : "Estimate issues in the Backlog", tagName: 'a', extraAttributes: 'href="' + opt_data.planModeUrl + '"'}) + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.releaseBurndownReport.renderBlankStateMessage.soyTemplateName = 'GH.tpl.reports.releaseBurndownReport.renderBlankStateMessage';
}


GH.tpl.reports.releaseBurndownReport.renderLegend = function(opt_data, opt_ignored) {
  return '<div class="ghx-legend-column"><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml("work completed") + '</li></ul><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml("work forecast") + '</li></ul></div><div class="ghx-legend-column"><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml("work remaining") + '</li></ul><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml("work added") + '</li></ul></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.releaseBurndownReport.renderLegend.soyTemplateName = 'GH.tpl.reports.releaseBurndownReport.renderLegend';
}


GH.tpl.reports.releaseBurndownReport.renderSnapshot = function(opt_data, opt_ignored) {
  var output = '';
  var unestimatedIssuesTooltipText__soy35 = soy.$$escapeHtml(AJS.format("{0}% of issues do not have an estimate ({1} of {2})",opt_data.unestimatedIssuesPercentage,opt_data.unestimatedIssuesCount,opt_data.estimatableIssuesCount)) + '<b>' + soy.$$escapeHtml("Issue types that do not include the estimation statistic are not counted.") + '</b>';
  output += '<div class="ghx-chart-snapshot">' + ((opt_data.shouldShowUnestimatedIssues) ? '<dl class="ghx-unestimated-issues ' + soy.$$escapeHtml(opt_data.unestimatedIssuesThresholdExceeded ? ' ghx-threshold-exceeded' : '') + '" data-tooltip="' + soy.$$escapeHtml(unestimatedIssuesTooltipText__soy35) + '"><dt>' + soy.$$escapeHtml(opt_data.unestimatedIssuesPercentage) + '%</dt><dd>' + soy.$$escapeHtml("unestimated issues") + '</dd></dl>' : '') + '<dl class=\'ghx-completed-overview\'><dt>' + soy.$$escapeHtml(AJS.format("{0} of {1}",opt_data.workCompleted,opt_data.workTotal)) + '</dt><dd>' + soy.$$escapeHtml(AJS.format("completed ({0})",opt_data.estimationStatistic)) + '</dd></dl></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.releaseBurndownReport.renderSnapshot.soyTemplateName = 'GH.tpl.reports.releaseBurndownReport.renderSnapshot';
}


GH.tpl.reports.releaseBurndownReport.renderChartViewingOptions = function(opt_data, opt_ignored) {
  return '<h5>' + soy.$$escapeHtml("Viewing options") + '</h5><form  id="ghx-versionreport-viewing-options" class="aui"><fieldset><div class="checkbox"><input class="checkbox" type="checkbox" id="js-option-zero-baseline" ' + ((opt_data.zeroBaseline) ? 'checked' : '') + '/><label for="js-option-zero-baseline">' + soy.$$escapeHtml("Align sprints at the base of the chart") + '</label><p class="ghx-description">' + soy.$$escapeHtml("Use this view to see trends in the scope for the version.") + '</p></div></fieldset></form>';
};
if (goog.DEBUG) {
  GH.tpl.reports.releaseBurndownReport.renderChartViewingOptions.soyTemplateName = 'GH.tpl.reports.releaseBurndownReport.renderChartViewingOptions';
}


GH.tpl.reports.releaseBurndownReport.renderVersionMetadata = function(opt_data, opt_ignored) {
  return '<h3>' + soy.$$escapeHtml(opt_data.name) + '</h3>' + ((opt_data.description) ? '<p>' + soy.$$escapeHtml(opt_data.description) + '</p>' : '') + '<div class="aui-group"><div class="aui-item">' + soy.$$escapeHtml("Planned start date") + '</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.formattedStartDate ? opt_data.formattedStartDate : "None") + '</div></div><div class="aui-group"><div class="aui-item">' + ((opt_data.released) ? soy.$$escapeHtml("Release date") : soy.$$escapeHtml("Planned release date")) + '</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.formattedReleaseDate ? opt_data.formattedReleaseDate : "None") + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.releaseBurndownReport.renderVersionMetadata.soyTemplateName = 'GH.tpl.reports.releaseBurndownReport.renderVersionMetadata';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/releaseburndown/ReleaseBurndownReportView.js' */
define("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-report-view",["require"],function(e){function t(){new u(this)}var n,r,s,i,o,a,d,h=e("jquery"),l=e("underscore"),p=e("jira-agile/d3"),u=e("jira-agile/rapid/events"),c=e("jira-agile/rapid/global-events"),g=e("jira-agile/rapid/ui/chart/chart-view"),m=e("jira-agile/rapid/ui/component/chart-picker");return c.on("pre-initialization",function(){n=GH.Reports.ScopeBurndownBySprintChart,r=GH.Reports.ScopeBurndownBySprintChartLegend,s=GH.Reports.ScopeBurndownBySprintChartHowTo,i=GH.Layout,o=GH.Ajax,a=GH.RapidViewConfig,d=GH.RapidBoard.ViewController}),t.prototype={_chart:null,_legend:null,_howTo:null,_firstRender:!0,_model:null,init:function(e){this._model=e,g.getChartContentElem(!0).html(GH.tpl.reports.releaseBurndownReport.renderChartBody()),g.getChartLegendD3(!0).html(GH.tpl.reports.releaseBurndownReport.renderLegend()).show(),this._renderOptions(),this._versionPicker=new m("releaseBurndown.selectedVersionId","There are currently no versions on this board."),h(this._versionPicker).on("selectedItemChanged",l.bind(this._handleVersionSelected,this)),this._chart=new n,this._legend=new r,this._howTo=new s,this._renderLegend(),this._renderHowTo()},destroy:function(){this._chart=null,this._legend=null,this._howTo=null,g.getChartContentElem(!0).empty(),g.getChartLegendD3(!0).empty(),h(GH).unbind(i.EVENT_DELAYED_RESIZE+".releaseBurndownReport")},setVersions:function(e){this._versionPicker.setItems(e),this._versionPicker.setDefaultItem(e[0])},update:function(e){this._versionPicker.setSelectedItem(e.version.id,!0),this._versionPicker.render(g.getChartSelector(!0)),this._chart.data(e),this._renderChart(),this._renderSnapshot(e),this._renderVersionMetadata(e),this._firstRender?(i.bindDelayedWindowResize(),h(GH).bind(i.EVENT_DELAYED_RESIZE+".releaseBurndownReport",l.bind(this._handleWindowResized,this))):g.showChartUpdatedToast(),this._firstRender=!1},updateTable:function(e){this._renderTable(e)},showBlankState:function(e,t){var n=h(GH.tpl.reports.releaseBurndownReport.renderBlankStateMessage({planModeUrl:o.CONTEXT_PATH+"/secure/RapidBoard.jspa?rapidView="+a.currentData.data.id+"&view=planning&versions=visible",hasNoVersion:e,hasNoEstimatedStories:t}));n.find(".js-plan-mode").on("simpleClick",function(e){e.preventDefault(),d.setMode("plan")}),g.showBlankStateMessage(n)},hideBlankState:function(){g.hideBlankStateMessage()},showSpinner:function(){g.showSpinner()},hideSpinner:function(){g.hideSpinner()},_renderSnapshot:function(e){var t=30,n=e.snapshot.estimatableIssueCount-e.snapshot.estimatedIssueCount,r=e.snapshot.estimatableIssueCount>0?Math.round(n/e.snapshot.estimatableIssueCount*100):0,s=0===e.snapshot.issueCount?"":GH.tpl.reports.releaseBurndownReport.renderSnapshot({estimatableIssuesCount:e.snapshot.estimatableIssueCount,unestimatedIssuesCount:n,unestimatedIssuesPercentage:r,unestimatedIssuesThresholdExceeded:r>t,workCompleted:e.estimationStatistic.formatter.formatFull(e.snapshot.workCompleted),workTotal:e.estimationStatistic.formatter.formatFull(e.snapshot.workCompleted+e.snapshot.workRemaining),estimationStatistic:e.estimationStatistic.name,shouldShowUnestimatedIssues:"issueCount"!==e.estimationStatistic.typeId});h("#ghx-chart-snapshot").html(s),GH.Tooltip.tipsify({selector:"#ghx-chart-snapshot .ghx-unestimated-issues",html:!0,className:"ghx-tipsy-left"})},_renderTable:function(e){g.getChartContentElem(!0).find(".ghx-report-issue-list").html(GH.tpl.reports.scopeBurndownBySprint.renderIssueList(l.extend({emptySprintMessage:"No issues completed this sprint for current version."},e)))},_renderLegend:function(){this._legend(p.select(".ghx-chart-legend"))},_renderHowTo:function(){this._howTo(p.select(".ghx-group-how"))},_renderChart:function(){this._chart(p.select("#ghx-release-burndown-report"))},_renderVersionMetadata:function(e){g.getChartContentElem(!0).find(".ghx-version-metadata").html(GH.tpl.reports.releaseBurndownReport.renderVersionMetadata(e.version))},_renderOptions:function(){var e=this;h("#ghx-chart-options").html(GH.tpl.reports.releaseBurndownReport.renderChartViewingOptions(this._model)),h("#js-option-zero-baseline").on("change",function(){e.trigger("optionChanged",{zeroBaseline:this.checked})})},_handleVersionSelected:function(e,t){this.trigger("versionSelected",t.item.id)},_handleWindowResized:function(){this._renderChart()}},t});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/releaseburndown/ReleaseBurndownReportController.js' */
define("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-report-controller",["require"],function(e){function i(){}var r,t,n,a=e("underscore"),o=e("jira-agile/rapid/global-events"),s=e("jira-agile/rapid/analytics-tracker"),d=e("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-report-view"),l=e("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-chart-data-service"),u=e("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-chart-table-data-service"),h=new l,p=new u;return o.on("pre-initialization",function(){r=GH.PromiseKeeper,t=GH.RapidBoard.State,n=new GH.VersionsDataService}),i.id="releaseBurndown",i.prototype={SETTINGS_KEY:"chart.config.releaseBurndown",displayed:!1,_model:null,_rapidViewData:null,_tracker:null,setRapidView:function(e){this._rapidViewData=e||{}},show:function(){this.displayed=!0,this._tracker=new s("gh.report.releaseburndown"),t.pushState();var e=this._view=new d;e.on("versionSelected",a.bind(function(e){this._model.versionId=e,this.update()},this)).on("optionChanged",a.bind(function(e){this._model.zeroBaseline=e.zeroBaseline,this._tracker.trigger("zeroBaseline."+(e.zeroBaseline?"on":"off")),this.update()},this)),e.init(this._model),e.showSpinner(),this._tracker.trigger("show"),this._dataPromiseKeeper=new r;var i=n.getSimpleVersions(this._rapidViewData.id);this._dataPromiseKeeper.add(i).done(a.bind(function(i){i.length?(i.reverse(),null!=this._model.versionId&&n.versionExists(i,this._model.versionId)||(this._model.versionId=i[0].id),e.setVersions(i),this.update(!0)):(this._model.versionId=null,e.showBlankState(!0,!0),this._tracker.trigger("blank"),e.hideSpinner())},this))},hide:function(){this.displayed=!1,this._dataPromiseKeeper&&this._dataPromiseKeeper.reset(),this._view&&(this._view.destroy(),this._view=null),h.clearCache(),p.clearCache()},update:function(e){if(e?t.replaceState():t.pushState(),this.saveState(),null!=this._model.versionId){var i=this;i._view.showSpinner();var r=h.get(i._rapidViewData.id,i._model.versionId,{zeroBaseline:i._model.zeroBaseline});return i._dataPromiseKeeper.add(r).done(function(e){0===e.snapshot.estimatedIssueCount?(i._view.showBlankState(!1,!0),i._tracker.trigger("blank")):i._view.hideBlankState(),i._view.update(e);var r=p.get(i._rapidViewData.id,i._model.versionId,e);i._dataPromiseKeeper.add(r).done(function(e){i._view.updateTable(e)})}).always(function(e){"abort"!==e&&i._view.hideSpinner()})}},saveState:function(){t.setBoardSetting(this.SETTINGS_KEY,this.getNormalizedFromInternal())},loadState:function(){this._model=t.getBoardSetting(t.getRapidViewId(),this.SETTINGS_KEY,{versionId:null,zeroBaseline:!1})},isApplicable:function(e){return e.sprintSupportEnabled},getNormalizedFromInternal:function(){return null===this._model&&this.loadState(),a.defaults(a.clone(this._model),{zeroBaseline:!1})},updateInternalFromNormalized:function(e){this._model=e},toUrl:function(e){return{version:null!==e.versionId?e.versionId:void 0,zeroBaseline:!!e.zeroBaseline||void 0}},getNormalizedFromUrl:function(e){return{versionId:isNaN(e.version)?null:+e.version,zeroBaseline:"true"===e.zeroBaseline}}},i});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/epicburndown/EpicBurndownChartDataService.js' */
define("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-chart-data-service",["require"],function(t){"use strict";function e(t){var e={url:"/rapid/charts/epicburndownchart",data:t};return r.get(e,"epicBurndownChartData")}function i(t,e){return o.getScopeBySprintData(t,e)}function a(){}var r,n,o,s=t("underscore"),c=t("jira-agile/rapid/global-events");return c.on("pre-initialization",function(){r=GH.Ajax,n=GH.RapidViewConfig,o=GH.Reports.ScopeBurndownBySprintTransformer}),a.prototype={get:function(t,e,a){return this._getData(t,e,a).andThen(function(t){return t.rapidViewId=n.currentData.id,t.estimationStatistic=n.currentData.data.estimationStatistic,t.estimationStatistic.formatter=o.getEstimationStatisticFormatter(t.estimationStatistic.renderer),t.labels={originalEstimate:"Original estimate at start of epic",workAdded:"added to epic",workRemoved:"removed from epic",forecastDescription:function(t){return AJS.format("Based on your velocity for the last 3 sprints, it will take {0,choice,0#0 more sprints|1#1 more sprint|1\u003c{0,number} more sprints} to complete this epic.",t)},helpUrl:{"url":"https://docs.atlassian.com/jira/jsw-docs-078/Epic+Burndown","isLocal":false}.url},t.epic={key:t.epicKey,summary:t.epicSummary,creationTime:t.epicCreationTime},i(t,a.zeroBaseline)})},clearCache:function(){this._dataPromise&&(this._dataPromise=null,this._dataRequestParams=null)},_transformData:i,_getData:function(t,i,a){var r={rapidViewId:t,epicKey:i};return this._dataPromise&&"rejected"!==this._dataPromise.state()&&s.isEqual(this._dataRequestParams,r)||(this._dataRequestParams=r,this._dataPromise=e(r)),this._dataPromise}},a});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/epicburndown/EpicBurndownChartTableDataService.js' */
define("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-chart-table-data-service",["require"],function(t){"use strict";function a(t){var a={url:"/rapid/charts/epicreport",data:t};return i.get(a,"epicBurndownData")}function e(t,a){return t.showIssueEpic=!1,n.getIssuesBySprintData(t,a)}function r(){}var i,n,s=t("underscore"),u=t("jira-agile/rapid/global-events");return u.on("pre-initialization",function(){i=GH.Ajax,n=GH.Reports.ScopeBurndownBySprintTransformer}),r.prototype={get:function(t,a,r){return this._getData(t,a).andThen(function(a){return a.rapidViewId=t,e(a,r)})},clearCache:function(){this._dataPromise&&(this._dataPromise=null,this._dataRequestParams=null)},_transformData:e,_getData:function(t,e){var r={rapidViewId:t,epicKey:e};return this._dataPromise&&"rejected"!==this._dataPromise.state()&&s.isEqual(this._dataRequestParams,r)||(this._dataRequestParams=r,this._dataPromise=a(r)),this._dataPromise}},r});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/epicburndown/EpicBurndownReport.soy' */
// This file was automatically generated from EpicBurndownReport.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.reports.epicBurndownReport.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.reports == 'undefined') { GH.tpl.reports = {}; }
if (typeof GH.tpl.reports.epicBurndownReport == 'undefined') { GH.tpl.reports.epicBurndownReport = {}; }


GH.tpl.reports.epicBurndownReport.renderChartBody = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-group"><div id="ghx-epic-burndown-report" class="ghx-scope-burndown-chart-svg ghx-epic-burndown-chart-svg"></div></div><div id="ghx-chart-options" class="aui-group"></div><div class="js-epic-metadata"></div><div class="ghx-report-issue-list"></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.epicBurndownReport.renderChartBody.soyTemplateName = 'GH.tpl.reports.epicBurndownReport.renderChartBody';
}


GH.tpl.reports.epicBurndownReport.renderBlankStateMessage = function(opt_data, opt_ignored) {
  return '<div class="ghx-blank-message"><h2>' + soy.$$escapeHtml("This chart cannot be displayed") + '</h2>' + ((opt_data.hasNoEpic) ? '<p>' + soy.$$escapeHtml("There are currently no epics on this board") + '</p>' : (opt_data.hasNoEstimatedStories) ? '<p>' + soy.$$escapeHtml("There are no estimated issues in this epic.") + '</p>' : '') + '<p class="ghx-margin-top-x2">' + aui.buttons.button({extraClasses: ['js-plan-mode'], text: opt_data.hasNoEpic ? "Add epics in the Epics panel of the Backlog" : "Estimate issues in the Backlog", tagName: 'a', extraAttributes: 'href="' + opt_data.planModeUrl + '"'}) + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.epicBurndownReport.renderBlankStateMessage.soyTemplateName = 'GH.tpl.reports.epicBurndownReport.renderBlankStateMessage';
}


GH.tpl.reports.epicBurndownReport.renderLegend = function(opt_data, opt_ignored) {
  return '<div class="ghx-legend-column"><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml("work completed") + '</li></ul><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml("work forecast") + '</li></ul></div><div class="ghx-legend-column"><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml("work remaining") + '</li></ul><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml("work added") + '</li></ul></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.epicBurndownReport.renderLegend.soyTemplateName = 'GH.tpl.reports.epicBurndownReport.renderLegend';
}


GH.tpl.reports.epicBurndownReport.renderDialogSprintContent = function(opt_data, opt_ignored) {
  var output = '';
  var statistic__soy35 = opt_data.estimationStatistic.name;
  output += '<div class="ghx-inline-dialog-container">' + ((opt_data.url != '') ? '<a href="' + soy.$$escapeHtml(opt_data.url) + '">' : '') + '<strong>' + soy.$$escapeHtml(opt_data.sprint.sprintName) + '</strong>' + ((opt_data.url != '') ? '</a>' : '') + ((opt_data.sprint.formattedStartDate) ? '<p class="ghx-sprint-dialog-dates">' + soy.$$escapeHtml(opt_data.sprint.formattedStartDate) + ' - ' + soy.$$escapeHtml(opt_data.sprint.formattedEndDate) + '</p>' : '') + '<table class="ghx-stat-table">' + GH.tpl.reports.epicBurndownReport.renderDialogWorkEstimate({estimateLabel: "at start of sprint", estimateValue: opt_data.sprint.formattedWorkAtStart, estimationStatistic: statistic__soy35}) + ((opt_data.sprint.workAdded) ? GH.tpl.reports.epicBurndownReport.renderDialogWorkEstimate({estimateLabel: "added", estimateValue: opt_data.sprint.formattedWorkAdded, estimationStatistic: statistic__soy35}) : '') + ((opt_data.sprint.workRemoved) ? GH.tpl.reports.epicBurndownReport.renderDialogWorkEstimate({estimateLabel: "removed", estimateValue: opt_data.sprint.formattedWorkRemoved, estimationStatistic: statistic__soy35}) : '') + ((opt_data.sprint.workCompleted) ? GH.tpl.reports.epicBurndownReport.renderDialogWorkEstimate({estimateLabel: '' + soy.$$escapeHtml("completed") + ((opt_data.sprint.isForecast) ? ' (' + soy.$$escapeHtml("forecast") + ')' : ''), estimateValue: opt_data.sprint.formattedWorkCompleted, estimationStatistic: statistic__soy35}) : '') + GH.tpl.reports.epicBurndownReport.renderDialogWorkEstimate({estimateLabel: '' + soy.$$escapeHtml("remaining") + ((opt_data.sprint.isForecast) ? ' (' + soy.$$escapeHtml("forecast") + ')' : ''), estimateValue: opt_data.sprint.formattedWorkRemaining, estimationStatistic: statistic__soy35}) + '</table></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.epicBurndownReport.renderDialogSprintContent.soyTemplateName = 'GH.tpl.reports.epicBurndownReport.renderDialogSprintContent';
}


GH.tpl.reports.epicBurndownReport.renderDialogWorkEstimate = function(opt_data, opt_ignored) {
  return '<tr><td class="ghx-stat-table-number"><span title="' + soy.$$escapeHtml(opt_data.estimationStatistic) + '">' + soy.$$escapeHtml(opt_data.estimateValue) + '</span></td><th class="ghx-stat-table-label">' + soy.$$escapeHtml(opt_data.estimateLabel) + '</th></tr>';
};
if (goog.DEBUG) {
  GH.tpl.reports.epicBurndownReport.renderDialogWorkEstimate.soyTemplateName = 'GH.tpl.reports.epicBurndownReport.renderDialogWorkEstimate';
}


GH.tpl.reports.epicBurndownReport.renderSnapshot = function(opt_data, opt_ignored) {
  var output = '';
  var unestimatedIssuesTooltipText__soy104 = soy.$$escapeHtml(AJS.format("{0}% of issues do not have an estimate ({1} of {2})",opt_data.unestimatedIssuesPercentage,opt_data.unestimatedIssuesCount,opt_data.estimatableIssuesCount)) + '<b>' + soy.$$escapeHtml("Issue types that do not include the estimation statistic are not counted.") + '</b>';
  output += '<div class="ghx-chart-snapshot">' + ((opt_data.shouldShowUnestimatedIssues) ? '<dl class="ghx-unestimated-issues ' + soy.$$escapeHtml(opt_data.unestimatedIssuesThresholdExceeded ? ' ghx-threshold-exceeded' : '') + '" data-tooltip="' + soy.$$escapeHtml(unestimatedIssuesTooltipText__soy104) + '"><dt>' + soy.$$escapeHtml(opt_data.unestimatedIssuesPercentage) + '%</dt><dd>' + soy.$$escapeHtml("unestimated issues") + '</dd></dl>' : '') + '<dl><dt>' + soy.$$escapeHtml(AJS.format("{0} of {1}",opt_data.workCompleted,opt_data.workTotal)) + '</dt><dd>' + soy.$$escapeHtml(AJS.format("completed ({0})",opt_data.estimationStatistic)) + '</dd></dl></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.epicBurndownReport.renderSnapshot.soyTemplateName = 'GH.tpl.reports.epicBurndownReport.renderSnapshot';
}


GH.tpl.reports.epicBurndownReport.renderChartViewingOptions = function(opt_data, opt_ignored) {
  return '<h5>' + soy.$$escapeHtml("Viewing options") + '</h5><form  id="ghx-versionreport-viewing-options" class="aui"><fieldset><div class="checkbox"><input class="checkbox" type="checkbox" id="js-option-zero-baseline" ' + ((opt_data.zeroBaseline) ? 'checked' : '') + '/><label for="js-option-zero-baseline">' + soy.$$escapeHtml("Align sprints at the base of the chart") + '</label><p class="ghx-description">' + soy.$$escapeHtml("Use this view to see trends in the scope for the epic.") + '</p></div></fieldset></form>';
};
if (goog.DEBUG) {
  GH.tpl.reports.epicBurndownReport.renderChartViewingOptions.soyTemplateName = 'GH.tpl.reports.epicBurndownReport.renderChartViewingOptions';
}


GH.tpl.reports.epicBurndownReport.renderEpicMetadata = function(opt_data, opt_ignored) {
  return '<h3>' + soy.$$escapeHtml("Epic") + '</h3><p><span class="ghx-issue-list-epic-information"><a role="button" class="ghx-epic-key-link" title="' + soy.$$escapeHtml("View epic details") + '" href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(opt_data.key) + '">' + soy.$$escapeHtml(opt_data.key) + '</a><span class="ghx-issue-list-epic-summary"> ' + soy.$$escapeHtml(opt_data.summary) + ' </span></span></p>';
};
if (goog.DEBUG) {
  GH.tpl.reports.epicBurndownReport.renderEpicMetadata.soyTemplateName = 'GH.tpl.reports.epicBurndownReport.renderEpicMetadata';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/epicburndown/EpicBurndownReportView.js' */
define("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-report-view",["require"],function(e){"use strict";function t(){new m(this)}var n,i,r,s,o,a,d,p,h=e("jquery"),l=e("underscore"),c=e("jira-agile/rapid/ui/component/chart-picker"),u=e("jira-agile/rapid/ui/chart/chart-view"),g=e("jira-agile/d3"),m=e("jira-agile/rapid/events"),w=e("jira-agile/rapid/global-events");return w.on("pre-initialization",function(){n=GH.Layout,i=GH.Ajax,r=GH.LinkedPagesController,s=GH.RapidBoard.ViewController,o=GH.RapidViewConfig,a=GH.Reports.ScopeBurndownBySprintChart,d=GH.Reports.ScopeBurndownBySprintChartLegend,p=GH.Reports.ScopeBurndownBySprintChartHowTo}),t.prototype={_chart:null,_legend:null,_howTo:null,_firstRender:!0,_model:null,init:function(e){this._model=e,u.getChartContentElem(!0).html(GH.tpl.reports.epicBurndownReport.renderChartBody()),u.getChartLegendD3(!0).html(GH.tpl.reports.epicBurndownReport.renderLegend()).show(),this._renderOptions(),this._epicPicker=new c("epicBurndown.selectedEpicId","There are currently no epics on this board"),h(this._epicPicker).on("selectedItemChanged",l.bind(this._handleEpicSelected,this)),this._chart=new a,this._legend=new d,this._howTo=new p,this._renderLegend(),this._renderHowTo()},destroy:function(){this._chart=null,this._legend=null,this._howTo=null,u.getChartContentElem(!0).empty(),u.getChartLegendD3(!0).empty(),h(GH).unbind(n.EVENT_DELAYED_RESIZE+".epicBurndownReport")},setEpics:function(e){this._epics=e,this._epicPicker.setItems(e),this._epicPicker.setDefaultItem(e[0])},update:function(e,t){if(t){var i=l.findWhere(this._epics,{id:e.epic.key}).linkedPagesCount;this._renderLinkedPagesTrigger(e.epic.key,i)}this._epicPicker.setSelectedItem(e.epic.key,!0),this._epicPicker.render(u.getChartSelector(!0)),this._chart.data(e),this._renderChart(),this._renderSnapshot(e),this._renderEpicMetadata(e.epic),this._firstRender?(n.bindDelayedWindowResize(),h(GH).bind(n.EVENT_DELAYED_RESIZE+".epicBurndownReport",l.bind(this._handleWindowResized,this))):u.showChartUpdatedToast(),this._firstRender=!1},updateTable:function(e){this._renderTable(e)},showBlankState:function(e,t){var n=h(GH.tpl.reports.epicBurndownReport.renderBlankStateMessage({planModeUrl:i.CONTEXT_PATH+"/secure/RapidBoard.jspa?rapidView="+o.currentData.data.id+"&view=planning"+(e?"&epics=visible":""),hasNoEpic:e,hasNoEstimatedStories:t}));n.find(".js-plan-mode").on("simpleClick",function(t){t.preventDefault(),e&&GH.PlanController.setEpicsColumnVisible(!0),s.setMode("plan")}),u.showBlankStateMessage(n)},hideBlankState:function(){u.hideBlankStateMessage()},showSpinner:function(){u.showSpinner()},hideSpinner:function(){u.hideSpinner()},_renderSnapshot:function(e){var t=30,n=e.snapshot.estimatableIssueCount-e.snapshot.estimatedIssueCount,i=e.snapshot.estimatableIssueCount>0?Math.round(n/e.snapshot.estimatableIssueCount*100):0,r=0===e.snapshot.issueCount?"":GH.tpl.reports.epicBurndownReport.renderSnapshot({estimatableIssuesCount:e.snapshot.estimatableIssueCount,unestimatedIssuesCount:n,unestimatedIssuesPercentage:i,unestimatedIssuesThresholdExceeded:i>t,workCompleted:e.estimationStatistic.formatter.formatFull(e.snapshot.workCompleted),workTotal:e.estimationStatistic.formatter.formatFull(e.snapshot.workCompleted+e.snapshot.workRemaining),estimationStatistic:e.estimationStatistic.name,shouldShowUnestimatedIssues:"issueCount"!==e.estimationStatistic.typeId});h("#ghx-chart-snapshot").html(r),GH.Tooltip.tipsify({selector:"#ghx-chart-snapshot .ghx-unestimated-issues",html:!0,className:"ghx-tipsy-left"})},_renderEpicMetadata:function(e){h(".js-epic-metadata").html(GH.tpl.reports.epicBurndownReport.renderEpicMetadata(e))},_renderLinkedPagesTrigger:function(e,t){var n=GH.tpl.component.linkedpages.renderTrigger({linkedPagesCount:t,title:"Create and view pages linked to this epic"}),i=h("#ghx-chart-header-primary .ghx-linked-pages-trigger");i.remove(),i=h(n),h("#ghx-chart-selector").after(i),r.initDialogTrigger(r.EPIC,GH.LinkedPagesController.REPORT,e,i)},_renderTable:function(e){u.getChartContentElem(!0).find(".ghx-report-issue-list").html(GH.tpl.reports.scopeBurndownBySprint.renderIssueList(l.extend({emptySprintMessage:"No issues completed this sprint for current epic."},e)))},_renderLegend:function(){this._legend(g.select(".ghx-chart-legend"))},_renderHowTo:function(){this._howTo(g.select(".ghx-group-how"))},_renderChart:function(){this._chart(g.select("#ghx-epic-burndown-report"))},_renderOptions:function(){var e=this;h("#ghx-chart-options").html(GH.tpl.reports.epicBurndownReport.renderChartViewingOptions(this._model)),h("#js-option-zero-baseline").on("change",function(){e.trigger("optionChanged",{zeroBaseline:this.checked})})},_handleEpicSelected:function(e,t){this.trigger("epicSelected",t.item)},_handleWindowResized:function(){this._renderChart()}},t});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/epicburndown/EpicBurndownReportController.js' */
define("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-report-controller",["require"],function(e){"use strict";function i(){}var t,a,r,n,o,s=e("underscore"),d=e("jira-agile/rapid/analytics-tracker"),l=e("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-chart-data-service"),p=e("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-chart-table-data-service"),c=e("jira-agile/rapid/global-events"),u=new l,h=new p;return c.on("pre-initialization",function(){t=GH.PromiseKeeper,a=GH.RapidBoard.State,r=GH.Reports.EpicBurndownReportView,n=GH.EpicsDataService,o=new n}),i.id="epicBurndown",i.prototype={SETTINGS_KEY:"chart.config.epicBurndown",displayed:!1,_model:null,_rapidViewData:null,_tracker:null,setRapidView:function(e){this._rapidViewData=e||{}},show:function(){this.displayed=!0,this._tracker=new d("gh.report.epicburndown"),a.pushState();var e=this._view=new r;e.on("epicSelected",s.bind(function(e){this._model.epicKey=e.id,this.update()},this)).on("optionChanged",s.bind(function(e){this._model.zeroBaseline=e.zeroBaseline,this._tracker.trigger("zeroBaseline."+(e.zeroBaseline?"on":"off")),this.update()},this)),e.init(this._model),e.showSpinner(),this._tracker.trigger("show"),this._dataPromiseKeeper=new t;var i=o.getSimpleEpics(this._rapidViewData.id);this._dataPromiseKeeper.add(i).done(s.bind(function(i){i.length?(i.reverse(),null!=this._model.epicKey&&o.epicExists(i,this._model.epicKey)||(this._model.epicKey=i[0].id),e.setEpics(i),this.update(!0)):(this._model.epicKey=null,e.showBlankState(!0,!0),this._tracker.trigger("blank"),e.hideSpinner())},this))},hide:function(){this.displayed=!1,this._dataPromiseKeeper&&this._dataPromiseKeeper.reset(),this._view&&(this._view.destroy(),this._view=null),u.clearCache(),h.clearCache()},update:function(e){if(e?a.replaceState():a.pushState(),this.saveState(),null!=this._model.epicKey){var i=this;i._view.showSpinner();var t=u.get(i._rapidViewData.id,i._model.epicKey,{zeroBaseline:i._model.zeroBaseline});return i._dataPromiseKeeper.add(t).done(function(e){0===e.snapshot.estimatedIssueCount?(i._view.showBlankState(!1,!0),i._tracker.trigger("blank")):i._view.hideBlankState(),i._view.update(e,o.supportsPages());var t=h.get(i._rapidViewData.id,i._model.epicKey,e);i._dataPromiseKeeper.add(t).done(function(e){i._view.updateTable(e)})}).always(function(e){"abort"!==e&&i._view.hideSpinner()})}},saveState:function(){a.setBoardSetting(this.SETTINGS_KEY,this.getNormalizedFromInternal())},loadState:function(){this._model=a.getBoardSetting(a.getRapidViewId(),this.SETTINGS_KEY,{epicKey:null,zeroBaseline:!1})},isApplicable:function(e){return e.sprintSupportEnabled},getNormalizedFromInternal:function(){return null===this._model&&this.loadState(),s.defaults(s.clone(this._model),{zeroBaseline:!1})},updateInternalFromNormalized:function(e){this._model=e},toUrl:function(e){return{epic:null!==e.epicKey?e.epicKey:void 0,zeroBaseline:!!e.zeroBaseline||void 0}},getNormalizedFromUrl:function(e){return{epicKey:e.epic||null,zeroBaseline:"true"===e.zeroBaseline}}},i});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/burnup/BurnupChartDataService.js' */
define("jira-agile/rapid/ui/chart/v2/burnup/burnup-chart-data-service",["require"],function(t){"use strict";function a(t){var a={url:"/rapid/charts/scopechangeburndownchart",data:t};return i.get(a,"sprintburnupchart")}function r(t){return u.getBurnupModelFromScopeBurndownModel(t)}function e(){}var i,n,u,s=t("underscore"),o=t("jira-agile/rapid/global-events");return o.on("pre-initialization",function(){i=GH.Ajax,n=GH.RapidViewConfig,u=GH.Reports.SprintBurnupTransformer}),e.prototype={get:function(t,a,e){return this._getData(t,a,e).andThen(function(t){return t.rapidViewId=n.currentData.id,r(t)})},clearCache:function(){this._dataPromise&&(this._dataPromise=null,this._dataRequestParams=null)},_transformData:r,_getData:function(t,r,e){var i={rapidViewId:t,sprintId:r,statisticFieldId:e};return this._dataPromise&&"rejected"!==this._dataPromise.state()&&s.isEqual(this._dataRequestParams,i)||(this._dataRequestParams=i,this._dataPromise=a(i)),this._dataPromise}},e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/burnup/BurnupReport.soy' */
// This file was automatically generated from BurnupReport.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.reports.burnupReport.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.reports == 'undefined') { GH.tpl.reports = {}; }
if (typeof GH.tpl.reports.burnupReport == 'undefined') { GH.tpl.reports.burnupReport = {}; }


GH.tpl.reports.burnupReport.renderChartBody = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-group"><div id="ghx-sprint-burnup-report" class="ghx-burnup-chart ghx-svg-chart" /></div><div id="ghx-chart-options" class="aui-group"></div><div class="ghx-version-metadata"></div><div class="ghx-report-issue-list"></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.burnupReport.renderChartBody.soyTemplateName = 'GH.tpl.reports.burnupReport.renderChartBody';
}


GH.tpl.reports.burnupReport.renderBlankStateMessage = function(opt_data, opt_ignored) {
  return '<div class="ghx-blank-message"><h2>' + soy.$$escapeHtml("This chart cannot be displayed") + '</h2>' + ((opt_data.hasNoEstimatedStories) ? '<p>' + soy.$$escapeHtml("There are no estimated issues in this sprint.") + '</p>' : '') + '<p class="ghx-margin-top-x2">' + aui.buttons.button({extraClasses: ['js-plan-mode'], text: "Estimate issues in the Backlog", tagName: 'a', extraAttributes: 'href="' + opt_data.planModeUrl + '"'}) + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.burnupReport.renderBlankStateMessage.soyTemplateName = 'GH.tpl.reports.burnupReport.renderBlankStateMessage';
}


GH.tpl.reports.burnupReport.renderLegend = function(opt_data, opt_ignored) {
  return '<div class="ghx-legend-column"><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml("Work scope") + '</li></ul></div><div class="ghx-legend-column"><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml("Scope projection") + '</li></ul></div><div><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml("Completed Work") + '</li></ul></div><div class="ghx-legend-column"><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml("Guideline") + '</li></ul></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.burnupReport.renderLegend.soyTemplateName = 'GH.tpl.reports.burnupReport.renderLegend';
}


GH.tpl.reports.burnupReport.renderDialogIssueContent = function(opt_data, opt_ignored) {
  return '<div class="ghx-inline-dialog-container"><b>' + GH.tpl.reports.burnupReport.renderIssueKeyLink({key: opt_data.issueKey}) + '</b> ' + soy.$$escapeHtml(opt_data.issueSummary) + '<h5>' + soy.$$escapeHtml(opt_data.eventDescription) + '</h5><div class="aui-group"><div class="aui-item ghx-burnup-card-label">' + soy.$$escapeHtml("Estimate") + '</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.fromValue) + ' \u2192 ' + soy.$$escapeHtml(opt_data.toValue) + '</div></div><h5>' + soy.$$escapeHtml("Effect on sprint") + '</h5><div class="aui-group"><div class="aui-item ghx-burnup-card-label">' + soy.$$escapeHtml("Estimate") + '</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.totalFromValue) + ' \u2192 ' + soy.$$escapeHtml(opt_data.totalToValue) + '</div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.burnupReport.renderDialogIssueContent.soyTemplateName = 'GH.tpl.reports.burnupReport.renderDialogIssueContent';
}


GH.tpl.reports.burnupReport.renderDialogContent = function(opt_data, opt_ignored) {
  return '<div class="ghx-inline-dialog-container"><div class="aui-group"><div class="aui-item">\u2211 ' + soy.$$escapeHtml(opt_data.statistic) + '</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.totalValue) + '</div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.burnupReport.renderDialogContent.soyTemplateName = 'GH.tpl.reports.burnupReport.renderDialogContent';
}


GH.tpl.reports.burnupReport.renderScrubberDialogContent = function(opt_data, opt_ignored) {
  return '<div class="ghx-inline-dialog-container"><p><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar"></span>' + soy.$$escapeHtml(opt_data.indicatedTime) + '</p>' + ((opt_data.scope != null || opt_data.completedWork != null) ? '<table class="aui-table">' + ((opt_data.scope != null) ? GH.tpl.reports.burnupReport.renderScrubberDialogItem({label: "Work scope", value: opt_data.scope}) : '') + ((opt_data.completedWork != null) ? GH.tpl.reports.burnupReport.renderScrubberDialogItem({label: "Completed Work", value: opt_data.completedWork}) : '') + '</table>' : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.burnupReport.renderScrubberDialogContent.soyTemplateName = 'GH.tpl.reports.burnupReport.renderScrubberDialogContent';
}


GH.tpl.reports.burnupReport.renderScrubberDialogItem = function(opt_data, opt_ignored) {
  return '<tr><th>' + soy.$$escapeHtml(opt_data.label) + '</th><td>' + soy.$$escapeHtml(opt_data.value) + '</td></tr>';
};
if (goog.DEBUG) {
  GH.tpl.reports.burnupReport.renderScrubberDialogItem.soyTemplateName = 'GH.tpl.reports.burnupReport.renderScrubberDialogItem';
}


GH.tpl.reports.burnupReport.renderChartTable = function(opt_data, opt_ignored) {
  var output = '<table class="aui ghx-hover-highlight"><thead><tr><th id="series-date">' + soy.$$escapeHtml("Date") + '</th><th id="series-event-type">' + soy.$$escapeHtml("Event Type") + '</th><th id="series-issue">' + soy.$$escapeHtml("Issue") + '</th><th id="series-completed-work" class="ghx-minimal">' + soy.$$escapeHtml("Completed Work") + '</th><th id="series-scope" class="ghx-minimal">' + soy.$$escapeHtml("Work scope") + '</th></tr></thead><tbody>';
  var rowList96 = opt_data.rows;
  var rowListLen96 = rowList96.length;
  for (var rowIndex96 = 0; rowIndex96 < rowListLen96; rowIndex96++) {
    var rowData96 = rowList96[rowIndex96];
    output += '<tr><td headers="series-date">' + ((rowData96.dateString) ? '<div class="ghx-nowrap">' + soy.$$escapeHtml(rowData96.dateString) + '</div>' : '') + '</td><td headers="series-event-type">' + ((rowData96.eventString) ? '<div class="ghx-nowrap">' + soy.$$escapeHtml(rowData96.eventString) + '</div>' : '') + '</td><td headers="series-issue">';
    if (rowData96.issues) {
      var issueList112 = rowData96.issues;
      var issueListLen112 = issueList112.length;
      for (var issueIndex112 = 0; issueIndex112 < issueListLen112; issueIndex112++) {
        var issueData112 = issueList112[issueIndex112];
        output += GH.tpl.reports.burnupReport.renderIssueKeyLink({key: issueData112.key}) + ' ' + soy.$$escapeHtml(issueData112.summary) + ' <br />';
      }
    }
    output += '</td><td headers="series-completed-work"><div class="ghx-nowrap">' + ((rowData96.doneChange) ? '<span class=\'ghx-previous-value\'>' + soy.$$escapeHtml(rowData96.doneChange.from) + ' \u2192 </span>' + soy.$$escapeHtml(rowData96.doneChange.to) : soy.$$escapeHtml(rowData96.doneValue)) + '</div></td><td headers="series-scope"><div class="ghx-nowrap">' + ((rowData96.scopeChange) ? '<span class=\'ghx-previous-value\'>' + soy.$$escapeHtml(rowData96.scopeChange.from) + ' \u2192 </span>' + soy.$$escapeHtml(rowData96.scopeChange.to) : soy.$$escapeHtml(rowData96.scopeValue)) + '</div></td></tr>';
  }
  output += '</tbody></table>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.burnupReport.renderChartTable.soyTemplateName = 'GH.tpl.reports.burnupReport.renderChartTable';
}


GH.tpl.reports.burnupReport.renderIssueKeyLink = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(opt_data.key) + '">' + soy.$$escapeHtml(opt_data.key) + '</a>';
};
if (goog.DEBUG) {
  GH.tpl.reports.burnupReport.renderIssueKeyLink.soyTemplateName = 'GH.tpl.reports.burnupReport.renderIssueKeyLink';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/burnup/BurnupReportView.js' */
define("jira-agile/rapid/ui/chart/v2/burnup/burnup-report-view",["require"],function(e){function t(){new d(this)}var n,i,r,a,s,o=e("jquery"),h=e("underscore"),p=e("jira-agile/d3"),d=e("jira-agile/rapid/events"),u=e("jira-agile/rapid/global-events"),l=e("jira-agile/rapid/ui/chart/chart-view"),c=e("jira-agile/rapid/ui/chart/v2/burnup/burnup-chart"),m=GH.RapidBoard;return u.on("pre-initialization",function(){a=GH.Reports.BurnupChartLegend,s=GH.Reports.ScopeBurndownBySprintChartHowTo,n=GH.Layout,i=GH.Ajax,r=GH.RapidViewConfig}),t.prototype={_chart:null,_legend:null,_howTo:null,_firstRender:!0,_model:null,init:function(e){this._model=e,l.getChartContentElem(!0).html(GH.tpl.reports.burnupReport.renderChartBody()),l.getChartLegendD3(!0).html(GH.tpl.reports.burnupReport.renderLegend()).show();var t=r.currentData.data.id;this._sprintPicker=new GH.ChartPicker("sprintBurnup.selectedSprintId"),o(this._sprintPicker).on("selectedItemChanged",h.bind(this._handleSprintSelected,this)),this._estimatePicker=new GH.EstimatePicker("sprintBurnup.selectedEstimate"),this._estimatePicker.load(t,this._handleEstimateSelected.bind(this)),this._chart=new c,this._legend=a(),this._howTo=s()},destroy:function(){this._chart=null,this._legend=null,this._howTo=null,this._model=null,l.getChartContentElem(!0).empty(),l.getChartLegendD3(!0).empty(),o(GH).unbind(n.EVENT_DELAYED_RESIZE+".sprintBurnupReport")},setSprints:function(e){this._sprintPicker.setItems(e),this._sprintPicker.setDefaultItem(e[0])},update:function(e){this._sprintPicker.setSelectedItem(e.sprintId,!0),this._sprintPicker.render(l.getChartSelector(!0)),this._estimatePicker.setSelectedItem(e.statisticField.id,!0),this._estimatePicker.render(l.getChartControls(!0)),this._renderLegend(),this._renderHowTo(),this._renderChart(e),this.data=e,this._firstRender?(n.bindDelayedWindowResize(),o(GH).bind(n.EVENT_DELAYED_RESIZE+".sprintBurnupReport",h.bind(this._handleWindowResized,this))):l.showChartUpdatedToast(),this._firstRender=!1},updateTable:function(e){this._renderTable(e)},showBlankState:function(e){this._blankState=!0;var t=o(GH.tpl.reports.burnupReport.renderBlankStateMessage({planModeUrl:i.CONTEXT_PATH+"/secure/RapidBoard.jspa?rapidView="+r.currentData.data.id+"&view=planning&versions=visible",hasNoEstimatedStories:e}));t.find(".js-plan-mode").on("simpleClick",function(e){e.preventDefault(),m.ViewController.setMode("plan")}),this._chart.hide(p.select("#ghx-sprint-burnup-report")),l.getChartLegendD3(!0).hide(),l.getChartContentElem(!0).find(".ghx-report-issue-list").hide(),l.showBlankStateMessage(t)},hideBlankState:function(){this._blankState=!1,l.hideBlankStateMessage(),l.getChartLegendD3(!0).show(),l.getChartContentElem(!0).find(".ghx-report-issue-list").show()},showSpinner:function(){l.showSpinner()},hideSpinner:function(){l.hideSpinner()},_renderTable:function(e){function t(e,t){return e.map(function(e){return{key:e,summary:t[e]}})}if(!this._blankState){var n=e.chartData,i=n.scope[0].value,r=0,a=n.scope.concat(n.work).sort(function(e,t){return e.timestamp>t.timestamp?1:e.timestamp===t.timestamp?0:-1}).map(function(e){var a={timestamp:e.timestamp,dateString:n.formatDate(e.timestamp),issues:t([e.change.key],n.issueToSummary),event:e.change.type,eventString:n.formatEventType(e.change.type)},s=parseInt(e.change.toValue)-parseInt(e.change.fromValue)||0;return"done"===e.change.line&&(r+=s,0===s?a.doneValue=n.formatStatistic(r):a.doneChange={from:n.formatStatistic(r-s),to:n.formatStatistic(r)},a.scopeValue=n.formatStatistic(i)),"scope"===e.change.line&&(i+=s,0===s?a.scopeValue=n.formatStatistic(i):a.scopeChange={from:n.formatStatistic(i-s),to:n.formatStatistic(i)},a.doneValue=n.formatStatistic(r)),a});a=a.reduce(function(e,t){var n=e.pop();return n?n.timestamp!==t.timestamp||n.event!==t.event||n.issueKey!==t.issueKey||n.doneChange&&t.doneChange||n.scopeChange&&t.scopeChange?(e.push(n),e.push(t),e):(n.doneChange||(n.doneChange=t.doneChange),n.scopeChange||(n.scopeChange=t.scopeChange),e.push(n),e):(e.push(t),e)},[]),a[0].issues=t(n.startKeys,n.issueToSummary),n.sprintCompleted?a[a.length-1].issues=t(n.endKeys,n.issueToSummary):a.pop();var s=AJS.$(GH.tpl.reports.burnupReport.renderChartTable({rows:a}));l.getChartContentElem(!0).find(".ghx-report-issue-list").empty().append(s)}},_renderLegend:function(){this._blankState||this._legend(p.select(".ghx-chart-legend"))},_renderHowTo:function(){this._blankState||this._howTo(p.select(".ghx-group-how"))},_renderChart:function(e){if(!this._blankState){var t=p.select("#ghx-sprint-burnup-report");t.empty()||this._chart.show(e,t)}},_handleSprintSelected:function(e,t){this.trigger("sprintSelected",t.item.id)},_handleEstimateSelected:function(e){this.trigger("estimateSelected",e)},_handleWindowResized:function(){this._renderChart(this.data)}},t});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/burnup/BurnupReportController.js' */
define("jira-agile/rapid/ui/chart/v2/burnup/burnup-report-controller",["require"],function(t){function e(){}var i,r,n,a,s=t("underscore"),d=t("jira-agile/rapid/global-events"),o=t("jira-agile/rapid/analytics-tracker"),l=t("jira-agile/rapid/ui/chart/v2/burnup/burnup-report-view"),p=t("jira-agile/rapid/ui/chart/v2/burnup/burnup-chart-data-service"),h=new p,u=GH.RapidBoard;return d.on("pre-initialization",function(){i=GH.PromiseKeeper,r=GH.RapidBoard.State,n=new GH.VersionsDataService,a=new GH.SprintsDataService}),e.prototype={SETTINGS_KEY:"chart.config.sprintBurnup",displayed:!1,_sprints:null,_model:null,_rapidViewData:null,_tracker:null,setRapidView:function(t){this._rapidViewData=t||{}},show:function(){this.displayed=!0,this._tracker=new o("gh.report.burnup"),u.State.pushState();var t=this._view=new l;t.on("sprintSelected",s.bind(function(t){this._model.sprint=t,this._tracker.trigger("sprintChanged"),this.update()},this)).on("estimateSelected",s.bind(function(t){this._model.estimate=t,this._tracker.trigger("estimateChanged"),this.update()},this)).on("optionChanged",s.bind(function(t){this._model.zeroBaseline=t.zeroBaseline,this.update()},this)),t.init(this._model),t.showSpinner(),this._tracker.trigger("show"),this._dataPromiseKeeper=new i;var e=a.getSimpleSprints(this._rapidViewData.id);this._dataPromiseKeeper.add(e).done(s.bind(function(e){e.length?(e.reverse(),null==this._model.sprint&&(this._model.sprint=e[0].id),this._sprints=e,t.setSprints(e),this.update(!0)):(this._model.sprint=null,t.showBlankState(!0,!0),this._tracker.trigger("blank"),t.hideSpinner())},this))},hide:function(){this.displayed=!1,this._dataPromiseKeeper&&this._dataPromiseKeeper.reset(),this._view&&(this._view.destroy(),this._view=null),h.clearCache()},update:function(t){var e=this;if(this.isSprintSelectable(e._model.sprint)||(e._model.sprint=e._sprints[0].id),t?u.State.replaceState():u.State.pushState(),null!=this._model.sprint){this.saveState(),e._view.showSpinner();var i=h.get(e._rapidViewData.id,e._model.sprint,e._model.estimate);return e._dataPromiseKeeper.add(i).done(function(t){0===t.chartData.estimatedIssueEvents?(e._view.showBlankState(!0),e._tracker.trigger("blank")):e._view.hideBlankState(),t.chartData.sprintId=e._model.sprint,e._view.setSprints(e._sprints),e._view.update(t.chartData),e._view.updateTable(t)}).always(function(t){"abort"!==t&&e._view.hideSpinner()})}},saveState:function(){u.State.setBoardSetting(this.SETTINGS_KEY,this._model)},loadState:function(){this._model=u.State.getBoardSetting(u.State.getRapidViewId(),this.SETTINGS_KEY)},isApplicable:function(t){return t.sprintSupportEnabled},getNormalizedFromInternal:function(){return null===this._model&&this.loadState(),s.defaults(s.clone(this._model),{})},updateInternalFromNormalized:function(t){this._model||this.loadState(),this._model=s.defaults(s.clone(t),this._model)},toUrl:function(t){return{sprint:null!==t.sprint?t.sprint:void 0,estimate:null!==t.estimate?t.estimate:void 0}},isSprintSelectable:function(t){return this._sprints.filter(function(e){return e.id===t}).length>0},getNormalizedFromUrl:function(t){return{sprint:isNaN(t.sprint)?void 0:+t.sprint,estimate:t.estimate}}},e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/burnup/BurnupChartDialog.js' */
GH.Reports=GH.Reports||{},GH.Reports.BurnupChartDialog=function(){function e(e,t){var a=e.formatStatistic;if(t.change.key){var n=t.change.toValue-t.change.fromValue;return GH.tpl.reports.burnupReport.renderDialogIssueContent({issueKey:t.change.key,issueSummary:e.issueToSummary[t.change.key],fromValue:a(t.change.fromValue),toValue:a(t.change.toValue),totalFromValue:a(t.value-n),totalToValue:a(t.value),eventDescription:e.formatEventType(t.change.type)})}return GH.tpl.reports.burnupReport.renderDialogContent({totalValue:t.value,statistic:e.statisticField.name})}function t(t,a,o){var l=d3.select(t);return l.classed("active",!0),n=GH.SideInlineDialog.create(i,t,function(t,n,i){t.closest(".aui-inline-dialog").addClass("ghx-inline-dialog"),t.html(e(a,o)),i()},{addActiveClass:!1,container:r,fadeTime:0,noBind:!0,cacheContent:!1,hideDelay:6e4,persistent:!0,hideCallback:function(){l.classed("active",!1)}}),n.show(),n}function a(){return!!n&&n.is(":visible")}var n,i="sprint-burnup-issue",r="#ghx-report-scrollarea > .aui-page-panel";return GH.InlineDialog.preventCloseOnClick(i),{show:t,hide:function(){n&&n.hide()},isVisible:a}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/burnup/BurnupChartScrubberDialog.js' */
GH.Reports.BurnupChartScrubberDialog=function(){function e(e){b=e,d=GH.SideInlineDialog.create(h,e,function(e,i,n){e.closest(".aui-inline-dialog").addClass("ghx-inline-dialog ghx-scrubber-dialog"),e.addClass("ghx-scrubber-contents"),e.next("#arrow-"+h).addClass("ghx-arrow-scrubber-dialog"),n()},p),t()}function i(){g=!1}function n(){g=!0}function r(){!GH.Reports.BurnupChartDialog.isVisible()&&g&&d.show()}function t(){GH.InlineDialog.registerInlineDialogHacks(h,{validateClickToCloseFn:function(){return!1}})}function o(){d&&d.hide()}function s(e){l(),a(e),d.refresh()}function a(e){var i;e.time&&(i=GH.tpl.reports.burnupReport.renderScrubberDialogContent({indicatedTime:e.time,scope:e.scope,completedWork:e.completedWork})),c().find(".ghx-scrubber-contents").html(i)}function c(){return AJS.$("#inline-dialog-"+h)}function l(){u()||r()}function u(){return!!d&&d.is(":visible")}var d,b,g=!0,h="scrubber-dialog",f="#ghx-chart-group",p={container:f,fadeTime:0,noBind:!0,cacheContent:!1,hideDelay:6e4,width:230,closeOthers:!1,persistent:!0,addActiveClass:!1};return{init:e,show:r,hide:o,isVisible:u,refresh:s,disable:i,enable:n}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/burnup/BurnupChartScrubber.js' */
GH.Reports.BurnupChartScrubber=function(){function r(){GH.Reports.BurnupChartScrubberDialog.disable()}function e(){GH.Reports.BurnupChartScrubberDialog.enable()}function t(){GH.Reports.BurnupChartScrubberDialog.show()}function n(){GH.Reports.BurnupChartScrubberDialog.hide()}function i(){s.hideScrubber()}function u(){b.cancelDrag()}function a(r,e){for(var t=r.length-1;t>=0;t--)if(r[t].timestamp<=e)return r[t].value;return r[0].value}function o(){var r=this.mouseCoordinates(),e=this.xScale().invert,t=this.data();if(r){var n=e(r[0]);GH.Reports.BurnupChartScrubberDialog.refresh({time:t.formatDate(n),scope:t.formatStatistic(a(this.data().scope,n)),completedWork:t.formatStatistic(a(this.data().work,n))})}}function c(){var r=this.selection();s.parent(this),s.interactiveLayer(this),s(r),b.parent(this),b.interactiveLayer(this),b(r),GH.Reports.BurnupChartScrubberDialog.init(s.elements()[0]);var e=this;this.mouseover(function(){t.call(e)}),this.mousemove("ccscrubber",function(){o.call(e)}),this.mouseout(function(){n.call(e)})}var s=c3.scrubber().elementClass("ghx-scrubber").shouldHideScrubber(function(){return GH.Reports.BurnupChartDialog.isVisible()}),b=c3.brush().elementClass("ghx-chart-brush").onDrag(function(){GH.Reports.BurnupChartDialog.hide()});return c3.component().extend(_.once(c)).extend(u).extend({hideScrubber:i,disableScrubber:r,enableScrubber:e})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/lib/jquery/flot/jquery.flot.js' */
/*! Javascript plotting library for jQuery, v. 0.7.
 *
 * Released under the MIT license by IOLA, December 2007.
 *
 */
!function(t){t.color={},t.color.make=function(e,i,n,o){var a={};return a.r=e||0,a.g=i||0,a.b=n||0,a.a=null!=o?o:1,a.add=function(t,e){for(var i=0;i<t.length;++i)a[t.charAt(i)]+=e;return a.normalize()},a.scale=function(t,e){for(var i=0;i<t.length;++i)a[t.charAt(i)]*=e;return a.normalize()},a.toString=function(){return a.a>=1?"rgb("+[a.r,a.g,a.b].join(",")+")":"rgba("+[a.r,a.g,a.b,a.a].join(",")+")"},a.normalize=function(){function t(t,e,i){return e<t?t:e>i?i:e}return a.r=t(0,parseInt(a.r),255),a.g=t(0,parseInt(a.g),255),a.b=t(0,parseInt(a.b),255),a.a=t(0,a.a,1),a},a.clone=function(){return t.color.make(a.r,a.b,a.g,a.a)},a.normalize()},t.color.extract=function(e,i){var n;do{if(n=e.css(i).toLowerCase(),""!=n&&"transparent"!=n)break;e=e.parent()}while(!t.nodeName(e.get(0),"body"));return"rgba(0, 0, 0, 0)"==n&&(n="transparent"),t.color.parse(n)},t.color.parse=function(i){var n,o=t.color.make;if(n=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(i))return o(parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10));if(n=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(i))return o(parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10),parseFloat(n[4]));if(n=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(i))return o(2.55*parseFloat(n[1]),2.55*parseFloat(n[2]),2.55*parseFloat(n[3]));if(n=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(i))return o(2.55*parseFloat(n[1]),2.55*parseFloat(n[2]),2.55*parseFloat(n[3]),parseFloat(n[4]));if(n=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(i))return o(parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16));if(n=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(i))return o(parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16));var a=t.trim(i).toLowerCase();return"transparent"==a?o(255,255,255,0):(n=e[a]||[0,0,0],o(n[0],n[1],n[2]))};var e={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}}(jQuery),function(t){function e(e,o,a,r){function l(t,e){e=[kt].concat(e);for(var i=0;i<t.length;++i)t[i].apply(this,e)}function s(){for(var e=0;e<r.length;++e){var i=r[e];i.init(kt),i.options&&t.extend(!0,rt,i.options)}}function c(e){var i;for(t.extend(!0,rt,e),null==rt.xaxis.color&&(rt.xaxis.color=rt.grid.color),null==rt.yaxis.color&&(rt.yaxis.color=rt.grid.color),null==rt.xaxis.tickColor&&(rt.xaxis.tickColor=rt.grid.tickColor),null==rt.yaxis.tickColor&&(rt.yaxis.tickColor=rt.grid.tickColor),null==rt.grid.borderColor&&(rt.grid.borderColor=rt.grid.color),null==rt.grid.tickColor&&(rt.grid.tickColor=t.color.parse(rt.grid.color).scale("a",.22).toString()),i=0;i<Math.max(1,rt.xaxes.length);++i)rt.xaxes[i]=t.extend(!0,{},rt.xaxis,rt.xaxes[i]);for(i=0;i<Math.max(1,rt.yaxes.length);++i)rt.yaxes[i]=t.extend(!0,{},rt.yaxis,rt.yaxes[i]);for(rt.xaxis.noTicks&&null==rt.xaxis.ticks&&(rt.xaxis.ticks=rt.xaxis.noTicks),rt.yaxis.noTicks&&null==rt.yaxis.ticks&&(rt.yaxis.ticks=rt.yaxis.noTicks),rt.x2axis&&(rt.xaxes[1]=t.extend(!0,{},rt.xaxis,rt.x2axis),rt.xaxes[1].position="top"),rt.y2axis&&(rt.yaxes[1]=t.extend(!0,{},rt.yaxis,rt.y2axis),rt.yaxes[1].position="right"),rt.grid.coloredAreas&&(rt.grid.markings=rt.grid.coloredAreas),rt.grid.coloredAreasColor&&(rt.grid.markingsColor=rt.grid.coloredAreasColor),rt.lines&&t.extend(!0,rt.series.lines,rt.lines),rt.points&&t.extend(!0,rt.series.points,rt.points),rt.bars&&t.extend(!0,rt.series.bars,rt.bars),null!=rt.shadowSize&&(rt.series.shadowSize=rt.shadowSize),i=0;i<rt.xaxes.length;++i)x(ht,i+1).options=rt.xaxes[i];for(i=0;i<rt.yaxes.length;++i)x(mt,i+1).options=rt.yaxes[i];for(var n in bt)rt.hooks[n]&&rt.hooks[n].length&&(bt[n]=bt[n].concat(rt.hooks[n]));l(bt.processOptions,[rt])}function u(t){at=f(t),g(),v()}function f(e){for(var i=[],n=0;n<e.length;++n){var o=t.extend(!0,{},rt.series);null!=e[n].data?(o.data=e[n].data,delete e[n].data,t.extend(!0,o,e[n]),e[n].data=o.data):o.data=e[n],i.push(o)}return i}function h(t,e){var i=t[e+"axis"];return"object"==typeof i&&(i=i.n),"number"!=typeof i&&(i=1),i}function m(){return t.grep(ht.concat(mt),function(t){return t})}function d(t){var e,i,n={};for(e=0;e<ht.length;++e)i=ht[e],i&&i.used&&(n["x"+i.n]=i.c2p(t.left));for(e=0;e<mt.length;++e)i=mt[e],i&&i.used&&(n["y"+i.n]=i.c2p(t.top));return void 0!==n.x1&&(n.x=n.x1),void 0!==n.y1&&(n.y=n.y1),n}function p(t){var e,i,n,o={};for(e=0;e<ht.length;++e)if(i=ht[e],i&&i.used&&(n="x"+i.n,null==t[n]&&1==i.n&&(n="x"),null!=t[n])){o.left=i.p2c(t[n]);break}for(e=0;e<mt.length;++e)if(i=mt[e],i&&i.used&&(n="y"+i.n,null==t[n]&&1==i.n&&(n="y"),null!=t[n])){o.top=i.p2c(t[n]);break}return o}function x(e,i){return e[i-1]||(e[i-1]={n:i,direction:e==ht?"x":"y",options:t.extend(!0,{},e==ht?rt.xaxis:rt.yaxis)}),e[i-1]}function g(){var e,i=at.length,n=[],o=[];for(e=0;e<at.length;++e){var a=at[e].color;null!=a&&(--i,"number"==typeof a?o.push(a):n.push(t.color.parse(at[e].color)))}for(e=0;e<o.length;++e)i=Math.max(i,o[e]+1);var r=[],l=0;for(e=0;r.length<i;){var s;s=rt.colors.length==e?t.color.make(100,100,100):t.color.parse(rt.colors[e]);var c=l%2==1?-1:1;s.scale("rgb",1+c*Math.ceil(l/2)*.2),r.push(s),++e,e>=rt.colors.length&&(e=0,++l)}var u,f=0;for(e=0;e<at.length;++e){if(u=at[e],null==u.color?(u.color=r[f].toString(),++f):"number"==typeof u.color&&(u.color=r[u.color].toString()),null==u.lines.show){var m,d=!0;for(m in u)if(u[m]&&u[m].show){d=!1;break}d&&(u.lines.show=!0)}u.xaxis=x(ht,h(u,"x")),u.yaxis=x(mt,h(u,"y"))}}function v(){function e(t,e,i){e<t.datamin&&e!=-x&&(t.datamin=e),i>t.datamax&&i!=x&&(t.datamax=i)}var i,n,o,a,r,s,c,u,f,h,d=Number.POSITIVE_INFINITY,p=Number.NEGATIVE_INFINITY,x=Number.MAX_VALUE;for(t.each(m(),function(t,e){e.datamin=d,e.datamax=p,e.used=!1}),i=0;i<at.length;++i)r=at[i],r.datapoints={points:[]},l(bt.processRawData,[r,r.data,r.datapoints]);for(i=0;i<at.length;++i){r=at[i];var g=r.data,v=r.datapoints.format;if(v||(v=[],v.push({x:!0,number:!0,required:!0}),v.push({y:!0,number:!0,required:!0}),(r.bars.show||r.lines.show&&r.lines.fill)&&(v.push({y:!0,number:!0,required:!1,defaultValue:0}),r.bars.horizontal&&(delete v[v.length-1].y,v[v.length-1].x=!0)),r.datapoints.format=v),null==r.datapoints.pointsize)for(r.datapoints.pointsize=v.length,c=r.datapoints.pointsize,s=r.datapoints.points,insertSteps=r.lines.show&&r.lines.steps,r.xaxis.used=r.yaxis.used=!0,n=o=0;n<g.length;++n,o+=c){h=g[n];var b=null==h;if(!b)for(a=0;a<c;++a)u=h[a],f=v[a],f&&(f.number&&null!=u&&(u=+u,isNaN(u)?u=null:u==1/0?u=x:u==-(1/0)&&(u=-x)),null==u&&(f.required&&(b=!0),null!=f.defaultValue&&(u=f.defaultValue))),s[o+a]=u;if(b)for(a=0;a<c;++a)u=s[o+a],null!=u&&(f=v[a],f.x&&e(r.xaxis,u,u),f.y&&e(r.yaxis,u,u)),s[o+a]=null;else if(insertSteps&&o>0&&null!=s[o-c]&&s[o-c]!=s[o]&&s[o-c+1]!=s[o+1]){for(a=0;a<c;++a)s[o+c+a]=s[o+a];s[o+1]=s[o-c+1],o+=c}}}for(i=0;i<at.length;++i)r=at[i],l(bt.processDatapoints,[r,r.datapoints]);for(i=0;i<at.length;++i){r=at[i],s=r.datapoints.points,c=r.datapoints.pointsize;var k=d,y=d,T=p,M=p;for(n=0;n<s.length;n+=c)if(null!=s[n])for(a=0;a<c;++a)u=s[n+a],f=v[a],f&&u!=x&&u!=-x&&(f.x&&(u<k&&(k=u),u>T&&(T=u)),f.y&&(u<y&&(y=u),u>M&&(M=u)));if(r.bars.show){void 0==r.bars.barLeft&&(r.bars.barLeft="left"==r.bars.align?0:-r.bars.barWidth/2);var w=r.bars.barLeft;r.bars.horizontal?(y+=w,M+=w+r.bars.barWidth):(k+=w,T+=w+r.bars.barWidth)}e(r.xaxis,k,T),e(r.yaxis,y,M)}t.each(m(),function(t,e){e.datamin==d&&(e.datamin=null),e.datamax==p&&(e.datamax=null)})}function b(i,n){var o=document.createElement("canvas");return o.className=n,o.width=pt,o.height=xt,i||t(o).css({position:"absolute",left:0,top:0}),t(o).appendTo(e),o.getContext||(o=window.G_vmlCanvasManager.initElement(o)),o.getContext("2d").save(),o}function k(){if(pt=e.width(),xt=e.height(),pt<=0||xt<=0)throw"Invalid dimensions for plot, width = "+pt+", height = "+xt}function y(t){t.width!=pt&&(t.width=pt),t.height!=xt&&(t.height=xt);var e=t.getContext("2d");e.restore(),e.save()}function T(){var i,n=e.children("canvas.base"),o=e.children("canvas.overlay");0==n.length||0==o?(e.html(""),e.css({padding:0}),"static"==e.css("position")&&e.css("position","relative"),k(),lt=b(!0,"base"),st=b(!1,"overlay"),i=!1):(lt=n.get(0),st=o.get(0),i=!0),ut=lt.getContext("2d"),ft=st.getContext("2d"),ct=t([st,lt]),i&&(e.data("plot").shutdown(),kt.resize(),ft.clearRect(0,0,pt,xt),ct.unbind(),e.children().not([lt,st]).remove()),e.data("plot",kt)}function M(){rt.grid.hoverable&&(ct.mousemove(G),ct.mouseleave(_)),rt.grid.clickable&&ct.click(J),l(bt.bindEvents,[ct])}function w(){Tt&&clearTimeout(Tt),ct.unbind("mousemove",G),ct.unbind("mouseleave",_),ct.unbind("click",J),l(bt.shutdown,[ct])}function C(t){function e(t){return t}var i,n,o=t.options.transform||e,a=t.options.inverseTransform;"x"==t.direction?(i=t.scale=gt/Math.abs(o(t.max)-o(t.min)),n=Math.min(o(t.max),o(t.min))):(i=t.scale=vt/Math.abs(o(t.max)-o(t.min)),i=-i,n=Math.max(o(t.max),o(t.min))),o==e?t.p2c=function(t){return(t-n)*i}:t.p2c=function(t){return(o(t)-n)*i},a?t.c2p=function(t){return a(n+t/i)}:t.c2p=function(t){return n+t/i}}function S(i){function n(n,o){return t('<div style="position:absolute;top:-10000px;'+o+'font-size:smaller"><div class="'+i.direction+"Axis "+i.direction+i.n+'Axis">'+n.join("")+"</div></div>").appendTo(e)}var o,a,r,l=i.options,s=i.ticks||[],c=[],u=l.labelWidth,f=l.labelHeight;if("x"==i.direction){if(null==u&&(u=Math.floor(pt/(s.length>0?s.length:1))),null==f){for(c=[],o=0;o<s.length;++o)a=s[o].label,a&&c.push('<div class="tickLabel" style="float:left;width:'+u+'px">'+a+"</div>");c.length>0&&(c.push('<div style="clear:left"></div>'),r=n(c,"width:10000px;"),f=r.height(),r.remove())}}else if(null==u||null==f){for(o=0;o<s.length;++o)a=s[o].label,a&&c.push('<div class="tickLabel">'+a+"</div>");c.length>0&&(r=n(c,""),null==u&&(u=r.children().width()),null==f&&(f=r.find("div.tickLabel").height()),r.remove())}null==u&&(u=0),null==f&&(f=0),i.labelWidth=u,i.labelHeight=f}function z(e){var i=e.labelWidth,n=e.labelHeight,o=e.options.position,a=e.options.tickLength,r=rt.grid.axisMargin,l=rt.grid.labelMargin,s="x"==e.direction?ht:mt,c=t.grep(s,function(t){return t&&t.options.position==o&&t.reserveSpace});t.inArray(e,c)==c.length-1&&(r=0),null==a&&(a="full");var u=t.grep(s,function(t){return t&&t.reserveSpace}),f=0==t.inArray(e,u);f||"full"!=a||(a=5),isNaN(+a)||(l+=+a),"x"==e.direction?(n+=l,"bottom"==o?(dt.bottom+=n+r,e.box={top:xt-dt.bottom,height:n}):(e.box={top:dt.top+r,height:n},dt.top+=n+r)):(i+=l,"left"==o?(e.box={left:dt.left+r,width:i},dt.left+=i+r):(dt.right+=i+r,e.box={left:pt-dt.right,width:i})),e.position=o,e.tickLength=a,e.box.padding=l,e.innermost=f}function A(t){"x"==t.direction?(t.box.left=dt.left,t.box.width=gt):(t.box.top=dt.top,t.box.height=vt)}function W(){var e,i=m();if(t.each(i,function(t,e){e.show=e.options.show,null==e.show&&(e.show=e.used),e.reserveSpace=e.show||e.options.reserveSpace,F(e)}),allocatedAxes=t.grep(i,function(t){return t.reserveSpace}),dt.left=dt.right=dt.top=dt.bottom=0,rt.grid.show){for(t.each(allocatedAxes,function(t,e){I(e),U(e),N(e,e.ticks),S(e)}),e=allocatedAxes.length-1;e>=0;--e)z(allocatedAxes[e]);var n=rt.grid.minBorderMargin;if(null==n)for(n=0,e=0;e<at.length;++e)n=Math.max(n,at[e].points.radius+at[e].points.lineWidth/2);for(var o in dt)dt[o]+=rt.grid.borderWidth,dt[o]=Math.max(n,dt[o])}gt=pt-dt.left-dt.right,vt=xt-dt.bottom-dt.top,t.each(i,function(t,e){C(e)}),rt.grid.show&&(t.each(allocatedAxes,function(t,e){A(e)}),O()),B()}function F(t){var e=t.options,i=+(null!=e.min?e.min:t.datamin),n=+(null!=e.max?e.max:t.datamax),o=n-i;if(0==o){var a=0==n?1:.01;null==e.min&&(i-=a),null!=e.max&&null==e.min||(n+=a)}else{var r=e.autoscaleMargin;null!=r&&(null==e.min&&(i-=o*r,i<0&&null!=t.datamin&&t.datamin>=0&&(i=0)),null==e.max&&(n+=o*r,n>0&&null!=t.datamax&&t.datamax<=0&&(n=0)))}t.min=i,t.max=n}function I(e){var i,o=e.options;i="number"==typeof o.ticks&&o.ticks>0?o.ticks:.3*Math.sqrt("x"==e.direction?pt:xt);var a,r,l,s,c,u,f,h=(e.max-e.min)/i;if("time"==o.mode){var m={second:1e3,minute:6e4,hour:36e5,day:864e5,month:2592e6,year:525949.2*60*1e3},d=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"],[3,"month"],[6,"month"],[1,"year"]],p=0;null!=o.minTickSize&&(p="number"==typeof o.tickSize?o.tickSize:o.minTickSize[0]*m[o.minTickSize[1]]);for(var c=0;c<d.length-1&&!(h<(d[c][0]*m[d[c][1]]+d[c+1][0]*m[d[c+1][1]])/2&&d[c][0]*m[d[c][1]]>=p);++c);a=d[c][0],l=d[c][1],"year"==l&&(u=Math.pow(10,Math.floor(Math.log(h/m.year)/Math.LN10)),f=h/m.year/u,a=f<1.5?1:f<3?2:f<7.5?5:10,a*=u),e.tickSize=o.tickSize||[a,l],r=function(t){var e=[],i=t.tickSize[0],o=t.tickSize[1],a=new Date(t.min),r=i*m[o];"second"==o&&a.setUTCSeconds(n(a.getUTCSeconds(),i)),"minute"==o&&a.setUTCMinutes(n(a.getUTCMinutes(),i)),"hour"==o&&a.setUTCHours(n(a.getUTCHours(),i)),"month"==o&&a.setUTCMonth(n(a.getUTCMonth(),i)),"year"==o&&a.setUTCFullYear(n(a.getUTCFullYear(),i)),a.setUTCMilliseconds(0),r>=m.minute&&a.setUTCSeconds(0),r>=m.hour&&a.setUTCMinutes(0),r>=m.day&&a.setUTCHours(0),r>=4*m.day&&a.setUTCDate(1),r>=m.year&&a.setUTCMonth(0);var l,s=0,c=Number.NaN;do if(l=c,c=a.getTime(),e.push(c),"month"==o)if(i<1){a.setUTCDate(1);var u=a.getTime();a.setUTCMonth(a.getUTCMonth()+1);var f=a.getTime();a.setTime(c+s*m.hour+(f-u)*i),s=a.getUTCHours(),a.setUTCHours(0)}else a.setUTCMonth(a.getUTCMonth()+i);else"year"==o?a.setUTCFullYear(a.getUTCFullYear()+i):a.setTime(c+r);while(c<t.max&&c!=l);return e},s=function(e,i){var n=new Date(e);if(null!=o.timeformat)return t.plot.formatDate(n,o.timeformat,o.monthNames);var a=i.tickSize[0]*m[i.tickSize[1]],r=i.max-i.min,l=o.twelveHourClock?" %p":"";return a<m.minute?fmt="%h:%M:%S"+l:a<m.day?r<2*m.day?fmt="%h:%M"+l:fmt="%b %d %h:%M"+l:a<m.month?fmt="%b %d":a<m.year?r<m.year?fmt="%b":fmt="%b %y":fmt="%y",t.plot.formatDate(n,fmt,o.monthNames)}}else{var x=o.tickDecimals,g=-Math.floor(Math.log(h)/Math.LN10);null!=x&&g>x&&(g=x),u=Math.pow(10,-g),f=h/u,f<1.5?a=1:f<3?(a=2,f>2.25&&(null==x||g+1<=x)&&(a=2.5,++g)):a=f<7.5?5:10,a*=u,null!=o.minTickSize&&a<o.minTickSize&&(a=o.minTickSize),e.tickDecimals=Math.max(0,null!=x?x:g),e.tickSize=o.tickSize||a,r=function(t){var e,i=[],o=n(t.min,t.tickSize),a=0,r=Number.NaN;do e=r,r=o+a*t.tickSize,i.push(r),++a;while(r<t.max&&r!=e);return i},s=function(t,e){return t.toFixed(e.tickDecimals)}}if(null!=o.alignTicksWithAxis){var v=("x"==e.direction?ht:mt)[o.alignTicksWithAxis-1];if(v&&v.used&&v!=e){var b=r(e);if(b.length>0&&(null==o.min&&(e.min=Math.min(e.min,b[0])),null==o.max&&b.length>1&&(e.max=Math.max(e.max,b[b.length-1]))),r=function(t){var e,i,n=[];for(i=0;i<v.ticks.length;++i)e=(v.ticks[i].v-v.min)/(v.max-v.min),e=t.min+e*(t.max-t.min),n.push(e);return n},"time"!=e.mode&&null==o.tickDecimals){var k=Math.max(0,-Math.floor(Math.log(h)/Math.LN10)+1),y=r(e);y.length>1&&/\..*0$/.test((y[1]-y[0]).toFixed(k))||(e.tickDecimals=k)}}}e.tickGenerator=r,t.isFunction(o.tickFormatter)?e.tickFormatter=function(t,e){return""+o.tickFormatter(t,e)}:e.tickFormatter=s}function U(e){var i=e.options.ticks,n=[];null==i||"number"==typeof i&&i>0?n=e.tickGenerator(e):i&&(n=t.isFunction(i)?i({min:e.min,max:e.max}):i);var o,a;for(e.ticks=[],o=0;o<n.length;++o){var r=null,l=n[o];"object"==typeof l?(a=+l[0],l.length>1&&(r=l[1])):a=+l,null==r&&(r=e.tickFormatter(a,e)),isNaN(a)||e.ticks.push({v:a,label:r})}}function N(t,e){t.options.autoscaleMargin&&e.length>0&&(null==t.options.min&&(t.min=Math.min(t.min,e[0].v)),null==t.options.max&&e.length>1&&(t.max=Math.max(t.max,e[e.length-1].v)))}function L(){ut.clearRect(0,0,pt,xt);var t=rt.grid;t.show&&t.backgroundColor&&P(),t.show&&!t.aboveData&&H();for(var e=0;e<at.length;++e)l(bt.drawSeries,[ut,at[e]]),Y(at[e]);l(bt.draw,[ut]),t.show&&t.aboveData&&H()}function D(t,e){var n,o,a,r,l=m();for(i=0;i<l.length;++i)if(n=l[i],n.direction==e&&(r=e+n.n+"axis",t[r]||1!=n.n||(r=e+"axis"),t[r])){o=t[r].from,a=t[r].to;break}if(t[r]||(n="x"==e?ht[0]:mt[0],o=t[e+"1"],a=t[e+"2"]),null!=o&&null!=a&&o>a){var s=o;o=a,a=s}return{from:o,to:a,axis:n}}function P(){ut.save(),ut.translate(dt.left,dt.top),ut.fillStyle=ot(rt.grid.backgroundColor,vt,0,"rgba(255, 255, 255, 0)"),ut.fillRect(0,0,gt,vt),ut.restore()}function H(){var e;ut.save(),ut.translate(dt.left,dt.top);var i=rt.grid.markings;if(i){if(t.isFunction(i)){var n=kt.getAxes();n.xmin=n.xaxis.min,n.xmax=n.xaxis.max,n.ymin=n.yaxis.min,n.ymax=n.yaxis.max,i=i(n)}for(e=0;e<i.length;++e){var o=i[e],a=D(o,"x"),r=D(o,"y");null==a.from&&(a.from=a.axis.min),null==a.to&&(a.to=a.axis.max),null==r.from&&(r.from=r.axis.min),null==r.to&&(r.to=r.axis.max),a.to<a.axis.min||a.from>a.axis.max||r.to<r.axis.min||r.from>r.axis.max||(a.from=Math.max(a.from,a.axis.min),a.to=Math.min(a.to,a.axis.max),r.from=Math.max(r.from,r.axis.min),r.to=Math.min(r.to,r.axis.max),a.from==a.to&&r.from==r.to||(a.from=a.axis.p2c(a.from),a.to=a.axis.p2c(a.to),r.from=r.axis.p2c(r.from),r.to=r.axis.p2c(r.to),a.from==a.to||r.from==r.to?(ut.beginPath(),ut.strokeStyle=o.color||rt.grid.markingsColor,ut.lineWidth=o.lineWidth||rt.grid.markingsLineWidth,ut.moveTo(a.from,r.from),ut.lineTo(a.to,r.to),ut.stroke()):(ut.fillStyle=o.color||rt.grid.markingsColor,ut.fillRect(a.from,r.to,a.to-a.from,r.from-r.to))))}}for(var n=m(),l=rt.grid.borderWidth,s=0;s<n.length;++s){var c,u,f,h,d=n[s],p=d.box,x=d.tickLength;if(d.show&&0!=d.ticks.length){for(ut.strokeStyle=d.options.tickColor||t.color.parse(d.options.color).scale("a",.22).toString(),ut.lineWidth=1,"x"==d.direction?(c=0,u="full"==x?"top"==d.position?0:vt:p.top-dt.top+("top"==d.position?p.height:0)):(u=0,c="full"==x?"left"==d.position?0:gt:p.left-dt.left+("left"==d.position?p.width:0)),d.innermost||(ut.beginPath(),f=h=0,"x"==d.direction?f=gt:h=vt,1==ut.lineWidth&&(c=Math.floor(c)+.5,u=Math.floor(u)+.5),ut.moveTo(c,u),ut.lineTo(c+f,u+h),ut.stroke()),ut.beginPath(),e=0;e<d.ticks.length;++e){var g=d.ticks[e].v;f=h=0,g<d.min||g>d.max||"full"==x&&l>0&&(g==d.min||g==d.max)||("x"==d.direction?(c=d.p2c(g),h="full"==x?-vt:x,"top"==d.position&&(h=-h)):(u=d.p2c(g),f="full"==x?-gt:x,"left"==d.position&&(f=-f)),1==ut.lineWidth&&("x"==d.direction?c=Math.floor(c)+.5:u=Math.floor(u)+.5),ut.moveTo(c,u),ut.lineTo(c+f,u+h))}ut.stroke()}}l&&(ut.lineWidth=l,ut.strokeStyle=rt.grid.borderColor,ut.strokeRect(-l/2,-l/2,gt+l,vt+l)),ut.restore()}function O(){e.find(".tickLabels").remove();for(var t=['<div class="tickLabels" style="font-size:smaller">'],i=m(),n=0;n<i.length;++n){var o=i[n],a=o.box;if(o.show){t.push('<div class="'+o.direction+"Axis "+o.direction+o.n+'Axis" style="color:'+o.options.color+'">');for(var r=0;r<o.ticks.length;++r){var l=o.ticks[r];if(!(!l.label||l.v<o.min||l.v>o.max)){var s,c={};"x"==o.direction?(s="center",c.left=Math.round(dt.left+o.p2c(l.v)-o.labelWidth/2),"bottom"==o.position?c.top=a.top+a.padding:c.bottom=xt-(a.top+a.height-a.padding)):(c.top=Math.round(dt.top+o.p2c(l.v)-o.labelHeight/2),"left"==o.position?s="right":(c.left=a.left+a.padding,s="left")),c.width=o.labelWidth;var u=["position:absolute","text-align:"+s];for(var f in c)u.push(f+":"+c[f]+"px");t.push('<div class="tickLabel" style="'+u.join(";")+'">'+l.label+"</div>")}}t.push("</div>")}}t.push("</div>"),e.append(t.join(""))}function Y(t){t.lines.show&&j(t),t.bars.show&&V(t),t.points.show&&R(t)}function j(t){function e(t,e,i,n,o){var a=t.points,r=t.pointsize,l=null,s=null;ut.beginPath();for(var c=r;c<a.length;c+=r){var u=a[c-r],f=a[c-r+1],h=a[c],m=a[c+1];if(null!=u&&null!=h){if(f<=m&&f<o.min){if(m<o.min)continue;u=(o.min-f)/(m-f)*(h-u)+u,f=o.min}else if(m<=f&&m<o.min){if(f<o.min)continue;h=(o.min-f)/(m-f)*(h-u)+u,m=o.min}if(f>=m&&f>o.max){if(m>o.max)continue;u=(o.max-f)/(m-f)*(h-u)+u,f=o.max}else if(m>=f&&m>o.max){if(f>o.max)continue;h=(o.max-f)/(m-f)*(h-u)+u,m=o.max}if(u<=h&&u<n.min){if(h<n.min)continue;f=(n.min-u)/(h-u)*(m-f)+f,u=n.min}else if(h<=u&&h<n.min){if(u<n.min)continue;m=(n.min-u)/(h-u)*(m-f)+f,h=n.min}if(u>=h&&u>n.max){if(h>n.max)continue;f=(n.max-u)/(h-u)*(m-f)+f,u=n.max}else if(h>=u&&h>n.max){if(u>n.max)continue;m=(n.max-u)/(h-u)*(m-f)+f,h=n.max}u==l&&f==s||ut.moveTo(n.p2c(u)+e,o.p2c(f)+i),l=h,s=m,ut.lineTo(n.p2c(h)+e,o.p2c(m)+i)}}ut.stroke()}function i(t,e,i){for(var n=t.points,o=t.pointsize,a=Math.min(Math.max(0,i.min),i.max),r=0,l=!1,s=1,c=0,u=0;;){if(o>0&&r>n.length+o)break;r+=o;var f=n[r-o],h=n[r-o+s],m=n[r],d=n[r+s];if(l){if(o>0&&null!=f&&null==m){u=r,o=-o,s=2;continue}if(o<0&&r==c+o){ut.fill(),l=!1,o=-o,s=1,r=c=u+o;continue}}if(null!=f&&null!=m){if(f<=m&&f<e.min){if(m<e.min)continue;h=(e.min-f)/(m-f)*(d-h)+h,f=e.min}else if(m<=f&&m<e.min){if(f<e.min)continue;d=(e.min-f)/(m-f)*(d-h)+h,m=e.min}if(f>=m&&f>e.max){if(m>e.max)continue;h=(e.max-f)/(m-f)*(d-h)+h,f=e.max}else if(m>=f&&m>e.max){if(f>e.max)continue;d=(e.max-f)/(m-f)*(d-h)+h,m=e.max}if(l||(ut.beginPath(),ut.moveTo(e.p2c(f),i.p2c(a)),l=!0),h>=i.max&&d>=i.max)ut.lineTo(e.p2c(f),i.p2c(i.max)),ut.lineTo(e.p2c(m),i.p2c(i.max));else if(h<=i.min&&d<=i.min)ut.lineTo(e.p2c(f),i.p2c(i.min)),ut.lineTo(e.p2c(m),i.p2c(i.min));else{var p=f,x=m;h<=d&&h<i.min&&d>=i.min?(f=(i.min-h)/(d-h)*(m-f)+f,h=i.min):d<=h&&d<i.min&&h>=i.min&&(m=(i.min-h)/(d-h)*(m-f)+f,d=i.min),h>=d&&h>i.max&&d<=i.max?(f=(i.max-h)/(d-h)*(m-f)+f,h=i.max):d>=h&&d>i.max&&h<=i.max&&(m=(i.max-h)/(d-h)*(m-f)+f,d=i.max),f!=p&&ut.lineTo(e.p2c(p),i.p2c(h)),ut.lineTo(e.p2c(f),i.p2c(h)),ut.lineTo(e.p2c(m),i.p2c(d)),m!=x&&(ut.lineTo(e.p2c(m),i.p2c(d)),ut.lineTo(e.p2c(x),i.p2c(d)))}}}}ut.save(),ut.translate(dt.left,dt.top),ut.lineJoin="round";var n=t.lines.lineWidth,o=t.shadowSize;if(n>0&&o>0){ut.lineWidth=o,ut.strokeStyle="rgba(0,0,0,0.1)";var a=Math.PI/18;e(t.datapoints,Math.sin(a)*(n/2+o/2),Math.cos(a)*(n/2+o/2),t.xaxis,t.yaxis),ut.lineWidth=o/2,e(t.datapoints,Math.sin(a)*(n/2+o/4),Math.cos(a)*(n/2+o/4),t.xaxis,t.yaxis)}ut.lineWidth=n,ut.strokeStyle=t.color;var r=X(t.lines,t.color,0,vt);r&&(ut.fillStyle=r,i(t.datapoints,t.xaxis,t.yaxis)),n>0&&e(t.datapoints,0,0,t.xaxis,t.yaxis),ut.restore()}function R(t){function e(t,e,i,n,o,a,r,l){for(var s=t.points,c=t.pointsize,u=0;u<s.length;u+=c){var f=s[u],h=s[u+1];null==f||f<a.min||f>a.max||h<r.min||h>r.max||(ut.beginPath(),f=a.p2c(f),h=r.p2c(h)+n,"circle"==l?ut.arc(f,h,e,0,o?Math.PI:2*Math.PI,!1):l(ut,f,h,e,o),ut.closePath(),i&&(ut.fillStyle=i,ut.fill()),ut.stroke())}}ut.save(),ut.translate(dt.left,dt.top);var i=t.points.lineWidth,n=t.shadowSize,o=t.points.radius,a=t.points.symbol;if(i>0&&n>0){var r=n/2;ut.lineWidth=r,ut.strokeStyle="rgba(0,0,0,0.1)",e(t.datapoints,o,null,r+r/2,!0,t.xaxis,t.yaxis,a),ut.strokeStyle="rgba(0,0,0,0.2)",e(t.datapoints,o,null,r/2,!0,t.xaxis,t.yaxis,a)}ut.lineWidth=i,ut.strokeStyle=t.color,e(t.datapoints,o,X(t.points,t.color),0,!1,t.xaxis,t.yaxis,a),ut.restore()}function E(t,e,i,n,o,a,r,l,s,c,u,f){var h,m,d,p,x,g,v,b,k;u?(b=g=v=!0,x=!1,h=i,m=t,p=e+n,d=e+o,m<h&&(k=m,m=h,h=k,x=!0,g=!1)):(x=g=v=!0,b=!1,h=t+n,m=t+o,d=i,p=e,p<d&&(k=p,p=d,d=k,b=!0,v=!1)),m<l.min||h>l.max||p<s.min||d>s.max||(h<l.min&&(h=l.min,x=!1),m>l.max&&(m=l.max,g=!1),d<s.min&&(d=s.min,b=!1),p>s.max&&(p=s.max,v=!1),h=l.p2c(h),d=s.p2c(d),m=l.p2c(m),p=s.p2c(p),r&&(c.beginPath(),c.moveTo(h,d),c.lineTo(h,p),c.lineTo(m,p),c.lineTo(m,d),c.fillStyle=r(d,p),c.fill()),f>0&&(x||g||v||b)&&(c.beginPath(),c.moveTo(h,d+a),x?c.lineTo(h,p+a):c.moveTo(h,p+a),v?c.lineTo(m,p+a):c.moveTo(m,p+a),g?c.lineTo(m,d+a):c.moveTo(m,d+a),b?c.lineTo(h,d+a):c.moveTo(h,d+a),c.stroke()))}function V(t){function e(e,i,n,o,a,r,l){for(var s=e.points,c=e.pointsize,u=0;u<s.length;u+=c)null!=s[u]&&E(s[u],s[u+1],s[u+2],i,n,o,a,r,l,ut,t.bars.horizontal,t.bars.lineWidth)}ut.save(),ut.translate(dt.left,dt.top),ut.lineWidth=t.bars.lineWidth,ut.strokeStyle=t.color;var i=t.bars.barLeft,n=t.bars.fill?function(e,i){return X(t.bars,t.color,e,i)}:null;e(t.datapoints,i,i+t.bars.barWidth,0,n,t.xaxis,t.yaxis),ut.restore()}function X(e,i,n,o){var a=e.fill;if(!a)return null;if(e.fillColor)return ot(e.fillColor,n,o,i);var r=t.color.parse(i);return r.a="number"==typeof a?a:.4,r.normalize(),r.toString()}function B(){if(e.find(".legend").remove(),rt.legend.show){for(var i,n,o=[],a=!1,r=rt.legend.labelFormatter,l=0;l<at.length;++l)i=at[l],n=i.label,n&&(l%rt.legend.noColumns==0&&(a&&o.push("</tr>"),o.push("<tr>"),a=!0),r&&(n=r(n,i)),o.push('<td class="legendColorBox"><div style="border:1px solid '+rt.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+i.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+n+"</td>"));if(a&&o.push("</tr>"),0!=o.length){var s='<table style="font-size:smaller;color:'+rt.grid.color+'">'+o.join("")+"</table>";if(null!=rt.legend.container)t(rt.legend.container).html(s);else{var c="",u=rt.legend.position,f=rt.legend.margin;null==f[0]&&(f=[f,f]),"n"==u.charAt(0)?c+="top:"+(f[1]+dt.top)+"px;":"s"==u.charAt(0)&&(c+="bottom:"+(f[1]+dt.bottom)+"px;"),"e"==u.charAt(1)?c+="right:"+(f[0]+dt.right)+"px;":"w"==u.charAt(1)&&(c+="left:"+(f[0]+dt.left)+"px;");var h=t('<div class="legend">'+s.replace('style="','style="position:absolute;'+c+";")+"</div>").appendTo(e);if(0!=rt.legend.backgroundOpacity){var m=rt.legend.backgroundColor;null==m&&(m=rt.grid.backgroundColor,m=m&&"string"==typeof m?t.color.parse(m):t.color.extract(h,"background-color"),m.a=1,m=m.toString());var d=h.children();t('<div style="position:absolute;width:'+d.width()+"px;height:"+d.height()+"px;"+c+"background-color:"+m+';"> </div>').prependTo(h).css("opacity",rt.legend.backgroundOpacity)}}}}}function q(t,e,i){var n,o,a=rt.grid.mouseActiveRadius,r=a*a+1,l=null;for(n=at.length-1;n>=0;--n)if(i(at[n])){var s=at[n],c=s.xaxis,u=s.yaxis,f=s.datapoints.points,h=s.datapoints.pointsize,m=c.c2p(t),d=u.c2p(e),p=a/c.scale,x=a/u.scale;if(c.options.inverseTransform&&(p=Number.MAX_VALUE),u.options.inverseTransform&&(x=Number.MAX_VALUE),s.lines.show||s.points.show)for(o=0;o<f.length;o+=h){var g=f[o],v=f[o+1];if(null!=g&&!(g-m>p||g-m<-p||v-d>x||v-d<-x)){var b=Math.abs(c.p2c(g)-t),k=Math.abs(u.p2c(v)-e),y=b*b+k*k;y<r&&(r=y,l=[n,o/h])}}if(s.bars.show&&!l){var T=s.bars.barLeft,M=T+s.bars.barWidth;for(o=0;o<f.length;o+=h){var g=f[o],v=f[o+1],w=f[o+2];null!=g&&(at[n].bars.horizontal?m<=Math.max(w,g)&&m>=Math.min(w,g)&&d>=v+T&&d<=v+M:m>=g+T&&m<=g+M&&d>=Math.min(w,v)&&d<=Math.max(w,v))&&(l=[n,o/h])}}}return l?(n=l[0],o=l[1],h=at[n].datapoints.pointsize,{datapoint:at[n].datapoints.points.slice(o*h,(o+1)*h),dataIndex:o,series:at[n],seriesIndex:n}):null}function G(t){rt.grid.hoverable&&Q("plothover",t,function(t){return 0!=t.hoverable})}function _(t){rt.grid.hoverable&&Q("plothover",t,function(t){return!1})}function J(t){Q("plotclick",t,function(t){return 0!=t.clickable})}function Q(t,i,n){var o=ct.offset(),a=i.pageX-o.left-dt.left,r=i.pageY-o.top-dt.top,l=d({left:a,top:r});l.pageX=i.pageX,l.pageY=i.pageY;var s=q(a,r,n);if(s&&(s.pageX=parseInt(s.series.xaxis.p2c(s.datapoint[0])+o.left+dt.left),s.pageY=parseInt(s.series.yaxis.p2c(s.datapoint[1])+o.top+dt.top)),rt.grid.autoHighlight){for(var c=0;c<yt.length;++c){var u=yt[c];u.auto!=t||s&&u.series==s.series&&u.point[0]==s.datapoint[0]&&u.point[1]==s.datapoint[1]||tt(u.series,u.point)}s&&Z(s.series,s.datapoint,t)}e.trigger(t,[l,s])}function $(){Tt||(Tt=setTimeout(K,30))}function K(){Tt=null,ft.save(),ft.clearRect(0,0,pt,xt),ft.translate(dt.left,dt.top);var t,e;for(t=0;t<yt.length;++t)e=yt[t],e.series.bars.show?nt(e.series,e.point):it(e.series,e.point);ft.restore(),l(bt.drawOverlay,[ft])}function Z(t,e,i){if("number"==typeof t&&(t=at[t]),"number"==typeof e){var n=t.datapoints.pointsize;e=t.datapoints.points.slice(n*e,n*(e+1))}var o=et(t,e);o==-1?(yt.push({series:t,point:e,auto:i}),$()):i||(yt[o].auto=!1)}function tt(t,e){null==t&&null==e&&(yt=[],$()),"number"==typeof t&&(t=at[t]),"number"==typeof e&&(e=t.data[e]);var i=et(t,e);i!=-1&&(yt.splice(i,1),$())}function et(t,e){for(var i=0;i<yt.length;++i){var n=yt[i];if(n.series==t&&n.point[0]==e[0]&&n.point[1]==e[1])return i}return-1}function it(e,i){var n=i[0],o=i[1],a=e.xaxis,r=e.yaxis;if(!(n<a.min||n>a.max||o<r.min||o>r.max)){var l=e.points.radius+e.points.lineWidth/2;ft.lineWidth=l,ft.strokeStyle=t.color.parse(e.color).scale("a",.5).toString();var s=1.5*l,n=a.p2c(n),o=r.p2c(o);ft.beginPath(),"circle"==e.points.symbol?ft.arc(n,o,s,0,2*Math.PI,!1):e.points.symbol(ft,n,o,s,!1),ft.closePath(),ft.stroke()}}function nt(e,i){ft.lineWidth=e.bars.lineWidth,ft.strokeStyle=t.color.parse(e.color).scale("a",.5).toString();var n=t.color.parse(e.color).scale("a",.5).toString(),o=e.bars.barLeft;E(i[0],i[1],i[2]||0,o,o+e.bars.barWidth,0,function(){return n},e.xaxis,e.yaxis,ft,e.bars.horizontal,e.bars.lineWidth)}function ot(e,i,n,o){if("string"==typeof e)return e;for(var a=ut.createLinearGradient(0,n,0,i),r=0,l=e.colors.length;r<l;++r){var s=e.colors[r];if("string"!=typeof s){var c=t.color.parse(o);null!=s.brightness&&(c=c.scale("rgb",s.brightness)),null!=s.opacity&&(c.a*=s.opacity),s=c.toString()}a.addColorStop(r/(l-1),s)}return a}var at=[],rt={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85},xaxis:{show:null,position:"bottom",mode:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null,monthNames:null,timeformat:null,twelveHourClock:!1},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1},shadowSize:3},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},hooks:{}},lt=null,st=null,ct=null,ut=null,ft=null,ht=[],mt=[],dt={left:0,right:0,top:0,bottom:0},pt=0,xt=0,gt=0,vt=0,bt={processOptions:[],processRawData:[],processDatapoints:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},kt=this;kt.setData=u,kt.setupGrid=W,kt.draw=L,kt.getPlaceholder=function(){return e},kt.getCanvas=function(){return lt},kt.getPlotOffset=function(){return dt},kt.width=function(){return gt},kt.height=function(){return vt},kt.offset=function(){var t=ct.offset();return t.left+=dt.left,t.top+=dt.top,t},kt.getData=function(){return at},kt.getAxes=function(){var e={};return t.each(ht.concat(mt),function(t,i){i&&(e[i.direction+(1!=i.n?i.n:"")+"axis"]=i)}),e},kt.getXAxes=function(){return ht},kt.getYAxes=function(){return mt},kt.c2p=d,kt.p2c=p,kt.getOptions=function(){return rt},kt.highlight=Z,kt.unhighlight=tt,kt.triggerRedrawOverlay=$,kt.pointOffset=function(t){return{left:parseInt(ht[h(t,"x")-1].p2c(+t.x)+dt.left),
top:parseInt(mt[h(t,"y")-1].p2c(+t.y)+dt.top)}},kt.shutdown=w,kt.resize=function(){k(),y(lt),y(st)},kt.hooks=bt,s(kt),c(a),T(),u(o),W(),L(),M();var yt=[],Tt=null}function n(t,e){return e*Math.floor(t/e)}t.plot=function(i,n,o){var a=new e(t(i),n,o,t.plot.plugins);return a},t.plot.version="0.7",t.plot.plugins=[],t.plot.formatDate=function(t,e,i){var n=function(t){return t=""+t,1==t.length?"0"+t:t},o=[],a=!1,r=!1,l=t.getUTCHours(),s=l<12;null==i&&(i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),e.search(/%p|%P/)!=-1&&(l>12?l-=12:0==l&&(l=12));for(var c=0;c<e.length;++c){var u=e.charAt(c);if(a){switch(u){case"h":u=""+l;break;case"H":u=n(l);break;case"M":u=n(t.getUTCMinutes());break;case"S":u=n(t.getUTCSeconds());break;case"d":u=""+t.getUTCDate();break;case"m":u=""+(t.getUTCMonth()+1);break;case"y":u=""+t.getUTCFullYear();break;case"b":u=""+i[t.getUTCMonth()];break;case"p":u=s?"am":"pm";break;case"P":u=s?"AM":"PM";break;case"0":u="",r=!0}u&&r&&(u=n(u),r=!1),o.push(u),r||(a=!1)}else"%"==u?a=!0:o.push(u)}return o.join("")}}(jQuery);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/lib/jquery/flot/jquery.flot.fillbetween.js' */
!function(e){function n(e){function n(e,n){var l;for(l=0;l<n.length;++l)if(n[l].id==e.fillBetween)return n[l];return"number"==typeof e.fillBetween?(l=e.fillBetween,l<0||l>=n.length?null:n[l]):null}function l(e,l,i){if(null!=l.fillBetween){var t=n(l,e.getData());if(t){for(var s,f,o,u,p,r,h,a=i.pointsize,g=i.points,w=t.datapoints.pointsize,c=t.datapoints.points,v=[],B=l.lines.show,b=a>2&&i.format[2].y,d=B&&l.lines.steps,y=!0,k=0,z=0;;){if(k>=g.length)break;if(h=v.length,null==g[k]){for(m=0;m<a;++m)v.push(g[k+m]);k+=a}else if(z>=c.length){if(!B)for(m=0;m<a;++m)v.push(g[k+m]);k+=a}else if(null==c[z]){for(m=0;m<a;++m)v.push(null);y=!0,z+=w}else{if(s=g[k],f=g[k+1],u=c[z],p=c[z+1],r=0,s==u){for(m=0;m<a;++m)v.push(g[k+m]);r=p,k+=a,z+=w}else if(s>u){if(B&&k>0&&null!=g[k-a]){for(o=f+(g[k-a+1]-f)*(u-s)/(g[k-a]-s),v.push(u),v.push(o),m=2;m<a;++m)v.push(g[k+m]);r=p}z+=w}else{if(y&&B){k+=a;continue}for(m=0;m<a;++m)v.push(g[k+m]);B&&z>0&&null!=c[z-w]&&(r=p+(c[z-w+1]-p)*(s-u)/(c[z-w]-u)),k+=a}y=!1,h!=v.length&&b&&(v[h+2]=r)}if(d&&h!=v.length&&h>0&&null!=v[h]&&v[h]!=v[h-a]&&v[h+1]!=v[h-a+1]){for(m=0;m<a;++m)v[h+a+m]=v[h+m];v[h+1]=v[h-a+1]}}i.points=v}}}e.hooks.processDatapoints.push(l)}var l={series:{fillBetween:null}};e.plot.plugins.push({init:n,options:l,name:"fillbetween",version:"1.0"})}(jQuery);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/lib/jquery/flot/jquery.flot.stack.js' */
!function(n){function s(n){function s(n,s){for(var t=null,i=0;i<s.length&&n!=s[i];++i)s[i].stack==n.stack&&(t=s[i]);return t}function t(n,t,i){if(null!=t.stack){var l=s(t,n.getData());if(l){for(var o,e,f,u,r,a,p,h=i.pointsize,c=i.points,g=l.datapoints.pointsize,k=l.datapoints.points,v=[],z=t.lines.show,b=t.bars.horizontal,d=h>2&&(b?i.format[2].x:i.format[2].y),y=z&&t.lines.steps,D=!0,j=b?1:0,w=b?0:1,x=0,Q=0;;){if(x>=c.length)break;if(p=v.length,null==c[x]){for(m=0;m<h;++m)v.push(c[x+m]);x+=h}else if(Q>=k.length){if(!z)for(m=0;m<h;++m)v.push(c[x+m]);x+=h}else if(null==k[Q]){for(m=0;m<h;++m)v.push(null);D=!0,Q+=g}else{if(o=c[x+j],e=c[x+w],u=k[Q+j],r=k[Q+w],a=0,o==u){for(m=0;m<h;++m)v.push(c[x+m]);v[p+w]+=r,a=r,x+=h,Q+=g}else if(o>u){if(z&&x>0&&null!=c[x-h]){for(f=e+(c[x-h+w]-e)*(u-o)/(c[x-h+j]-o),v.push(u),v.push(f+r),m=2;m<h;++m)v.push(c[x+m]);a=r}Q+=g}else{if(D&&z){x+=h;continue}for(m=0;m<h;++m)v.push(c[x+m]);z&&Q>0&&null!=k[Q-g]&&(a=r+(k[Q-g+w]-r)*(o-u)/(k[Q-g+j]-u)),v[p+w]+=a,x+=h}D=!1,p!=v.length&&d&&(v[p+2]+=a)}if(y&&p!=v.length&&p>0&&null!=v[p]&&v[p]!=v[p-h]&&v[p+1]!=v[p-h+1]){for(m=0;m<h;++m)v[p+h+m]=v[p+m];v[p+1]=v[p-h+1]}}i.points=v}}}n.hooks.processDatapoints.push(t)}var t={series:{stack:null}};n.plot.plugins.push({init:s,options:t,name:"stack",version:"1.2"})}(jQuery);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/lib/jquery/flot/jquery.flot.selection.js' */
!function(e){function t(t){function o(e){h.active&&(a(e),t.getPlaceholder().trigger("plotselecting",[r()]))}function n(t){1==t.which&&(document.body.focus(),void 0!==document.onselectstart&&null==x.onselectstart&&(x.onselectstart=document.onselectstart,document.onselectstart=function(){return!1}),void 0!==document.ondrag&&null==x.ondrag&&(x.ondrag=document.ondrag,document.ondrag=function(){return!1}),l(h.first,t),h.active=!0,m=function(e){i(e)},e(document).one("mouseup",m))}function i(e){return m=null,void 0!==document.onselectstart&&(document.onselectstart=x.onselectstart),void 0!==document.ondrag&&(document.ondrag=x.ondrag),h.active=!1,a(e),g()?s():(t.getPlaceholder().trigger("plotunselected",[]),t.getPlaceholder().trigger("plotselecting",[null])),!1}function r(){if(!g())return null;var o={},n=h.first,i=h.second;return e.each(t.getAxes(),function(e,t){if(t.used){var r=t.c2p(n[t.direction]),s=t.c2p(i[t.direction]);o[e]={from:Math.min(r,s),to:Math.max(r,s)}}}),o}function s(){var e=r();t.getPlaceholder().trigger("plotselected",[e]),e.xaxis&&e.yaxis&&t.getPlaceholder().trigger("selected",[{x1:e.xaxis.from,y1:e.yaxis.from,x2:e.xaxis.to,y2:e.yaxis.to}])}function c(e,t,o){return t<e?e:t>o?o:t}function l(e,o){var n=t.getOptions(),i=t.getPlaceholder().offset(),r=t.getPlotOffset();e.x=c(0,o.pageX-i.left-r.left,t.width()),e.y=c(0,o.pageY-i.top-r.top,t.height()),"y"==n.selection.mode&&(e.x=e==h.first?0:t.width()),"x"==n.selection.mode&&(e.y=e==h.first?0:t.height())}function a(e){null!=e.pageX&&(l(h.second,e),g()?(h.show=!0,t.triggerRedrawOverlay()):d(!0))}function d(e){h.show&&(h.show=!1,t.triggerRedrawOverlay(),e||t.getPlaceholder().trigger("plotunselected",[]))}function u(e,o){var n,i,r,s,c=t.getAxes();for(var l in c)if(n=c[l],n.direction==o&&(s=o+n.n+"axis",e[s]||1!=n.n||(s=o+"axis"),e[s])){i=e[s].from,r=e[s].to;break}if(e[s]||(n="x"==o?t.getXAxes()[0]:t.getYAxes()[0],i=e[o+"1"],r=e[o+"2"]),null!=i&&null!=r&&i>r){var a=i;i=r,r=a}return{from:i,to:r,axis:n}}function f(e,o){var n,i=t.getOptions();"y"==i.selection.mode?(h.first.x=0,h.second.x=t.width()):(n=u(e,"x"),h.first.x=n.axis.p2c(n.from),h.second.x=n.axis.p2c(n.to)),"x"==i.selection.mode?(h.first.y=0,h.second.y=t.height()):(n=u(e,"y"),h.first.y=n.axis.p2c(n.from),h.second.y=n.axis.p2c(n.to)),h.show=!0,t.triggerRedrawOverlay(),!o&&g()&&s()}function g(){var e=5;return Math.abs(h.second.x-h.first.x)>=e&&Math.abs(h.second.y-h.first.y)>=e}var h={first:{x:-1,y:-1},second:{x:-1,y:-1},show:!1,active:!1},x={},m=null;t.clearSelection=d,t.setSelection=f,t.getSelection=r,t.hooks.bindEvents.push(function(e,t){var i=e.getOptions();null!=i.selection.mode&&(t.mousemove(o),t.mousedown(n))}),t.hooks.drawOverlay.push(function(t,o){if(h.show&&g()){var n=t.getPlotOffset(),i=t.getOptions();o.save(),o.translate(n.left,n.top);var r=e.color.parse(i.selection.color);o.strokeStyle=r.scale("a",.8).toString(),o.lineWidth=1,o.lineJoin="round",o.fillStyle=r.scale("a",.4).toString();var s=Math.min(h.first.x,h.second.x),c=Math.min(h.first.y,h.second.y),l=Math.abs(h.second.x-h.first.x),a=Math.abs(h.second.y-h.first.y);o.fillRect(s,c,l,a),o.strokeRect(s,c,l,a),o.restore()}}),t.hooks.shutdown.push(function(t,i){i.unbind("mousemove",o),i.unbind("mousedown",n),m&&e(document).unbind("mouseup",m)})}e.plot.plugins.push({init:t,options:{selection:{mode:null,color:"#e8cfac"}},name:"selection",version:"1.1"})}(jQuery);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/lib/jquery/flot/jquery.flot.mouseenterexit.js' */
!function(e){function t(e){e.hooks.bindEvents.push(function(e,t){var o=function(t){e.getOptions().mouseEnterExitEvents&&(e.mouseEntered||(e.mouseEntered=!0,GH.log("triggering flotMouseEnter",GH.Logger.Contexts.ui),e.getPlaceholder().trigger("flotMouseEnter",e)))},n=function(t){e.getOptions().mouseEnterExitEvents&&e.mouseEntered&&(e.mouseEntered=!1,GH.log("triggering flotMouseLeave",GH.Logger.Contexts.ui),e.getPlaceholder().trigger("flotMouseLeave",e))};t.mousemove(o),t.mouseleave(n)})}var o={mouseEnterExitEvents:!1};AJS.$.plot.plugins.push({init:t,options:o,name:"gh-mouseenterexit-events",version:"1.0"})}(AJS.$);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/lib/jquery/flot/jquery.flot.multi.js' */
!function(o){function a(o){function a(s,o,a,r){o.bars.show&&n.push(o)}function r(o,a,r){if(a.bars.show&&void 0==a.bars.barLeft){if(0==p)for(var t=0;t<n.length;t++)p+=n[t].bars.barWidth;for(var i=0,u=0;u<n.length&&(s=n[u],s!=a);u++)i+=s.bars.barWidth;a.bars.barLeft=i-p/2}}function t(s,o){o.multiplebars&&(i=o.multiplebars,n=[],p=0,s.hooks.processRawData.push(a),s.hooks.processDatapoints.push(r))}var i=!1,n=[],p=0;o.hooks.processOptions.push(t)}var r={multiplebars:!1};o.plot.plugins.push({init:a,options:r,name:"multiplebars",version:"0.1"})}(AJS.$);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/QuickFilters.js' */
GH.Components||(GH.Components={}),GH.Components.QuickFilters=function(t){this.stateParamName=t},GH.Components.QuickFilters.events=new GH.Events,function(){var t=require("jira-agile/rapid/analytics-tracker");GH.Components.QuickFilters.analytics=new t("gh.rapidboard.quickFilters")}(),GH.Components.QuickFilters.prototype.stateParamName="activeQuickFilters",GH.Components.QuickFilters.prototype.rapidViewConfig={},GH.Components.QuickFilters.prototype.setRapidViewConfig=function(t){this.rapidViewConfig=t,this.validateActiveFilters()},GH.Components.QuickFilters.prototype.getActiveQuickFilters=function(){return GH.BoardState.getPerViewValue(this.stateParamName,[])},GH.Components.QuickFilters.prototype.setActiveQuickFilters=function(t){GH.BoardState.setPerViewValue(this.stateParamName,t)},GH.Components.QuickFilters.prototype.validateActiveFilters=function(){var t=this.getActiveQuickFilters(),i=this,e=_.filter(t,function(t){return _.find(i.rapidViewConfig.quickFilters,function(i){return t==i.id})});t.length!=e.length&&(this.setActiveQuickFilters(e),GH.RapidBoard.State.pushState())},GH.Components.QuickFilters.prototype.getQuickFilters=function(){var t=this.getActiveQuickFilters();return _.map(this.rapidViewConfig.quickFilters,function(i){return i.isActive=_.contains(t,i.id),i})},GH.Components.QuickFilters.prototype.getInitiallyExpanded=function(){return GH.RapidBoard.State.getQuickFiltersExpanded()},GH.Components.QuickFilters.prototype.toggleInitiallyExpanded=function(){var t=!GH.RapidBoard.State.getQuickFiltersExpanded();GH.RapidBoard.State.setQuickFiltersExpanded(t)},GH.Components.QuickFilters.prototype.renderQuickFilters=function(t){var i=this.getQuickFilters(),e=GH.tpl.component.quickfilter.renderQuickFilters({quickFilters:i,canEdit:this.rapidViewConfig.canEdit,initiallyExpanded:this.getInitiallyExpanded(),thisMode:t.mode}),r=AJS.$(e),n=this,s=r.find("#js-quickfilters-label");GH.Tooltip.tipsify({selector:s,gravity:"w",className:"ghx-tipsy-left"});var o="#js-"+t.mode+"-quickfilters-trigger";r.find(".js-quickfilter-button").click(function(t){var i=AJS.$(this);n.toggleQuickFilter(t,i)});var a=this.toggleInitiallyExpanded;return r.find(o).click(function(){a()}),r.delegate(o,"aui-expander-expanded aui-expander-collapsed",GH.RapidBoard.ViewController.handleResizeEvent),r},GH.Components.QuickFilters.prototype.toggleQuickFilter=function(t,i){t.preventDefault(),GH.Components.QuickFilters.events.trigger("before:toggle");var e=parseInt(i.attr("data-filter-id"),10);this.toggleActiveQuickFilter(e),i.toggleClass("ghx-active"),AJS.$(this).trigger("quickFilterChange"),GH.Components.QuickFilters.analytics.trigger("toggle","activeFilterCount",this.getActiveQuickFilters().length)},GH.Components.QuickFilters.prototype.toggleActiveQuickFilter=function(t){if(t){for(var i=!1,e=this.getActiveQuickFilters(),r=0,n=e.length;r<n;r++)if(e[r]==t){e.splice(r,1),i=!0;break}i||e.push(t),this.setActiveQuickFilters(e),GH.RapidBoard.State.pushState()}},GH.Components.QuickFilters.prototype.clearFilters=function(){var t=this.getActiveQuickFilters();return 0!=t.length&&(this.setActiveQuickFilters([]),AJS.$(".ghx-controls-filters .ghx-active").removeClass("ghx-active"),!0)},GH.Components.QuickFilters.prototype.quickExpanderLayout=function(t){var i="#js-"+t.mode+"-quickfilters",e=AJS.$(i),r=AJS.$(e).find("dt"),n=e.find(".ghx-quickfilter-trigger"),s=n.outerWidth(),o=n.height()+parseInt(r.css("marginBottom"),10)+1;n.css({display:"none"}),e.css({"padding-right":""}),e[0]&&e[0].scrollHeight>o&&(n.css({display:""}),e.attr("aria-expanded")&&"false"!=e.attr("aria-expanded")||e.css({"padding-right":s}))};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/QuickFilters.soy' */
// This file was automatically generated from QuickFilters.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.component.quickfilter.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.component == 'undefined') { GH.tpl.component = {}; }
if (typeof GH.tpl.component.quickfilter == 'undefined') { GH.tpl.component.quickfilter = {}; }


GH.tpl.component.quickfilter.renderQuickFilters = function(opt_data, opt_ignored) {
  var output = '<dl class="ghx-controls-filters js-quickfilter-selector">';
  var modeExpanderId__soy4 = 'js-' + soy.$$escapeHtml(opt_data.thisMode) + '-quickfilters';
  var modeExpanderTriggerId__soy8 = 'js-' + soy.$$escapeHtml(opt_data.thisMode) + '-quickfilters-trigger';
  var param15 = '<dt id="js-quickfilters-label" class="ghx-cursor-help"' + ((opt_data.canEdit) ? 'data-tooltip="' + soy.$$escapeHtml("Use Quick Filters to view a subset of issues. Add more in the board configuration.") + '"' : 'data-tooltip="' + soy.$$escapeHtml("Use Quick Filters to view a subset of issues. Board owners can add more.") + '"') + '>' + soy.$$escapeHtml("Quick Filters") + ':</dt>';
  var quickFilterList29 = opt_data.quickFilters;
  var quickFilterListLen29 = quickFilterList29.length;
  for (var quickFilterIndex29 = 0; quickFilterIndex29 < quickFilterListLen29; quickFilterIndex29++) {
    var quickFilterData29 = quickFilterList29[quickFilterIndex29];
    param15 += '<dd><a role="button" href="#" class="js-quickfilter-button ' + ((quickFilterIndex29 == 0) ? 'first' : '') + ' ' + ((quickFilterIndex29 == quickFilterListLen29 - 1) ? 'last' : '') + ' ' + ((quickFilterData29.isActive) ? ' ghx-active' : '') + '" title="' + ((quickFilterData29.description == '') ? soy.$$escapeHtml(quickFilterData29.query) : soy.$$escapeHtml(quickFilterData29.description)) + '" data-filter-id="' + soy.$$escapeHtml(quickFilterData29.id) + '">' + soy.$$escapeHtml(quickFilterData29.name) + '</a></dd>';
  }
  param15 += '<dd class="ghx-quickfilter-trigger">' + aui.expander.trigger({id: modeExpanderTriggerId__soy8, contentId: modeExpanderId__soy4, tag: 'a', content: opt_data.initiallyExpanded ? "\u2026 Show fewer" : "\u2026 Show more", replaceText: opt_data.initiallyExpanded ? "\u2026 Show more" : "\u2026 Show fewer"}) + '</dd>';
  output += aui.expander.content({id: modeExpanderId__soy4, extraClasses: ['ghx-quick-content'], initiallyExpanded: opt_data.initiallyExpanded, content: param15});
  output += '</dl>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.quickfilter.renderQuickFilters.soyTemplateName = 'GH.tpl.component.quickfilter.renderQuickFilters';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/ActiveSprintInlineEdit.js' */
GH.Components||(GH.Components={}),GH.Components.SPRINT_NAME_MAX_LENGTH=30,GH.Components.SPRINT_GOAL_MAX_LENGTH=1e3,GH.Components.EVENT_SPRINT_UPDATED="sprintUpdated",GH.Components.ActiveSprintInlineEdit=function(t){this.getSprintById=t},GH.Components.ActiveSprintInlineEdit.prototype.rapidViewConfig={},GH.Components.ActiveSprintInlineEdit.prototype.setRapidViewConfig=function(t){this.rapidViewConfig=t},GH.Components.ActiveSprintInlineEdit.prototype.setSprintData=function(t){this.sprints=t||[]},GH.Components.ActiveSprintInlineEdit.prototype.getSprintById=function(t){return _.find(this.sprints,function(i){return i.id===t})},GH.Components.ActiveSprintInlineEdit.prototype.updateSprintData=function(t,i){for(var e=0;e<this.sprints.length;e++)this.sprints[e].id===t&&(this.sprints[e]=i)},GH.Components.ActiveSprintInlineEdit.prototype.analytics=function(t,i){var e=require("jira-agile/rapid/analytics-tracker");new e("gh.edit.sprint.inlineedit.change").trigger(t,i)},GH.Components.ActiveSprintInlineEdit.prototype.createGetInlineEditDataFunction=function(){var t=this;return function(i,e){GH.RapidBoard.Util.InlineEditable.submitActiveEdits();var n=GH.RapidBoard.Util.InlineEditable.defaultFieldData(i);switch(n.fieldName){case"sprintName":n.maxLength=GH.Components.SPRINT_NAME_MAX_LENGTH,n.cssClass="medium-field";break;case"sprintGoal":n.maxLength=GH.Components.SPRINT_GOAL_MAX_LENGTH,n.cssClass="medium-field",n.extraClasses="overflow-ellipsis"}return n.sprintId=parseInt(i.closest(".js-sprint-container").attr("data-sprint-id"),10),n.sprintData=_.clone(t.getSprintById(n.sprintId)),n}},GH.Components.ActiveSprintInlineEdit.prototype.submitSprintData=function(t){var i=t.id,e={name:t.name,startDate:t.startDate,endDate:t.endDate,goal:t.goal};GH.Validation.clearContextualErrors(".js-sprint-container[data-sprint-id="+i+"]"),GH.Ajax.put({url:"/sprint/"+i,data:e,errorContextMap:{name:".js-sprint-container[data-sprint-id="+i+"] .ghx-name .js-editable-field",startDate:".js-sprint-container[data-sprint-id="+i+"] .ghx-dates > :last-child",endDate:".js-sprint-container[data-sprint-id="+i+"] .ghx-dates > :last-child",dateFormatMismatch:GH.Notification.handleDateFormatMismatchError,goal:".js-sprint-container[data-sprint-id="+i+"] .ghx-sprint-goal > .js-editable-field"}}).done(function(t){AJS.$(GH).trigger(GH.Components.EVENT_SPRINT_UPDATED,t.success)})},GH.Components.ActiveSprintInlineEdit.prototype.validateName=function(t){var i=t.editElement.val();return!!GH.Validation.notBlank(t.editElement,"Sprint name is required")&&(!!GH.Validation.maxLength(t.editElement,GH.Components.SPRINT_NAME_MAX_LENGTH,AJS.format("Sprint name must be shorter than {0} characters.",GH.Components.SPRINT_NAME_MAX_LENGTH))&&(t.sprintData.name=i,t.newValue=i,!0))},GH.Components.ActiveSprintInlineEdit.prototype.validateStartDate=function(t){var i=t.editElement.find("input").val();return!!GH.Validation.notBlank(t.editElement.find("input"),"You must specify a start date for the sprint.",AJS.$(".ghx-dates"))&&(t.sprintData.startDate=i,t.newValue=i,!0)},GH.Components.ActiveSprintInlineEdit.prototype.validateEndDate=function(t){var i=t.editElement.find("input").val();return!!GH.Validation.notBlank(t.editElement.find("input"),"You must specify an end date for the sprint.",AJS.$(".ghx-dates"))&&(t.sprintData.endDate=i,t.newValue=i,!0)},GH.Components.ActiveSprintInlineEdit.prototype.validateSprintGoal=function(t){var i=t.editElement.val().trim();return!!GH.Validation.maxLength(t.editElement,GH.Components.SPRINT_GOAL_MAX_LENGTH,AJS.format("Sprint goal must be shorter than {0} characters.",GH.Components.SPRINT_GOAL_MAX_LENGTH))&&(t.newValue=i,t.sprintData.goal=i.length?i:null,!0)},GH.Components.ActiveSprintInlineEdit.prototype.postEditSprintGoal=function(t){t.fieldValue.length||t.viewElement.parent().addClass("ghx-hidden")},GH.Components.ActiveSprintInlineEdit.prototype.initializeInlineEdits=function(){var t=this,i=(new Calendar,function(i){var e=_.clone(t.getSprintById(i.sprintId));if(!_.isEqual(e,i.sprintData)){t.submitSprintData(i.sprintData);var n=e.state?e.state.toLowerCase():"";t.analytics("update"+n,i.fieldName)}GH.RapidBoard.Util.InlineEditable.updateView(i)}),e=function(t){GH.Validation.clearContextualErrors(".js-sprint-container[data-sprint-id="+t.sprintId+"]"),GH.RapidBoard.Util.InlineEditable.cancelActiveEdits()};GH.RapidBoard.Util.InlineEditable.register(".js-sprint-container .js-edit-sprintName-trigger",{getData:this.createGetInlineEditDataFunction(),validate:this.validateName,save:i}),GH.RapidBoard.Util.InlineEditable.register(".js-sprint-container .js-edit-startDate-trigger",{getData:this.createGetInlineEditDataFunction(),preEdit:e,renderEdit:GH.RapidBoard.Util.InlineEditable.renderDatePickerInlineEdit,activate:GH.RapidBoard.Util.InlineEditable.datePickerActivate,validate:this.validateStartDate,save:i}),GH.RapidBoard.Util.InlineEditable.register(".js-sprint-container .js-edit-endDate-trigger",{getData:this.createGetInlineEditDataFunction(),preEdit:e,renderEdit:GH.RapidBoard.Util.InlineEditable.renderDatePickerInlineEdit,activate:GH.RapidBoard.Util.InlineEditable.datePickerActivate,validate:this.validateEndDate,save:i}),GH.RapidBoard.Util.InlineEditable.register(".js-sprint-container .js-edit-sprintGoal-trigger",{getData:this.createGetInlineEditDataFunction(),preEdit:e,validate:this.validateSprintGoal,save:i,postEdit:this.postEditSprintGoal})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/SprintFilters.js' */
!function(){var t=require("underscore");GH.Components||(GH.Components={}),GH.Components.sprintFiltersInit=function(){GH.InlineDialog.registerInlineDialogHacks("sprintDialog",{disregardClickSelectors:[".calendar",".js-edit-sprintName-trigger",".js-edit-startDate-trigger",".js-edit-endDate-trigger"]})},GH.Components.SPRINT_NAME_MAX_LENGTH=30,GH.Components.SprintFilters=function(t){this.stateParamName=t},GH.Components.SprintFilters.prototype.stateParamName="workSprintFilters",GH.Components.SprintFilters.prototype.rapidViewConfig={},GH.Components.SprintFilters.prototype.setRapidViewConfig=function(t){this.rapidViewConfig=t},GH.Components.SprintFilters.prototype.getActiveSprintFilters=function(){return GH.BoardState.getPerViewValue(this.stateParamName,[])},GH.Components.SprintFilters.prototype.setActiveSprintFilters=function(t){GH.BoardState.setPerViewValue(this.stateParamName,t)},GH.Components.SprintFilters.prototype.renderComponent=function(){return AJS.$(GH.tpl.component.sprintfilters.renderSprintSelector())},GH.Components.SprintFilters.prototype.setSprintData=function(t){this.sprints=t||[]},GH.Components.SprintFilters.prototype.getSprintData=function(){return this.sprints},GH.Components.SprintFilters.prototype.validateActiveSprints=function(){var i=this.getActiveSprintFilters(),e=[];t.each(i,function(t){this.getSprintById(t)&&e.push(t)},this),t.isEqual(i,e)||(this.setActiveSprintFilters(e),GH.RapidBoard.State.replaceState(),AJS.$(this).trigger("sprintFilterChange"))},GH.Components.SprintFilters.prototype.hasSprints=function(){return this.sprints.length>0},GH.Components.SprintFilters.prototype.hasParallelActiveSprints=function(){return t.where(this.sprints,{state:"ACTIVE"}).length>1},GH.Components.SprintFilters.prototype.getSprintById=function(i){return t.find(this.sprints,function(t){return t.id===i})},GH.Components.SprintFilters.prototype.updateSprintData=function(t,i){var e=!1;if(this.sprints)for(var n=0;n<this.sprints.length;n++)this.sprints[n].id==t&&(this.sprints[n]=i,e=!0);e&&this.drawSprints()},GH.Components.SprintFilters.prototype.drawSprints=function(){var i=this,e=AJS.$(".ghx-controls-work .js-sprint-info"),n=this.getActiveSprintFilters(),r={};if(t.each(n,function(t){r[t]=!0}),e.html(GH.tpl.component.sprintfilters.renderSprints({sprints:this.sprints,activeSprintMap:r})),GH.RapidBoard.ViewController.shouldShowSubnavigator()&&GH.RapidBoard.SubnavigatorController.render(),this.sprints.length>1&&e.find(".js-toggle-sprint").click(function(t){var e=AJS.$(this);i.toggleActiveSprintFilterButton(t,e)}),GH.RapidBoard.ViewController.hasSideBar){var a=AJS.$("#ghx-modes-tools");if(this.hasSprints()){a.find(".ghx-sprint-meta").remove();var s=1===this.sprints.length?this.sprints[0].id:this.getActiveSprintFilters()[0];if(s){var o=this.getSprintById(s),p=AJS.$(GH.tpl.component.sprintfilters.renderSprintMeta({sprint:o,noSprintClosePermissions:!o.canUpdateSprint}));p.find(".time").tooltip({html:!0,title:function(){return GH.tpl.component.sprintfilters.renderSprintDatesTooltip({sprint:o})}}),p.find(".complete-sprint-container").tooltip({html:!0,title:"data-tooltip"}),p.find(".js-complete-sprint").on("click",function(t){t.preventDefault(),GH.Dialogs.CompleteSprintDialog.showDialog(GH.RapidBoard.State.getRapidViewId(),s)}),a.prepend(p)}}}else e.find(".js-sprint-trigger").click(function(t){var e=AJS.$(this);i.openSprintDialog(e)})},GH.Components.SprintFilters.prototype.toggleActiveSprintFilterButton=function(t,i){t.preventDefault();var e=parseInt(i.parents(".js-sprintfilter").attr("data-sprint-id"),10);this.toggleActiveSprintFilter(e),AJS.$(this).trigger("sprintFilterChange")},GH.Components.SprintFilters.prototype.updateButtonStates=function(){var i=this.getActiveSprintFilters();AJS.$.each(AJS.$(".js-sprint-info").find(".js-sprintfilter"),function(e,n){var r=AJS.$(n),a=parseInt(r.attr("data-sprint-id"),10);t.contains(i,a)?r.addClass("ghx-active"):r.removeClass("ghx-active")})},GH.Components.SprintFilters.prototype.toggleActiveSprintFilter=function(t){var i=this.getActiveSprintFilters(),e=[];0!==i.length&&i[0]===t||e.push(t),this.setActiveSprintFilters(e),GH.RapidBoard.State.pushState()},GH.Components.SprintFilters.prototype.removeDialog=function(){GH.InlineDialog.remove("sprintDialog")},GH.Components.SprintFilters.prototype.openSprintDialog=function(t){this.removeDialog();var i=parseInt(t.parents(".js-sprintfilter").attr("data-sprint-id"),10),e=this.getSprintById(i);this.analytics("open");var n={fadeTime:0,noBind:!0,width:400,cacheContent:!1,hideDelay:6e4},r=this,a=GH.InlineDialog.create("sprintDialog",t,function(t,i,n){r.renderSprintDialog(t,e,n)},n);a.show()},GH.Components.SprintFilters.prototype.analytics=function(t,i){var e=require("jira-agile/rapid/analytics-tracker");new e("gh.edit.sprint.inlinedialog.work.change").trigger(t,i)},GH.Components.SprintFilters.prototype.renderSprintDialog=function(t,i,e){t.html(GH.tpl.component.sprintfilters.renderSprintDetails({sprint:i,canUpdateSprint:i.canUpdateSprint})),t.closest(".aui-inline-dialog").addClass("ghx-inline-dialog"),t.parent().hide(),e()},GH.Components.SprintFilters.prototype.createGetInlineEditDataFunction=function(){var i=this;return function(e,n){GH.RapidBoard.Util.InlineEditable.submitActiveEdits();var r=GH.RapidBoard.Util.InlineEditable.defaultFieldData(e);return"sprintName"===r.fieldName&&(r.maxLength=GH.Components.SPRINT_NAME_MAX_LENGTH,r.cssClass="medium-field"),r.sprintId=parseInt(e.parents(".js-sprint-details").attr("data-sprint-id"),10),r.sprintData=t.clone(i.getSprintById(r.sprintId)),r.sprintFiltersComponent=i,r}},GH.Components.SprintFilters.prototype.submitSprintData=function(t){var i=this,e=t.id,n={name:t.name,startDate:t.startDate,endDate:t.endDate};GH.Ajax.put({url:"/sprint/"+e,data:n,errorContextMap:{name:"#ghx-sprint-name",startDate:"#ghx-sprint-start-date-error",endDate:"#ghx-sprint-end-date-error",dateFormatMismatch:GH.Notification.handleDateFormatMismatchError}}).done(function(t){i.updateSprintData(t.success.id,t.success)})},GH.Components.SprintFilters.prototype.initializeInlineEdits=function(){var i=this,e=function(t){var i=t.editElement.val();return!!GH.Validation.notBlank(t.editElement,"Sprint name is required")&&(!!GH.Validation.maxLength(t.editElement,GH.Components.SPRINT_NAME_MAX_LENGTH,AJS.format("Sprint name must be shorter than {0} characters.",GH.Components.SPRINT_NAME_MAX_LENGTH))&&(t.sprintData.name=i,t.newValue=i,!0))},n=function(t){var i=t.editElement.find("input").val();return!!GH.Validation.notBlank(t.editElement.find("input"),"You must specify an end date for the sprint.",t.editElement)&&(t.sprintData.startDate=i,t.newValue=i,!0)},r=function(t){var i=t.editElement.find("input").val();return!!GH.Validation.notBlank(t.editElement.find("input"),"You must specify an end date for the sprint.",t.editElement)&&(t.sprintData.endDate=i,t.newValue=i,!0)},a=function(e){var n=t.clone(i.getSprintById(e.sprintId));t.isEqual(n,e.sprintData)||(i.submitSprintData(e.sprintData),i.analytics("update",e.fieldName)),GH.RapidBoard.Util.InlineEditable.updateView(e)},s=function(t){GH.Validation.clearContextualErrors(".ghx-sprint-active[data-sprint-id="+t.sprintId+"]"),GH.RapidBoard.Util.InlineEditable.cancelActiveEdits()};GH.RapidBoard.Util.InlineEditable.register("#inline-dialog-sprintDialog .js-edit-sprintName-trigger",{getData:this.createGetInlineEditDataFunction(),validate:e,save:a}),GH.RapidBoard.Util.InlineEditable.register("#inline-dialog-sprintDialog .js-edit-startDate-trigger",{getData:this.createGetInlineEditDataFunction(),renderEdit:GH.RapidBoard.Util.InlineEditable.renderDatePickerInlineEdit,activate:GH.RapidBoard.Util.InlineEditable.datePickerActivate,validate:n,preEdit:s,save:a}),GH.RapidBoard.Util.InlineEditable.register("#inline-dialog-sprintDialog .js-edit-endDate-trigger",{getData:this.createGetInlineEditDataFunction(),renderEdit:GH.RapidBoard.Util.InlineEditable.renderDatePickerInlineEdit,activate:GH.RapidBoard.Util.InlineEditable.datePickerActivate,validate:r,preEdit:s,save:a})}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/SprintFilters.soy' */
// This file was automatically generated from SprintFilters.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.component.sprintfilters.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.component == 'undefined') { GH.tpl.component = {}; }
if (typeof GH.tpl.component.sprintfilters == 'undefined') { GH.tpl.component.sprintfilters = {}; }


GH.tpl.component.sprintfilters.renderSprintSelector = function(opt_data, opt_ignored) {
  return '<dl id="ghx-controls-sprint" class="ghx-controls-filters ghx-controls-sprint js-sprint-info">' + GH.tpl.component.sprintfilters.renderNoneActive(null) + '</dl>';
};
if (goog.DEBUG) {
  GH.tpl.component.sprintfilters.renderSprintSelector.soyTemplateName = 'GH.tpl.component.sprintfilters.renderSprintSelector';
}


GH.tpl.component.sprintfilters.renderNoneActive = function(opt_data, opt_ignored) {
  return '<dt>' + soy.$$escapeHtml("Sprint") + ':</dt><dd><span class="ghx-fa">' + soy.$$escapeHtml("No active sprints") + '</span></dd>';
};
if (goog.DEBUG) {
  GH.tpl.component.sprintfilters.renderNoneActive.soyTemplateName = 'GH.tpl.component.sprintfilters.renderNoneActive';
}


GH.tpl.component.sprintfilters.renderSprints = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.sprints.length == 0) {
    output += GH.tpl.component.sprintfilters.renderNoneActive(null);
  } else {
    output += '<dt>' + ((opt_data.sprints.length < 2) ? soy.$$escapeHtml("Sprint") + ':' : soy.$$escapeHtml("Sprints") + ':') + '</dt>';
    var sprintList26 = opt_data.sprints;
    var sprintListLen26 = sprintList26.length;
    for (var sprintIndex26 = 0; sprintIndex26 < sprintListLen26; sprintIndex26++) {
      var sprintData26 = sprintList26[sprintIndex26];
      output += '<dd data-sprint-id="' + soy.$$escapeHtml(sprintData26.id) + '" class="ghx-sprint "><a data-sprint-id="' + soy.$$escapeHtml(sprintData26.id) + '" role="button" class="' + ((opt_data.activeSprintMap[sprintData26.id]) ? ' ghx-active' : '') + ((opt_data.sprints.length < 2) ? ' ghx-solo' : '') + ' js-sprintfilter "><span class="ghx-name js-toggle-sprint" role="button">' + soy.$$escapeHtml(sprintData26.name) + '</span><span class="ghx-trigger js-sprint-trigger" role="button"><span class="ghx-icon ghx-icon-drop"></span></span></a></dd>';
    }
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.sprintfilters.renderSprints.soyTemplateName = 'GH.tpl.component.sprintfilters.renderSprints';
}


GH.tpl.component.sprintfilters.renderSprintDetails = function(opt_data, opt_ignored) {
  return '<div class="js-sprint-details ghx-sprint-details ghx-inline-dialog-content" data-sprint-id="' + soy.$$escapeHtml(opt_data.sprint.id) + '"><form class="aui"><fieldset><div class="field-group"><label for="ghx-sprint-name">' + soy.$$escapeHtml("Sprint Name") + ':</label>' + GH.tpl.inlineeditfield.renderBasicTextView({canEdit: opt_data.canUpdateSprint, fieldName: 'sprintName', fieldValue: opt_data.sprint.name, displayValue: opt_data.sprint.name}) + '</div><div class="field-group"><label for="ghx-sprint-start-date">' + soy.$$escapeHtml("Start Date") + ':</label>' + GH.tpl.inlineeditfield.renderBasicTextView({canEdit: opt_data.canUpdateSprint, fieldName: 'startDate', fieldValue: opt_data.sprint.startDate, displayValue: opt_data.sprint.startDate}) + '<span id="ghx-sprint-start-date-error"></span></div><div class="field-group"><label for="ghx-sprint-end-date">' + soy.$$escapeHtml("End Date") + ':</label>' + GH.tpl.inlineeditfield.renderBasicTextView({canEdit: opt_data.canUpdateSprint, fieldName: 'endDate', fieldValue: opt_data.sprint.endDate, displayValue: opt_data.sprint.endDate}) + '<span id="ghx-sprint-end-date-error"></span></div><div class="group"><div class="radio"><button id="ghx-complete-sprint" data-sprint-id="' + soy.$$escapeHtml(opt_data.sprint.id) + '"' + ((! opt_data.canUpdateSprint) ? ' disabled title="' + soy.$$escapeHtml("You must have the Manage Sprints permission to complete a sprint") + '"' : '') + ' class="aui-button">' + soy.$$escapeHtml("Complete Sprint\u2026") + '</button></div></div></fieldset></form></div>';
};
if (goog.DEBUG) {
  GH.tpl.component.sprintfilters.renderSprintDetails.soyTemplateName = 'GH.tpl.component.sprintfilters.renderSprintDetails';
}


GH.tpl.component.sprintfilters.renderSprintMeta = function(opt_data, opt_ignored) {
  return '<div class="ghx-sprint-meta" data-sprint-id="' + soy.$$escapeHtml(opt_data.sprint.id) + '"><span class="time">' + aui.icons.icon({useIconFont: true, size: 'small', icon: 'time'}) + '<span class="days-left">' + soy.$$escapeHtml(AJS.format("{0} {0,choice,0#days|1#day|2#days} remaining",opt_data.sprint.daysRemaining)) + '</span></span><span class="complete-sprint-container"' + ((opt_data.noSprintClosePermissions) ? 'data-tooltip="' + soy.$$escapeHtml("You need the Manage Sprints permission for all projects in the origin board to manage this sprint. \x3ca class\x3d\x22manage-sprint-permission-help\x22 href\x3d\x22#\x22\x3eLearn more\x3c/a\x3e") + '"' : 'data-tooltip=""') + '><a id="ghx-complete-sprint" class="js-complete-sprint ' + ((opt_data.noSprintClosePermissions) ? ' disabled' : '') + '"' + ((opt_data.noSprintClosePermissions) ? 'aria-disabled="true"' : 'data-tooltip=""') + '>' + soy.$$escapeHtml("Complete Sprint") + '</a></span></div>';
};
if (goog.DEBUG) {
  GH.tpl.component.sprintfilters.renderSprintMeta.soyTemplateName = 'GH.tpl.component.sprintfilters.renderSprintMeta';
}


GH.tpl.component.sprintfilters.renderSprintDatesTooltip = function(opt_data, opt_ignored) {
  return '<div class="ghx-sprint-dates"><p>' + soy.$$escapeHtml("Start Date") + ' <b>' + soy.$$escapeHtml(opt_data.sprint.startDate) + '</b></p><p>' + soy.$$escapeHtml("Projected End Date") + ' <b>' + soy.$$escapeHtml(opt_data.sprint.endDate) + '</b></p></div>';
};
if (goog.DEBUG) {
  GH.tpl.component.sprintfilters.renderSprintDatesTooltip.soyTemplateName = 'GH.tpl.component.sprintfilters.renderSprintDatesTooltip';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/SearchFilter.js' */
GH.Components||(GH.Components={}),GH.Components.SearchFilter=function(e){this.searchQueryCallback=e,this.regexReserved=new RegExp("[.*+?|()\\[\\]{}\\\\]","g")},GH.Components.SearchFilter.prototype.getExpandedSearchFieldWidth=function(){var e=AJS.$("#ghx-backlog-search-input"),a=AJS.$("#js-quickfilters-label"),t=AJS.$("#js-plan-quickfilters").position().left,r=e.position().left,o=t+a.width(),s=o-r;return s},GH.Components.SearchFilter.prototype.render=function(){var e=GH.tpl.component.searchFilter.renderSearchBox(),a=AJS.$(e),t=this,r=a.find("#ghx-backlog-search-input");return r.focus(function(){a.addClass("ghx-active"),r.css({width:t.getExpandedSearchFieldWidth()}),a.parent().addClass("ghx-search-active")}),r.blur(function(){var e=AJS.$.trim(r.val());_.isEmpty(e)&&setTimeout(function(){r.val(""),a.removeClass("ghx-active"),a.find(".aui-iconfont-remove").removeClass("aui-iconfont-remove").addClass("aui-iconfont-search-small"),r.css({width:""}),a.parent().removeClass("ghx-search-active")},400)}),r.bind("keydown",function(e){27==e.keyCode&&(r.val(""),r.blur(),t.searchQuery())}),a.find(".js-search-trigger").click(function(){a.hasClass("ghx-active")?(a.removeClass("ghx-active"),r.css({width:""}),a.parent().removeClass("ghx-search-active"),a.find(".aui-iconfont-remove").removeClass("aui-iconfont-remove").addClass("aui-iconfont-search-small"),r.val(""),t.searchQuery()):(a.addClass("ghx-active"),r.css({width:t.getExpandedSearchFieldWidth()}),a.parent().addClass("ghx-search-active"),r.focus())}),r.keyup(function(e){return 13==e.keyCode?void r.blur():(""!==r.val()?a.find(".aui-iconfont-search-small").removeClass("aui-iconfont-search-small").addClass("aui-iconfont-remove"):a.find(".aui-iconfont-remove").removeClass("aui-iconfont-remove").addClass("aui-iconfont-search-small"),void t.searchQuery())}),a.submit(function(e){e.preventDefault()}),a},GH.Components.SearchFilter.prototype.clearSearchBox=function(){var e=AJS.$("#ghx-backlog-search");e.removeClass("ghx-active"),e.parent().removeClass("ghx-search-active"),e.find(".ghx-search").val("").css({width:""})},GH.Components.SearchFilter.prototype._queryToRegex=function(e){var a;return a=_.isEmpty(e)?".*":_.map(e.split(" "),function(e){return"(?=.*("+e+"))"}).join(""),GH.Logger.log("Executing search "+a,GH.Logger.Contexts.ui),new RegExp(a,"i")},GH.Components.SearchFilter.prototype.clearLastSearch=function(){this.lastSearch=""},GH.Components.SearchFilter.prototype.stopEdit=function(e){var a=e.find("#ghx-backlog-search-input");a.blur()},GH.Components.SearchFilter.prototype.searchQuery=function(){GH.Logger.timeStart("GH.Components.SearchFilter.searchQuery");var e=AJS.$.trim(AJS.$("#ghx-backlog-search-input").val());if(e!==this.lastSearch){if(this.lastSearch=e,""===e)this.searchQueryCallback(null);else{var a;try{a=this._queryToRegex(e),this.searchQueryCallback(a)}catch(t){GH.Logger.log("Regex search threw exception",GH.Logger.Contexts.ui),a=this._queryToRegex(e.replace(this.regexReserved,"\\$&")),this.searchQueryCallback(a)}}GH.Logger.timeStop("GH.Components.SearchFilter.searchQuery")}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/SearchFilter.soy' */
// This file was automatically generated from SearchFilter.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.component.searchFilter.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.component == 'undefined') { GH.tpl.component = {}; }
if (typeof GH.tpl.component.searchFilter == 'undefined') { GH.tpl.component.searchFilter = {}; }


GH.tpl.component.searchFilter.renderSearchBox = function(opt_data, opt_ignored) {
  return '<form id="ghx-backlog-search" class="aui"><div class="ghx-backlog-search"><input class="text ghx-search" type="text" id="ghx-backlog-search-input"><span class="js-search-trigger ghx-iconfont aui-icon aui-icon-small aui-iconfont-search-small"></span></div></form>';
};
if (goog.DEBUG) {
  GH.tpl.component.searchFilter.renderSearchBox.soyTemplateName = 'GH.tpl.component.searchFilter.renderSearchBox';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/PresentationMode.js' */
GH.PresentationMode={},GH.PresentationMode.NORMAL_MODE="normal",GH.PresentationMode.COMPACT_MODE="compact",GH.PresentationMode.PROJECTOR_MODE="projector",GH.PresentationMode.allModes=[GH.PresentationMode.NORMAL_MODE,GH.PresentationMode.COMPACT_MODE,GH.PresentationMode.PROJECTOR_MODE],GH.PresentationMode.mode=GH.PresentationMode.NORMAL_MODE,GH.PresentationMode.enabled=!1,GH.PresentationMode.init=function(){var e=GH.PresentationMode.getStoredMode();this.mode=GH.PresentationMode.validateMode(e),this.enabled=!0,this._updateBodyClasses()},GH.PresentationMode.isHeaderHidden=function(){return this.mode===GH.PresentationMode.COMPACT_MODE||this.mode===GH.PresentationMode.PROJECTOR_MODE},GH.PresentationMode.isNormalMode=function(){return this.mode===GH.PresentationMode.NORMAL_MODE},GH.PresentationMode.isProjectorMode=function(){return this.mode===GH.PresentationMode.PROJECTOR_MODE},GH.PresentationMode.toggleNormalAndCompact=function(){GH.PresentationMode.iterateThroughPresentationModes([GH.PresentationMode.NORMAL_MODE,GH.PresentationMode.COMPACT_MODE])},GH.PresentationMode.validateMode=function(e){return _.contains(GH.PresentationMode.allModes,e)?e:GH.PresentationMode.NORMAL_MODE},GH.PresentationMode.setPresentationMode=function(e){GH.PresentationMode.enabled&&(e=GH.PresentationMode.validateMode(e),this.mode=e,GH.PresentationMode.setStoredMode(e),this._updateUI())},GH.PresentationMode.iterateThroughPresentationModes=function(e){var t=_.indexOf(e,this.mode);t++,t%=e.length,GH.PresentationMode.setPresentationMode(e[t])},GH.PresentationMode.render=function(e,t){AJS.$(t).append(GH.tpl.presentationmode.renderPresentationButton({expand:e})),GH.PresentationMode._registerClickHandler(),GH.PresentationMode.tipsify()},GH.PresentationMode._registerClickHandler=function(){var e=this;AJS.$(".js-compact-toggle").unbind("click.presentationMode").bind("click.presentationMode",function(){e.toggleNormalAndCompact()})},GH.PresentationMode._updateUI=function(){AJS.$("body").click(),this._updateBodyClasses(),GH.RapidBoard.ViewController.handleResizeEvent()},GH.PresentationMode._updateBodyClasses=function(){var e=AJS.$("body");this.isHeaderHidden()?e.addClass("ghx-header-compact"):e.removeClass("ghx-header-compact"),this.isProjectorMode()?e.addClass("ghx-contrast-high"):e.removeClass("ghx-contrast-high")},GH.PresentationMode.getStoredMode=function(){return GH.storage.get("gh.presentation.mode",!0)},GH.PresentationMode.setStoredMode=function(e){GH.storage.put("gh.presentation.mode",e,!0)},GH.PresentationMode.tipsify=function(){GH.Tooltip.tipsify({selector:".js-compact-toggle",gravity:"e"})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/PresentationMode.soy' */
// This file was automatically generated from PresentationMode.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.presentationmode.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.presentationmode == 'undefined') { GH.tpl.presentationmode = {}; }


GH.tpl.presentationmode.renderPresentationButton = function(opt_data, opt_ignored) {
  var output = '';
  var text__soy3 = '' + ((opt_data.expand == true) ? soy.$$escapeHtml("Show the header ( Z )") : soy.$$escapeHtml("Hide the header ( Z )"));
  var icon__soy9 = '' + ((opt_data.expand == true) ? 'ghx-iconfont aui-icon-small aui-iconfont-arrows-down' : 'ghx-iconfont aui-icon-small aui-iconfont-arrows-up');
  output += aui.buttons.button({extraAttributes: {'data-tooltip': text__soy3}, extraClasses: ['ghx-compact-toggle js-compact-toggle'], text: '', iconClass: icon__soy9, iconType: 'aui'});
  return output;
};
if (goog.DEBUG) {
  GH.tpl.presentationmode.renderPresentationButton.soyTemplateName = 'GH.tpl.presentationmode.renderPresentationButton';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/ViewActions.js' */
var GlobalEvents=require("jira-agile/rapid/global-events");GH.ViewActions={},GH.ViewActions.PLAN_MODE="plan",GH.ViewActions.WORK_MODE="work",GH.ViewActions.REPORT_MODE="report",GH.ViewActions.currentViewId=void 0,GH.ViewActions.currentViewName=void 0,GH.ViewActions.currentMode="work",AJS.$(function(){GH.Events(GH.ViewActions),GH.ViewActions.on("boardToolsRendered",GH.ViewActions.afterBoardToolsLoaded)}),GH.ViewActions.processData=function(e){return function(i){var o=!1;i&&(GH.ViewActions.currentViewId=i.id,GH.ViewActions.currentViewName=i.name,GH.ViewActions.canEdit=i.canEdit,o=i.canEdit),e(),GH.ViewActions.setView(GH.ViewActions.currentViewId,GH.ViewActions.currentViewName,o)}},GH.ViewActions.initViewActions=GH.ViewActions.processData(function(){AJS.$("#ghx-view-presentation").empty(),GH.PresentationMode.render(!1,"#ghx-view-presentation")}),GH.ViewActions.refreshBoardTools=function(){function e(e){function i(e){return e.replace(/(!|"|#|\$|%|&|'|\(|\)|\*|\+|,|\.|\/|:|;|<|=|>|\?|@|\[|\\|\]|\^|`|\{|\||\}|~)/g,"\\$1")}function o(i){i[0].bind("showLayer",_.once(function(){var o=AJS.$(GH.tpl.board.x.renderSectionContent(e));AJS.$("#"+s).html(o),GH.ViewActions.trigger("boardToolsRendered",{sectionId:t,dropdown:i})}))}var t=i(e.id),n=t+"-button",s=t+"-content";try{var a=GH.ViewActions.registerDropdown(n,s);o(a)}catch(i){console.error("Error rendering dropdown for section"+e.id+":"+i.message)}}AJS.$("#ghx-view-pluggable").css("visibility","hidden"),GH.ViewActions.currentViewId&&GH.Ajax.get({url:"/xboard/toolSections",data:{mode:GH.ViewActions.mode,rapidViewId:GH.ViewActions.currentViewId,selectedProjectKey:GH.RapidBoard.projectKey},deferErrorHandling:!1}).done(function(i){var o=GH.tpl.board.x.renderToolSections(i);AJS.$("#ghx-view-pluggable").html(o),_.each(i.sections,function(i){e(i)}),AJS.$("#ghx-view-pluggable").css("visibility","visible")})},GH.ViewActions.registerDropdown=function(e,i){var o=AJS.$("#"+e);return o.click(_.wrap(function(){AJS.$(window).resize()},_.defer)),AJS.Dropdown.create({trigger:o,content:AJS.$("#"+i),alignment:AJS.RIGHT,width:"auto"})},GH.ViewActions.renderOnConfiguration=GH.ViewActions.processData(function(){AJS.$("#ghx-modes-tools").append(GH.tpl.viewactions.renderActions()),GH.ViewActions.createdDropdownOnConfigurationPage()}),GH.ViewActions.renderOnManage=GH.ViewActions.processData(function(){AJS.$("#ghx-modes-tools").html(GH.tpl.viewactions.renderManageViewActions())}),GH.ViewActions.setView=function(e,i,o){AJS.$("#ghx-modes-tools").find(".aui-button.js-view-action-create").attr("disabled","disabled"),e&&AJS.$(".js-view-action-configure").removeClass("disabled"),o&&AJS.$(".js-view-action-delete").removeClass("disabled"),GH.UserData.hasUser()&&GH.UserData.userConfig.canCreateBoard&&(GH.UserData.userConfig.canCreateProject||GH.UserData.userConfig.hasProjectsAccessible||GH.UserData.userConfig.hasFiltersAccessible)&&(AJS.$(".js-view-action-create, .js-view-action-copy").removeClass("disabled"),AJS.$("#ghx-modes-tools").find(".aui-button.js-view-action-create").removeAttr("disabled"))},GH.ViewActions.setMode=function(e){e!==GH.ViewActions.mode&&(GH.ViewActions.mode=e,GH.ViewActions.refreshBoardTools())},GH.ViewActions.adjustButtonsToMode=function(e){var i=AJS.$(".js-view-actions-plan"),o=AJS.$(".js-view-actions-work"),t=AJS.$(".js-view-action-create").parent(),n=AJS.$(".js-view-actions-print");switch(i.hide(),o.hide(),n.hide(),t.addClass("aui-last"),e){case GH.ViewActions.PLAN_MODE:t.removeClass("aui-last"),i.show(),GH.RapidBoard.State.isKanbanBoard()&&AJS.$([".js-view-action-toggle-releases-column",".js-view-action-toggle-epics-column",".js-view-action-toggle-epics-lozenge"].join(",")).hide(),n.show().find("a").removeClass("disabled");break;case GH.ViewActions.WORK_MODE:t.removeClass("aui-last"),o.find(".js-view-action-toggle-detail-view").removeClass("disabled"),o.show(),n.show().find("a").removeClass("disabled");break;case GH.ViewActions.REPORT_MODE:}},GH.ViewActions.setSwimlanes=function(e){var i=AJS.$(".js-view-actions-work");e?i.find(".js-swimlane-action").removeClass("disabled"):i.find(".js-swimlane-action").addClass("disabled")},GH.ViewActions.setVersionsPanelVisible=function(e){var i=AJS.$(".js-view-action-toggle-releases-column");e?i.text("Hide versions panel"):i.text("Show versions panel")},GH.ViewActions.setEpicsPanelVisible=function(e){var i=AJS.$(".js-view-action-toggle-epics-column");e?i.text("Hide epics panel"):i.text("Show epics panel")},GH.ViewActions.setEpicLozengesVisible=function(e){var i=AJS.$(".js-view-action-toggle-epics-lozenge");e?i.text("Hide epic labels"):i.text("Show epic labels")},GH.ViewActions.setDetailViewVisible=function(e){var i=AJS.$(".js-view-action-toggle-detail-view");e?i.text("Hide detail view"):i.text("Show detail view")},GH.ViewActions.createdDropdownOnConfigurationPage=function(){AJS.$("#js-view-actions").after(GH.tpl.viewactions.renderConfigurationViewActions()),AJS.$("#board-tools-section-content").hide();var e=GH.ViewActions.registerDropdown("js-view-actions","board-tools-section-content");GH.ViewActions.bindBoardToolsClickEvents(e)},GH.ViewActions.afterBoardToolsLoaded=function(e){"board-tools-section"===e.sectionId&&(GH.ViewActions.bindBoardToolsClickEvents(e.dropdown),AJS.$(e.dropdown[0]).bind("showLayer",GH.ViewActions.enableShowDetailIfIssueSelected),AJS.$(e.dropdown[0]).bind("showLayer",GH.ViewActions.enableShowEpicLozenge),GH.ViewActions.enableShowDetailIfIssueSelected(),GH.ViewActions.enableShowEpicLozenge(),GH.ViewActions.setView(GH.ViewActions.currentViewId,GH.ViewActions.currentViewName,GH.ViewActions.canEdit),GH.ViewActions.adjustButtonsToMode(GH.ViewActions.mode),GH.PlanView.updateViewActions())},GH.ViewActions.bindBoardToolsClickEvents=function(e){AJS.$("#board-tools-section-content .aui-list-item a").bind("click",function(i){var o=AJS.$(this);return o.hasClass("disabled")?(i.stopPropagation(),!1):void AJS.$(e).hide()}),AJS.$("#board-tools-section-content .js-view-action-delete").bind("click",function(e){GH.ViewActions.actionDelete(),e.preventDefault()}),AJS.$("#board-tools-section-content .js-view-action-copy").bind("click",function(e){GH.ViewActions.actionCopy(),e.preventDefault()}),AJS.$("#board-tools-section-content .js-view-action-toggle-detail-view").bind("click",function(e){GH.WorkController.isActive()?GH.WorkController.toggleDetailsView():GH.PlanController.isActive()&&GH.PlanController.toggleDetailsView(),e.preventDefault()}),AJS.$("#board-tools-section-content .js-view-action-print-cards").bind("click",function(e){GH.ViewActions.printCards(),e.preventDefault()})},GH.ViewActions.actionDelete=function(){GH.ViewActions.currentViewId&&GH.RapidBoard.DeleteDialog.showDeleteDialog(GH.ViewActions.currentViewId,GH.ViewActions.currentViewName)},GH.ViewActions.actionCopy=function(e,i){e||(e=GH.ViewActions.currentViewId,i=GH.ViewActions.currentViewName),GH.RapidBoard.copyRapidViewAndGotoConfiguration(e,i)},GH.ViewActions.printCards=function(){GH.ViewActions.currentViewId&&GlobalEvents.trigger("action.printCardsInRapidBoard")},GH.ViewActions.enableShowDetailIfIssueSelected=function(){if(GH.WorkController.isActive()){var e=AJS.$(".js-view-actions-work");GH.ViewActions.setDetailViewVisible(GH.WorkController.isDetailsViewOpened()),GH.WorkSelectionController.getSelectedIssueKey()?e.find(".js-view-action-toggle-detail-view").removeClass("disabled"):e.find(".js-view-action-toggle-detail-view").addClass("disabled")}else GH.PlanController.isActive()&&GH.ViewActions.setDetailViewVisible(GH.PlanController.isDetailsViewOpened())},GH.ViewActions.enableShowEpicLozenge=function(){GH.ViewActions.setEpicLozengesVisible(GH.RapidBoard.State.getEpicShownOnRapidBoard())},GH.ViewActions.toggleEpicsShowOnRapidBoard=function(){GH.RapidBoard.State.getEpicShownOnRapidBoard()?(GH.RapidBoard.State.setEpicShownOnRapidBoard(!1),GH.ViewActions.setEpicLozengesVisible(!1)):(GH.RapidBoard.State.setEpicShownOnRapidBoard(!0),GH.ViewActions.setEpicLozengesVisible(!0))};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/ViewActions.soy' */
// This file was automatically generated from ViewActions.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.viewactions.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.viewactions == 'undefined') { GH.tpl.viewactions = {}; }


GH.tpl.viewactions.renderActions = function(opt_data, opt_ignored) {
  return '' + aui.buttons.button({id: 'js-view-actions', extraClasses: ['ghx-actions-tools', 'ghx-dropdown-trigger'], text: "Board"});
};
if (goog.DEBUG) {
  GH.tpl.viewactions.renderActions.soyTemplateName = 'GH.tpl.viewactions.renderActions';
}


GH.tpl.viewactions.renderManageViewActions = function(opt_data, opt_ignored) {
  return '' + aui.buttons.button({extraClasses: ['js-view-action-create'], text: "Create board"});
};
if (goog.DEBUG) {
  GH.tpl.viewactions.renderManageViewActions.soyTemplateName = 'GH.tpl.viewactions.renderManageViewActions';
}


GH.tpl.viewactions.renderConfigurationViewActions = function(opt_data, opt_ignored) {
  return '<div class="aui-list" id="board-tools-section-content"><ul class="aui-list-section aui-first"><li class="aui-list-item"><a href="#" class="aui-list-item-link js-view-action-copy disabled">' + soy.$$escapeHtml("Copy") + '</a></li><li class="aui-list-item"><a href="#" class="aui-list-item-link js-view-action-delete disabled">' + soy.$$escapeHtml("Delete") + '</a></li></ul><ul class="aui-list-section aui-last"><li class="aui-list-item"><a href="#" class="aui-list-item-link js-view-action-create disabled">' + soy.$$escapeHtml("Create board") + '</a></li></ul></div>';
};
if (goog.DEBUG) {
  GH.tpl.viewactions.renderConfigurationViewActions.soyTemplateName = 'GH.tpl.viewactions.renderConfigurationViewActions';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/StatusCategoryPicker.js' */
GH.StatusCategoryPicker=function(){function t(t){var n={statusCategoryPicker:null,options:_.defaults({},t,a)};return e(n),s(n),i(n)}function e(t){t.options.element.html(GH.tpl.component.statuscategorypicker.renderStatusCategoryPickerOptions({statusCategories:t.options.statusCategories,selectedStatusCategoryId:t.options.selectedStatusCategoryId}))}function s(t){t.statusCategoryPicker=AJS.SingleSelect.extend({_hasIcon:function(){return!0},setSelection:function(t){AJS.SingleSelect.fn.setSelection.call(this,t),this.$container.find(".fake-ss-icon").remove(),this.$container.append(n(t).css({position:"absolute",left:"6px",top:"50%",marginTop:"-8px",boxSizing:"border-box"}).addClass("fake-ss-icon aui-ss-entity-icon"))},setSelectionByValue:function(t){var e=_.find(this.suggestionsHandler.model.getAllDescriptors(),function(e){return e.properties.value==t});e&&this.setSelection(e)},disableWithValue:function(t){this.setSelectionByValue(t),this.disable()},enableWithValueIfDisabled:function(t){this.disabled&&(this.enable(),this.setSelectionByValue(t))}}),t.statusCategoryPicker.fn._renders.entityIcon=function(t){return AJS.$()}}function n(t){var e=_.omit(AJS.$.extend({},t.model().data()),"descriptor"),s=AJS.$(JIRA.Template.Util.Issue.Status.issueStatus({issueStatus:{name:t.label(),statusCategory:e},isCompact:!0}));return s.removeClass("jira-issue-status-lozenge-tooltip").removeAttr("title").removeAttr("data-tooltip"),s}function i(t){var e=new t.statusCategoryPicker(t.options),s=e.listController._renders.suggestion;return e.listController._renders.suggestion=function(t){var e=s.apply(this,arguments);return e.find("a").prepend("&nbsp;").prepend(n(t)),e},e}var o=4,a={width:250,itemAttrDisplayed:"label",errorMessage:"",removeOnUnSelect:!1,statusCategories:[],selectedStatusCategoryId:o};return{build:t,defaultStatusCategoryId:o}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/StatusCategoryPicker.soy' */
// This file was automatically generated from StatusCategoryPicker.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.component.statuscategorypicker.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.component == 'undefined') { GH.tpl.component = {}; }
if (typeof GH.tpl.component.statuscategorypicker == 'undefined') { GH.tpl.component.statuscategorypicker = {}; }


GH.tpl.component.statuscategorypicker.renderStatusCategoryPickerOptions = function(opt_data, opt_ignored) {
  var output = '';
  var statusCategoryList3 = opt_data.statusCategories;
  var statusCategoryListLen3 = statusCategoryList3.length;
  for (var statusCategoryIndex3 = 0; statusCategoryIndex3 < statusCategoryListLen3; statusCategoryIndex3++) {
    var statusCategoryData3 = statusCategoryList3[statusCategoryIndex3];
    output += '<option value="' + soy.$$escapeHtml(statusCategoryData3.id) + '" data-self="' + soy.$$escapeHtml(statusCategoryData3.self) + '" data-id="' + soy.$$escapeHtml(statusCategoryData3.id) + '" data-key="' + soy.$$escapeHtml(statusCategoryData3.key) + '" data-color-name="' + soy.$$escapeHtml(statusCategoryData3.colorName) + '"' + ((opt_data.selectedStatusCategoryId == statusCategoryData3.id) ? 'selected="selected"' : '') + '>' + soy.$$escapeHtml(statusCategoryData3.name) + '</option>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.statuscategorypicker.renderStatusCategoryPickerOptions.soyTemplateName = 'GH.tpl.component.statuscategorypicker.renderStatusCategoryPickerOptions';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/detail/FancyBox.js' */
GH.DetailFancyBox={},GH.DetailFancyBox.initFancyBox=function(){GH.DetailFancyBox.initFancyBoxForClass("a.gallery")},GH.DetailFancyBox.initFancyBoxForClass=function(n){var o=function(){jQuery(n).fancybox.close()},e=function(){return jQuery.os.linux&&jQuery.browser.mozilla},t=!0;e()&&(t=!1);var a={imageScale:!0,centerOnScroll:!1,overlayShow:t,callbackOnStart:function(){jQuery("#header").css("zIndex","-1"),t&&jQuery("body").addClass("fancybox-show")},callbackOnShow:function(){jQuery(document).click(function(){o()})},onComplete:function(){var n=AJS.$("#fancybox-title"),o=AJS.$("#fancybox-title-main").outerWidth(),e=AJS.$("#fancybox-title-left").outerWidth(),t=AJS.$("#fancybox-title-right").outerWidth();n.width(o+e+t+5);var a=AJS.$("#fancybox-inner").width();n.css("marginLeft",-(n.width()/2)+a/2),n.css("bottom",n.outerHeight(!0)*-1)},callbackOnClose:function(){if(jQuery("#header").css("zIndex",""),t&&jQuery("body").removeClass("fancybox-show"),jQuery(document).unbind("click",o),jQuery.browser.safari){var n=AJS.$(window).scrollTop();AJS.$(window).scrollTop(10+5*(10==n)).scrollTop(n)}}};AJS.$.browser.msie&&(a.transitionIn="none",a.transitionOut="none"),jQuery(n).fancybox(a)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/detail/fixed/TimeTrackingInlineDialog.js' */
GH.TimeTrackingInlineDialog={},GH.TimeTrackingInlineDialog.model={shouldCloseLater:void 0,isOpen:!1,dialog:null},GH.TimeTrackingInlineDialog.setDialog=function(i){GH.TimeTrackingInlineDialog.model.dialog=i},GH.TimeTrackingInlineDialog.getDialog=function(){return GH.TimeTrackingInlineDialog.model.dialog},GH.TimeTrackingInlineDialog.setIsOpen=function(i){GH.TimeTrackingInlineDialog.model.isOpen=i},GH.TimeTrackingInlineDialog.getIsOpen=function(){return GH.TimeTrackingInlineDialog.model.isOpen},GH.TimeTrackingInlineDialog.setShouldCloseLater=function(i){GH.TimeTrackingInlineDialog.model.shouldCloseLater=i},GH.TimeTrackingInlineDialog.getShouldCloseLater=function(){return GH.TimeTrackingInlineDialog.model.shouldCloseLater},GH.TimeTrackingInlineDialog.init=function(){AJS.$(document).delegate("dd.ghx-fieldname-aggregatetimeestimate","click",GH.TimeTrackingInlineDialog.show),GH.InlineDialog.registerInlineDialogHacks("detailview-timetracking",{validateClickToCloseFn:GH.TimeTrackingInlineDialog.shouldCloseDialogHandler})},GH.TimeTrackingInlineDialog.show=function(){if(!GH.TimeTrackingInlineDialog.getIsOpen()){var i={initCallback:function(){GH.TimeTrackingInlineDialog.setIsOpen(!0)},hideCallback:function(){GH.TimeTrackingInlineDialog.setIsOpen(!1),GH.InlineDialog.remove("detailview-timetracking"),GH.TimeTrackingInlineDialog.setDialog(null),GH.TimeTrackingInlineDialog.setShouldCloseLater(!1),GH.TimeTrackingInlineDialog.setIsOpen(!1)},hideDelay:6e4,fadeTime:0,noBind:!0},e=GH.InlineDialog.create("detailview-timetracking","dd.ghx-fieldname-aggregatetimeestimate",GH.TimeTrackingInlineDialog.renderDialog,i);GH.TimeTrackingInlineDialog.setDialog(e),GH.TimeTrackingInlineDialog.setShouldCloseLater(!1),e.show()}},GH.TimeTrackingInlineDialog.renderDialog=function(i,e,n){var l=AJS.$(GH.tpl.detailview.renderTimeTrackingInlineDialog());GH.DetailsObjectFactory.getDetailsFieldRenderer().renderTimeTrackingDialogFields(GH.DetailsObjectFactory.getDetailsModel().viewData,l),i.html(l);var a=i.find(".js-subs-remaining dd");a.addClass("ghx-clickable").click(function(){GH.DetailsView.setTab("ghx-tab-subtasks");var i=GH.TimeTrackingInlineDialog.shouldCloseDialogHandler();i&&GH.TimeTrackingInlineDialog.getDialog().hide()}),n()},GH.TimeTrackingInlineDialog.shouldCloseDialogHandler=function(){var i=0===GH.DetailsFieldEdit.getEditingCount();return i||GH.TimeTrackingInlineDialog.setShouldCloseLater(!0),i};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/detail/DetailsModel.js' */
define("jira-agile/rapid/ui/detail/details-model",["require"],function(e){"use strict";var t=e("underscore"),i=GH.RapidBoard,n=GH.DetailsView,s=/\?id=\d+/,r={};return r.TAB_SECTIONS={details:["details","people","dates"],description:["description"]},r.FIELD_SECTION_PRESETS={assignee:"people",created:"dates",components:"details",description:"description",fixVersions:"details",issuekey:"header",labels:"details",parentissuekey:"header",reporter:"people",summary:"header",status:"details",updated:"dates",versions:"details",votes:"people"},r.fieldErrorSelectors={},r.fieldCategories={timetracking:["timeestimate","timeoriginalestimate","aggregatetimeestimate","aggregatetimeestimate_subtasks"]},r.issueIdToKeyCache={},r.getIssueKeyForId=function(e){return this.issueIdToKeyCache[e]||!1},r.viewData=null,r.clearViewData=function(){this.viewData=null},r.setViewData=function(e){this.issueIdToKeyCache[e.id]=e.key,this.processFields(e),this.applyOperationUrlPatches(e),this.escapeCommentsRestriction(e.comments),this.filterIssueOperations(e),this.viewData=e},r.setViewDataForField=function(e,t){var i,n=this.viewData;for(i=0;i<n.fields.length;i++)if(n.fields[i].id===e){n.fields[i]=t;break}},r.getViewField=function(e){return t.find(this.viewData.fields,function(t){return t.id===e})},r.isFieldInCategory=function(e,i){var n=this.fieldCategories[i];return!t.isUndefined(n)&&t.any(n,function(t){return t===e})},r.isFieldInSection=function(e,i){var n=this.fieldSections[i];return!t.isUndefined(n)&&t.any(n,function(t){return t===e})},r.getPrimaryEstimateStatisticField=function(){return 0!==this.fieldSections.estimate.length&&this.getFieldsForSection("estimate")[0]},r.getFieldsForSection=function(e){var i=this.fieldSections[e];return t.isUndefined(i)?[]:t.map(i,function(e){return this.getViewField(e)}.bind(this))},r.getErrorSelectorForField=function(e){return this.fieldErrorSelectors[e]||!1},r.processFields=function(e){GH.log("unimplemented function processFields",GH.Logger.Contexts.ui)},r.applyOperationUrlPatches=function(e){var n=i.getCurrentPageReturnUrl(),s=AJS.$("#atlassian-token").attr("content");e.operations&&t.each(e.operations.sections,function(e){t.each(e.operations,function(e){e.url=this.patchIssueOperationUrl(e.url,n,s),e.label=this.patchRankOperationName(e.styleClass,e.label)}.bind(this))}.bind(this))},r.patchRankOperationName=function(e,t){return"issueaction-greenhopper-rank-top-operation"===e?"Send to Top":"issueaction-greenhopper-rank-bottom-operation"===e?"Send to Bottom":t},r.patchIssueOperationUrl=function(e,t,i){var n="";e.indexOf("#")!==-1&&(n=e.substring(e.indexOf("#")),e=e.substring(0,e.indexOf("#"))),e+=e.indexOf("?")<0?"?":"&",e+="returnUrl="+t;var r="atl_token="+i;return e.indexOf(r)<0&&(e=e.replace("atl_token=",r)),e.indexOf("WorkflowUIDispatcher.jspa")>-1&&(e=e.replace(s,"?id={0}")),e+n},r.escapeCommentsRestriction=function(e){GH.log("unimplemented function escapeCommentsRestriction",GH.Logger.Contexts.ui)},r.filterIssueOperations=function(e){var i=["view-voters","greenhopper-planningboard-operation","greenhopper-taskboard-operation","attach-screenshot","toggle-issue/detailswatch-issue","manage-watchers","move-issue","edit-labels","issue-to-subtask","clone-issue","toggle-vote-issue","greenhopper-rapidboard-operation"],s=["opsbar-transitions"],a=[];t.each(e.operations.sections,function(e){var n=t.find(s,function(t){return t===e.groupId});if(!n){var o=t.reject(e.operations,function(e){var n=t.find(i,function(t){return t===e.id});return t.isString(n)});r.renameWatchIssueId(o),o.length>0&&a.push({operations:o})}});for(var o,l,d=0;d<a.length;d++){var u=a[d];t.isUndefined(o)||(1===u.operations.length?(t.isUndefined(l)&&1===o.operations.length&&(l=o),t.isUndefined(l)||(l.operations=l.operations.concat(u.operations),u.operations=[])):u.operations.length>1&&(l=void 0)),o=u}a=t.reject(a,function(e){return 0===e.operations.length}),e.operations.filteredSections=a,n.rapidViewConfig.sprintSupportEnabled&&e.editable&&e.sprint&&!e.isSubtask&&this.addRemoveFromSprintOperation(e.operations),this.addFlagOperation(e.operations,!e.flagged)},r.renameWatchIssueId=function(e){t.find(e,function(e){if("toggle-watch-issue"===e.id)return e.id="gh-toggle-watch-issue",!0})},r.addRemoveFromSprintOperation=function(e){return e.filteredSections.push({operations:[{id:"removeIssueFromSprint",label:"Remove from Sprint",styleClass:"issueaction-remove-issue-from-sprint js-remove-issue-from-sprint",title:"Removes this issue from the current sprint",url:""}]}),e},r.addFlagOperation=function(e,t){t?e.filteredSections.push({operations:[{id:"flagIssue",label:"Add flag",styleClass:"issueaction-flag js-flag-issue",title:"Add flag",url:""},{id:"flagIssueAndComment",label:"Add flag and comment",styleClass:"issueaction-flag-and-comment js-flag-issue-and-comment",title:"Add flag and comment",url:""}]}):e.filteredSections.push({operations:[{id:"unflagIssue",label:"Remove flag",styleClass:"issueaction-unflag js-unflag-issue",title:"Remove flag",url:""},{id:"unflagIssueAndComment",label:"Remove flag and add comment",styleClass:"issueaction-unflag-and-comment js-unflag-issue-and-comment",title:"Remove flag and add comment",url:""}]})},r.hasIssueOperation=function(e){return t.find(this.viewData.operations.sections,function(i){return t.find(i.operations,function(t){return t.id===e})})},r});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/detail/fixed/FixedDetailsModel.js' */
define("jira-agile/rapid/ui/detail/legacy/legacy-details-model",["require"],function(i){"use strict";var e=i("underscore"),t=i("jira-agile/rapid/ui/detail/details-model"),r={};return r.getPrimaryTrackingStatisticField=function(){if(0===this.fieldSections.tracking.length)return!1;var i=this.getFieldsForSection("tracking");return i[0]},r.getSecondaryTrackingStatisticFields=function(){if(this.fieldSections.tracking.length<2)return[];var i=this.getFieldsForSection("tracking");return i.slice(1)},r.processFields=function(i){this.fieldSections={header:[],estimate:[],tracking:[],details:[],people:[],dates:[],links:[],description:[]};var t=i.primaryStatisticFieldId||"",r=i.trackingStatisticFieldId||"",s=[],n=!1;e.forEach(i.fields,function(i){if(i.id===t)this.fieldSections.estimate.push(i.id);else if(i.id===r)s.push(i.id);else if("aggregatetimeestimate"===i.id||"aggregatetimeestimate_subtasks"===i.id)s.push(i.id),n=!0;else{var e=this.FIELD_SECTION_PRESETS[i.id];e=e||i.category||"details","unsupported"!==e&&this.fieldSections[e].push(i.id)}}.bind(this));var a;if(s.length>0&&n?a=function(i){return"aggregatetimeestimate"===i}:s.length>0&&(a=function(i){return i===r}),!e.isUndefined(a)){var d=e.find(s,a),c=e.reject(s,a),l=[];l.push(d),n&&(l=l.concat(c)),this.fieldSections.tracking=l}},r.escapeCommentsRestriction=function(i){for(var e=0;e<i.length;e++){var t=i[e].restrictedTo;t&&(i[e].restrictedTo=AJS.escapeHTML(String(t)))}},e.extend(t,r)});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/detail/DetailsView.js' */
!function(){function e(e){return"none"===e.css("display")?0:e.width()}GH.DetailsView=new GH.Events,GH.DetailsView.minWidth=400,GH.DetailsView.API_EVENT_DETAIL_VIEW_UPDATED="GH.DetailView.updated",GH.DetailsView.EVENT_DETAIL_VIEW_CLOSED="GH.DetailView.closed",GH.DetailsView.EVENT_DETAIL_VIEW_UPDATE_STARTED="GH.DetailView.update.started",GH.DetailsView.selectedIssueKey=void 0,GH.DetailsView.rapidViewId=void 0,GH.DetailsView.rapidViewConfig=void 0,GH.DetailsView.containerSelector=void 0,GH.DetailsView.TAB_SUBTASKS="subtasks",GH.DetailsView.$lastSectionSpacer=void 0,GH.DetailsView.opts={canClose:!0,showActionsCog:!0,showSubtaskTab:!0,showLogWorkTrigger:!1,updateSizeHandler:function(){}};var i=require("jira-agile/rapid/analytics-tracker");GH.DetailsView.analytics=new i("gh.issueaction.issuedetail"),GH.DetailsView.triggerAnalyticsOpenDetailView=function(){AJS.trigger("analytics",{name:"gh.issueaction.issuedetail.open"}),GH.DetailsView.analytics.openDetailViewTime=Date.now()},GH.DetailsView.triggerAnalyticsCloseDetailView=function(){var e=GH.DetailsView.analytics.openDetailViewTime,i=Date.now();!e||i-e>3e3?AJS.trigger("analytics",{name:"gh.issueaction.issuedetail.close"}):AJS.trigger("analytics",{name:"gh.issueaction.issuedetail.dismiss"}),GH.DetailsView.analytics.openDetailViewTime=null},GH.DetailsView.triggerAnalyticsEventForAction=function(e,i){AJS.trigger("analytics",{name:"gh.issueaction.issuedetail."+e,data:i})},GH.DetailsView.init=function(){GH.DetailsView._initialisationPromise.done(function(){GH.DetailsObjectFactory.mergeDetailsViewTemplate(),AJS.$(document).bind("tabSelect",GH.DetailsView.handleTabSelection),AJS.$(GH).bind("issueUpdated",GH.DetailsView.handleIssueUpdated),AJS.$(document).delegate(".js-detailclose","click",function(e){GH.DetailsView.closeHandler&&(GH.DetailsView.closeHandler(e),GH.DetailsView.triggerAnalyticsCloseDetailView())}),GH.DetailsView._postInit(),GH.DetailsFieldEdit.init()})},GH.DetailsView.getMode=function(){return GH.RapidBoard.ViewController.getMode()},GH.DetailsView.setContainerSelector=function(e){GH.DetailsView.containerSelector=e,GH.DetailsView._initialisationPromise.done(function(){GH.DetailsView._onContainerSelectorSet(e)})},GH.DetailsView._onContainerSelectorSet=function(e){},GH.DetailsView.setOptions=function(e){GH.DetailsView.opts=e,GH.DetailsView.closeHandler=GH.DetailsView.opts.closeHandler},GH.DetailsView.getContainer=function(){return GH.DetailsView.containerSelector?AJS.$(GH.DetailsView.containerSelector):(GH.log("tried to get container of DetailsView before selector was set"),AJS.$())},GH.DetailsView._getContentContainer=function(){return GH.DetailsView.getContainer().find(".ghx-detail-contents")},GH.DetailsView._getIssueElement=function(){return GH.DetailsView.getContainer().find(".ghx-detail-issue")},GH.DetailsView._replaceUpdatedFields=function(e,i,t){function a(e){return!_.contains(GH.DetailsView.getEditsInProgress(),e)}function s(e){return _.contains(["timeestimate","timeoriginalestimate"],e)}GH.DetailsView._replaceField(e,i,t),"timeoriginalestimate"===t&&a("timeestimate")&&GH.DetailsView._replaceField(e,i,"timeestimate"),"timeestimate"===t&&a("timeoriginalestimate")&&GH.DetailsView._replaceField(e,i,"timeoriginalestimate"),s(t)&&GH.DetailsView._replaceField(e,i,"aggregatetimeestimate")},GH.DetailsView._replaceField=function(e,i,t){var a=GH.DetailsView._InlineEditor.getFieldSelector(t),s=e.find(a),n=i.find(a);0===n.length?s.closest("li, dl").remove():(s.replaceWith(n),GH.DetailsView._InlineEditor.triggerFieldUpdate(t,e,n))},GH.DetailsView._setIssueElement=function(e,i){var t=GH.DetailsView._getIssueElement();return 0===t.length?void GH.DetailsView._getContentContainer().prepend(e):void(i&&GH.DetailsView.hasEditsInProgress()?GH.DetailsView._replaceUpdatedFields(t,e,i):t.replaceWith(e))},GH.DetailsView.setRapidViewId=function(e){GH.DetailsView.rapidViewId=e},GH.DetailsView.setRapidViewConfig=function(e){GH.DetailsView.rapidViewConfig=e,GH.DetailsView.opts.showLogWorkTrigger&&(GH.DetailsView.opts.showLogWorkTrigger=!_.isUndefined(e.trackingStatistic)&&e.trackingStatistic.isEnabled)},GH.DetailsView.setSelectedIssueKey=function(e){GH.DetailsView.selectedIssueKey=e},GH.DetailsView.clearSelectedIssueKey=function(){GH.DetailsView.selectedIssueKey=void 0},GH.DetailsView.show=function(e){GH.DetailsView._initialisationPromise.done(function(){GH.DetailsFieldEdit.completeEdits(),e||GH.DetailsObjectFactory.getDetailsModel().clearViewData();var i=GH.DetailsView.getContainer();if(0===i.find("#ghx-detail-contents").length){var t=GH.tpl.detailview.renderIssueDetailsSkeleton();i.empty().append(t),i.width(GH.DetailsView.getWidth()),GH.DetailsView.initTooltips(),GH.DetailsView.triggerAnalyticsOpenDetailView()}return GH.DetailsView.selectedIssueKey?(GH.DetailsView.trigger("before:render"),GH.DetailsView.load(null,e),GH.RapidBoard.ViewController.handleResizeEvent(),void GH.DetailsView._postShow()):void GH.DetailsView._getIssueElement().remove()})},GH.DetailsView.getWidth=function(){var e=GH.RapidBoard.State.getDetailViewWidth(),i=AJS.$("#ghx-backlog").width()+AJS.$("#ghx-detail-view").width(),t=e*i,a=Math.max(t,GH.DetailsView.minWidth);return Math.min(GH.DetailsView.getMaxWidth(),a)},GH.DetailsView.initTooltips=function(){var e=[".ghx-statistic-group [data-tooltip]"];GH.Tooltip.tipsify({selector:e.join(", "),context:"#ghx-detail-contents",html:!0})},GH.DetailsView.hide=function(){GH.DetailsView.currentPromise&&GH.DetailsView.currentPromise.abort&&GH.DetailsView.currentPromise.abort(),GH.DetailsFieldEdit.completeEdits(),GH.DetailsView.getContainer().empty(),AJS.$("#gh").removeClass("js-ghx-detail-loading").removeClass("js-ghx-detail-loaded"),AJS.$(GH).trigger(GH.DetailsView.EVENT_DETAIL_VIEW_CLOSED),GH.RapidBoard.ViewController.handleResizeEvent(),GH.DetailsView._initialisationPromise.done(function(){GH.DetailsView._postHide()})},GH.DetailsView.resizeLastSectionSpacer=function(){var e,i=AJS.$("#js-detail-nav-content"),t=i.find(".ghx-detail-section"),a=0;e=i.data("$lastSectionSpacer"),e&&(a=e.height());var s=i.height(),n=t.last(),l=n.height()-a;if(s>l){e||i.data("$lastSectionSpacer",e=AJS.$("<div>",{css:{clear:"both"}}).appendTo(n));var r=AJS.$.browser.msie?0:40;e.height(s-l-r)}},GH.DetailsView.selectNavItem=function(e){var i=_.debounce(function(e){GH.DetailsView.triggerAnalyticsEventForAction("scroll",{sectionId:e})},150),t=AJS.$(".ghx-detail-nav-menu .ghx-detail-nav-item"),a=t.filter(".ghx-selected");a.find("a").attr("href")!=="#"+e&&i(e),a.removeClass("ghx-selected");var s=AJS.$("#"+e),n=s.attr("ghx-tab-icon-id");n&&(e=n),t.find("a").filter(function(){return this.hash==="#"+e}).closest(".ghx-detail-nav-item").addClass("ghx-selected")},GH.DetailsView.updateSize=function(){GH.DetailsView.opts.updateSizeHandler(),GH.DetailsView.resizeLastSectionSpacer(),GH.DetailsView.getContainer().width(GH.DetailsView.getWidth()),GH.BacklogView.checkBacklogWidth(),AJS.$("#ghx-detail-view").resizable("option","maxWidth",GH.DetailsView.getMaxWidth())},GH.DetailsView.getFixedElement=function(){return{element:GH.DetailsView.getContainer(),resizeCallback:GH.DetailsView.updateSize}},GH.DetailsView.reload=function(e){var i=GH.DetailsFieldEdit.model;i&&i.getEditingCount()||GH.DetailsView.show(e)},GH.DetailsView.load=function(e,i){AJS.$("#gh").addClass("js-ghx-detail-loading").removeClass("js-ghx-detail-loaded"),GH.Features.EDITABLE_DETAIL_VIEW_ENABLED.isEnabled()&&i?e&&GH.DetailsView.hasEditsInProgress()?GH.DetailsView._Reloader.reload(i,e,GH.DetailsView.renderDetailsSingleField):GH.DetailsView._Reloader.reload(i):GH.DetailsView.loadContent(e,GH.DetailsView.renderDetails)},GH.DetailsView.hasEditsInProgress=function(){return GH.DetailsView.getEditsInProgress().length>0},GH.DetailsView.getEditsInProgress=function(){var e=GH.DetailsView._InlineEditor&&GH.DetailsView._InlineEditor.getEditsInProgress();return e||[]},GH.DetailsView.loadContent=function(e,i){e||GH.DetailsView.showSpinner("load-content-spinner");var t={rapidViewId:GH.DetailsView.rapidViewId,issueIdOrKey:GH.DetailsView.selectedIssueKey,loadSubtasks:GH.DetailsView.opts.showSubtaskTab};GH.DetailsObjectFactory.isInlineEditableEnabled()&&GH.DetailsView._InlineEditor.getIssueAttachmentQuery()&&(t=_.extend(t,GH.DetailsView._InlineEditor.getIssueAttachmentQuery())),GH.DetailsView.currentPromise=GH.Ajax.get({url:"/xboard/issue/details.json",data:t},"detailView"),GH.DetailsView.currentPromise.done(function(t){t.key==GH.DetailsView.selectedIssueKey&&(GH.DetailsObjectFactory.getDetailsModel().setViewData(t),!_.isUndefined(i)&&_.isFunction(i)&&i(e),GH.DetailsView.currentPromise=void 0,GH.DetailsView.makeResizable(),GH.BacklogView.checkBacklogWidth())}).always(function(){GH.DetailsView.hideSpinner("load-content-spinner")})},GH.DetailsView.showSpinner=function(e){AJS.$(".ghx-detail-view-blanket").show().spin("large").attr("spinnerOwnerId",e?e:"")},GH.DetailsView.hideSpinner=function(e){var i=AJS.$(".ghx-detail-view-blanket");e&&i.attr("spinnerOwnerId")!==e||i.hide().spin(!1).attr("spinnerOwnerId","")},GH.DetailsView.getBacklogElementWidth=function(){return e(AJS.$("#ghx-backlog"))},GH.DetailsView.getDetailViewElementWidth=function(){return e(AJS.$("#ghx-detail-view"))},GH.DetailsView.getMaxWidth=function(){return Math.max(GH.DetailsView.minWidth,(GH.DetailsView.getDetailViewElementWidth()+GH.DetailsView.getBacklogElementWidth())/2)},GH.DetailsView.makeResizable=function(){AJS.$("#ghx-detail-view").resizable("destroy"),AJS.$("#ghx-detail-view").resizable({handles:{w:AJS.$("#js-sizer")},resize:GH.BacklogView.checkBacklogWidth,stop:GH.DetailsView.storeWidth,maxWidth:GH.DetailsView.getMaxWidth(),minWidth:GH.DetailsView.minWidth}),GH.Tooltip.tipsify({selector:"#js-sizer",gravity:"e"})},GH.DetailsView.storeWidth=function(){var e=GH.DetailsView.getDetailViewElementWidth(),i=AJS.$("#ghx-backlog").width(),t=e<=GH.DetailsView.minWidth?0:e/(e+i);GH.RapidBoard.State.setDetailViewWidth(t);var a=function(e){return e>=GH.DetailsView.minWidth&&e<=500},s=function(e){return e>500&&e<=600},n=function(e){return e>600};GH.BacklogView.adjustStickyHeader(),GH.DetailsView.triggerAnalyticsEventForAction("resize",{targetWidth:a(e)?"small":s(e)?"medium":n(e)?"large":""})},GH.DetailsView.renderDetailsSingleField=function(e){var i=GH.DetailsObjectFactory.getDetailsModel().viewData,t=AJS.$(GH.tpl.detailview.renderIssueDetails({issueDetails:i,canClose:GH.DetailsView.opts.canClose,showActionsCog:GH.DetailsView.opts.showActionsCog&&GH.UserData.hasUser()}));GH.DetailsObjectFactory.getDetailsFieldRenderer().renderFields(i,t,GH.DetailsView.opts),GH.DetailsView._setIssueElement(t,e)},GH.DetailsView.renderDetails=function(){GH.DetailsView._initialisationPromise.done(function(){AJS.$(GH).trigger(GH.DetailsView.EVENT_DETAIL_VIEW_UPDATE_STARTED);var e=GH.DetailsObjectFactory.getDetailsModel().viewData,i=AJS.$(GH.tpl.detailview.renderIssueDetails({issueDetails:e,canClose:GH.DetailsView.opts.canClose,showActionsCog:GH.DetailsView.opts.showActionsCog&&GH.UserData.hasUser()}));GH.DetailsObjectFactory.getDetailsFieldRenderer().renderFields(e,i,GH.DetailsView.opts),GH.DetailsView.registerAllListeners(i),GH.DetailsView._setIssueElement(i),!GH.Features.EDITABLE_DETAIL_VIEW_ENABLED.isEnabled()&&e.issueLinks.linkingEnabled&&GH.DetailsIssueLinks.loadRemoteLinks(e.issueLinks),e.attachments&&!_.isEmpty(e.attachments.imageAttachments)&&GH.DetailFancyBox.initFancyBox(),GH.DetailsView.updateSize(),AJS.$(".js-epic-remove").find(".aui-icon-close").addClass("aui-icon aui-icon-small aui-iconfont-remove-label ghx-iconfont"),AJS.$("#gh").removeClass("js-ghx-detail-loading").addClass("js-ghx-detail-loaded"),GH.DetailsViewScrollTracker.init({onSelectedNavChanged:GH.DetailsView.selectNavItem}),GH.DetailsViewScrollTracker.afterDetailsViewLoaded({issueId:e.id}),GH.DetailsView.trigger("after:render"),JIRA.trigger(GH.DetailsView.API_EVENT_DETAIL_VIEW_UPDATED,{issueId:e.id,issueKey:e.key,rapidViewId:GH.DetailsView.rapidViewId,mode:GH.DetailsView.getMode()}),GH.DetailsView._postRenderDetails(i)})},GH.DetailsView.registerAllListeners=function(e){if(e.find("#ghx-detail-head .aui-list").length>0){var i=function e(){AJS.$(t).each(function(e,i){i.hide(),i.layerController.$content&&i.layerController.$content.remove()}),AJS.$(GH).unbind(GH.DetailsView.EVENT_DETAIL_VIEW_CLOSED,e),AJS.$(GH).unbind(GH.DetailsView.EVENT_DETAIL_VIEW_UPDATE_STARTED,e)},t=AJS.Dropdown.create({trigger:e.find("#ghx-detail-head .ghx-actions"),content:e.find("#ghx-detail-head .aui-list"),alignment:AJS.RIGHT});AJS.$(GH).bind(GH.DetailsView.EVENT_DETAIL_VIEW_CLOSED,i),AJS.$(GH).bind(GH.DetailsView.EVENT_DETAIL_VIEW_UPDATE_STARTED,i)}e.find("#ghx-more-actions").click(function(e){e.preventDefault(),GH.IssueOperationShortcuts.showOperationsDialog()}),e.find(".js-issueaction-container-cog .js-issueaction").click(function(e){var i=AJS.$(e.currentTarget).attr("id");GH.DetailsView.analytics.trigger(i)}),e.find(".js-create-attachment").click(function(e){e.preventDefault(),GH.IssueOperationShortcuts.attachFilesSelectedIssue()}),GH.DetailsView.registerListenersForSubtask(e),e.find(".js-link-issue").click(function(e){e.preventDefault(),GH.IssueOperationShortcuts.linkSelectedIssue()}),e.find(".js-remove-issue-from-sprint").click(function(e){e.preventDefault();var i=GH.DetailsObjectFactory.getDetailsModel().viewData;if(i){var t=i.key;GH.IssueActions.removeIssuesFromSprint(GH.DetailsView.rapidViewId,t)}}),e.find(".js-flag-issue").click(function(e){e.preventDefault(),GH.DetailsView.flagCurrentIssue(!0,!1)}),e.find(".js-flag-issue-and-comment").click(function(e){e.preventDefault(),GH.DetailsView.flagCurrentIssue(!0,!0)}),e.find(".js-unflag-issue").click(function(e){e.preventDefault(),GH.DetailsView.flagCurrentIssue(!1,!1)}),e.find(".js-unflag-issue-and-comment").click(function(e){e.preventDefault(),GH.DetailsView.flagCurrentIssue(!1,!0)}),GH.DetailsView.registerHeaderFieldsListeners(e),e.find("#ghx-detail-head .ghx-actions").click(function(){AJS.trigger("analytics",{name:"gh.issueaction.issuedetail.open.more.actions"})}),GH.DetailsView._postRegisterAllListeners(e)},GH.DetailsView.registerListenersForSubtask=function(e){e.find(".js-create-subtask").click(function(e){e.preventDefault(),GH.IssueOperationShortcuts.createSubtask()}),e.find(".js-edit-subtask").click(function(e){e.preventDefault(),GH.DetailsView.setSubtaskIssueOverwrite(AJS.$(this))&&GH.IssueOperationShortcuts.editSelectedIssue()}),e.find(".js-delete-subtask").click(function(e){e.preventDefault(),GH.DetailsView.setSubtaskIssueOverwrite(AJS.$(this))&&GH.IssueOperationShortcuts.deleteSelectedIssue()})},GH.DetailsView.registerHeaderFieldsListeners=function(e){e.find(".js-log-work").click(function(e){e.preventDefault(),GH.IssueOperationShortcuts.logWorkOnSelectedIssue()})},GH.DetailsView.setSubtaskIssueOverwrite=function(e){var i=e.parents(".js-subtask-issue"),t=i.attr("data-issue-key"),a=parseInt(i.attr("data-issue-id"),10);return!(!t||!a)&&(GH.IssueOperationShortcuts.setOverrideSelectedIssue({id:a,key:t}),!0)},GH.DetailsView.handleTabSelection=function(e,i){if(0!==i.pane.parents("#ghx-detail-nav").length){var t=i.pane.attr("id");GH.DetailsViewScrollTracker.setSelectedTab(t)}},GH.DetailsView.setTab=function(e){var i=AJS.$("a[href=#"+e+"]");i.length>0&&AJS.tabs.change(i)},GH.DetailsView.handleIssueUpdated=function(e,i){GH.log(e.type+" from source "+i.source+" handled",GH.Logger.Contexts.event);var t=GH.DetailsObjectFactory.getDetailsModel().getIssueKeyForId(i.issueId);if(!t)return void GH.log("Unable to find key for updated issue id "+i.issueId+". Ignoring update",GH.Logger.Contexts.event);if(t===GH.DetailsView.selectedIssueKey&&!GH.Features.EDITABLE_DETAIL_VIEW_ENABLED.isEnabled()&&!_.isUndefined(i.fieldId)){var a=GH.DetailsObjectFactory.getDetailsModel().isFieldInSection(i.fieldId,"estimate")||GH.DetailsObjectFactory.getDetailsModel().isFieldInCategory(i.fieldId,"timetracking");a&&GH.DetailsView._handleHeaderChanged(i)}},GH.DetailsView.renderDetailsHeader=function(){var e=GH.DetailsObjectFactory.getDetailsModel().viewData,i=AJS.$("#ghx-detail-issue");GH.DetailsObjectFactory.getDetailsFieldRenderer().renderDetailsHeaderFields(e,i,GH.DetailsView.opts),GH.DetailsView.registerHeaderFieldsListeners(i),GH.DetailsView.updateSize(),AJS.$("#gh").removeClass("js-ghx-detail-loading").addClass("js-ghx-detail-loaded")},GH.DetailsView.hasCurrentError=function(){var e=AJS.$("#ghx-detail-issue");return e.find(".ghx-error").text().length>0},GH.DetailsView.flagCurrentIssue=function(e,i){function t(){AJS.$(GH).trigger("issueUpdated",{issueId:a.id,source:"detailView"}),GH.DetailsView.reload()}var a=GH.DetailsObjectFactory.getDetailsModel().viewData;a&&(i?GH.IssueFlagAndCommentAction.execute(a.key,e,t):GH.IssueActions.flag(a.key,e).done(t));var s;e?(s=i?"gh.issue.ctx.menu.action.flag.with.comment":"gh.issue.ctx.menu.action.flag",AJS.trigger("analytics",{name:s,data:{selectedIssueCount:1}})):(s=i?"gh.issue.ctx.menu.action.unflag.with.comment":"gh.issue.ctx.menu.action.unflag",AJS.trigger("analytics",{name:s,data:{selectedIssueCount:1}}))}}(),function(){function e(){return require("jira-agile/rapid/ui/detail/detail-view-resources").done(function(){GH.DetailsView._InlineEditor=require("jira-agile/rapid/ui/detail/inlineedit/issue-detail-view-inline-editor"),GH.DetailsView._Reloader=require("jira-agile/rapid/ui/detail/inlineedit/details-view-reloader"),GH.DetailsView._postInit=function(){},GH.DetailsView._postShow=function(){GH.DetailsView._InlineEditor.init({$detailContainer:GH.DetailsView.getContainer(),getRapidViewIdCallback:function(){return GH.DetailsView.rapidViewId},loadIssueDetailCallback:GH.DetailsView.load,getInlineEditableFieldsCallback:function(){var e=GH.DetailsObjectFactory.getDetailsModel();return e.viewData&&e.viewData.editable?GH.DetailsObjectFactory.getDetailsModel().getInlineEditableFields():[]},getIssueIdCallback:function(){return GH.DetailsObjectFactory.getDetailsModel().viewData.id},getIssueKeyCallback:function(){return GH.DetailsObjectFactory.getDetailsModel().viewData.key},getIssueSprintStatusCallback:function(){return GH.DetailsObjectFactory.getDetailsModel().viewData.sprint?GH.DetailsObjectFactory.getDetailsModel().viewData.sprint.state:null}})},GH.DetailsView._postRegisterAllListeners=function(){},GH.DetailsView._postHide=function(){GH.DetailsView._InlineEditor.destroy()},GH.DetailsView._postRenderDetails=function(e){GH.DetailsView._InlineEditor.fixUpDetailView(e),GH.DetailsView._InlineEditor.loadIssueToEditor()},GH.DetailsView._handleHeaderChanged=function(){GH.DetailsView.load()},GH.DetailsView._onContainerSelectorSet=function(e){e&&AJS.$(e).addClass("gh-editable-detail-view")},GH.DetailsView.getAttachmentViewQuery=function(){return GH.DetailsView._InlineEditor.getIssueAttachmentQuery()},GH.DetailsView.registerListenersForTab=function(e,i){GH.DetailsView._InlineEditor.registerListenersForTab(e,i),"sub_tasks"===e&&GH.DetailsView.registerListenersForSubtask(i)}})}function i(){return GH.DetailsView.MORE_COMMENTS_COUNT=5,GH.DetailsView._postInit=function(){GH.TimeTrackingInlineDialog.init()},GH.DetailsView._postShow=function(){},GH.DetailsView._postRegisterAllListeners=function(e){e.find(".js-create-comment").click(function(e){e.preventDefault(),GH.IssueOperationShortcuts.commentSelectedIssue()})},GH.DetailsView._postHide=function(){},GH.DetailsView._postRenderDetails=function(){},GH.DetailsView._onContainerSelectorSet=function(e){e&&AJS.$(e).addClass("gh-fixed-detail-view")},GH.DetailsView.getNumDisplayedComments=function(){return AJS.$("#ghx-detail-comments .ghx-comment").length},GH.DetailsView._handleHeaderChanged=function(e){GH.DetailsView.loadContent(null,function(){GH.DetailsView.handleHeaderChangeIssueUpdate(e.issueId)})},GH.DetailsView.handleHeaderChangeIssueUpdate=function(e){if(GH.DetailsView.renderDetailsHeader(),GH.TimeTrackingInlineDialog.getShouldCloseLater()?GH.TimeTrackingInlineDialog.getDialog().hide():GH.TimeTrackingInlineDialog.getIsOpen()&&GH.TimeTrackingInlineDialog.getDialog().show(),GH.DetailsFieldEdit.getEditingCount()>0){var i=GH.DetailsFieldEdit.getEditingFieldIds()[0];(GH.DetailsObjectFactory.getDetailsModel().isFieldInSection(i,"estimate")||GH.DetailsObjectFactory.getDetailsModel().isFieldInSection(i,"tracking")||GH.DetailsObjectFactory.getDetailsModel().isFieldInSection(i,"header"))&&(GH.DetailsFieldEdit.discardEdits(),GH.DetailsFieldEdit.editField(e,i))}},AJS.$.Deferred().resolve().promise()}GH.DetailsObjectFactory.isInlineEditableEnabled()?GH.DetailsView._initialisationPromise=e():GH.DetailsView._initialisationPromise=i()}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/detail/DetailsViewScrollTracker.js' */
define("jira-agile/rapid/ui/detail/details-view-scroll-tracker",["underscore","jquery","require"],function(e,n,i){"use strict";function t(i){b=n("#js-detail-nav-content"),m=n(".ghx-detail-nav-menu"),y=e.isFunction(i.onSelectedNavChanged)?i.onSelectedNavChanged:function(){},T.init({beforeScroll:d,afterScroll:u}),j=!0,u(),m.delegate("a",{"click.scrollTracking":l}),n(document).on("click",'.aui-message-success a[href="'+AJS.Meta.get("viewissue-permlink")+'"]',function(e){e.preventDefault(),r("attachmentmodule",!0)})}function a(e){e.issueId!==w||D?(r(v()),D=!1):I>=0&&o(I),w=e.issueId}function c(e){h(e),D=!0}function l(e){e.preventDefault();var n=this.hash.replace("#","");r(n,!0),g("go.to.section",{sectionId:n})}function r(e,i){var t=n("#"+e);t.length>0&&(f(e),I=T.scrollToSection(e,i))}function o(e){T.scrollTo(e);var n=T.getCurrentSection();n&&f(n)}function u(){b.bind({"scroll.scrollTracking":function(){j=!0}}),C=setInterval(function(){s()},40)}function s(){if(j){j=!1,I=T.getScrollPosition();var e=T.getCurrentSection();e&&f(e)}}function d(){clearInterval(C),b.unbind("scroll.scrollTracking")}function f(e){y(e),h(e)}function g(e,n){AJS.trigger("analytics",{name:k+"."+e,data:n})}function v(){return S.get("gh.detailTab")||null}function h(e){S.put("gh.detailTab",e)}var S,k="gh.issueaction.issuedetail",p=i("jira-agile/rapid/global-events"),T=i("jira-agile/rapid/ui/detail/details-view-scroll-tracker/scroller");p.on("pre-initialization",function(){S=GH.storage});var b,m,j,C,I,w,y,D,q={init:t,afterDetailsViewLoaded:a,setSelectedTab:c,_testing_only:{navMenuClick:l}};return q});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/detail/DetailsViewScroller.js' */
define("jira-agile/rapid/ui/detail/details-view-scroll-tracker/scroller",["jquery"],function(t){"use strict";var i,o,e,n={};return n.init=function(n){o=n.beforeScroll,e=n.afterScroll,i=t("#js-detail-nav-content")},n.scrollToSection=function(i,o){var e=t("#"+i);return this.scrollTo(this.getScrollPosition()+e.position().top,o)},n.scrollTo=function(t,n){return o(),i.animate({scrollTop:t},n?"fast":0,function(){setTimeout(e,0)}),t},n.getScrollPosition=function(){return i.scrollTop()},n.getCurrentSection=function(){var t,o=i.find(".ghx-detail-section").not(".ghx-hidden-tab");if(i.length>0&&i[0].scrollHeight-this.getScrollPosition()===i.height())t=o[o.length-1];else for(var e=0;e<o.length;e++){var n=o.eq(e);if(n.position().top+n.height()>0){t=n[0];break}}return t?t.id:null},n});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/detail/DetailsView.soy' */
// This file was automatically generated from DetailsView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.detailview.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.detailview == 'undefined') { GH.tpl.detailview = {}; }


GH.tpl.detailview.renderIssueDetailsBody = function(opt_data, opt_ignored) {
  var output = '<div id="ghx-detail-head" class="ghx-detail-head js-issue-fields"><div class="ghx-controls">';
  if (opt_data.showActionsCog) {
    var tooltip__soy6 = '' + soy.$$escapeHtml("Actions (Type . to access issue actions)");
    output += aui.buttons.button({extraAttributes: {title: tooltip__soy6}, extraClasses: ['ghx-actions', 'aui-button-compact'], text: '', iconClass: 'ghx-iconfont aui-icon-small aui-iconfont-more', iconText: tooltip__soy6, iconType: 'aui'}) + GH.tpl.detailview.renderIssueOperationsForCog(opt_data);
  }
  output += ((opt_data.canClose) ? '<div class="ghx-detail-close js-detailclose" title="' + soy.$$escapeHtml("Close detail ( T )") + '"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-close-dialog">' + soy.$$escapeHtml("Close detail ( T )") + '</span></div>' : '') + '</div><div class="ghx-group"><span class="ghx-project-avatar"><img src="' + soy.$$escapeHtml(opt_data.issueDetails.projectAvatarUrl) + '" title="' + soy.$$escapeHtml(opt_data.issueDetails.projectName) + '" /></span><span id="js-sizer" class="ghx-sizer ui-resizable-handle ui-resizable-w" data-tooltip="' + soy.$$escapeHtml("Resize Detail View") + '"><span class="ghx-icon ghx-icon-sizer"></span></span><div class="ghx-key-group"><div class="ghx-project">' + soy.$$escapeHtml(opt_data.issueDetails.projectName) + '</div><div class="ghx-parent-key js-view-in-jira"></div><div class="ghx-key js-view-in-jira"></div></div><div class="ghx-detail-summary"></div></div>' + GH.tpl.detailview.renderStatisticGroup(null) + '</div><div id="ghx-detail-nav" class="ghx-detail-nav js-issue-fields"></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderIssueDetailsBody.soyTemplateName = 'GH.tpl.detailview.renderIssueDetailsBody';
}


GH.tpl.detailview.renderLogWorkTrigger = function(opt_data, opt_ignored) {
  return '<dl id="ghx-log-work-container"><dt class="ghx-detail-term"></dt><dd class="ghx-detail-description"><a role="button" class="ghx-trigger js-log-work">' + soy.$$escapeHtml("Log Work") + '</a></dd></dl>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderLogWorkTrigger.soyTemplateName = 'GH.tpl.detailview.renderLogWorkTrigger';
}


GH.tpl.detailview.renderIssueOperationsForCog = function(opt_data, opt_ignored) {
  var output = '<div class="aui-list hidden js-issueaction-container-cog" data-issuekey="' + soy.$$escapeHtml(opt_data.issueDetails.key) + '">';
  var sectionList43 = opt_data.issueDetails.operations.filteredSections;
  var sectionListLen43 = sectionList43.length;
  for (var sectionIndex43 = 0; sectionIndex43 < sectionListLen43; sectionIndex43++) {
    var sectionData43 = sectionList43[sectionIndex43];
    output += '<ul class="aui-list-section ' + ((sectionIndex43 == 0) ? 'aui-first' : '') + '">';
    var operationList49 = sectionData43.operations;
    var operationListLen49 = operationList49.length;
    for (var operationIndex49 = 0; operationIndex49 < operationListLen49; operationIndex49++) {
      var operationData49 = operationList49[operationIndex49];
      output += '<li class="aui-list-item"><a id="' + soy.$$escapeHtml(operationData49.id) + '" title="' + soy.$$escapeHtml(operationData49.title) + '" class="aui-list-item-link js-issueaction ' + soy.$$escapeHtml(operationData49.styleClass) + '" href="' + soy.$$escapeHtml(operationData49.url) + '" >' + soy.$$escapeHtml(operationData49.label) + '</a></li>';
    }
    output += '</ul>';
  }
  output += '<ul class="aui-list-section aui-last"><li class="aui-list-item"><a id="ghx-more-actions" title="' + soy.$$escapeHtml("More Actions\u2026") + '" class="aui-list-item-link js-issueaction" href="#" >' + soy.$$escapeHtml("More Actions\u2026") + '</a></li></ul></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderIssueOperationsForCog.soyTemplateName = 'GH.tpl.detailview.renderIssueOperationsForCog';
}


GH.tpl.detailview.renderTabSection = function(opt_data, opt_ignored) {
  return '<div class="ghx-tab-section">' + ((opt_data.renderTitle) ? '<h4>' + soy.$$escapeHtml(opt_data.title) + '</h4>' : '') + '<div class="ghx-tab-section-content"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderTabSection.soyTemplateName = 'GH.tpl.detailview.renderTabSection';
}


GH.tpl.detailview.renderTabTitle = function(opt_data, opt_ignored) {
  return '<div class="ghx-header"><h3>' + soy.$$escapeHtml(opt_data.tabTitle) + '</h3></div>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderTabTitle.soyTemplateName = 'GH.tpl.detailview.renderTabTitle';
}


GH.tpl.detailview.renderIssueLink = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(opt_data.issueKey) + '" ' + ((! opt_data.skipTitle) ? 'title="' + soy.$$escapeHtml("View this issue") + '"' : '') + '>' + ((opt_data.description) ? soy.$$escapeHtml(opt_data.description) : soy.$$escapeHtml(opt_data.issueKey)) + '</a>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderIssueLink.soyTemplateName = 'GH.tpl.detailview.renderIssueLink';
}


GH.tpl.detailview.renderTextView = function(opt_data, opt_ignored) {
  return '' + ((opt_data.field.text) ? soy.$$escapeHtml(opt_data.field.text) : '<span class="ghx-fa">' + ((opt_data.field.type == 'number') ? '&nbsp;' : soy.$$escapeHtml("None")) + '</span>');
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderTextView.soyTemplateName = 'GH.tpl.detailview.renderTextView';
}


GH.tpl.detailview.renderTextEstimateView = function(opt_data, opt_ignored) {
  return '' + ((opt_data.field.text) ? soy.$$escapeHtml(opt_data.field.text) : '<span class="ghx-fa">' + soy.$$escapeHtml("Unestimated") + '</span>');
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderTextEstimateView.soyTemplateName = 'GH.tpl.detailview.renderTextEstimateView';
}


GH.tpl.detailview.renderHtmlView = function(opt_data, opt_ignored) {
  return '' + ((opt_data.field.html) ? soy.$$filterNoAutoescape(opt_data.field.html) : '<span class="ghx-fa">' + soy.$$escapeHtml("None") + '</span>');
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderHtmlView.soyTemplateName = 'GH.tpl.detailview.renderHtmlView';
}


GH.tpl.detailview.renderDescriptionHtmlView = function(opt_data, opt_ignored) {
  return '' + ((opt_data.field.html) ? soy.$$filterNoAutoescape(opt_data.field.html) : '<span class="ghx-fa">' + soy.$$escapeHtml("There is no description content") + '</span>');
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderDescriptionHtmlView.soyTemplateName = 'GH.tpl.detailview.renderDescriptionHtmlView';
}


GH.tpl.detailview.renderDateView = function(opt_data, opt_ignored) {
  return '' + ((opt_data.field.text) ? GH.tpl.detailview.renderDate({value: opt_data.field.text, displayValue: opt_data.field.html}) : '<span class="ghx-fa">' + soy.$$escapeHtml("None") + '</span>');
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderDateView.soyTemplateName = 'GH.tpl.detailview.renderDateView';
}


GH.tpl.detailview.renderTextareaEdit = function(opt_data, opt_ignored) {
  return '<span class="ghx-spinner" style="display:none"></span><textarea rows="' + soy.$$escapeHtml(opt_data.numRows) + '" cols="40"></textarea><div class="js-fielderrors ghx-error"></div>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderTextareaEdit.soyTemplateName = 'GH.tpl.detailview.renderTextareaEdit';
}


GH.tpl.detailview.renderTextEdit = function(opt_data, opt_ignored) {
  return '<span class="ghx-spinner" style="display:none"></span><input class="text short-field" type="text"/><div class="js-fielderrors ghx-error"></div>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderTextEdit.soyTemplateName = 'GH.tpl.detailview.renderTextEdit';
}


GH.tpl.detailview.fieldUpdateSuccess = function(opt_data, opt_ignored) {
  return 'Field updated successfully';
};
if (goog.DEBUG) {
  GH.tpl.detailview.fieldUpdateSuccess.soyTemplateName = 'GH.tpl.detailview.fieldUpdateSuccess';
}


GH.tpl.detailview.fieldUpdateFailure = function(opt_data, opt_ignored) {
  return 'Updating field value failed';
};
if (goog.DEBUG) {
  GH.tpl.detailview.fieldUpdateFailure.soyTemplateName = 'GH.tpl.detailview.fieldUpdateFailure';
}


GH.tpl.detailview.renderDate = function(opt_data, opt_ignored) {
  return '<span class="date user-tz"><time datetime="' + soy.$$escapeHtml(opt_data.value) + '" title="' + soy.$$escapeHtml(opt_data.displayValue) + '">' + soy.$$escapeHtml(opt_data.displayValue) + '</time></span>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderDate.soyTemplateName = 'GH.tpl.detailview.renderDate';
}


GH.tpl.detailview.renderFieldErrors = function(opt_data, opt_ignored) {
  var output = '';
  var errorList166 = opt_data.errors;
  var errorListLen166 = errorList166.length;
  for (var errorIndex166 = 0; errorIndex166 < errorListLen166; errorIndex166++) {
    var errorData166 = errorList166[errorIndex166];
    output += ((! (errorIndex166 == 0)) ? '<br/>' : '') + soy.$$escapeHtml(errorData166.message);
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderFieldErrors.soyTemplateName = 'GH.tpl.detailview.renderFieldErrors';
}


GH.tpl.detailview.renderSubtasksEmpty = function(opt_data, opt_ignored) {
  return '<p class="ghx-fa">' + soy.$$escapeHtml("There are no sub-tasks") + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderSubtasksEmpty.soyTemplateName = 'GH.tpl.detailview.renderSubtasksEmpty';
}


GH.tpl.detailview.renderParentIssueTooltip = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml(opt_data.issueKey) + ' - ' + soy.$$escapeHtml(opt_data.summary);
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderParentIssueTooltip.soyTemplateName = 'GH.tpl.detailview.renderParentIssueTooltip';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/detail/fixed/FixedDetailsView.soy' */
// This file was automatically generated from FixedDetailsView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.legacyDetailview.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.legacyDetailview == 'undefined') { GH.tpl.legacyDetailview = {}; }


GH.tpl.legacyDetailview.renderIssueDetailsSkeleton = function(opt_data, opt_ignored) {
  return '<div id="ghx-detail-contents" class="ghx-detail-contents"><div class="ghx-detail-view-blanket"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.legacyDetailview.renderIssueDetailsSkeleton.soyTemplateName = 'GH.tpl.legacyDetailview.renderIssueDetailsSkeleton';
}


GH.tpl.legacyDetailview.renderIssueDetails = function(opt_data, opt_ignored) {
  return '<div id="ghx-detail-issue" class="ghx-detail-issue" data-issueid="' + soy.$$escapeHtml(opt_data.issueDetails.id) + '" data-issuekey="' + soy.$$escapeHtml(opt_data.issueDetails.key) + '">' + GH.tpl.detailview.renderIssueDetailsBody(opt_data) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.legacyDetailview.renderIssueDetails.soyTemplateName = 'GH.tpl.legacyDetailview.renderIssueDetails';
}


GH.tpl.legacyDetailview.renderStatisticGroup = function(opt_data, opt_ignored) {
  return '<div class="ghx-statistic-group"><div class="ghx-detail-statistic ghx-estimate js-estimate"></div><div class="ghx-remaining-group"><div class="ghx-detail-statistic ghx-remaining js-remaining"></div>' + GH.tpl.detailview.renderLogWorkTrigger(null) + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.legacyDetailview.renderStatisticGroup.soyTemplateName = 'GH.tpl.legacyDetailview.renderStatisticGroup';
}


GH.tpl.legacyDetailview.renderTabMenu = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-detail-nav-menu"><ul>';
  var tabList21 = opt_data.tabs;
  var tabListLen21 = tabList21.length;
  for (var tabIndex21 = 0; tabIndex21 < tabListLen21; tabIndex21++) {
    var tabData21 = tabList21[tabIndex21];
    output += '<li class="ghx-detail-nav-item"><a href="#ghx-tab-' + soy.$$escapeHtml(tabData21.id) + '" title="' + ((tabData21.toolTip) ? soy.$$escapeHtml(tabData21.toolTip) : soy.$$escapeHtml(tabData21.title)) + '">' + ((tabData21.thirdPartyTab) ? (tabData21.iconFont) ? '<span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-' + soy.$$escapeHtml(tabData21.iconFont) + '">' + soy.$$escapeHtml(tabData21.title) + '</span>' : '<span class="ghx-icon ghx-icon-thirdparty" style="background-image:url(\'' + soy.$$escapeHtml(tabData21.iconURL) + '\');">' + soy.$$escapeHtml(tabData21.title) + '</span>' : '<span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-' + soy.$$escapeHtml(tabData21.iconFont) + '">' + soy.$$escapeHtml(tabData21.title) + '</span>') + ((tabData21.hasTitleCount) ? '<b>' + soy.$$escapeHtml(tabData21.titleCount) + '</b>' : '') + '</a></li>';
  }
  output += '</ul></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.legacyDetailview.renderTabMenu.soyTemplateName = 'GH.tpl.legacyDetailview.renderTabMenu';
}


GH.tpl.legacyDetailview.renderTabs = function(opt_data, opt_ignored) {
  var output = '<div id="js-detail-nav-content" class="ghx-detail-nav-content">';
  var tabList62 = opt_data.tabs;
  var tabListLen62 = tabList62.length;
  for (var tabIndex62 = 0; tabIndex62 < tabListLen62; tabIndex62++) {
    var tabData62 = tabList62[tabIndex62];
    output += '<div id="ghx-tab-' + soy.$$escapeHtml(tabData62.id) + '" class="ghx-detail-section"></div>';
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.legacyDetailview.renderTabs.soyTemplateName = 'GH.tpl.legacyDetailview.renderTabs';
}


GH.tpl.legacyDetailview.renderFieldStructure = function(opt_data, opt_ignored) {
  return '<dl class="ghx-detail-list"><dt class="ghx-detail-term ghx-fieldtype-' + soy.$$escapeHtml(opt_data.field.type) + ' ghx-fieldname-' + soy.$$escapeHtml(opt_data.field.id) + '" title="' + ((opt_data.field.tooltip) ? soy.$$escapeHtml(opt_data.field.tooltip) : soy.$$escapeHtml(opt_data.field.label)) + '">' + soy.$$escapeHtml(opt_data.field.label) + ':</dt><dd class="ghx-detail-description ghx-fieldtype-' + soy.$$escapeHtml(opt_data.field.type) + ' ghx-fieldname-' + soy.$$escapeHtml(opt_data.field.id) + ((opt_data.issueDetails.editable && opt_data.field.editable) ? ' js-editable-field ghx-editable' : '') + '"' + ((opt_data.issueDetails.editable && opt_data.field.editable) ? 'tabindex="0"' : '') + ' data-field-id="' + soy.$$escapeHtml(opt_data.field.id) + '" title="' + ((opt_data.field.tooltip) ? soy.$$escapeHtml(opt_data.field.tooltip) : soy.$$escapeHtml(opt_data.field.label)) + '" ></dd></dl>';
};
if (goog.DEBUG) {
  GH.tpl.legacyDetailview.renderFieldStructure.soyTemplateName = 'GH.tpl.legacyDetailview.renderFieldStructure';
}


GH.tpl.legacyDetailview.renderCommentsStructure = function(opt_data, opt_ignored) {
  return ((opt_data.canCreateComment) ? '<div class="ghx-controls"><button class="aui-button js-create-comment">' + soy.$$escapeHtml("Comment") + '</button></div>' : '') + '<div class="ghx-container">' + ((opt_data.totalComments > 0) ? GH.tpl.legacyDetailview.renderComments(opt_data) : GH.tpl.legacyDetailview.renderCommentsEmpty(null)) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.legacyDetailview.renderCommentsStructure.soyTemplateName = 'GH.tpl.legacyDetailview.renderCommentsStructure';
}


GH.tpl.legacyDetailview.renderComments = function(opt_data, opt_ignored) {
  var output = '';
  var commentList116 = opt_data.comments;
  var commentListLen116 = commentList116.length;
  for (var commentIndex116 = 0; commentIndex116 < commentListLen116; commentIndex116++) {
    var commentData116 = commentList116[commentIndex116];
    output += '<div id="comment-' + soy.$$escapeHtml(commentData116.id) + '" class="ghx-comment twixi-block expanded"><div class="twixi-wrap actionContainer"><div class="action-details">' + ((commentData116.author == null) ? '<span class="user-hover user-avatar" style="background-image:url(' + soy.$$escapeHtml(commentData116.avatarUrl) + ');">' + soy.$$escapeHtml(commentData116.authorName) + '</span>' : '<a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/secure/ViewProfile.jspa?name=' + soy.$$escapeHtml(commentData116.author) + '" id="commentauthor_' + soy.$$escapeHtml(commentData116.id) + '_verbose" rel="' + soy.$$escapeHtml(commentData116.author) + '" class="user-hover user-avatar">' + ((commentData116.avatarUrl) ? '<img src="' + soy.$$escapeHtml(commentData116.avatarUrl) + '" alt="" />' : '') + soy.$$escapeHtml(commentData116.authorName) + '</a>') + ' ' + soy.$$escapeHtml("added a comment") + ' - <span class="commentdate_' + soy.$$escapeHtml(commentData116.id) + '_verbose subText">' + GH.tpl.detailview.renderDate({value: commentData116.dateTime, displayValue: commentData116.dateTimeDisplay}) + '</span>' + ((commentData116.restrictedTo) ? ' - <span class="icon icon-locked"></span><span class="subText">' + soy.$$filterNoAutoescape(AJS.format("Restricted to \x3cstrong\x3e{0}\x3c/strong\x3e",commentData116.restrictedTo)) + '</span>' : '') + '</div><div class="action-body">' + GH.tpl.detailview.renderHtmlView({field: commentData116}) + '</div></div></div>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.legacyDetailview.renderComments.soyTemplateName = 'GH.tpl.legacyDetailview.renderComments';
}


GH.tpl.legacyDetailview.renderCommentsEmpty = function(opt_data, opt_ignored) {
  return '<p class="ghx-fa">' + soy.$$escapeHtml("There are no comments") + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.legacyDetailview.renderCommentsEmpty.soyTemplateName = 'GH.tpl.legacyDetailview.renderCommentsEmpty';
}


GH.tpl.legacyDetailview.renderAttachments = function(opt_data, opt_ignored) {
  return ((opt_data.canCreateAttachment) ? '<div class="ghx-controls"><button class="aui-button js-create-attachment ghx-attach">' + soy.$$escapeHtml("Attach Files") + '</button></div>' : '') + '<div class="ghx-container">' + ((opt_data.attachments.totalCount == 0) ? GH.tpl.legacyDetailview.renderAttachmentsEmpty(null) : ((opt_data.attachments.fileAttachments.length > 0) ? GH.tpl.legacyDetailview.renderFileAttachments({fileAttachments: opt_data.attachments.fileAttachments}) : '') + ((opt_data.attachments.imageAttachments.length > 0) ? GH.tpl.legacyDetailview.renderImageAttachments({imageAttachments: opt_data.attachments.imageAttachments}) : '')) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.legacyDetailview.renderAttachments.soyTemplateName = 'GH.tpl.legacyDetailview.renderAttachments';
}


GH.tpl.legacyDetailview.renderAttachmentsEmpty = function(opt_data, opt_ignored) {
  return '<p class="ghx-fa">' + soy.$$escapeHtml("There are no attachments") + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.legacyDetailview.renderAttachmentsEmpty.soyTemplateName = 'GH.tpl.legacyDetailview.renderAttachmentsEmpty';
}


GH.tpl.legacyDetailview.renderFileAttachments = function(opt_data, opt_ignored) {
  var output = '<ol id="file_attachments" class="item-attachments">';
  var fileAttachmentList194 = opt_data.fileAttachments;
  var fileAttachmentListLen194 = fileAttachmentList194.length;
  for (var fileAttachmentIndex194 = 0; fileAttachmentIndex194 < fileAttachmentListLen194; fileAttachmentIndex194++) {
    var fileAttachmentData194 = fileAttachmentList194[fileAttachmentIndex194];
    output += '<li class="attachment-content' + ((! fileAttachmentData194.latest) ? ' earlier-version' : '') + '">' + ((fileAttachmentData194.expanded) ? GH.tpl.legacyDetailview.renderFileAttachmentExpandable({fileAttachment: fileAttachmentData194}) : GH.tpl.legacyDetailview.renderFileAttachmentConcise({fileAttachment: fileAttachmentData194})) + '</li>';
  }
  output += '</ol>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.legacyDetailview.renderFileAttachments.soyTemplateName = 'GH.tpl.legacyDetailview.renderFileAttachments';
}


GH.tpl.legacyDetailview.renderFileAttachmentExpandable = function(opt_data, opt_ignored) {
  var output = '<div class="twixi-block collapsed"><div class="twixi-wrap verbose"><a href="#" class="twixi"><span class="icon twixi-opened"><span>' + soy.$$escapeHtml("Hide") + '</span></span></a>' + GH.tpl.legacyDetailview.renderFileAttachmentThumb(opt_data) + '<dl>' + GH.tpl.legacyDetailview.renderAttachmentInfo({attachment: opt_data.fileAttachment}) + '<dd class="zip-contents"><ol>';
  var zipEntryList220 = opt_data.fileAttachment.zipContents.entries;
  var zipEntryListLen220 = zipEntryList220.length;
  for (var zipEntryIndex220 = 0; zipEntryIndex220 < zipEntryListLen220; zipEntryIndex220++) {
    var zipEntryData220 = zipEntryList220[zipEntryIndex220];
    output += '<li><div class="attachment-thumb"><a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + soy.$$escapeHtml(zipEntryData220.url) + '">' + GH.tpl.legacyDetailview.renderAttachmentIcon({icon: zipEntryData220.icon}) + '</a></div><a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + soy.$$escapeHtml(zipEntryData220.url) + '" title="' + soy.$$escapeHtml(zipEntryData220.name) + '">' + soy.$$escapeHtml(zipEntryData220.abbreviatedName) + '</a><span class="attachment-size">' + soy.$$escapeHtml(zipEntryData220.filesize) + '</span></li>';
  }
  output += '</ol><span class="zip-contents-trailer">' + ((opt_data.fileAttachment.zipContents.moreAvailable) ? soy.$$escapeHtml(AJS.format("Showing {0} of {1} items",opt_data.fileAttachment.zipContents.maxShown,opt_data.fileAttachment.zipContents.totalNumEntries)) : '') + '<a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + soy.$$escapeHtml(opt_data.fileAttachment.url) + '">' + soy.$$escapeHtml("Download Zip") + '</a></span></dd></dl></div><div class="twixi-wrap concise"><a href="#" class="twixi"><span class="icon twixi-closed"><span>' + soy.$$escapeHtml("Show") + '</span></span></a>' + GH.tpl.legacyDetailview.renderFileAttachmentConcise(opt_data) + '</div></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.legacyDetailview.renderFileAttachmentExpandable.soyTemplateName = 'GH.tpl.legacyDetailview.renderFileAttachmentExpandable';
}


GH.tpl.legacyDetailview.renderFileAttachmentConcise = function(opt_data, opt_ignored) {
  return GH.tpl.legacyDetailview.renderFileAttachmentThumb(opt_data) + '<dl>' + GH.tpl.legacyDetailview.renderAttachmentInfo({attachment: opt_data.fileAttachment}) + '</dl>';
};
if (goog.DEBUG) {
  GH.tpl.legacyDetailview.renderFileAttachmentConcise.soyTemplateName = 'GH.tpl.legacyDetailview.renderFileAttachmentConcise';
}


GH.tpl.legacyDetailview.renderFileAttachmentThumb = function(opt_data, opt_ignored) {
  return '<div class="attachment-thumb"><a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + soy.$$escapeHtml(opt_data.fileAttachment.url) + '">' + GH.tpl.legacyDetailview.renderAttachmentIcon({icon: opt_data.fileAttachment.icon}) + '</a></div>';
};
if (goog.DEBUG) {
  GH.tpl.legacyDetailview.renderFileAttachmentThumb.soyTemplateName = 'GH.tpl.legacyDetailview.renderFileAttachmentThumb';
}


GH.tpl.legacyDetailview.renderAttachmentInfo = function(opt_data, opt_ignored) {
  return '<dl><dt class="attachment-title"><a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + soy.$$escapeHtml(opt_data.attachment.url) + '" title="' + ((opt_data.attachment.latest) ? soy.$$escapeHtml("Latest") : '') + ' ' + soy.$$escapeHtml(opt_data.attachment.createdFormatted) + ' - ' + soy.$$escapeHtml(opt_data.attachment.displayAuthor) + '">' + soy.$$escapeHtml(opt_data.attachment.filename) + '</a></dt><dd class="attachment-date">' + soy.$$escapeHtml(opt_data.attachment.createdFormatted) + '</dd><dd class="attachment-size">' + soy.$$escapeHtml(opt_data.attachment.filesize) + '</dd><dd class="attachment-author">' + soy.$$escapeHtml(opt_data.attachment.displayAuthor) + '</dd></dl>';
};
if (goog.DEBUG) {
  GH.tpl.legacyDetailview.renderAttachmentInfo.soyTemplateName = 'GH.tpl.legacyDetailview.renderAttachmentInfo';
}


GH.tpl.legacyDetailview.renderAttachmentIcon = function(opt_data, opt_ignored) {
  return '<img src="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + soy.$$escapeHtml(opt_data.icon.url) + '" height="16" width="16" border="0" alt="' + soy.$$escapeHtml(opt_data.icon.alt) + '">';
};
if (goog.DEBUG) {
  GH.tpl.legacyDetailview.renderAttachmentIcon.soyTemplateName = 'GH.tpl.legacyDetailview.renderAttachmentIcon';
}


GH.tpl.legacyDetailview.renderImageAttachments = function(opt_data, opt_ignored) {
  var output = '<ol id="attachment_thumbnails" class="item-attachments">';
  var imageAttachmentList298 = opt_data.imageAttachments;
  var imageAttachmentListLen298 = imageAttachmentList298.length;
  for (var imageAttachmentIndex298 = 0; imageAttachmentIndex298 < imageAttachmentListLen298; imageAttachmentIndex298++) {
    var imageAttachmentData298 = imageAttachmentList298[imageAttachmentIndex298];
    output += '<li class="attachment-content"><div class="attachment-thumb"><a class="gallery" rel="gallery" href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + soy.$$escapeHtml(imageAttachmentData298.url) + '" title="' + soy.$$escapeHtml(imageAttachmentData298.filename) + ' -' + ((imageAttachmentData298.latest) ? soy.$$escapeHtml("Latest") : '') + ' ' + soy.$$escapeHtml(imageAttachmentData298.createdFormatted) + ' - ' + soy.$$escapeHtml(imageAttachmentData298.displayAuthor) + '"><img src="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + soy.$$escapeHtml(imageAttachmentData298.thumbnail.url) + '" width="' + soy.$$escapeHtml(imageAttachmentData298.thumbnail.width) + '" height="' + soy.$$escapeHtml(imageAttachmentData298.thumbnail.height) + '" alt="" /></a></div><dl ' + ((! imageAttachmentData298.latest) ? 'class="earlier-version"' : '') + '><dt><span class="blender"></span><a class="attachment-title" href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + soy.$$escapeHtml(imageAttachmentData298.url) + '" title="' + soy.$$escapeHtml(imageAttachmentData298.filename) + ' -' + ((imageAttachmentData298.latest) ? ' ' + soy.$$escapeHtml("Latest") : '') + ' ' + soy.$$escapeHtml(imageAttachmentData298.createdFormatted) + ' - ' + soy.$$escapeHtml(imageAttachmentData298.displayAuthor) + '">' + soy.$$escapeHtml(imageAttachmentData298.filename) + '</a></dt><dd class="attachment-size">' + soy.$$escapeHtml(imageAttachmentData298.filesize) + '</dd><dd class="attachment-date">' + soy.$$escapeHtml(imageAttachmentData298.createdFormatted) + '</dd></dl></li>';
  }
  output += '</ol>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.legacyDetailview.renderImageAttachments.soyTemplateName = 'GH.tpl.legacyDetailview.renderImageAttachments';
}


GH.tpl.legacyDetailview.renderSubtasks = function(opt_data, opt_ignored) {
  var output = ((opt_data.canCreateSubtask) ? '<div class="ghx-controls"><button class="aui-button js-create-subtask">' + soy.$$escapeHtml("Create Sub-Task") + '</button></div>' : '') + '<div class="ghx-container">';
  if (opt_data.filteredSubtaskCount > 0 && opt_data.subtasks.length == 0) {
    output += GH.tpl.rapid.notification.renderAuiMessage({type: 'info', message: opt_data.filteredSubtaskMessage, messageHtml: true, icon: true});
  } else if (opt_data.subtasks.length == 0 && opt_data.filteredSubtaskCount == 0) {
    output += GH.tpl.detailview.renderSubtasksEmpty(null);
  } else if (opt_data.subtasks.length > 0) {
    output += '<table class="aui"><thead><tr><th id="sub-avatar"></th><th id="sub-key" class="ghx-nowrap">' + soy.$$escapeHtml("Issue Key") + '</th><th id="sub-summary">' + soy.$$escapeHtml("Summary") + '</th><th id="sub-status" class="' + ((! opt_data.statusCategoriesAvailable) ? 'ghx-center' : '') + '">' + soy.$$escapeHtml("Status") + '</th>' + ((opt_data.showTrackingField) ? '<th id="sub-estimate" class="ghx-center"><abbr title="' + soy.$$escapeHtml("Remaining") + '">' + soy.$$escapeHtml("Rem.") + '</abbr></th>' : '') + ((opt_data.showActionsColumn) ? '<th id="sub-actions" class="ghx-center">' + soy.$$escapeHtml("Actions") + '</th>' : '') + '</tr></thead><tbody>';
    var issueList387 = opt_data.subtasks;
    var issueListLen387 = issueList387.length;
    for (var issueIndex387 = 0; issueIndex387 < issueListLen387; issueIndex387++) {
      var issueData387 = issueList387[issueIndex387];
      output += '<tr class="js-subtask-issue' + ((issueData387.done) ? ' ghx-done' : '') + '" data-issue-key="' + soy.$$escapeHtml(issueData387.key) + '" data-issue-id="' + soy.$$escapeHtml(issueData387.id) + '"><td headers="sub-avatar">' + ((issueData387.assignee) ? '<div class="ghx-sub-avatar"><img src="' + soy.$$escapeHtml(issueData387.assignee.avatar) + '"' + ((issueData387.assignee.name) ? 'alt="' + soy.$$escapeHtml(issueData387.assignee.name) + '" title="' + soy.$$escapeHtml("Assignee") + ': ' + soy.$$escapeHtml(issueData387.assignee.name) + '"' : 'alt=""') + '></div>' : '') + '</td><td headers="sub-key" class="ghx-nowrap"><a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(issueData387.key) + '" title="' + soy.$$escapeHtml("View this issue") + '" class="js-detailview ghx-key">' + soy.$$escapeHtml(issueData387.key) + '</a></td><td headers="sub-summary"><div class="ghx-summary" title="' + soy.$$escapeHtml(issueData387.summary) + '">' + soy.$$escapeHtml(issueData387.summary) + '</div></td><td headers="sub-status" class="ghx-status ' + ((! issueData387.status.statusCategory) ? 'ghx-center' : '') + '">' + GH.tpl.status.renderIcon({status: issueData387.status, maxWidth: 'short'}) + '</td>' + ((opt_data.showTrackingField) ? '<td headers="sub-estimate" class="ghx-estimate ghx-right ghx-nowrap">' + GH.tpl.detailview.renderTextView({field: issueData387.trackingField}) + '</td>' : '') + ((opt_data.showActionsColumn) ? '<td headers="sub-actions" class="ghx-nowrap ghx-actions ghx-center"><ul class="menu">' + ((issueData387.canEdit) ? '<li><a class="js-edit-subtask" title="' + soy.$$escapeHtml("Edit") + '"><span class="ghx-icon ghx-icon-edit">' + soy.$$escapeHtml("Edit") + '</span></a></li>' : '') + ((issueData387.canDelete) ? '<li><a class="js-delete-subtask" title="' + soy.$$escapeHtml("Delete") + '"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-remove">' + soy.$$escapeHtml("Delete") + '</span></a></li>' : '') + '</ul></td>' : '') + '</tr>';
    }
    output += ((opt_data.showTrackingField && opt_data.trackingFieldSum) ? '<tr><td colspan="4" /><td headers="sub-estimate" class="ghx-estimate-sum ghx-right ghx-nowrap">&Sigma; ' + soy.$$escapeHtml(opt_data.trackingFieldSum) + '</td>' + ((opt_data.showActionsColumn) ? '<td />' : '') + '</tr>' : '') + ((opt_data.filteredSubtaskCount > 0) ? '<tr><td colspan="5">' + GH.tpl.rapid.notification.renderAuiMessage({type: 'info', message: opt_data.filteredSubtaskMessage, messageHtml: true, icon: true}) + '</td></tr>' : '') + '</tbody></table>';
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.legacyDetailview.renderSubtasks.soyTemplateName = 'GH.tpl.legacyDetailview.renderSubtasks';
}


GH.tpl.legacyDetailview.renderTimeTrackingInlineDialog = function(opt_data, opt_ignored) {
  return '<div id="ghx-timetracking-inline-dialog-contents" class="js-issue-fields ghx-timetracking-inline-dialog-contents"><dl class="ghx-parent-remaining js-parent-remaining"></dl><dl class="js-subs-remaining"></dl><div class="ghx-error"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.legacyDetailview.renderTimeTrackingInlineDialog.soyTemplateName = 'GH.tpl.legacyDetailview.renderTimeTrackingInlineDialog';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/detail/DetailsIssueLinks.soy' */
// This file was automatically generated from DetailsIssueLinks.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.detailview.issuelinks.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.detailview == 'undefined') { GH.tpl.detailview = {}; }
if (typeof GH.tpl.detailview.issuelinks == 'undefined') { GH.tpl.detailview.issuelinks = {}; }


GH.tpl.detailview.issuelinks.renderIssueLinks = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-container ghx-issue-links">' + ((opt_data.canLink) ? '<div class="ghx-controls"><button class="js-link-issue aui-button">' + soy.$$escapeHtml("Add Link") + '</button></div>' : '') + ((opt_data.issueLinkTypeEntries.length == 0) ? '<div class="ghx-container"><p class="ghx-fa">' + soy.$$escapeHtml("There are no linked issues") + '</p></div>' : '');
  var issueLinkTypeEntryList14 = opt_data.issueLinkTypeEntries;
  var issueLinkTypeEntryListLen14 = issueLinkTypeEntryList14.length;
  for (var issueLinkTypeEntryIndex14 = 0; issueLinkTypeEntryIndex14 < issueLinkTypeEntryListLen14; issueLinkTypeEntryIndex14++) {
    var issueLinkTypeEntryData14 = issueLinkTypeEntryList14[issueLinkTypeEntryIndex14];
    output += '<dl class="links-list"><dt title="' + soy.$$escapeHtml(issueLinkTypeEntryData14.relationship) + '">' + soy.$$escapeHtml(issueLinkTypeEntryData14.relationship) + '</dt>';
    var issueLinkEntryList20 = issueLinkTypeEntryData14.issueLinkEntries;
    var issueLinkEntryListLen20 = issueLinkEntryList20.length;
    for (var issueLinkEntryIndex20 = 0; issueLinkEntryIndex20 < issueLinkEntryListLen20; issueLinkEntryIndex20++) {
      var issueLinkEntryData20 = issueLinkEntryList20[issueLinkEntryIndex20];
      output += '<dd id="' + soy.$$escapeHtml(issueLinkEntryData20.htmlElementId) + '"' + ((issueLinkEntryData20.remote) ? ' class="remote-link"' : '') + '><div class="link-content">' + ((issueLinkEntryData20.remote) ? soy.$$filterNoAutoescape(issueLinkEntryData20.html) : GH.tpl.detailview.issuelinks.renderLocalLink({issueLinkEntry: issueLinkEntryData20})) + '</div></dd>';
    }
    output += '</dl>';
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.detailview.issuelinks.renderIssueLinks.soyTemplateName = 'GH.tpl.detailview.issuelinks.renderIssueLinks';
}


GH.tpl.detailview.issuelinks.renderIcon = function(opt_data, opt_ignored) {
  return '' + ((opt_data.url) ? '<img src="' + soy.$$escapeHtml(opt_data.url) + '" width="16" height="16"' + ((opt_data.title) ? ' title="' + soy.$$escapeHtml(opt_data.title) + '"' : '') + ((opt_data.alt) ? ' alt="' + soy.$$escapeHtml(opt_data.alt) + '"' : '') + ' />' : '');
};
if (goog.DEBUG) {
  GH.tpl.detailview.issuelinks.renderIcon.soyTemplateName = 'GH.tpl.detailview.issuelinks.renderIcon';
}


GH.tpl.detailview.issuelinks.renderLocalLink = function(opt_data, opt_ignored) {
  return '<p>' + GH.tpl.detailview.issuelinks.renderIcon({url: opt_data.issueLinkEntry.linkIcon.url, title: opt_data.issueLinkEntry.linkIcon.alt, alt: opt_data.issueLinkEntry.linkIcon.alt}) + '<span title="' + soy.$$escapeHtml(opt_data.issueLinkEntry.tooltip) + '"><a href="' + soy.$$escapeHtml(opt_data.issueLinkEntry.url) + '" class="link-title' + ((opt_data.issueLinkEntry.resolved) ? ' resolution' : '') + '">' + soy.$$escapeHtml(opt_data.issueLinkEntry.title) + '</a><span class="link-summary">' + ((opt_data.issueLinkEntry.summary) ? soy.$$escapeHtml(opt_data.issueLinkEntry.summary) : '') + '</span></span></p>' + ((opt_data.issueLinkEntry.priorityIcon || opt_data.issueLinkEntry.statusIcon) ? '<ul class="link-snapshot">' + ((opt_data.issueLinkEntry.priorityIcon) ? '<li class="priority">' + GH.tpl.detailview.issuelinks.renderIcon({url: opt_data.issueLinkEntry.priorityIcon.url, title: opt_data.issueLinkEntry.priorityIcon.alt, alt: opt_data.issueLinkEntry.priorityIcon.alt}) + '</li>' : '') + ((opt_data.issueLinkEntry.statusIcon) ? '<li class="status">' + ((opt_data.issueLinkEntry.statusIconLink) ? '<a href="' + soy.$$escapeHtml(opt_data.issueLinkEntry.statusIconLink) + '">' : '') + ((opt_data.issueLinkEntry.status) ? GH.tpl.status.renderIcon({status: opt_data.issueLinkEntry.status, maxWidth: 'short'}) : GH.tpl.detailview.issuelinks.renderIcon({url: opt_data.issueLinkEntry.statusIcon.url, title: opt_data.issueLinkEntry.statusIcon.alt, alt: opt_data.issueLinkEntry.statusIcon.alt})) + ((opt_data.issueLinkEntry.statusIconLink) ? '</a>' : '') + '</li>' : '') + '</ul>' : '');
};
if (goog.DEBUG) {
  GH.tpl.detailview.issuelinks.renderLocalLink.soyTemplateName = 'GH.tpl.detailview.issuelinks.renderLocalLink';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/detail/DetailsIssueLinks.js' */
GH.DetailsIssueLinks={},GH.DetailsIssueLinks.updateRemoteLink=function(e){var n=e.htmlElementId;JIRA.SmartAjax.makeRequest({error:function(i,t,s){AJS.$("#"+n+" div.link-content .link-loading").removeClass("link-loading").addClass("link-loading-failed").html("Failed to load");var l=e.defaultLinkIcon;AJS.$("#"+n+" div.link-content .link-throbber").html("<img src='"+l+"' width='16' height='16' title='' alt='' />")},success:function(e){AJS.$("#"+n+" div.link-content").html(e)},url:GH.Ajax.CONTEXT_PATH+"/rest/viewIssue/1/remoteIssueLink/render/"+e.id})},GH.DetailsIssueLinks.loadRemoteLinks=function(e){_.each(e.issueLinkTypeEntries,function(e){_.each(e.issueLinkEntries,function(e){e.requiresAsyncLoading&&GH.DetailsIssueLinks.updateRemoteLink(e)})})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/detail/DetailsFieldRenderer.js' */
define("jira-agile/rapid/ui/detail/details-field-renderer",["require"],function(e){"use strict";var t=e("underscore"),i=GH.RapidViewConfig,n=GH.DetailsObjectFactory.getDetailsModel(),s={},a="parentissuekey";return s.renderFields=function(e,i,s){this.renderDetailsHeaderFields(e,i,s);var a=[{fieldsSelector:"details"},{fieldsSelector:"people",title:"People"},{fieldsSelector:"dates",title:"Dates"}],r=t.reduce(a,function(e,t){var i=n.getFieldsForSection(t.fieldsSelector);return i.length>0&&e.push({title:t.title,fields:i}),e},[]);!GH.Features.EDITABLE_DETAIL_VIEW_ENABLED.isEnabled()&&e.issueLinks.linkingEnabled&&r.push({title:"Issue Links",issueLinks:e.issueLinks});var d=i.find("#ghx-detail-nav"),l=i,u=this.buildTabs(e,r);this.renderTabs(e,l,d,u)},s.renderDetailsHeaderFields=function(e,t,i){var s=n.getViewField("issuekey"),r=n.getViewField(a),d=n.getViewField("summary"),l=t.find("#ghx-detail-head");this._renderIssueKey(l,".ghx-parent-key",r,e),this._renderIssueKey(l,".ghx-key",s,e);var u=this.renderField(e,d);l.find(".ghx-detail-summary").empty().append(u),this.renderEstimationAndTimeTracking(e,l);var o=i.showLogWorkTrigger&&n.hasIssueOperation("log-work");this.renderLogWorkTrigger(e,l,o)},s._renderIssueKey=function(e,i,n,s){if(!t.isUndefined(n)){var a=t.extend({},n,{dataTooltip:this._getIssueKeyTooltip(n)}),r=e.find(i),d=this.renderField(s,a);r.html(d),this.renderJiraLink(s,a,r),this._initTooltip(d)}},s._initTooltip=function(e){e.find("[data-tooltip]").each(function(e,t){AJS.$(t).tooltip({html:!0,title:"data-tooltip"})})},s._getIssueKeyTooltip=function(e){if(e.id===a)return GH.tpl.detailview.renderParentIssueTooltip({issueKey:e.text,summary:e.label})},s.renderEstimationAndTimeTracking=function(e,t){GH.log("unimplemented function renderEstimationAndTimeTracking",GH.Logger.Contexts.ui)},s.buildTabs=function(e){GH.log("unimplemented function buildTabs",GH.Logger.Contexts.ui)},s.addSubtaskTab=function(e,i){if(i.subtasks){var s,a=!!t.find(i.subtasks,function(e){return e.canEdit||e.canDelete}),r=!t.isUndefined(i.trackingStatisticFieldId);if(r){var d=n.getViewField("aggregatetimeestimate_subtasks");d&&(s=d.html)}e.push({id:"subtasks",title:"Sub-Tasks",titleCount:i.subtasks.length,hasTitleCount:!0,subtasks:i.subtasks,canCreateSubtask:n.hasIssueOperation("create-subtask"),showActionsColumn:a,showTrackingField:r,trackingFieldSum:s,filteredSubtaskCount:i.subtasks?i.totalSubtaskCount-i.subtasks.length:0,parentIssueKey:i.key,iconFont:"jira-completed-task"})}},s.renderSubtaskAsHtmlNode=function(e){var n="";e.filteredSubtaskCount>0&&(n=AJS.format("{0,choice,0#{1}0 sub-tasks{2} are|1#{1}1 sub-task{2} is|1\u003c{1}{0,number} sub-tasks{2} are} being filtered by the board\'\'s {3}Saved Filter{2}",e.filteredSubtaskCount,'<a href="'+GH.Ajax.CONTEXT_PATH+"/browse/"+e.parentIssueKey+'#view-subtasks">',"</a>",'<a href="'+GH.Ajax.CONTEXT_PATH+"/secure/RapidView.jspa?tab=filter&rapidView="+i.currentData.data.id+'">'));var s=t.first(e.subtasks),a=s&&s.status.statusCategory;return AJS.$(GH.tpl.detailview.renderSubtasks({subtasks:e.subtasks,canCreateSubtask:e.canCreateSubtask,showActionsColumn:e.showActionsColumn,showTrackingField:e.showTrackingField,trackingFieldSum:e.trackingFieldSum,filteredSubtaskCount:e.filteredSubtaskCount,filteredSubtaskMessage:n,statusCategoriesAvailable:a}))},s.renderSections=function(e,i){var n=AJS.$(GH.tpl.detailview.renderTabTitle({tabTitle:e.title}));i.append(n),t.each(e.sections,function(t){this.renderSection(i,t,e.viewData)}.bind(this))},s.renderSection=function(e,i,n){var s,a=AJS.$(GH.tpl.detailview.renderTabSection({renderTitle:!t.isUndefined(i.title),title:i.title}));if(i.fields){if(0===i.fields.length)return;s=a.find(".ghx-tab-section-content"),t.each(i.fields,function(e){var t=this.renderField(n,e);s.append(t)}.bind(this)),e.append(a)}else if(i.issueLinks){s=a.find(".ghx-tab-section-content");var r=GH.tpl.detailview.issuelinks.renderIssueLinks({issueLinkTypeEntries:i.issueLinks.issueLinkTypeEntries,canLink:i.issueLinks.canLink});s.replaceWith(r),e.append(a)}},s.renderField=function(e,t){var i=AJS.$(GH.tpl.detailview.renderFieldStructure({issueDetails:e,field:t})),n=this.renderFieldContent(t);return i.find("dd").html(n),i},s.renderFieldBasic=function(e,t){var i=this.renderFieldContent(t);return i},s.renderLogWorkTrigger=function(e,t,i){var n=t.find("#ghx-log-work-container");i?n.css({display:""}):n.css({display:"none"})},s.renderJiraLink=function(e,i,n){var s=n.filter(".js-view-in-jira").add(n.find(".js-view-in-jira")),r={issueKey:i.text,eventName:"gh.issueaction.issuedetail.open.full.issue"};i.id===a&&t.extend(r,{description:"...",skipTitle:!0,eventName:"gh.issueaction.issuedetail.open.full.issue.parent"}),s.find("dd").html(GH.tpl.detailview.renderIssueLink(r)),s.click(function(){AJS.trigger("analytics",{name:r.eventName})})},s.renderFieldContent=function(e){var t;if("description"===e.id)return t=GH.tpl.detailview.renderDescriptionHtmlView({field:e});if(e.id===i.currentData.data.estimationStatistic.fieldId)return t=GH.tpl.detailview.renderTextEstimateView({field:e});if(e.id===i.currentData.data.trackingStatistic.fieldId)return t=GH.tpl.detailview.renderTextEstimateView({field:e});if("aggregatetimeestimate"===e.id&&"timeestimate"===i.currentData.data.trackingStatistic.fieldId)return t=GH.tpl.detailview.renderTextEstimateView({field:e});switch(e.renderer){case"html":t=GH.tpl.detailview.renderHtmlView({field:e});break;case"date":t=GH.tpl.detailview.renderDateView({field:e});break;case"epiclink":t=GH.tpl.field.epicLink.renderEpicLink({field:e,removableIfAllowed:!0});break;case"status":t=GH.tpl.status.renderText({status:e.statusEntry});break;case"text":default:t=GH.tpl.detailview.renderTextView({field:e})}return t},s});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/detail/fixed/FixedDetailsFieldRenderer.js' */
define("jira-agile/rapid/ui/detail/legacy/legacy-details-field-renderer",["require"],function(e){"use strict";var t=e("underscore"),i=e("jira-agile/rapid/ui/detail/details-field-renderer"),n=GH.DetailsObjectFactory.getDetailsModel(),a={};return a.buildTabs=function(e,i){var a=n.getViewField("description"),r=t.isUndefined(a),s=!r&&!!a.html,d=[];if(i.length>0&&d.push({id:"details",title:"Details",sections:i,viewData:e,iconFont:"info"}),d.push({id:"description",title:"Description",sections:[{fields:n.getFieldsForSection("description")}],hasContent:s,viewData:e,iconFont:"details"}),d.push({id:"comments",title:"Comments",titleCount:e.comments?e.comments.length:0,hasTitleCount:!0,comments:!0,canCreateComment:e.canCreateComment,viewData:e,iconFont:"comment"}),d.push({id:"attachments",title:"Attachments",titleCount:e.attachments.totalCount,hasTitleCount:!0,attachments:e.attachments,canCreateAttachment:n.hasIssueOperation("attach-file"),iconFont:"attachment"}),r&&(delete d[1],d=t.compact(d)),this.addSubtaskTab(d,e),e.tabs&&e.tabs.thirdPartyTabs&&e.tabs.thirdPartyTabs.length>0){var l=e.tabs.thirdPartyTabs;t.each(l,function(e){(e.iconURL||e.iconFont)&&d.push({id:e.providerKey.replace(/\./g,"-").replace(/:/g,"-"),title:e.label,titleCount:e.titleCount,toolTip:e.toolTip,hasTitleCount:!t.isUndefined(e.titleCount),thirdPartyTab:!0,html:e.html,iconURL:e.iconURL,iconFont:e.iconFont})})}return d},a.renderEstimationAndTimeTracking=function(e,t){this.renderPrimaryStatistics(e,t)},a.renderTabs=function(e,i,n,a){var r=AJS.$(GH.tpl.detailview.renderTabs({tabs:a})),s=AJS.$(GH.tpl.detailview.renderTabMenu({tabs:a}));i.append(s),n.append(r),t.each(a,function(e){var t=r.find("#ghx-tab-"+e.id);e.sections?this.renderSections(e,t):e.comments?this.renderComments(e,t):e.attachments?this.renderAttachments(e,t):e.subtasks?this.renderSubtasks(e,t):e.thirdPartyTab&&this.renderThirdPartyTab(e,t)}.bind(this))},a.renderComments=function(e,t){var i=AJS.$(GH.tpl.detailview.renderTabTitle({tabTitle:e.title}));t.append(i),t.append(AJS.$(GH.tpl.detailview.renderCommentsStructure({comments:e.viewData.comments,totalComments:e.viewData.totalComments,canCreateComment:e.canCreateComment})))},a.renderAttachments=function(e,t){var i=AJS.$(GH.tpl.detailview.renderTabTitle({tabTitle:e.title}));t.append(i),t.append(AJS.$(GH.tpl.detailview.renderAttachments({attachments:e.attachments,canCreateAttachment:e.canCreateAttachment})))},a.renderSubtasks=function(e,t){var i=AJS.$(GH.tpl.detailview.renderTabTitle({tabTitle:e.title}));t.append(i),t.append(this.renderSubtaskAsHtmlNode(e))},a.renderThirdPartyTab=function(e,t){var i=AJS.$(GH.tpl.detailview.renderTabTitle({tabTitle:e.title}));t.append(i),t.append(AJS.$(e.html))},a.renderPrimaryStatistics=function(e,i){var a=n.getPrimaryEstimateStatisticField(),r=n.getPrimaryTrackingStatisticField(),s=i.find(".ghx-statistic-group"),d=function(i,n,a){if(i){var r=t.extend({},i,{tooltip:i.label,label:n}),d=this.renderField(e,r),l=s.find(".js-"+a);l.empty().append(d),t.isUndefined(i.text)?l.addClass("ghx-empty"):l.removeClass("ghx-empty")}else s.find(".js-"+a).remove()}.bind(this);a||r?(d(a,"Estimate","estimate"),r?d(r,"Remaining","remaining"):s.find(".ghx-remaining-group").remove()):s.empty()},a.renderTimeTrackingDialogFields=function(e,i){var a=n.getSecondaryTrackingStatisticFields(),r=t.find(a,function(e){return"timeestimate"===e.id});r=t.extend({},r,{label:"Parent"});var s=t.find(a,function(e){return"aggregatetimeestimate_subtasks"===e.id}),d=this.renderField(e,r),l=this.renderField(e,s);i.find(".js-parent-remaining").empty().append(d),i.find(".js-subs-remaining").empty().append(l),t.isUndefined(r.text)?i.find("dt.ghx-fieldname-timeestimate").parent("dl").addClass("ghx-empty"):i.find("dt.ghx-fieldname-timeestimate").parent("dl").removeClass("ghx-empty")},t.extend(i,a)});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/detail/DetailsFieldEdit.js' */
GH.DetailsFieldEdit={},GH.DetailsFieldEdit.model=!1,GH.DetailsFieldEdit.init=function(){AJS.$(document).delegate(".js-issue-fields .js-editable-field","click",GH.DetailsFieldEdit.handleDetailsFieldClick),AJS.$(document).delegate(".js-epic-remove .aui-icon-close","click",GH.DetailsFieldEdit.handleRemoveEpicClick)},GH.DetailsFieldEdit.completeEdits=function(){var e=GH.DetailsFieldEdit.model;GH.DetailsFieldEdit.model=!1,e&&e.completeEdits()},GH.DetailsFieldEdit.discardEdits=function(){var e=GH.DetailsFieldEdit.model;GH.DetailsFieldEdit.model=!1,e&&e.discardEdits()},GH.DetailsFieldEdit.reset=function(){GH.DetailsFieldEdit.discardEdits()},GH.DetailsFieldEdit.getEditingCount=function(){return GH.DetailsFieldEdit.model&&GH.DetailsFieldEdit.model.getEditingCount()||0},GH.DetailsFieldEdit.getEditingFieldIds=function(){return GH.DetailsFieldEdit.model&&GH.DetailsFieldEdit.model.getEditingFieldIds()||[]},GH.DetailsFieldEdit.isEditing=function(e){return GH.DetailsFieldEdit.model&&GH.DetailsFieldEdit.model.isEditing(e)||!1},GH.DetailsFieldEdit.handleRemoveEpicClick=function(e){var i=(AJS.$(this).closest(".js-epic-remove").attr("data-epickey"),AJS.$("#ghx-detail-issue").attr("data-issuekey"));AJS.$(this).parents("dd").prev().andSelf().remove(),GH.EpicController.removeIssuesFromAssociatedEpics([i])},GH.DetailsFieldEdit.handleDetailsFieldClick=function(e){var i=AJS.$(this),t=i.closest("dd.js-editable-field");if(!(t.length<1||AJS.$(e.target).is("a"))){var d=t.attr("data-field-id"),l=parseInt(AJS.$("#ghx-detail-issue").attr("data-issueid"),10);GH.DetailsFieldEdit.editField(l,d),e.preventDefault()}},GH.DetailsFieldEdit.editRelativeField=function(e,i){var t=e.model,d=e.fieldData.id;if(GH.DetailsFieldEdit.model&&GH.DetailsFieldEdit.model.getIssueId()==t.getIssueId()){var l,a=t.getIssueId(),s=t.getFieldInTabOrder(),o=null;for(l=0;l<s.length;l++)if(s[l].id===d){o=l;break}if(_.isNull(o))return!1;if(i>0){for(l=o+1;l<s.length;l++)if(s[l]&&s[l].editable&&GH.DetailsFieldEdit.isFieldVisible(s[l]))return GH.DetailsFieldEdit.editField(a,s[l].id),!0}else for(l=o-1;l>=0;l--)if(s[l]&&s[l].editable&&GH.DetailsFieldEdit.isFieldVisible(s[l]))return GH.DetailsFieldEdit.editField(a,s[l].id),!0;return!1}},GH.DetailsFieldEdit.isFieldVisible=function(e){return AJS.$('dd[data-field-id="'+e.id+'"]').is(":visible")},GH.DetailsFieldEdit.editField=function(e,i){if(GH.DetailsObjectFactory.getDetailsModel().viewData&&GH.DetailsObjectFactory.getDetailsModel().viewData.id==e){var t=GH.DetailsFieldEdit.model;if(t.issueId!=e&&(t=GH.DetailsFieldEdit.model=!1),t&&t.isEditing(i)){var d=t.getEditInfo(i);if(d)return void GH.DetailsFieldEdit.focusFieldEditor(d)}if(t&&t.getEditingCount()>0)return void GH.DetailsFieldEdit.startFieldEdit(t,i);t&&t.isLoading||(GH.DetailsFieldEdit.model=t=new GH.DetailsFieldEditModel(e)),GH.DetailsFieldEdit.loadEditData(t,i)}},GH.DetailsFieldEdit.loadEditData=function(e,i){e.fieldToEditUponCompletion=i,e.isLoading||(e.isLoading=!0,GH.Ajax.get({url:"/xboard/issue/edit-data.json",data:{issueIdOrKey:e.getIssueId(),rapidViewId:GH.RapidViewConfig.currentData.id}},"loadEditData").done(function(i){e.isLoading=!1,e.setEditData(i);var t=e.fieldToEditUponCompletion;delete e.fieldToEditUponCompletion,GH.DetailsFieldEdit.startFieldEdit(e,t)}))},GH.DetailsFieldEdit.handleFieldUpdateSuccess=function(e,i){var t=e.fieldData.id,d=e.model.getIssueId(),l=i.view;if(GH.DetailsObjectFactory.getDetailsModel().viewData&&GH.DetailsObjectFactory.getDetailsModel().viewData.id==d)GH.DetailsObjectFactory.getDetailsModel().setViewDataForField(t,l),GH.DetailsFieldEdit.updateFieldViewAndCloseEdit(e,l),e.model.updateEditDataForField(t,i.edit);else{var a=GH.tpl.detailview.fieldUpdateSuccess();GH.Notification.showSuccess(a)}GH.log("issueUpdated triggered",GH.Logger.Contexts.ui),AJS.$(GH).trigger("issueUpdated",{issueId:d,source:"detailView",fieldId:t})},GH.DetailsFieldEdit.handleFieldUpdateFailure=function(e,i,t){var d=e.model;if(GH.DetailsObjectFactory.getDetailsModel().viewData&&GH.DetailsObjectFactory.getDetailsModel().viewData.id==d.getIssueId()&&d.isEditing(i))t.errors&&GH.DetailsFieldEdit.showFieldErrors(e,t.contextId,t.errors);else{var l=GH.tpl.detailview.fieldUpdateFailure();GH.Notification.showWarning(l)}},GH.DetailsFieldEdit.startFieldEdit=function(e,i){var t=e.getFieldEditData(i);if(t){var d={};d.model=e,d.fieldData=t,d.enabled=!0;var l=AJS.$("dd.ghx-fieldname-"+i);if(!(l.length<1)){switch(d.viewDd=l,d.editDd=GH.DetailsFieldEdit.createEditDD(t),t.type){case"textarea":var a="description"!=i;d.editor=new GH.DetailsFieldTextArea(a);break;case"number":case"text":d.editor=new GH.DetailsFieldTextInput}d.editor&&(e.addEditInfo(d),d.editor.startEdit(d))}}},GH.DetailsFieldEdit.createEditDD=function(e){var i=AJS.$("<dd></dd>");return i.addClass("ghx-fieldtype-"+e.type).addClass("ghx-fieldname-"+e.id).addClass("js-editing ghx-editing").attr({"data-field-id":e.id}),i},GH.DetailsFieldEdit.showEdit=function(e){e.viewDd.hide().after(e.editDd)},GH.DetailsFieldEdit.focusFieldEditor=function(e){e.editor.focus(e)},GH.DetailsFieldEdit.hideEdit=function(e){e.editDd.remove(),e.viewDd.show(),e.fieldData.errorSelector&&AJS.$(e.fieldData.errorSelector).empty(),e.model.removeEditInfo(e)},GH.DetailsFieldEdit.showFieldErrors=function(e,i,t){GH.DetailsFieldEdit.model&&GH.DetailsFieldEdit.model.getIssueId()==e.model.getIssueId()?(e.editor.setErrors(e,t),e.editor.returnToEdit(e)):(AJS.log("Unable to find field for id "+i),GH.Notification.showErrors({errors:t}))},GH.DetailsFieldEdit.updateFieldViewAndCloseEdit=function(e,i){var t=GH.DetailsObjectFactory.getDetailsFieldRenderer().renderFieldContent(i);e.viewDd.html(t),GH.DetailsFieldEdit.hideEdit(e),"summary"==e.fieldData.id&&(AJS.$("#ghx-detail-issue").scrollTop(0),GH.DetailsView.updateSize())};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/detail/DetailsFieldEditModel.js' */
GH.DetailsFieldEditModel=function(t){this.issueId=t,this.isLoading=!1,this.editData=!1,this.editInfos=[]},GH.DetailsFieldEditModel.prototype.getIssueId=function(){return this.issueId},GH.DetailsFieldEditModel.prototype.setEditData=function(t){this.editData=t,_.each(t.fields,function(t){var i=GH.DetailsObjectFactory.getDetailsModel().getErrorSelectorForField(t.id);i&&(t.errorSelector=i)})},GH.DetailsFieldEditModel.prototype.getFieldEditData=function(t){for(var i=!1,e=0;e<this.editData.fields.length;e++)if(this.editData.fields[e].id==t){i=this.editData.fields[e];break}return i},GH.DetailsFieldEditModel.prototype.getFieldInTabOrder=function(){var t=this.editData.fields,i=[],e=[];return _.each(t,function(t){"summary"==t.id&&(e.push(t),i[t.id]=!0)}),_.each(t,function(t){0===t.id.indexOf("customfield_")&&(e.push(t),i[t.id]=!0)}),_.each(t,function(t){i[t.id]||(e.push(t),i[t.id]=!0)}),e},GH.DetailsFieldEditModel.prototype.getEditingCount=function(){return this.editInfos.length},GH.DetailsFieldEditModel.prototype.getEditingFieldIds=function(){return 0===this.getEditingCount()?[]:_.map(this.editInfos,function(t){return t.fieldData.id})},GH.DetailsFieldEditModel.prototype.isEditing=function(t){return this.getEditInfo(t)!==!1},GH.DetailsFieldEditModel.prototype.getEditInfo=function(t){for(var i=0;i<this.editInfos.length;i++)if(this.editInfos[i].fieldData.id==t)return this.editInfos[i];return!1},GH.DetailsFieldEditModel.prototype.addEditInfo=function(t){this.editInfos.push(t)},GH.DetailsFieldEditModel.prototype.removeEditInfo=function(t){this.editInfos=_.filter(this.editInfos,function(i){return i.fieldData.id!=t.fieldData.id})},GH.DetailsFieldEditModel.prototype.clearEditData=function(){this.editInfos=[]},GH.DetailsFieldEditModel.prototype.updateEditDataForField=function(t,i){var e=this.editData;if(e)for(var d=0;d<e.fields.length;d++)if(e.fields[d].id==t){e.fields[d]=i;break}},GH.DetailsFieldEditModel.prototype.completeEdits=function(){_.each(this.editInfos,function(t){t.editor.submitChanges(t)})},GH.DetailsFieldEditModel.prototype.discardEdits=function(){_.each(this.editInfos,function(t){t.enabled=!1})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/detail/DetailsFieldEditControls.js' */
GH.DetailsFieldEditControl=function(){},GH.DetailsFieldEditControl.events=new GH.Events,function(){if(!GH.DetailsObjectFactory.isInlineEditableEnabled()){var e=require("jira-agile/rapid/analytics-tracker");GH.DetailsFieldEditControl.Analytics=new e("gh.issuedetail","inlineedit")}}(),GH.DetailsFieldEditControl.prototype={generateControl:function(e){throw"Unimplemented method"},keydownHandler:function(e,t){var i=this;if(27==e.keyCode)e.stopPropagation(),i.cancelEdit(t);else if(13==e.keyCode)e.preventDefault(),t.editControl.blur();else if(9==e.keyCode){var d=e.shiftKey?-1:1;GH.DetailsFieldEdit.editRelativeField(t,d)}},startEdit:function(e){var t=this,i=t.generateControl(e),d="";_.isUndefined(e.fieldData.value)?_.isUndefined(e.fieldData.text)||(d=e.fieldData.text):d=e.fieldData.value,i.val(d),i.bind("blur focusout",function(){t.submitChanges(e)}),i.keydown(function(i){t.keydownHandler(i,e)}),GH.DetailsFieldEdit.showEdit(e),t.focus(e),e.enabled=!0},cancelEdit:function(e){e.enabled&&(e.enabled=!1,e.editControl.unbind("blur"),GH.DetailsFieldEdit.hideEdit(e))},submitChanges:function(e){var t=this;if(e.enabled){e.enabled=!1;var i=e.editControl.val();if(i==e.fieldData.text)return e.enabled=!0,void t.cancelEdit(e);GH.DetailsFieldEditControl.events.trigger("before:inlineedit"),e.editControl.unbind("blur").attr("disabled","disabled"),e.editDd.find(".ghx-spinner").show();var d={};d[e.fieldData.id]=function(t){GH.DetailsFieldEdit.handleFieldUpdateFailure(e,e.fieldData.id,t)},GH.Ajax.put({url:"/xboard/issue/update-field.json",data:{issueIdOrKey:e.model.getIssueId(),fieldId:e.fieldData.id,newValue:i},errorContextMap:d}).done(function(t){GH.DetailsFieldEdit.handleFieldUpdateSuccess(e,t.success),GH.DetailsFieldEditControl.events.trigger("after:inlineedit"),GH.DetailsObjectFactory.isInlineEditableEnabled()?AJS.trigger("analytics",{name:"gh.issueaction.issuedetail.inlineedit.submit",data:{changedField:e.fieldData.id}}):GH.DetailsFieldEditControl.Analytics.trigger("fieldId: "+e.fieldData.id)}).fail(function(t){e.editor.returnToEdit(e)}),GH.DetailsObjectFactory.isInlineEditableEnabled()||AJS.trigger("analytics",{name:"gh.issueaction.issuedetail.inlineedit.submit",data:{changedField:e.fieldData.id}})}},setErrors:function(e,t){var i=GH.tpl.detailview.renderFieldErrors({errors:t});e.fieldData.errorSelector?AJS.$(e.fieldData.errorSelector).html(i):e.editDd.find(".js-fielderrors").html(i)},returnToEdit:function(e){var t=this;e.editControl.blur(function(){t.submitChanges(e)}),e.editDd.find(".ghx-spinner").hide(),e.editControl.removeAttr("disabled"),1==e.model.getEditingCount()&&t.focus(e),e.enabled=!0},focus:function e(t){var e=function(){t.editControl.focus(),"number"==t.fieldData.type&&t.editControl.select()};setTimeout(e,0)}},GH.DetailsFieldTextArea=function(e){this.doesReturnSubmit=!!_.isUndefined(e)||e},GH.DetailsFieldTextArea.prototype=new GH.DetailsFieldEditControl,GH.DetailsFieldTextArea.prototype.generateControl=function(e){var t="summary"==e.fieldData.id?6:10,i=GH.tpl.detailview.renderTextareaEdit({numRows:t});e.editDd.html(i);var d=e.editDd.find("textarea");return e.editControl=d,d},GH.DetailsFieldTextArea.prototype.keydownHandler=function(e,t){var i=this;if(27==e.keyCode)e.stopPropagation(),i.cancelEdit(t);else if(i.doesReturnSubmit&&13==e.keyCode)e.preventDefault(),t.editControl.blur();else if(9==e.keyCode){var d=e.shiftKey?-1:1;GH.DetailsFieldEdit.editRelativeField(t,d)}},GH.DetailsFieldTextInput=function(){},GH.DetailsFieldTextInput.prototype=new GH.DetailsFieldEditControl,GH.DetailsFieldTextInput.prototype.generateControl=function(e){var t=GH.tpl.detailview.renderTextEdit({field:e.fieldData});e.editDd.html(t);var i=e.editDd.find("input");return e.editControl=i,i};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/epic/EpicConfig.js' */
GH.EpicConfig={},GH.EpicConfig.epicConfig=void 0,GH.EpicConfig.setEpicConfig=function(i){GH.EpicConfig.epicConfig=i},GH.EpicConfig.getStoryIssueTypeId=function(){return GH.EpicConfig.epicConfig.storyIssueTypeId},GH.EpicConfig.getStoryIssueTypeName=function(){return GH.EpicConfig.epicConfig.storyIssueTypeName},GH.EpicConfig.getEpicIssueTypeId=function(){return GH.EpicConfig.epicConfig.epicIssueTypeId},GH.EpicConfig.getEpicIssueTypeName=function(){return GH.EpicConfig.epicConfig.epicIssueTypeName},GH.EpicConfig.getEpicLabelFieldId=function(){return GH.EpicConfig.epicConfig.epicLabelFieldId},GH.EpicConfig.getEpicStatusFieldId=function(){return GH.EpicConfig.epicConfig.epicStatusFieldId},GH.EpicConfig.getEpicStatusDoneValueId=function(){return GH.EpicConfig.epicConfig.epicStatusDoneValueId},GH.EpicConfig.getEpicLinkFieldName=function(){return GH.EpicConfig.epicConfig.epicLinkFieldName},GH.EpicConfig.getEpicLinkFieldId=function(){return GH.EpicConfig.epicConfig.epicLinkFieldId},GH.EpicConfig.canMarkEpicAsDone=function(){return!_.isUndefined(GH.EpicConfig.epicConfig.epicStatusDoneValueId)},GH.EpicConfig.getEpicColorFieldId=function(){return GH.EpicConfig.epicConfig.epicColorFieldId},GH.EpicConfig.getEpicNameString=function(i,e){return i||"unlabelled"+"-"+e};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/SprintConfig.js' */
define("jira-agile/rapid/ui/plan/sprint-config",[],function(){"use strict";var i={};return i.sprintConfig=void 0,i.setSprintConfig=function(n){i.sprintConfig=n},i.getSprintConfig=function(){return i.sprintConfig},i.getSprintFieldId=function(){return i.getSprintConfig().sprintFieldId},i});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/epic/EpicController.js' */
define("jira-agile/rapid/ui/epic/epic-controller",["require"],function(e){function i(e,i){i=i||[];var a=[],s=void 0;o&&(s=i.length,i=r.reject(i,function(e){return!!e.parentId}),s-=i.length);var n=i.length,l=n>=1?i[0].key:void 0,c=n>=2?i[1].key:void 0;switch(e){case"gh.epic.issues.removed":t.trace("gh.epic.issues.removed",i.length,l,c),a.push(AJS.format("{0,choice,1#{1} has been unassigned from its epic.|2#{1} and {2} have been unassigned from their epics.|2\u003cYour issues have been unassigned from their epics.}",i.length,l,c));break;case"gh.epic.issues.added":t.trace("gh.epic.issues.added",i.length,l,c),a.push(AJS.format("{0,choice,1#{1} has|2#{1} and {2} have|2\u003cYour issues have} been assigned to this epic.",i.length,l,c))}return s&&a.push("Sub-tasks were skipped, because they are automatically associated with the same epic as their parent issues."),a.join("<br /><br />")}var t=e("jira/util/logger"),r=e("underscore"),a=e("jira-agile/rapid/analytics-tracker"),s=e("jira/analytics"),n=e("jira-agile/rapid/ui/plan/analytics-helper"),l=!0,o=!0,c={};return c.analytics=new a("gh.rapidboard.epics"),c.analytics2=new a("gh.rapidboard.epics","epicCount",""),c.sendAnalytics=function(e,i,t){if(!e)throw new Error("You must specify a category");var a="jira-software."+GH.RapidBoard.State.getBoardType()+".plan.epics."+e,l=n.baseEventData();s.send({name:a,properties:t?i:r.extend(l,i)})},c.model=void 0,c.init=function(){AJS.$(GH).bind("issueCreated",c.handleIssueCreated),c.model=new GH.EpicModel,GH.EpicView.init()},c.getFilteredEpicKey=function(){return GH.BoardState.getPerViewValue("planSelectedEpic",null)},c.setFilteredEpicKey=function(e,i){GH.BoardState.setPerViewValue("planSelectedEpic",e),i||c.sendAnalytics(e?"epicFilterActive":"epicFilterInactive")},c.getEpicModel=function(){return c.model},c.setEpicData=function(e){c.model.setData(e)},c.validateSelectedEpic=function(){var e=c.getEpicModel().getEpicList(),i=c.getFilteredEpicKey(),t=r.isNull(i)||GH.PlanIssueListFiltering.isNoneEpicFilterKey(i)&&e.getNumVisibleIssues()>0||e.isIssueValid(i);t||(c.setFilteredEpicKey(null),GH.RapidBoard.UrlState.replaceState())},c.registerEpicsCount=function(e){AJS.trigger("analytics",{name:"jira-software.board.number.of.epics",data:{boardId:GH.RapidBoard.State.getRapidViewId(),epicsOnBoard:e.epics.length}})},c.reorderEpics=function(e,i,t){c.model.getEpicList().reorderIssues(e,i,t),c.sendAnalytics("epicsReordered")},c.handleIssueCreated=function(e,i){if(GH.AnalyticsEnabled){var t=GH.EpicConfig.getEpicLabelFieldId();r.isString(t)&&0!==t.length&&r.each(i.issues,function(e){GH.Ajax.get({bareUrl:GH.Ajax.CONTEXT_PATH+"/rest/api/2/issue/"+e.issueKey+"?fields=issuetype,"+t},"getEpicLabelLength").done(function(e){if("Epic"===e.fields.issuetype.name){var i=e.fields[t]||"";c.analytics.trigger("epicLabelLength","length",i.length),c.sendAnalytics("epicCreated")}})})}},c.addIssuesToEpic=function(e,t){var a=[];r.each(t,function(i){var t=GH.BacklogModel.getIssueData(i);t&&t.typeId!==GH.EpicConfig.getEpicIssueTypeId()&&(t.epic=e,a.push(t))}),c.addIssuesToEpicOnServer(e,t).done(function(e){GH.Notification.showSuccess(i("gh.epic.issues.added",a)),r.each(a,function(e){AJS.$(GH).trigger("issueUpdated",{issueId:e.id,source:"detailView"})}),GH.PlanController.isActive()&&(GH.BacklogController.updateEpicData(),c._reloadDetailsView(GH.PlanController)),c.analytics.trigger("addIssues","issueCount",t.length),c.sendAnalytics("addIssuesToEpic",{issueCount:t.length})}).fail(function(){GH.BacklogController.loadData()})},c.addIssuesToEpicOnServer=function(e,i){var t={ignoreEpics:l,ignoreSubtasks:o,issueKeys:i};return GH.Ajax.put({url:"/epics/"+e+"/add",data:t,errorContextMap:{"soft-error":function(e){"use strict";e&&GH.Notification.showErrors({errors:e.errors},!0,{autoHide:!0,showTitle:!1})}}})},c.removeIssuesFromAssociatedEpics=function(e){var t=[];if(GH.PlanController.isActive()){if(t=GH.BacklogModel.removeEpicFromIssues(e),0===t.length)return}else if(GH.WorkController.isActive()&&(t=GH.GridDataController.getModel().removeEpicFromIssues(e),0===t.length))return;var a={issueKeys:e};GH.Ajax.put({url:"/epics/remove",data:a}).done(function(a){GH.Notification.showSuccess(i("gh.epic.issues.removed",t)),r.isEmpty(t)||r.each(t,function(e){AJS.$(GH).trigger("issueUpdated",{issueId:e.id,source:"detailView"})}),GH.PlanController.isActive()?(GH.BacklogController.updateEpicData(),c._reloadDetailsView(GH.PlanController)):GH.WorkController.isActive()&&(c._reloadDetailsView(GH.WorkController),"epic"===GH.GridDataController.getModel().getSwimlaneStrategy()&&GH.WorkController.reload()),c.analytics.trigger("removeIssues","issueCount",e.length),c.sendAnalytics("removeIssues",{issueCount:e.length})})},c.updateEpicAsDone=function(e){var i=c.updateEpicField(e,GH.EpicConfig.getEpicStatusFieldId(),GH.EpicConfig.getEpicStatusDoneValueId());i.done(function(){c.analytics.trigger("markEpicAsDone"),GH.EpicView.showEpicMarkedAsDoneMessage(),c.getFilteredEpicKey()===e&&(c.setFilteredEpicKey(null),GH.BacklogController.updateEpicFiltering(!1),GH.RapidBoard.State.replaceState()),GH.BacklogController.updateEpicData()})},c.updateEpicField=function(e,i,t,r,a){return GH.Ajax.put({url:"/xboard/issue/update-field.json",data:{issueIdOrKey:e,fieldId:i,newValue:t}}).done(r).fail(a)},c.applyVersionFiltering=function(){if(GH.VersionController.hasFilteredVersion()){var e=GH.BacklogModel.getEpicsFilteredForVersion(GH.VersionController.getFilteredVersionId()),i=c.getFilteredEpicKey();r.contains(e.filtered,i)&&(GH.EpicView.deselectAllEpics(),c.setFilteredEpicKey(null),GH.BacklogController.updateEpicFiltering(!1),GH.RapidBoard.State.pushState()),GH.EpicView.setFilteredStyle(e.filtered)}else c.clearVersionFiltering()},c.clearVersionFiltering=function(){GH.EpicView.clearFilteredStyle()},c._reloadDetailsView=function(i){if(GH.Features.EDITABLE_DETAIL_VIEW_ENABLED.isEnabled()){var t=e("jira-agile/rapid/ui/detail/inlineedit/details-view-reload-reason");i.reloadDetailView(t.VERSION_PANEL_CHANGED)}else i.reloadDetailView()},c});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/epic/EpicModel.js' */
GH.EpicModel=function(){this.epicsList=void 0,this.canEditEpics=!1,this.supportsPages=!1},GH.EpicModel.prototype.setData=function(i){if(i){this.canEditEpics=!!i.canEditEpics,this.supportsPages=!!i.supportsPages;var e=i.epics||[];_.each(e,GH.EpicModel.prototype._epicPreprocessFn),this.epicsList=new GH.IssueListModel("epics",e,GH.VersionController.getVersionModel())}},GH.EpicModel.prototype._epicPreprocessFn=function(i){i.originalEpicLabel=i.epicLabel||"",i.epicLabel=GH.EpicConfig.getEpicNameString(i.epicLabel,i.key)},GH.EpicModel.prototype.getEpicList=function(){return this.epicsList},GH.EpicModel.prototype.canUserEditEpics=function(){return this.canEditEpics};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/epic/EpicView.js' */
!function(){var e=require("jira-agile/rapid/ui/kanplan/KanPlanInlineDialogController");GH.EpicView={},GH.EpicView.init=function(){GH.EpicView.initializeInlineEdits(),AJS.$(document).delegate(".js-change-epic-color","click",GH.EpicView.changeEpicColor),AJS.$(document).delegate(".js-mark-epic-done","click",GH.EpicView.handleMarkEpicAsDone)},GH.EpicView.colors=["ghx-label-1","ghx-label-2","ghx-label-3","ghx-label-4","ghx-label-5","ghx-label-6","ghx-label-7","ghx-label-8","ghx-label-9"],GH.EpicView.opts={canClose:!0},GH.EpicView.dropdowns=[],GH.EpicView.show=function(){var e=AJS.$("#ghx-epic-column");e.html(GH.tpl.epic.renderShell({isEpicPanelExpanded:GH.PlanController.isEpicsColumnVisible(),canCreateIssue:GH.UserData.userConfig.canCreateIssue})),GH.EpicView.renderEpics(),GH.EpicQuickCreate.registerCreateEpicDialog()},GH.EpicView.hide=function(){AJS.$("#ghx-epic-column").empty()},GH.EpicView.updateEpics=function(){GH.EpicView.renderEpics(),GH.PlanDragAndDrop.initializeClassificationDnD()},GH.EpicView.renderEpics=function(){var i=GH.EpicController.getEpicModel(),t=AJS.$("#ghx-epic-column"),a=t.find(".ghx-classification-scrollview"),c={},n=i.getEpicList(),l=GH.EpicController.getFilteredEpicKey(),o=GH.RapidBoard.State.isScrumBoard();_.each(n.getAllIssues(),function(e){c[e.key]="open"===GH.EpicView.getTwixieState(e.key),o&&(e.epicStats.estimateDone=GH.BacklogStatistics.formatStatisticForRendering(GH.BacklogModel.estimationStatistic,e.epicStats.doneEstimate),e.epicStats.estimateTotal=GH.BacklogStatistics.formatStatisticForRendering(GH.BacklogModel.estimationStatistic,e.epicStats.totalEstimate),e.epicStats.isIssueCountStatistic="issueCount"===GH.BacklogModel.estimationStatistic.typeId,e.epicStats.estimateStatisticName=GH.BacklogModel.estimationStatistic.name)});var s={epicKeys:n.getVisibleRankables(),epics:n.getAllIssues(),isEpicExpandedByKey:c,selectedEpicKey:l,isNoneSelected:GH.PlanIssueListFiltering.isNoneEpicFilterKey(l),isAllSelected:!l,canEditEpics:i.canUserEditEpics(),canMarkAsDone:GH.EpicConfig.canMarkEpicAsDone(),canCreateIssue:GH.UserData.userConfig.canCreateIssue,colors:GH.EpicView.colors,showPages:GH.BacklogModel.supportsPages(),showEstimates:o};a.html(GH.tpl.epic.renderEpics(s)),GH.PlanView.updateFixedElementPositioning(),t.find(".ghx-classification-item").click(function(e){AJS.$(e.target).closest(".js-epic-actions, .js-create-epic-issue, .js-editing-field, .js-epic-details-toggle, .js-epic-key-link, .js-view-entity-pages").length||GH.EpicView.toggleFiltering(AJS.$(this))}),t.find(".js-epic-details-toggle").click(GH.EpicView.toggleEpicDisplay),t.find(".js-epic-name").click(function(e){e.preventDefault()});var r=AJS.$(".js-epic-actions");_.each(r,function(e){var i="#"+AJS.$(e).attr("id").replace(/^dd-trigger-/,"dd-content-"),t=AJS.$(i),a=AJS.Dropdown.create({trigger:e,content:t,alignment:AJS.LEFT});AJS.$(a).bind("showLayer",function(){GH.RapidBoard.Util.InlineEditable.submitActiveEdits()}),GH.EpicView.dropdowns.push(a)}),t.find(".js-create-epic-issue").click(GH.EpicView.showCreateIssueAssociatedWithEpicDialog),t.find(".js-view-entity-pages").each(function(){var e=AJS.$(this),i=e.closest(".ghx-classification-item").attr("data-epic-key");GH.LinkedPagesController.initDialogTrigger(GH.LinkedPagesController.EPIC,GH.LinkedPagesController.PLAN,i,e)}),GH.EpicView.dropdowns=_.flatten(GH.EpicView.dropdowns),GH.EpicController.applyVersionFiltering(),e.trigger("showepicsonboarding","plan")},GH.EpicView.showCreateIssueAssociatedWithEpicDialog=function(e){e.preventDefault();var i=AJS.$(this).parents(".ghx-classification-item").attr("data-epic-key"),t=AJS.$(this).parents(".ghx-classification-item").find("[data-fieldname='epicLabel']").text();GH.RapidBoard.Util.InlineEditable.submitActiveEdits();var a=GH.EpicQuickCreate.createCreateStoryForm();a.bind("contentRefreshed",function(){AJS.$(document).unbind(JIRA.EpicPicker.READY_EVENT),AJS.$(document).unbind("QuickCreateIssue.validationError"),AJS.$(document).bind(JIRA.EpicPicker.READY_EVENT,function(e,a){a.setSelection(new AJS.ItemDescriptor({value:"key:"+i,label:t})),setTimeout(function(){a.disable()},0),AJS.$(document).bind("QuickCreateIssue.validationError",function(e){a.disable()})})});var c=function(e){return GH.EpicController.addIssuesToEpicOnServer(i,_.pluck(e,"issueKey"))},n="addToEpicCallback";GH.BacklogController.registerIssueCreatedCallback(n,c);var l=a.asDialog({windowTitle:AJS.format("Create {0}",GH.EpicConfig.getStoryIssueTypeId()),id:"create-story-dialog"});l.bind("Dialog.hide",function(){AJS.$(document).unbind(JIRA.EpicPicker.READY_EVENT),AJS.$(document).unbind("QuickCreateIssue.validationError"),GH.BacklogController.unregisterIssueCreatedCallback(n)}),l.show()},GH.EpicView.hideDropdown=function(){_.each(GH.EpicView.dropdowns,function(e){e.hide()})},GH.EpicView.toggleFiltering=function(e){GH.RapidBoard.Util.InlineEditable.submitActiveEdits(),GH.EpicView.deselectAllEpics();var i,t=e.attr("data-epic-key");GH.EpicController.getFilteredEpicKey()===t?i=null:(i=t,AJS.$("#ghx-epic-column").find(".ghx-classification-all").removeClass("ghx-selected"),e.addClass("ghx-selected")),GH.EpicController.setFilteredEpicKey(i),GH.BacklogController.updateEpicFiltering(!1),GH.RapidBoard.State.pushState()},GH.EpicView.deselectAllEpics=function(){var e=AJS.$("#ghx-epic-column"),i=e.find(".ghx-classification-item");i.removeClass("ghx-selected"),e.find(".ghx-classification-all").addClass("ghx-selected")},GH.EpicView.updateEpicStats=function(){var e=AJS.$("#ghx-epic-column");AJS.$.each(e.find(".ghx-classification-item"),function(e,i){var t=AJS.$(i);t.attr("data-epic-key")})},GH.EpicView.setTwixieState=function(e,i){var t="epicTwix-"+e;GH.BoardState.setPerViewValue(t,i)},GH.EpicView.getTwixieState=function(e){var i="epicTwix-"+e;return GH.BoardState.getPerViewValue(i,"closed")},GH.EpicView.toggleEpicDisplay=function(e){var i=AJS.$(this),t=i.parents(".ghx-classification-item");GH.EpicView.toggleEpicDisplayByElementWithAnimation(t)},GH.EpicView.toggleEpicDisplayByElement=function(e){var i=e.attr("data-epic-key");e.hasClass("ghx-open")?(e.removeClass("ghx-open").addClass("ghx-closed"),GH.EpicView.setTwixieState(i,"closed")):e.hasClass("ghx-closed")&&(e.removeClass("ghx-closed").addClass("ghx-open"),GH.EpicView.setTwixieState(i,"open"))},GH.EpicView.toggleEpicDisplayByElementWithAnimation=function(e){var i=e.attr("data-epic-key"),t=e.find(".ghx-expanded"),a=e.hasClass("ghx-open");a?GH.RapidBoard.Animation.animateHeight(t,t.height(),0).done(function(){e.removeClass("ghx-open").addClass("ghx-closed"),GH.EpicView.setTwixieState(i,"closed")}):e.hasClass("ghx-closed")&&(e.removeClass("ghx-closed").addClass("ghx-open"),GH.RapidBoard.Animation.animateHeight(t,0,t.height()).done(function(){GH.EpicView.setTwixieState(i,"open")})),GH.EpicController.sendAnalytics("epicToggled",{isOpen:!a})},GH.EpicView.initializeInlineEdits=function(){var e=function(e){var i=e.editElement.val();return!!GH.Validation.notBlank(e.editElement,"Epic Name is required")&&(e.newValue=i,!0)},i=function(e){GH.EpicView.updateEpicLabel(e.epicKey,e.newValue),GH.RapidBoard.Util.InlineEditable.updateView(e)},t=function(e){GH.RapidBoard.Util.InlineEditable.submitActiveEdits();var i=GH.RapidBoard.Util.InlineEditable.defaultFieldData(e);return"epicLabel"===i.fieldName&&(i.maxLength=30),i.epicKey=e.parents(".ghx-classification-item").attr("data-epic-key"),i},a=function(e){var i=AJS.$(this).parents(".js-epic-actions-list").attr("data-epic-key");return AJS.$('.ghx-classification-item[data-epic-key="'+i+'"]').find(".js-edit-epicLabel-trigger")};GH.RapidBoard.Util.InlineEditable.register(".js-edit-epic-label",{getViewElement:a,getData:t,validate:e,save:i,renderView:GH.RapidBoard.Util.InlineEditable.remoteTriggeredTextRenderView,preEdit:GH.RapidBoard.Util.InlineEditable.cancelActiveEdits})},GH.EpicView.updateEpicLabel=function(e,i){var t=GH.EpicConfig.getEpicLabelFieldId(),a=GH.EpicController.getEpicModel().getEpicList(),c=a.getIssueData(e),n=c.epicLabel,l=c.originalEpicLabel;c.epicLabel=i,c.originalEpicLabel=i,a.updateIssue(c),GH.BacklogView.draw();var o=function(){GH.EpicView._reloadDetailsView(GH.PlanController),GH.EpicController.sendAnalytics("updateEpicLabel",{labelLength:i.length})},s=function(){c.epicLabel=n,c.originalEpicLabel=l,a.updateIssue(c),GH.EpicView.renderEpics(),GH.BacklogView.draw()};GH.EpicController.updateEpicField(e,t,i,o,s)},GH.EpicView.changeEpicColor=function(e){var i=AJS.$(this),t=i.attr("data-color-id"),a=i.parents(".js-epic-actions-list").attr("data-epic-key");t&&a&&GH.EpicView.updateEpicColor(a,t)},GH.EpicView.updateEpicColor=function(e,i){var t=GH.EpicConfig.getEpicColorFieldId(),a=GH.EpicController.getEpicModel().getEpicList(),c=a.getIssueData(e),n=c.epicColor;c.epicColor=i,a.updateIssue(c),GH.EpicView.renderEpics(),GH.BacklogView.draw();var l=function(){GH.EpicView._reloadDetailsView(GH.PlanController),GH.EpicController.sendAnalytics("updateEpicColor",{oldColorId:n,newColorId:i})},o=function(){c.epicColor=n,a.updateIssue(c),GH.EpicView.renderEpics(),GH.BacklogView.draw()};GH.EpicController.updateEpicField(e,t,i,l,o)},GH.EpicView.scrollToBottom=function(){var e=AJS.$(".ghx-epic-column .ghx-classification-scrollview");e.scrollTop(e[0].scrollHeight)},GH.EpicView.handleMarkEpicAsDone=function(e){if(GH.EpicConfig.canMarkEpicAsDone()){GH.RapidBoard.Util.InlineEditable.cancelActiveEdits();var i=AJS.$(this),t=i.parents(".js-epic-actions-list").attr("data-epic-key"),a=GH.EpicController.getEpicModel().getEpicList(),c=a.getIssueData(t),n=c.epicLabel,l=c.epicStats.notDone,o=function(){GH.EpicController.updateEpicAsDone(t)},s="Mark as Done",r=GH.tpl.epic.renderMarkEpicAsDoneDialog({epicName:AJS.escapeHTML(String(n)),epicKey:t,numIncompleteIssues:l,rapidView:GH.RapidBoard.State.getRapidViewId()}),p=GH.ConfirmDialog.create("ghx-mark-epic-done-dialog",{width:450,header:s,content:r,contentEscaping:!1,onConfirmFn:o});p.show(),p.updateHeight()}},GH.EpicView.showEpicMarkedAsDoneMessage=function(){GH.Notification.showSuccess("Epic has been marked as Done")},GH.EpicView.setFilteredStyle=function(e){var i=AJS.$("#ghx-epic-column"),t=i.find(".ghx-classification-item").removeClass("ghx-filtered");t.each(function(i,t){var a=AJS.$(t);_.contains(e,a.attr("data-epic-key"))&&a.addClass("ghx-filtered")})},GH.EpicView.clearFilteredStyle=function(){var e=AJS.$("#ghx-epic-column");e.find(".ghx-classification-item").removeClass("ghx-filtered")},GH.EpicView.showEpicPagesUpdatedMessage=function(e,i,t){JIRA.IssueNavigator.setIssueUpdatedMsg({issueMsg:t.options.issueMsg,issueId:e,issueKey:i})},GH.EpicView.renderNewEpics=function(e){var i=AJS.$("#ghx-epic-column");_.each(e,function(e){var t=i.find('.ghx-classification-item[data-epic-key="'+e.issueKey+'"]');t.hasClass("ghx-open")||GH.EpicView.toggleEpicDisplayByElement(t),GH.RapidBoard.Animation.animateHeight(t,0,200,GH.RapidBoard.Animation.LONG_DURATION)})},GH.EpicView._reloadDetailsView=function(e){if(GH.Features.EDITABLE_DETAIL_VIEW_ENABLED.isEnabled()){var i=require("jira-agile/rapid/ui/detail/inlineedit/details-view-reload-reason");e.reloadDetailView(i.VERSION_PANEL_CHANGED)}else e.reloadDetailView()}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/epic/EpicView.soy' */
// This file was automatically generated from EpicView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.epic.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.epic == 'undefined') { GH.tpl.epic = {}; }


GH.tpl.epic.renderShell = function(opt_data, opt_ignored) {
  return '' + GH.tpl.epic.renderEpicPanel(opt_data);
};
if (goog.DEBUG) {
  GH.tpl.epic.renderShell.soyTemplateName = 'GH.tpl.epic.renderShell';
}


GH.tpl.epic.renderEpicPanel = function(opt_data, opt_ignored) {
  return '<div class="ghx-classification-group"><div class="ghx-classification-header"><div class="ghx-actions">' + ((opt_data.canCreateIssue) ? aui.buttons.button({extraClasses: ['aui-button-link', 'js-create-epic'], text: "Create epic"}) + '<span class="ghx-divider">|</span>' : '') + '<div class="ghx-close js-epic-toggle" title="' + soy.$$escapeHtml("Hide epics panel") + '"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-remove-label"></span></div></div><h2>' + soy.$$escapeHtml("Epics") + '</h2></div><div class="ghx-classification-scrollview"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.epic.renderEpicPanel.soyTemplateName = 'GH.tpl.epic.renderEpicPanel';
}


GH.tpl.epic.renderEpics = function(opt_data, opt_ignored) {
  var output = GH.tpl.epic.renderAllEpics(opt_data) + '<div class="ghx-classification-cards">';
  var epicKeyList22 = opt_data.epicKeys;
  var epicKeyListLen22 = epicKeyList22.length;
  for (var epicKeyIndex22 = 0; epicKeyIndex22 < epicKeyListLen22; epicKeyIndex22++) {
    var epicKeyData22 = epicKeyList22[epicKeyIndex22];
    output += GH.tpl.epic.renderEpic({issue: opt_data.epics[epicKeyData22], isEpicExpanded: opt_data.isEpicExpandedByKey[epicKeyData22], isEpicSelected: opt_data.selectedEpicKey == epicKeyData22, canEditEpics: opt_data.canEditEpics, canMarkAsDone: opt_data.canMarkAsDone, canCreateIssue: opt_data.canCreateIssue, colors: opt_data.colors, showPages: opt_data.showPages, showEstimates: opt_data.showEstimates});
  }
  output += '</div>' + ((opt_data.epicKeys.length > 0) ? GH.tpl.epic.renderEpicPending(opt_data) : '');
  return output;
};
if (goog.DEBUG) {
  GH.tpl.epic.renderEpics.soyTemplateName = 'GH.tpl.epic.renderEpics';
}


GH.tpl.epic.renderEpic = function(opt_data, opt_ignored) {
  return '<div class="js-sortable ghx-classification-item' + ((opt_data.isEpicExpanded) ? ' ghx-open' : ' ghx-closed') + ((opt_data.isEpicSelected) ? ' ghx-selected' : '') + '" data-epic-key="' + soy.$$escapeHtml(opt_data.issue.key) + '" data-epic-id="' + soy.$$escapeHtml(opt_data.issue.id) + '" ><div class="ghx-inner"><div class="ghx-expander js-epic-details-toggle" title="' + soy.$$escapeHtml("Hide/show epic information") + '"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-expanded"></span></div><div class="ghx-header"><h3 class="ghx-name"><span class="js-epic-name" role="button">' + GH.tpl.inlineeditfield.renderRemoteTriggeredTextView({fieldName: 'epicLabel', fieldValue: opt_data.issue.originalEpicLabel, displayValue: opt_data.issue.epicLabel}) + '</span><span id="dd-trigger-' + soy.$$escapeHtml(opt_data.issue.key) + '" class="ghx-swatch js-epic-actions ' + soy.$$escapeHtml(opt_data.issue.epicColor) + '"></span></h3><div id="dd-content-' + soy.$$escapeHtml(opt_data.issue.key) + '" class="aui-list ghx-href-fix-list js-epic-actions-list" data-epic-key="' + soy.$$escapeHtml(opt_data.issue.key) + '" data-epic-id="' + soy.$$escapeHtml(opt_data.issue.id) + '">' + ((opt_data.canEditEpics) ? '<h5>' + soy.$$escapeHtml("Colour") + '</h5><ul class="aui-list-section aui-first"><li class="aui-list-item ghx-epic-palette">' + GH.tpl.epic.renderEpicPalette(opt_data) + '</li></ul>' : '') + '<ul class="aui-list-section aui-last">' + ((opt_data.canEditEpics) ? '<li class="aui-list-item"><a role="button" class="aui-list-item-link js-edit-epic-label">' + soy.$$escapeHtml("Edit name") + '</a></li>' : '') + '<li class="aui-list-item">' + GH.tpl.epic.renderEpicIssueLink({issueKey: opt_data.issue.key}) + '</li>' + ((opt_data.canEditEpics && opt_data.canMarkAsDone) ? '<li class="aui-list-item"><a role="button" class="aui-list-item-link js-mark-epic-done">' + soy.$$escapeHtml("Mark as Done") + '</a></li>' : '') + '</ul></div></div><div class="ghx-expanded"><div class="ghx-summary"><a role="button" class="js-epic-key-link" title="' + soy.$$escapeHtml("View epic details") + '" href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(opt_data.issue.key) + '">' + soy.$$escapeHtml(opt_data.issue.key) + '</a> ' + soy.$$escapeHtml(opt_data.issue.summary) + '</div><div class="aui-group js-epic-issues-count"><div class="aui-item">' + soy.$$escapeHtml("Issues") + '</div><div class="aui-item">' + aui.badges.badge({text: opt_data.issue.epicStats.totalIssueCount}) + '</div></div><div class="aui-group"><div class="aui-item">' + soy.$$escapeHtml("Completed") + '</div><div class="aui-item">' + aui.badges.badge({text: opt_data.issue.epicStats.done}) + '</div></div>' + ((opt_data.showEstimates) ? ((! opt_data.issue.isIssueCountStatistic) ? '<div class="aui-group ghx-estimates"><div class="aui-item">' + soy.$$escapeHtml("Unestimated") + '</div><div class="aui-item">' + aui.badges.badge({text: opt_data.issue.epicStats.notEstimated}) + '</div></div>' : '') + '<div class="aui-group ghx-estimates"><div class="aui-item">' + soy.$$escapeHtml("Estimate") + '</div><div class="aui-item">' + aui.badges.badge({extraAttributes: {title: opt_data.issue.epicStats.estimateStatisticName}, text: opt_data.issue.epicStats.estimateTotal}) + '</div></div>' : '') + '<div class="aui-group">' + ((opt_data.canCreateIssue) ? aui.buttons.button({extraAttributes: {title: "Create and assign an issue to this epic"}, extraClasses: ['aui-button-link', 'js-create-epic-issue'], text: "Create issue in epic"}) : '') + ((opt_data.showPages) ? '<div>' + GH.tpl.component.linkedpages.renderTrigger({linkedPagesCount: opt_data.issue.linkedPagesCount, title: "Create and view pages linked to this epic"}) + '</div>' : '') + '</div></div>' + ((opt_data.showEstimates) ? '<div class="ghx-subheader"><ul class="ghx-classification-progress" title="' + soy.$$escapeHtml(AJS.format("{0} ({1} {2} {3} {4})",AJS.format("{0}% of {1} done",opt_data.issue.epicStats.percentageCompleted,opt_data.issue.epicStats.isIssueCountStatistic ? "issues" : "estimated work"),opt_data.issue.epicStats.estimateDone,"of",opt_data.issue.epicStats.estimateTotal,opt_data.issue.epicStats.isIssueCountStatistic ? '' : opt_data.issue.epicStats.estimateStatisticName)) + '" ><li class="ghx-implemented" style="width:' + soy.$$escapeHtml(opt_data.issue.epicStats.percentageCompleted) + '%;"></li></ul></div>' : '') + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.epic.renderEpic.soyTemplateName = 'GH.tpl.epic.renderEpic';
}


GH.tpl.epic.renderAllEpics = function(opt_data, opt_ignored) {
  return '<div class="ghx-classification-item ghx-classification-all ' + ((opt_data.isAllSelected) ? ' ghx-selected' : '') + '"><div class="ghx-inner"><div class="ghx-header"><h3 class="ghx-name"><span class="js-epic-name" role="button">' + soy.$$escapeHtml("All issues") + '</span></h3></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.epic.renderAllEpics.soyTemplateName = 'GH.tpl.epic.renderAllEpics';
}


GH.tpl.epic.renderEpicPending = function(opt_data, opt_ignored) {
  return '<div class="ghx-classification-item ghx-classification-pending' + ((opt_data.isNoneSelected) ? ' ghx-selected' : '') + '" data-epic-key="none"><div class="ghx-inner"><div class="ghx-header"><h3 class="ghx-name"><span class="js-epic-name" role="button">' + soy.$$escapeHtml("Issues without epics") + '</span></h3></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.epic.renderEpicPending.soyTemplateName = 'GH.tpl.epic.renderEpicPending';
}


GH.tpl.epic.renderEpicIssueLink = function(opt_data, opt_ignored) {
  return '<a role="button" class="aui-list-item-link" href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(opt_data.issueKey) + '">' + soy.$$escapeHtml("View epic details") + '</a>';
};
if (goog.DEBUG) {
  GH.tpl.epic.renderEpicIssueLink.soyTemplateName = 'GH.tpl.epic.renderEpicIssueLink';
}


GH.tpl.epic.renderEpicPalette = function(opt_data, opt_ignored) {
  var output = '<ul class="ghx-swatches">';
  var colorList181 = opt_data.colors;
  var colorListLen181 = colorList181.length;
  for (var colorIndex181 = 0; colorIndex181 < colorListLen181; colorIndex181++) {
    var colorData181 = colorList181[colorIndex181];
    output += '<li class="ghx-swatch js-change-epic-color ' + soy.$$escapeHtml(colorData181) + '" data-color-id="' + soy.$$escapeHtml(colorData181) + '">e</li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.epic.renderEpicPalette.soyTemplateName = 'GH.tpl.epic.renderEpicPalette';
}


GH.tpl.epic.renderMarkEpicAsDoneDialog = function(opt_data, opt_ignored) {
  return ((opt_data.numIncompleteIssues > 0) ? GH.tpl.rapid.notification.renderAuiMessage({type: 'warning', icon: true, messageHtml: true, message: '' + soy.$$escapeHtml(AJS.format("{0,choice,1#1 issue is|1\x3c{0,number} issues are} not yet completed in this epic",opt_data.numIncompleteIssues))}) : '') + '<p>' + soy.$$filterNoAutoescape(AJS.format("The epic {0}{1}{2} will be marked as Done. It will no longer be displayed in the Epics panel of the Backlog, but can be viewed in the {3}Epic Report{4}.",'<b>',opt_data.epicName,'</b>','<a href="' + GH.Ajax.CONTEXT_PATH + '/secure/RapidBoard.jspa?rapidView=' + opt_data.rapidView + '&view=reporting&chart=epicReport&epic=' + opt_data.epicKey + '">','</a>')) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.epic.renderMarkEpicAsDoneDialog.soyTemplateName = 'GH.tpl.epic.renderMarkEpicAsDoneDialog';
}


GH.tpl.epic.getEpicNameString = function(opt_data, opt_ignored) {
  return '' + ((opt_data.epicLabel) ? soy.$$escapeHtml(opt_data.epicLabel) : soy.$$escapeHtml("unlabelled") + '-' + soy.$$escapeHtml(opt_data.epicKey));
};
if (goog.DEBUG) {
  GH.tpl.epic.getEpicNameString.soyTemplateName = 'GH.tpl.epic.getEpicNameString';
}


GH.tpl.epic.getEpicNameStringNoAutoescape = function(opt_data, opt_ignored) {
  return '' + ((opt_data.epicLabel) ? soy.$$filterNoAutoescape(opt_data.epicLabel) : soy.$$escapeHtml("unlabelled") + '-' + soy.$$escapeHtml(opt_data.epicKey));
};
if (goog.DEBUG) {
  GH.tpl.epic.getEpicNameStringNoAutoescape.soyTemplateName = 'GH.tpl.epic.getEpicNameStringNoAutoescape';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/epic/EpicQuickCreate.js' */
GH.EpicQuickCreate={},GH.EpicQuickCreate.quickCreateReset=!0,GH.EpicQuickCreate.createModel=function(){GH.EpicQuickCreate.Model=JIRA.Forms.CreateIssueModel.extend({getActiveFieldIds:function(){var e=this,i=jQuery.Deferred(),t=[],r=[];return r.push("summary"),r.push(GH.EpicConfig.getEpicLabelFieldId()),jQuery.each(r,function(e,i){t.push(i)}),e.getRequiredFields().done(function(e){jQuery.each(e,function(e,i){jQuery.inArray(i.id,t)===-1&&t.push(i.id)}),i.resolve(t)}),i.promise()},getUseConfigurableForm:function(){var e=jQuery.Deferred();return e.resolve(!0),e.promise()},setUseConfigurableForm:function(){}})},GH.EpicQuickCreate.resetQuickCreate=function(){GH.EpicQuickCreate.quickCreateReset||(GH.EpicQuickCreate.quickCreateReset=!0,GH.EpicQuickCreate.storeQuickCreateDefaults(GH.EpicQuickCreate.createFormPreferences))},GH.EpicQuickCreate.rememberQuickCreateDefaults=function(){if(GH.EpicQuickCreate.quickCreateReset){GH.EpicQuickCreate.quickCreateReset=!1;var e=function(e){GH.EpicQuickCreate.createFormPreferences=e};GH.EpicQuickCreate.loadQuickCreateDefaults().done(e)}},GH.EpicQuickCreate.storeQuickCreateDefaults=function(e){return GH.Ajax.put({url:"/userData/quickEditDefaults",data:e})},GH.EpicQuickCreate.loadQuickCreateDefaults=function(){return GH.Ajax.get({url:"/userData/quickEditDefaults"},"quickEditDefaults")},GH.EpicQuickCreate.createCreateEpicForm=function(e){return e=e||{},new JIRA.Forms.Container(function(){e.globalEventNamespaces=e.globalEventNamespaces||["QuickCreateEpic"];var i=AJS.format("Create {0}",GH.EpicConfig.getEpicIssueTypeName()),t=new GH.EpicQuickCreate.Model({projectId:e.pid,issueType:e.issueType}),r=new JIRA.Forms.ConfigurableCreateIssueForm({model:t,title:i,globalEventNamespaces:e.globalEventNamespaces}),a=new JIRA.Forms.UnconfigurableCreateIssueForm({model:t,title:i,globalEventNamespaces:e.globalEventNamespaces});return{globalEventNamespaces:e.globalEventNamespaces,model:t,errorHandler:new JIRA.Forms.CreateIssueError,configurableForm:r,unconfigurableForm:a}})},AJS.$(GH).bind("issueCreated",function(e,i){var t=function(e){GH.UserData.quickCreateDefaultIssueTypeId=e.issueTypeId};GH.EpicQuickCreate.loadQuickCreateDefaults().done(t)}),GH.EpicQuickCreate.createCreateStoryForm=function(){var e=GH.UserData.quickCreateDefaultIssueTypeId;return e===GH.EpicConfig.getEpicIssueTypeId()&&(e=GH.EpicConfig.getStoryIssueTypeId()),JIRA.Forms.createCreateIssueForm({issueType:e})},GH.EpicQuickCreate.registerCreateEpicDialog=function(){if(JIRA&&JIRA.Forms&&JIRA.Forms.CreateIssueModel){GH.EpicQuickCreate.createModel();var e=AJS.$("#ghx-epic-column");e.find(".js-create-epic").each(function(){var e=GH.EpicQuickCreate.createCreateEpicForm({issueType:GH.EpicConfig.getEpicIssueTypeId()}),i=e.asDialog({windowTitle:AJS.format("Create {0}",GH.EpicConfig.getEpicIssueTypeName()),trigger:this,id:"create-epic-issue-dialog"});i.bind("Dialog.show",GH.EpicQuickCreate.rememberQuickCreateDefaults),i.bind("Dialog.hide",GH.EpicQuickCreate.resetQuickCreate)})}else GH.log("Tried to initialise Epic Quick Create but JIRA CreateIssueModel was not loaded")};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/epic/LegacyEpicsInit.js' */
AJS.namespace("GH.EpicController",null,require("jira-agile/rapid/ui/epic/epic-controller"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/RankingModel.js' */
define("jira-agile/rapid/ui/work/ranking-model",["underscore","require","jira-agile/rapid/global-events"],function(e,r,t){"use strict";var n,a={};return t.on("pre-initialization",function(){n=r("jira-agile/rapid/ui/work/grid-data-controller")}),a.orderData={rankable:!1,rankCustomFieldId:void 0},a.setOrderData=function(e){a.orderData=e},a.isRankable=function(){return a.orderData.rankable},a.canUserRank=function(){if(!a.orderData.rankable)return!1;var r=!1;return e.each(a.orderData.canRankPerProject,function(e){r=r||e.canRank}),r},a.canUserRankIssue=function(r){if(!a.isRankable())return!1;var t=r.substr(0,r.indexOf("-")),n=!1;return e.each(a.orderData.canRankPerProject,function(e){e.projectKey==t&&(n=e.canRank)}),n},a.getRankCustomFieldId=function(){return a.isRankable()?a.orderData.rankCustomFieldId:null},a.isRankable=function(){return a.orderData.rankable},a.getFirstRankableIssueKeyInColumn=function(r){var t=n.getModel(),s=t._getIssuePositionAndDataByKey(r);if(s.isSwimlane)return!1;var i=t.getIssuesDataForCell(s.swimlaneId,s.columnId),u=!!s.issue.parentKey,o=e.find(i,function(e){return!u||a.canIssuesBeRankedTogether(e.key,r)});return!!o&&(u?o.key:o.parentKey?o.parentKey:o.key)},a.getLastRankableIssueKeyInColumn=function(r){var t=n.getModel(),s=t._getIssuePositionAndDataByKey(r);if(s.isSwimlane)return!1;var i=t.getIssuesDataForCell(s.swimlaneId,s.columnId),u=!!s.issue.parentKey,o=!1;return e.each(i,function(e){u?a.canIssuesBeRankedTogether(e.key,r)&&(o=e.key):o=e.parentKey?e.parentKey:e.key}),o},a.canIssuesBeRankedTogether=function(e,r){var t=n.getModel(),a=t._getIssuePositionAndDataByKey(e),s=t._getIssuePositionAndDataByKey(r);return!(!a||!s)&&(!a.isSwimlane&&!s.isSwimlane&&(a.swimlaneId==s.swimlaneId&&(a.columnId==s.columnId&&(!a.issue.parentKey&&!s.issue.parentKey||a.issue.parentKey==s.issue.parentKey))))},a.getRankableIssuesRange=function(e,r){if(!a.canIssuesBeRankedTogether(e,r))return[];var t=n.getModel();if(e==r)return[e];var s=t._getIssuePositionAndDataByKey(e),i=t._getIssuePositionAndDataByKey(r);if(s.isSwimlane||i.isSwimlane)return[];var u=[];u.push(e);var o,d,l=t.getIssuesDataForCell(s.swimlaneId,s.columnId),y=s.issueIndex,f=i.issueIndex;if(f>y)for(o=y+1;o<=f;o++)d=l[o],a.canIssuesBeRankedTogether(e,d.key)&&u.push(d.key);else for(o=y-1;o>=f;o--)d=l[o],a.canIssuesBeRankedTogether(e,d.key)&&u.push(d.key);return u},a.getBestFitSelectionAfterRank=function(e){var r=a.getNextIssueAfterSendToBottom(e);return r||(r=a.getPreviousIssueAfterSendToBottom(e)),r},a.getNextIssueAfterSendToBottom=function(r){var t=e.last(r),a=n.getModel(),s=a.getNextIssueKey(t);if(!s)return!1;var i=a.getIssueDataByKey(t),u=a.getIssueDataByKey(s);if(i.parentKey)return s;for(;u.parentKey&&u.parentKey==t;){if(s=a.getNextIssueKey(s),!s)return!1;u=a.getIssueDataByKey(s)}return s},a.getPreviousIssueAfterSendToBottom=function(r){var t=e.first(r),a=n.getModel(),s=a.getPreviousIssueKey(t);if(!s)return!1;var i=a.getIssueDataByKey(t),u=a.getIssueDataByKey(s);if(i.parentKey)return s;for(;u.parentKey;){if(s=a.getPreviousIssueKey(s),!s)return!1;u=a.getIssueDataByKey(s)}return s},a.reorderIssues=function(r,t,s){var i=n.getModel();r=a.getParentAndChildrenKeys(r);var u,o=i.getOrder();if(s)u=e.indexOf(o,s);else if(u=e.indexOf(o,t),u++,a.isRankable())for(;u<o.length;){var d=i.getIssueDataByKey(o[u]);if(!d||d.parentKey!==t)break;u++}var l=o.slice(0,u),y=o.slice(u);l=a.withoutArray(l,r),y=a.withoutArray(y,r);var f=e.flatten([l,r,y]);i.updateOrder(f)},a.getParentAndChildrenKeys=function(r){var t=n.getModel(),a=t.getOrder(),s=[];return e.each(r,function(r){s.push(r);var n=t.getIssueDataByKey(r);if(n&&!n.parentKey){var i=e.indexOf(a,r);if(!(i<0))for(var u=i+1;u<a.length;u++){var o=t.getIssueDataByKey(a[u]);if(o.parentKey!=n.key)break;s.push(o.key)}}}),s},a.withoutArray=function(r,t){var n=r;return e.each(t,function(r){n=e.without(n,r)}),n},a}),AJS.namespace("GH.RankingModel",null,require("jira-agile/rapid/ui/work/ranking-model"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/GridColumnsData.js' */
define("jira-agile/rapid/ui/work/grid-columns-data",["underscore"],function(t){"use strict";var i={};return i.calculateColumnsData=function(t,u,n){var e=u.columns,a=i.computeBusted(e,n),s=i.getColumnIssueMapping(t,e),c={columns:e,columnIssueMapping:s,anyColumnBusted:a};return c},i.getColumnIssueMapping=function(i,u){var n={},e={},a={};return t.each(u,function(i){n[i.id]=[],a[i.id]={visible:0,total:i.statisticsFieldValue||0},t.each(i.statusIds,function(t){e[t]=i.id})}),t.each(i.issues,function(t){var i=e[t.statusId];n[i]&&(n[i].push(t.key),t.columnStatistic&&t.columnStatistic.statFieldValue&&(a[i].visible+=t.columnStatistic.statFieldValue.value))}),t.each(u,function(t){t.stats=a[t.id]}),n},i.computeBusted=function(i,u){if(!u.fieldConfigured)return!1;var n=!1;return t.each(i,function(t){t.minBusted="undefined"!=typeof t.min&&t.min>t.statisticsFieldValue,t.maxBusted="undefined"!=typeof t.max&&t.max<t.statisticsFieldValue,n=n||t.minBusted||t.maxBusted}),n},i.getColumnIdForStatus=function(i,u){var n=t.find(i,function(i){return t.find(i.statusIds,function(t){if(t==u)return!0})});return!!n&&n.id},i}),AJS.namespace("GH.GridColumnsData",null,require("jira-agile/rapid/ui/work/grid-columns-data"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/GridSwimlanesData.js' */
define("jira-agile/rapid/ui/work/grid-swimlanes-data",["underscore"],function(e){"use strict";var a={};return a.calculateSwimlanesData=function(e,s){var i=[];switch(s.swimlaneStrategy){case"parentChild":i=a.calculateParentChildSwimlanes(e,s.parentSwimlanesData);break;case"assignee":i=a.calculateAssigneeSwimlanes(e,!1);break;case"assigneeUnassignedFirst":i=a.calculateAssigneeSwimlanes(e,!0);break;case"custom":i=a.calculateCustomSwimlanes(e,s.customSwimlanesData);break;case"epic":i=a.calculateEpicSwimlanes(e,s.epicSwimlanesData);break;case"project":i=a.calculateProjectSwimlanes(e);break;case"none":default:i=a.calculateNoneSwimlanes(e)}return{type:s.swimlaneStrategy,swimlanes:i,rapidViewId:s.rapidViewId}},a.calculateCustomSwimlanes=function(e,s){var i=e.issues,n=s.swimlanes;return a.calculateSwimlaneIssueKeys(i,n),n},a.calculateSwimlaneIssueKeys=function(a,s){var i;e.each(s,function(s){s.issueKeys=[],e.isEmpty(s.issueIds)||(i||(i={},e.each(a,function(e){i[e.id]=e.key})),e.each(s.issueIds,function(e){s.issueKeys.push(i[e])}))})},a.calculateParentChildSwimlanes=function(a,s){var i={};e.each(a.missingParents,function(e){i[e.id]=e});var n=s.parentIssueIds,t=[],r={};e.each(a.issues,function(e){e.parentId?(t.push(e.parentId),r[e.parentId]||(r[e.parentId]=[]),r[e.parentId].push(e.key)):(t.push(e.id),i[e.id]=e)}),t=e.uniq(t,!0);var u=e.intersection(t,n),c=1,l=[];e.each(u,function(a){var n=r[a]||[],t=i[a],u=e.contains(s.doneCandidates,a),o={id:c++,name:t.key,description:t.summary,defaultSwimlane:!1,parentKey:t.key,query:"",issueKeys:n,avatarUrl:t.typeUrl,parentOutOfSync:u};u&&GH.WorkController.analytics.trigger("movetodonebutton.shown"),l.push(o)});var o=e.filter(t,function(a){return!e.include(n,a)}),p=[];e.each(o,function(e){var a=i[e];p.push(a.key)});var m={id:c++,name:"Other Issues",description:"",defaultSwimlane:!0,query:"",issueKeys:p};return l.push(m),l},a.calculateAssigneeSwimlanes=function(s,i){var n={},t=[];e.each(s.issues,function(e){e.assignee?(n[e.assignee]=n[e.assignee]||[],n[e.assignee].push(e)):t.push(e.key)});var r=1,u=[];if(e.each(n,function(a){var s=a[0].assigneeName,i={id:r++,name:s,lowercaseName:s.toLowerCase(),description:s,defaultSwimlane:!1,query:"",issueKeys:e.map(a,function(e){return e.key})};u.push(i)}),u.sort(a.swimlaneNameComparator),!e.isEmpty(t)){var c={id:r++,name:"Unassigned",description:"",defaultSwimlane:!1,query:"",issueKeys:t};i?u.splice(0,0,c):u.push(c)}return u},a.calculateEpicSwimlanes=function(a,s){var i={},n=[],t={},r=[];e.each(a.issues,function(e){e.epic?(i[e.epic]=i[e.epic]||[],i[e.epic].push(e.key),t[e.key]=e.epic):e.parentKey?r.push(e):e.typeId!==GH.EpicConfig.getEpicIssueTypeId()&&n.push(e.key)}),e.each(r,function(e){var a=t[e.parentKey];a?i[a].push(e.key):n.push(e.key)});var u=[],c=1;if(e.each(s.epics,function(e){var a=GH.EpicConfig.getEpicNameString(s.epicNames[e],e),n={id:c++,name:a,lowercaseName:a.toLowerCase(),description:a,defaultSwimlane:!1,query:"",issueKeys:i[e]||[]};u.push(n)}),!e.isEmpty(n)){var l={id:c++,name:"Issues without epics",description:"",defaultSwimlane:!0,query:"",issueKeys:n};u.push(l)}return u},a.calculateProjectSwimlanes=function(s){var i=[];e.each(s.issues,function(e){i[e.projectId]=i[e.projectId]||[],i[e.projectId].push(e.key)});var n=[],t=1;return e.each(s.projects,function(e){var a={id:t++,name:e.key,lowercaseName:e.key,description:e.name,defaultSwimlane:!1,query:"",avatarUrl:e.avatarUrl,issueKeys:i[e.id]||[]};a.issueKeys.length>0&&n.push(a)}),n.sort(a.swimlaneNameComparator),n},a.calculateNoneSwimlanes=function(a){var s={id:1,name:"None",description:"None",defaultSwimlane:!0,query:"",issueKeys:e.map(a.issues,function(e){return e.key})};return[s]},a.swimlaneNameComparator=function(e,a){return e.lowercaseName.localeCompare(a.lowercaseName)},a}),AJS.namespace("GH.GridSwimlanesData",null,require("jira-agile/rapid/ui/work/grid-swimlanes-data"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/WorkIssueListUtil.js' */
define("jira-agile/rapid/ui/work/issue-list-util",["underscore","jquery"],function(a,r){var e={};return e.calculateGroupData=function(r){var e={fakeParents:{},beginGroups:{},endGroups:{}};return a.each(r,function(a){GH.IssueListUtil._calculateGroupData(e,a)}),e},e._calculateGroupData=function(r,e){var i=null,t=null;a.each(e,function(a){a.parentId?(i?i.parentId!=a.parentId&&(r.endGroups[i.id]=!0,r.beginGroups[a.id]=!0,r.fakeParents[a.id]=!0):(t&&t.id==a.parentId?r.beginGroups[t.id]=!0:r.fakeParents[a.id]=!0,r.beginGroups[a.id]=!0),i=a):i&&(r.endGroups[i.id]=!0,i=null),t=a})},e.buildDisplayIssueKey=function(a,r){if(null==r.availableWidth||!r.approxCharacterWidth)return a;var e="",i=a.split("-"),t=i[0],u=i[1],n=Math.floor(r.availableWidth/r.approxCharacterWidth);if(n<a.length){var l=n-u.length-2;return l<0?e:(t=t.substr(0,l),t+e+"-"+u)}return a},e}),AJS.namespace("GH.IssueListUtil",null,require("jira-agile/rapid/ui/work/issue-list-util"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/BoardHeader.js' */
GH.RapidBoard.BoardHeader={},GH.RapidBoard.BoardHeader.init=function(){GH.RapidBoard.BoardHeader._originalPageTitle=document.title},GH.RapidBoard.BoardHeader.update=function(e){GH.RapidBoard.BoardHeader.updateHeader(e),GH.RapidBoard.BoardHeader.updatePageTitle(e)},GH.RapidBoard.BoardHeader.updateHeader=function(e){if(e.id||e.invalidView){var a=!!e.id,d=a?e.name:"Boards",r=!!a&&e.id;AJS.$("#ghx-view-selector").html(GH.tpl.boardheader.renderBoardHeader({name:d,viewId:r}))}else AJS.$("#ghx-view-selector").html(GH.tpl.boardheader.renderSimpleHeader({name:"No boards are currently available."}))},GH.RapidBoard.BoardHeader.updatePageTitle=function(e){e&&e.name?document.title=e.name+" - "+GH.RapidBoard.BoardHeader._originalPageTitle:document.title=GH.RapidBoard.BoardHeader._originalPageTitle};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/BoardHeader.soy' */
// This file was automatically generated from BoardHeader.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.boardheader.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.boardheader == 'undefined') { GH.tpl.boardheader = {}; }


GH.tpl.boardheader.renderSimpleHeader = function(opt_data, opt_ignored) {
  return '<h2>' + soy.$$escapeHtml(opt_data.name) + '</h2>';
};
if (goog.DEBUG) {
  GH.tpl.boardheader.renderSimpleHeader.soyTemplateName = 'GH.tpl.boardheader.renderSimpleHeader';
}


GH.tpl.boardheader.renderBoardHeader = function(opt_data, opt_ignored) {
  return '<h2 id="ghx-board-name" ' + ((opt_data.viewId) ? 'data-view-id="' + soy.$$escapeHtml(opt_data.viewId) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.name) + '</h2>';
};
if (goog.DEBUG) {
  GH.tpl.boardheader.renderBoardHeader.soyTemplateName = 'GH.tpl.boardheader.renderBoardHeader';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/ViewController.js' */
GH.RapidBoard.ViewController=new GH.Events,function(){var e=require("jira-agile/rapid/analytics-tracker");GH.RapidBoard.ViewController.analytics=new e("gh.assignedWork.tooltip")}(),GH.RapidBoard.ViewController.hasSideBar=!1,GH.RapidBoard.ViewController.hasSubnavigator=!1,GH.RapidBoard.ViewController.shouldShowSubnavigator=function(){return GH.RapidBoard.ViewController.hasSideBar&&GH.RapidBoard.ViewController.hasSubnavigator},GH.RapidBoard.ViewController.init=function(){function e(e){var o=e.$tip,r=o.children(".tipsy-inner").get(0);r.scrollHeight>r.clientHeight&&o.addClass("ghx-extra-field-tipsy-truncated")}GH.RapidBoard.ViewController.hasSideBar=AJS.sidebar&&AJS.Meta.get("sidebar-enabled"),GH.RapidBoard.ViewController.hasSubnavigator=JIRA.Projects&&"function"==typeof JIRA.Projects.Subnavigator,GH.Dialog.registerDialog(".js-view-find",GH.Dialog.FindView.openFindExistingViewDialog),AJS.$("#ghx-rabid,#ghx-view-modes,#ghx-notify").css({display:"none"}),AJS.$("#ghx-operations").append(GH.tpl.viewcontroller.renderOperationsBar()),GH.Tooltip.tipsify({selector:".ghx-avatar-img[data-tooltip]",context:document,html:!0,className:"ghx-tipsy-left ghx-avatar-tipsy"}).on("show",function(e){e.$element.closest(".ghx-assigned-work-stats").length&&GH.RapidBoard.ViewController.analytics.trigger("show")});var o=GH.Tooltip.tipsify({selector:".js-issue:not(.ui-sortable-helper) .ghx-extra-field",context:document,html:!0,className:"ghx-extra-field-tipsy ghx-tipsy-left"});if(o.on("show",e),GH.RapidBoard.ViewController.sidebarController=new GH.RapidBoard.SidebarController,GH.RapidBoard.ViewController.initModes(GH.RapidBoard.ViewController.hasSideBar),AJS.$(GH).bind(GH.RapidBoard.UrlState.HISTORY_CHANGED,GH.RapidBoard.ViewController.updateModeUrls),GH.IssueOperationShortcuts.init(),GH.DetailsView.init(),GH.PresentationMode.init(),GH.RapidBoard.State.isKanbanBoard()){var r=require("jira-agile/rapid/ui/kanplan/kanplan-acknowledge");r.init()}AJS.$(GH).bind(GH.Layout.EVENT_DELAYED_RESIZE,GH.RapidBoard.ViewController.handleResizeEvent),AJS.$(document).on("aui-message-close",GH.RapidBoard.ViewController.handleResizeEvent),AJS.$(window).on("confluence.header-resized",GH.RapidBoard.ViewController.handleResizeEvent),GH.RapidBoard.ViewController.handleResizeEvent(),AJS.$(document).on("click",".manage-sprint-permission-help",function(e){e.preventDefault(),window.open({"url":"https://docs.atlassian.com/jira/jadm-docs-075/Managing+project+permissions","isLocal":false}.url,"_blank")})},GH.RapidBoard.ViewController.initModes=function(e){e?(GH.RapidBoard.ViewController.sidebarController.interceptSidebarItems(),GH.RapidBoard.ViewController.sidebarController.reactToSidebarSizeChange()):(AJS.$("#ghx-view-modes").html(GH.tpl.viewcontroller.renderModes()),GH.Tooltip.tipsify({selector:"#plan-toggle"}),GH.Tooltip.tipsify({selector:"#work-toggle"}),GH.Tooltip.tipsify({selector:"#report-toggle"}),AJS.$("#plan-toggle,#work-toggle,#report-toggle").bind("click",function(e){if(GH.MouseUtils.openInSameTab(e)&&(e.preventDefault(),!AJS.$(this).is(":disabled")&&!AJS.$(this).hasClass("active"))){var o=AJS.$(this).attr("id"),r=o.substring(0,o.length-"-toggle".length);GH.RapidBoard.ViewController.setMode(r)}}))},GH.RapidBoard.ViewController.update=function(e){GH.SprintRetrospectiveView.clearDialog(),e.invalidView?(GH.RapidBoard.ViewController.showInvalidViewError(),AJS.$("#ghx-rabid,#ghx-view-modes").css({display:"none"}),AJS.$("#ghx-notify").css({display:""})):e.id?(GH.RapidBoard.ViewController.showRapidView(e),AJS.$("#ghx-rabid,#ghx-view-modes").css({display:""}),AJS.$("#ghx-notify").css({display:"none"}).empty()):(GH.RapidBoard.ViewController.welcome(),AJS.$("#ghx-rabid,#ghx-view-modes").css({display:"none"}),AJS.$("#ghx-notify").css({display:""}))},GH.RapidBoard.ViewController.showInvalidViewError=function(){var e=[{message:"The requested board cannot be viewed because it either does not exist or you do not have permission to view it."}];GH.UserData.hasUser()?e.push({message:AJS.format("Select an existing board from the board dropdown, {0}search for an existing board{1} or {2}create a new board{3}.",'<a class="js-view-find">',"</a>",'<a class="js-view-action-create">',"</a>")}):e.push({message:AJS.format("This board may be visible if you {0}log in{1}.",'<a href="'+GH.Navigation.getLoginUrl()+'">',"</a>")}),AJS.$("#ghx-notify").html(GH.tpl.viewcontroller.renderErrors({errors:e}))},GH.RapidBoard.ViewController.welcome=function(){GH.UserData.hasUser()?AJS.$("#ghx-notify").html(GH.tpl.board.x.renderNoViews({})):AJS.$("#ghx-notify").html(GH.tpl.board.x.renderNoViewsAnonymous({loginUrl:GH.Navigation.getLoginUrl()}))},GH.RapidBoard.ViewController.showRapidView=function(e){AJS.$("#ghx-errors").empty(),GH.RapidBoard.ViewController.updateModeUrls(),GH.RapidBoard.ViewController.updateTabSelector(e),GH.PlanController.setRapidView(e),GH.WorkController.setRapidView(e),GH.ReportController.setRapidView(e),GH.RapidBoard.ViewController.setMode(GH.RapidBoard.ViewController.getMode(),!0),GH.PersistentMessages.WelcomeMessage.renderMessage(),GH.PersistentMessages.CreateViewMessage.renderMessage()},GH.RapidBoard.ViewController.validModes={plan:!0,work:!0,report:!0},GH.RapidBoard.ViewController.displayedMode=void 0,GH.RapidBoard.ViewController.updateTabSelector=function(e){var o=e.sprintSupportEnabled,r=GH.RapidBoard.ViewController.getTabLabels(o);AJS.$("#plan-toggle").attr({"data-tooltip":r.plan.tooltip,disabled:!o}).text(r.plan.label),AJS.$("#work-toggle").attr({"data-tooltip":r.work.tooltip}).text(r.work.label)},GH.RapidBoard.ViewController.getTabLabels=function(e){return{plan:{label:e?"Backlog":"Backlog",tooltip:e?"Backlog ( 1 )":"The Backlog is not currently available on Kanban boards"},work:{label:e?"Active sprints":"Kanban board",tooltip:e?"Active sprints ( 2 )":"Kanban Board ( 2 )"}}},GH.RapidBoard.ViewController.getMode=function(){return GH.RapidBoard.State.getMode()},GH.RapidBoard.ViewController.setMode=function(e,o){if(o=!!o,GH.SprintRetrospectiveView.clearDialog(),GH.RapidBoard.ViewController.validModes[e]&&GH.RapidBoard.ViewController.displayedMode!==e){switch(GH.RapidBoard.ViewController.trigger("before:navigate",{mode:e}),GH.RapidBoard.State.setMode(e),GH.RapidBoard.ViewController.updateSelector(),GH.Notification.clearBoardUpdatedMessage(),GH.LinkedPagesController.hideCurrentDialog(),GH.RapidBoard.ViewController.hasSideBar&&(GH.RapidBoard.ViewController.sidebarController.setSidebarState(e),o||GH.RapidBoard.ViewController.sidebarController.updateBadges()),e){case"plan":GH.PlanController.init(),GH.WorkController.hide(),GH.ReportController.hide(),AJS.$("#ghx-work,#ghx-controls-work,.ghx-sprint-meta").hide(),AJS.$("#ghx-report,#ghx-controls-report").hide(),AJS.$("#ghx-plan,#ghx-controls-plan").show(),GH.PlanController.show();break;case"report":GH.ReportController.init(),GH.PlanController.hide(),GH.WorkController.hide(),AJS.$("#ghx-plan,#ghx-controls-plan").hide(),AJS.$("#ghx-work,#ghx-controls-work,.ghx-sprint-meta").hide(),AJS.$("#ghx-report,#ghx-controls-report").show(),GH.ReportController.show();break;case"work":default:GH.WorkController.init(),GH.PlanController.hide(),GH.ReportController.hide(),AJS.$("#ghx-plan,#ghx-controls-plan").hide(),AJS.$("#ghx-report,#ghx-controls-report").hide(),AJS.$("#ghx-work,#ghx-controls-work,.ghx-sprint-meta").show(),GH.WorkController.show()}o?GH.RapidBoard.State.replaceState():GH.RapidBoard.State.pushState()}},GH.RapidBoard.ViewController.preload=function(e){switch(GH.RapidBoard.ViewController.getMode()){case GH.RapidBoard.State.VIEW_MODE.PLAN:break;case GH.RapidBoard.State.VIEW_MODE.REPORT:break;default:GH.WorkController.preload(e)}},GH.RapidBoard.ViewController.updateSelector=function(){AJS.$(".js-mode-selector .aui-button").removeClass("active");var e=GH.RapidBoard.State.getMode();AJS.$("#"+e+"-toggle").addClass("active")},GH.RapidBoard.ViewController.viewByMode={work:"detail",plan:"planning",report:"reporting"},GH.RapidBoard.ViewController.updateModeUrls=function(){var e=GH.RapidBoard.State.getRapidViewId();_.forEach(GH.RapidBoard.ViewController.validModes,function(o,r){var a=GH.RapidBoard.getRapidBoardPageUrl(e,GH.RapidBoard.ViewController.viewByMode[r]);AJS.$("#"+r+"-toggle").attr("href",a)})},GH.RapidBoard.ViewController.updateContentContainer=function(){GH.RapidBoard.ViewController.handleResizeEvent()},GH.RapidBoard.ViewController.handleResizeEvent=function(){GH.RapidBoard.ViewController.updateContentAreaHeight(),GH.PlanView.updateFixedElementPositioning(),GH.WorkView.updateFixedElementPositioning(),GH.RapidBoard.ViewController.hasSideBar&&AJS.sidebar(".aui-sidebar").reflow(),GH.BacklogView.adjustStickyHeader()},GH.RapidBoard.ViewController.updateContentAreaHeight=function(){var e=GH.RapidBoard.ViewController.contentContainers();if(e.size()){var o=GH.Layout.getWindowHeight()-2,r=e.offset();r&&r.top&&(o-=r.top),e.css({height:o})}},GH.RapidBoard.ViewController.contentContainers=function(){var e=AJS.$("#ghx-work, #ghx-plan, #ghx-report, #ghx-plan-group");return e.filter(function(){return"none"!==this.style.display})},GH.RapidBoard.ViewController.collectPrintablePlanIssues=function(){return GH.PlanController.collectPrintableIssues()},GH.RapidBoard.ViewController.collectPrintableWorkIssues=function(){return GH.WorkController.collectPrintableIssues()};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/SidebarController.js' */
GH.RapidBoard.SidebarController=function(r,e){"use strict";function a(){}function o(r){return r.find("a.aui-nav-item").attr("href").indexOf("RapidBoard.jspa")>-1}function i(r,e){switch(r){case"plan":case"work":return!0;case"report":return o(e);default:return!1}}function n(){return JIRA.API&&JIRA.API.getSidebar}function p(){return JIRA.Projects&&JIRA.Projects.Sidebar&&JIRA.Projects.Sidebar.FeatureDiscovery}var t={"com.pyxis.greenhopper.jira:project-sidebar-work-scrum":"work","com.pyxis.greenhopper.jira:project-sidebar-work-kanban":"work","com.pyxis.greenhopper.jira:global-sidebar-work-scrum":"work","com.pyxis.greenhopper.jira:global-sidebar-work-kanban":"work","com.pyxis.greenhopper.jira:project-sidebar-plan-scrum":"plan","com.pyxis.greenhopper.jira:project-sidebar-plan-kanban":"plan","com.pyxis.greenhopper.jira:global-sidebar-plan-scrum":"plan","com.pyxis.greenhopper.jira:global-sidebar-plan-kanban":"plan","com.pyxis.greenhopper.jira:global-sidebar-report":"report","com.atlassian.jira.jira-projects-plugin:report-page":"report"},s={plan:["com.pyxis.greenhopper.jira:project-sidebar-plan-scrum","com.pyxis.greenhopper.jira:global-sidebar-plan-scrum","com.pyxis.greenhopper.jira:project-sidebar-plan-kanban","com.pyxis.greenhopper.jira:global-sidebar-plan-kanban"],work:["com.pyxis.greenhopper.jira:project-sidebar-work-scrum","com.pyxis.greenhopper.jira:project-sidebar-work-kanban","com.pyxis.greenhopper.jira:global-sidebar-work-scrum","com.pyxis.greenhopper.jira:global-sidebar-work-kanban"],report:["com.atlassian.jira.jira-projects-plugin:report-page","com.pyxis.greenhopper.jira:global-sidebar-report"]};return a.prototype={constructor:a,interceptSidebarItems:function(){n()&&JIRA.API.getSidebar().done(function(r){var a=r.getGroup("sidebar-navigation-panel");a&&a.on("before:navigate",function(r){var a=t[r.emitter.id];i(a,r.emitter.$el)&&(e.setMode(a),r.preventDefault())})})},setSidebarState:function(e){n()&&JIRA.API.getSidebar().done(function(a){var o=a.getGroup("sidebar-navigation-panel");if(o){var i=s[e];i&&r.any(i,function(r){var e=o.getItem(r);if(e)return e.select(),!0})}})},reactToSidebarSizeChange:function(){n()&&JIRA.API.getSidebar().done(function(r){var e=r.getAUISidebar();e.on("collapse-end expand-end",function(){GH.Layout.fireDelayedWindowResize()})})},updateBadges:function(){n()&&p()&&JIRA.API.getSidebar().done(function(){JIRA.Projects.Sidebar.FeatureDiscovery.updateBadges()})}},a}(_,GH.RapidBoard.ViewController);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/ViewController.soy' */
// This file was automatically generated from ViewController.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.viewcontroller.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.viewcontroller == 'undefined') { GH.tpl.viewcontroller = {}; }


GH.tpl.viewcontroller.renderModes = function(opt_data, opt_ignored) {
  return '' + aui.buttons.buttons({id: 'ghx-modes', extraClasses: ['ghx-modes', 'js-mode-selector'], content: '' + aui.buttons.button({id: 'plan-toggle', tagName: 'a', text: "Backlog", extraAttributes: {'data-tooltip': "Backlog ( 1 )"}}) + aui.buttons.button({id: 'work-toggle', tagName: 'a', text: "Active sprints", extraAttributes: {'data-tooltip': "Active sprints ( 2 )"}}) + aui.buttons.button({id: 'report-toggle', tagName: 'a', text: "Reports", extraAttributes: {'data-tooltip': "Reports ( 3 )"}})});
};
if (goog.DEBUG) {
  GH.tpl.viewcontroller.renderModes.soyTemplateName = 'GH.tpl.viewcontroller.renderModes';
}


GH.tpl.viewcontroller.renderOperationsBar = function(opt_data, opt_ignored) {
  return '<div id="ghx-controls"><div id="ghx-controls-plan" class="ghx-controls-plan ghx-controls-list"></div><div id="ghx-controls-work" class="ghx-controls-work ghx-controls-list"></div><div id="ghx-controls-report" class="ghx-controls-report"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.viewcontroller.renderOperationsBar.soyTemplateName = 'GH.tpl.viewcontroller.renderOperationsBar';
}


GH.tpl.viewcontroller.renderErrors = function(opt_data, opt_ignored) {
  var output = '<div class="aui-message error"><p class="title"><span class="aui-icon icon-error"></span><strong>' + soy.$$escapeHtml("There was an error loading this page") + '</strong></p><ul>';
  var errorList28 = opt_data.errors;
  var errorListLen28 = errorList28.length;
  for (var errorIndex28 = 0; errorIndex28 < errorListLen28; errorIndex28++) {
    var errorData28 = errorList28[errorIndex28];
    output += '<li>' + soy.$$filterNoAutoescape(errorData28.message) + '</li>';
  }
  output += '</ul></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.viewcontroller.renderErrors.soyTemplateName = 'GH.tpl.viewcontroller.renderErrors';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/GridDataModel.js' */
define("jira-agile/rapid/ui/work/grid-data-model",["jira-agile/rapid/logger","underscore","jira-agile/rapid/ui/component/extra-fields/ExtraFieldsHelper","jira-agile/rapid/ui/work/issue-list-util"],function(e,t,i,n){"use strict";var s=function(e,t,i,n,s,r,a,o){var u=this.data={};u.columns=e,u.columnIssueMapping=t,u.swimlanes=i,u.swimlaneIssueMapping=n,u.issues=s,u.order=r,u.variables=a,u.swimlaneStrategy=o,this.buildCache(),this.preprocessIssues()};return s.prototype.isModelDifferent=function(i){return t.isEqual(this.data.order,i.data.order)?t.isEqual(this.data.issues,i.data.issues)?t.isEqual(this.data.swimlaneIssueMapping,i.data.swimlaneIssueMapping)?t.isEqual(this.data.columnIssueMapping,i.data.columnIssueMapping)?(e.log("GridDataModel comparison: Everything is equal"),!1):(e.log("GridDataModel comparison: The columns differ"),!0):(e.log("GridDataModel comparison: The swimlanes differ"),!0):(e.log("GridDataModel comparison: The issues details differ"),!0):(e.log("GridDataModel comparison: The order differs"),!0)},s.prototype.buildCache=function(){var e=this.data,i=this.cache={};i.bySwimlaneThenColumn=[];var n=this;t.each(e.swimlanes,function(s){var r=e.swimlaneIssueMapping[s.id];i.bySwimlaneThenColumn[s.id]=[],t.each(e.columns,function(t){var a=e.columnIssueMapping[t.id],o=n.fastIntersect(a,r);o=n.fastIntersect(e.order,o),i.bySwimlaneThenColumn[s.id][t.id]=o})})},s.prototype.fastIntersect=function(e,t){for(var i=e.length,n=t.length,s=e.slice(0).sort(),r=t.slice(0).sort(),a=[],o=0,u=0;o<i&&u<n;){var l=s[o],d=r.indexOf(l,u);d>-1&&(a.push(l),u=d+1),o++}for(var p=[],m=0;m<i;m++)a.indexOf(e[m])>-1&&p.push(e[m]);return p},s.prototype.preprocessIssues=function(){var e=this;t.each(this.data.issues,function(t){e.preprocessIssue(t)})},s.prototype.preprocessIssue=function(e){this.computeTimeInColumnForIssue(e),i.prepareExtraFields(e.extraFields)},s.prototype.computeTimeInColumnForIssue=function(e){var t=864e5;e.timeInColumn&&(e.timeInColumn.days=Math.floor((e.timeInColumn.durationPreviously+(new Date).getTime()-e.timeInColumn.enteredStatus)/t))},s.prototype.updateIssueData=function(e){this.preprocessIssue(e),this.data.issues[e.key]=e},s.prototype.updateOrder=function(e){this.data.order=e,this.buildCache()},s.prototype.getGroupData=function(){var e=[],i=this;t.each(i.data.swimlanes,function(n){t.each(i.data.columns,function(t){e.push(i.getIssuesDataForCell(n.id,t.id))})});var s=n.calculateGroupData(e);return s.drawFakeParents=!this.isParentChildStrategy(),s},s.prototype.getIssuesDataForCell=function(e,t){var i=this.cache.bySwimlaneThenColumn[e];if(!i)return!1;var n=i[t];return!!n&&this.getIssueDataByKeys(n)},s.prototype.getIssueDataByKeys=function(e){var i=[],n=this.data.issues;return t.each(e,function(e){var t=n[e];t&&i.push(t)}),i},s.prototype.getCells=function(){return this.cache.bySwimlaneThenColumn},s.prototype.getIssues=function(){return this.data.issues},s.prototype.getColumns=function(){return this.data.columns},s.prototype.getSwimlanes=function(){return this.data.swimlanes},s.prototype.getOrder=function(){return this.data.order},s.prototype.getSwimlaneById=function(e){return t.find(this.data.swimlanes,function(t){return t.id==e})},s.prototype.getColumnById=function(e){return t.find(this.data.columns,function(t){return t.id==e})},s.prototype.getFirstColumn=function(){return t.first(this.data.columns)},s.prototype.getSwimlaneIdByIssueKey=function(e){var i=!1;return t.each(this.data.swimlaneIssueMapping,function(n,s){t.indexOf(n,e)>-1&&(i=parseInt(s,10))}),i},s.prototype.getColumnIdByIssueKey=function(e){var i=!1;return t.each(this.data.columnIssueMapping,function(n,s){t.indexOf(n,e)>-1&&(i=parseInt(s,10))}),i},s.prototype.getIssueDataByKey=function(e){return this.data.issues[e]},s.prototype.getIssueDataById=function(e){return t.findWhere(this.data.issues,{id:e})},s.prototype.getIssueIdForKey=function(e){var t=this.getIssueDataByKey(e);return!!t&&t.id},s.prototype.isIssueValid=function(e){return!!this.data.issues[e]},s.prototype.hasSwimlanes=function(){var e=this,i=e.isParentChildStrategy();return t.any(e.getSwimlanes(),function(t){return(i||e.getSwimlaneIssueCount(t.id)>0)&&!t.defaultSwimlane})},s.prototype.getSwimlaneIssueCount=function(e){return this.data.swimlaneIssueMapping[e].length},s.prototype.getColumnIssueCount=function(e){return this.data.columnIssueMapping[e].length},s.prototype.isParentChildStrategy=function(){return"parentChild"==this.data.variables.swimlanesType},s.prototype.getParentSwimlaneByIssueKey=function(e){return!!this.isParentChildStrategy()&&(t.find(this.data.swimlanes,function(t){if(t.parentKey==e)return!0})||!1)},s.prototype._getIssuePositionAndDataByKey=function(e){var i=this.data.issues[e];if(!i)return!1;var n=!1;if(this.isParentChildStrategy()&&t.each(this.data.swimlanes,function(t){t.parentKey==e&&(n=t)}),n)return{isSwimlane:!0,swimlaneId:n.id,columnId:t.first(this.getColumns()).id,issueIndex:-1,issue:i};var s=this.getSwimlaneIdByIssueKey(e);if(!s)return!1;var r=this.getColumnIdByIssueKey(e);if(!r)return!1;var a=-1;if(s&&r){var o=this.cache.bySwimlaneThenColumn[s][r];a=t.indexOf(o,e)}return{swimlaneId:s,columnId:r,issueIndex:a,issue:i}},s.prototype.getIssueIndexByKey=function(e){var t=this._getIssuePositionAndDataByKey(e);return!!t&&t.issueIndex},s.prototype.getNextIssueKey=function(e,i){var n=this._getIssuePositionAndDataByKey(e);if(!n)return!1;i&&(n.columnId=i);var s=this,r=s.getCells(),a=!1,o=!1;return t.find(s.getSwimlanes(),function(e){var t;if(e.id==n.swimlaneId)a=!0,t=n.issueIndex+1;else{if(!a)return!1;if(e.parentKey)return o=e.parentKey,!0;t=0}var i=s.hasSwimlanes();return(!i||!GH.RapidBoard.State.isSwimlaneCollapsed(e.id))&&(o=r[e.id][n.columnId][t],!!o)}),o||!1},s.prototype.getPreviousIssueKey=function(e,i){var n=this._getIssuePositionAndDataByKey(e);if(!n)return!1;i&&(n.columnId=i);var s=this,r=s.getCells(),a=!1,o=!1,u=s.getSwimlanes().slice(0).reverse();return t.find(u,function(i){if(i.id!=n.swimlaneId&&!a)return!1;if(a=!0,i.id==n.swimlaneId)return i.parentKey!=e&&(0==n.issueIndex&&i.parentKey?(o=i.parentKey,!0):(o=r[i.id][n.columnId][n.issueIndex-1],!!o));var u=s.hasSwimlanes()&&GH.RapidBoard.State.isSwimlaneCollapsed(i.id);return!u&&r[i.id][n.columnId].length>0?(o=t.last(r[i.id][n.columnId]),!!o):!!i.parentKey&&(o=i.parentKey,!0)}),o||!1},s.prototype.getIssueKeyForColumnAtIndex=function(e,i,n){var s=this.cache.bySwimlaneThenColumn[e][i];return!t.isEmpty(s)&&(n<0?s[0]:n>=s.length?t.last(s):s[n])},s.prototype.getFirstIssueKey=function(){var e=this.getSwimlanes(),i=this.getColumns(),n=this.getCells(),s=this.hasSwimlanes(),r=!1;return t.find(i,function(i){return t.find(e,function(e){if(s&&GH.RapidBoard.State.isSwimlaneCollapsed(e.id))return!1;var a=n[e.id][i.id];return!t.isEmpty(a)&&(r=t.first(a),!0)}),r}),r},s.prototype.getLastIssueKey=function(){var e=this.getSwimlanes().slice().reverse(),i=this.getColumns(),n=this.getCells(),s=this.hasSwimlanes(),r=!1;return t.find(i,function(i){return t.find(e,function(e){if(s&&GH.RapidBoard.State.isSwimlaneCollapsed(e.id))return!1;var a=n[e.id][i.id];return!t.isEmpty(a)&&(r=t.last(a),!0)}),r}),r},s.prototype.getIssueKeyInPreviousColumn=function(e,t){var i=this._getIssuePositionAndDataByKey(e);if(!i)return!1;if(i.isSwimlane)return!1;for(var n=this._getPreviousColumn(i.columnId);n;){var s=this.getIssueKeyForColumnAtIndex(i.swimlaneId,n.id,t);if(s)return s;n=this._getPreviousColumn(n.id)}return!1},s.prototype._getPreviousColumn=function(e){for(var t=this.getColumns(),i=t.length-1;i>0;i--)if(t[i].id==e)return t[i-1];return!1},s.prototype.getIssueKeyInNextColumn=function(e,t){var i=this._getIssuePositionAndDataByKey(e);if(!i)return!1;if(i.isSwimlane)return!1;for(var n=this._getNextColumn(i.columnId);n;){var s=this.getIssueKeyForColumnAtIndex(i.swimlaneId,n.id,t);if(s)return s;n=this._getNextColumn(n.id)}return!1},s.prototype._getNextColumn=function(e){for(var t=this.getColumns(),i=0;i<t.length-1;i++)if(t[i].id==e)return t[i+1];return!1},s.prototype.getIssuePositionByKey=function(e){var t=this._getIssuePositionAndDataByKey(e);if(t)return{swimlaneId:t.swimlaneId,columnId:t.columnId,position:t.issueIndex}},s.prototype.getIssueKeyAtPosition=function(e){if(e&&void 0!==e.swimlaneId&&void 0!==e.columnId&&void 0!==e.position){for(var i,n,s,r,a=this.getSwimlanes(),o=0,u=a.length;o<u;o++)if(a[o].id==e.swimlaneId){i=a[o],o+1<u&&(r=a[o+1]);break}if(i&&(n=this.getColumnById(e.columnId))){var l=this.cache.bySwimlaneThenColumn[e.swimlaneId][e.columnId];return s=l[e.position],s?s:r?this.getIssueKeyAtPosition({swimlaneId:r.id,columnId:e.columnId,position:0}):t.last(l)}}},s.prototype.moveIssueToColumn=function(e,t,i){this.moveIssuesToColumn([e],t,i)},s.prototype.moveIssuesToColumn=function(e,i,n){var s=this.data.columnIssueMapping;return!(!s[i]||!s[n])&&(e.forEach(function(e){s[i]=t.without(s[i],e),s[n].push(e)}),void this.buildCache())},s.prototype.removeEpicFromIssues=function(e){var i=[],n=this.getIssueDataByKeys(e);return t.each(n,function(e){e.epic&&(delete e.epic,i.push(e))}),i},s.prototype.getSwimlaneStrategy=function(){return this.data.swimlaneStrategy},s}),AJS.namespace("GH.GridDataModel",null,require("jira-agile/rapid/ui/work/grid-data-model"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/GridDataController.js' */
define("jira-agile/rapid/ui/work/grid-data-controller",["underscore","jira-agile/rapid/ui/work/grid-data-model","jira-agile/rapid/ui/work/grid-columns-data","jira-agile/rapid/ui/work/grid-swimlanes-data","jira-agile/rapid/ui/work/ranking-model"],function(a,e,s,t,i){"use strict";var n={};return n.model=void 0,n.swimlaneStrategy="custom",n.statistics={},n.canRelease=!1,n.hasDataChanged=function(a){var e=n.calculateGridDataModel(a);return!n.model||n.model.isModelDifferent(e)},n.setData=function(a){n.statistics=a.statistics,n.epics=a.epicData,n.canRelease=a.issuesData.canRelease,i.setOrderData(a.orderData),n.hasBulkChangePermission=a.issuesData.hasBulkChangePermission;var e=n.calculateGridDataModel(a);n.model=e},n.calculateGridDataModel=function(i){var n=t.calculateSwimlanesData(i.issuesData,i.swimlanesData),r=[],u={};a.each(i.issuesData.issues,function(a){r.push(a.key),u[a.key]=a}),a.each(i.issuesData.missingParents,function(a){u[a.key]=a});var l=s.calculateColumnsData(i.issuesData,i.columnsData,i.statistics),o=l.columns,c=l.columnIssueMapping,d={};d.anyColumnBusted=l.anyColumnBusted;var m=[],g={};return a.each(n.swimlanes,function(a){g[a.id]=a.issueKeys,delete a.issueKeys,m.push(a)}),d.swimlanesType=n.type,new e(o,c,m,g,u,r,d,i.swimlanesData.swimlaneStrategy)},n.getStatistics=function(){return n.statistics},n.getEpicsCount=function(){return n.epics.epicsCount},n.getModel=function(){return n.model},n.hasBustedColumns=function(){return n.model.data.variables.anyColumnBusted},n.getSwimlanesType=function(){return n.model.data.variables.swimlanesType},n.collectPrintableIssues=function(){var e=n.getModel(),s=[];return a.each(e.getSwimlanes(),function(t){a.each(e.getColumns(),function(a){var i=e.getCells()[t.id][a.id];i&&s.push.apply(s,i)})}),a.map(s,function(a){return e.getIssues()[a]})},n}),AJS.namespace("GH.GridDataController",null,require("jira-agile/rapid/ui/work/grid-data-controller"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/SwimlaneStalker.js' */
define("jira-agile/rapid/ui/work/swimline-stalker",["jira-agile/rapid/ui/work/grid-data-controller","jira-agile/rapid/ui/work/swimlane-view-text","jquery","underscore"],function(e,t,a,i){"use strict";var r={};return r.init=function(){},r.headerHeight=0,r.poolStalker=function(){var e=a("#ghx-column-header-group");if(e.length>0){var t=a("#ghx-pool"),i=t.offset(),n=t.find(".ghx-columns").width(),l=parseInt(t.css("padding-left"),10),d=e.outerHeight();e.addClass("ghx-fixed").css({position:"fixed",top:i.top,left:i.left+l,width:n}),t.css({"padding-top":d}),r.headerHeight=d,r.registerSwimlaneStalker()}},r.registerSwimlaneStalker=function(){a("#ghx-pool").unbind("scroll.swimlaneStalker").bind("scroll.swimlaneStalker",r.updateSwimlaneHeaderStalker)},r.updateSwimlaneHeaderStalker=function(){var e=a("#js-swimlane-header-stalker"),t=a("#ghx-pool").scrollTop();if(!t)return void e.hide();e.show();var n=a(".ghx-swimlane-header");if(n.length){var l=void 0;if(i.each(n,function(e){return e=a(e),e.position().top<=r.headerHeight&&void(l=e)}),l){var d=l.clone();d.find(".js-expander").remove(),e.empty().append(d)}}},r.updateStalkerContent=function(i){var r=a("#ghx-swimname"),n=e.getModel(),l=n.getSwimlaneById(i),d=n.getSwimlaneIssueCount(i),o=!!l.parentKey&&e.getModel().getIssueDataByKey(l.parentKey);o?(o.done?r.addClass("ghx-done"):r.removeClass("ghx-done"),r.find(".ghx-summary").text(o.summary),r.find(".ghx-type").html('<img height="16" width="16" src="'+o.typeUrl+'">').attr("title",o.typeName)):(r.removeClass("ghx-done"),r.find(".ghx-summary").empty(),r.find(".ghx-type").empty()),r.find(".ghx-name").text(l.name),r.find(".ghx-qty").text(t.getIssueCountLabel(l,d));var s=t.getSwimlaneTitle(l,d);r.find(".ghx-name, .ghx-qty, .ghx-summary").attr("title",s)},r.refreshStalkerContent=function(){var e=a("#ghx-swimname");if(e.visible()){var t=parseInt(e.attr("data-swimlane-id",t),10);r.updateStalkerContent(t)}},r}),AJS.namespace("GH.SwimlaneStalker",null,require("jira-agile/rapid/ui/work/swimline-stalker"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/SwimlaneView.js' */
define("jira-agile/rapid/ui/work/swimlane-view",["jira-agile/rapid/ui/work/ranking-model","jira-agile/rapid/ui/work/grid-data-controller","jira-agile/rapid/user-data","jira-agile/rapid/layout","jira-agile/rapid/ui/work/swimlane-view-text","jira-agile/rapid/ui/work/ActiveSprintEmptyView","jira/util/formatter","jquery","underscore"],function(e,a,t,s,i,l,n,r,d){"use strict";var o={};return o.visible=!1,o.detailViewColumnId=!1,o.rapidViewData={},o.init=function(){GH.SwimlaneStalker.init(),r(document).delegate("#ghx-pool .ghx-swimlane-header .js-expander","click",o.toggleCollapsedHandler),r(document).delegate("#ghx-pool .ghx-swimlane-header .js-expander","keydown",o.toggleCollapsedHandler),r(document).delegate(".js-view-action-expand-all","click",o.expandAll),r(document).delegate(".js-view-action-collapse-all","click",o.collapseAll),r(document).delegate("#ghx-release","click",o.openReleaseVersionDialog),r(GH).bind(GH.Dialogs.ReleaseVersionDialog.EVENT_VERSION_RELEASED,GH.WorkController.reload),r(document).delegate("button.js-sync","click",function(){GH.WorkController.analytics.trigger("movetodonebutton.clicked");var e=r(this).closest(".ghx-swimlane-header").attr("data-issue-key"),t=a.getModel().getIssueDataByKey(e);GH.WorkController.resolveParentTask(t)}),r(document).delegate(".ghx-show-old-link","click",o.handleShowOldDoneIssuesClick)},o.show=function(){o.visible=!0,o.renderSwimlanes()},o.hide=function(){o.visible=!1},o.setRapidView=function(e){o.rapidViewData=e},o.setRapidViewConfig=function(e){o.rapidViewConfig=e},o.renderSwimlanes=function(){var t=r("#ghx-pool");if(!(t.length<1)){GH.SwimlaneStalker.poolStalker(),t.hide();var s=a.getModel(),l=s.hasSwimlanes();l?t.addClass("ghx-has-swimlanes"):t.removeClass("ghx-has-swimlanes");var n=s.isParentChildStrategy();n?t.addClass("ghx-parent-child"):t.removeClass("ghx-parent-child");var g=s.getColumns(),u=[GH.tpl.rapid.swimlane.renderColumnsHeader({columns:g,statistics:a.getStatistics()})],c=o.getCalculatedDisplayIssueKeys(),p=s.getSwimlanes(),m=s.getCells(),w=s.getIssues(),h=s.getGroupData(),S=d.filter(p,function(e){var a=s.getSwimlaneIssueCount(e.id);return n&&!e.defaultSwimlane||a>0});d.each(S,function(a,t){var n=s.getSwimlaneIssueCount(a.id),r=l&&GH.RapidBoard.State.isSwimlaneCollapsed(a.id);u.push(GH.tpl.rapid.swimlane.renderSwimlane({columns:g,swimlane:a,swimlaneStrategy:s.getSwimlaneStrategy(),swimlaneTitle:i.getSwimlaneTitle(a,n),cells:m,issues:w,index:t,collapsed:r,issueCount:n,groupData:h,displayIssueKeys:c,selectedIssueKeys:o.getSelectedKeysMap(),mainSelectedIssue:GH.WorkSelectionController.getSelectedIssueKey(),statLabel:o.getStatisticLabel(),isRankable:e.canUserRank(),showEpic:GH.RapidBoard.State.getEpicShownOnRapidBoard(),isLastSwimlane:t===S.length-1}))}),S.length||u.push(GH.tpl.rapid.swimlane.renderEmptySwimlaneColumns({columns:g})),u.push(GH.tpl.rapid.swimlane.renderEndOfPool({rendered:(new Date).getTime()})),t[0].innerHTML=u.join(""),S.length||o.renderActiveSprintEmptyMsg(t),o.setBusted(t),o.renderReleaseAction(),t.show(),GH.WorkDragAndDrop.initDraggables(t)}},o.renderActiveSprintEmptyMsg=function(e){var a=t.hasUser(),s=o.rapidViewData.sprintSupportEnabled&&!GH.WorkControls.hasSprints(),i=GH.WorkControls.getActiveQuickFilterCount(),n=GH.RapidBoard.State.getRapidViewId(),r=new l(s,i,n,(!1),e);a&&(s||i?GH.WorkController.trigger(GH.WorkController.EVENT_NAMES.ON_RELOAD_EMPTY_STATE_VIEW,!0):GH.RapidViewConfig.fetchConfiguration(n).done(function(e){GH.WorkController.trigger(GH.WorkController.EVENT_NAMES.ON_RELOAD_EMPTY_STATE_VIEW,e.canEdit)})),GH.WorkController.setActiveSprintEmptyMsg(r)},o.rerenderCellOfIssue=function(e){var t=a.getModel().getIssuePositionByKey(e);t&&o.rerenderCell(t.swimlaneId,t.columnId)},o.rerenderCell=function(t,s){var i=r("#ghx-pool").find('.ghx-swimlane[swimlane-id="'+t+'"]').find(".ghx-columns").find('.ghx-column[data-column-id="'+s+'"]'),l=a.getModel(),n={swimlane:l.getSwimlaneById(t),column:l.getColumnById(s),cells:l.getCells(),issues:l.getIssues(),groupData:l.getGroupData(),displayIssueKeys:o.getCalculatedDisplayIssueKeys(),selectedIssueKeys:o.getSelectedKeysMap(),mainSelectedIssue:GH.WorkSelectionController.getSelectedIssueKey(),statLabel:o.getStatisticLabel(),isRankable:e.canUserRank(),showEpic:GH.RapidBoard.State.getEpicShownOnRapidBoard(),isLastSwimlane:i.has(".ghx-show-old")},d=GH.tpl.rapid.swimlane.renderIssueColumn(n),g=r(d);i.replaceWith(g),GH.WorkDragAndDrop.initDraggables(r("#ghx-pool"))},o.getSelectedKeysMap=function(){var e=GH.WorkSelectionController.getSelectedIssueKeys(),a={};return d.each(e,function(e){a[e]=!0}),a},o.renderReleaseAction=function(){if(t.hasUser()&&!o.rapidViewData.sprintSupportEnabled){var e=r("#ghx-column-headers").find(".ghx-column").last();e.prepend(GH.tpl.rapid.swimlane.renderReleaseVersionControl({canRelease:a.canRelease}))}},o.openReleaseVersionDialog=function(e){var a=r(this);if(!a.hasClass("ghx-disabled")){var t=GH.RapidBoard.State.getRapidViewId(),s=a.closest(".ghx-column").attr("data-id");GH.Dialogs.ReleaseVersionDialog.showDialog(t,s)}},o.setBusted=function(e){a.hasBustedColumns()?r(e).addClass("ghx-busted"):r(e).removeClass("ghx-busted")},o.getCalculatedDisplayIssueKeys=function(e){var t=a.getModel(),s=GH.WorkView.getIssueKeyDimensions(),i={};if(e)i[e]=GH.IssueListUtil.buildDisplayIssueKey(e,s);else{var l=t.getIssues();d.each(l,function(e){i[e.key]=GH.IssueListUtil.buildDisplayIssueKey(e.key,s)})}return i},o.rerenderIssue=function(e){var t=a.getModel(),s=t.getIssueDataByKey(e);s&&(o.rerenderIssueCard(s),o.updateSwimlaneHeader(s),o.rerenderFakeParents(s))},o.rerenderFakeParents=function(e){if(!e.parentKey){var a=r('.js-fake-parent[data-issue-key="'+e.key+'"]');if(!(a.length<1)){var t=a.find(".ghx-parent-stub");t.attr("title",e.key+"  "+e.summary);var s=t.find(".ghx-summary");s.text(e.summary)}}},o.rerenderIssueCard=function(e){var a=r('.js-issue[data-issue-key="'+e.key+'"]');if(a.length>0){var t=o.getCalculatedDisplayIssueKeys(e.key),s=r(GH.tpl.rapid.swimlane.renderIssue({issue:e,displayIssueKeys:t,selectedIssueKeys:o.getSelectedKeysMap(),statLabel:o.getStatisticLabel(),showEpic:GH.RapidBoard.State.getEpicShownOnRapidBoard()}));a.replaceWith(s),GH.WorkDragAndDrop.registerSingleCardDraggable(s)}},o.updateSwimlaneHeader=function(e){var t=a.getModel(),s=t.getParentSwimlaneByIssueKey(e.key);s&&(r(".ghx-swimlane").each(function(){var a=r(this);if(a.attr("swimlane-id")==s.id){var l=t.getSwimlaneIssueCount(s.id),n=i.getSwimlaneTitle(s,l),d=GH.tpl.rapid.swimlane.renderSwimlaneHeaderContent({swimlane:s,swimlaneTitle:n,swimlaneStrategy:t.getSwimlaneStrategy(),parent:e,issueCount:l}),o=a.find(".ghx-swimlane-header");o.html(d),e.flagged?o.addClass("ghx-flagged"):o.removeClass("ghx-flagged")}}),GH.SwimlaneStalker.updateSwimlaneHeaderStalker())},o.handleResizeEvent=function(){!o.visible},o.toggleCollapsedHandler=function(e){if("keydown"===e.type){if(13!==e.keyCode&&32!==e.keyCode)return;e.preventDefault()}var a=r(this).closest(".ghx-swimlane"),t=!a.hasClass("ghx-closed"),s=r(e.target).closest(".js-expander");s.attr("aria-expanded",!t),o.setCollapsed(a,t)},o.setCollapsed=function(e,a){var t=parseInt(e.attr("swimlane-id"),10);a?e.addClass("ghx-closed"):e.removeClass("ghx-closed"),o.setCollapsedState(t,a),s.fireDelayedWindowResize()},o.setCollapsedById=function(e,a){r(".ghx-swimlane").each(function(){var t=r(this);t.attr("swimlane-id")==e&&t.hasClass("ghx-closed")!=a&&o.setCollapsed(t,a)})},o.collapseAll=function(e){return(!e||!r(e.target).closest("li").hasClass("disabled"))&&void r(".ghx-swimlane").addClass("ghx-closed").each(function(){o.setCollapsedState(parseInt(r(this).attr("swimlane-id")),!0)})},o.expandAll=function(e){return(!e||!r(e.target).closest("li").hasClass("disabled"))&&void r(".ghx-swimlane").removeClass("ghx-closed").each(function(){o.setCollapsedState(parseInt(r(this).attr("swimlane-id")),!1)})},o.toggleAllSwimlanes=function(){var e=a.getModel();if(!e.hasSwimlanes())return!1;var t=e.getSwimlanes(),s=!0;d.any(t,function(e){if(!GH.RapidBoard.State.isSwimlaneCollapsed(e.id)){var a=!e.issueIds||e.issueIds.length>0;if(a)return s=!1,!0}}),s?o.expandAll():o.collapseAll()},o.ensureSwimlaneExpandedForIssueKey=function(e){var t=a.getModel(),s=t.getSwimlaneIdByIssueKey(e),i=t.hasSwimlanes(),l=i&&GH.RapidBoard.State.isSwimlaneCollapsed(s);return!!l&&(o.setCollapsedById(s,!1),!0)},o.setSwimlaneCollapsedStateForIssueKey=function(e,t){var s=a.getModel(),i=s.getSwimlaneIdByIssueKey(e),l=s.hasSwimlanes(),n=l&&GH.RapidBoard.State.isSwimlaneCollapsed(i);n!=t&&o.setCollapsedState(i,t)},o.setCollapsedState=function(e,a){GH.RapidBoard.State.setSwimlaneCollapsed(e,a)},o.getStatisticLabel=function(){return o.rapidViewConfig.trackingStatistic&&o.rapidViewConfig.trackingStatistic.isEnabled?o.rapidViewConfig.trackingStatistic.name:o.rapidViewConfig.estimationStatistic.name},o.handleShowOldDoneIssuesClick=function(){AJS.trigger("analytics",{name:"gh.workmode.fast.kanban.old.issue.link.click",data:{boardId:GH.RapidBoard.State.data.rapidViewId}})},o}),AJS.namespace("GH.SwimlaneView",null,require("jira-agile/rapid/ui/work/swimlane-view"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/WorkDataLoader.js' */
define("jira-agile/rapid/ui/work/work-data-loader",["jira-agile/rapid/work/work-controls","jira-agile/rapid/ajax","underscore","jira/jquery/deferred","jira-agile/rapid/global-events","require"],function(a,t,e,r,i,n){"use strict";var o,d={};return i.on("pre-initialization",function(){o=n("jira-agile/rapid/ui/work/work-controller")}),d.NEW_DATA_WITH_CHANGES="new data with changes",d.NEW_DATA_NO_CHANGE="new data no change",d.NO_DATA_CHANGE="no data change",d.currentData=void 0,d.loadingData=void 0,d.getData=function(a){return d.getDataForViewId(a).promise},d.markDirty=function(){d.currentData&&(d.currentData.dirty=!0),d.loadingData&&(d.loadingData.dirty=!0)},d.clearEtag=function(){d.currentData&&d.currentData.data&&delete d.currentData.data.etagData.etag},d.getDataForViewId=function(a,t){if(!t&&d.isDataUpToDate(d.currentData,a))return d.currentData;if(d.isDataUpToDate(d.loadingData,a))return d.loadingData;var e=!!d.currentData&&d.currentData.data,i=!!e&&e.etagData.etag,n=d.load(a,i),o=new r;return n.requestPromise.done(function(a){d.loadingData===n&&(d.currentData=d.loadingData,a.etagData.etag===i&&(a=e),d.currentData.data=a,d.loadingData=void 0,o.resolveWith(this,[a]))}),n.requestPromise.fail(o.reject),n.promise=o.promise(),d.loadingData=n,d.loadingData},d.isLoadingData=function(){return d.loadingData&&"pending"===d.loadingData.promise.state()},d.checkForUpdates=function(a){var t=r();if(d.isLoadingData())t.resolveWith(this,["ignore"]);else{var e=d.currentData.data.etagData.etag,i=d.getDataForViewId(a,!0);i.promise.done(function(a){a.etagData.etag===e?t.resolveWith(this,[d.NO_DATA_CHANGE]):o.hasDataChanged(a)?t.resolveWith(this,[d.NEW_DATA_WITH_CHANGES]):t.resolveWith(this,[d.NEW_DATA_NO_CHANGE])})}return t.promise()},d.isDataUpToDate=function(a,t){return!(!a||a.dirty)&&d.areRequestParamsUpToDate(a,t)},d.areRequestParamsUpToDate=function(t,r){var i=a.getActiveQuickFilterIds(),n=a.getActiveSprintIds();return t.viewId===r&&e.isEqual(t.activeQuickFilters,i)&&e.isEqual(t.activeSprints,n)},d.load=function(e,r){var i={};i.viewId=e,i.activeQuickFilters=a.getActiveQuickFilterIds().slice(),i.activeSprints=a.getActiveSprintIds().slice();var n={rapidViewId:e,selectedProjectKey:GH.RapidBoard.projectKey};return r&&(n.etag=r),i.activeQuickFilters&&i.activeQuickFilters.length>0&&(n.activeQuickFilters=i.activeQuickFilters),i.activeSprints&&i.activeSprints.length>0&&(n.activeSprints=i.activeSprints),i.requestPromise=t.get({url:"/xboard/work/allData.json",data:n,deferErrorHandling:!0},"workAllData"),i},d}),AJS.namespace("GH.WorkDataLoader",null,require("jira-agile/rapid/ui/work/work-data-loader"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/WorkController.js' */
define("jira-agile/rapid/ui/work/work-controller",["jira-agile/rapid/ui/work/swimlane-view","jira-agile/rapid/ui/work/ranking-model","jira-agile/rapid/ui/work/grid-data-controller","jira-agile/gh-features","jira-agile/rapid/logger","jira-agile/rapid/ajax","jira-agile/rapid/ui/notification","jira-agile/rapid/ui/plan/sprint-config","jquery","jira/jquery/deferred","jira-agile/rapid/ui/kanplan/KanPlanOnboardingController","underscore","jira/analytics","jira-agile/rapid/global-events","jira-agile/rapid/analytics-tracker","jira/util/formatter","jira/featureflags/feature-manager","require","jira-agile/rapid/ui/work/work-data-loader","jira-agile/rapid/ui/work/ActiveSprintEmptyView","jira-agile/rapid/ui/kanplan/kan-plan-feature-service"],function(e,i,a,t,n,o,r,s,d,l,u,c,p,g,w,f,I,C,k,D,V){"use strict";function S(e){e&&4!==e.readyState&&r.showError("Error","Unable to move issues at this time. Please refresh your browser and try again.")}var h=void 0,G=void 0,E=void 0;g.on("pre-initialization",function(){h=C("jira-agile/rapid/ui/work/work-transition-service"),G=C("jira-agile/rapid/ui/work/work-drag-and-drop")});var H=new GH.Events;return H.analytics=new w("gh.workmode"),H.viewData=void 0,H.currentViewConfig={},H.isVisible=!1,H.CALLBACK_POOL_RENDERED="gh.work.pool.rendered",H.CALLBACK_POOL_LOADED="gh.work.pool.loaded",H.EVENT_NAMES={ON_PLAN_MODE:"OnPlanMode",ON_ALL_FILTERS_CLEARING:"OnAllFiltersClearing",ON_RELOAD_EMPTY_STATE_VIEW:"OnReloadEmptyStateMessage"},H.TRANSITION="transition",H.QUICK_EDIT="quickEdit",H.init=c.once(function(){GH.WorkControls.init(),GH.WorkKBNavigation.init(),GH.WorkView.init(),e.init(),GH.WorkSelectionController.init(),GH.WorkDragAndDrop.init(),d(GH).bind("issueSelected",H.handleIssueSelectionEvent),d(GH.WorkControls.quickfilters).bind("quickFilterChange",H.reload),d(GH.WorkControls.sprintfilters).bind("sprintFilterChange",H.reload),d(GH).bind("issueCreated",H.handleIssueCreatedEvent),d(GH).bind("issueUpdated",H.handleIssueUpdatedEvent),d(GH).bind("issuesRemovedFromSprint",H.handleIssuesRemovedFromSprint),d(GH).bind(GH.Dialogs.ReleaseVersionDialog.EVENT_TIMEOUT,H.reload),u.init()}),H.setRapidView=function(i){H.rapidViewData=i,e.setRapidView(H.rapidViewData)},H.isSprintSupportEnabled=function(){return H.rapidViewData.sprintSupportEnabled},H.show=function(){if(n.log("WorkController.show",n.Contexts.ui),H.rapidViewData)return H.isVisible=!0,GH.WorkView.show(),GH.DetailsView.setRapidViewId(H.rapidViewData.id),H.loadRapidViewConfig()},H.hide=function(){n.log("WorkController.hide",n.Contexts.ui),GH.Poller.removePoller("WorkPoller"),e.hide(),GH.WorkView.hide(),GH.DetailsView.hide(),H.isVisible=!1,k.markDirty(),u.hide()},H.isActive=function(){return H.isVisible},H.loadRapidViewConfig=function(){var e=new l,i=function(i){if(H.isVisible){H.currentViewConfig=i;var a=H.initializeWorkMode();a.done(function(i){e.resolveWith(this),H._sendOnLoadAnalytics(i)}),a.fail(function(){e.rejectWith(this)})}};return GH.RapidViewConfig.fetchConfiguration(H.rapidViewData.id).done(i),e.promise()},H._sendOnLoadAnalytics=function(e){var i=-1,t=a.getModel();if(t){var n={boardId:GH.RapidBoard.State.getRapidViewId(),issuesCount:c.size(t.getIssues())};GH.RapidBoard.State.isKanbanBoard()&&(n.isBacklogEnabled=V.shouldShowKanbanBacklog(),n.epicsPanelEnabled=V.shouldShowEpicsPanel(),t.data&&t.data.columns&&t.data.columns.length>0&&t.data.columns[0].stats&&(n.firstColumnIssueCount=t.data.columns[0].stats.total),n.fastKanbanEnabled=GH.RapidViewConfig.currentData.data.fastKanbanEnabled,n.fastKanbanCutoff=GH.RapidViewConfig.currentData.data.oldDoneIssuesCutoff),n.epicsCount=i,e&&e.epicData&&(n.epicsCount=e.epicData.epicsCount||i),p.send({name:"jira-software."+GH.RapidBoard.State.getBoardType()+".work.view",properties:n})}},H.initializeWorkMode=function(){if(H.currentViewConfig.columns&&!(H.currentViewConfig.columns.length<0))return GH.WorkControls.setRapidViewConfig(H.currentViewConfig),e.setRapidViewConfig(H.currentViewConfig),GH.DetailsView.setRapidViewConfig(H.currentViewConfig),GH.WorkControls.renderControls(),GH.WorkView.hideLoadingFilter(),GH.RapidBoard.ViewController.updateContentContainer(),H.loadPoolData()},H.optimisticallyTransition=function(e,i,t,n,o){var r=GH.RapidBoard.State.getRapidViewId(),s={rapidViewId:r,issueKeys:e,targetColumn:o,selectedTransitionId:i},d=H.submitTransitionAndRank(s);H.moveIssuesTo(e,n,o),d.done(function(){e.forEach(function(e){H.handleIssueUpdatedEvent({},{issueId:a.getModel().getIssueIdForKey(e),source:H.TRANSITION})}),GH.Dialog.createParentCompletedCheckCallback(e[0])()}).fail(S).fail(function(){k.clearEtag(),H.reload()})},H.moveIssuesTo=function(e,i,t){a.getModel().moveIssuesToColumn(e,i,t),GH.WorkView.skipNextDetailViewUpdate(),H.updateUI()},H.submitTransitionAndRank=function(e){return o.put({url:"/xboard/transitionAndRank",data:e})},H.preload=function(e){k.getData(e)},H.reload=function(){if(!H.isVisible){var e=H.rapidViewData.id,i=k.getData(e);return i}return k.markDirty(),r.clearBoardUpdatedMessage(),H.loadPoolData()},H.loadPoolData=function(){GH.WorkView.showLoadingPool();var e=H.rapidViewData.id,i=k.getData(e);return i.done(function(e){H.setPoolData(e)}),i.fail(H.handleInvalidSprint),i.fail(function(){GH.WorkView.hideLoadingPool()}),i},H.handleInvalidSprint=function(e,i,a){var t=e.error&&e.error.errors&&e.error.errors[0]&&e.error.errors[0].message;t&&t==="Sprint does not exist"?GH.WorkControls.sprintfilters.validateActiveSprints():t&&t==="This board has no columns with a mapped status."?H.renderNoMappedColumnsMsg():o.handleGlobalErrors(e,i,a)},H.checkForUpdates=function(e){var i=H.rapidViewData.id;return k.checkForUpdates(i).done(function(i){return n.log("WorkController update check: "+i),i===k.NEW_DATA_WITH_CHANGES?void(e?H.applyLoadedData():H.showBoardUpdatedMessage()):e&&r.isBoardUpdatedMessageVisible()?void H.applyLoadedData():void(i===k.NEW_DATA_NO_CHANGE&&e&&H.reloadDetailView())})},H.showBoardUpdatedMessage=function(){r.showBoardUpdatedMessage().done(function(){H.applyLoadedData()})},H.applyLoadedData=function(){var e=H.rapidViewData.id,i=k.getData(e);i.done(function(e){H.setPoolData(e),r.clearBoardUpdatedMessage()})},H.hasDataChanged=function(e){return a.hasDataChanged(e)},H.setPoolData=function(e){H.isVisible&&(I.isFeatureEnabled(G.OPTIMISTIC_TRANSITIONS_FLAG)&&!h.tooManyProjects&&h.preloadData(e.issuesData.projects),a.setData(e),GH.CallbackManager.executeCallbacks(H.CALLBACK_POOL_LOADED),H.setSprintData(e),e.sprintsData?GH.WorkControls.setSprintData(e.sprintsData.sprints,e.sprintsData.canManageSprints):GH.WorkControls.setSprintData([],!1),H.initializeSelection(),H.ensureSelectionExpanded(),H.updateUI(),GH.CallbackManager.executeCallbacks(H.CALLBACK_POOL_RENDERED),H.trigger("after:render"),GH.Poller.addPoller("WorkPoller",H.checkForUpdates))},H.setSprintData=function(e){H.sprintData=e.sprintsData},H.initializeSelection=function(){GH.WorkKBNavigation.initCurrentPosition(),GH.WorkSelectionController.validateCurrentSelection()},H.ensureSelectionExpanded=function(){var i=GH.WorkSelectionController.getSelectedIssueKey();i&&e.setSwimlaneCollapsedStateForIssueKey(i,!1)},H.updateUI=function(){H.configureUI(),H.renderUI(),GH.WorkView.scrollIssueToView(),d(GH).trigger("workModeUIReady")},H.configureUI=function(){var e=GH.WorkSelectionController.getSelectedIssueKey(),i=H.isDetailsViewOpened();!e&&i&&(H.setDetailViewOpenedState(!1),i=!1),GH.WorkView.configureUI(!!i&&e)},H.renderUI=function(){GH.WorkControls.drawSprints(),GH.WorkView.renderPoolAndDetailView(),GH.WorkView.scrollIssueToView();var e=a.getModel();u.update(e),GH.WorkControls.updateSwimlaneOptions(e.hasSwimlanes()),GH.RapidBoard.ViewController.updateContentContainer()},H.setDetailViewOpenedState=function(e){GH.RapidBoard.State.setWorkViewDetailsViewOpened(e||!1)},H.isDetailsViewOpened=function(){return GH.RapidBoard.State.isDetailsViewOpened()},H.getStatisticField=function(){return H.currentViewConfig.statisticConfig.typeId},H.toggleDetailsView=function(){if(H.isDetailsViewOpened())H.closeDetailsView();else{var e=GH.WorkSelectionController.getSelectedIssueKey();H.openDetailsView(e)}},H.openDetailsView=function(e){if(e){var i=GH.WorkSelectionController.getSelectedIssueKey(),a=!1;i&&i==e||(a=!0,GH.WorkSelectionController.selectIssue(e,{pushState:!1})),H.isDetailsViewOpened()?H.updateDetailViewIssue(e):(a=!0,H.setDetailViewOpenedState(!0),GH.WorkView.openOrCloseDetailView(e)),a&&GH.RapidBoard.State.pushState()}},H.closeDetailsView=function(){GH.DetailsView.hasCurrentError()||H.isDetailsViewOpened()&&(H.setDetailViewOpenedState(!1),GH.RapidBoard.State.pushState(),GH.WorkView.openOrCloseDetailView(!1))},H.reloadDetailView=function(e){H.isDetailsViewOpened()&&GH.DetailsView.reload(e)},H.updateDetailViewIssue=function(e){H.isDetailsViewOpened()&&(GH.DetailsView.setSelectedIssueKey(e),GH.DetailsView.show())},H.toggleEpicsShowOnWorkboard=function(){GH.ViewActions.toggleEpicsShowOnRapidBoard(),H.updateUI()},H.handleIssueSelectionEvent=function(e,i){var a=GH.WorkSelectionController.getSelectedIssueKey();H.isDetailsViewOpened()&&(a?H.updateDetailViewIssue(a):H.closeDetailsView())},H.resolveParentTask=function(e){H.isVisible&&o.get({url:"/xboard/issue/subtasksInFinalColumn.json",data:{issueId:e.id,rapidViewId:H.rapidViewData.id}},"subtaskCompletionCheck").done(function(i){H.loadTransitions(e,i)}).fail(GH.WorkView.hideLoadingPool)},H.loadTransitions=function(e,i){H.isVisible&&i.subtasksInFinalColumn&&o.get({url:"/xboard/issue/transitions.json",data:{issueId:e.id}},"loadTransitions").done(function(i){var t=a.getModel(),n=c.last(t.data.columns);if(n){for(var o=[],r=0;r<i.transitions.length;r++)for(var s=0;s<n.statusIds.length;s++)n.statusIds[s]==i.transitions[r].targetStatus&&o.push(i.transitions[r]);GH.Dialogs.CompleteParentDialog.showDialog(e,o,n)}})},H.handleIssueUpdatedEvent=function(e,i){if(H.isVisible){var o=!1,r=!1;if(n.log(e.type+" from source "+i.source+" handled",n.Contexts.ui),i.fieldChanges){var d=i.fieldChanges[s.getSprintFieldId()];d&&d.original!=d.updated&&(o=!0)}if(i.source!==H.TRANSITION&&i.source!==H.QUICK_EDIT||(k.markDirty(),r=!0),o)H.reload();else{if(H.loadIssue(i.issueId),r)if(t.EDITABLE_DETAIL_VIEW_ENABLED.isEnabled()){var l=a.getModel().getIssueDataById(i.issueId);l&&l.parentId?(E=C("jira-agile/rapid/ui/detail/inlineedit/details-view-reload-reason"),H.reloadDetailView(E.SUBTASKS_CHANGED)):H.reloadDetailView()}else H.reloadDetailView();i.source===H.TRANSITION&&(E||(E=C("jira-agile/rapid/ui/detail/inlineedit/details-view-reload-reason")),H.reloadDetailView(E.DETAILS_FIELD_CHANGED))}}},H.loadIssue=function(i){o.get({url:"/xboard/work/issue.json",data:{rapidViewId:GH.RapidBoard.State.getRapidViewId(),issueId:i}},"loadIssue."+i).done(function(i){var t=a.getModel();t&&(t.updateIssueData(i),GH.WorkDragAndDrop.isIssueBeingDragged(i.key)||e.rerenderIssue(i.key))})},H.handleIssueCreatedEvent=function(e,i){H.isVisible&&setTimeout(function(){H.reloadAndSelectCreatedIssues(i)},0)},H.reloadAndSelectCreatedIssues=function(e){var i=e.issues,a=c.pluck(i,"issueKey"),t=H.reload(),n=o.get({url:"/xboard/issue/matchesBoard",data:{rapidViewId:H.rapidViewData.id,issueIdsOrKeys:a}}).andThen(function(e){return{issuesMatchingBoard:e.issueIdsOrKeys,issuesAddedToBacklog:e.issuesInBacklog,allIssuesMatchBoard:e.issueIdsOrKeys&&e.issueIdsOrKeys.length===a.length,allIssuesAddedToBacklog:e.issuesInBacklog&&e.issuesInBacklog.length===a.length}},function(){return l().resolve(!1)});return d.when(t,n).done(function(i,t){H._issueCreatedCallback(a,e,t)})},H._issueCreatedCallback=function(e,i,t){var n=a.getModel(),o=c.filter(e,n.isIssueValid,n),r=!1;o.length&&(r=c.last(o),GH.WorkSelectionController.selectIssue(r));var s=r&&GH.WorkSelectionController.isInSelection(r);if(!s||t.issuesAddedToBacklog.length){var l=c.extend({},H.sprintData,t);GH.RapidBoard.QuickCreate.showCreatedIssuesMessage(i,l),d(".js-add-new-issue-to-sprint").unbind("click"),d(".js-add-new-issue-to-sprint").click(H.addNewIssueToSprint)}},H.addNewIssueToSprint=function(e){r.clear(),H.analytics.trigger("addtosprintaftercreate");var t=d(e.target),o=t.attr("data-sprint-id"),s=t.attr("data-issue-keys").split(","),l=a.getModel(),u=c.last(l.data.order);GH.RankController.sprintRankIssues(i.getRankCustomFieldId(),s,o,null,u).done(function(e){var i=GH.RankController.getErrorRankResultFromResponse(e);i&&n.log("Rank operation after adding new issues to sprint did not completely succeed.",n.Contexts.callback);var t=H.reload();t.done(function(){l=a.getModel();var e=!1,i=!1;c.each(s,function(a){l.isIssueValid(a)?e=a:i=!0}),e&&GH.WorkSelectionController.selectIssue(e),i&&r.showSuccess(f.format("Your {0,choice,1#issue has|1\u003cissues have} been added to the sprint but {0,choice,1#it is|1\u003cone or more are} not currently visible.",s.length),{timeout:1e4})})})},H.handleIssuesRemovedFromSprint=H.reload,H.changeModeToPlan=function(){GH.RapidBoard.ViewController.setMode("plan")},H.on(H.EVENT_NAMES.ON_PLAN_MODE,H.changeModeToPlan),H.clearAllFiltersAndReload=function(){var e=GH.WorkControls.quickfilters;e&&(e.clearFilters(),GH.RapidBoard.State.pushState()),H.reload()},H.on(H.EVENT_NAMES.ON_ALL_FILTERS_CLEARING,H.clearAllFiltersAndReload),H.renderNoMappedColumnsMsg=function(){var e=d(".ghx-no-active-sprint-message");if(!(e.length>0)){var i=d("#ghx-work");if(!(i.length<1)){var a=GH.RapidBoard.State.getRapidViewId(),t=new D((!1),(!1),a,(!0),i);GH.RapidViewConfig.fetchConfiguration(a).done(function(e){H.trigger(H.EVENT_NAMES.ON_RELOAD_EMPTY_STATE_VIEW,e.canEdit)}),t.handleNoMappedColumnsMode(),H.setActiveSprintEmptyMsg(t)}}},H.handleEmptyMessageInDashboard=function(){c.isUndefined(H.activeSprintEmptyMsg)||H.activeSprintEmptyMsg.handleOnDashboardMode()},H.setActiveSprintEmptyMsg=function(e){H.activeSprintEmptyMsg=e},H.collectPrintableIssues=function(){return{issues:a.collectPrintableIssues(),viewMode:"work",boardType:GH.WorkControls.getBoardType()}},H}),AJS.namespace("GH.WorkController",null,require("jira-agile/rapid/ui/work/work-controller"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ops/JiraBridge.js' */
JIRA.IssueNavigator.getSelectedIssueKey=function(){return GH.IssueOperationShortcuts.getSelectedIssueKey()},JIRA.IssueNavigator.getSelectedIssueId=function(){return GH.IssueOperationShortcuts.getSelectedIssueId()},JIRA.Issue.getIssueId=JIRA.IssueNavigator.getSelectedIssueId,JIRA.Issue.getIssueKey=JIRA.IssueNavigator.getSelectedIssueKey;;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/gh-JiraDialogOverride.js' */
require(["jira/issuenavigator/issue-navigator","underscore","jira/dialog/dialog-register"],function(e,s,i){i.getDefaultAjaxOptions=function(){var s=e.getSelectedIssueId(),i=this.options.url||this.$activeTrigger.attr("href")||this.$activeTrigger.data("url");if(/id=\{0\}/.test(i)){if(!s)return!1;i=i.replace(/(id=\{0\})/,"id="+s)}return{data:{decorator:"dialog",inline:"true"},url:i}},i.storeCurrentIssueIdOnSucessfulSubmit=function(){e.setIssueUpdatedMsg({issueMsg:this.options.issueMsg,issueId:this.issueId,issueKey:this.issueKey}),this.issueId=null,this.issueKey=null,GH.IssueOperationShortcuts.clearOverrideSelectedIssue()}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/gh-IssueActionsDialog.js' */
define("jira-agile/dialog/issue-actions",["jira/ajs/select/queryable-dropdown-select","jira/dialog/dialog","jira/ajs/list/group-descriptor","jira/ajs/list/item-descriptor","jira/ajs/ajax/smart-ajax","jira/focus/set-focus","jquery"],function(t,e,s,n,i,o,a){var r=JIRA.IssueNavigator,u=JIRA.Issue,d=GH.DetailsObjectFactory.getDetailsModel(),c=require("wrm/context-path");return e.extend({_getDefaultOptions:function(){return a.extend(this._super(),{cached:!1,id:"issue-actions-dialog",widthClass:"small"})},_setContent:function(t,s){if(t?this._super(t,s):this._super(a(["<form id='issue-actions-dialog-form' class='aui ajs-dirty-warning-exempt'>","<div class='form-body'>","<div id='issueactions-suggestions' class='aui-list' />","<div class='description'>","Begin typing for available operations or press down to see all","</div>","</div>","</form>"].join("")),!0),e.current===this){var n=new o.FocusConfiguration;n.context=this.get$popup()[0],n.parentElementSelectors=[".form-body"],o.pushConfiguration(n),o.triggerFocus()}this._addEventListeners()},_addEventListeners:function(){this._removeEventListeners(),a(document).on("click.ghIssueActionListeners","#issueactions-suggestions .unified-attach-file",function(){this.hide()}.bind(this))},_removeEventListeners:function(){a(document).off("click.ghIssueActionListeners")},_formatActionsResponse:function(t){function e(t){return GH.RapidBoard.getCurrentPageReturnUrl()}function i(i){var o=new s({label:"Workflow"});return a(i).each(function(){o.addItem(new n({href:c()+"/secure/WorkflowUIDispatcher.jspa?id={0}&action="+this.action+"&atl_token="+t.atlToken+"&returnUrl="+e(t.key),label:this.name,styleClass:"issueaction-workflow-transition"}))}),o}function o(i){var o=new s({label:"Actions"});return a(i).each(function(){var s=e(t.key),i=this.name;d.patchRankOperationName&&(i=d.patchRankOperationName(this.styleClass,this.name));var a=this.url.indexOf("?")===-1?"?":"&",r=this.url+a+"returnUrl="+s;o.addItem(new n({href:r,label:i,styleClass:this.styleClass}))}),o}var r=[];return t&&(t.actions&&0!==t.actions.length&&r.push(i(t.actions)),t.operations&&0!==t.operations.length&&r.push(o(t.operations))),r},decorateContent:function(){var e=this,s=r.getSelectedIssueKey(),n=u.getIssueId()||r.getSelectedIssueId();s?this.addHeading("Operations"+": <span>"+s+"</span>"):this.addHeading("Operations"),this.queryControl=new t({id:"issueactions",element:this.$content.find("#issueactions-suggestions"),ajaxOptions:{minQueryLength:1,dataType:"json",url:AJS.format(c()+"/rest/api/1.0/issues/{0}/ActionsAndOperations?atl_token={1}",n,atl_token()),formatResponse:this._formatActionsResponse},showDropdownButton:!0,loadOnInit:!0}),this.queryControl._handleServerError=function(t){var s=i.buildSimpleErrorContent(t),n=401===t.status?"warning":"error";e._setContent(a('<div class="ajaxerror"><div class="aui-message '+n+'"><p>'+s+"</p></div></div>"),!1),e._addCloseLink()},this.timeoutId=void 0,this._addCloseLink()},_addCloseLink:function(){var t,e,s,n=this;e=a('<div class="buttons-container form-footer"></div>').appendTo(this.get$popupContent()),s=a('<div class="buttons"/>').appendTo(e),t=a("<a href='#' class='cancel' id='aui-dialog-close'>"+"Close"+"</a>"),t.appendTo(s,this.get$popupContent()).click(function(t){n.hide(),t.preventDefault()}),this.get$popupContent().append(e)},hide:function(t){return this._removeEventListeners(),this._super(t)!==!1&&void o.popConfiguration()}})});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/gh-LinkIssueDialog.js' */
define("jira-agile/gh-link-issue-dialog",["jira/ajs/ajax/smart-ajax","jira/issue","jira/issuenavigator/issue-navigator","jira/dialog/dialog-register","jquery","jira/jquery/deferred"],function(e,t,i,n,s,r){var u={};return u.create=function(){function u(e,t){var i=!1;return s.each(t,function(t,n){if(n.id===e)return n.isSelected=!0,i=!0,!1}),i||(t[0].isSelected=!0),t}function a(t){var i=r(),n=require("wrm/context-path");return e.makeRequest({url:n()+"/rest/viewIssue/1/remoteIssueLink/linkType?issueId="+t,complete:function(t,n,s){s.successful?i.resolve(s.data):i.reject(e.buildDialogErrorContent(s))}}),i.promise()}function o(t){var i=r(),s=n.getDefaultAjaxOptions.call(t);return s.complete=function(t,n,s){s.successful?i.resolve(s.data):i.reject(e.buildDialogErrorContent(s))},e.makeRequest(s),i.promise()}function l(e){return e.$activeTrigger.attr("id")}return function(e,r,c,d){return c=c||n.storeCurrentIssueIdOnSucessfulSubmit,new GH.FormDialog({id:"link-issue-dialog",trigger:e,onSuccessfulSubmit:c,issueMsg:"thanks_issue_linked",widthClass:"large",stacked:!0,content:function(e){var n=this,c=d||t.getIssueId()||i.getSelectedIssueId();o(n).done(function(t){a(c).done(function(i){var a=r||l(n);i=u(a,i),e(JIRA.Templates.LinkIssue.dialog({linkTypes:i,tabContent:t})),s.each(i,function(e,t){var i;t.isSelected===!0&&(i="[name='"+t.focusedFieldName+"']",0===s(i).length&&(i="#"+t.id),n._focusFirstField(i))})}).fail(function(t){e(t)})}).fail(function(t){e(t)})},formatSubmitResponseContent:function(e){return this.get$popupContent().find(".dialog-pane").html(e),this.get$popupContent().html()},onContentRefresh:function(){this.bindAnchorsToDialog(this.get$popupContent().find(".dialog-menu-item"))}})}}(),u}),AJS.namespace("GH.LinkIssueDialog",null,require("jira-agile/gh-link-issue-dialog"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/gh-InitDialogs.js' */
define("jira-agile/dialog/init-dialogs",["jquery","require"],function(e,t){var s=function(){var t=e.Deferred();return e(function(){t.resolve()}),t.promise()}(),i=[s];GH.DetailsObjectFactory.isInlineEditableEnabled()&&i.push(t("jira-agile/rapid/ui/detail/detail-view-resources")),e.when.apply(null,i).then(function(){t(["jira/dialog/dialog-register","jira-agile/dialog/issue-actions","jira-agile/dialog/labels-dialog","jira/dialog/screenshot-window","jira/dialog/form-dialog","jira/dialog/dialog"],function(t,s,i,n,a,o){function r(e){}var l,u=JIRA.IssueNavigator,d=JIRA.Issue,c=["deleteIssueLink","editComment","deleteComment"];for(var g in t)if(t.hasOwnProperty(g)){if(GH.DetailsObjectFactory.isInlineEditableEnabled()&&c.indexOf(g)>=0)continue;l=t[g],l._unassignEvents&&l.options.trigger&&l._unassignEvents("trigger",l.options.trigger)}e(document).undelegate("a.issueaction-workflow-transition","click"),e("a.issueaction-attach-screenshot").die("click"),t.keyboardShortcuts=new a({id:"keyboard-shortcuts-dialog",trigger:"#keyshortscuthelp",widthClass:"large",onContentRefresh:function(){var t=this.get$popupContent();e("a.submit-link",t).click(function(s){s.preventDefault(),e("form",t).submit()})}}),GH.DetailsObjectFactory.isInlineEditableEnabled()||(t.deleteIssueLink=new a({type:"ajax",id:"delete-issue-link-dialog",trigger:"#linkingmodule a.icon-delete",ajaxOptions:t.getDefaultAjaxOptions})),document.getElementById("dashboard")?(t.deleteDashboard=new a({type:"ajax"}),e(document).delegate("#delete_dashboard","click",function(s){s.stopPropagation(),s.preventDefault(),t.deleteDashboard.$activeTrigger=e("#delete_dashboard"),t.deleteDashboard.init({type:"ajax",id:"delete-dshboard",ajaxOptions:{url:t.deleteDashboard.$activeTrigger.attr("href")},targetUrl:"input[name=targetUrl]"}),t.deleteDashboard.show()})):(t.assignToMe=new GH.FormDialog({id:"assign-to-me-link-handler",trigger:"a.issueaction-assign-to-me",ajaxOptions:t.getDefaultAjaxOptions,onSuccessfulSubmit:t.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_assigned"}),t.linkIssue=GH.LinkIssueDialog.create("a.issueaction-link-issue"),t.deleteIssue=new GH.FormDialog({id:"delete-issue-dialog",trigger:"a.issueaction-delete-issue",targetUrl:"#delete-issue-return-url",ajaxOptions:t.getDefaultAjaxOptions,onSuccessfulSubmit:t.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_deleted",onContentRefresh:function(){e(".overflow-ellipsis").textOverflow()}}),t.cloneIssue=new GH.FormDialog({id:"clone-issue-dialog",trigger:"a.issueaction-clone-issue",handleRedirect:!0,ajaxOptions:t.getDefaultAjaxOptions,onSuccessfulSubmit:t.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_cloned",onContentRefresh:function(){e(".overflow-ellipsis").textOverflow()}}),t.assignIssue=new GH.FormDialog({id:"assign-dialog",trigger:"a.issueaction-assign-issue",ajaxOptions:t.getDefaultAjaxOptions,onSuccessfulSubmit:t.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_assigned",onContentRefresh:function(){e(".overflow-ellipsis").textOverflow()}}),t.logWork=new GH.FormDialog({id:"log-work-dialog",trigger:"a.issueaction-log-work",handleRedirect:!0,ajaxOptions:t.getDefaultAjaxOptions,onSuccessfulSubmit:t.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_worklogged",onContentRefresh:function(){e(".overflow-ellipsis").textOverflow();this.get$popupContent()}}),t.attachFile=new GH.FormDialog({id:"attach-file-dialog",trigger:"a.issueaction-attach-file",handleRedirect:!0,ajaxOptions:t.getDefaultAjaxOptions,onSuccessfulSubmit:t.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_attached",onContentRefresh:function(){e(".overflow-ellipsis").textOverflow()}}),t.attachScreenshotDialog=new GH.FormDialog({id:"attach-screenshot-dialog",trigger:"a.issueaction-attach-screenshot-html5",handleRedirect:!0,ajaxOptions:t.getDefaultAjaxOptions,onSuccessfulSubmit:t.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_attached",onContentRefresh:function(){e(".overflow-ellipsis").textOverflow()}}),t.attachScreenshot=new n({id:"attach-screenshot-window",trigger:"a.issueaction-attach-screenshot"}),t.comment=new GH.FormDialog({id:"comment-add-dialog",trigger:"a.issueaction-comment-issue",handleRedirect:!0,ajaxOptions:t.getDefaultAjaxOptions,onSuccessfulSubmit:t.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_commented",onContentRefresh:function(){e(".overflow-ellipsis").textOverflow()}}),t.editLabels=new i({id:"edit-labels-dialog",trigger:"a.issueaction-edit-labels,a.edit-labels",autoClose:!0,ajaxOptions:t.getDefaultAjaxOptions,onSuccessfulSubmit:t.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_labelled",labelsProvider:r,onContentRefresh:function(){e(".overflow-ellipsis").textOverflow()}}),t.issueActions=new s,AJS.namespace("jira.app.issueActionsPopup",null,t.issueActions),e(document).delegate("a.issueaction-workflow-transition","click",function(s){s.preventDefault();var i=/action=(\d+)/.exec(this.href.slice(this.href.indexOf("?")));if(i){var n="workflow-transition-"+i[1]+"-dialog",a=e(this);t[n]||(t[n]=new GH.FormDialog({id:n,url:a.attr("href"),transitionActionId:i[1],trigger:'a[href*="'+i[0]+'"].issueaction-workflow-transition',widthClass:"large",handleRedirect:!0,ajaxOptions:t.getDefaultAjaxOptions,onSuccessfulSubmit:t.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_transitioned",onContentRefresh:function(){AJS.tabs.setup()}}),t[n].show())}}),e.each(t,function(t,s){s instanceof o&&e(s).bind("beforeShow",function(){if("keyboardShortcuts"!==t)return u.isRowSelected()||void 0!==d.getIssueId()})}))})})}),require("jira-agile/dialog/init-dialogs");;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ops/KeyboardShortcuts.js' */
GH.Shortcut={focusBoardSearch:function(){},newIssue:function(){AJS.$("#create_link").click()},toggleBox:function(){},editIssuePriority:function(){},projector:function(){GH.PresentationMode.iterateThroughPresentationModes(GH.PresentationMode.allModes)},viewIssue:function(){GH.IssueOperationShortcuts.viewSelectedIssue()},editIssue:function(){GH.IssueOperationShortcuts.editSelectedIssue()},assignIssue:function(){GH.IssueOperationShortcuts.assignSelectedIssue()},assignIssueToMe:function(){GH.IssueOperationShortcuts.assignSelectedIssueToMe()},commentIssue:function(){GH.IssueOperationShortcuts.commentSelectedIssue()},editIssueLabels:function(){GH.IssueOperationShortcuts.editSelectedIssueLabels()},showOperationsDialog:function(){GH.IssueOperationShortcuts.showOperationsDialog()},sendToTop:function(e){GH.WorkController.isActive()?GH.WorkKBShortcuts.sendToTop(e):GH.PlanController.isActive()&&GH.PlanKBShortcuts.sendToTop(e)},sendToBottom:function(e){GH.WorkController.isActive()?GH.WorkKBShortcuts.sendToBottom(e):GH.PlanController.isActive()&&GH.PlanKBShortcuts.sendToBottom(e)},nextIssue:function(){GH.WorkController.isActive()?GH.WorkKBNavigation.selectNextIssue():GH.PlanController.isActive()&&GH.BacklogSelectionController.selectNextIssue()},previousIssue:function(){GH.WorkController.isActive()?GH.WorkKBNavigation.selectPreviousIssue():GH.PlanController.isActive()&&GH.BacklogSelectionController.selectPreviousIssue()},nextBox:function(){GH.WorkController.isActive()&&GH.WorkKBNavigation.selectNextColumn()},previousBox:function(){GH.WorkController.isActive()&&GH.WorkKBNavigation.selectPreviousColumn()},toggleSwimlanes:function(){GH.WorkController.isActive()&&GH.WorkKBNavigation.toggleSwimlanes()},planMode:function(){GH.RapidBoard.State.isPlanModeAvailable()?GH.RapidBoard.ViewController.setMode("plan"):this.workMode()},workMode:function(){GH.RapidBoard.ViewController.setMode("work")},reportMode:function(){GH.RapidBoard.ViewController.setMode("report")},toggleIssue:function(){GH.WorkController.isActive()?GH.WorkController.toggleDetailsView():GH.PlanController.isActive()&&GH.PlanController.toggleDetailsView()}},AJS.$(document).bind("keydown");;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ops/IssueOperationShortcuts.js' */
GH.IssueOperationShortcuts={},GH.IssueOperationShortcuts.overrideSelectedIssue=void 0,function(){var e=require("jira-agile/rapid/analytics-tracker");GH.IssueOperationShortcuts.analytics=function(t){return new e("gh.issueaction."+t)}}(),GH.IssueOperationShortcuts.init=function(){GH.IssueOperationShortcuts.bindEnter(),AJS.$(document).delegate(".js-issueaction-container-dot .js-issueaction","click",function(e){var t=AJS.$(e.currentTarget).attr("id");GH.IssueOperationShortcuts.trackKeyboardShortcuts(t)}),AJS.$(document).delegate("#issueactions-suggestions a.aui-list-item-link","click",function(e){var t=AJS.$(e.currentTarget).attr("class");if(t.indexOf("issueaction-")>=0){var s=t.replace(/.*issueaction-([a-z0-9_-]+).*/,"$1");GH.IssueOperationShortcuts.trackDotDialogAction(s)}}),AJS.bind("remove.dialog",function(){GH.IssueOperationShortcuts.bindEnter()})},GH.IssueOperationShortcuts.bindEnter=function(){AJS.$(document).bind("keydown",function(e){if("13"==e.keyCode){var t=e.target;void 0!==t&&"HTML"!==t.nodeName&&"BODY"!==t.nodeName&&t!=document||GH.IssueOperationShortcuts.viewSelectedIssue()}})},GH.IssueOperationShortcuts.setOverrideSelectedIssue=function(e){GH.IssueOperationShortcuts.overrideSelectedIssue=e},GH.IssueOperationShortcuts.clearOverrideSelectedIssue=function(){GH.IssueOperationShortcuts.overrideSelectedIssue=void 0},GH.IssueOperationShortcuts.isOverrideSelectedIssueActive=function(){return!!GH.IssueOperationShortcuts.overrideSelectedIssue},GH.IssueOperationShortcuts.getSelectedIssueKey=function(){return GH.IssueOperationShortcuts.overrideSelectedIssue?GH.IssueOperationShortcuts.overrideSelectedIssue.key:GH.WorkController.isActive()?GH.WorkSelectionController.getSelectedIssueKey():GH.PlanController.isActive()?GH.BacklogSelectionController.getSelectedIssueKey():void 0},GH.IssueOperationShortcuts.getSelectedIssueId=function(){if(GH.IssueOperationShortcuts.overrideSelectedIssue)return GH.IssueOperationShortcuts.overrideSelectedIssue.id;if(GH.WorkController.isActive()){var e=GH.WorkSelectionController.getSelectedIssueKey();if(e)return GH.GridDataController.getModel().getIssueIdForKey(e)}else if(GH.PlanController.isActive()){var e=GH.BacklogSelectionController.getSelectedIssueKey();if(e)return GH.BacklogModel.getIssueIdForKey(e)}},GH.IssueOperationShortcuts.viewSelectedIssue=function(){var e=GH.IssueOperationShortcuts.getSelectedIssueKey();if(e){GH.IssueOperationShortcuts.trackKeyboardShortcuts("open-issue");var t=GH.Ajax.CONTEXT_PATH+"/browse/"+e;window.location.href=t}},GH.IssueOperationShortcuts.editSelectedIssue=function(){var e=GH.IssueOperationShortcuts.getSelectedIssueId();e&&AJS.$("a.issueaction-edit-issue").trigger("click")},GH.IssueOperationShortcuts.assignSelectedIssue=function(){var e=GH.IssueOperationShortcuts.getSelectedIssueKey();e&&AJS.$(".js-issueaction-container-dot a.issueaction-assign-issue").trigger("click")},GH.IssueOperationShortcuts.assignSelectedIssueToMe=function(){var e=GH.IssueOperationShortcuts.getSelectedIssueKey();e&&AJS.$(".js-issueaction-container-dot a.issueaction-assign-to-me").trigger("click")},GH.IssueOperationShortcuts.commentSelectedIssue=function(){var e=GH.IssueOperationShortcuts.getSelectedIssueKey();if(e){var t=AJS.$("#ghx-detail-view #addcomment a[name=add-comment]");GH.DetailsObjectFactory.isInlineEditableEnabled()&&t.length>0?t.trigger("click"):AJS.$(".js-issueaction-container-dot a.issueaction-comment-issue").trigger("click")}},GH.IssueOperationShortcuts.attachFilesSelectedIssue=function(){var e=GH.IssueOperationShortcuts.getSelectedIssueKey();e&&AJS.$(".js-issueaction-container-dot a.issueaction-attach-file").trigger("click")},GH.IssueOperationShortcuts.editSelectedIssueLabels=function(){var e=GH.IssueOperationShortcuts.getSelectedIssueKey();e&&AJS.$(".js-issueaction-container-dot a.issueaction-edit-labels").trigger("click")},GH.IssueOperationShortcuts.deleteSelectedIssue=function(){var e=GH.IssueOperationShortcuts.getSelectedIssueId();e&&AJS.$(".js-issueaction-container-dot a.issueaction-delete-issue").trigger("click")},GH.IssueOperationShortcuts.linkSelectedIssue=function(){var e=GH.IssueOperationShortcuts.getSelectedIssueId();e&&AJS.$(".js-issueaction-container-dot a.issueaction-link-issue").trigger("click")},GH.IssueOperationShortcuts.createSubtask=function(){var e=AJS.$("#atlassian-token").attr("content"),t=GH.Ajax.CONTEXT_PATH+"/secure/CreateSubTaskIssue!default.jspa?parentIssueId={0}&atl_token="+e+"&returnUrl=",s='<a href="'+t+'" class="issueaction-create-subtask" style="display:none"></a>',o=AJS.$(s);AJS.$("#gh").append(o),o.click(),o.remove()},GH.IssueOperationShortcuts.logWorkOnSelectedIssue=function(){var e=GH.IssueOperationShortcuts.getSelectedIssueKey();e&&AJS.$(".js-issueaction-container-dot a.issueaction-log-work").trigger("click")},GH.IssueOperationShortcuts.showOperationsDialog=function(){var e=GH.IssueOperationShortcuts.getSelectedIssueKey();e&&JIRA.Dialogs.issueActions.show()},GH.IssueOperationShortcuts.trackKeyboardShortcuts=function(e){GH.IssueOperationShortcuts.analytics("keyboardshortcuts").trigger(e)},GH.IssueOperationShortcuts.trackDotDialogAction=function(e){GH.IssueOperationShortcuts.analytics("dotdialog").trigger(e)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/WorkKBNavigation.js' */
define("jira-agile/rapid/ui/work/work-kb-navigation",["jira-agile/rapid/ui/work/work-controller","jira-agile/rapid/ui/work/swimlane-view","jira-agile/rapid/ui/work/grid-data-controller","jira-agile/rapid/logger","jquery"],function(e,n,r,t,i){"use strict";var o={};return o.currentIndex=0,o.currentColumn=0,o.currentSwimlane=0,o.columnChange=!1,o.init=function(){i(GH).bind("issueSelected",function(e,n){t.log(e.type+" handled",t.Contexts.ui),o.adaptCurrentPosition(n)})},o.initCurrentPosition=function(){var e=GH.WorkSelectionController.getSelectedIssueKey();e?o.setCurrentPosition(e,!0,!1):o.resetCurrentPosition()},o.adaptCurrentPosition=function(e){o.columnChange?(o.columnChange=!1,o.setCurrentPosition(e,!1,!0)):o.setCurrentPosition(e,!1,!1)},o.setCurrentPosition=function(e,n,t){if(e){var i=r.getModel()._getIssuePositionAndDataByKey(e);if(i)return t||(o.currentIndex=i.issueIndex),!n&&i.isSwimlane||(o.currentColumn=i.columnId),void(o.currentSwimlane=i.swimlaneId)}o.resetCurrentPosition()},o.resetCurrentPosition=function(){o.currentIndex=0,o.currentColumn=0,o.currentSwimlane=0},o.selectNextIssue=function(){if(e.isActive()){var t=GH.WorkSelectionController.getSelectedIssueKey(),i=r.getModel();if(t){if(!n.ensureSwimlaneExpandedForIssueKey(t)){var s=i.getNextIssueKey(t,o.currentColumn);s&&GH.WorkSelectionController.focusOnIssue(s)}}else{var u=i.getFirstIssueKey();u&&GH.WorkSelectionController.focusOnIssue(u)}}},o.selectPreviousIssue=function(){if(e.isActive()){var t=GH.WorkSelectionController.getSelectedIssueKey(),i=r.getModel();if(t){if(!n.ensureSwimlaneExpandedForIssueKey(t)){var s=i.getPreviousIssueKey(t,o.currentColumn);s&&GH.WorkSelectionController.focusOnIssue(s)}}else{var u=i.getLastIssueKey();u&&GH.WorkSelectionController.focusOnIssue(u)}}},o.selectNextColumn=function(){if(e.isActive()){var t=GH.WorkSelectionController.getSelectedIssueKey();if(!t)return void o.selectNextIssue();var i=r.getModel(),s=i.isIssueValid(t);if(!s)return void o.selectNextIssue();if(!n.ensureSwimlaneExpandedForIssueKey(t)){var u=i.getIssueKeyInNextColumn(t,o.currentIndex);u&&(o.columnChange=!0,GH.WorkSelectionController.focusOnIssue(u))}}},o.selectPreviousColumn=function(){if(e.isActive()){var t=GH.WorkSelectionController.getSelectedIssueKey();if(!t)return void o.selectNextIssue();var i=r.getModel(),s=i.isIssueValid(t);if(!s)return void o.selectNextIssue();if(!n.ensureSwimlaneExpandedForIssueKey(t)){var u=i.getIssueKeyInPreviousColumn(t,o.currentIndex);u&&(o.columnChange=!0,GH.WorkSelectionController.focusOnIssue(u))}}},o.toggleSwimlanes=function(){n.toggleAllSwimlanes()},o}),AJS.namespace("GH.WorkKBNavigation",null,require("jira-agile/rapid/ui/work/work-kb-navigation"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/WorkTransitionService.js' */
define("jira-agile/rapid/ui/work/work-transition-service",["jquery","underscore"],function(r,t){"use strict";var n="gh.rapid.board.transition.too.many.projects",e=50,o={};o.dataPromise=r.Deferred(),o.data=null,o.tooManyProjects=!1,o.preloadData=function(r){if(r&&!(r.length>e)){var t=r.map(function(r){return r.id});this.dataPromise=GH.Ajax.get({deferErrorHandling:!0,url:"/xboard/work/transitions.json",data:{projectId:t}},"workTransitionService").done(function(r){o.data=r}).fail(function(r){o.tooManyProjects=r.error.errors[0].message===n})}},o.getData=function(){return this.dataPromise.isRejected()&&this.preloadData(),this.dataPromise},o.queryTransitionsForColumn=function(t,n){var e=r.Deferred();return this.getData().done(function(){var r=i(t);e.resolve(a(r,n))}).fail(e.reject),e},o.getTransitionById=function(r,n){var e=u(r);return t.findWhere(this.data.workflowToTransitions[e],{transitionId:Number(n)})},o.hasAnyTransitionHasScreen=function(r,t){return r.some(function(r){var n=o.getTransitionById(r,t);return n.hasScreen})},o.hasAnyConditions=function(r){var t=i(r);return t.some(function(r){return r.hasConditions})};var i=function(r){var n=u(r),e=o.data.workflowToTransitions[n];if(t.isUndefined(e))return[];var i=s(r);return e.filter(function(r){return!r.isInitial&&(t.isUndefined(r.fromStatusId)||r.fromStatusId===Number(i.statusId))})},a=function(r,t){return r.filter(function(r){return t.statusIds.indexOf(String(r.toStatusId))>-1})},s=function(r){var t=GH.GridDataController.getModel();return t.getIssueDataByKey(r)},u=function(r){var t=s(r),n=o.data.projectAndIssueTypeToWorkflow[t.projectId];return n[t.typeId]};return o});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/WorkDragAndDrop.js' */
define("jira-agile/rapid/ui/work/work-drag-and-drop",["jira/featureflags/feature-manager","jira-agile/rapid/analytics-tracker","jira-agile/rapid/events","jira-agile/rapid/ui/notification","jira-agile/rapid/ui/work/work-transition-service","jira/analytics","jquery"],function(e,r,a,n,t,o,i){"use strict";var s=new a;s.OPTIMISTIC_TRANSITIONS_FLAG="com.atlassian.jira.agile.darkfeature.optimistic.transitions",s.currentDragElement=null,s.cancel=!1,s.enabled=!1,s.skipNextRank=!1,s.analytics={dragAndDrop:new r("gh.rapidboard.work.dragAndDrop"),ranking:new r("gh.rapidboard.rankissues"),transitioning:new r("gh.rapidboard.transitionissues")},s.init=function(){s.enabled=!0},s.initDraggables=function(e){s.enabled&&setTimeout(function(){s._registerDraggables(e)},0)},s._registerDraggables=function(e){var r=GH.RankingModel.canUserRank();e.find(".ghx-columns").each(function(e,a){var n=i(a);r?n.find(".ghx-column").sortable({revert:0,zIndex:3e3,start:s.issueDragStart,stop:s.issueDragStop,items:".js-parent-drag",cancel:".js-fake-parent, .ghx-parent-group > .ghx-subtask-group",update:s.updateIssueHandler}).find(".ghx-subtask-group").sortable({revert:0,zIndex:3e3,start:function(e,r){s.issueDragStart.apply(this,[e,r]);var a=i(r.item).parent();a.children().length>2&&a.addClass("ghx-contain")},stop:function(e,r){s.issueDragStop.apply(this,[e,r]),i(r.item).parent().removeClass("ghx-contain")},items:".ghx-issue-subtask",update:s.updateIssueHandler}):s._initIssueCardsDraggable(n.find(".js-issue"),n)})},s.registerSingleCardDraggable=function(e){var r=GH.RankingModel.canUserRank();if(!r){var a=e.closest(".ghx-columns");s._initIssueCardsDraggable(e,a)}},s._initIssueCardsDraggable=function(e,r){e.draggable({revert:!0,revertDuration:0,zIndex:3e3,containment:r,start:s.issueDragStart,stop:s.issueDragStop})},s.updateIssueHandler=function(e,r){if(s.skipNextRank)return void i(this).sortable("cancel");if(!s.cancel){var a=i(r.item),n=GH.WorkSelectionController.getSelectedIssuesInOrder(),t=GH.WorkSelectionController.getIssueKey(a.prev(".js-issue, .ghx-parent-group")),o=GH.WorkSelectionController.getIssueKey(a.next(".js-issue, .ghx-parent-group"));s.analytics.ranking.trigger("dragAndDrop",n.length),GH.WorkRanking.rankIssues(n,t,o)}},s.issueDragStart=function(e,r){s.cancel=!1,s.skipNextRank=!1,GH.WorkContextMenuController.hideContextMenu();var a=!!r.item,n=i(a?r.item:this);i(r.placeholder).height(n.height());var o=i(this);i(document).bind("keydown.dragAndDrop",function(e){27==e.keyCode&&(s.cancel=!0,a?o.sortable("cancel"):o.draggable("cancel"),s.analytics.dragAndDrop.trigger("cancel"))}),s.currentDragElement=n;var l=GH.WorkSelectionController.getIssueId(n),d=GH.WorkSelectionController.getIssueKey(n);GH.WorkSelectionController.ensureIssueSelected(e,d),s.droppablesReady=!1,i(".ghx-column").droppable("destroy");var u=GH.WorkSelectionController.getSelectedIssueKeys();1===u.length&&(s.initDropZoneOverlay(n),g()&&!t.hasAnyConditions(d)?s.initDropZones(d):s.queryPossibleTransitions(l,d)),u.length>1&&(n.hasClass("ghx-parent-group")?n.children(".js-issue").addClass("ghx-move-main").find(".ghx-move-count > b").text(u.length):n.addClass("ghx-move-main").find(".ghx-move-count > b").text(u.length)),s.analytics.dragAndDrop.trigger("start","issueCount",u.length)},s.issueDragStop=function(e,r){i(document).unbind("keydown.dragAndDrop");var a=i(r.item?r.item:this);if(a.hasClass("ghx-parent-group")?a.children(".js-issue").removeClass("ghx-move-main"):a.removeClass("ghx-move-main"),s.destroyDropZoneOverlay(),s.cleanTransitionClasses(),s.currentDragElement=null,!s.cancel&&!GH.RankingModel.isRankable()){var n=Math.abs(r.position.left),t=Math.abs(r.position.top);n<35&&t>50&&s.showNotRankableWarning()}s.droppablesReady=!1,s.analytics.dragAndDrop.trigger("complete")},s.isIssueBeingDragged=function(e){var r=s.currentDragElement;if(r){var a=i(r).data("issue-key");return e===a}},s.showNotRankableWarning=function(){var e=GH.RapidBoard.getRapidViewConfigurationUrl(GH.WorkController.rapidViewData.id,"filter"),r='<a href="'+e+'">',a="</a>",t=AJS.format("Ranking is disabled, as the Filter Query for this board is not ordered by ascending Rank. Please check your {0}filter configuration{1}.",r,a);n.showWarning(t)},s.issueDropped=function(e,r){if(!s.cancel){s.trigger("before:issueDropRender");var a=i(this),n=a.attr("target-transition-id"),t=parseInt(a.attr("target-transition-status"),10),o=GH.WorkSelectionController.getSelectedIssueKeys(),l=GH.RapidBoard.State.getRapidViewId(),d=a.closest(".ghx-target-option").data("column-id"),g=r.draggable.closest(".ghx-column").data("column-id");if(s._shouldUseOptimisticTransitions(o,n))GH.WorkController.optimisticallyTransition(o,n,t,g,d);else if(o.length>1){var u={rapidViewId:l,issueKeys:o,targetColumn:d,selectedTransitionId:n,mode:GH.RapidBoard.State.getMode()};GH.WorkController.submitTransitionAndRank(u).always(GH.WorkController.reload)}else{var c=GH.WorkSelectionController.getIssueId(i(this));s.executeWorkflowTransition(c,n,t)}s.skipNextRank=!0}},s._shouldUseOptimisticTransitions=function(r,a){if(!e.isFeatureEnabled(s.OPTIMISTIC_TRANSITIONS_FLAG))return l("fallback",{cause:"optimistic-transition-disabled"}),!1;if(!t.data)return l("fallback",{cause:"no-transition-data"}),!1;if("none"!==GH.WorkController.getStatisticField())return l("fallback",{cause:"has-statistic-field"}),!1;if(t.hasAnyTransitionHasScreen(r,a))return l("fallback",{cause:"has-screen"}),!1;var n=GH.GridDataController.getModel().getSwimlaneStrategy();return"custom"===n||"assignee"===n||"assigneeUnassignedFirst"===n?(l("fallback",{cause:"unsupported-swimlane"}),!1):(l("optimistic"),!0)};var l=function(e,r){var a={name:"jira-software.rapidboard.issuecard.transition."+e};r&&(a.properties=r),o.send(a)};s.queryPossibleTransitions=function(e,r){GH.Ajax.get({url:"/xboard/issue/transitions.json",data:{issueId:e}},"queryPossibleTransitions").done(function(e){s.initDropZones(r,e)})},s.dropzoneOverlay=null,s.initDropZoneOverlay=function(e){var r=GH.GridDataController.getModel(),a=r.getColumns(),n=parseInt(e.closest(".ghx-column").attr("data-column-id"),10),t=i(GH.tpl.rapid.workdraganddrop.renderDropZoneOverlay({columns:a,sourceColumnId:n}));s.dropzoneOverlay=t;var o=e.closest(".ghx-swimlane");o.addClass("ghx-drag-in-progress"),o.append(t),s.positionDropZoneOverlay(),i("#ghx-pool").bind("scroll.overlayResizer",s.positionDropZoneOverlay)},s.positionDropZoneOverlay=function(){var e=i(".ghx-zone-overlay"),r=e.prev(".ghx-columns"),a=i("#ghx-pool"),n=a.scrollTop(),t=r.position().top,o=t+n,s=a.children(".ghx-swimlane").first().children(".ghx-columns").position(),l=s.top+n,d=t-l;d<0&&(o-=d);var g=r.height(),u=g,c=i(window).height(),p=c-a.offset().top-o+n;u>p&&(u=p);var h=t+g+n,f=h-o;u>f&&(u=f);var v=u<1?"hidden":"";e.css({top:o,height:u,visibility:v})},s.initDropZones=function(e,r){var a=s.currentDragElement;if(a&&GH.WorkSelectionController.getIssueKey(a)===e&&s.dropzoneOverlay){var n=GH.GridDataController.getModel(),o=i(".ghx-column-headers"),d=s.dropzoneOverlay.find(".ghx-zone-table");d.each(function(a,d){var u=i(d),c=u.data("column-id"),p=n.getColumnById(c);if(p){var h=void 0;g()&&!t.hasAnyConditions(e)?h=t.queryTransitionsForColumn(e,p):(l("fallback",{cause:"has-conditions"}),h=s.getTransitionsForColumn(r,p)),h.done(function(e){if(!_.isEmpty(e)){var r=o.children(".ghx-column[data-id="+c+"]");u.addClass("ghx-target-option"),r.addClass("ghx-target-option"),s.setupDropZonesForColumn(u,r,e),s.forceDroppablesReload()}}).fail(function(){s.destroyDropZoneOverlay(),s.cleanTransitionClasses()})}})}},s.getTransitionsForColumn=function(e,r){for(var a=i.Deferred(),n=[],t=0;t<e.transitions.length;t++)for(var o=0;o<r.statusIds.length;o++)r.statusIds[o]==e.transitions[t].targetStatus&&n.push(e.transitions[t]);return a.resolve(n)},s.setupDropZonesForColumn=function(e,r,a){_.each(a,function(r){var n=i(GH.tpl.rapid.workdraganddrop.renderDropZone({transition:r,singleTransition:1===a.length,useOptimisticTransitionModel:g()&&d(a)}));e.append(n)});var n={accept:".js-issue, .ghx-parent-group",hoverClass:"ghx-target-hover",over:function(){e.addClass("ghx-target-hover"),r.addClass("ghx-target-hover")},out:function(){e.find(".ghx-drop-zone.ghx-target-hover").length<1&&(e.removeClass("ghx-target-hover"),r.removeClass("ghx-target-hover"))},tolerance:"pointer",drop:s.issueDropped};e.children().droppable(n)},s.destroyDropZoneOverlay=function(){s.dropzoneOverlay&&(s.dropzoneOverlay.remove(),s.dropzoneOverlay=null,i("#ghx-pool").unbind("scroll.overlayResizer"))},s.cleanTransitionClasses=function(){i(".ghx-column").removeClass("ghx-target-option").removeClass("ghx-target-hover"),i(".ghx-swimlane").removeClass("ghx-drag-in-progress")},s.forceDroppablesReload=function(){var e=i.ui.ddmanager,r=e.current;r&&(e.prepareOffsets(r,null),e.drag(r,null)),s.droppablesReady=!0},s.executeWorkflowTransition=function(e,r,a){s.transitionTargetStatus=a;var n=i("#atlassian-token").attr("content"),t=GH.Ajax.CONTEXT_PATH+"/secure/WorkflowUIDispatcher.jspa?id={0}&action="+r+"&atl_token="+n+"&returnUrl=",o='<a href="'+t+'" class="issueaction-workflow-transition" style="display:none"></a>',l=i(o);i("#gh").append(l),l.click(),l.remove()},s.transitionTargetStatus=void 0;var d=function(e){return!e.some(function(e){return e.hasOwnProperty("id")})},g=function(){return t.data&&e.isFeatureEnabled(s.OPTIMISTIC_TRANSITIONS_FLAG)};return s}),AJS.namespace("GH.WorkDragAndDrop",null,require("jira-agile/rapid/ui/work/work-drag-and-drop"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/WorkDragAndDrop.soy' */
// This file was automatically generated from WorkDragAndDrop.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.rapid.workdraganddrop.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.rapid == 'undefined') { GH.tpl.rapid = {}; }
if (typeof GH.tpl.rapid.workdraganddrop == 'undefined') { GH.tpl.rapid.workdraganddrop = {}; }


GH.tpl.rapid.workdraganddrop.renderDropZoneOverlay = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-zone-overlay"><div class="ghx-zone-overlay-table">';
  var columnList4 = opt_data.columns;
  var columnListLen4 = columnList4.length;
  for (var columnIndex4 = 0; columnIndex4 < columnListLen4; columnIndex4++) {
    var columnData4 = columnList4[columnIndex4];
    output += (columnData4.id == opt_data.sourceColumnId) ? '<div class="ghx-zone-overlay-column ghx-empty"></div>' : '<div class="ghx-zone-overlay-column"><div class="ghx-zone-table" data-column-id="' + soy.$$escapeHtml(columnData4.id) + '"></div></div>';
  }
  output += '</div></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.workdraganddrop.renderDropZoneOverlay.soyTemplateName = 'GH.tpl.rapid.workdraganddrop.renderDropZoneOverlay';
}


GH.tpl.rapid.workdraganddrop.renderDropZone = function(opt_data, opt_ignored) {
  return ((opt_data.useOptimisticTransitionModel) ? '<div class="ghx-zone-row" target-transition-id="' + soy.$$escapeHtml(opt_data.transition.transitionId) + '" target-transition-status="' + soy.$$escapeHtml(opt_data.transition.toStatusId) + '">' : '<div class="ghx-zone-row" target-transition-id="' + soy.$$escapeHtml(opt_data.transition.id) + '" target-transition-status="' + soy.$$escapeHtml(opt_data.transition.targetStatus) + '">') + '<div class="ghx-zone-cell">' + ((! opt_data.singleTransition) ? '<h2>' + soy.$$escapeHtml(opt_data.transition.name) + '</h2>' : '') + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.workdraganddrop.renderDropZone.soyTemplateName = 'GH.tpl.rapid.workdraganddrop.renderDropZone';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ops/RankController.js' */
GH.RankController={},GH.RankController.rankIssues=function(r,e,n,a,t){t=t||{};var s,i={issueKeys:e,customFieldId:r};if(a)s="after",_.isNumber(a)?i.rankAfterRankable={type:"sprintmarker",id:a}:i.rankAfterKey=a;else{if(!n)return AJS.$.Deferred().resolve().promise();s="before",_.isNumber(n)?i.rankBeforeRankable={type:"sprintmarker",id:n}:i.rankBeforeKey=n}var o=_.extend(t,{url:"/api/rank/"+s,data:i});return GH.Ajax.put(o).promise()},GH.RankController.rankEpics=function(r,e,n,a,t){if(!a&&!n)return AJS.$.Deferred().resolve().promise();var s={rankCustomFieldId:r};a?s.rankAfterEpic=a:s.rankBeforeEpic=n;var i=_.extend(t||{},{bareUrl:GH.Ajax.buildPublicRestUrl("epic/"+e+"/rank"),data:s});return GH.Ajax.put(i).promise()},GH.RankController.sprintRankIssues=function(r,e,n,a,t,s){s=s||{};var i={idOrKeys:e,customFieldId:r};n?(i.sprintId=n,i.addToBacklog=!1):(i.sprintId=null,i.addToBacklog=!0),a&&(i.idOrKeyBefore=a),t&&(i.idOrKeyAfter=t);var o=_.extend(s,{url:"/sprint/rank",data:i});return GH.Ajax.put(o).promise()},GH.RankController.getErrorRankResultFromResponse=function(r){return r.isSuccess()&&_.find(r.success.rankableChanges,function(r){return r.errors&&r.errors.length>0})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/WorkRanking.js' */
define("jira-agile/rapid/ui/work/work-ranking",["jira-agile/rapid/ui/work/work-controller","jira-agile/rapid/ui/work/swimlane-view","jira-agile/rapid/ui/work/ranking-model","jira-agile/rapid/ajax","jira-agile/rapid/ui/notification","jira/util/formatter","underscore","jira-agile/rapid/analytics-tracker"],function(e,r,n,o,t,a,i,s){"use strict";var l={};return l.analytics=new s("gh.rapidboard.rankissues"),l.sendToTop=function(r){if(e.isActive()){var o=GH.WorkSelectionController.getSelectedIssueKey();if(o&&n.canUserRankIssue(o)){var i=n.getFirstRankableIssueKeyInColumn(o);if(i){var s=GH.WorkSelectionController.getSelectedIssuesInOrder();l.analytics.trigger("sendToTop"+(r?r:""),s.length);var u=n.getBestFitSelectionAfterRank(s),c=function(){t.showSuccess("Issue has been re-ranked to the top of its column.")};l.rankIssues(s,null,i,c),u&&GH.WorkSelectionController.gotoIssue(u)}}}},l.sendToBottom=function(r){if(e.isActive()){var o=GH.WorkSelectionController.getSelectedIssueKey();if(o&&n.canUserRankIssue(o)){var i=n.getLastRankableIssueKeyInColumn(o);if(i){var s=GH.WorkSelectionController.getSelectedIssuesInOrder();l.analytics.trigger("sendToBottom"+(r?r:""),s.length);var u=n.getBestFitSelectionAfterRank(s),c=function(){t.showSuccess("Issue has been re-ranked to the bottom of its column.")};l.rankIssues(s,i,null,c),u&&GH.WorkSelectionController.gotoIssue(u)}}}},l.rankIssues=function(a,s,l,u){n.reorderIssues(a,s,l),r.rerenderCellOfIssue(l||s);var c={issueKeys:a,rankAfterKey:s,rankBeforeKey:l,customFieldId:n.getRankCustomFieldId()},k=function(r){var n=GH.RankController.getErrorRankResultFromResponse(r);n?(t.showWarning(n.errors[0]),e.reload()):i.isFunction(u)&&u(r)};o.put({url:"/rank",data:c}).done(k).fail(e.reload)},l}),AJS.namespace("GH.WorkRanking",null,require("jira-agile/rapid/ui/work/work-ranking"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/WorkKBShortcuts.js' */
define("jira-agile/rapid/ui/work/work-kb-shortcuts",["jira-agile/rapid/ui/work/work-ranking"],function(o){"use strict";var r={};return r.sendToTop=function(r){o.sendToTop(r)},r.sendToBottom=function(r){o.sendToBottom(r)},r}),AJS.namespace("GH.WorkKBShortcuts",null,require("jira-agile/rapid/ui/work/work-kb-shortcuts"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/WindowActivityNotifier.js' */
define("jira-agile/rapid/window-activity-notifier",["underscore","jquery","jira-agile/rapid/events"],function(i,r,n){"use strict";var e=new n;return e._bindFocusBlur=function(){var n=this,e=!1,t=i.debounce(function(i){e||(i?n.trigger("focus"):n.trigger("blur"))},200),a=i.partial(t,!0),u=i.partial(t,!1);r(window).on({focus:a,blur:u,unload:function(){e=!0,n.trigger("unload")}})},e._bindFocusBlur(),e}),AJS.namespace("GH.windowActivityNotifier",null,require("jira-agile/rapid/window-activity-notifier"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/DurationsTimer.js' */
define("jira-agile/rapid/durations-timer",["jira-agile/rapid/events"],function(t){"use strict";function i(i){t(this),this._durations=i.slice(),this._accumulatedDuration=0,i.length&&(e.on("focus",this.start,this).on("blur",this.pause,this).on("unload",this.pause,this),this.start())}var e=GH.windowActivityNotifier;return i.prototype={start:function(){if(this._timeout)return this;var t=this._durations[0]-this._accumulatedDuration;if(t<0)return this._tick(),this;var i=this;return this._timeoutStart=new Date,this._timeout=setTimeout(function(){i._clearTimeout(),i._accumulatedDuration+=new Date-i._timeoutStart,i._tick()},t),this},pause:function(){return this._timeout&&(this._clearTimeout(),this._accumulatedDuration+=new Date-this._timeoutStart),this},destroy:function(){return this._clearTimeout(),e.off(this),this},_tick:function(){this.trigger("tick",this._durations[0]),this._durations.shift(),this._durations.length?this.start():this.destroy()},_clearTimeout:function(){this._timeout&&(clearTimeout(this._timeout),this._timeout=null)}},i}),AJS.namespace("GH.DurationsTimer",null,require("jira-agile/rapid/durations-timer"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ops/Poller.js' */
GH.Poller=function(o){function e(){a||(GH.log("onBlur: Disabling polling",GH.Logger.Contexts.refresh),a=!0,_.each(u,t))}function n(){a&&(GH.log("onFocus: Enabling polling",GH.Logger.Contexts.refresh),a=!1,_.each(u,g))}function t(o){null!=o.timeout&&(clearTimeout(o.timeout),o.timeout=null)}function i(o,e){if(o||null!=e.timeout){GH.log("Checking updates for: "+e.id,GH.Logger.Contexts.refresh);var n=_.partial(l,e),t=e.handler.call(e.context,o);return t&&t.done?void t.done(n):void n()}}function l(o){o.timeout=setTimeout(_.partial(i,!1,o),o.interval)}var r=3e4,u={},a=!1,g=_.partial(i,!0);return{init:function(){o.on("focus",n).on("blur",e).on("unload",e)},addPoller:function(o,e,n,t){"function"==typeof e&&(t=n,n=e,e=r),this.removePoller(o),GH.log("Adding poller: "+o,GH.Logger.Contexts.refresh);var i={id:o,interval:e,handler:n,context:t};u[o]=i,a||l(i)},removePoller:function(o){var e=u[o];e&&(GH.log("Removing poller: "+o,GH.Logger.Contexts.refresh),t(e),delete u[o])}}}(GH.windowActivityNotifier);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/state/RapidBoardState.js' */
define("jira-agile/rapid/state/rapid-board-state",["underscore","jira/util/logger","jira-agile/rapid/global-events"],function(e,t,a){var i=void 0;a.on("pre-initialization",function(){i=require("jira-agile/rapid/ui/plan/plan-url-state")});var n={};return n.VIEW_MODE={PLAN:"plan",WORK:"work",REPORT:"report"},n.data={},n.setDataValue=function(t,a){e.isUndefined(a)||e.isNull(a)?delete n.data[t]:n.data[t]=a},n.getDataValue=function(e){return n.data[e]},n.getMode=function(){return n.getDataValue("mode")||n.VIEW_MODE.WORK},n.getStoredMode=function(){return GH.storage.get("gh.mode")||n.VIEW_MODE.WORK},n.isPlanMode=function(){return n.getMode()===n.VIEW_MODE.PLAN},n.isWorkMode=function(){return n.getMode()===n.VIEW_MODE.WORK},n.setMode=function(e){n.setDataValue("mode",e),GH.storage.put("gh.mode",e)},n.getLastCardPrintingSize=function(){return GH.storage.get("gh.card.printing.size")||"small"},n.setLastCardPrintingSize=function(e){GH.storage.put("gh.card.printing.size",e)},n.getProjectKey=function(){return n.getDataValue("projectKey")||void 0},n.setProjectKey=function(e){n.setDataValue("projectKey",e)},n.isDetailsViewOpened=function(){return n.getDataValue("detailViewWork")||!1},n.isDetailsViewPlanOpened=function(){return n.getBoardSetting(null,"detailViewPlan",!0)||!1},n.getStoredDetailViewOpened=function(){return GH.storage.get("gh.detailViewWork")||!1},n.setWorkViewDetailsViewOpened=function(e){n.setDataValue("detailViewWork",e||!1),GH.storage.put("gh.detailViewWork",e||!1)},n.setPlanViewDetailsViewOpened=function(e){n.setBoardSetting("detailViewPlan",e||!1)},n.setEpicShownOnRapidBoard=function(e){GH.storage.put("gh.epicShownOnRapidBoard."+n.getRapidViewId(),e)},n.getEpicShownOnRapidBoard=function(){var t=GH.storage.get("gh.epicShownOnRapidBoard."+n.getRapidViewId());return!!e.isNull(t)||t},n.setNonWorkingDaysShown=function(e,t){GH.storage.put("gh.nonWorkingDaysShown."+e,t)},n.getNonWorkingDaysShown=function(t){var a=GH.storage.get("gh.nonWorkingDaysShown."+t);return!!e.isNull(a)||a},n.setQuickFiltersExpanded=function(e){GH.storage.put("gh.quickFiltersExpanded",e)},n.getQuickFiltersExpanded=function(){var t=GH.storage.get("gh.quickFiltersExpanded");return!e.isNull(t)&&t},n.setDetailViewWidth=function(e){GH.storage.put("gh.detailViewWidth",e)},n.getDetailViewWidth=function(){var t=GH.storage.get("gh.detailViewWidth");return e.isNull(t)?0:t},n.getCycleTimeCalculationType=function(){var t=n.getDataValue("cycleTimeCalculationType");return e.isUndefined(t)&&(t=GH.storage.get("gh.cycleTimeCalculationType"),e.isNull(t))?(n.setCycleTimeCalculationType(GH.ControlChart.CYCLE_TIME_CALCULATION_TOTAL),GH.ControlChart.CYCLE_TIME_CALCULATION_TOTAL):t},n.setCycleTimeCalculationType=function(e){n.setDataValue("cycleTimeCalculationType",e),GH.storage.put("gh.cycleTimeCalculationType",e)},n.getStoredChartIntroState=function(){return GH.storage.get("gh.charts.intro")!==!1},n.setChartIntroState=function(e){GH.storage.put("gh.charts.intro",e)},n.isChartViewOpened=function(){return n.getMode()===n.VIEW_MODE.REPORT},n.getRapidViewId=function(){var t=n.getDataValue("rapidViewId");return e.isUndefined(t)&&(t=n.getMostRecentRapidViewId()),t},n.getRapidViewIdWithInfo=function(){var t={};return t.viewId=n.getDataValue("rapidViewId"),t.fromLocalStorage=!1,e.isUndefined(t.viewId)&&(t.viewId=n.getMostRecentRapidViewId(),t.fromLocalStorage=!0),t},n.getMostRecentRapidViewId=function(){return GH.storage.get("gh.latestRapidViewId")},n.setRapidViewId=function(e){n.setDataValue("rapidViewId",e),GH.storage.put("gh.latestRapidViewId",e)},n.getSelectedIssueKey=function(){return n.getDataValue("selectedIssueKey")||null},n.getStoredSelectedIssueKey=function(){return GH.storage.get("gh.selectedIssueKey")||null},n.setSelectedIssueKey=function(e){n.setDataValue("selectedIssueKey",e),GH.storage.put("gh.selectedIssueKey",e)},n.setChartType=function(t){var a=n.getBoardSettings();e.isUndefined(t)||e.isNull(t)?delete a.chartType:a.chartType=t,n.setBoardSettings(a)},n.getChartType=function(){return n.getBoardSettings().chartType||""},n.getRetrospectiveSprintId=function(){return n.getBoardSettings().retrospectiveSprintId||!1},n.setRetrospectiveSprintId=function(e){return n.setBoardSetting("retrospectiveSprintId",e)},n.setTimeFrame=function(t){var a=n.getBoardSettings();e.isUndefined(t)||e.isNull(t)?delete a.timeFrame:a.timeFrame=t,n.setBoardSettings(a)},n.getTimeFrame=function(){var t=n.getBoardSettings().timeFrame;return e.isUndefined(t)||e.isNull(t)?7:t},n.getBoardSettings=function(t){(e.isUndefined(t)||e.isNull(t))&&(t=n.getRapidViewId());var a=t||"00000",i=n.getDataValue("boardSettings."+a)||GH.storage.get("gh.boardSettings."+a);return i||(i={},n.setDataValue("boardSettings."+a,i)),i||{}},n.setBoardSettings=function(e){var t=n.getRapidViewId();t&&(n.setDataValue("boardSettings."+t,e),GH.storage.put("gh.boardSettings."+t,e))},n.isSwimlaneCollapsed=function(e){var t=n.getBoardSettings().collapsedSwimlanes||[];return t.indexOf(e)>-1},n.setSwimlaneCollapsed=function(e,t){var a=n.getBoardSettings(),i=a.collapsedSwimlanes||[];if(t)i.indexOf(e)<0&&(i.push(e),a.collapsedSwimlanes=i);else{var r=i.indexOf(e);if(r<0)return;i.splice(r,1),i.length>0?a.collapsedSwimlanes=i:delete a.collapsedSwimlanes}n.setBoardSettings(a)},n.getBoardSetting=function(e,t,a){var i=n.getBoardSettings(e)[t];return void 0!==i?i:a},n.setBoardSetting=function(e,t){var a=n.getBoardSettings();void 0!==t?a[e]=t:delete a[e],n.setBoardSettings(a)},n.getNumberArrayBoardSetting=function(a,i,r){var o=n.getBoardSettings(a)[i]||r;return e.isArray(o)?(e.each(o,function(a){e.isNumber(a)||t.log("Warning: Property value is not of type number: "+a)}),o):(t.log("Property is not of type array, returning an empty array: "+i),[])},n.setNumberArrayBoardSetting=function(a,i){var r=n.getBoardSettings();if(void 0!==i){if(!e.isArray(i))return void t.log("Property is not of type array, returning an empty array: "+a);e.each(i,function(a){e.isNumber(a)||t.log("Warning: Property value is not of type number: "+a)}),r[a]=i}else delete r[a];n.setBoardSettings(r)},GH.BoardState={},GH.BoardState.setGlobalValue=function(e,t){n.setDataValue(e,t),GH.storage.put("gh."+e,t)},GH.BoardState.getGlobalValue=function(e,t){return n.getDataValue(e)||GH.storage.get("gh."+e)||t},GH.BoardState.setPerViewValue=function(e,t){n.setBoardSetting(e,t)},GH.BoardState.getPerViewValue=function(e,t){return n.getBoardSetting(null,e,t)},n.pushState=function(){GH.log("State.pushState",GH.Logger.Contexts.state),GH.RapidBoard.UrlState.pushState()},n.replaceState=function(){GH.log("State.replaceState",GH.Logger.Contexts.state),GH.RapidBoard.UrlState.replaceState()},n.initializeState=function(){n.setSelectedIssueKey(n.getStoredSelectedIssueKey()),n.setWorkViewDetailsViewOpened(n.getStoredDetailViewOpened());var e=n.getStoredMode();e!==n.VIEW_MODE.PLAN||n.isPlanModeAvailable()||(e=n.VIEW_MODE.WORK),n.setMode(e),n.setChartIntroState(n.getStoredChartIntroState()),GH.RapidBoard.UrlState.setHandlers([GH.RapidBoardUrlState,i,GH.WorkUrlState,GH.ReportUrlState]),GH.RapidBoard.UrlState.hasUrlState()&&GH.RapidBoard.UrlState.loadState();var a=n.isLoadingKanPlanWhileItDisabled();if(GH.RapidBoard.UrlState.replaceState(a),a){var r=require("jira-agile/rapid/ui/kanplan/kan-plan-feature-service");r.showKanPlanDisabledFlag()}else t.trace("gh.rapid.kanplan.not.enabled.message.not.shown");GH.RapidBoard.UrlState.init()},n.isPlanModeAvailable=function(){var e=require("jira-agile/rapid/ui/kanplan/kan-plan-feature-service");return n.isScrumBoard()||e.shouldShowKanbanBacklog()},n.isLoadingKanPlanWhileItDisabled=function(t){var a=GH.RapidBoard.UrlState.getCurrentUrlState();return t=t?t:GH.RapidBoard.UrlState.normalizeStringParam(a.view,""),!!e.isString(t)&&(t.indexOf("planning")>-1&&!n.isPlanModeAvailable())},n.isScrumBoard=function(){return GH.RapidViewConfig.currentData.data&&GH.RapidViewConfig.currentData.data.sprintSupportEnabled},n.isKanbanBoard=function(){return GH.RapidViewConfig.currentData.data&&!GH.RapidViewConfig.currentData.data.sprintSupportEnabled},n.getBoardType=function(){return n.isScrumBoard()?"scrum":"kanban"},n.getShowEpicAsPanel=function(){return GH.RapidViewConfig.currentData.data.showEpicAsPanel},n}),AJS.namespace("GH.RapidBoard.State",null,require("jira-agile/rapid/state/rapid-board-state"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/IssueActions.js' */
define("jira-agile/rapid/ui/plan/issue-actions",["require"],function(e){"use strict";var s,r,n=e("underscore"),i=e("jquery"),a=e("jira-agile/rapid/global-events"),t=e("jira-agile/rapid/analytics-tracker"),o=e("jira-agile/rapid/ui/plan/issue-move-controller");a.on("pre-initialization",function(){s=e("jira-agile/rapid/ui/plan/backlog-controller"),r=e("jira-agile/rapid/ui/plan/plan-drag-and-drop")});var u={};return u.Analytics={},u.Analytics.removeFromSprint=new t("gh.sprint.issue.remove"),u.removeIssuesFromSprint=function(e,s){n.isArray(s)||(s=[s]),GH.Ajax.get({url:"/sprint/rank/"+e+"/remove",data:{issues:s}},"removeIssuesFromActiveSprintsCheck").done(function(e){var s=o.confirmMove(e);s.done(u.removeIssuesFromCurrentSprints)})},u.removeIssuesFromCurrentSprints=function(e){var r=o.getAllIssueKeys(e);return GH.Ajax.put({url:"/sprint/rank/"+e.rapidViewId+"/remove",data:{rapidViewId:s.rapidViewData.id,idOrKeys:r}}).done(function(e){var s=e.success,r=o.getAllIssueKeys(s);u.showSprintRankSuccessMessage(s),i(GH).trigger("issuesRemovedFromSprint",{issueKeys:r}),u.Analytics.removeFromSprint.trigger("remove","removedIssuesCount",r.length)})},u.showSprintRankSuccessMessage=function(e){o.isOnlyRankOperation(e)||o.isRankBetweenFutureAndBacklog(e)||GH.Notification.showSuccess("Selection successfully moved.")},u._createIssueKeysLinkHtml=function(e){n.isArray(e)||(e=[e]);var s=n.map(e,function(e){return'<a href="'+GH.Ajax.CONTEXT_PATH+"/browse/"+e+'">'+AJS.escapeHTML(String(e))+"</a>"});return s.join(", ")},u.sendIssuesToBottomOfSprint=function(e,s){var i=n.last(s.getIssueList().getOrder());return r.rankIssues(e,s.getId(),i,null)},u.sendIssuesToSprint=function(e,s){return r.rankIssues(e,s.getId(),null,null)},u.sendIssuesToTopOfBacklog=function(e,s){var i=s.getIssueList(),a=i.getParentKey(n.first(i.getOrder()));r.rankIssues(e,null,null,a)},u.sendIssuesToBottomOfBacklog=function(e,s){var i=s.getIssueList(),a=i.getParentKey(n.last(i.getOrder()));r.rankIssues(e,null,a,null)},u.sendIssuesToBacklog=function(e){r.rankIssues(e,null,null,null)},u.flag=function(e,s,r,i,a,t){return n.isArray(e)||(e=[e]),GH.Ajax.post({url:"/xboard/issue/flag/flag.json",data:{issueKeys:e,flag:s,comment:r,commentVisibility:i,formToken:a,temporaryAttachments:t}}).done(function(e){n.has(e.success,"errorMessages")&&GH.Notification.showWarnings(n.map(e.success.errorMessages,function(e){return{autoHideDelay:1e4,message:e,noAutoescape:!0}}),{showTitle:!0})})},u.viewInIssueNavigator=function(e){var s=GH.Ajax.CONTEXT_PATH+"/secure/GHViewInNavigator.jspa?issueKeys="+encodeURIComponent(e.join(","));location.href=s},u.viewInExcel=function(e){var s=GH.Ajax.CONTEXT_PATH+"/sr/jira.issueviews:searchrequest-excel-all-fields/temp/SearchRequest.xls?jqlQuery=key+in+"+(encodeURIComponent("("+e.join(","))+")")+"&tempMax=1000";s.length>2e3?GH.Notification.showErrors({errors:[{message:"You have too many issues selected to export to Excel. Please select fewer issues and try again."}]}):location.href=s},u.bulkChange=function(e){var s=GH.Ajax.CONTEXT_PATH+"/secure/GHBulkChange.jspa?issueKeys="+encodeURIComponent(e.join(","));location.href=s},u});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/FlagAndAddCommentDialog.soy' */
// This file was automatically generated from FlagAndAddCommentDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialog.flagandcomment.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialog == 'undefined') { GH.tpl.dialog = {}; }
if (typeof GH.tpl.dialog.flagandcomment == 'undefined') { GH.tpl.dialog.flagandcomment = {}; }


GH.tpl.dialog.flagandcomment.dialogHeader = function(opt_data, opt_ignored) {
  return '<div class="flag-and-add-comment-header"><div class="flag-and-add-comment-summary"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-flag"></span>' + ((opt_data.isAdd) ? soy.$$escapeHtml(AJS.format("Add flag to {0}",opt_data.issueKeys)) : soy.$$escapeHtml(AJS.format("Remove flag from {0}",opt_data.issueKeys))) + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.dialog.flagandcomment.dialogHeader.soyTemplateName = 'GH.tpl.dialog.flagandcomment.dialogHeader';
}


GH.tpl.dialog.flagandcomment.comment = function(opt_data, opt_ignored) {
  return ((opt_data.isAdd) ? '(flag) ' + soy.$$escapeHtml("Flag added") : '(flagoff) ' + soy.$$escapeHtml("Flag removed")) + '\n\n' + soy.$$escapeHtml(opt_data.content);
};
if (goog.DEBUG) {
  GH.tpl.dialog.flagandcomment.comment.soyTemplateName = 'GH.tpl.dialog.flagandcomment.comment';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/IssueFlagAndCommentAction.js' */
define("jira-agile/rapid/ui/plan/issue-flag-and-comment-action",["jira/dialog/form-dialog","jira/dialog/dialog-util","jquery","underscore"],function(n,e,a,t){function i(n,e,t){return function(i){i.preventDefault();var o=this,d=a("#flag-and-add-comment-dialog").find(".jira-dialog-content form .comment-input"),l=d.find("textarea").val().trim(),r=l?GH.tpl.dialog.flagandcomment.comment({isAdd:e,content:l}):"",m=a("#flag-and-add-comment-dialog").find('[name="formToken"]'),u=m.val(),g=a('#flag-and-add-comment-dialog input[name="filetoconvert"]').toArray().map(function(n){return a(n).val()}),s=d.find(".security-level select option:selected").val(),c=s?s:"";GH.IssueActions.flag(n,e,r,c,u,g).always(function(){o.hide()}).done(t)}}function o(n,e){return e?AJS.format("Add flag and comment: {0} {0,choice,1#issue|1\u003cissues}",n.length):AJS.format("Remove flag and add comment: {0} {0,choice,1#issue|1\u003cissues}",n.length)}function d(n,e){return function(){var t=a("#flag-and-add-comment-dialog");t.find(".jira-dialog-heading > h2").html(o(n,e)).removeAttr("title");var i=t.find(".jira-dialog-content");i.prepend(GH.tpl.dialog.flagandcomment.dialogHeader({isAdd:e,issueKeys:n.join(", ")}));var d=i.find("form");d.addClass("ajs-dirty-warning-exempt");var l=t.find(".form-footer");l.find("p").remove(),l.find('.aui-button[type="submit"]').addClass("aui-button-primary")}}function l(a,t,o){var l=new n({id:"flag-and-add-comment-dialog",url:AJS.contextPath()+"/secure/GHBulkCommentDialog.jspa?issueKeys="+encodeURIComponent(a.join(",")),submitHandler:i(a,t,o),handleRedirect:!0,ajaxOptions:e.getDefaultAjaxOptions,isIssueDialog:!0,widthClass:"large"});return l.onContentReady(d(a,t)),l}var r={};return r.execute=function(n,e,a){t.isArray(n)||(n=[n]),l(n,e,a).show()},r}),AJS.namespace("GH.IssueFlagAndCommentAction.execute",null,require("jira-agile/rapid/ui/plan/issue-flag-and-comment-action").execute);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/ContextMenu.js' */
GH.ContextMenu=function(t){this.actionGroups=t.actionGroups,this.dropdown=null},GH.ContextMenu.menuSelector="#gh-ctx-menu",GH.ContextMenu.contentSelector="#gh-ctx-menu-content",GH.ContextMenu.triggerSelector="#gh-ctx-menu-trigger",GH.ContextMenu.prototype._executeContextAction=function(t){var e=this._findActionById(t);e.actionFn()},GH.ContextMenu.prototype._findActionById=function(t){var e=[];return _.each(this.actionGroups,function(t){e=e.concat(t.actions)}),_.find(e,function(e){return e.id===t})},GH.ContextMenu.prototype.showAt=function(t){if(_.isUndefined(t)||_.isNull(t))return void AJS.log("Cannot show the issue context menu: expected an event object to be passed");this._initDropdown();var e=t.pageX,n=t.pageY,o=AJS.$(GH.ContextMenu.contentSelector),r=o.height();GH.Util.UI.isVisibleY(n+r)||(n-=r),this._positionDropdownAt(e,n),this.dropdown.show()},GH.ContextMenu.prototype._positionDropdownAt=function(t,e){AJS.$(GH.ContextMenu.triggerSelector).offset({left:t,top:e})},GH.ContextMenu.prototype._initDropdown=function(){AJS.$("#gh-ctx-menu").remove();var t=GH.tpl.contextmenu.renderContextMenu({ctxActionGroups:this.actionGroups});AJS.$("#gh").append(t);var e=this,n=AJS.$(GH.ContextMenu.contentSelector);n.click(function(t){var n=AJS.$(t.target).closest(".js-context-menu-action"),o=n.attr("data-ctx-action");_.isUndefined(o)||o===!1||(e._executeContextAction(o),t.preventDefault())});var o={content:n,trigger:AJS.$(GH.ContextMenu.triggerSelector),alignment:AJS.LEFT};this.dropdown=AJS.Dropdown.create(o)[0];var r=this.dropdown.layerController._validateClickToClose,i=function(t){return 2!==t.button&&(!r||r.apply(this,arguments))};this.dropdown.layerController._validateClickToClose=i},GH.ContextMenu.prototype.hide=function(){this.dropdown&&this.dropdown.hide(),AJS.$(GH.ContextMenu.menuSelector).remove(),AJS.$(GH.ContextMenu.contentSelector).remove(),AJS.$(GH.ContextMenu.triggerSelector).remove(),AJS.$(GH.ContextMenu.triggerSelector+"_drop").remove()};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/ContextMenu.soy' */
// This file was automatically generated from ContextMenu.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.contextmenu.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.contextmenu == 'undefined') { GH.tpl.contextmenu = {}; }


GH.tpl.contextmenu.renderContextMenu = function(opt_data, opt_ignored) {
  var output = '<div id="gh-ctx-menu" class="aui-dd-parent"><div id="gh-ctx-menu-trigger" class="aui-dd-trigger" style="width:1px; height:1px; position:absolute;"></div><div id="gh-ctx-menu-content" class="aui-list">';
  var ctxActionGroupList4 = opt_data.ctxActionGroups;
  var ctxActionGroupListLen4 = ctxActionGroupList4.length;
  for (var ctxActionGroupIndex4 = 0; ctxActionGroupIndex4 < ctxActionGroupListLen4; ctxActionGroupIndex4++) {
    var ctxActionGroupData4 = ctxActionGroupList4[ctxActionGroupIndex4];
    output += GH.tpl.contextmenu.renderContextActionGroup({ctxActionGroup: ctxActionGroupData4, isLast: ctxActionGroupIndex4 == ctxActionGroupListLen4 - 1});
  }
  output += '</div></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.contextmenu.renderContextMenu.soyTemplateName = 'GH.tpl.contextmenu.renderContextMenu';
}


GH.tpl.contextmenu.renderContextActionGroup = function(opt_data, opt_ignored) {
  var output = ((opt_data.ctxActionGroup.label) ? '<h5>' + soy.$$escapeHtml(opt_data.ctxActionGroup.label) + '</h5>' : '') + '<ul class="aui-list-section aui-first ' + ((opt_data.isLast) ? 'aui-last' : '') + '">';
  var ctxActionList21 = opt_data.ctxActionGroup.actions;
  var ctxActionListLen21 = ctxActionList21.length;
  for (var ctxActionIndex21 = 0; ctxActionIndex21 < ctxActionListLen21; ctxActionIndex21++) {
    var ctxActionData21 = ctxActionList21[ctxActionIndex21];
    output += GH.tpl.contextmenu.renderContextAction({ctxAction: ctxActionData21});
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.contextmenu.renderContextActionGroup.soyTemplateName = 'GH.tpl.contextmenu.renderContextActionGroup';
}


GH.tpl.contextmenu.renderContextAction = function(opt_data, opt_ignored) {
  var output = '<li id="' + soy.$$escapeHtml(opt_data.ctxAction.id) + '-container" class="aui-list-item"><a  data-ctx-action="' + soy.$$escapeHtml(opt_data.ctxAction.id) + '" id="' + soy.$$escapeHtml(opt_data.ctxAction.id) + '" class="aui-list-item-link js-context-menu-action" title="' + soy.$$escapeHtml(opt_data.ctxAction.label) + '" href="#" >' + soy.$$escapeHtml(opt_data.ctxAction.label);
  if (opt_data.ctxAction.shortcut) {
    output += '<span class="ghx-shortcut">';
    var keyList40 = opt_data.ctxAction.shortcut.keys;
    var keyListLen40 = keyList40.length;
    for (var keyIndex40 = 0; keyIndex40 < keyListLen40; keyIndex40++) {
      var keyData40 = keyList40[keyIndex40];
      output += (keyIndex40 == 0) ? soy.$$escapeHtml(keyData40) : '<span class="ghx-separator">' + soy.$$escapeHtml(opt_data.ctxAction.shortcut.separator) + '</span><span class="ghx-monospace">' + soy.$$escapeHtml(keyData40) + '</span>';
    }
    output += '</span>';
  }
  output += '</a></li>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.contextmenu.renderContextAction.soyTemplateName = 'GH.tpl.contextmenu.renderContextAction';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/PlanContextMenuController.js' */
define("jira-agile/rapid/ui/plan/plan-context-menu-controller",["require"],function(e){"use strict";function t(e){var t=c.getSprintModels(),n=[],i=function(e){var s=null;return a.find(t,function(t){return s=t.getIssueList().getAllIssues()[e],!!s}),s||null},o=function(e){var t=c.getBacklogModel2().getIssueList();return t.getAllIssues()[e]};return a.each(e,function(e){var t=i(e)||o(e);t&&n.push(t)}),{issues:n,epics:s.getEpicMap(),viewMode:"plan",boardType:GH.RapidBoard.State.getBoardType()}}var s,n,a=e("underscore"),i=e("jquery"),o=e("jira-agile/rapid/global-events"),l=e("jira-agile/rapid/analytics-tracker"),c=e("jira-agile/rapid/ui/plan/backlog-model"),u=e("jira-agile/rapid/ui/plan/issue-actions"),g=e("jira-agile/rapid/ui/print/card-printing-controller"),r=e("jira-agile/rapid/ui/plan/contextmenu/split-issue-action");o.on("pre-initialization",function(){s=e("jira-agile/rapid/ui/plan/backlog-controller"),n=e("jira-agile/rapid/ui/plan/backlog-selection-controller")});var d={};return d.ctxMenu=null,d.Analytics={},d.Analytics.show=new l("gh.issue.ctx.menu.show"),d.Analytics.action=new l("gh.issue.ctx.menu.action"),d.resolveContext=function(){var e=n.getSelectedAndVisibleIssuesInOrder(),t=c.findModelWithIssue(a.first(e));if(t){var s=c.getSprintModels(),i=c.getBacklogModel2(),o=c.hasBulkChangePermission,l=a.chain(t.getIssueList().getAllIssues()).pick(e).values().value(),u=a.any(e,function(e){var s=t.getIssueList().getIssueData(e);if(s.parentId)return!0}),g={containsSubtasks:u,singleIssue:1===e.length,selectedIssues:e,selectedIssuesData:l,sprintModels:s,backlogModel2:i,currentModel:t,flaggedIssuesCount:a.where(l,{flagged:!0}).length,hasBulkChangePermission:o};return g}},d.showContextMenuAt=function(e){if(d.hideContextMenu(),!(i(e.target).closest("a").length>0)){var t=d.resolveContext(),s={actionGroups:d.resolveActionsForContext(t)};d.ctxMenu=new GH.ContextMenu(s),d.ctxMenu.showAt(e),e.preventDefault(),i(GH.ContextMenu.menuSelector).focus(),d.Analytics.show.trigger(t.type,"selectedIssuesCount",t.selectedIssues.length)}},d.resolveActionsForContext=function(e){var n=[],i=[];if(0===e.selectedIssues.length)return n;a.each(e.sprintModels,function(t){if(t.getId()!==e.currentModel.getId()){var s=t.isActiveSprint()?"send to active sprint":"send to future sprint";i.push({id:"ghx-issue-ctx-action-send-to-sprint-"+t.getSprintId(),name:s,label:t.getSprintData().name,actionFn:function(){var n=e.containsSubtasks?u.sendIssuesToSprint:u.sendIssuesToBottomOfSprint;n(e.selectedIssues,t).done(function(){d.Analytics.action.trigger(s,"selectedIssuesCount",e.selectedIssues.length)})}})}}),e.containsSubtasks?e.backlogModel2.getId()!==e.currentModel.getId()&&i.push({id:"ghx-issue-ctx-action-send-backlog",name:"send to backlog",label:"Backlog",actionFn:function(){u.sendIssuesToBacklog(e.selectedIssues),d.Analytics.action.trigger(this.name,"selectedIssuesCount",e.selectedIssues.length)}}):(i.push({id:"ghx-issue-ctx-action-send-top-backlog",name:"send to top of backlog",label:"Top of Backlog",actionFn:function(){u.sendIssuesToTopOfBacklog(e.selectedIssues,e.backlogModel2),d.Analytics.action.trigger(this.name,"selectedIssuesCount",e.selectedIssues.length)}}),i.push({id:"ghx-issue-ctx-action-send-bottom-backlog",name:"send to bottom of backlog",label:"Bottom of Backlog",actionFn:function(){u.sendIssuesToBottomOfBacklog(e.selectedIssues,e.backlogModel2),d.Analytics.action.trigger(this.name,"selectedIssuesCount",e.selectedIssues.length)}})),c.isRankable()&&i.length&&n.push({label:"Send to",actions:i});var o={id:"ghx-issue-ctx-action-view-in-navigator",name:"view in navigator",label:"View in Issue navigator",actionFn:function(){u.viewInIssueNavigator(e.selectedIssues),d.Analytics.action.trigger(this.name,"selectedIssuesCount",e.selectedIssues.length)}},l={id:"ghx-issue-ctx-action-view-in-excel",name:"view in excel",label:"View in Excel",actionFn:function(){u.viewInExcel(e.selectedIssues),d.Analytics.action.trigger(this.name,"selectedIssuesCount",e.selectedIssues.length)}},h={id:"ghx-issue-ctx-action-bulk-change",name:"bulk change",label:"Bulk Change",actionFn:function(){u.bulkChange(e.selectedIssues),d.Analytics.action.trigger(this.name,"selectedIssuesCount",e.selectedIssues.length)}};if(e.singleIssue){var p={id:"ghx-issue-ctx-action-delete",name:"delete",label:"Delete",actionFn:function(){GH.IssueOperationShortcuts.deleteSelectedIssue(),AJS.trigger("analytics",{name:"gh.issue.ctx.menu.action.delete"})}};n.push({actions:[p]})}var I,f;if(e.flaggedIssuesCount!==e.selectedIssues.length?(I={id:"ghx-issue-ctx-action-flag-toggle",name:"flag",label:"Add flag",actionFn:function(){u.flag(e.selectedIssues,!0).done(function(){s.loadData()}),AJS.trigger("analytics",{name:"gh.issue.ctx.menu.action.flag",data:{selectedIssueCount:e.selectedIssues.length}})}},f={id:"ghx-issue-ctx-action-flag-and-comment",name:"flag-and-comment",label:"Add flag and comment",actionFn:function(){GH.IssueFlagAndCommentAction.execute(e.selectedIssues,!0,GH.BacklogController.loadData),AJS.trigger("analytics",{name:"gh.issue.ctx.menu.action.flag.with.comment",data:{selectedIssueCount:e.selectedIssues.length}})}}):(I={id:"ghx-issue-ctx-action-unflag",name:"unflag",label:"Remove flag",actionFn:function(){u.flag(e.selectedIssues,!1).done(function(){s.loadData()}),AJS.trigger("analytics",{name:"gh.issue.ctx.menu.action.unflag",data:{selectedIssueCount:e.selectedIssues.length}})}},f={id:"ghx-issue-ctx-action-unflag-and-comment",name:"unflag-and-comment",label:"Remove flag and add comment",actionFn:function(){GH.IssueFlagAndCommentAction.execute(e.selectedIssues,!1,GH.BacklogController.loadData),AJS.trigger("analytics",{name:"gh.issue.ctx.menu.action.unflag.with.comment",data:{selectedIssueCount:e.selectedIssues.length}})}}),n.push({actions:[I,f]}),r.appendMenuItem(e,n),n.push({actions:[o,l]}),e.hasBulkChangePermission&&n.push({actions:[h]}),e.singleIssue){var x={id:"ghx-issue-ctx-action-print-cards",name:"print cards",label:AJS.format("Print selected {0,choice,1# card|1\u003c cards}",e.selectedIssues.length),actionFn:function(){g.printSelectedIssues(t(e.selectedIssues))}};n.push({actions:[x]})}return n},d.hideContextMenu=function(){null!=d.ctxMenu&&(d.ctxMenu.hide(),d.ctxMenu=null)},d});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/print/card-printing.soy' */
// This file was automatically generated from card-printing.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.rapid.print.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.rapid == 'undefined') { GH.tpl.rapid = {}; }
if (typeof GH.tpl.rapid.print == 'undefined') { GH.tpl.rapid.print = {}; }


GH.tpl.rapid.print.printCardScreen = function(opt_data, opt_ignored) {
  var output = '';
  var hasIssue__soy3 = opt_data.issues && opt_data.issues.length > 0;
  output += '<div id="ghx-print-toolbar">' + ((hasIssue__soy3) ? '<div class="ghx-print-toolbar-left ghx-print-toolbar-item"><span class="ghx-print-toolbar-label">' + soy.$$escapeHtml("Card size") + '</span><span class="ghx-print-card-size-trigger"> </span><span class="ghx-print-card-size-options"> </span><span class="ghx-print-filter-label ghx-print-toolbar-label">' + soy.$$escapeHtml("Select") + '</span><span class="ghx-print-filter-trigger"> </span><span class="ghx-print-filter-options"> </span></div><div class="ghx-print-toolbar-right ghx-print-toolbar-item"><span id="ghx-print-toolbar-issue-count" ' + ((opt_data.warnIssueCount) ? 'class="warning"' : '') + '>' + soy.$$escapeHtml(AJS.format("{0,choice,0#0 issues|1#1 issue|2#{0} issues}",opt_data.issues.length)) + '</span><button id="ghx-print-card-print-btn" class="aui-button aui-button-primary">' + soy.$$escapeHtml("Print") + '</button></div>' : '') + '</div><div class="ghx-print-content-sizing ghx-print-' + soy.$$escapeHtml(opt_data.cardSize) + '">' + GH.tpl.rapid.print.printCardPageContent(opt_data) + '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.print.printCardScreen.soyTemplateName = 'GH.tpl.rapid.print.printCardScreen';
}


GH.tpl.rapid.print.printCardPageContent = function(opt_data, opt_ignored) {
  return '' + ((opt_data.issues && opt_data.issues.length > 0) ? GH.tpl.rapid.print.printCards(opt_data) : '<div class="aui-message aui-message-warning">' + soy.$$escapeHtml("There is no issue to print") + '</div>');
};
if (goog.DEBUG) {
  GH.tpl.rapid.print.printCardPageContent.soyTemplateName = 'GH.tpl.rapid.print.printCardPageContent';
}


GH.tpl.rapid.print.printCards = function(opt_data, opt_ignored) {
  var output = '';
  var issueList40 = opt_data.issues;
  var issueListLen40 = issueList40.length;
  for (var issueIndex40 = 0; issueIndex40 < issueListLen40; issueIndex40++) {
    var issueData40 = issueList40[issueIndex40];
    output += '<div class="ghx-card ' + ((issueData40.cardPrintingCategory) ? soy.$$escapeHtml(issueData40.cardPrintingCategory) : '') + '">' + GH.tpl.rapid.print.printOneCard({issue: issueData40, epics: opt_data.epics, showEpic: opt_data.showEpic}) + '</div>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.print.printCards.soyTemplateName = 'GH.tpl.rapid.print.printCards';
}


GH.tpl.rapid.print.printOneCard = function(opt_data, opt_ignored) {
  return '<div class="ghx-card-content">' + GH.tpl.rapid.print.printCardHeaderRow(opt_data) + '<div class="ghx-card-summary">' + soy.$$escapeHtml(opt_data.issue.summary) + '<span class="ellipsis">&#133;</span><span class="obscurer"> </span></div>' + GH.tpl.rapid.print.printCardExtraFields(opt_data) + GH.tpl.rapid.print.printCardFooterRow(opt_data) + '</div><div class="ghx-card-color" ' + ((opt_data.issue.color != null) ? 'style="border-color:' + soy.$$escapeHtml(opt_data.issue.color) + ';"' : '') + '></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.print.printOneCard.soyTemplateName = 'GH.tpl.rapid.print.printOneCard';
}


GH.tpl.rapid.print.printCardHeaderRow = function(opt_data, opt_ignored) {
  return '<div class="ghx-card-header">' + ((opt_data.issue.typeUrl) ? '<div class="ghx-card-icon"><img src="' + soy.$$escapeHtml(opt_data.issue.typeUrl) + '"></div>' : '') + ((opt_data.issue.flagged) ? '<div class="ghx-card-icon"><div class="aui-icon aui-icon-small aui-iconfont-flag"></div></div>' : (opt_data.issue.priorityUrl) ? '<div class="ghx-card-icon"><img src="' + soy.$$escapeHtml(opt_data.issue.priorityUrl) + '"></div>' : '') + '<div class="ghx-card-key">' + soy.$$escapeHtml(opt_data.issue.key) + '</div><div class="ghx-row-end">' + GH.tpl.avatar.renderIssueAvatar({issue: opt_data.issue, drawAvatarTextBorder: true}) + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.print.printCardHeaderRow.soyTemplateName = 'GH.tpl.rapid.print.printCardHeaderRow';
}


GH.tpl.rapid.print.printCardExtraFields = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.issue.extraFields) {
    output += '<div class="ghx-card-extra-fields">';
    var extraFieldList97 = opt_data.issue.extraFields;
    var extraFieldListLen97 = extraFieldList97.length;
    for (var extraFieldIndex97 = 0; extraFieldIndex97 < extraFieldListLen97; extraFieldIndex97++) {
      var extraFieldData97 = extraFieldList97[extraFieldIndex97];
      output += '<div class="ghx-card-xfield-row"><div class="ghx-card-xfield-label">' + soy.$$escapeHtml(extraFieldData97.label) + '</div><div class="ghx-card-xfield-value">' + ((extraFieldData97.renderedContent) ? (extraFieldData97.useSoyNoAutoescape) ? soy.$$filterNoAutoescape(extraFieldData97.renderedContent) : soy.$$escapeHtml(extraFieldData97.renderedContent) : soy.$$escapeHtml("None")) + '</div></div>';
    }
    output += '</div>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.print.printCardExtraFields.soyTemplateName = 'GH.tpl.rapid.print.printCardExtraFields';
}


GH.tpl.rapid.print.printCardFooterRow = function(opt_data, opt_ignored) {
  var output = '';
  var epic__soy115 = opt_data.epics && opt_data.issue.epic ? opt_data.epics[opt_data.issue.epic] : opt_data.issue.epicField;
  var hasVersion__soy116 = opt_data.issue.fixVersionsUI && opt_data.issue.fixVersionsUI.versions && opt_data.issue.fixVersionsUI.versions.length > 0;
  var hasEpic__soy117 = opt_data.showEpic && epic__soy115;
  var estimation__soy118 = opt_data.issue.estimateStatistic;
  var hasEstimate__soy119 = estimation__soy118 && estimation__soy118.statFieldId != 'issueCount' && estimation__soy118.statFieldValue && estimation__soy118.statFieldValue.text;
  output += '<div class="ghx-card-footer">';
  if (hasVersion__soy116) {
    var lozengeWidthClass__soy123 = hasEpic__soy117 && hasEstimate__soy119 ? 'ghx-card-lozenges-3' : hasEpic__soy117 || hasEstimate__soy119 ? 'ghx-card-lozenges-2' : '';
    output += '<span class="aui-label ghx-card-version ' + soy.$$escapeHtml(lozengeWidthClass__soy123) + '">' + ((opt_data.issue.fixVersionsUI.versions.length > 1) ? soy.$$escapeHtml(opt_data.issue.fixVersionsUI.versions.length) + ' ' + soy.$$escapeHtml("Versions") : soy.$$escapeHtml(opt_data.issue.fixVersionsUI.versions[0].name)) + '</span>';
  }
  if (hasEpic__soy117) {
    var lozengeWidthClass__soy137 = hasVersion__soy116 && hasEstimate__soy119 ? 'ghx-card-lozenges-3' : hasVersion__soy116 || hasEstimate__soy119 ? 'ghx-card-lozenges-2' : '';
    output += '<span class="aui-label ' + soy.$$escapeHtml(epic__soy115.epicColor) + ' ' + soy.$$escapeHtml(lozengeWidthClass__soy137) + '">' + ((epic__soy115.epicLabel) ? soy.$$escapeHtml(epic__soy115.epicLabel) : (epic__soy115.text) ? soy.$$escapeHtml(epic__soy115.text) : soy.$$escapeHtml("unlabelled") + '-' + soy.$$escapeHtml(opt_data.issue.epicField.epicKey)) + '</span>';
  }
  if (hasEstimate__soy119) {
    var estimateWidthClass__soy155 = hasVersion__soy116 && hasEpic__soy117 ? 'ghx-card-estimate-3' : hasVersion__soy116 || hasEpic__soy117 ? 'ghx-card-estimate-2' : 'ghx-card-estimate-1';
    output += '<div class="ghx-row-end"><div class="aui-badge ghx-card-estimate ' + soy.$$escapeHtml(estimateWidthClass__soy155) + '">' + soy.$$escapeHtml(estimation__soy118.statFieldValue.text) + '</div></div>';
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.print.printCardFooterRow.soyTemplateName = 'GH.tpl.rapid.print.printCardFooterRow';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/print/CardPrintingAnalytic.js' */
define("jira-agile/rapid/ui/print/card-printing-analytic",["jquery"],function(t){"use strict";function e(t){this.context=t}function i(e){var i=e.actionContext;e.AJS.trigger("analytics",{name:r({triggeredFrom:i.triggeredFrom,boardType:i.boardType,viewMode:i.viewMode,cardSize:a.getLastCardPrintingSize()}),data:{issueCount:t(".ghx-card").length-t(".ghx-card-filtered-out").length}})}function r(t){return["gh.cardprinting.",t.triggeredFrom,".",t.boardType,".",t.viewMode,".",t.cardSize,".",n()].join("")}function n(){var e=t("#subnav-trigger-ghx-print-filter-cbx").data("selected-filter-type");return e?e:"notApplicable"}var a=GH.RapidBoard.State;return e.prototype.registerForPrintEvent=function(){if(window.matchMedia){var e=window.matchMedia("print");e.addListener(t.proxy(function(t){t.matches||i(this.context)},this))}window.onafterprint=t.proxy(function(){i(this.context)},this)},e.takeNoteSelectedFilterId=function(e){var i;i=isNaN(e)?e:parseInt(e)===-1?"selected4dev":"sprint",t("#subnav-trigger-ghx-print-filter-cbx").data("selected-filter-type",i)},e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/print/CardPrintingView.js' */
define("jira-agile/rapid/ui/print/card-printing-view",["underscore","jquery","jira-agile/rapid/ui/print/card-printing-analytic"],function(t,e,i){"use strict";function n(i){var n=GH.tpl.rapid.print.printCardScreen(e.extend({},i,{showEpic:g.getEpicShownOnRapidBoard(),cardSize:g.getLastCardPrintingSize(),warnIssueCount:a(t.size(i.issues))})),d=r();window.cardPrintingContext={filterItems:i.filterItems,selectedItem:i.selectedItem,actionContext:i.actionContext,AJS:AJS};var c=window.open();c.document.write([o(),"<html>","<head>",d,"</head>",'<body id="jira" class="ghx-print-card-body">',n,'<script type="text/javascript">','   var CardPrintingView = require("jira-agile/rapid/ui/print/card-printing-view");',"   CardPrintingView.initPrintScreen();","   if (window.stop) {","       window.stop();","       }","</script>","</body></html>"].join("")),c.document.close()}function r(){var t=[];return e("head").children().each(function(i,n){e(n).is("title, style, base, link, meta, script, noscript")&&t.push(e(n)[0].outerHTML)}),t.join("")}function o(){var t=document.doctype;return["<!DOCTYPE ",t.name,t.publicId?' PUBLIC "'+t.publicId+'"':"",!t.publicId&&t.systemId?" SYSTEM":"",t.systemId?' "'+t.systemId+'"':"",">"].join("")}function a(t){return t>=p}function d(){var t=[{id:"small",label:"Small"},{id:"medium",label:"Medium"},{id:"large",label:"Large"}],i=new JIRA.Projects.Subnavigator({id:"ghx-print-card-size-dropdown",triggerPlaceholder:"#ghx-print-toolbar .ghx-print-card-size-trigger",contentPlaceholder:"#ghx-print-toolbar .ghx-print-card-size-options",itemGroups:t,selectedItem:g.getLastCardPrintingSize(),hideSelectedItem:!0});i.show(),i.on("itemSelected",function(t){t.preventDefault();var i=t.item.id;e(".ghx-print-content-sizing").removeClass().addClass("ghx-print-content-sizing ghx-print-"+i),g.setLastCardPrintingSize(i)})}function c(t){e("#ghx-print-toolbar").on("click","#ghx-print-card-print-btn",function(){window.print()}),e("#ghx-print-toolbar-issue-count").tooltip({title:function(){return e("#ghx-print-toolbar-issue-count").hasClass("warning")?"Too many issues? If not, go ahead and print them!":""}});var n=new i({actionContext:t.actionContext,AJS:t.AJS});n.registerForPrintEvent()}function s(n,r){if(t.isEmpty(n))e("#ghx-print-toolbar").find(".ghx-print-filter-label").css("display","none");else{var o=new JIRA.Projects.Subnavigator({id:"ghx-print-filter-cbx",triggerPlaceholder:"#ghx-print-toolbar .ghx-print-filter-trigger",contentPlaceholder:"#ghx-print-toolbar .ghx-print-filter-options",itemGroups:n,selectedItem:r,hideSelectedItem:!0});o.show(),i.takeNoteSelectedFilterId(r),o.on("itemSelected",function(t){t.preventDefault(),e(".ghx-card").addClass("ghx-card-filtered-out");var n=t.item.id,r=".sprint-"+n;"backlog"===n?r=".backlog":"all"===n&&(r=".ghx-card");var o=e(r);o.removeClass("ghx-card-filtered-out"),l(o.length),i.takeNoteSelectedFilterId(n)})}}function l(t){if(e("#ghx-print-toolbar").find(".ghx-print-toolbar-item").css("display",t?"":"none"),t){var i=e("#ghx-print-toolbar-issue-count");i.empty().append(AJS.format("{0,choice,0#0 issues|1#1 issue|2#{0} issues}",t)),a(t)?i.addClass("warning"):i.removeClass("warning")}}var p=400,g=GH.RapidBoard.State,u={showPrintScreen:function(t){n(t)},initPrintScreen:function(){var t=window.opener.cardPrintingContext;window.opener.cardPrintingContext=void 0,d(),s(t.filterItems,t.selectedItem),c(t)}};return u});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/print/CardPrintingController.js' */
define("jira-agile/rapid/ui/print/card-printing-controller",["underscore","jquery","jira-agile/rapid/ui/print/card-printing-view"],function(e,i,r){"use strict";function n(i){var r=[];return e.each(i.sprintIssues,function(e){r.push.apply(r,t("sprint-"+e.sprintId,e.issues))}),r.push.apply(r,t("backlog",i.backlogIssues)),r}function t(i,r){return e.map(r,function(r){return e.extend({cardPrintingCategory:i},r)})}function s(i){var r=[],n=e.filter(i.sprintIssues,function(i){return e.size(i.issues)>0}),t=e.map(n,function(e){return{id:e.sprintId.toString(),label:e.sprintName}});return(e.size(t)>1||1===e.size(t)&&!e.isEmpty(i.backlogIssues))&&(r.push([{id:a,label:"Backlog"},{id:o,label:"All issues"}]),r.push(t)),r}var o="all",a="backlog",u={printSelectedIssues:function(e){r.showPrintScreen({issues:e.issues,epics:e.epics,actionContext:{triggeredFrom:"contextMenu",viewMode:e.viewMode,boardType:e.boardType}})},printBoardPlanView:function(e){r.showPrintScreen({issues:n(e),filterItems:s(e),selectedItem:o,epics:e.epics,actionContext:{triggeredFrom:"boardMenu",viewMode:e.viewMode,boardType:e.boardType}})},printBoardWorkView:function(e){r.showPrintScreen({issues:e.issues,actionContext:{triggeredFrom:"boardMenu",viewMode:e.viewMode,boardType:e.boardType}})}};return u});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/WorkContextMenuController.js' */
define("jira-agile/rapid/ui/work/work-context-menu-controller",["jira-agile/rapid/ui/work/grid-data-controller","jira-agile/rapid/ui/plan/issue-actions","jira/util/formatter","underscore","jquery","jira-agile/rapid/analytics-tracker","jira-agile/rapid/ui/print/card-printing-controller"],function(e,t,n,s,a,o,i){"use strict";var l={};return l.ctxMenu=null,l.Analytics={},l.Analytics.show=new o("gh.issue.ctx.menu.show"),l.Analytics.action=new o("gh.issue.ctx.menu.action"),l.showContextMenuAt=function(e,t){if(l.hideContextMenu(),!(a(e.target).closest("a").length>0)){var n=l.resolveContext(t),s={actionGroups:l.resolveActionsForContext(n)};l.ctxMenu=new GH.ContextMenu(s),l.ctxMenu.showAt(e),e.preventDefault(),a(GH.ContextMenu.menuSelector).focus(),l.Analytics.show.trigger(n.type,"selectedIssuesCount",n.selectedIssues.length)}},l.resolveContext=function(t){var n=GH.WorkSelectionController.getSelectedIssuesInOrder(),a=s.extend({selectedIssues:n},t);a.type=GH.WorkControls.getBoardType();var o=!1,i=e.getModel().getIssueDataByKeys(n);return a.selectedIssuesData=i,a.flaggedIssuesCount=s.where(i,{flagged:!0}).length,s.every(i,function(e){return!e.parentId||(o=!0,!1)}),a.hasSubtasks=o,a.hasBulkChangePermission=e.hasBulkChangePermission,a},l.resolveActionsForContext=function(o){function r(t,n,o){return function(){if(n){var t=e.getModel().getIssueDataByKeys(t);s.each(t,function(e){e.flagged=o,o?a("#ghx-pool").find(".ghx-swimlane-header[data-issue-key='"+e.key+"']").addClass("ghx-flagged"):a("#ghx-pool").find(".ghx-swimlane-header[data-issue-key='"+e.key+"']").removeClass("ghx-flagged")})}else GH.WorkController.reload()}}var c=[],u=a(".ghx-swimlane-header").length>1,g=l.getSendToTopAction(o,u?"Top of Swimlane":"Top of Column"),d=l.getSendToBottomAction(o,u?"Bottom of Swimlane":"Bottom of Column");if(c.push({label:"Send to",actions:[g,d]}),"scrum"===o.type&&!o.hasSubtasks&&!o.swimlane){var h={id:"ghx-issue-ctx-action-remove-from-sprint",name:"remove from sprint",label:"Remove from Sprint",actionFn:function(){t.removeIssuesFromSprint(GH.WorkController.rapidViewData.id,o.selectedIssues),l.Analytics.action.trigger(this.name,"selectedIssuesCount",o.selectedIssues.length)}};c.push({actions:[h]})}if(1===o.selectedIssues.length){var m={id:"ghx-issue-ctx-action-delete",name:"delete",label:"Delete",actionFn:function(){GH.IssueOperationShortcuts.deleteSelectedIssue(),AJS.trigger("analytics",{name:"gh.issue.ctx.menu.action.delete"})}};c.push({actions:[m]})}var p,x;if(o.flaggedIssuesCount!==o.selectedIssues.length?(p={id:"ghx-issue-ctx-action-flag-toggle",name:"flag",label:"Add flag",actionFn:function(){t.flag(o.selectedIssues,!0).done(r(o.selectedIssues,o.swimlane,!0)),AJS.trigger("analytics",{name:"gh.issue.ctx.menu.action.flag",data:{selectedIssueCount:o.selectedIssues.length}})}},x={id:"ghx-issue-ctx-action-flag-and-comment",name:"flag-and-comment",label:"Add flag and comment",actionFn:function(){GH.IssueFlagAndCommentAction.execute(o.selectedIssues,!0,r(o.selectedIssues,o.swimlane,!0)),AJS.trigger("analytics",{name:"gh.issue.ctx.menu.action.flag.with.comment",data:{selectedIssueCount:o.selectedIssues.length}})}}):(p={id:"ghx-issue-ctx-action-unflag",name:"unflag",label:"Remove flag",actionFn:function(){t.flag(o.selectedIssues,!1).done(r(o.selectedIssues,o.swimlane,!1)),AJS.trigger("analytics",{name:"gh.issue.ctx.menu.action.unflag",data:{selectedIssueCount:o.selectedIssues.length}})}},x={id:"ghx-issue-ctx-action-unflag-and-comment",name:"unflag-and-comment",label:"Remove flag and add comment",actionFn:function(){GH.IssueFlagAndCommentAction.execute(o.selectedIssues,!1,r(o.selectedIssues,o.swimlane,!1)),AJS.trigger("analytics",{name:"gh.issue.ctx.menu.action.unflag.with.comment",data:{selectedIssueCount:o.selectedIssues.length}})}}),c.push({actions:[p,x]}),!o.swimlane){var f={id:"ghx-issue-ctx-action-view-in-navigator",name:"view in navigator",label:"View in Issue navigator",actionFn:function(){t.viewInIssueNavigator(o.selectedIssues),l.Analytics.action.trigger(this.name,"selectedIssuesCount",o.selectedIssues.length)}};c.push({actions:[f]});var I={id:"ghx-issue-ctx-action-bulk-change",name:"bulk change",label:"Bulk Change",actionFn:function(){t.bulkChange(o.selectedIssues),l.Analytics.action.trigger(this.name,"selectedIssuesCount",o.selectedIssues.length)}};o.hasBulkChangePermission&&c.push({actions:[I]})}var w=function(t){var n=s.map(t,function(t){return e.getModel().getIssues()[t]});return{issues:n,viewMode:"work",boardType:GH.WorkControls.getBoardType()}};if(o.selectedIssues.length>0){var C={id:"ghx-issue-ctx-action-print-cards",name:"print cards",label:n.format("Print selected {0,choice,1# card|1\u003c cards}",o.selectedIssues.length),actionFn:function(){i.printSelectedIssues(w(o.selectedIssues))}};c.push({actions:[C]})}return c},l.getSendToTopAction=function(e,t){return{id:"ghx-issue-ctx-action-send-top",name:"send to top of swimlane",label:t,actionFn:function(){GH.WorkRanking.sendToTop("WorkContextMenu")}}},l.getSendToBottomAction=function(e,t){return{id:"ghx-issue-ctx-action-send-bottom",name:"send to bottom of swimlane",label:t,actionFn:function(){GH.WorkRanking.sendToBottom("WorkContextMenu")}}},l.hideContextMenu=function(){null!=l.ctxMenu&&(l.ctxMenu.hide(),l.ctxMenu=null)},l}),AJS.namespace("GH.WorkContextMenuController",null,require("jira-agile/rapid/ui/work/work-context-menu-controller"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/WorkSelectionController.js' */
define("jira-agile/rapid/ui/work/work-selection-controller",["jira-agile/rapid/ui/work/work-controller","jira-agile/rapid/ui/work/work-context-menu-controller","jira-agile/rapid/ui/work/swimlane-view","jira-agile/rapid/ui/work/ranking-model","jira-agile/rapid/ui/work/grid-data-controller","jira-agile/rapid/logger","underscore","jquery"],function(e,t,n,s,i,a,l,o){"use strict";var r={};return r.OPT_NO_SCROLL={scrollToView:!1},r.selectionDataModel={},r.selectionManager=void 0,r.init=function(){r.initSelectionManager(),o(document).delegate("#ghx-pool .js-issue","click",r.handleIssueClick),o(document).delegate("#ghx-pool .js-issue","focus",r.handleFocus),o(document).delegate("#ghx-pool .js-issue","contextmenu",r.handleIssueContextMenu),o(document).delegate(".ghx-swimlane-header","click",r.handleSwimlaneClick),o(document).delegate(".ghx-swimlane-header","focus",r.handleFocus),o(document).delegate(".ghx-swimlane-header","contextmenu",r.handleSwimlaneContextMenu)},r.initSelectionManager=function(){r.selectionDataModel={isIssueValid:function(e){return i.getModel().isIssueValid(e)},getIssueIndex:function(e){return i.getModel().getIssueIndexByKey(e)},canAddToSelection:function(e,t){return r.canAddToSelection(e,t)},getIssueRange:function(e,t){return s.getRankableIssuesRange(e,t)}},r.selectionManager=new GH.IssueSelectionManager(r.selectionDataModel,"work.selectedIssues")},r.validateCurrentSelection=function(){var t=r.selectionManager.validateCurrentSelection();t&&(!r.selectionManager.hasSelection()&&e.isDetailsViewOpened()&&GH.RapidBoard.State.setWorkViewDetailsViewOpened(!1),GH.RapidBoard.State.replaceState(),r.updateUIAndState())},r.gotoIssue=function(e){if(e){var t=r.getSelectedIssueKey();if(e!=t)r.selectIssue(e);else{var n=o(".ghx-columns").find('.js-issue[data-issue-key="'+e+'"]');0===n.length&&(n=o("#ghx-pool").find(".ghx-swimlane-header[data-issue-key='"+e+"']")),0!==n.length&&r._scrollToView(n)}}},r.focusOnIssue=function(e){var t=o(".ghx-columns").find('.js-issue[data-issue-key="'+e+'"]');0===t.length&&(t=o("#ghx-pool").find(".ghx-swimlane-header[data-issue-key='"+e+"']")),0!==t.length&&t.focus()},r.selectIssue=function(e,t){var n={pushState:!0,scrollToView:!0};t=l.extend(n,t),r.selectionManager.selectIssue(e),t.pushState&&GH.RapidBoard.State.pushState(),t.dontUpdateUI||r._updateSelectionUI(t.scrollToView?e:null)},r.handleSwimlaneClick=function(e){if(!o(e.target).parents().andSelf().is(".js-expander")){var t=r.getIssueKey(o(this));if(t)r.handleIssueClick.call(this,e);else{var n=parseInt(o(this).attr("data-swimlane-id"),10),s=i.getModel(),a=s.getSwimlaneById(n),u=s.getColumns();l.find(u,function(e){return t=s.getIssueKeyForColumnAtIndex(a.id,e.id,0),!!t}),t&&r.selectIssue(t)}}},r.handleIssueClick=function(e){var t=r.getIssueKey(o(this)),n=o(e.target).hasClass("js-key-link"),s=!GH.MouseUtils.openInSameTab(e);return!(!n||!s)||(e.preventDefault(),void r.handleIssueSelectionEvent(e,t,!0))},r.handleSwimlaneContextMenu=function(e){var n=o(e.target).closest(".ghx-swimlane-header").attr("data-issue-key");if(n){var s=r.isInSelection(n);s||r.handleSwimlaneClick.call(this,e),t.showContextMenuAt(e,{swimlane:!0})}},r.handleIssueContextMenu=function(e){var n=r.getIssueKey(o(this)),s=r.isInSelection(n);s||r.selectIssue(n),t.showContextMenuAt(e,{})},r.handleIssueSelectionEvent=function(t,n,s){var i=GH.MouseUtils.getMetaKeys(t),a=r.selectionManager.handleIssueClick(i,n),l=GH.IssueSelectionManager.getMultiSelectType(i);l&&(s=!1),a&&(r._updateSelectionUI(n),s&&r.selectionManager.hasSelection()&&!e.isDetailsViewOpened()?e.openDetailsView(n):GH.RapidBoard.State.pushState())},r.handleFocus=function(e){var t=r.getIssueKey(o(this)),n=r.isInSelection(t);n||r.handleIssueSelectionEvent(e,t,!1)},r.updateUIAndState=function(){r._updateSelectionUI(),GH.RapidBoard.State.pushState()},r._updateSelectionUI=function(e){var t=null;o(".js-issue, .ghx-swimlane-header, #ghx-swimname").removeClass("ghx-selected ghx-selected-primary").each(function(n,s){var i=o(s),a=i.attr("data-issue-key");a&&(r.isInSelection(a)&&(i.addClass("ghx-selected"),a==l&&i.addClass("ghx-selected-primary")),null!=e&&a==e&&(t=i))}),t&&!t.hasClass("ghx-swimlane-header")&&n.ensureSwimlaneExpandedForIssueKey(e),t&&r._scrollToView(t);var s=r.getSelectedIssueKey(),l=i.getModel().isIssueValid(s)?s:void 0;a.log("issueSelected triggered",a.Contexts.ui),o(GH).trigger("issueSelected",l)},r._scrollToView=function(e){var t=o("#ghx-pool"),n=o("#ghx-column-header-group"),s=n[0].getBoundingClientRect(),i=t[0].getBoundingClientRect(),a=e[0].getBoundingClientRect();GH.ScrollUtils.scrollElementToViewPort(t,{top:s.bottom,bottom:i.bottom},a)},r.ensureIssueSelected=function(e,t){r.selectionManager.isInSelection(t)||(r.canAddToSelection(r.getSelectedIssueKeys(),t)?r.handleIssueSelectionEvent(e,t):r.selectIssue(t,r.OPT_NO_SCROLL))},r.getSelectedIssueKeys=function(){return r.selectionManager.getSelectedIssueKeys()},r.getSelectedIssueKey=function(){return r.selectionManager.getSelectedIssueKey()},r.isInSelection=function(e){return r.selectionManager.isInSelection(e)},r.setIssueFromUrlState=function(e){r.selectionManager.selectIssue(e)},r.getSelectedIssuesInOrder=function(){return r.selectionManager.getSelectedIssuesInOrder()},r.canAddToSelection=function(e,t){if(l.isEmpty(e))return!0;var n=l.first(e);return s.canIssuesBeRankedTogether(n,t)},r.getIssueId=function(e){return e.closest(".js-issue, .ghx-issue-filtered, .ghx-parent-group, .ghx-swimlane-header").attr("data-issue-id")},r.getIssueKey=function(e){return e.closest(".js-issue, .ghx-issue-filtered, .ghx-parent-group, .ghx-swimlane-header").attr("data-issue-key")},r}),AJS.namespace("GH.WorkSelectionController",null,require("jira-agile/rapid/ui/work/work-selection-controller"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/WorkUrlState.js' */
define("jira-agile/rapid/ui/work/work-url-state",["jira-agile/rapid/ui/work/work-selection-controller","jira-agile/rapid/work/work-controls","jira-agile/rapid/ui/work/work-controller"],function(e,r,t){"use strict";var i={};return i.self="WorkUrlState",i.isApplicable=function(e){return!e.mode||"work"===e.mode},i.getNormalizedFromUrl=function(e,r){r.selectedIssue=GH.RapidBoard.UrlState.normalizeStringParam(e.selectedIssue,null),r.sprint=GH.RapidBoard.UrlState.normalizeNumberArrayParam(e.sprint),r.quickFilter=GH.RapidBoard.UrlState.normalizeNumberArrayParam(e.quickFilter)},i.toUrl=function(e,r){e.selectedIssue&&(r.selectedIssue=e.selectedIssue),e.sprint.length>0&&(r.sprint=e.sprint),e.quickFilter.length>0&&(r.quickFilter=e.quickFilter)},i.getNormalizedFromInternal=function(i){t.init(),i.quickFilter=r.getActiveQuickFilterIds(),i.sprint=r.getActiveSprintIds(),i.selectedIssue=e.getSelectedIssueKey()},i.updateInternalFromNormalized=function(i){var a=GH.RapidBoard.UrlState.getCurrentUrlState(),l=GH.RapidBoard.UrlState.normalizeBooleanParam(a.useStoredSettings,!1);t.init(),l||(e.setIssueFromUrlState(i.selectedIssue),r.setActiveQuickFilterIds(i.quickFilter),r.setActiveSprintFilterIds(i.sprint))},i}),AJS.namespace("GH.WorkUrlState",null,require("jira-agile/rapid/ui/work/work-url-state"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/WorkView.js' */
define("jira-agile/rapid/ui/work/work-view",["jira-agile/rapid/ui/work/work-selection-controller","jira-agile/rapid/work/work-controls","jira-agile/rapid/ui/work/work-controller","jira-agile/rapid/ui/work/swimlane-view","jira-agile/rapid/ui/work/swimline-stalker","jira-agile/rapid/ui/work/issue-list-util","jira-agile/rapid/ui/work/grid-data-controller","jira-agile/rapid/layout","jquery","jira-agile/rapid/ui/kanplan/kanplan-acknowledge"],function(e,i,a,n,t,o,l,s,d,r){"use strict";var g={};return g.isVisible=!1,g.detailViewOpen=!1,g.isRendering=!1,g.init=function(){d(GH).bind(s.EVENT_DELAYED_RESIZE,g.handleResizeEvent),d(document).delegate(".js-view-actions-work .js-view-action-toggle-epics-lozenge","click",a.toggleEpicsShowOnWorkboard)},g.show=function(){g.isVisible=!0,g.showLoading();var e=GH.tpl.workcontroller.renderSkeleton();d("#ghx-work").empty().append(e),GH.DetailsView.setContainerSelector("#ghx-detail-view"),GH.DetailsView.setOptions({canClose:!0,showActionsCog:!0,showSubtaskTab:!0,showLogWorkTrigger:!0,updateSizeHandler:g.updateDetailViewSize,closeHandler:a.closeDetailsView}),GH.RapidBoard.State.isKanbanBoard()&&g.showKanPlanAcknowledge()},g.getFirstColumnHeader=function(){return d("#ghx-column-headers .ghx-column").first()},g.hide=function(){g.isVisible=!1,g.hideLoading(),d("#ghx-detail-view").css({display:"none"}),d("#ghx-work").empty(),g.hideKanPlanAcknowledge()},g.configureUI=function(e){g.detailViewOpen=!!e,GH.DetailsView.setSelectedIssueKey(e)},g.renderPoolAndDetailView=function(){g.isRendering=!0,g.hideLoadingPool(),n.show(),g.updateDetailViewVisibilityAndSize(),g.updateDetailView(),g.isRendering=!1},g.scrollIssueToView=function(){var i=e.getSelectedIssueKey();i&&e.gotoIssue(i)},g.openOrCloseDetailView=function(e){g.configureUI(e),g.updateAllSizings(),g.updateDetailView()},g.updateFixedElementPositioning=function(){g.isVisible&&(i.resizeQuickFilters(),GH.DetailsView.updateSize(),t.poolStalker())},g.updateAllSizings=function(){g.updateDetailViewVisibilityAndSize()},g.updateDetailView=function(){return g.skipDetailsView?void delete g.skipDetailsView:(g.detailViewOpen?GH.DetailsView.show():GH.DetailsView.hide(),void t.poolStalker())},g.skipNextDetailViewUpdate=function(){g.skipDetailsView=!0},g.getEstimatedColumnWidth=function(){var e=d("#ghx-work").width(),i=g.detailViewOpen?GH.DetailsView.minWidth:0,a=l.getModel(),n=a.getColumns().length,t=10*(n+1)+20,o=Math.floor((e-i-t)/n);return o},g.getIssueKeyDimensions=function(){var e=d("#ghx-pool .js-issue:visible").eq(0),i=parseInt(e.find(".js-key-link").css("font-size"),10);return{availableWidth:e.find(".ghx-issue-fields").width(),approxCharacterWidth:i?.7*i:null}},g.updateMinHeightsSettings=function(){g.detailViewOpen?(d("#ghx-work").addClass("ghx-has-detail"),d("#ghx-detail-view").css({display:""})):(d("#ghx-detail-view").css({display:"none"}),d("#ghx-work").removeClass("ghx-has-detail"))},g.getBand=function(){var e=g.getEstimatedColumnWidth();return e<=126?1:e<=165?2:3},g.updateDetailViewVisibilityAndSize=function(){var e=GH.DetailsView.getContainer();g.detailViewOpen?(e.css({display:""}),GH.DetailsView.updateSize()):e.css({display:"none"});var i=d("#ghx-pool"),a=g.getBand();i.toggleClass("ghx-band-1",1===a).toggleClass("ghx-band-2",2===a).toggleClass("ghx-band-3",3===a);var n=g.getIssueKeyDimensions(),t=i.find(".js-issue");t.each(function(){var e=d(this),i=e.attr("data-issue-key");e.find(".js-key-link").text(o.buildDisplayIssueKey(i,n))})},g.updateDetailViewSize=function(){var e=d("#ghx-detail-issue");if(e.length>0){var i=e.outerHeight(),a=d("#ghx-detail-head"),n=a.outerHeight(),t=d("#js-detail-nav-content");t.css({height:i-n-13})}},g.showLoading=function(){d("body").addClass("ghx-loading-pool ghx-loading-quickfilter")},g.hideLoading=function(){d("body").removeClass("ghx-loading-pool ghx-loading-quickfilter")},g.hideLoadingFilter=function(){d("body").removeClass("ghx-loading-quickfilter")},g.showLoadingPool=function(){d("body").addClass("ghx-loading-pool"),d(".ghx-throbber").spin("large")},g.hideLoadingPool=function(){d("body").removeClass("ghx-loading-pool"),d(".ghx-throbber").spin(!1)},g.handleResizeEvent=function(){g.isVisible&&l.getModel()&&(g.isRendering||(g.updateAllSizings(),n.handleResizeEvent(),t.poolStalker()))},g.showKanPlanAcknowledge=function(){r.show()},g.hideKanPlanAcknowledge=function(){r.hide()},g}),AJS.namespace("GH.WorkView",null,require("jira-agile/rapid/ui/work/work-view"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/admin/labs/LabsConfiguration.js' */
define("jira-agile/admin/labs/labs-configuration",["jquery"],function(e){"use strict";var a=function(a,t){var n=e("#atlassian-token").attr("content"),i=AJS.contextPath()+"/secure/SetLabs.jspa";return e.ajax({url:i,type:"POST",data:{featureId:a,newValue:t,atl_token:n}})},t=function(e,a,t,n){var i=GH.Dialog.create({width:500,height:220,id:"ghx-disable-lab-feature-confirmation",closeOnOutsideClick:!1});i.addHeader(AJS.format("Disable {0}",e)),i.addPanel("Panel 1","<p>"+a+"</p>","panel-body"),i.addButton("Confirm",function(){t&&"function"==typeof t&&t(),i.disableControls(),i.dispose()},"aui-button aui-button-primary"),i.addCancel("Cancel",function(){n&&"function"==typeof n&&n(),i.cancel(i)}),AJS.$("#"+i.id).addClass("ghx-dialog"),i.show()},n=function(){var n=this,i=e(n).closest("div.checkbox"),o=i.attr("data-confirm-disable-message"),c=i.find("label").text().trim();!n.checked&&o?t(c,o,function(){a(n.id,n.checked)},function(){n.checked=!n.checked}):a(n.id,n.checked)};return{setLabsFeature:a,onToggleLabsFeatureCheckbox:n}}),function(e,a){var t=function(){var e=require("jira-agile/admin/labs/labs-configuration");a(".js-labs-feature input").on("click",e.onToggleLabsFeatureCheckbox)};a(t)}(AJS,AJS.$);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/LegacyNamespaces.js' */
AJS.namespace("GH.AssignedWorkDialog",null,require("jira-agile/rapid/ui/plan/assigned-work-dialog")),AJS.namespace("GH.BacklogController",null,require("jira-agile/rapid/ui/plan/backlog-controller")),AJS.namespace("GH.BacklogModel",null,require("jira-agile/rapid/ui/plan/backlog-model")),AJS.namespace("GH.BacklogModel2",null,require("jira-agile/rapid/ui/plan/backlog-model2")),AJS.namespace("GH.BacklogSelectionController",null,require("jira-agile/rapid/ui/plan/backlog-selection-controller")),AJS.namespace("GH.BacklogStatistics",null,require("jira-agile/rapid/ui/plan/backlog-statistics")),AJS.namespace("GH.BacklogView",null,require("jira-agile/rapid/ui/plan/BacklogView")),AJS.namespace("GH.IssueActions",null,require("jira-agile/rapid/ui/plan/issue-actions")),AJS.namespace("GH.IssueListModel",null,require("jira-agile/rapid/ui/plan/issue-list-model")),AJS.namespace("GH.IssueMoveController",null,require("jira-agile/rapid/ui/plan/issue-move-controller")),AJS.namespace("GH.PlanContextMenuController",null,require("jira-agile/rapid/ui/plan/plan-context-menu-controller")),AJS.namespace("GH.PlanController",null,require("jira-agile/rapid/ui/plan/plan-controller")),AJS.namespace("GH.PlanControls",null,require("jira-agile/rapid/ui/plan/plan-controls")),AJS.namespace("GH.PlanDragAndDrop",null,require("jira-agile/rapid/ui/plan/plan-drag-and-drop")),AJS.namespace("GH.PlanIssueListFiltering",null,require("jira-agile/rapid/ui/plan/plan-issue-list-filtering")),AJS.namespace("GH.PlanIssueListView",null,require("jira-agile/rapid/ui/plan/plan-issue-list-view")),AJS.namespace("GH.PlanKBShortcuts",null,require("jira-agile/rapid/ui/plan/plan-kb-shortcuts")),AJS.namespace("GH.PlanRankController",null,require("jira-agile/rapid/ui/plan/plan-rank-controller")),AJS.namespace("GH.PlanUrlState",null,require("jira-agile/rapid/ui/plan/plan-url-state")),AJS.namespace("GH.PlanView",null,require("jira-agile/rapid/ui/plan/plan-view")),AJS.namespace("GH.SprintBacklogController",null,require("jira-agile/rapid/ui/plan/sprint-backlog-controller")),AJS.namespace("GH.SprintBacklogView",null,require("jira-agile/rapid/ui/plan/sprint-backlog-view")),AJS.namespace("GH.SprintConfig",null,require("jira-agile/rapid/ui/plan/sprint-config")),AJS.namespace("GH.SprintController",null,require("jira-agile/rapid/ui/plan/sprint-controller")),AJS.namespace("GH.SprintModel",null,require("jira-agile/rapid/ui/plan/sprint-model")),AJS.namespace("GH.SprintView",null,require("jira-agile/rapid/ui/plan/sprint-view")),AJS.namespace("GH.BurndownChartController",null,require("jira-agile/rapid/ui/chart/burndown-chart-controller")),AJS.namespace("GH.BurndownChartModel",null,require("jira-agile/rapid/ui/chart/burndown-chart-model")),AJS.namespace("GH.BurndownChartView",null,require("jira-agile/rapid/ui/chart/burndown-chart-view")),AJS.namespace("GH.BurndownRate",null,require("jira-agile/rapid/ui/chart/burndown-rate")),AJS.namespace("GH.BurndownReportChartController",null,require("jira-agile/rapid/ui/chart/burndown-report-chart-controller")),AJS.namespace("GH.BurndownTableProducer",null,require("jira-agile/rapid/ui/chart/burndown-table-producer")),AJS.namespace("GH.BurndownTimelineProducer",null,require("jira-agile/rapid/ui/chart/burndown-timeline-producer")),AJS.namespace("GH.CFD.Data",null,require("jira-agile/rapid/ui/chart/cfd-data")),AJS.namespace("GH.CFDController",null,require("jira-agile/rapid/ui/chart/cfd-controller")),AJS.namespace("GH.CFDView",null,require("jira-agile/rapid/ui/chart/cfd-view")),AJS.namespace("GH.ChangeEvent",null,require("jira-agile/rapid/ui/chart/change-event")),AJS.namespace("GH.ChangesReportModel",null,require("jira-agile/rapid/ui/chart/changes-report-model")),AJS.namespace("GH.Chart",null,require("jira-agile/rapid/ui/chart/chart")),AJS.namespace("GH.ChartColors",null,require("jira-agile/rapid/ui/chart/chart-colors")),AJS.namespace("GH.ChartController",null,require("jira-agile/rapid/ui/chart/chart-controller")),AJS.namespace("GH.ChartView",null,require("jira-agile/rapid/ui/chart/chart-view")),AJS.namespace("GH.NonWorkingDaysUtils",null,require("jira-agile/rapid/ui/chart/non-working-days-util")),AJS.namespace("GH.ReleaseDatePredictor",null,require("jira-agile/rapid/ui/chart/release-date-predictor")),AJS.namespace("GH.ReportController",null,require("jira-agile/rapid/ui/chart/report-controller")),AJS.namespace("GH.Reports.ControlChartController",null,require("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-controller")),AJS.namespace("GH.Reports.ControlChartDataService",null,require("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-data-service")),AJS.namespace("GH.Reports.ControlChartView",null,require("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-view")),AJS.namespace("GH.Reports.EpicBurndownChartDataService",null,require("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-chart-data-service")),AJS.namespace("GH.Reports.EpicBurndownChartTableDataService",null,require("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-chart-table-data-service")),AJS.namespace("GH.Reports.EpicBurndownReportController",null,require("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-report-controller")),AJS.namespace("GH.Reports.EpicBurndownReportView",null,require("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-report-view")),AJS.namespace("GH.Reports.ReleaseBurndownChartDataService",null,require("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-chart-data-service")),AJS.namespace("GH.Reports.ReleaseBurndownChartTableDataService",null,require("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-chart-table-data-service")),AJS.namespace("GH.Reports.ReleaseBurndownReportController",null,require("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-report-controller")),AJS.namespace("GH.Reports.ReleaseBurndownReportView",null,require("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-report-view")),AJS.namespace("GH.Reports.BurnupReportView",null,require("jira-agile/rapid/ui/chart/v2/burnup/burnup-report-view")),AJS.namespace("GH.Reports.BurnupReportController",null,require("jira-agile/rapid/ui/chart/v2/burnup/burnup-report-controller")),AJS.namespace("GH.Reports.BurnupChartDataService",null,require("jira-agile/rapid/ui/chart/v2/burnup/burnup-chart-data-service")),AJS.namespace("GH.VersionReport",null,require("jira-agile/rapid/ui/chart/version-report")),AJS.namespace("GH.VersionReportController",null,require("jira-agile/rapid/ui/chart/version-report-controller")),AJS.namespace("GH.VersionReportModel",null,require("jira-agile/rapid/ui/chart/version-report-model")),AJS.namespace("GH.VersionReportView",null,require("jira-agile/rapid/ui/chart/version-report-view")),AJS.namespace("GH.EstimatePicker",null,require("jira-agile/rapid/ui/component/estimate-picker")),AJS.namespace("GH.ChartPicker",null,require("jira-agile/rapid/ui/component/chart-picker")),AJS.namespace("GH.SprintActions",null,require("jira-agile/rapid/ui/component/sprintactions/sprint-actions")),AJS.namespace("GH.sprintActions",null,new(require("jira-agile/rapid/ui/component/sprintactions/sprint-actions"))),AJS.namespace("GH.Dialogs.CompleteSprintDialog",null,require("jira-agile/rapid/ui/dialog/complete-sprint-dialog")),AJS.namespace("GH.DetailsViewScrollTracker",null,require("jira-agile/rapid/ui/detail/details-view-scroll-tracker"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/RapidBoardListeners.js' */
require(["jira-agile/rapid/global-events","underscore","jira-agile/rapid/rapid-board"],function(i,e,t){var n=function(){e.isEmpty(t.projectKey)||JIRA.SmartAjax.makeRequest({type:"GET",contentType:"application/json",url:GH.Ajax.CONTEXT_PATH+"/rest/api/2/project/"+t.projectKey,success:function(i){"projectTypeKey"in i&&"software"!==i.projectTypeKey&&AJS.trigger("analytics",{name:"RapidBoard.show.global",data:{projectType:i.projectTypeKey}})}})},a=function(i){t.BoardHeader.update(i),GH.ViewActions.initViewActions(i),GH.ViewActions.on("boardToolsRendered",function(){var i=t.State.getMode(),e=i?i:"board";AJS.$("#board-tools-section-content .js-view-action-copy").bind("click",function(){AJS.trigger("analyticsEvent",{name:"jira-software."+e+".boardmenu.click.copy-board"})}),AJS.$("#board-tools-section-content .js-view-action-create").bind("click",function(){AJS.trigger("analyticsEvent",{name:"jira-software."+e+".boardmenu.click.create-board"})}),AJS.$("#board-tools-section-content .js-view-action-configure").bind("click",function(){AJS.trigger("analyticsEvent",{name:"jira-software."+e+".boardmenu.click.configure-board"})})}),t.ViewController.update(i)},o=function(i){t.State.setRapidViewId(i.id);var o=!e.isUndefined(i);if(i.noRapidViews){var r={id:void 0,name:void 0,canEdit:!1,invalidView:!1};return void a(r)}o?(a(i),n(),AJS.trigger("analytics",{name:"RapidBoard.show."+(i.sprintSupportEnabled?"scrum":"kanban"),data:{boardId:i.id}})):a({invalidView:!0})};i.on("RapidBoard.reload",function(){var i=t.State.getRapidViewIdWithInfo();GH.RapidViewConfig.fetchConfiguration(i).done(o),i.viewId&&t.ViewController.preload(i.viewId)}),t.initialiseListeners.then(function(i){t.BoardHeader.init(),t.ViewController.init(i),t.QuickCreate.init(),t.QuickEdit.init()}),t.initialiseListenersDone.then(function(){t.State.initializeState(),t.reload(),GH.Poller.init()})});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ActionListeners.js' */
require(["jira-agile/rapid/global-events","jira-agile/rapid/ui/print/card-printing-controller","jira-agile/rapid/rapid-board"],function(r,i,a){r.on("action.printCardsInRapidBoard",function(){a.State.isPlanMode()?i.printBoardPlanView(a.ViewController.collectPrintablePlanIssues()):a.State.isWorkMode()&&i.printBoardWorkView(a.ViewController.collectPrintableWorkIssues())})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:widget-jag-plan', location = '/inline-issue-create/widgets/agile-plan/agile-plan-helppath-constants.js-gh-hp' */
/*globals GH*/
define('jira/inline-issue-create/agile/helppath-constants', [], function () {

    "use strict";

    // watch out for the gh-jsHelpPaths transformer - the invocations must go inline
    return {
        configureBoard: GH && {"url":"https://docs.atlassian.com/jira/jsw-docs-078/Configuring+a+Board","isLocal":false} || {}
    };
});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:widget-jag-plan', location = '/inline-issue-create/widgets/agile-plan/agile-plan-inline-issue-create.soy' */
// This file was automatically generated from agile-plan-inline-issue-create.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.InlineIssueCreate.Agile.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.InlineIssueCreate == 'undefined') { JIRA.Templates.InlineIssueCreate = {}; }
if (typeof JIRA.Templates.InlineIssueCreate.Agile == 'undefined') { JIRA.Templates.InlineIssueCreate.Agile = {}; }


JIRA.Templates.InlineIssueCreate.Agile.description = function(opt_data, opt_ignored) {
  var output = '<div class="iic-widget__description' + ((! opt_data.issueTypeName) ? ' iic-widget__description_invisible' : '') + '">' + soy.$$escapeHtml("New") + ' <span class="iic-widget__description__selected-issue-type-name">' + ((opt_data.issueTypeName) ? soy.$$escapeHtml(opt_data.issueTypeName) : '') + '</span> ' + soy.$$escapeHtml("in") + ' ';
  if (opt_data.sections.length >= 1) {
    output += '<button type="button" aria-owns="iic-widget__description__section-select-' + soy.$$escapeHtml(opt_data.widgetId) + '" aria-haspopup="true" class="iic-widget__description__section-select-trigger aui-button aui-button-subtle aui-dropdown2-trigger aui-style-default">' + soy.$$escapeHtml(opt_data.currentSection) + '</button><div id="iic-widget__description__section-select-' + soy.$$escapeHtml(opt_data.widgetId) + '" data-aui-alignment="top left" class="iic-widget__description__section-select aui-dropdown2 aui-style-default"><ul class="aui-list-truncate">';
    var sectionList25 = opt_data.sections;
    var sectionListLen25 = sectionList25.length;
    for (var sectionIndex25 = 0; sectionIndex25 < sectionListLen25; sectionIndex25++) {
      var sectionData25 = sectionList25[sectionIndex25];
      output += '<li><a href="#" data-section-id="' + soy.$$escapeHtml(sectionData25.id) + '">' + soy.$$escapeHtml(sectionData25.translatedName) + '</a></li>';
    }
    output += '</ul></div><!-- .aui-dropdown2 -->';
  } else {
    output += soy.$$escapeHtml(opt_data.currentSection);
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.InlineIssueCreate.Agile.description.soyTemplateName = 'JIRA.Templates.InlineIssueCreate.Agile.description';
}


JIRA.Templates.InlineIssueCreate.Agile.configurationIssue = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml("Due to the configuration for this particular board, you\x27ll have to use the full dialog to create a new issue.") + ((opt_data.url) ? ' <a href="' + soy.$$escapeHtml(opt_data.url) + '">' + soy.$$escapeHtml("Learn more") + '</a>' : '');
};
if (goog.DEBUG) {
  JIRA.Templates.InlineIssueCreate.Agile.configurationIssue.soyTemplateName = 'JIRA.Templates.InlineIssueCreate.Agile.configurationIssue';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:widget-jag-plan', location = '/inline-issue-create/widgets/agile-plan/agile-plan-inline-issue-create-issue-types.js' */
define("jira/inline-issue-create/agile/entities/issue-types",["jira/inline-issue-create/lib/underscore","jira/inline-issue-create/entities/issue-types","jira-agile/rapid/ui/plan/plan-controller"],function(d,b,c){var a=b.extend({parse:function h(j){var i=b.prototype.parse.apply(this,arguments);return this.filterOutGHEpics(i)},reset:function g(i){var j=this.filterOutGHEpics(i);return b.prototype.reset.apply(this,[j])},filterOutGHEpics:function f(j){var i=GH.EpicConfig.getEpicIssueTypeId();if(j&&i&&e()){return d.filter(j,function(k){return k.id!==i})}return j}});function e(){return c.isEpicsPanelEnabled()}return a});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:widget-jag-plan', location = '/inline-issue-create/widgets/agile-plan/agile-plan-inline-issue-create-description.js' */
define("jira/inline-issue-create/agile/views/description",["jira/inline-issue-create/views/description","jquery","jira/inline-issue-create/lib/underscore"],function(j,b,h){var a=j.extend({template:JIRA.Templates.InlineIssueCreate.Agile.description,ui:{selectedIssueTypeName:".iic-widget__description__selected-issue-type-name",sectionDropdownTrigger:".iic-widget__description__section-select-trigger",sectionDropdownItem:".iic-widget__description__section-select a",sectionDropdown:".iic-widget__description__section-select"},modelEvents:h.extend({"change:lockState":function f(k,l){if(l===this.model.constants.STATE_LOCK_SENDING){this.disable()}else{this.enable()}}},j.prototype.modelEvents),initialize:function d(){h.bindAll(this,"onDropdownShow","onItemClick")},onRender:function i(){this.unwrapTemplate();this.ui.sectionDropdown.on("aui-dropdown2-show",this.onDropdownShow);this.ui.sectionDropdownItem.on("click",this.onItemClick)},onDropdownShow:function(q){var p=this.ui.sectionDropdown;p.appendTo(this.$el);var k=this.ui.sectionDropdownTrigger.offset();var o=this.ui.sectionDropdownTrigger.position();var l=this.ui.sectionDropdownTrigger.outerHeight();var m=p.height();var n=b("body").outerHeight(true)<k.top+l+m;p.css({left:o.left,top:(n?o.top-m:o.top+l)+"px"});if(n){p.addClass("aui-dropdown2-alignment-top");this.ui.sectionDropdownTrigger.addClass("iic-widget__issue-type-selector__trigger_opened-up")}},onItemClick:function(k){this.trigger("selected",b(k.target))},disable:function c(){if(this.ui.sectionDropdownTrigger.attr){this.ui.sectionDropdownTrigger.attr("aria-disabled",true)}},enable:function e(){if(this.ui.sectionDropdownTrigger.attr){this.ui.sectionDropdownTrigger.attr("aria-disabled",false)}},serializeData:function g(){var l={};var o=this.allSections.get(this.currentSectionId);if(this.model.getSelectedIssueType()){l=this.model.getSelectedIssueType().toJSON()}var k=this.currentSectionId||-1;var n=this.allSections.toJSON().filter(function m(p){return p.id!==k});return{issueTypeName:l.name,widgetId:this.model.cid,currentSection:(o)?o.getTranslatedName():"",sections:n}}});return a});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:widget-jag-plan', location = '/inline-issue-create/widgets/agile-plan/agile-plan-inline-issue-create-widget.js' */
define("jira/inline-issue-create/agile/widget",["jira/inline-issue-create/widget","jira/inline-issue-create/agile/helppath-constants"],function(d,a){var c=d.extend({activate:function b(){if(this.model.getLockState()===this.model.constants.STATE_LOCK_PERM_INACTIVE){var e=this.openCreateIssueDialog();e.done(function(f){f.onContentReady(function(){JIRA.applyMessageToForm("info",f.$form,JIRA.Templates.InlineIssueCreate.Agile.configurationIssue({url:a.configureBoard.url}),true)})});return false}return d.prototype.activate.call(this)}});return c});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:widget-jag-plan', location = '/inline-issue-create/widgets/agile-plan/agile-plan-inline-issue-create-group.js' */
define("jira/inline-issue-create/agile/widget-group",["jira/util/logger","jira/inline-issue-create/lib/underscore","jira/inline-issue-create/agile/widget","jira/inline-issue-create/agile/issue-type-dropdown","jira/inline-issue-create/widget-group","jquery","jira/inline-issue-create/util"],function(o,n,m,d,b,e,l){return b.extend({initialize:function f(){b.prototype.initialize.apply(this,arguments);this.Widget=m;this.boardJQL=undefined;this.filterJQLs=undefined;n.bindAll(this,"issueCreatedHandler","addOverridesOnBeforeIssueCreated");this.on("widget:rendered",this.widgetRenderedHandler);this.widgetOptions.dropdownView=d},widgetRenderedHandler:function j(s,q,p){var r=p.parent(".ghx-meta");r.addClass("plan-inline-create-inside")},issueCreatedHandler:function a(q,t,v){var s=this;v.analytics.triggerAnalytics("plan.created");var r=GH.BacklogView._scrollToView;GH.BacklogView._scrollToView=e.noop;var u=e("#ghx-backlog");var w=u.scrollTop();GH.BacklogController.reloadAndSelectCreatedIssues([q]).done(function p(){GH.BacklogView._scrollToView=r;if(!GH.BacklogModel.isIssueVisible(q.issueKey)){v.analytics.triggerAnalytics("plan.createdNotVisible")}u.scrollTop(w);l.scrollElementToView(u,v.view.$el);if(v.model.getLockState()!==v.model.constants.STATE_LOCK_PERM_INACTIVE){s.activateWidget(v)}o.trace("inline.create.backlog.refreshed")})},addOverridesOnBeforeIssueCreated:function i(s,r){r.overrides=r.overrides||{};var p=GH.EpicController.getFilteredEpicKey();if(p&&p!=="none"){var t=GH.EpicConfig.getEpicLinkFieldName();r.overrides[t]=p}var q=GH.VersionController.getFilteredVersionId();if(q&&q!=="none"){r.overrides.fixVersion=q}},_createNewWidget:function h(q){var p=b.prototype._createNewWidget.apply(this,arguments);p.widget.on("beforeIssueCreated",this.addOverridesOnBeforeIssueCreated);p.widget.on("issueCreated",this.issueCreatedHandler);return p},setBoardJQL:function c(p){this.boardJQL=p;this._syncJQLs()},_syncJQLs:function k(){var p=[];if(this.boardJQL){p.push(this.boardJQL)}p.push.apply(p,this.filterJQLs);if(p.length){this.setCurrentJqls(p)}},setFilterJQLs:function g(p){this.filterJQLs=p;this._syncJQLs()}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:widget-jag-plan', location = '/inline-issue-create/widgets/agile-plan/agile-plan-inline-issue-type-dropdown.js' */
define("jira/inline-issue-create/agile/issue-type-dropdown",["jquery","jira/inline-issue-create/util","jira/inline-issue-create/views/issue-type-dropdown"],function(c,a,d){return d.extend({calculateDropdownDirectionAndHeightPosition:function b(){var h=this.ui.issueTypeIcon.outerHeight();var i=this.ui.issueTypeIcon.offset().top;var j=this.ui.issueTypeDropdown.outerHeight();var f=c("#ghx-backlog").offset().top;var e=i-f;var g=c("body").outerHeight(true)-(i+h);a.trace(this,"spaceBelow",g,"visibleSpaceAbove",e,"dropdownContentHeight",j);if(g>j){a.debug(this,"Positioning down - full");return{vAlignment:"bottom"}}else{if(e>j){a.debug(this,"Positioning up - full");return{vAlignment:"top"}}else{if(g>e){a.debug(this,"Positioning down - limited",g);return{vAlignment:"bottom",limitHeight:g-10}}else{a.debug(this,"Positioning up - limited",e);return{vAlignment:"top",limitHeight:e-10}}}}}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:widget-jag-plan-initialiser', location = '/inline-issue-create/widgets/agile-plan/agile-plan-inline-issue-create-initialiser.js' */
define("jira/inline-issue-create/agile/initialiser",["jira/util/formatter","jira/util/logger","jira/ajs/dark-features","jira/jquery/deferred","jquery","jira/inline-issue-create/lib/underscore","jira/inline-issue-create/util","jira/inline-issue-create/lib/brace","jira/inline-issue-create/entities/inline-bootstrap","jira/inline-issue-create/agile/widget-group","jira/inline-issue-create/agile/entities/issue-types","jira/inline-issue-create/agile/views/description","jira/inline-issue-create/views/default-trigger","jira-agile/rapid/ui/plan/plan-controller","jira-agile/rapid/ui/plan/backlog-controller","jira-agile/rapid/ui/plan/backlog-model","jira-agile/rapid/ui/plan/sprint-backlog-view","jira-agile/rapid/ui/plan/sprint-view","jira-agile/rapid/ui/plan/plan-controls"],function(f,q,J,g,u,L,b,e,i,E,G,n,s,t,p,z,B,c,l){var I={init:u.noop};if(J.isEnabled("jira.inline.issue.create.disable")){return I}var k=s.extend({serializeData:function A(){return{cssClass:"iic-agile-plan"}}});var F=e.Model.extend({namedAttributes:{id:"string",translatedName:"string"}});var d=e.Collection.extend({model:F});var H=new d();var v=i.extend({issueTypesCollectionType:G});var y=new v();var w=new E({TriggerView:k,inlineBootstrap:y,widgetOptions:{descriptionView:n},createdCallback:function j(O,P){if(P!=="backlog"){O.setOverrides({Sprint:P})}O.descriptionView.currentSectionId=""+P;O.descriptionView.allSections=H;O.listenTo(O.descriptionView.allSections,"refreshed",function N(){this.render()});O.descriptionView.on("selected",function M(R){var Q=u(R);var S=Q.data("section-id");w.activateWidget(w.getWidget(S).widget)})}});function C(){var O=L.filter(l.quickfilters.getQuickFilters(),function M(P){return P.isActive});var N=L.map(O,function(P){return P.query});w.setFilterJQLs(N)}function r(){C();H.reset();y.fireWhenInitialized(function(){if(y.getHasCreateIssuePermission()){if(y.getHasScheduleIssuePermission()){z.getFutureSprintModels().forEach(function M(N){H.add(new F({id:""+N.sprintData.id,translatedName:N.sprintData.name}))})}H.add(new F({id:"backlog",translatedName:"Backlog"}))}});H.trigger("refreshed")}var m=new g();function x(O){if(!O||O.model.getLockState()===O.model.constants.STATE_LOCK_PERM_INACTIVE){return false}if(m.state()==="pending"){return false}var M=z.getBacklogModel2().getIssueList();var N=GH.BacklogStatistics.getIssueListStats(M,false);return(N.totalCount===0&&z.getSprintModels().length===0)}function D(){C();y.fireWhenInitialized(function(){m.then(function M(){if(y.getHasCreateIssuePermission()){var O=w.getWidget("backlog");O.render(u("#ghx-content-group .ghx-backlog-group .js-issue-list"));if(x(O.widget)){var N=O.widget.model;if(N.getIssueTypes()){N.setSelectedIssueType(N.getIssueTypes().at(0))}w.activateWidget(O.widget)}}})});q.trace("inline.create.backlog.rendered")}var o;function h(){if(o!==GH.RapidBoard.State.getRapidViewId()){o=GH.RapidBoard.State.getRapidViewId();q.trace("inline.create.boardjql.fetching");GH.Ajax.get({url:"/rapidviewconfig/editmodel.json",data:{rapidViewId:GH.RapidBoard.State.getRapidViewId()},deferErrorHandling:true},"rapidBoardJQL").done(function M(N){var O=N.filterConfig.query;w.setBoardJQL(O);q.trace("inline.create.boardjql.fetched")})}}function a(M,O){C();if(!O.isActiveSprint()){var P=O.getSprintData().id;y.fireWhenInitialized(function N(){if(y.getHasCreateIssuePermission()&&y.getHasScheduleIssuePermission()){w.getWidget(P).render(M.find(".ghx-issues"))}})}}var K=L.once(function(){b.after(z,"setData",function N(){m.resolve();r()});b.after(z,"updateDataForSprint",r);b.after(c,"renderAllSprints",r);b.after(B,"renderBacklog",D);b.after(l.quickfilters,"setActiveQuickFilters",C);b.after(B,"updateBacklog",D);b.after(p,"updateEpicFiltering",D);b.after(p,"updateVersionFiltering",D);b.after(c,"_renderSprintContent",a);var M=z.getSprintModels();h();D();M.forEach(function(O){var P=u('.js-sprint-container[data-sprint-id="'+O.getSprintId()+'"]');a(P,O)})});I.init=L.once(function(){if(t.isActive()){K()}else{b.after(t,"initializePlanMode",K)}});return I});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:widget-jag-plan-init', location = '/inline-issue-create/widgets/agile-plan/init-agile-plan-inline-issue-create.js' */
require(["jira/inline-issue-create/agile/initialiser"],function(a){a.init()});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:analytics', location = 'js/editor-analytics.js' */
define("jira/editor/analytics",["jira/analytics","jira/util/logger"],function(a,c){var e="editor.instance.perf.";var d={};d.sendEvent=function(f,g){a.send({name:f,properties:g||{}})};d.mark=function(f){window.performance.mark&&window.performance.mark(f)};d.measure=function(h,g,f){window.performance.measure&&window.performance.measure(h,g,f)};d.oneShotMeasure=function(g,m,j,f){var l=window.performance;if(!l.mark){c.debug("The browser does not support User Timing API");return -1}var k=l.now();var i=l.getEntriesByName(g);var n=i.length&&i[i.length-1];if(!(n instanceof window.PerformanceMark)){c.debug("The mark has not been found");return -1}if(typeof j!=="string"){j=g.replace(/^rte\-/,"")}var h=b(n.startTime,k,m,j);if(!f){l.clearMarks(g)}return h};d.startMeasure=function(){var g=window.performance.now();return{measure:function f(h,i){return b(g,window.performance.now(),i,h)}}};return d;function b(j,h,k,g){var l=h-j;var i=e+g;var f=k||{};f.time=l;d.sendEvent(i,f);return l}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:analytics', location = 'js/editor-analytics-shortcuts.js' */
define("jira/editor/analytics-shortcuts",["jira/editor/analytics","jira/editor/tinymce"],function(b,c){var a=function(d){this.editor=d;d.on("keydown",this._handle.bind(this))};a.prototype._handle=function(f){var d=String.fromCharCode(f.keyCode);if(c.util.VK.metaKeyPressed(f)){switch(d){case"B":b.sendEvent("editor.instance.shortcut.bold");break;case"I":b.sendEvent("editor.instance.shortcut.italic");break;case"U":b.sendEvent("editor.instance.shortcut.underline");break;case"Z":b.sendEvent("editor.instance.shortcut.undo");break;case"Y":b.sendEvent("editor.instance.shortcut.redo");break;case"0":b.sendEvent("editor.instance.shortcut.paragraph");break;case"1":b.sendEvent("editor.instance.shortcut.heading1");break;case"2":b.sendEvent("editor.instance.shortcut.heading2");break;case"8":b.sendEvent("editor.instance.shortcut.code");break;case"9":b.sendEvent("editor.instance.shortcut.quote");break;case"K":b.sendEvent("editor.instance.shortcut.links");break}}if(f.shiftKey){switch(d){case"2":b.sendEvent("editor.instance.shortcut.mention");break}}};return a});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:constants', location = 'js/editor-constants.js' */
define("jira/editor/constants",[],function(){return{EventSources:{SHORTCUT:"shortcut",BUTTON:"button",UNKNOWN:"unknown"},EventTypes:{ADD:"add",UNDO:"undo",REDO:"redo",CLEAR:"clear"},Context:{DIALOG:"dialog",COMMENT:"comment",UNKNOWN:"unknown"},Modes:{TEXT:"source",VISUAL:"wysiwyg"},SupportedImagesRegexp:/\.(bmp|gif|jpg|jpeg|png|tiff|webp)$/i,LEFT_WHITESPACE_MATCHER:/^\s+/,RIGHT_WHITESPACE_MATCHER:/\s+$/,CLASS_COVER:"richeditor-cover",CLASS_LOADING:"richeditor-loading",EVENT_CHANGE:"richeditor:change",EVENT_OPERATION:"toolbar-operation",EVENT_OPERATION_COLOR:"toolbar-operation-color",EVENT_OPERATION_ATTACHMENT:"toolbar-operation-attachment"}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:registry', location = 'js/api/editor-registry-entry.js' */
define("jira/editor/registry/entry",["underscore","jquery","jira/editor/constants"],function(c,e,d){var b=d.Modes;function a(i,h,g){var f=e.Deferred();this._rteInstance=f;this._editorRegistry=g;this.id=i;this.currentMode=undefined;this.textArea=h;this.toolbar=this._findToolbar(h);this.rteInstance=f.promise()}c.extend(a.prototype,{isVisualMode:function(){return this.currentMode===b.VISUAL},isTextMode:function(){return this.currentMode===b.TEXT},applyIfTextMode:function(f){return this._applyIfMode(b.TEXT,f)},applyIfVisualMode:function(f){return this._applyIfMode(b.VISUAL,f)},onSwitch:function(f){this._editorRegistry.on("switch::"+this.id,f);return this},onUnregister:function(f){this._editorRegistry.once("unregister::"+this.id,f);return this},onSwitchToText:function(f){this._editorRegistry.on("switch:"+b.TEXT+":"+this.id,f);return this},onSwitchToVisual:function(f){this._editorRegistry.on("switch:"+b.VISUAL+":"+this.id,f);return this},_applyIfMode:function(f,g){if(this.currentMode===f){g(this)}return this},_findToolbar:function(g){var f=g.parentNode;var h=f.parentNode;return h.querySelector("div.wiki-edit-toolbar")}});return a});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:registry', location = 'js/api/editor-registry.js' */
define("jira/editor/registry",["underscore","backbone","jira/editor/constants","jira/editor/registry/entry"],function(d,f,e,b){var c=e.Modes;function a(){this._instances={}}d.extend(a.prototype,f.Events,{getEntry:function(g){return this._instances[g]},_registerTextMode:function(h){if(!h){return}var i=this._getTextAreaId(h);var g=new b(i,h,this);this._register(g,c.TEXT)},_registerVisualMode:function(k){if(!k){return}var i=this._findTextArea(k);var j=this._getTextAreaId(i);var h=this.getEntry(j);var g=!!h;if(g){this._resolveRTEInstance(h,k);this._switchMode(i,c.VISUAL)}else{h=new b(j,i,this);this._resolveRTEInstance(h,k);this._register(h,c.VISUAL)}},_findTextArea:function(i){var h=i.element;var g=h.getContainer().parent().get(0);return g.querySelector("textarea:last-of-type")},_getTextAreaId:function(h){var g=h.getAttribute("data-editor-id");if(!!g){return g}g=d.uniqueId(new Date().getTime()+"-");h.setAttribute("data-editor-id",g);return g},_register:function(g,h){g.currentMode=h;this._instances[g.id]=g;this._triggerEvents("register",g)},_resolveRTEInstance:function(g,h){if(g._rteInstance.isResolved()||!h){return}g._rteInstance.resolve(h)},_switchMode:function(i,h){var j=this._getTextAreaId(i);var g=this.getEntry(j);if(!g||g.currentMode===h){return}g.currentMode=h;this._triggerEvents("switch",g)},_unregister:function(h){var i=this._getTextAreaId(h);var g=this.getEntry(i);if(!g){return}delete this._instances[i];this._triggerEvents("unregister",g)},_triggerEvents:function(g,h){this.trigger(g,h);this.trigger(g+":"+h.currentMode,h);this.trigger(g+":"+h.currentMode+":"+h.id,h);this.trigger(g+"::"+h.id,h)}});return new a()});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:editor-tags', location = 'soy/editor-tags.soy' */
// This file was automatically generated from editor-tags.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Editor.Tags.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Editor == 'undefined') { JIRA.Editor = {}; }
if (typeof JIRA.Editor.Tags == 'undefined') { JIRA.Editor.Tags = {}; }
if (typeof JIRA.Editor.Tags.Templates == 'undefined') { JIRA.Editor.Tags.Templates = {}; }


JIRA.Editor.Tags.Templates.image = function(opt_data, opt_ignored) {
  return '<img src="' + soy.$$escapeHtml(opt_data.source) + '" data-filename="' + soy.$$escapeHtml(opt_data.filename) + '" ' + ((opt_data.width) ? 'width="' + soy.$$escapeHtml(opt_data.width) + '"' : '') + ' ' + ((opt_data.height) ? 'height="' + soy.$$escapeHtml(opt_data.height) + '"' : '') + ' ' + ((opt_data.id) ? 'id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' ' + ((opt_data.vspace) ? 'vspace="' + soy.$$escapeHtml(opt_data.vspace) + '"' : '') + ' />';
};
if (goog.DEBUG) {
  JIRA.Editor.Tags.Templates.image.soyTemplateName = 'JIRA.Editor.Tags.Templates.image';
}


JIRA.Editor.Tags.Templates.mentionlink = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml("") + '/secure/ViewProfile.jspa?name=' + soy.$$escapeUri(opt_data.username) + '" class="user-hover" rel="' + soy.$$escapeHtml(opt_data.username) + '" title="' + soy.$$escapeHtml("Follow link") + '">' + soy.$$escapeHtml(opt_data.displayname) + '</a>';
};
if (goog.DEBUG) {
  JIRA.Editor.Tags.Templates.mentionlink.soyTemplateName = 'JIRA.Editor.Tags.Templates.mentionlink';
}


JIRA.Editor.Tags.Templates.attachedImage = function(opt_data, opt_ignored) {
  return '<img style="border: 0px solid black" src="' + soy.$$escapeHtml(opt_data.source) + '" data-filename="' + soy.$$escapeHtml(opt_data.filename) + '">';
};
if (goog.DEBUG) {
  JIRA.Editor.Tags.Templates.attachedImage.soyTemplateName = 'JIRA.Editor.Tags.Templates.attachedImage';
}


JIRA.Editor.Tags.Templates.attachedFile = function(opt_data, opt_ignored) {
  return '<span class="nobr"><a title="' + soy.$$escapeHtml(opt_data.title) + '" href="' + soy.$$escapeHtml(opt_data.href) + '" data-filename="' + soy.$$escapeHtml(opt_data.filename) + '">' + soy.$$escapeHtml(opt_data.filename) + '<sup><img class="rendericon" width="7" height="7" border="0" align="absmiddle" alt="" src="/jira/images/icons/link_attachment_7.gif"></sup></a></span>';
};
if (goog.DEBUG) {
  JIRA.Editor.Tags.Templates.attachedFile.soyTemplateName = 'JIRA.Editor.Tags.Templates.attachedFile';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:toggle', location = 'js/ui/editor-toggle-tabs.js' */
define("jira/editor/ui/toggle-tabs",["jira/editor/constants","jira/editor/analytics","jira/editor/toggle","jira/lib/class","backbone","aui/tabs","underscore","jquery"],function(b,g,c,a,h,f,i,e){var j=b.Modes;var d=a.extend({init:function(k){this.$parent=e(k).parent(".wiki-edit-content");this.rendered=new e.Deferred();c.getMode().always(function(l){this.renderTabs(l)}.bind(this));this.hideTooltip=i.debounce(this.hideTooltip,750)},renderTabs:function(k){this.activeMode=k;this.$tabs=e(aui.tabs({menuItems:[{text:"Visual",url:"#",mode:j.VISUAL},{text:"Text",url:"#",mode:j.TEXT}].map(function(l){return i.extend(l,{url:"#",extraAttributes:'data-mode="'+l.mode+'"',isActive:k===l.mode})}),paneContent:"",extraClasses:"editor-toggle-tabs"}));this.$tabs.appendTo(this.$parent).find(".menu-item").on("tabSelect",this.onTabSelect.bind(this));this.$tooltip=e(aui.labels.label({text:"",extraClasses:"editor-toggle-tooltip"})).appendTo(this.$parent);f.setup();this.rendered.resolve(this.$tabs)},getTab:function(){return this.$tabs.find(".menu-item").filter(function(k,l){return e(l).data("mode")===j.VISUAL})},onTabSelect:function(l,k){var m=k.tab.parent(".menu-item").data("mode");if(m&&m!==this.activeMode){this.activeMode=m;this.trigger("change",m);c.setMode(m);this.showTooltip(m);this.hideTooltip();g.sendEvent("editor.instance.switch.change");g.sendEvent("bundled.editor.instance.switch.change")}},getMode:function(){var k=new e.Deferred();this.rendered.then(function(l){var m=l.find(".menu-item.active-tab").data("mode");if(m){k.resolve(m)}else{k.reject()}}.bind(this));return k.promise()},setMode:function(k){this.rendered.then(function(l){l.find(".menu-item").removeClass("active-tab").filter(function(m,n){return e(n).data("mode")===k}).addClass("active-tab");this.activeMode=k;this.showTooltip(k);this.hideTooltip()}.bind(this))},enable:function(){this.$tabs.removeClass("aui-tabs-disabled").find("a").attr("tabindex",-1)},disable:function(){this.$tabs.addClass("aui-tabs-disabled").find("a").removeAttr("tabindex")},showTooltip:function(l){var k=l===j.VISUAL?"Visual mode":"Text mode";this.$tooltip.text(k).addClass("visible")},hideTooltip:function(){this.$tooltip.removeClass("visible")},isVisible:function(){if(!this.$tabs){return}var k=this.$tabs[0].getBoundingClientRect();return k&&e(document.elementFromPoint(k.left+k.width/2,k.top+k.height/2)).parents().is(this.$tabs)}}).extend(h.Events);return d});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:toggle', location = 'js/editor-toggle.js' */
define("jira/editor/toggle",["jira/featureflags/feature-manager","jira/editor/constants","jira/data/cookie","jquery"],function(m,d,e,h){var c=!m.isFeatureEnabled("jira.richeditor.enable-rte.optional");var k="jira.editor.user.mode";var l=d.Modes;var a=function(n){return b.setProperty(k,n)};var i=function(){return b.getProperty(k,c?l.VISUAL:l.TEXT)};var f=function(o,p){if(p===e.read(o)){return new h.Deferred().resolve(p)}e.save(o,p);var n=new h.Deferred();b.fetchProperty(o).always(function(q){if(p===q){n.resolve(q);return}return h.ajax({url:AJS.contextPath()+"/rest/api/2/mypreferences?key="+o,type:"PUT",contentType:"application/json",dataType:"json",data:JSON.stringify(p)}).then(n.resolve.bind(n,q)).fail(n.resolve.bind(n,q))});return n};var g=function(p,o){var n=new h.Deferred();if(e.read(p)){return n.resolve(e.read(p)).promise()}b.fetchProperty(p).then(function(q){n.resolve(q)}).fail(function(){n.reject(o)});if(o){n.always(function(q){b.setProperty(p,q)})}return n.promise()};var j=function(n){return h.ajax({url:AJS.contextPath()+"/rest/api/2/mypreferences?key="+n,type:"GET",contentType:"application/json",dataType:"json"})};var b={setProperty:f,getProperty:g,fetchProperty:j,getMode:i,setMode:a};return b});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:marionette', location = 'js/amd/marionette-amd.js' */
define("jira/editor/marionette",["backbone","underscore","atlassian/libs/factories/marionette-2.1.0"],function(c,a,b){return b(a,c)});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:undo-redo-ui', location = 'js/ui/button-bar-decorator.js' */
define("jira/editor/ui/button-bar-decorator",["jira/lib/class","jquery"],function(a,c){var b=a.extend({init:function d(){},decorateButtonBars:function(e){var f=function(){var i=c(this);if(i.find(".wiki-button-bar-content").length){return}var h=c('<div class="wiki-button-bar-content"></div>');i.wrapInner(h);var g=c('<div class="tabs-placeholder"></div>');g.width(e.width());g.height(e.height());i.prepend(g);i.append(c("<div></div>").css("clear","both"))};e.closest(".jira-wikifield").next(".wiki-button-bar").each(f);e.closest(".inline-edit-fields").nextAll(".save-options").each(f);e.prev(".sd-rte-bar").each(f);e.parent(".wiki-edit-content").siblings(".sd-rte-bar").each(f)}});return b});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:undo-redo-ui', location = 'js/ui/undo-redo-buttons.js' */
define("jira/editor/ui/undo-redo-buttons",["jira/editor/constants","jira/editor/marionette","jira/util/logger","jquery"],function(k,i,o,d){var j=i.ItemView.extend({tagName:"div",template:function(r){return JIRA.Editor.Tags.Templates.undoRedoButtons()},ui:{undo:".wiki-operation-undo",redo:".wiki-operation-redo"},events:{"click @ui.undo":"onUndo","click @ui.redo":"onRedo"},initialize:function f(r){this.$container=this.determineButtonsContainer(r.textarea);if(null===this.$container){o.warn("Could not attach undo/redo buttons to the editor");return}this.undoManager=r.undoManager},enable:function g(r){if(!this.undoManager){return}r=r||d([this.ui.undo,this.ui.redo]);r.removeAttr("disabled");r.attr("aria-disabled","false")},disable:function e(r){if(!this.undoManager){return}r=r||d([this.ui.undo,this.ui.redo]);r.attr("disabled","");r.attr("aria-disabled","true")},highlight:function b(r){if(!this.undoManager){return}r.addClass("active");setTimeout(function(){r.removeClass("active")},100)},updateUI:function n(r,s){if(!this.undoManager){return}this.updateButton(this.ui.undo,this.undoManager.hasUndo());this.updateButton(this.ui.redo,this.undoManager.hasRedo());if(k.EventSources.SHORTCUT===s){if(k.EventTypes.UNDO===r){this.highlight(this.ui.undo)}else{if(k.EventTypes.REDO===r){this.highlight(this.ui.redo)}}}},updateButton:function m(s,r){if(r){this.enable(s)}else{this.disable(s)}},onRender:function q(){if(!this.undoManager){return}this.$el.addClass("wiki-edit-undo-redo-buttons aui-buttons");if(this.shouldUseDivider()){this.$el.addClass("wiki-edit-separate-section")}this.ui.undo.tooltip("destroy");this.ui.redo.tooltip("destroy");this.updateUI();this.$el.prependTo(this.$container);this.attachHandlers()},attachHandlers:function a(){this.undoManager.on("editor:historychanged",function r(s,t){this.updateUI(s,t)},this)},determineButtonsContainer:function l(s){var r;r=d(s).closest("div.inline-edit-fields").nextAll(".save-options").find(".wiki-button-bar-content");if(!r.length){r=d(s).closest("div.jira-wikifield").next(".save-options").find(".wiki-button-bar-content")}if(!r.length){r=d(s).siblings(".sd-rte-bar").find(".wiki-button-bar-content")}if(!r.length){r=d(s).parent(".wiki-edit-content").siblings(".sd-rte-bar").find(".wiki-button-bar-content")}return(r.length)?r:null},shouldUseDivider:function p(){var r=this.$container.children(":visible");return r.length>0&&!r.eq(0).is("button, input")},onUndo:function h(){this.undoManager.undo()},onRedo:function c(){this.undoManager.redo()}});return j});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:undo-redo-ui', location = 'soy/ui/undo-redo-buttons.soy' */
// This file was automatically generated from undo-redo-buttons.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Editor.Tags.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Editor == 'undefined') { JIRA.Editor = {}; }
if (typeof JIRA.Editor.Tags == 'undefined') { JIRA.Editor.Tags = {}; }
if (typeof JIRA.Editor.Tags.Templates == 'undefined') { JIRA.Editor.Tags.Templates = {}; }


JIRA.Editor.Tags.Templates.undoRedoButtons = function(opt_data, opt_ignored) {
  return '<button type="button" class="aui-button aui-button-subtle wiki-operation-undo" title="' + soy.$$escapeHtml("Undo") + '"><span class="aui-icon aui-icon-small aui-iconfont-undo" aria-disabled="true" disabled>Undo</span></button><button type="button" class="aui-button aui-button-subtle wiki-operation-redo" title="' + soy.$$escapeHtml("Redo") + '"><span class="aui-icon aui-icon-small aui-iconfont-redo" aria-disabled="true" disabled>Redo</span></button>';
};
if (goog.DEBUG) {
  JIRA.Editor.Tags.Templates.undoRedoButtons.soyTemplateName = 'JIRA.Editor.Tags.Templates.undoRedoButtons';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:history-store', location = 'js/editor-undo-history-store.js' */
define("jira/editor/undo-history-store",[],function(){var a=[];var b=function(){};b.prototype.put=function(f,e){if(!f){return}a[d(f)]=e};b.prototype.get=function(e){return a[d(e)]};var c=new b();return{get:c.get,put:c.put};function d(e){return"jira.richeditor.history."+e}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:undo-redo', location = 'js/editor-undo-redo-analytics.js' */
define("jira/editor/undo-redo-analytics",["jira/editor/analytics","jira/editor/constants","jira/lib/class"],function(d,c,b){var h=b.extend({init:function f(j){j.on("editor:historychanged",function i(k,l,m){if(c.EventTypes.UNDO===k){this.logUndo(k,l,m)}else{if(c.EventTypes.REDO===k){this.logRedo(k,l,m)}}if(c.EventTypes.ADD===k){if(this.countAddEvents>0){this.isFirstEditorAction=false}++this.countAddEvents}else{this.isFirstEditorAction=false}},this)},logUndo:function g(i,j,k){d.sendEvent("editor.instance.action."+i,{firstAction:this.isFirstEditorAction,source:j,mode:k});d.sendEvent("editor.instance.action",{name:i,mode:k})},logRedo:function a(i,j,k){d.sendEvent("editor.instance.action."+i,{source:j,mode:k});d.sendEvent("editor.instance.action",{name:i,mode:k})},clearCounters:function e(){this.isFirstEditorAction=true;this.countAddEvents=0},countAddEvents:0,isFirstEditorAction:true});return h});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:undo-redo', location = 'js/undomanager-adapter/text-adapter.js' */
define("jira/editor/undomanager-adapter/text-adapter",["jira/editor/constants","jira/editor/marionette","jira/util/logger","jquery"],function(i,g,k,c){var l=g.Object.extend({initialize:function d(m){this.textEditor=c(m.textarea);var o=this.textEditor.data("wikiEditor");if(!o){var n="Wiki-editor should be already initialised. Could not find 'wikiEditor' instance in given textarea element";k.error(n,this.textEditor);throw new Error(n)}this.textUndoableTextarea=o.undoRedoEl;this.textUndoManager=this.textUndoableTextarea.undoManager;this.ongoingInternalOperation=false;this.attachEvents(this.textUndoManager)},undo:function j(){try{this.ongoingInternalOperation=true;this.textUndoableTextarea.undo()}finally{this.ongoingInternalOperation=false}},redo:function f(){try{this.ongoingInternalOperation=true;this.textUndoableTextarea.redo()}finally{this.ongoingInternalOperation=false}},hasUndo:function b(){return this.textUndoManager.canUndo()},hasRedo:function a(){return this.textUndoManager.canRedo()},clear:function e(){this.textUndoManager.clear()},attachEvents:function h(n){var m=n.EventTypes;n.on([m.PUSH,m.UPDATE_CURRENT].join(" "),function(o){if(!this.ongoingInternalOperation){this.triggerMethod("action",i.EventTypes.ADD,i.EventSources.UNKNOWN)}}.bind(this));n.on(m.UNDO,function(o){if(!this.ongoingInternalOperation){this.triggerMethod("action",i.EventTypes.UNDO,i.EventSources.SHORTCUT)}}.bind(this));n.on(m.REDO,function(o){if(!this.ongoingInternalOperation){this.triggerMethod("action",i.EventTypes.REDO,i.EventSources.SHORTCUT)}}.bind(this));n.on(m.CLEAR,function(o){if(!this.ongoingInternalOperation){this.triggerMethod("action",i.EventTypes.CLEAR,i.EventSources.UNKNOWN)}}.bind(this))}});return l});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:undo-redo', location = 'js/undomanager-adapter/visual-adapter.js' */
define("jira/editor/undomanager-adapter/visual-adapter",["jira/editor/constants","jira/editor/marionette","jquery"],function(l,j,f){var n=j.Object.extend({initialize:function g(p){this.id=this.determineId(p.richEditorEl);this.visualEditorInstance=p.richEditorEl.getInstance();this.visualEditor=this.visualEditorInstance.editor;this.visualUndoManager=this.visualEditor.undoManager;this.ongoingInternalOperation=false;this.attachEvents(this.visualEditor)},undo:function m(){try{this.ongoingInternalOperation=true;this.visualUndoManager.undo()}finally{this.ongoingInternalOperation=false}},redo:function i(){try{this.ongoingInternalOperation=true;this.visualUndoManager.redo()}finally{this.ongoingInternalOperation=false}},hasUndo:function d(){return this.visualUndoManager.hasUndo()},hasRedo:function c(){return this.visualUndoManager.hasRedo()},clear:function h(){this.visualUndoManager.clear()},add:function o(p){this.visualEditorInstance.setContent(p.content,null,true);this.visualUndoManager.add(p)},getData:function e(){return this.visualUndoManager.data},getId:function b(){return this.id},attachEvents:function k(p){p.on("AddUndo",function(q){if(!this.ongoingInternalOperation){this.triggerMethod("action",l.EventTypes.ADD,l.EventSources.UNKNOWN)}}.bind(this));p.on("Undo",function(q){if(!this.ongoingInternalOperation){this.triggerMethod("action",l.EventTypes.UNDO,l.EventSources.SHORTCUT)}}.bind(this));p.on("Redo",function(q){if(!this.ongoingInternalOperation){this.triggerMethod("action",l.EventTypes.REDO,l.EventSources.SHORTCUT)}}.bind(this));p.on("ClearUndos",function(q){if(!this.ongoingInternalOperation){this.triggerMethod("action",l.EventTypes.CLEAR,l.EventSources.UNKNOWN)}}.bind(this))},determineId:function a(r){var t=r.$textarea;var p=f(r).data("renderParams").issueKey||"";var s=t.attr("name");var q=t.attr("id");return[p,s,q].join(".")}});return n});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:undo-redo', location = 'js/undomanager-adapter/noop-adapter.js' */
define("jira/editor/undomanager-adapter/noop-adapter",["jira/editor/marionette"],function(h){return h.Object.extend({initialize:function b(){},undo:function c(){},redo:function d(){},hasUndo:function f(){},hasRedo:function g(){},clear:function a(){},getId:function e(){}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:undo-redo-manager', location = 'js/editor-undomanager.js' */
define("jira/editor/undomanager",["jira/editor/undo-redo-analytics","jira/editor/undomanager-adapter/text-adapter","jira/editor/undomanager-adapter/visual-adapter","jira/editor/undomanager-adapter/noop-adapter","jira/editor/undo-history-store","jira/editor/constants","jira/util/logger","jira/editor/marionette","jira/dialog/dialog","jquery"],function(q,a,x,s,i,l,y,o,k,j){var m=l.Modes;var g=o.Object.extend({initialize:function d(z){this.context=this.determineContext(z.textarea);this.restoreHistory=false;try{this.textUndoManager=new a({textarea:z.textarea})}catch(A){this.textUndoManager=new s()}this.visualUndoManager=new s();this.activeUndoManager=new s();this.analytics=new q(this);this.setActiveMode(z.mode);this.listenTo(this.textUndoManager,"action",this.notifyHistoryChanged)},undo:function w(){this.activeUndoManager.undo();this.notifyHistoryChanged(l.EventTypes.UNDO,l.EventSources.BUTTON)},redo:function r(){this.activeUndoManager.redo();this.notifyHistoryChanged(l.EventTypes.REDO,l.EventSources.BUTTON)},hasUndo:function t(){return this.activeUndoManager.hasUndo()},hasRedo:function n(){return this.activeUndoManager.hasRedo()},setActiveMode:function v(z){this.activeMode=z;this.activeUndoManager.clear();if(m.TEXT===z){this.activeUndoManager=this.textUndoManager}else{if(m.VISUAL===z){this.activeUndoManager=this.visualUndoManager}else{this.activeUndoManager=new s();y.warn("UndoManager: incorrect mode",z)}}this.activeUndoManager.clear();this.analytics.clearCounters()},attachToVisualEditor:function p(z){this.visualUndoManager=new x({richEditorEl:z});this.listenTo(this.visualUndoManager,"action",this.notifyHistoryChanged)},restoreUndoHistory:function e(){if(!this.restoreHistory){return}if(m.VISUAL===this.activeMode&&l.Context.UNKNOWN===this.context){var z=i.get(this.visualUndoManager.getId());if(z){this.visualUndoManager.clear();z.forEach(function(A){this.visualUndoManager.add(A)}.bind(this));this.restoreHistory=false}}this.analytics.clearCounters()},shouldRestoreHistory:function h(z){this.restoreHistory=!!z},onBeforeDestroy:function b(){this.saveUndoHistory()},saveUndoHistory:function u(){if(m.VISUAL===this.activeMode&&l.Context.UNKNOWN===this.context){i.put(this.visualUndoManager.getId(),this.visualUndoManager.getData().concat([]))}},notifyHistoryChanged:function f(z,A){A=A||this.EventSources.UNKNOWN;this.trigger("editor:historychanged",z,A,this.activeMode)},determineContext:function c(z){if(k.current){return l.Context.DIALOG}else{if(j(z).parents("div.jira-wikifield[field-id=comment]").length){return l.Context.COMMENT}else{return l.Context.UNKNOWN}}}});return g});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:height-helper', location = 'js/height-helper-heights.js' */
define("jira/editor/height-helper-heights",[],function(){var a={FULL_ISSUE_DETAILS:{min:219,max:629},SD_COMMENT:{min:220,max:629},BOARD_BACKLOG_ISSUE_DETAILS:{min:219,max:629},DIALOG_ISSUE_DETAILS:{min:174,max:369},COMMENT:{min:174,max:629}};return a});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:height-helper', location = 'js/height-helper.js' */
define("jira/editor/height-helper",["jquery","jira/editor/height-helper-heights"],function(c,b){var a=function(d){this.element=d;this.getMinHeight=function(){return this._getLocation().min};this.getMaxHeight=function(){return this._getLocation().max};this.setHeights=function(g,h){var h=h||0;var f=g?c(g):c(this.element);f.css("height","");f.removeAttr("rows");var e=this._getLocation();f.css("min-height",(e.min+h)+"px");f.css("max-height",(e.max+h)+"px")};this._getLocation=function(){if(this._isDialog()){return b.DIALOG_ISSUE_DETAILS}else{if(this._isBoard()){return b.BOARD_BACKLOG_ISSUE_DETAILS}else{if(this._isComment()){return b.COMMENT}else{if(this._isSDComment()){return b.SD_COMMENT}else{return b.FULL_ISSUE_DETAILS}}}}};this._isComment=function(){return c(this.element).closest(".comment-input").length>0};this._isSDComment=function(){return c(this.element).closest("sd-comment").length>0};this._isDialog=function(){return c(this.element).closest(".jira-dialog").length>0};this._isBoard=function(){return c(this.element).closest(".ghx-detail-view").length>0}};return a});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:toolbar-ui', location = 'js/ui/toolbar/clear-formatting.js' */
define("jira/editor/ui/toolbar/clear-formatting",["jira/editor/analytics","jira/util/logger","jquery"],function(c,d,e){var b=function(g){var h=e(g).find("a[data-operation='clear-format']").parent();if(h.length===0){e(g).find("li").wrapAll('<div class="aui-dropdown2-section"></div>');var h=e(g).find("li:last-child").clone().appendTo(g).wrap('<div class="aui-dropdown2-section"></div>');h.find("a").attr("data-operation","clear-format").html("Clear formatting")}return h};var a=function(i){var g=i.getInstance();var h=g&&g.editor;if(h&&!h.isHidden()){h.undoManager.add();h.execCommand("RemoveFormat");d.trace("jira.editor.operation.executed");c.sendEvent("editor.instance.operation.clear.formatting");h.undoManager.add()}};var f=function(g){e(g).parents(".wiki-edit").find('div[id*="wiki-edit-dropdown2-more"] .aui-list-truncate').each(function(h,i){var j=b(i);j.on("click",function(k){k.preventDefault();a(g)});g.getInstance().on("tabs:changed",function(k){j.parent().css("display",k?"none":"block")})})};return{init:f}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:temporaryAttachmentUtil', location = 'js/util/temporaryAttachment.js' */
define("jira/editor/util/temporaryAttachment",["jquery","exports"],function(b,a){a.getFormToken=function(c){if(!c){return}return b(c).parents("form").find('input[name="formToken"]').attr("value")||"undefined"}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:controller', location = 'js/editor-controller.js' */
define("jira/editor/controller",["jira/editor/analytics","jira/editor/constants","jira/editor/registry","jira/editor/ui/toggle-tabs","jira/editor/ui/undo-redo-buttons","jira/editor/ui/toolbar/clear-formatting","jira/editor/undomanager","jira/editor/ui/button-bar-decorator","jira/editor/height-helper","wrm/require","jquery","underscore","jira/util/navigator","jira/editor/util/temporaryAttachment"],function(k,c,p,o,n,a,f,h,s,r,g,t,e,i){var d="jiraEditorWrap";var l=">p:first-child:last-child";var q=-2;var j=c.Modes;return{init:function(){},initResources:function(){if(this.webResources){return this.webResources}return this.webResources=r(["wr!com.atlassian.jira.plugins.jira-editor-plugin:api","wr!com.atlassian.jira.plugins.jira-editor-plugin:resources","wr!com.atlassian.jira.plugins.jira-editor-plugin:converter","wrc!jira.rich.editor"])},_createTabs:function(w,x){var u=x[0];var v=x.data("toggleTabs");if(!v){x.data("toggleTabs",v=new o(u))}v.getMode().then(function(y){if(x.is(":visible")&&(y===j.TEXT)){k.sendEvent("editor.instance.init.source");k.sendEvent("bundled.editor.instance.init.source")}});return v},_createUndoManager:function(w,z,v,y){var u=z[0];var x=z.data("undoManager");if(!x){x=new f({textarea:u,mode:y});z.data("undoManager",x)}return x},_createUndoRedoButtons:function(x,z,v,y){var u=z[0];new h().decorateButtonBars(v.$tabs);var w=z.data("undoRedoButtons");if(!w){w=new n({textarea:u,undoManager:y});w.render();z.data("undoRedoButtons",w)}return w},_initModes:function(w,x,u){var v=t.partial(b,x[0],u);u.getMode().then(function(A){m(x[0],A);var z=this._createUndoManager(w,x,u,A);var y=this._createUndoRedoButtons(w,x,u,z);if(A===j.VISUAL){z.shouldRestoreHistory(true);this.initResources();this.initEditor(w,x,u,z,y,true).then(v)}else{x.setCaretToPosition(0);u.once("change",function(B){u.disable();y.disable();if(B===j.VISUAL){k.sendEvent("editor.instance.switch.wysiwyg");k.sendEvent("bundled.editor.instance.switch.wysiwyg");this.initEditor(w,x,u,z,y).then(v).always(function(){u.enable();y.updateUI()}).done(function(C){C.focus()})}}.bind(this),this);y.updateUI()}}.bind(this))},_renderMarkup:function(x,A,y){var u=A[0];var v=u.value;var z=this.getRenderParams(u);if(!y){return this.renderMarkup(v,z)}if(x.data("content-present")){var w=x.html();x.empty();return new g.Deferred().resolve(this._postProcessRendered(g(new DOMParser().parseFromString(w,"text/html").body))).promise()}else{return this.renderMarkup(v,z)}},initEditor:function(w,y,z,D,x,u){var E=new g.Deferred();var C=y[0];var A=w[0];if(w.data("textarea")===C){return new g.Deferred().reject().promise()}var B=this._renderMarkup(w,y,u);new s(C).setHeights(w,q);z.disable();var v=this.getRenderParams(C);w.data("textarea",C).data("renderParams",v);if(!A.loadingStart()){return new g.Deferred().reject().promise()}else{this.require(["jira/editor/create"],function(F){F.builder().withElement(A).withMeta(A.$textarea.data()).withPlugin("jira/editor/plugins/mentions/jira-mentions").withPlugin("jira/editor/plugins/prevent-default").withPlugin("jira/editor/plugins/paste").withPlugin("jira/editor/plugins/wiki-autoformat").withPlugin("jira/editor/plugins/editor-content-postprocess").withPlugin("jira/editor/plugins/toolbar-sync").build().progress(function(G){A.setInstance(G)}).then(function(G){A.loadingStop();G.on("content",A.serialize,A);if(A.$textarea.is(document.activeElement)){A.syncSelection(A.$textarea[0])}G.on("switchMode",function(J){A.setMode(J)});if(A.shouldFocus()){setTimeout(function(){G.focus()})}G.relayEvent("blur",function(){A.$textarea.blur()});G.relayEvent("keydown",function(J){if(J.ctrlKey&&(J.keyCode===13||(!e.isMac()&&(J.keyCode===10)))){J.preventDefault();A.serialize().then(function(){k.sendEvent("editor.instance.submit");g(A.$textarea.prop("form")).submit()})}},true);var H=window.performance.now();B.then(function(J){I(A);G.setContent(J,null,true)}).fail(function(){I(A);var J=y[0].value;G.setContent(J,null,true)}).always(function(){A.hideMask();z.enable();x.updateUI();E.resolve(A);a.init(A);k.oneShotMeasure("rte-init",{},"init",true);var J=window.performance.now()-H;k.sendEvent("editor.instance.init.perf",{time:J})});function I(J){D.attachToVisualEditor(J);D.setActiveMode(j.VISUAL);D.restoreUndoHistory()}k.oneShotMeasure("rte-init",{},"init-bare",true)})});this._bindToggleTabsChange(z,x,D,A);return E.promise()}},_bindToggleTabsChange:function(u,v,x,w){u.on("change",function(z){u.disable();v.disable();var y=z===j.TEXT;w.setMode(y).done(function(){x.setActiveMode(z);w.getInstance().trigger("tabs:changed",y)}).fail(function(){w.setMode(!y);u.setMode(!y?j.TEXT:j.VISUAL)}).always(function(){u.enable();v.updateUI()})})},destroyEditor:function(y){var x=g(y);var u=y.parentNode;var v=x.data("textarea");x.removeData(["textarea","renderParams"]);g(v).data(d,false);var w=g(v).data("toggleTabs");w&&w.off("change");v=v||u.querySelector("textarea");if(v){p._unregister(v)}},getRenderParams:function(w){var x=g(w);var u=x.parents("form").find("#issuetype").val();var v=i.getFormToken(x);return{issueKey:this.getIssueKey(x),projectId:x.parents("form").find("#pid").val(),issueType:t.isArray(u)?t.first(u):u,formToken:v}},getIssueKey:function(u){if(u.attr("data-issuekey")){return u.attr("data-issuekey")}if(JIRA&&JIRA.Issue&&JIRA.Issue.getIssueKey){return JIRA.Issue.getIssueKey()}return AJS.Meta.get("issue-key")},renderMarkup:function(w,x){k.mark("rte-rendermarkup");var u=new g.Deferred();var v=function(){u.reject(w.replace(/(?:\r\n|\r|\n)/g,"<br />"))};if(!w){return u.resolve("")}this.require(["jira/editor/html-renderer"],function(y){y.renderMarkup(w,x).then(function(B){try{var A=g(new DOMParser().parseFromString(B,"text/html").body);u.resolve(this._postProcessRendered(A))}catch(z){u.reject(w)}}.bind(this),v)}.bind(this),v);return u.promise().then(function(){k.oneShotMeasure("rte-rendermarkup")})},_postProcessRendered:function(v){v.find("span.image-wrap").replaceWith(function(x,y){var w=g(y);if(w.is("img")){if(this.style.textAlign){w.css({"text-align":this.style.textAlign,display:"block",margin:"0 auto"})}else{if(this.style["float"]){w.css("float",this.style["float"])}}}return w});v.find("div.code.panel,div.preformatted.panel").html(function(x,y){var w=g(y);w.find("pre:empty").html("<br>");return w});var u=v.find(l);if(u.length===1&&!u[0].previousSibling&&!u[0].nextSibling){return u.html()||""}else{return v.html()||""}},require:function(u,v){this.initResources().then(function(){require(u,v)})},overrideWikiPreview:function(){var u=require("jira/wikipreview/wiki-preview");var v=function(y,x){var z=x.find("textarea.wiki-textfield");if(!z.attr("data-issue-key")){var w=g(y).find('dt:contains("issueKey")+dd').text();if(w){z.attr("data-issue-key",w)}}return u.apply(this,arguments)};AJS.namespace("jira.app.wikiPreview",null,v);AJS.namespace("JIRA.wikiPreview",null,v)}};function m(v,u){if(u===j.TEXT){p._registerTextMode(v)}if(!v.isListenedByRegistry){p.listenTo(v,"detached",p._unregister);v.isListenedByRegistry=true}}function b(y,u,x){var w=x.getInstance();p._registerVisualMode(w);u.on("change",function v(z){p._switchMode(y,z)})}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:fsm', location = 'js/fsm/states/state.js' */
define("jira/editor/fsm/states/state",["underscore"],function(a){var b=function(d,e){e.stateName=d;e.extend=c;return e};var c=function(d){return b(this.stateName,a.compose(d,this))};return function(d,e){return b(d,e)}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:fsm', location = 'js/fsm/states/state-attached.js' */
define("jira/editor/fsm/states/attached",["jira/editor/fsm/states/state","jira/editor/fsm/states/wrap","jira/editor/fsm/states/hidden","jira/editor/fsm/events","jquery"],function(c,e,b,a,d){return function(i){var f=require("jira/editor/fsm/states/init");var h=d(i);if(!h.parent().hasClass("rte-container")){h.wrap(JIRA.Editor.Init.Templates.container())}var g=h.parent().siblings('textarea[class*="wiki-textfield"]')[0];if(g){if(!g.wikiEnabled){d(g).one("wiki-editor-initialized",function(){i.FSM.triggerEvent(a.WIKI_EDITOR_INITIALIZED)}.bind(this))}else{return e(i,g)}}return c("Attached",function(k,j){if(k===a.DETACHED){return f(j)}if(k===a.WIKI_EDITOR_INITIALIZED){if(d(g).is(":visible")){return e(i,g)}else{return b(i,g)}}})}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:fsm', location = 'js/fsm/states/state-detached.js' */
define("jira/editor/fsm/states/detached",["jira/editor/fsm/states/state","jira/editor/fsm/events","jira/editor/controller","jira/util/logger","jquery"],function(c,b,a,e,g){var d="richEditorInstance";var f="richEditorInstance_loading";return function(i){var h=require("jira/editor/fsm/states/init");var j=require("jira/editor/fsm/states/attached");setTimeout(function(){i.FSM.triggerEvent(b.DESTROY_TIMEOUT)});return c("Detached",function(m,l){if(m===b.ATTACHED&&l===i){return j(l)}if(m===b.DESTROY_TIMEOUT){if(i.undoManager){i.undoManager.destroy();delete i.undoManager}i.uncoverTextarea();if(i[d]){try{i[d].destroy()}catch(n){e.debug("Editor destroy exception:",n)}delete i[d]}delete i[f];delete i.$textarea;if(i.style.display==="none"){i.style.display=""}a.destroyEditor(i);var k=g(i);k.removeAttr("id","aria-hidden","data-content-present");k.empty();e.trace("jira.editor.plugin.detached");return h(i)}})}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:fsm', location = 'js/fsm/states/state-init.js' */
define("jira/editor/fsm/states/init",["jira/editor/fsm/states/state","jira/editor/fsm/states/attached","jira/editor/fsm/events"],function(b,c,a){return function(){return b("Init",function(e,d){if(e===a.ATTACHED){return c(d)}})}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:fsm', location = 'js/fsm/states/state-wrap.js' */
define("jira/editor/fsm/states/wrap",["jira/editor/fsm/states/state","jira/editor/fsm/states/detached","jira/editor/fsm/states/mode-text","jira/editor/fsm/states/mode-visual","jira/editor/fsm/events","jira/editor/constants","jira/editor/controller","jira/editor/height-helper","jira/editor/analytics","underscore","jquery"],function(j,d,g,b,k,a,e,f,h,i,c){return function(n,l){var o=c(l);h.mark("rte-init");o.addClass("wiki-edit-wrapped");new f(o).setHeights();n.textarea=l;n.$textarea=o;var m=e._createTabs(c(n),o);e._initModes(c(n),o,m);m.on("change",function(p){n.FSM.triggerEvent(k.TABS_CHANGE,p)});m.getMode().then(i.debounce(function(p){n.FSM.triggerEvent(k.TABS_CHANGE,p)}));return j("Wrap",function(q,p){if(q===k.DETACHED&&p===n){return d(n)}if(q===k.TABS_CHANGE&&p===a.Modes.VISUAL){return b(n)}else{if(q===k.TABS_CHANGE&&p===a.Modes.TEXT){return g(n)}}})}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:fsm', location = 'js/fsm/states/util/state-hidden-intersection-observer.js' */
define("jira/editor/fsm/states/state-hidden-intersection-observer",["jira/editor/fsm/events"],function(a){var b=function(c,d){this.element=c;this.FSM=d};b.prototype.isIntersectionObserverSupported=function(){return"IntersectionObserver" in window&&"IntersectionObserverEntry" in window&&"intersectionRatio" in window.IntersectionObserverEntry.prototype};b.prototype.observe=function(){if(!this.isIntersectionObserverSupported()){return false}var c={root:null,rootMargin:"0px",threshold:0};function d(e,f){e.forEach(function(g){if(g.isIntersecting){this.FSM.triggerEvent(a.VISIBLE)}}.bind(this))}this.observer=new window.IntersectionObserver(d.bind(this),c);this.observer.observe(this.element);return true};b.prototype.cleanup=function(){if(this.observer){this.observer.disconnect();delete this.observer}};return b});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:fsm', location = 'js/fsm/states/state-hidden.js' */
define("jira/editor/fsm/states/hidden",["jira/editor/fsm/states/state","jira/editor/fsm/states/wrap","jira/editor/fsm/events","jquery","underscore","jira/editor/fsm/states/state-hidden-intersection-observer"],function(c,f,b,e,d,a){var g=100;var h=".rteHiddenState";return function(k,q){var p=require("jira/editor/fsm/states/init");var l=e(q);var m;var r;var n=new a(q,k.FSM);if(!n.observe()){var s=l.parents(".tabs-pane");if(s.length>0){var i=e(s[0]).attr("id");m=e('a[href="#'+i+'"]');m.on("click"+h,function(){d.defer(function(){k.FSM.triggerEvent(b.VISIBLE)})})}}r=setInterval(function o(){if(l.is(":visible")){k.FSM.triggerEvent(b.VISIBLE)}},g);return c("Hidden",function(u,t){if(u===b.DETACHED){return p(t)}if(u===b.VISIBLE||u===b.ATTACHED){if(l.is(":visible")){return f(k,q)}}}).extend(function j(t){if(t){if(r){clearInterval(r);r=undefined}if(m){m.off("click"+h)}n.cleanup()}return t})}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:fsm', location = 'js/fsm/states/state-mode-text.js' */
define("jira/editor/fsm/states/mode-text",["jira/editor/fsm/states/state","jira/editor/fsm/states/detached","jira/editor/fsm/events","jira/editor/analytics","jira/editor/constants"],function(c,e,a,b,d){return function(g){var f=require("jira/editor/fsm/states/mode-visual");var i=window.performance.now();return c("Text",function h(k,j){if(k===a.DETACHED&&j===g){return e(g)}if(k===a.TABS_CHANGE&&j===d.Modes.VISUAL){return f(g)}}).extend(function(j){if(j){b.sendEvent("editor.instance.tab.timing.text",{time:window.performance.now()-i})}return j})}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:fsm', location = 'js/fsm/states/state-mode-visual.js' */
define("jira/editor/fsm/states/mode-visual",["jira/editor/fsm/states/state","jira/editor/fsm/states/detached","jira/editor/fsm/events","jira/editor/analytics","jira/editor/constants","underscore"],function(d,g,b,c,f,e){var a=".stateVisual";return function(i){var h=require("jira/editor/fsm/states/mode-text");[f.EVENT_OPERATION,f.EVENT_OPERATION_COLOR,f.EVENT_OPERATION_ATTACHMENT].forEach(function(l){i.$textarea.on(l+a,function(n,m){i.FSM.triggerEvent(l,m);return true})});i.$textarea.on("focus"+a,function(){i.FSM.triggerEvent(b.TEXTAREA_FOCUS)});i.$textarea.on("keydown"+a,function(){i.FSM.triggerEvent(b.TEXTAREA_FOCUS)});i.$textarea.on(f.EVENT_CHANGE+a,function(l,m){i.FSM.triggerEvent(f.EVENT_CHANGE,m)});var k=window.performance.now();return d("Visual",function j(m,l){if(m===b.DETACHED&&l===i){return g(i)}if(m===b.TABS_CHANGE&&l===f.Modes.TEXT){return h(i)}if(m===f.EVENT_OPERATION){i.getInstance().focus().executeOperation(l)}if(m===f.EVENT_OPERATION_COLOR){i.getInstance().focus().executeOperation("color",l)}if(m===f.EVENT_OPERATION_ATTACHMENT){e.each(e.isArray(l)?l:[l],function(n){i.getInstance().focus().executeOperation("attachment",{attachment:n})})}if(m===b.TEXTAREA_FOCUS){i.getInstance().focus()}if(m===f.EVENT_CHANGE){i.changeHandler(l)}}).extend(function(l){if(l){c.sendEvent("editor.instance.tab.timing.visual",{time:window.performance.now()-k});i.$textarea.off(".stateVisual")}return l})}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:fsm', location = 'js/fsm/events.js' */
define("jira/editor/fsm/events",[],function(){return["ATTACHED","DETACHED","WIKI_EDITOR_INITIALIZED","DESTROY_TIMEOUT","TABS_CHANGE","TEXTAREA_FOCUS","VISIBLE"].reduce(function(a,b){a[b]=b;return a},{})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:fsm', location = 'js/fsm/fsm.js' */
define("jira/editor/fsm",["jira/editor/fsm/states/init","jira/editor/fsm/events","jira/lib/class","jira/util/logger","underscore"],function(a,b,c,e,d){var f=c.extend({init:function(){this.currentState=a()},triggerEvent:function(h){e.debug("JEP FSM - Event:",h,d.rest(arguments,1));e.debug("JEP FSM - Current state:",this.currentState.stateName);var g=this.currentState.apply(null,arguments);if(d.isFunction(g)&&g!==this.currentState){this.currentState=g;e.debug("JEP FSM - Next State:",g.stateName)}}});f.Events=b;return f});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:util', location = 'js/util/edit-distance.js' */
define("jira/editor/util/edit-distance",["exports"],function(a){a.getEditDistance=function(d,c){if(d.length===0){return c.length}if(c.length===0){return d.length}var e=[];var g;for(g=0;g<=c.length;g++){e[g]=[g]}var f;for(f=0;f<=d.length;f++){e[0][f]=f}for(g=1;g<=c.length;g++){for(f=1;f<=d.length;f++){if(c.charAt(g-1)===d.charAt(f-1)){e[g][f]=e[g-1][f-1]}else{e[g][f]=Math.min(e[g-1][f-1]+1,Math.min(e[g][f-1]+1,e[g-1][f]+1))}}}return e[c.length][d.length]}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:util', location = 'js/util/strings.js' */
define("jira/editor/util/strings",["exports"],function(a){a.getFilenameFromError=function(b){return b&&(b.match(/^Unable to render embedded object: File \(([^)]+)\) not found\.$/)||b.match(/^No usable issue stored in the context, unable to resolve filename '([^']+)'$/)||[])[1]}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:round-trip', location = 'js/round-trip.js' */
define("jira/editor/round-trip",["jira/editor/analytics","jira/editor/controller","jira/editor/util/strings","jira/data/local-storage","jira/editor/util/edit-distance","underscore","jquery"],function(l,o,j,m,e,u,d){var n="jira.editor.score";var h=JSON.stringify({count:0,average:0,lastReport:0});var k=100;var p=1000*60*60*24;var t=k*0.1;var c=30000;var s=function(){try{return JSON.parse(m.getItem(n)||h)}catch(v){return JSON.parse(h)}};var f=function(w){try{m.setItem(n,JSON.stringify(w));return true}catch(v){return false}};var g=function(v){var w=s();w.average=(v+w.count*w.average)/(w.count+1);w.count+=1;r(w);if(w.count>k){w.count=1;w.average=v}f(w)};var r=function(v){if(Date.now()-v.lastReport<p||v.count<t){return}v.lastReport=Date.now();if(f(v)){l.sendEvent("editor.instance.roundtrip.score",{average:v.average,count:v.count})}};var b=function(x,z,w){if(x===z){return 1}if(x.length===0||z.length===0){return 0}var y={_chars:33};var B=i(new DOMParser().parseFromString(x,"text/html").body,y);var v=i(new DOMParser().parseFromString(z,"text/html").body,y);var C=e.getEditDistance(B,v);var A=1-(C/Math.max(B.length,v.length));l.sendEvent("editor.instance.roundtrip.score.raw",{distance:C,score:A,sourceLength:x.length,targetLength:z.length,time:window.performance.now()-w});return A};var i=function(w,z){var v=u(w.childNodes).toArray();var y="";while(v.length>0){var A=v.splice(0,1)[0];var x=A.nodeName;if(A.nodeType===Node.TEXT_NODE){x+="#"+A.nodeValue}else{if(A.attributes.length>0){x+="@"+u(A.attributes).toArray().filter(function(B){return !/^(data-mce|style)/.test(B.name)}).map(function(B){return B.name+="="+B.value}).sort().join("@")}}if(!z[x]){z[x]=String.fromCharCode(z._chars++)}y+=z[x];v.push.apply(v,A.childNodes)}return y};var q=function(A){try{var E="";var y=new DOMParser().parseFromString(A,"text/html").body;var B=function(F){return F.nodeType===Node.TEXT_NODE&&/^\s+$/.test(F.nodeValue)||F.nodeType===Node.COMMENT_NODE||F.nodeName==="A"&&!F.nodeValue};d(y).find(">p:first-child:last-child").contents().unwrap();var C=u(y.childNodes).toArray();while(C.length>0){var w=C.pop();if(B(w)){w.parentNode.removeChild(w);continue}else{if(w.nodeName==="STRONG"){var x=document.createElement("b");u(w.childNodes).toArray().forEach(x.appendChild,x);w.parentNode.replaceChild(x,w);w=x}else{if(w.nodeName==="SPAN"&&w.className==="error"){var D=d(w).text();var v=j.getFilenameFromError(D);if(v){d(w).replaceWith(d("<img />").attr("data-filename",v))}}else{if(w.nodeName==="IMG"&&w.getAttribute("data-filename")&&/^data:/.test(w.src)){w.removeAttribute("src")}else{if(w.nodeName==="DIV"&&w.className==="table-wrap"){d(w).find("table:first-child:last-child").unwrap()}}}}}C.push.apply(C,w.childNodes)}return y.innerHTML}catch(z){return A}};var a=u.debounce(function(w,v,x){o.renderMarkup(v,x).done(function(z){var y=window.performance.now();g(b(q(w),q(z),y))}).fail(function(){})},c);return{verify:a,get:s}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:rteInitElement', location = 'soy/editor-init.soy' */
// This file was automatically generated from editor-init.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Editor.Init.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Editor == 'undefined') { JIRA.Editor = {}; }
if (typeof JIRA.Editor.Init == 'undefined') { JIRA.Editor.Init = {}; }
if (typeof JIRA.Editor.Init.Templates == 'undefined') { JIRA.Editor.Init.Templates = {}; }


JIRA.Editor.Init.Templates.init = function(opt_data, opt_ignored) {
  return '' + JIRA.Editor.Init.Templates.container({content: '<rich-editor contenteditable="true" data-issue-key="' + soy.$$escapeHtml(opt_data.issueKey) + '" data-content-present="true">' + soy.$$filterNoAutoescape(opt_data.valueRendered) + '</rich-editor>'});
};
if (goog.DEBUG) {
  JIRA.Editor.Init.Templates.init.soyTemplateName = 'JIRA.Editor.Init.Templates.init';
}


JIRA.Editor.Init.Templates.container = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="rte-container">' + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + '</div>';
};
if (goog.DEBUG) {
  JIRA.Editor.Init.Templates.container.soyTemplateName = 'JIRA.Editor.Init.Templates.container';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:element', location = 'js/ui/rich-editor.js' */
define("jira/editor/ui/rich-editor",["atlassian/libs/skate-0.12.6","jira/util/logger","jira/util/navigator","jira/editor/controller","jira/editor/analytics","jira/editor/round-trip","jira/editor/fsm","jira/editor/constants","jquery","underscore"],function(f,k,n,h,i,e,m,b,d,j){if(window.JIRA_EDITOR_CONNECT_PLUGIN_INSTALLED||n.isIE()&&!n.isEdge()&&n.majorVersion()<11){return}window.JIRA_EDITOR_CONNECT_PLUGIN_INSTALLED=true;d.valHooks.textarea={get:function(o){},set:function(o,p){d(o).trigger(b.EVENT_CHANGE,p)}};h.overrideWikiPreview();var l="richEditorInstance";var c="richEditorInstance_loading";var a={prototype:{showMask:function(){d(this).addClass(b.CLASS_LOADING);this.getToolbar().addClass(b.CLASS_LOADING);this.getContainer().addClass(b.CLASS_LOADING);this.getInstance()&&this.getInstance().disable()},hideMask:function(){d(this).removeClass(b.CLASS_LOADING);this.getToolbar().removeClass(b.CLASS_LOADING);this.getContainer().removeClass(b.CLASS_LOADING);this.getInstance()&&this.getInstance().enable()},getToolbar:function(){return this.getToolbarContainer().find(".wiki-edit-toolbar")},getContainer:function(){return d(this.parentNode)},getToolbarContainer:function(){return d(this).parents(".wiki-edit, .js-comment-form, .servicedesk-attachments-dialog, .sd-comment-field-form-container")},coverTextarea:function(){this.$textarea.addClass(b.CLASS_COVER).prop("defaultValue",this.$textarea.val()).on("focus.rteCover",function(o){o.preventDefault()})},uncoverTextarea:function(){this.$textarea.removeClass(b.CLASS_COVER).off(".rteCover");if(this.$textarea.expandOnInput){this.$textarea.css({height:""});this.$textarea.expandOnInput()}},getRenderParams:function(){return d(this).data("renderParams")},replaceSelection:function(o){h.renderMarkup(o,this.getRenderParams()).done(function(p){this.getInstance().replaceSelection(p)}.bind(this))},syncSelection:function(q){var s=q.selectionStart;var p=q.selectionEnd;var r=q.value.length;var o=this.getInstance();j.defer(function(){if(p===r){if(s===0){o.selectAll()}else{if(s===p){o.selectAll();o.editor.selection.collapse(false)}}}o.focus()})},setContent:function(o){return h.renderMarkup(o,this.getRenderParams()).done(function(p){this._setRawContent(p)}.bind(this))},_setRawContent:function(p,o){this.getInstance().setContent(p,null,o)},getContent:function(){return this.$textarea.val()},focus:function(){this.getInstance().focus()},setMode:function(q){var o=new d.Deferred();if(q){i.sendEvent("editor.instance.switch.source");i.sendEvent("bundled.editor.instance.switch.source")}else{i.sendEvent("editor.instance.switch.wysiwyg");i.sendEvent("bundled.editor.instance.switch.wysiwyg")}if(q){this.uncoverTextarea();if(this.getInstance()){this.getInstance().hide()}setTimeout(function(){this.$textarea.setCaretToPosition(0);this.$textarea.focus();o.resolve()}.bind(this),25);this.$textarea.attr("originalValue",this.$textarea.val())}else{var r=this.$textarea.attr("originalValue")!==this.$textarea.val();this.showMask();this.coverTextarea();var p=r?h.renderMarkup(this.$textarea.val(),this.getRenderParams()):new d.Deferred().resolve();p.always(function(){this.hideMask();this.getInstance().show();this.getInstance().focus();if(r){p.done(function(s){this.getInstance().setContent(s,null,true);o.resolve()}.bind(this)).fail(function(){o.reject();this.$textarea.removeAttr("originalValue")}.bind(this))}else{o.resolve()}}.bind(this))}return o},changeHandler:function(o){h.renderMarkup(o,this.getRenderParams()).done(function(p){this.getInstance().setContent(p)}.bind(this))},getInstance:function(){return this[l]},loadingStart:function(){if(typeof this[l]!=="undefined"||this[c]){return false}this.undoManager=this.$textarea.data("undoManager");this[c]=true;this.coverTextarea();this.showMask();return true},setInstance:function(o){this[l]=o},loadingStop:function(){delete this[c];this[l].disable()},shouldFocus:function(){return this.$textarea.parents("#addcomment, #comment-add, .issue-body-content").length>0},serialize:function(){var o=new d.Deferred();var p=this.getInstance().getContent();require("jira/editor/converter").convert(p).then(function(q){k.trace("jira.editor.plugin.converted");this.$textarea.attr("value",q).trigger("input");e.verify(p,q,this.getRenderParams());o.resolve()}.bind(this));return o}},attached:function(o){if(!o.FSM){o.FSM=new m()}if(document.body.contains(o)){o.FSM.triggerEvent(m.Events.ATTACHED,o)}},detached:function(o){if(!document.body.contains(o)&&o.FSM){o.FSM.triggerEvent(m.Events.DETACHED,o)}}};var g=f("rich-editor",{type:f.types.TAG,prototype:a.prototype,attached:a.attached,detached:a.detached});return g});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:customization', location = 'js/editor-customizer.js' */
define("jira/editor/customizer",["jira/util/logger"],function(b){var a=[];var c={};c.customizeSettings=function(e,d){if(typeof e!=="function"){b.error("callback has to be a function");return false}if(typeof d==="object"){e=e.bind(d)}a.push(e);return true};c.getCustomizeSettingCallbacks=function(){return a.slice(0)};return c});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:init', location = 'js/rich-editor-init.js' */
require(["jira/featureflags/feature-manager","jira/editor/ui/rich-editor","jira/editor/controller"],function(b,c,a){if(!b.isFeatureEnabled("jira.richeditor.deferred.loading")){a.initResources()}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-browser-metrics', location = 'includes/js/browser-metrics/BrowserMetrics.js' */
!function(){"use strict";function e(e,r){for(var t=document.querySelectorAll(e),o=0;o<t.length;o++)t[o].classList.add(r)}function r(){var e=!1,r=!1;switch(a){case"plan":e=GH.RapidBoard.State.isDetailsViewPlanOpened(),r=GH.BacklogSelectionController.selectionManager&&GH.BacklogSelectionController.selectionManager.hasSelection();break;case"work":e=GH.RapidBoard.State.isDetailsViewOpened(),r=GH.WorkSelectionController.selectionManager&&GH.WorkSelectionController.selectionManager.hasSelection()}return e&&r}function t(e,r,t,o,a){e.on(r,function(){i.start({key:a,isInitial:!1}),t.on(o,function(){i.end({key:a})})})}var o=!0,i=window["browser-metrics"]||{start:function(){},end:function(){}},a=GH.RapidBoard.ViewController.displayedMode;GH.RapidBoard.ViewController.on("before:navigate",function(t){var n,s=".js-marker-backlog-header:not(.browser-metrics-stale)",l="#ghx-chart-header-primary:not(.browser-metrics-stale)",c="#ghx-work .ghx-issue:not(.browser-metrics-stale), #ghx-work .ghx-sad-columns:not(.browser-metrics-stale)",d="#gh.js-ghx-detail-loaded:not(.browser-metrics-stale)",u=[];switch(a=t.mode,t.mode){case"plan":n="jira.agile.plan"+(r()?"-detail":""),u.push(s),r()&&u.push(d);break;case"report":n="jira.agile.report",u.push(l);break;case"work":n="jira.agile.work"+(r()?"-detail":""),u.push(c),r()&&u.push(d)}o||u.forEach(function(r){e(r,"browser-metrics-stale")}),i.start({key:n,isInitial:o,ready:u}),o=!1}),GH.DetailsView.on("after:render",function(){document.querySelector("#gh").classList.remove("browser-metrics-stale")}),t(GH.WorkDragAndDrop,"before:issueDropRender",GH.WorkController,"after:render","jira.board.work.transition.issue"),t(GH.Components.QuickFilters.events,"before:toggle",GH.WorkController,"after:render","jira.agile.quickfilter.toggle"),t(GH.DetailsFieldEditControl.events,"before:inlineedit",GH.DetailsFieldEditControl.events,"after:inlineedit","jira.agile.issuedetail.inlineedit")}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-onboarding', location = 'includes/js/rapid/ui/plan/PlanOnboarding.js' */
!function(t,s,n,i,r,a){"use strict";function e(){var t=n.getBacklogModel2(),a=t.getIssueList(),e={issueListStats:i.getIssueListStats(a,!1),sprintModels:n.getSprintModels(),canCreateIssue:n.canCreateIssue(),canManageSprints:n.canManageSprints(),sprintIssueListStats:[],numActiveSprints:0,numFutureSprints:0};return s.each(e.sprintModels,function(t){e.sprintIssueListStats.push(r.calculateSprintIssueListStats(t,t.getIssueList())),"ACTIVE"===t.sprintData.state&&e.numActiveSprints++,"FUTURE"===t.sprintData.state&&e.numFutureSprints++}),e}function p(s){var n=t(".ghx-onboarding-fillyourbacklog-group"),i=t(".ghx-backlog-group .ghx-helper");s.issueListStats.totalCount<3&&0===s.sprintModels.length&&s.canCreateIssue?(n.html(GH.tpl.planonboarding.renderFillYourBacklogMessage()),i.hide()):0===s.issueListStats.totalCount||0===s.issueListStats.visibleCount?(i.show(),n.empty()):(i.hide(),n.empty())}function u(n){var i,r,a,e;n.canManageSprints&&0===n.numActiveSprints&&(a=s.first(n.sprintModels),e=s.first(n.sprintIssueListStats),a&&e&&"FUTURE"===a.sprintData.state&&0===e.totalCount&&(i=t(".js-sprint-container"),r=i.filter("[data-sprint-id="+a.sprintData.id+"]").find(".ghx-helper"),r.html(GH.tpl.planonboarding.renderPlanYourSprintMessage())))}function o(t){return t.canManageSprints&&0===t.numFutureSprints&&0===t.numActiveSprints&&t.issueListStats.totalCount>=3}var l=function(){a(this)};l.prototype.updateStartSprint=function(n){if(t(".js-sprint-start").removeClass("aui-button-primary"),n.canManageSprints&&0===n.numActiveSprints){var i=s.find(n.sprintModels,function(t,s){return"FUTURE"===t.sprintData.state&&n.sprintIssueListStats[s].totalCount>0});if(i){var r=".js-sprint-container[data-sprint-id="+i.sprintData.id+"] .js-sprint-start";t(r).addClass("aui-button-primary")}}},l.prototype.renderOnboarding=function(){var t=e();p(t),u(t),this.updateCreateSprint(t),this.updateStartSprint(t),this.refresh()},l.prototype.refresh=function(){this.trigger("refresh")},l.prototype.updateCreateSprint=function(s){var n=t(".js-add-sprint");o(s)?n.addClass("aui-button-primary"):n.removeClass("aui-button-primary")},GH.PlanOnboarding=l,GH.planOnboarding=new l}(AJS.$,_,GH.BacklogModel,GH.BacklogStatistics,GH.SprintView,GH.Events);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-onboarding', location = 'includes/js/rapid/ui/plan/PlanOnboarding.soy' */
// This file was automatically generated from PlanOnboarding.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.planonboarding.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.planonboarding == 'undefined') { GH.tpl.planonboarding = {}; }


GH.tpl.planonboarding.renderFillYourBacklogMessage = function(opt_data, opt_ignored) {
  return '<div class="ghx-onboarding-fillyourbacklog ghx-onboarding-container"><div class="ghx-onboarding-message"><h5>' + soy.$$escapeHtml("Fill your backlog with issues") + '</h5><p>' + soy.$$escapeHtml("This is your team backlog. Create and estimate new issues, and prioritize the backlog using drag and drop.") + '</p></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.planonboarding.renderFillYourBacklogMessage.soyTemplateName = 'GH.tpl.planonboarding.renderFillYourBacklogMessage';
}


GH.tpl.planonboarding.renderPlanYourSprintMessage = function(opt_data, opt_ignored) {
  return '<div class="ghx-onboarding-planyoursprint ghx-onboarding-container"><div class="ghx-onboarding-message"><h5>' + soy.$$escapeHtml("Plan your sprint") + '</h5><p>' + soy.$$escapeHtml("This is a sprint. Plan a sprint by dragging issues here.") + '</p></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.planonboarding.renderPlanYourSprintMessage.soyTemplateName = 'GH.tpl.planonboarding.renderPlanYourSprintMessage';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:subnavigator', location = 'includes/js/sidebar/subnavigator/SubnavigatorController.soy' */
// This file was automatically generated from SubnavigatorController.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.subnavigator.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.subnavigator == 'undefined') { GH.tpl.subnavigator = {}; }


GH.tpl.subnavigator.header = function(opt_data, opt_ignored) {
  return '<h1><span id="ghx-board-name" class="subnav-page-header">' + soy.$$escapeHtml(opt_data.headerText) + '</span></h1>';
};
if (goog.DEBUG) {
  GH.tpl.subnavigator.header.soyTemplateName = 'GH.tpl.subnavigator.header';
}


GH.tpl.subnavigator.sprintgoal = function(opt_data, opt_ignored) {
  return '' + ((opt_data.sprintGoal) ? '<span id="ghx-sprint-goal" title="' + soy.$$escapeHtml(opt_data.sprintGoal) + '">' + soy.$$escapeHtml(opt_data.sprintGoal) + '</span>' : '');
};
if (goog.DEBUG) {
  GH.tpl.subnavigator.sprintgoal.soyTemplateName = 'GH.tpl.subnavigator.sprintgoal';
}


GH.tpl.subnavigator.subnavigator = function(opt_data, opt_ignored) {
  return '<span class="subnav-container"><span id="subnav-title"></span><span id="subnav-trigger"></span><span id="subnav-opts"></span></span>';
};
if (goog.DEBUG) {
  GH.tpl.subnavigator.subnavigator.soyTemplateName = 'GH.tpl.subnavigator.subnavigator';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:subnavigator', location = 'includes/js/sidebar/subnavigator/PlanSubnavigatorContextProvider.js' */
AJS.namespace("GH.RapidBoard.PlanSubnavigatorContextProvider"),define("jira-agile/subnavigator/plan-subnavigator-context-provider",["underscore","jira-agile/rapid/ui/plan/plan-controls"],function(n,a){var e={id:0,label:"Backlog"},r={hasSubnavigator:function(){return!0},header:function(){return a.rapidViewConfig.name},itemList:function(){return[e]},onLoad:function(){},selectedItem:function(){return e.id},getChangeViewText:function(){return"_"},analyticEvent:function(){}};return r}),AJS.namespace("GH.RapidBoard.PlanSubnavigatorContextProvider",null,require("jira-agile/subnavigator/plan-subnavigator-context-provider"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:subnavigator', location = 'includes/js/sidebar/subnavigator/WorkSubnavigatorContextProvider.js' */
AJS.namespace("GH.RapidBoard.WorkSubnavigatorContextProvider"),define("jira-agile/subnavigator/work-subnavigator-context-provider",["jquery","underscore","jira-agile/rapid/work/work-controls"],function(t,r,i){var n="all",e="sprintFilterChange",a={id:0,label:"Kanban board"},s={id:0,label:"Active sprints"},o={hasSubnavigator:function(){return!0},header:function(){return i.rapidViewConfig.name},getSprintGoal:function(){if(i.sprintfilters.hasSprints()){var t=void 0;if(i.sprintfilters.hasParallelActiveSprints()){var r=i.sprintfilters.getActiveSprintFilters()[0];t=r?i.sprintfilters.getSprintById(r).goal:""}else t=i.sprintfilters.getSprintData()[0].goal;return t}},itemList:function(){if(this._isKanban())return[a];var t=r.map(this._getSprints(),function(t){return{id:t.id.toString(),label:t.name}});return 0===t.length?[s]:1===t.length?t:[t,[{id:n,label:"All sprints"}]]},onLoad:function(){},selectedItem:function(){if(this._isKanban())return a.id;var t=i.sprintfilters.getActiveSprintFilters()[0];if(t)return t.toString();var r=this._getSprints().length;return 0===r?s.id:1===r?i.sprintfilters.getSprintData()[0].id.toString():n},selectionHandler:function(r){var a=r===n?i.sprintfilters.getActiveSprintFilters()[0]:parseInt(r,10);i.sprintfilters.toggleActiveSprintFilter(a),t(i.sprintfilters).trigger(e)},getChangeViewText:function(){return "Switch sprint"},analyticEvent:function(t,r){return{name:"jira.project.sidebar.sprint.select",data:{sprintId:t,initialLoad:r}}},_getSprints:function(){return i.sprintfilters.getSprintData()},_isKanban:function(){return!i.rapidViewConfig.sprintSupportEnabled}};return o}),AJS.namespace("GH.RapidBoard.WorkSubnavigatorContextProvider",null,require("jira-agile/subnavigator/work-subnavigator-context-provider"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:subnavigator', location = 'includes/js/sidebar/subnavigator/ReportSubnavigatorContextProvider.js' */
define("jira-agile/subnavigator/report-subnavigator-context-provider",["underscore","jira/util/browser","jira-agile/rapid/ui/chart/report-controller"],function(e,t,r){var i={selectionHandler:function(e){if("com.atlassian.jira.jira-projects-plugin:report-page"===e){var i=AJS.contextPath()+"/projects/"+JIRA.API.Projects.getCurrentProjectKey()+"?selectedItem="+e;t.reloadViaWindowLocation(i)}else r.selectChart(e),this._storeLastViewedReportLink(e)},header:function(){return r.rapidViewConfig.name},hasSubnavigator:function(){return!0},itemList:function(){var t=e.map(r.getApplicableCharts(),function(e){return{id:e.id,label:e.name,description:e.tooltip}});return JIRA.API.Sidebar.isProjectSidebar()?[t,[{id:"com.atlassian.jira.jira-projects-plugin:report-page",label:"All reports",description:"Show the reports overview page, which lists all available reports"}]]:t},onLoad:function(){var e=this.selectedItem();this._storeLastViewedReportLink(e)},selectedItem:function(){return r.getSelectedChart()},getChangeViewText:function(){return "Switch report"},analyticEvent:function(e,t){return{name:"jira.project.sidebar.report.select",data:{reportId:e,initialLoad:t}}},_storeLastViewedReportLink:function(e){JIRA.API.getSidebar().done(function(t){if(t.isProjectSidebar()&&JIRA.Projects.Sidebar.Reports){var i=r.rapidViewData.id,a=JIRA.API.Projects.getCurrentProjectKey(),o=AJS.contextPath()+"/secure/RapidBoard.jspa?rapidView="+i+"&projectKey="+a+"&view=reporting&chart="+e+"&useStoredSettings=true";JIRA.Projects.Sidebar.Reports.storeLastViewedReportLink(o)}})}};return i}),AJS.namespace("GH.RapidBoard.ReportSubnavigatorContextProvider",null,require("jira-agile/subnavigator/report-subnavigator-context-provider"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:subnavigator', location = 'includes/js/sidebar/subnavigator/SubnavigatorController.js' */
AJS.namespace("GH.RapidBoard.SubnavigatorController"),GH.RapidBoard.SubnavigatorController=function(e,t,r,a,i,o,n){var d={contextProviders:{plan:e,work:t,report:r},render:function(){this._getContextProvider().onLoad(),this.setHeader(),this.renderSubnavigator()},setHeader:function(){o("#ghx-view-selector").children().remove(),o("#ghx-view-selector").html(a.header({headerText:this._getContextProvider().header()})),this.renderSprintGoal()},renderSprintGoal:function(){var e=i.getMode();"work"===e&&n.isFeatureEnabled("com.atlassian.jira.agile.darkfeature.sprint.goal")&&(o("#ghx-view-selector #ghx-sprint-goal").remove(),o("#ghx-view-selector").append(a.sprintgoal({sprintGoal:this._getContextProvider().getSprintGoal()})),o("#ghx-view-selector #ghx-sprint-goal").tooltip({className:"ghx-sprint-goal-tooltip"}))},renderSubnavigator:function(){var e=this._getContextProvider();if(e.hasSubnavigator()){this.createSubnavigatorPlaceholders();var t=JIRA.Projects.Subnavigator,r=this._getSubnavSettings(t,e),a=new t(r);a.on("itemSelected",function(t){t.preventDefault(),e.selectionHandler(t.item.id),d.renderSprintGoal(),AJS.trigger("analyticsEvent",e.analyticEvent(t.item.id,!1))}),a.show(),AJS.trigger("analyticsEvent",e.analyticEvent(e.selectedItem(),!0))}},createSubnavigatorPlaceholders:function(){o("#ghx-view-selector h1").append(a.subnavigator())},_getContextProvider:function(){var e=i.getMode();return this.contextProviders[e]},_getSubnavSettings:function(e,t){var r={id:i.getMode(),triggerPlaceholder:"#subnav-trigger",contentPlaceholder:"#subnav-opts",itemGroups:t.itemList(),selectedItem:t.selectedItem()},a=void 0!==e.prototype._shouldShowTriggerView;return a&&(r.titlePlaceholder="#subnav-title",r.hideSelectedItem=!0,r.changeViewText=t.getChangeViewText()),r}};return d}(GH.RapidBoard.PlanSubnavigatorContextProvider,GH.RapidBoard.WorkSubnavigatorContextProvider,GH.RapidBoard.ReportSubnavigatorContextProvider,GH.tpl.subnavigator,GH.RapidBoard.State,require("jquery"),require("jira/featureflags/feature-manager"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:plan-chaperones', location = 'onboarding/chaperones/PlanChaperones.js' */
define("jira-agile/onboarding/chaperones/plan-chaperones",["jquery","underscore"],function(e,t){function n(){t.each(this.chaperones,function(t){"undefined"!=typeof t.helptip?t.helptip.refresh():e(t.anchorSelector).length&&this._initChaperone(t)},this)}function o(){return AJS.Meta.getBoolean("onboarding-has-completed-first-use-flow")}var i=function(e){this.chaperones=[{id:"create-sprint",title:"Create a sprint",bodyHtml:"You now have some issues in your backlog. Create a sprint to start working on them.",anchorSelector:".js-add-sprint.aui-button-primary"},{id:"start-sprint",title:"Start your sprint",bodyHtml:"Click this button when you are ready to start the sprint.",anchorSelector:".js-sprint-start.aui-button-primary"}],e.on("refresh",n,this)};return i.prototype._initChaperone=function(n){AJS.HelpTip&&o()&&"undefined"==typeof n.helptip&&(n.helptip=new AJS.HelpTip({id:"onboarding-"+n.id,title:n.title,bodyHtml:n.bodyHtml,anchor:n.anchorSelector,showCloseButton:!0}),n.helptip.show({force:!0}),e(document).on("click.planChaperone",n.anchorSelector,t.bind(function(){this._dismissChaperone(n)},this)))},i.prototype._dismissChaperone=function(t){"undefined"!=typeof t.helptip&&(t.helptip.dismiss("dismissed"),delete t.helptip,e(document).off("click.planChaperone",t.anchorSelector))},i});;
;
/* module-key = 'com.pyxis.greenhopper.jira:plan-chaperones', location = 'onboarding/chaperones/PlanChaperonesInit.js' */
require(["jira-agile/onboarding/chaperones/plan-chaperones"],function(n){new n(GH.planOnboarding)});;
;
/* module-key = 'com.atlassian.gadgets.embedded:gadget-core-resources', location = 'js/rpc.js' */
var gadgets=gadgets||{};gadgets.rpc=function(){var CALLBACK_NAME="__cb";var DEFAULT_NAME="";var FE_G2C_CHANNEL="__g2c_rpc";var FE_C2G_CHANNEL="__c2g_rpc";var services={};var iframePool=[];var relayUrl={};var useLegacyProtocol={};var authToken={};var callId=0;var callbacks={};var setup={};var sameDomain={};var params={};if(gadgets.util){params=gadgets.util.getUrlParameters()}authToken[".."]=params.rpctoken||params.ifpctok||0;function getRelayChannel(){return typeof window.postMessage==="function"?"wpm":typeof document.postMessage==="function"?"dpm":navigator.product==="Gecko"?"fe":"ifpc"}function setupChannel(){if(relayChannel==="dpm"||relayChannel==="wpm"){window.addEventListener("message",function(packet){try{if(packet&&packet.origin&&packet.origin!=="null"&&typeof packet.data==="string"){if(packet.origin===location.origin){process(gadgets.json.parse(packet.data))}else{AJS.$.get(AJS.contextPath()+"/rest/whitelist/1/check",{url:packet.origin}).done(function(result){if(result&&result.inbound&&result.inbound===true){process(gadgets.json.parse(packet.data))}else{if(AJS.debug){AJS.log("RPC: request rejected (bad origin): "+(packet&&packet.origin?packet.origin:"undefined origin"))}}}).fail(function(jqXHR,textStatus,errorThrown){AJS.log("RPC: REST "+textStatus,errorThrown)})}}else{if(AJS.debug){AJS.log("RPC: request rejected (bad origin): "+(packet&&packet.origin?packet.origin:"undefined origin"))}}}catch(e){if(AJS.debug){var origin=packet&&packet.origin?packet.origin:"undefined origin";AJS.log("Error processing gadget rpc message from '"+origin+"': "+e)}}},false)}}var relayChannel=getRelayChannel();setupChannel();services[DEFAULT_NAME]=function(){throw new Error("Unknown RPC service: "+this.s)};services[CALLBACK_NAME]=function(callbackId,result){var callback=callbacks[callbackId];if(callback){delete callbacks[callbackId];callback(result)}};function setupFrame(frameId){if(setup[frameId]){return }if(relayChannel==="fe"){try{var frame=document.getElementById(frameId);frame[FE_G2C_CHANNEL]=function(args){process(gadgets.json.parse(args))}}catch(e){}}setup[frameId]=true}function encodeLegacyData(args){var stringify=gadgets.json.stringify;var argsEscaped=[];for(var i=0,j=args.length;i<j;++i){argsEscaped.push(encodeURIComponent(stringify(args[i])))}return argsEscaped.join("&")}function process(rpc){if(rpc&&typeof rpc.s==="string"&&typeof rpc.f==="string"&&rpc.a instanceof Array){if(authToken[rpc.f]){if(authToken[rpc.f]!=rpc.t){if(AJS.debug){console.log("Invalid auth token received for operation: "+rpc.s)}return }}if(rpc.c){rpc.callback=function(result){gadgets.rpc.call(rpc.f,CALLBACK_NAME,null,rpc.c,result)}}var result=(services[rpc.s]||services[DEFAULT_NAME]).apply(rpc,rpc.a);if(rpc.c&&typeof result!="undefined"){gadgets.rpc.call(rpc.f,CALLBACK_NAME,null,rpc.c,result)}}}function callFrameElement(targetId,serviceName,from,rpcData,callArgs){try{if(from!=".."){var fe=window.frameElement;if(typeof fe[FE_G2C_CHANNEL]==="function"){if(typeof fe[FE_G2C_CHANNEL][FE_C2G_CHANNEL]!=="function"){fe[FE_G2C_CHANNEL][FE_C2G_CHANNEL]=function(args){process(gadgets.json.parse(args))}}fe[FE_G2C_CHANNEL](rpcData);return }}else{var frame=document.getElementById(targetId);if(typeof frame[FE_G2C_CHANNEL]==="function"&&typeof frame[FE_G2C_CHANNEL][FE_C2G_CHANNEL]==="function"){frame[FE_G2C_CHANNEL][FE_C2G_CHANNEL](rpcData);return }}}catch(e){}callIfpc(targetId,serviceName,from,rpcData,callArgs)}function callIfpc(targetId,serviceName,from,rpcData,callArgs){var relay=gadgets.rpc.getRelayUrl(targetId);if(!relay){throw new Error("No relay file assigned for IFPC")}var src=null;if(useLegacyProtocol[targetId]){src=[relay,"#",encodeLegacyData([from,callId,1,0,encodeLegacyData([from,serviceName,"","",from].concat(callArgs))])].join("")}else{src=[relay,"#",targetId,"&",from,"@",callId,"&1&0&",encodeURIComponent(rpcData)].join("")}emitInvisibleIframe(src)}function emitInvisibleIframe(src){var iframe;for(var i=iframePool.length-1;i>=0;--i){var ifr=iframePool[i];try{if(ifr&&(ifr.recyclable||ifr.readyState==="complete")){ifr.parentNode.removeChild(ifr);if(window.ActiveXObject){iframePool[i]=ifr=null;iframePool.splice(i,1)}else{ifr.recyclable=false;iframe=ifr;break}}}catch(e){}}if(!iframe){iframe=document.createElement("iframe");iframe.style.border=iframe.style.width=iframe.style.height="0px";iframe.style.visibility="hidden";iframe.style.position="absolute";iframe.onload=function(){this.recyclable=true};iframePool.push(iframe)}iframe.src=src;setTimeout(function(){document.body.appendChild(iframe)},0)}function callSameDomain(target,rpc){if(typeof sameDomain[target]==="undefined"){sameDomain[target]=false;var targetEl=null;if(target===".."){targetEl=parent}else{targetEl=frames[target]}try{sameDomain[target]=targetEl.gadgets.rpc.receiveSameDomain}catch(e){}}if(typeof sameDomain[target]==="function"){sameDomain[target](rpc);return true}return false}if(gadgets.config){function init(config){if(config.rpc.parentRelayUrl.substring(0,7)==="http://"){relayUrl[".."]=config.rpc.parentRelayUrl}else{var params=document.location.search.substring(0).split("&");var parentParam="";for(var i=0,param;param=params[i];++i){if(param.indexOf("parent=")===0){parentParam=decodeURIComponent(param.substring(7));break}}relayUrl[".."]=parentParam+config.rpc.parentRelayUrl}useLegacyProtocol[".."]=!!config.rpc.useLegacyProtocol}var requiredConfig={parentRelayUrl:gadgets.config.NonEmptyStringValidator};gadgets.config.register("rpc",requiredConfig,init)}return{register:function(serviceName,handler){if(serviceName==CALLBACK_NAME){throw new Error("Cannot overwrite callback service")}if(serviceName==DEFAULT_NAME){throw new Error("Cannot overwrite default service:"+" use registerDefault")}services[serviceName]=handler},unregister:function(serviceName){if(serviceName==CALLBACK_NAME){throw new Error("Cannot delete callback service")}if(serviceName==DEFAULT_NAME){throw new Error("Cannot delete default service:"+" use unregisterDefault")}delete services[serviceName]},registerDefault:function(handler){services[""]=handler},unregisterDefault:function(){delete services[""]},call:function(targetId,serviceName,callback,var_args){++callId;targetId=targetId||"..";if(callback){callbacks[callId]=callback}var from="..";if(targetId===".."){from=window.name}var rpc={s:serviceName,f:from,c:callback?callId:0,a:Array.prototype.slice.call(arguments,3),t:authToken[targetId]};if(callSameDomain(targetId,rpc)){return }var rpcData=gadgets.json.stringify(rpc);var channelType=relayChannel;if(useLegacyProtocol[targetId]){channelType="ifpc"}switch(channelType){case"dpm":var targetDoc=targetId===".."?parent.document:frames[targetId].document;targetDoc.postMessage(rpcData);break;case"wpm":var targetWin=targetId===".."?parent:frames[targetId];targetWin.postMessage(rpcData,relayUrl[targetId]);break;case"fe":callFrameElement(targetId,serviceName,from,rpcData,rpc.a);break;default:callIfpc(targetId,serviceName,from,rpcData,rpc.a);break}},getRelayUrl:function(targetId){return relayUrl[targetId]},setRelayUrl:function(targetId,url,opt_useLegacy){relayUrl[targetId]=url;useLegacyProtocol[targetId]=!!opt_useLegacy},setAuthToken:function(targetId,token){authToken[targetId]=token;setupFrame(targetId)},getRelayChannel:function(){return relayChannel},receive:function(fragment){if(fragment.length>4){process(gadgets.json.parse(decodeURIComponent(fragment[fragment.length-1])))}},receiveSameDomain:function(rpc){rpc.a=Array.prototype.slice.call(rpc.a);window.setTimeout(function(){process(rpc)},0)}}}();;
;
/* module-key = 'com.atlassian.gadgets.embedded:gadget-core-resources', location = 'js/util.js' */
Function.prototype.inherits=function(parentCtor){function tempCtor(){}tempCtor.prototype=parentCtor.prototype;this.superClass_=parentCtor.prototype;this.prototype=new tempCtor();this.prototype.constructor=this};;
;
/* module-key = 'com.atlassian.gadgets.embedded:gadget-core-resources', location = 'js/json.js' */
var gadgets=gadgets||{};gadgets.json=function(){function f(n){return n<10?"0"+n:n}Date.prototype.toJSON=function(){return[this.getUTCFullYear(),"-",f(this.getUTCMonth()+1),"-",f(this.getUTCDate()),"T",f(this.getUTCHours()),":",f(this.getUTCMinutes()),":",f(this.getUTCSeconds()),"Z"].join("")};var m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function stringify(value){var a,i,k,l,r=/["\\\x00-\x1f\x7f-\x9f]/g,v;switch(typeof value){case"string":return r.test(value)?'"'+value.replace(r,function(a){var c=m[a];if(c){return c}c=a.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"':'"'+value+'"';case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}a=[];if(typeof value.length==="number"&&!(value.propertyIsEnumerable("length"))){l=value.length;for(i=0;i<l;i+=1){a.push(stringify(value[i])||"null")}return"["+a.join(",")+"]"}for(k in value){if(value.hasOwnProperty(k)){if(typeof k==="string"){v=stringify(value[k]);if(v){a.push(stringify(k)+":"+v)}}}}return"{"+a.join(",")+"}"}}return{stringify:stringify,parse:function(text){if(/^[\],:{}\s]*$/.test(text.replace(/\\["\\\/b-u]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){return eval("("+text+")")}return false}}}();;
;
/* module-key = 'com.atlassian.gadgets.embedded:gadget-core-resources', location = 'js/gadgets-core.js' */
var gadgets=gadgets||{};gadgets.error={};gadgets.error.SUBCLASS_RESPONSIBILITY="subclass responsibility";gadgets.error.TO_BE_DONE="to be done";gadgets.log=function(message){if(window.console&&console.log){console.log(message)}else{var logEntry=document.createElement("div");logEntry.className="gadgets-log-entry";logEntry.innerHTML=message;document.body.appendChild(logEntry)}};gadgets.Extensible=function(){};gadgets.Extensible.prototype.setDependencies=function(dependencies){for(var p in dependencies){this[p]=dependencies[p]}};gadgets.Extensible.prototype.getDependencies=function(name){return this[name]};gadgets.UserPrefStore=function(){};gadgets.UserPrefStore.prototype.getPrefs=function(gadget){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.UserPrefStore.prototype.savePrefs=function(gadget){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.DefaultUserPrefStore=function(){gadgets.UserPrefStore.call(this)};gadgets.DefaultUserPrefStore.inherits(gadgets.UserPrefStore);gadgets.DefaultUserPrefStore.prototype.getPrefs=function(gadget){};gadgets.DefaultUserPrefStore.prototype.savePrefs=function(gadget){};gadgets.GadgetService=function(){};gadgets.GadgetService.prototype.setHeight=function(elementId,height){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.GadgetService.prototype.setTitle=function(gadget,title){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.GadgetService.prototype.setUserPref=function(id){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.IfrGadgetService=function(){gadgets.GadgetService.call(this);var service=this;gadgets.rpc.register("resize_iframe",function(){service.setHeight.apply(this,arguments)});gadgets.rpc.register("set_pref",function(){service.setUserPref.apply(this,arguments)});gadgets.rpc.register("set_title",function(){service.setTitle.apply(this,arguments)});gadgets.rpc.register("requestNavigateTo",function(){service.requestNavigateTo.apply(this,arguments)})};gadgets.IfrGadgetService.inherits(gadgets.GadgetService);gadgets.IfrGadgetService.prototype.setHeight=function(height){if(height>gadgets.container.maxheight_){height=gadgets.container.maxheight_}var element=document.getElementById(this.f);if(element){element.style.height=height+"px"}};gadgets.IfrGadgetService.prototype.requestNavigateTo=function(view,opt_params){var id=this.getGadgetIdFromModuleId(this.f);var url=this.getUrlForView(view);if(opt_params){var paramStr=JSON.stringify(opt_params);if(paramStr.length>0){url+="&appParams="+encodeURIComponent(paramStr)}}if(url&&document.location.href.indexOf(url)==-1){document.location.href=url}};gadgets.IfrGadgetService.prototype.getUrlForView=function(view){if(view==="canvas"){return"/canvas"}else{if(view==="profile"){return"/profile"}else{return null}}};gadgets.IfrGadgetService.prototype.getGadgetIdFromModuleId=function(moduleId){return parseInt(moduleId.match(/_([0-9]+)$/)[1],10)};gadgets.LayoutManager=function(){};gadgets.LayoutManager.prototype.getGadgetChrome=function(gadget){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.StaticLayoutManager=function(){gadgets.LayoutManager.call(this)};gadgets.StaticLayoutManager.inherits(gadgets.LayoutManager);gadgets.StaticLayoutManager.prototype.setGadgetChromeIds=function(gadgetChromeIds){this.gadgetChromeIds_=gadgetChromeIds};gadgets.StaticLayoutManager.prototype.getGadgetChrome=function(gadget){var chromeId=this.gadgetChromeIds_[gadget.id];return chromeId?document.getElementById(chromeId):null};gadgets.FloatLeftLayoutManager=function(layoutRootId){gadgets.LayoutManager.call(this);this.layoutRootId_=layoutRootId};gadgets.FloatLeftLayoutManager.inherits(gadgets.LayoutManager);gadgets.FloatLeftLayoutManager.prototype.getGadgetChrome=function(gadget){var layoutRoot=document.getElementById(this.layoutRootId_);if(layoutRoot){var chrome=document.createElement("div");chrome.className="gadgets-gadget-chrome";chrome.style.cssFloat="left";layoutRoot.appendChild(chrome);return chrome}else{return null}};;
;
/* module-key = 'com.atlassian.gadgets.embedded:gadget-container-resources', location = 'js/gadgets-container.js' */
gadgets.Container=function(){this.parentUrl_="http://"+document.location.host;this.country_="ALL";this.language_="ALL";this.view_="default";this.nocache_=1;this.maxheight_=2147483647};gadgets.Container.inherits(gadgets.Extensible);gadgets.Container.prototype.userPrefStore=new gadgets.DefaultUserPrefStore();gadgets.Container.prototype.gadgetService=new gadgets.GadgetService();gadgets.Container.prototype.layoutManager=new gadgets.StaticLayoutManager();gadgets.Container.prototype.setParentUrl=function(url){this.parentUrl_=url};gadgets.Container.prototype.setCountry=function(country){this.country_=country};gadgets.Container.prototype.setNoCache=function(nocache){this.nocache_=nocache};gadgets.Container.prototype.setLanguage=function(language){this.language_=language};gadgets.Container.prototype.setView=function(view){this.view_=view};gadgets.Container.prototype.setMaxHeight=function(maxheight){this.maxheight_=maxheight};gadgets.Container.prototype.getGadgetKey_=function(instanceId){return"gadget_"+instanceId};gadgets.IfrContainer=function(){gadgets.Container.call(this)};gadgets.IfrContainer.inherits(gadgets.Container);gadgets.IfrContainer.prototype.gadgetService=new gadgets.IfrGadgetService();gadgets.IfrContainer.prototype.setParentUrl=function(url){if(!url.match(/^http[s]?:\/\//)){url=document.location.href.match(/^[^?#]+\//)[0]+url}this.parentUrl_=url};gadgets.container=new gadgets.IfrContainer();;
;
/* module-key = 'com.atlassian.gadgets.embedded:gadget-standalone-resources', location = 'js/gadgets-standalone.js' */
new gadgets.IfrGadgetService();gadgets.IfrGadgetService.prototype.setTitle=function(title){};;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:feedback-issue-collector', location = '/static/page/sidebar/ancillary/feedback/issue-collector.js' */
require(["jira/api/projects/sidebar","jira/util/formatter","jira/loading/loading","jira/ajs/ajax/smart-ajax","jira/message","wrm/data","underscore","jquery"],function(h,k,j,a,d,i,m,g){var e=false;var c=f;function f(){if(e){return}l();window.ATL_JQ_PAGE_PROPS={triggerFunction:function(n){c=n;m.defer(function(){b(true);n()})}};g.ajax({url:"https://jira.atlassian.com/s/d41d8cd98f00b204e9800998ecf8427e/en_UK-3tj2he/6322/131/1.4.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?collectorId=55320d27",type:"get",cache:true,timeout:10000,dataType:"script"}).fail(function(n){b();d.showErrorMsg(a.buildSimpleErrorContent(n),{closeable:true})})}function l(){e=true;AJS.dim();j.showLoadingIndicator()}function b(n){e=false;if(n){AJS.dim.$dim.css("transition","none")}AJS.undim();if(n&&AJS.dim.$dim){AJS.dim.$dim.css("transition","")}j.hideLoadingIndicator()}g(function(){h.getSidebar().done(function(s){function q(x){var w=g(x);w.tipsy(p).tipsy("show");var y=w.data("tipsy")&&w.data("tipsy").$tip;y.css({opacity:""}).addClass("tooltip-shown")}function t(y,x){var w=g(y);var z=w.data("tipsy")&&w.data("tipsy").$tip;if(z){z.on("transitionend",function(){w.tipsy("hide")});z.removeClass("tooltip-shown");if(x){z.remove();w.removeData("tipsy")}}}var v=i.claim("com.atlassian.jira.jira-projects-plugin:feedback-issue-collector.data");if(v&&v.isFeedbackButtonEnabled){var o=s.getAUISidebar();var r=s.getGroup("jira-projects-ancillary-group");if(r===undefined){return}var n=r.getItem("com.atlassian.jira.jira-projects-plugin:sidebar-feedback-link")||r.getItem("com.pyxis.greenhopper.jira:sidebar-feedback-link");var u=n.ui.link;u.data("custom-tooltip","We\'d love to hear your thoughts on JIRA.");var p={trigger:"manual",gravity:"w",className:"aui-sidebar-section-tooltip",title:function(){return g(this).data("custom-tooltip")}};o.on("expand-end collapse-end",function(){t(u,true)});u.on("mouseenter focus",function(w){q(w.currentTarget)});u.on("click blur mouseleave",function(w){t(w.currentTarget)});n.on("before:select",function(w){w.preventDefault()})}})});g(document).on("click",".jira-projects-feedback-collector",function(n){n.preventDefault();c()})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:project-page', location = '/sidebar/navigation/items.js' */
require(["jquery"],function(a){a(document).on("click",'.aui-nav > [aria-expanded] > a.aui-nav-item[href="#"]',function(b){b.preventDefault();AJS.navigation(a(this).siblings(".aui-nav")).toggle()})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/templates.soy' */
// This file was automatically generated from templates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Projects.Sidebar.ProjectShortcuts.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Projects == 'undefined') { JIRA.Projects = {}; }
if (typeof JIRA.Projects.Sidebar == 'undefined') { JIRA.Projects.Sidebar = {}; }
if (typeof JIRA.Projects.Sidebar.ProjectShortcuts == 'undefined') { JIRA.Projects.Sidebar.ProjectShortcuts = {}; }
if (typeof JIRA.Projects.Sidebar.ProjectShortcuts.Templates == 'undefined') { JIRA.Projects.Sidebar.ProjectShortcuts.Templates = {}; }


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.content = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.canManage || opt_data.numberOfShortcuts > 0) {
    output += '<div class="aui-sidebar-group jira-sidebar-group-with-divider project-shortcuts-group' + ((opt_data.numberOfShortcuts == 0) ? ' project-shortcuts-group_empty' : '') + '" data-id="project-shortcuts-group"><div class="aui-nav-heading">' + soy.$$escapeHtml("Project shortcuts") + '</div>' + ((opt_data.canManage) ? '<p class="project-shortcuts-group__description' + ((opt_data.numberOfShortcuts > 0) ? ' hidden' : '') + '">' + soy.$$escapeHtml("Add a link to useful information for your whole team to see.") + '</p>' : '') + '<ul class="aui-nav project-shortcuts-list">';
    if (opt_data.shortcuts) {
      var shortcutList24 = opt_data.shortcuts;
      var shortcutListLen24 = shortcutList24.length;
      for (var shortcutIndex24 = 0; shortcutIndex24 < shortcutListLen24; shortcutIndex24++) {
        var shortcutData24 = shortcutList24[shortcutIndex24];
        output += JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcut({id: shortcutData24.id, name: shortcutData24.name, url: shortcutData24.url, icon: shortcutData24.icon, canManage: opt_data.canManage, iconsMap: opt_data.iconsMap, isWithIcon: opt_data.isWithIcons});
      }
    }
    output += ((opt_data.canManage) ? '<li><a class="aui-nav-item project-shortcuts-group__add" href="#" data-link-id="project-shortcut-add"><span class="aui-icon aui-icon-large aui-iconfont-add-small"></span><span class="aui-nav-item-label">' + soy.$$escapeHtml("Add link") + '</span></a></li>' : '') + '</ul></div>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.content.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.content';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcut = function(opt_data, opt_ignored) {
  return '<li class="project-shortcut"><a class="aui-nav-item project-shortcuts-group__link" href="' + soy.$$escapeHtml(opt_data.url) + '" title="' + soy.$$escapeHtml(opt_data.name) + '" target="_blank" data-shortcut-id="' + soy.$$escapeHtml(opt_data.id) + '" data-link-id="project-shortcut-' + soy.$$escapeHtml(opt_data.id) + '">' + ((opt_data.isWithIcon) ? '<span class="aui-icon aui-icon-large ' + JIRA.Projects.Sidebar.ProjectShortcuts.Templates.icon({iconId: opt_data.icon, iconsMap: opt_data.iconsMap}) + '" data-project-shortcuts-icon-id="' + soy.$$escapeHtml(opt_data.icon) + '">' + soy.$$escapeHtml("Project shortcut icon") + '</span>' : '') + '<span class="aui-nav-item-label">' + soy.$$escapeHtml(opt_data.name) + '</span></a>' + ((opt_data.canManage) ? '<a href="#project-shortcuts-dropdown_' + soy.$$escapeHtml(opt_data.id) + '" aria-controls="project-shortcuts-dropdown_' + soy.$$escapeHtml(opt_data.id) + '" aria-haspopup="true" class="aui-dropdown2-trigger project-shortcuts-group__actions"><span>' + soy.$$escapeHtml("Actions") + '</span></a><div id="project-shortcuts-dropdown_' + soy.$$escapeHtml(opt_data.id) + '" class="aui-dropdown2 aui-style-default project-shortcuts-group__dropdown"><ul class="aui-list-truncate"><li><a class="project-shortcuts-group__actions__edit" href="#">' + soy.$$escapeHtml("Edit") + '</a></li><li><a class="project-shortcuts-group__actions__delete  " href="#">' + soy.$$escapeHtml("Delete") + '</a></li></ul></div>' : '') + '</li>';
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcut.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcut';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.icon = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '';
  if (opt_data.iconsMap) {
    var id__soy83 = opt_data.iconId && opt_data.iconsMap[opt_data.iconId] ? opt_data.iconId : '1';
    output += (opt_data.iconsMap[id__soy83]) ? soy.$$escapeHtml(opt_data.iconsMap[id__soy83].className) : '';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.icon.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.icon';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcutFormFields = function(opt_data, opt_ignored) {
  return '<div class="project-shortcuts-field-group">' + aui.form.textField({name: 'project-shortcuts-url-' + opt_data.action, id: 'project-shortcuts-url-' + opt_data.action, labelContent: "Web address", placeholderText: "e.g. http://www.atlassian.com", extraClasses: 'project-shortcuts-url', value: opt_data.url ? opt_data.url : '', errorTexts: opt_data.errors.urlError ? [opt_data.errors.urlError] : []}) + '<div class="field-group project-shortcuts-name">' + aui.form.label({forField: 'project-shortcuts-name-' + opt_data.action, content: "Label"}) + '<div class="project-shortcuts-name-icon-block"><div class="project-shortcuts-icon-picker-block"></div>' + aui.form.input({name: 'project-shortcuts-name-' + opt_data.action, id: 'project-shortcuts-name-' + opt_data.action, placeholderText: "e.g. Atlassian website", extraClasses: 'project-shortcuts-name-input' + (opt_data.isWithIcon ? ' project-shortcuts-name-input-with-icon' : ''), value: opt_data.name ? opt_data.name : '', type: 'text'}) + '</div>' + ((opt_data.errors.iconError) ? aui.form.fieldError({message: opt_data.errors.iconError}) : '') + ((opt_data.errors.nameError) ? aui.form.fieldError({message: opt_data.errors.nameError}) : '') + '</div></div>';
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcutFormFields.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcutFormFields';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsPicker = function(opt_data, opt_ignored) {
  return '<span>' + JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsList(opt_data) + '</span>' + aui.dropdown2.trigger({menu: {id: 'project-shortcuts-icons-list-' + opt_data.cid}, extraClasses: 'aui-button project-shortcuts-icons-picker', iconClasses: 'aui-icon aui-icon-large  ' + soy.$$escapeHtml(opt_data.icon.className), extraAttributes: {href: '#'}});
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsPicker.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsPicker';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsList = function(opt_data, opt_ignored) {
  var output = '<div id="project-shortcuts-icons-list-' + soy.$$escapeHtml(opt_data.cid) + '" aria-hidden="true" class="aui-style-default aui-dropdown2 project-shortcuts-icons-list aui-dropdown2-section"><ul>';
  var iconList136 = opt_data.iconsList;
  var iconListLen136 = iconList136.length;
  for (var iconIndex136 = 0; iconIndex136 < iconListLen136; iconIndex136++) {
    var iconData136 = iconList136[iconIndex136];
    output += '<li><a class="project-shortcuts-icons-icon" data-project-shortcuts-icons-id="' + soy.$$escapeHtml(iconData136.name) + '"><span class="aui-icon aui-icon-large ' + soy.$$escapeHtml(iconData136.className) + '">' + soy.$$escapeHtml("Project shortcut icon") + '</span></a></li>';
  }
  output += '</ul></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsList.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsList';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.addDialog = function(opt_data, opt_ignored) {
  return '<form action="" method="post" class="aui"><h3>' + soy.$$escapeHtml("Add link") + '</h3><fieldset>' + JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcutFormFields(soy.$$augmentMap(opt_data, {action: 'add'})) + '<div class="buttons-container"><div class="buttons"><button class="aui-button project-shortcuts-submit">' + soy.$$escapeHtml("Add") + '</button><button class="aui-button aui-button-link project-shortcuts-cancel">' + soy.$$escapeHtml("Cancel") + '</button></div></div></fieldset></form>';
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.addDialog.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.addDialog';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.editDialogChrome = function(opt_data, opt_ignored) {
  return '<section role="dialog" id="edit-project-shortcut-dialog" class="aui-layer aui-dialog2 aui-dialog2-small" aria-hidden="true" data-aui-remove-on-hide="true"><header class="aui-dialog2-header"><h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml("Edit link") + '</h2></header></section>';
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.editDialogChrome.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.editDialogChrome';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.editDialog = function(opt_data, opt_ignored) {
  return '<div class="aui-dialog2-content"><form class="aui" method="post">' + JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcutFormFields(soy.$$augmentMap(opt_data, {action: 'edit'})) + '<button type="submit" class="project-shortcuts-hidden-submit"></button></form></div><footer class="aui-dialog2-footer"><div class="aui-dialog2-footer-actions"><button class="aui-button aui-button-primary project-shortcuts-submit">' + soy.$$escapeHtml("Save") + '</button><button class="aui-button aui-button-link project-shortcuts-cancel">' + soy.$$escapeHtml("Cancel") + '</button></div></footer>';
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.editDialog.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.editDialog';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.deleteDialog = function(opt_data, opt_ignored) {
  return '<section role="dialog" id="delete-project-shortcut-dialog" class="aui-layer aui-dialog2 aui-dialog2-small" aria-hidden="true" data-aui-remove-on-hide="true"><header class="aui-dialog2-header"><h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml("Delete shortcut") + '</h2></header><div class="aui-dialog2-content"><p>' + soy.$$escapeHtml("Are you sure you want to delete this shortcut?") + '</p></div><footer class="aui-dialog2-footer"><div class="aui-dialog2-footer-actions"><button class="aui-button aui-button-primary project-shortcuts-submit">' + soy.$$escapeHtml("Delete") + '</button><button class="aui-button aui-button-link project-shortcuts-cancel">' + soy.$$escapeHtml("Cancel") + '</button></div></footer></section>';
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.deleteDialog.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.deleteDialog';
}
;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/templates.js' */
define("jira/projects/sidebar/project-shortcuts/templates",function(){return JIRA.Projects.Sidebar.ProjectShortcuts.Templates});AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Templates",null,require("jira/projects/sidebar/project-shortcuts/templates"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/project-shortcuts-analytics.js' */
define("jira/projects/sidebar/project-shortcuts/analytics",["jira/ajs/dark-features","jira/analytics","jquery"],function(b,a,d){var e="a.project-shortcuts-group__link";var c=b.isEnabled("com.atlassian.jira.projects.ProjectCentricNavigation.ProjectShortcutIcons");return{initialize:function(f){this.projectId=f},initShortcutClick:function(j,h){var i=h.getAUISidebar();var g=d(j);var f=this;g.on("click",e,function(m){var l=g.find(e);var k=d(this);a.send({name:"jira.projects.shortcut.clicked",data:{shortcutId:k.data("shortcutId"),shortcutPosition:k.closest("li").index()+1,shortcutIconName:c?k.find(".aui-icon").data("projectShortcutsIconId"):"",shortcutCount:l.size(),isWithIcons:c,isSidebarCollapsed:i.isCollapsed(),projectId:f.projectId}})})},initDialogActions:function(g){var f=this;g.on("childview:edit:open",function(h,j){var i=j.collection.indexOf(j)+1;a.send({name:"jira.projects.shortcut.edit.dialog.opened",data:{isWithIcons:c,shortcutId:j.get("id"),shortcutPosition:i,shortcutCount:j.collection.size(),projectId:f.projectId}})});g.on("childview:edit:close",function(h,j,k){var i=j.collection.indexOf(j)+1;a.send({name:"jira.projects.shortcut.edit.dialog.closed",data:{isWithIcons:c,isSave:k,shortcutId:j.get("id"),shortcutPosition:i,shortcutCount:j.collection.size(),projectId:f.projectId}})});g.on("add:open",function(){a.send({name:"jira.projects.shortcut.add.dialog.opened",data:{isWithIcons:c,projectId:f.projectId}})});g.on("add:close",function(h){a.send({name:"jira.projects.shortcut.add.dialog.closed",data:{isWithIcons:c,isSave:h,projectId:f.projectId}})})},iconChanged:function(f,h,g){a.send({name:"jira.projects.shortcut.icon.changed",data:{iconName:h,oldIconName:g,shortcutId:f.isNew()?"":f.get("id"),isNew:f.isNew(),cid:f.cid,projectId:this.projectId}})},iconChangeConfirmed:function(f,g){a.send({name:"jira.projects.shortcut.icon.confirmed",data:{oldIconName:f.get("icon"),iconName:g,shortcutId:f.isNew()?"":f.get("id"),isNew:f.isNew(),cid:f.cid,projectId:this.projectId}})},iconPickerOpened:function(f){a.send({name:"jira.projects.shortcut.icon.picker.opened",data:{shortcutId:f.isNew()?"":f.get("id"),isNew:f.isNew(),cid:f.cid,projectId:this.projectId}})},iconPickerClosed:function(f,g){a.send({name:"jira.projects.shortcut.icon.picker.closed",data:{shortcutId:f.isNew()?"":f.get("id"),isNew:f.isNew(),cid:f.cid,isSave:g,projectId:this.projectId}})}}});AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Analytics",null,require("jira/projects/sidebar/project-shortcuts/analytics"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/services/AvailableIcons.js' */
define("jira/projects/sidebar/project-shortcuts/services/available-icons",["underscore"],function(c){var d=[];var a={};var b=false;return{initialize:function(e){d=e||d;a={};c.each(e,function(f){a[f.name]=f})},getIconsList:function(){return d},getIconsMap:function(){return a},getAllIconsClasses:function(){return c.reduce(d,function(e,f){return e+f.className+" "},"")},getIconFromName:function(e){if(this.getIconsMap()[e]){return this.getIconsMap()[e]}if(this.getIconsList()[0]){return this.getIconsList()[0]}return{}},setWithIcons:function(e){b=e},isWithIcons:function(){return b}}});AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Services.AvailableIcons",null,require("jira/projects/sidebar/project-shortcuts/services/available-icons"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/entities/Shortcut.js' */
define("jira/projects/sidebar/project-shortcuts/entities/shortcut",["jira/util/formatter","jira/util/logger","backbone","wrm/context-path"],function(e,d,g,b){function c(h){var i;try{i=JSON.parse(h.responseText)}catch(j){i={message:"We couldn\'t complete the action as there seems to be a communication issue."}}return i}return g.Model.extend({defaults:{url:"",name:"",icon:""},initialize:function(i,h){if(!h||!h.projectKey){throw"Project key is required"}this.projectKey=h.projectKey},urlRoot:function f(){return b()+"/rest/projects/1.0/project/"+encodeURIComponent(this.projectKey)+"/shortcut"},clear:function a(){this.unset("id");this.set("url",this.defaults.url);this.set("name",this.defaults.name);this.set("icon",this.defaults.icon)},save:function(){if(this.saving==true){return}this.saving=true;var i=this;i.trigger("save:start");var l=this.isNew()?"create":"update";this.sync(l,i).always(function h(){i.saving=false;i.trigger("save:finish")}).done(function j(m){i.set(m,{silent:true});d.trace("jira.projects.shortcuts."+l+".success");i.trigger("save:success")}).fail(function k(m){var n=c(m);d.trace("jira.projects.shortcuts."+l+".fail");i.trigger("save:failure",n)})},destroy:function(){if(this.saving==true){return}this.saving=true;var i=this;i.trigger("remove:start");var h=g.Model.prototype.destroy.apply(this,arguments);h.always(function(){i.saving=false;i.trigger("remove:finish")}).done(function j(){i.trigger("remove:success")}).fail(function k(l){var m=c(l);i.trigger("remove:failure",m)});return h}})});AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcut",null,require("jira/projects/sidebar/project-shortcuts/entities/shortcut"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/entities/ShortcutErrors.js' */
define("jira/projects/sidebar/project-shortcuts/entities/shortcut-errors",["backbone"],function(b){return b.Model.extend({defaults:{urlError:"",nameError:"",iconError:"",generalError:""},initialize:function a(f,e){var d=e.model;this.listenTo(d,"save:failure remove:failure",function c(g){this.set({urlError:g.errors&&g.errors.url,nameError:g.errors&&g.errors.name,iconError:g.errors&&g.errors.icon,generalError:(g.message||(g.errorMessages&&g.errorMessages.length>0))?g.message||g.errorMessages[0]:undefined})});this.listenTo(d,"save:success remove:success",this.clear)}})});AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Entities.ShortcutErrors",null,require("jira/projects/sidebar/project-shortcuts/entities/shortcut-errors"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/entities/Shortcuts.js' */
define("jira/projects/sidebar/project-shortcuts/entities/shortcuts",["jira/projects/sidebar/project-shortcuts/entities/shortcut","backbone"],function(b,a){return a.Collection.extend({model:b,initialize:function(d,c){this.projectKey=c.projectKey}})});AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcuts",null,require("jira/projects/sidebar/project-shortcuts/entities/shortcuts"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/views/IconPickerContent.js' */
define("jira/projects/sidebar/project-shortcuts/views/icon-picker-content",["jira/projects/sidebar/project-shortcuts/templates","jira/projects/sidebar/project-shortcuts/analytics","jira/projects/sidebar/project-shortcuts/services/available-icons","jira/projects/libs/marionette","jquery"],function(n,l,c,e,m){var i="projectShortcutsIconsId";var a="active aui-dropdown2-active";function o(p,t){var s=5;var v=p.ui.iconList.find(".active");var u=p.ui.iconList.find("li").size();var r;switch(t.keyCode){case AJS.keyCode.LEFT:r=-1;break;case AJS.keyCode.RIGHT:r=1;break;case AJS.keyCode.DOWN:r=s;break;case AJS.keyCode.UP:r=-s;break;default:r=0}var q=v.closest("li").index()+r;if(q<0||q>=u){q+=u;q%=u}v.removeClass(a);p.ui.icon.eq(q).addClass(a)}return e.ItemView.extend({template:n.iconsPicker,ui:{icon:".project-shortcuts-icons-icon",iconList:".project-shortcuts-icons-list",iconPicker:".project-shortcuts-icons-picker"},modelEvents:{"change:icon":function k(){var q=this._modelIcon();var p=this.ui.iconPicker.children();p.removeClass(this.iconFactory.getAllIconsClasses());p.addClass(q.className);this.ui.iconPicker.data(i,q.name)},"save:start":function j(){this.ui.iconPicker.attr("aria-disabled",true)},"save:finish":function h(){this.ui.iconPicker.attr("aria-disabled",false)}},events:{"keydown @ui.iconPicker":function f(p){if(!this.isPickerActive()){return}switch(p.keyCode){case AJS.keyCode.LEFT:case AJS.keyCode.RIGHT:case AJS.keyCode.DOWN:case AJS.keyCode.UP:o(this,p);p.stopPropagation();p.preventDefault();this.ui.iconList.trigger("aui-dropdown2-item-selected");break;case AJS.keyCode.ESCAPE:this.hideIconPicker();p.stopPropagation();p.preventDefault();break}}},initialize:function(p){this.iconFactory=c;this.analytics=l},onRender:function(){var p=this;this.ui.icon.on("click",function q(){var r=m(this).data(i);p.analytics.iconChangeConfirmed(p.model,r);p.analyticsOldIconId="";p.analyticsIconClicked=true;p.model.set("icon",r);p.ui.iconPicker.focus()});this.ui.iconList.on("aui-dropdown2-show",function(){p.ui.iconPicker.focus();p.analyticsIconClicked=false;p.analytics.iconPickerOpened(p.model)});this.ui.iconList.on("aui-dropdown2-hide",function(){p.analytics.iconPickerClosed(p.model,p.analyticsIconClicked)});this.analyticsOldIconId="";this.ui.iconList.on("aui-dropdown2-item-selected",function(r){var s=m(this).find(".active").data(i);if(p.analyticsOldIconId&&p.analyticsOldIconId!==s){p.analytics.iconChanged(p.model,s,p.analyticsOldIconId)}p.analyticsOldIconId=s});this.ui.iconPicker.data(i,this.model.get("icon"))},hideIconPicker:function(){if(this.isPickerActive()){this.ui.iconPicker.trigger("aui-button-invoke")}},isPickerActive:function(){return this.ui.iconPicker.hasClass("active")},_modelIcon:function b(){return this.iconFactory.getIconFromName(this.model.get("icon"))},onFormSubmit:function g(){this.model.set("icon",this.ui.iconPicker.data(i)||"")},focus:function d(){this.ui.iconPicker.focus()},serializeData:function(){return{iconsList:this.iconFactory.getIconsList(),icon:this._modelIcon(),cid:this.cid}}})});AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Views.IconPickerContent",null,require("jira/projects/sidebar/project-shortcuts/views/icon-picker-content"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/views/DialogContent.js' */
define("jira/projects/sidebar/project-shortcuts/views/dialog-content",["jira/util/formatter","jira/flag","jira/projects/sidebar/project-shortcuts/views/icon-picker-content","jira/projects/sidebar/project-shortcuts/services/available-icons","jira/projects/libs/marionette","underscore"],function(q,r,n,s,l,v){function u(x){x.preventDefault();this.ensureProtocolPrefix();this.tryToAutomagicallyDeriveNameFromUrl();if(this.iconPickerContent){this.iconPickerContent.onFormSubmit()}this.model.set("url",this.ui.url.val());this.model.set("name",this.ui.name.val());this.model.save()}var g=l.LayoutView.extend({ui:{form:"form",inputs:"input, button",submit:".project-shortcuts-submit",cancel:".project-shortcuts-cancel",url:".project-shortcuts-url input",name:".project-shortcuts-name input"},regions:{iconPicker:".project-shortcuts-icon-picker-block"},events:{"click @ui.cancel":function f(x){x.preventDefault();this.model.clear();this.setNameAutomagically=true;this.errorModel.clear();this.trigger("cancel")},"click @ui.submit":u,"submit @ui.form":u,"blur @ui.url":function c(){this.ensureProtocolPrefix();this.tryToAutomagicallyDeriveNameFromUrl()},"input @ui.url":function e(){this.model.set("url",this.ui.url.val());this.tryToAutomagicallyDeriveNameFromUrl()},"input @ui.name":function w(){this.setNameAutomagically=false;this.model.set("name",this.ui.name.val())},"keydown @ui.name":function j(x){if(!this.iconPickerContent){return}if(x.shiftKey&&x.keyCode===AJS.keyCode.TAB){x.preventDefault();this.iconPickerContent.focus()}},"keydown @ui.url":function j(x){if(!this.iconPickerContent){return}if(!x.shiftKey&&x.keyCode===AJS.keyCode.TAB){x.preventDefault();this.iconPickerContent.focus()}}},modelEvents:{"save:start":function a(){this.ui.inputs.prop("disabled",true);this.ui.submit.addClass("loading");this.ui.submit.spin({className:"spinner"})},"save:finish":function o(){this.ui.inputs.prop("disabled",false);this.ui.submit.removeClass("loading");this.ui.submit.spinStop({className:"spinner"})},"save:failure":function d(){this.render();if(this.errorModel.get("generalError")){r({type:"error",title:"We couldn\'t save the link for you",close:"auto",body:this.errorModel.get("generalError")})}if(this.errorModel.get("nameError")){this.ui.name.focus()}if(this.errorModel.get("urlError")){this.ui.url.focus()}return this},"save:success":function k(){this.setNameAutomagically=true}},initialize:function b(y){this.errorModel=y.errorModel;var x=this.model.get("name");this.setNameAutomagically=(x.length==0);this.iconFactory=s},serializeData:function m(){return v.extend(this.model.toJSON(),{errors:this.errorModel.toJSON(),action:this.action,isWithIcon:this.iconFactory.isWithIcons()})},onRender:function(){if(this.iconFactory.isWithIcons()){this.iconPickerContent=new n({model:this.model,action:this.action,observable:this});this.getRegion("iconPicker").show(this.iconPickerContent)}else{delete this.iconPickerContent}},hideIconPicker:function(){if(!this.iconPickerContent){return}this.iconPickerContent.hideIconPicker()},setName:function i(x){this.ui.name.val(x);this.model.set("name",x)},setUrl:function h(x){this.ui.url.val(x);this.model.set("url",x)},ensureProtocolPrefix:function p(){var x=this.ui.url.val().trim();if(x.length>0&&!g.urlPattern.test(x)){this.setUrl("http://"+x)}},tryToAutomagicallyDeriveNameFromUrl:function t(){var y=this.ui.url.val().trim();if(this.setNameAutomagically){if(g.urlOptionalProtocolPattern.test(y)){var x=g.urlOptionalProtocolPattern.exec(y);this.setName(x[3])}else{this.setName(y)}}}},{urlPattern:/^[a-zA-Z0-9]+:(\/\/)?([^\/]*).*/,urlOptionalProtocolPattern:/^([a-zA-Z0-9]+:(\/\/)?)?([^\/]*).*/});return g});AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Views.DialogContent",null,require("jira/projects/sidebar/project-shortcuts/views/dialog-content"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/views/AddDialogContent.js' */
define("jira/projects/sidebar/project-shortcuts/views/add-dialog-content",["jira/projects/sidebar/project-shortcuts/templates","jira/projects/sidebar/project-shortcuts/views/dialog-content"],function(b,a){return a.extend({template:b.addDialog})});AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Views.AddDialogContent",null,require("jira/projects/sidebar/project-shortcuts/views/add-dialog-content"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/views/EditDialogContent.js' */
define("jira/projects/sidebar/project-shortcuts/views/edit-dialog-content",["jira/projects/sidebar/project-shortcuts/templates","jira/projects/sidebar/project-shortcuts/views/dialog-content"],function(b,a){return a.extend({template:b.editDialog})});AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Views.EditDialogContent",null,require("jira/projects/sidebar/project-shortcuts/views/edit-dialog-content"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/dialogs/Delete.js' */
define("jira/projects/sidebar/project-shortcuts/dialogs/delete",["jira/projects/sidebar/project-shortcuts/templates","jira/util/formatter","jira/util/logger","jira/flag","jira/projects/libs/marionette","underscore"],function(m,h,j,d,c,i){return c.ItemView.extend({template:m.deleteDialog,ui:{inputs:"input, button",submit:".project-shortcuts-submit",cancel:".project-shortcuts-cancel"},events:{"click @ui.cancel":function k(n){n.preventDefault();this.dialog.hide()},"click @ui.submit":function a(n){n.preventDefault();this.model.destroy({wait:true})}},modelEvents:{"remove:start":function e(){this.ui.inputs.prop("disabled",true);this.ui.submit.addClass("loading");this.ui.submit.spin({className:"spinner"})},"remove:finish":function g(){this.ui.inputs.prop("disabled",false);this.ui.submit.removeClass("loading");this.ui.submit.spinStop({className:"spinner"});this.dialog.hide();j.trace("jira.projects.shortcuts.deleted")},"remove:failure":function f(n){if(n.message||(n.errorMessages&&n.errorMessages.length>0)){d({type:"error",title:"We couldn\'t delete the link for you",close:"auto",body:n.message||n.errorMessages[0]})}}},initialize:function b(){this.render();this.$el.appendTo("body");this.dialog=AJS.dialog2(this.$el);this.dialog.show();var n=this;this.dialog.on("hide",function(){i.defer(function(){n.destroy()})})},onRender:function l(){this.unwrapTemplate()}})});AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Delete",null,require("jira/projects/sidebar/project-shortcuts/dialogs/delete"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/dialogs/Edit.js' */
define("jira/projects/sidebar/project-shortcuts/dialogs/edit",["jira/projects/sidebar/project-shortcuts/templates","jira/projects/sidebar/project-shortcuts/views/edit-dialog-content","jira/projects/sidebar/project-shortcuts/entities/shortcut","jira/projects/sidebar/project-shortcuts/entities/shortcut-errors","jira/projects/libs/marionette","underscore","jquery"],function(d,f,h,a,g,b,e){return g.Controller.extend({initialize:function(l){var j=this;b.bindAll(this,"hide");this.model=new h(l.model.toJSON(),{projectKey:l.model.projectKey||l.model.collection.projectKey});this.errorModel=new a(undefined,{model:this.model});this.view=new f({model:this.model,errorModel:this.errorModel});this.analyticsSave=false;this.view.render();var i=e(d.editDialogChrome({}));this.view.$el.appendTo(i);this.dialog=AJS.dialog2(i);this.dialog.show();this.view.ui.url.focus();this._onResizeWindow=function(){j.hideIconPicker()};e(window).on("resize",this._onResizeWindow);this.listenTo(this.view,"cancel",this.hide);this.listenTo(this.model,"save:success",function m(){this.analyticsSave=true;this.hide();l.model.set(j.model.toJSON())});this.dialog.on("hide",function k(){j.trigger("dialog:close",j.analyticsSave)})},hideIconPicker:function(){this.view.hideIconPicker()},hide:function c(){this.dialog.hide();e(window).off("resize",this._onResizeWindow)}})});AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Edit",null,require("jira/projects/sidebar/project-shortcuts/dialogs/edit"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/dialogs/Add.js' */
define("jira/projects/sidebar/project-shortcuts/dialogs/add",["aui/inline-dialog","jira/projects/sidebar/project-shortcuts/views/add-dialog-content","jira/projects/sidebar/project-shortcuts/entities/shortcut","jira/projects/sidebar/project-shortcuts/entities/shortcut-errors","jira/projects/libs/marionette","underscore","jquery"],function(d,c,j,h,g,i,k){return g.Controller.extend({initialize:function(u){i.bindAll(this,"hide","refresh","focusForm");var t=this;this.analyticsSave=false;this.sidebarItem=u.sidebarItem;this.projectKey=u.projectKey;this.collection=u.collection;this.model=new j(null,{projectKey:this.projectKey});this.errorModel=new h(null,{model:this.model});this.view=new c({model:this.model,errorModel:this.errorModel});this.view.render();var m=k(window);var o=k(document);var s=k(".aui-sidebar-body");this.dialog=new d(this.sidebarItem.ui.link,"project-shortcuts-group__add-dialog",function(x,w,z){t.sidebarItem.$el.addClass("aui-nav-selected");t.view.render();t.view.$el.appendTo(x);t.view.ui.url.focus();m.on("scroll.project-shortcuts",function y(){t.refresh()});s.on("scroll.project-shortcuts",function v(){t.hide()});o.on("showLayer",t.focusForm);m.on("resize",t.refresh);z();return false},{gravity:"w",autoWidth:true,initCallback:function l(){t.trigger("dialog:open");t.analyticsSave=false},hideCallback:function n(){t.sidebarItem.$el.removeClass("aui-nav-selected");t.sidebarItem.ui.link.blur();m.off("scroll.project-shortcuts");s.off("scroll.project-shortcuts");o.off("showLayer",t.focusForm);t.trigger("dialog:close",t.analyticsSave)},persistent:true,closeOnTriggerClick:true,offsetY:function p(v,y){var x=y.target.height();var w=v.height()/2;return w-x-10},arrowOffsetY:function q(v,y){var x=y.target.height()/2;var w=v.height()/2;return -w+22+x}});this.listenTo(this.view,"render",this.refresh);this.listenTo(this.view,"cancel",this.hideAndRender);this.listenTo(this.model,"save:success",function r(){var v=new j(this.model.toJSON(),{projectKey:this.projectKey});this.model.clear();this.collection.add(v);this.analyticsSave=true;this.hide()});this.listenTo(this.sidebarItem,"before:select",function(v){v.preventDefault()});AJS.sidebar(".aui-sidebar").on("collapse-start",this.hide);k(".project-shortcuts-group").on("click","li",this.hide)},hide:function e(){this.view.hideIconPicker();this.dialog.hide()},refresh:function f(){this.view.hideIconPicker();this.dialog.refresh()},hideAndRender:function b(){this.hide()},focusForm:function a(){this.view.ui.url.focus()}})});AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Add",null,require("jira/projects/sidebar/project-shortcuts/dialogs/add"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/views/Shortcut.js' */
define("jira/projects/sidebar/project-shortcuts/views/shortcut",["jira/projects/sidebar/project-shortcuts/templates","jira/projects/sidebar/project-shortcuts/services/available-icons","jira/projects/sidebar/project-shortcuts/dialogs/edit","jira/projects/sidebar/project-shortcuts/dialogs/delete","jira/projects/libs/marionette","underscore","jquery"],function(j,e,b,a,f,g,i){return f.ItemView.extend({template:j.shortcut,initialize:function c(){g.bindAll(this,"toggleDropdown");this.iconFactory=e},ui:{del:".project-shortcuts-group__actions__delete",edit:".project-shortcuts-group__actions__edit",trigger:".project-shortcuts-group__actions",dropdown:".project-shortcuts-group__dropdown",link:".project-shortcuts-group__link"},modelEvents:{change:"render"},events:{"click @ui.link":function d(){this.trigger("click:link",this.model)}},onRender:function(){var k=this;this.unwrapTemplate();var o=i(window);var n=i(".aui-sidebar-body");this.ui.edit.on("click",function m(q){q.preventDefault();k.ui.trigger.blur();var p=new b({model:k.model});k.trigger("edit:open",k.model);k.listenToOnce(p,"dialog:close",function r(s){k.trigger("edit:close",k.model,s)})});this.ui.del.on("click",function l(p){p.preventDefault();k.ui.trigger.blur();var q=new a({model:k.model})});this.ui.dropdown.on({"aui-dropdown2-show":function(){k.$el.addClass("aui-nav-selected");n.one("scroll",k.toggleDropdown);o.one("scroll",k.toggleDropdown);k.ui.trigger.focus()},"aui-dropdown2-hide":function(){k.$el.removeClass("aui-nav-selected");n.off("scroll",k.toggleDropdown);o.off("scroll",k.toggleDropdown)}})},serializeData:function(){var k=g.extend(this.model.toJSON(),{canManage:true,isWithIcon:this.iconFactory.isWithIcons()});if(this.iconFactory.isWithIcons()){k=g.extend(k,{iconsMap:e.getIconsMap()})}return k},toggleDropdown:function h(){this.ui.trigger.trigger("aui-button-invoke")}})});AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Views.Shortcut",null,require("jira/projects/sidebar/project-shortcuts/views/shortcut"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/views/ShortcutsList.js' */
define("jira/projects/sidebar/project-shortcuts/views/list",["jira/api/projects/sidebar","jira/projects/sidebar/project-shortcuts/templates","jira/projects/sidebar/project-shortcuts/views/shortcut","jira/projects/sidebar/project-shortcuts/dialogs/add","jira/projects/sidebar/component/navigation-group","jira/projects/libs/marionette","jquery"],function(f,l,g,d,j,i,e){return i.CompositeView.extend({template:l.content,childView:g,ui:{itemsContainer:".aui-nav",description:".project-shortcuts-group__description",add:".project-shortcuts-group__add"},collectionEvents:{"add remove":function b(){if(this.collection.length==0&&this.lastCollectionLength!=0||this.collection.length!=0&&this.lastCollectionLength==0){this.lastCollectionLength=this.collection.length;this.ui.description.toggleClass("hidden",this.collection.length>0);this.$el.toggleClass("project-shortcuts-group_empty",this.collection.length==0)}}},initialize:function c(){var m=this;f.getSidebar().done(function(p){var q=p.getAUISidebar();q.on("expand-end",function o(){e(".aui-sidebar-submenu-dialog .project-shortcuts-group__dropdown").remove()});q.on("collapse-start",function n(){m.$(".project-shortcuts-group__actions.aui-dropdown2-active").trigger("aui-button-invoke")})});this.lastCollectionLength=this.collection.length},attachElContent:function(m){var n=new j({el:m});this.$el=e(n.getElement());f.getSidebar().done(function(o){o.replaceGroup(this.options.targetGroup,n)}.bind(this));return this},onRender:function k(){f.getSidebar().done(function(p){var n=new d({sidebarItem:p.getGroup("project-shortcuts-group").getItem("project-shortcut-add"),projectKey:this.collection.projectKey,collection:this.collection});this.listenTo(n,"dialog:open",function o(){this.trigger("add:open")});this.listenTo(n,"dialog:close",function m(q){this.trigger("add:close",q)})}.bind(this))},serializeData:function h(){return{canManage:true,numberOfShortcuts:this.collection.length}},attachBuffer:function(n,m){this.ui.itemsContainer.prepend(m)},onAddChild:function a(m){this.ui.add.parent().before(m.$el)}})});AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Views.List",null,require("jira/projects/sidebar/project-shortcuts/views/list"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts-init', location = '/sidebar/project-shortcuts/project-shortcuts-init.js' */
require(["jira/projects/sidebar/project-shortcuts/analytics","jira/projects/sidebar/project-shortcuts/views/list","jira/projects/sidebar/project-shortcuts/services/available-icons","jira/projects/sidebar/project-shortcuts/entities/shortcuts","jira/api/projects/sidebar","jira/api/projects","wrm/data"],function(f,a,g,c,e,d,b){e.getSidebar().done(function(l){var i=b.claim("com.atlassian.jira.projects.shortcuts:project-id");f.initialize(i);if(b.claim("com.atlassian.jira.projects.shortcuts:can-manage")){var k=b.claim("com.atlassian.jira.projects.shortcuts:with-icons");if(k){g.initialize(b.claim("com.atlassian.jira.projects.shortcuts:icons-list"))}g.setWithIcons(k);var h=d.getCurrentProjectKey();var j=new c(b.claim("com.atlassian.jira.projects.shortcuts:shortcuts"),{projectKey:h});var m=new a({collection:j,targetGroup:"project-shortcuts-group"});m.render();f.initDialogActions(m)}f.initShortcutClick(".project-shortcuts-list",l)})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:report-page-assets', location = '/page/project/report/analytics.js' */
define("jira/projects/page/report/analytics",["jira/analytics","jquery"],function(a,b){function c(){b(".reports .reports__list__report").on("click",function(f){var d=b(this);a.send({name:"jira.projects.report.clicked",data:{report:d.attr("data-report-key"),category:d.closest("ul").attr("data-category-key"),listPosition:d.closest("li").prevAll().length+1}})})}return c});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:reports-link-storage', location = '/sidebar/reports/reports-link-storage.js' */
define("jira/projects/sidebar/reports/link-storage",["jira/util/logger","jira/data/local-storage","jira/api/projects","jira/api/projects/sidebar"],function(b,a,c,d){function f(j){var h=j.getSelectedScopeFilterId();var g=c.getCurrentProjectKey();var i="last.viewed.report."+g;if(h){i+="."+h}return i}function e(g,h){g.setReportsItemLink(h)}return{storeLastViewedReportLink:function(g){d.getSidebar().done(function(i){if(i.isProjectSidebar()){var h=f(i);a.setItem(h,g);e(i,g)}b.trace("jira.projects.sidebar.reports.link.stored")})},restoreLastViewedReportLink:function(){d.getSidebar().done(function(h){if(h.isProjectSidebar()){var g=f(h);var i=a.getItem(g);if(i){e(h,i)}}b.trace("jira.projects.sidebar.reports.link.restored")})}}});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:reports-link-init', location = '/sidebar/reports/reports-link-init.js' */
require(["jira/projects/sidebar/reports/link-storage"],function(a){a.restoreLastViewedReportLink()});AJS.namespace("JIRA.Projects.Sidebar.Reports",null,require("jira/projects/sidebar/reports/link-storage"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:sidebar', location = 'includes/js/sidebar/create-board.js' */
AJS.$(function(){AJS.$("body").on("click",".js-create-board",function(e){e.preventDefault(),GH.UserData.userConfig={canCreateProject:!1,hasProjectsAccessible:!0,hasFiltersAccessible:!0},GH.StartWizardView.startWizard()})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-init', location = '/sidebar/main.js' */
require(["jira/jquery/deferred","jira/skate","wrm/require","jquery","jira/api/projects","jira/util/logger","jira/projects/sidebar/expansion-manager","jira/ajs/dark-features"],function(h,e,f,k,a,i,b,l){var g=false;var d=(function(){var m=new h();k(function(){m.resolve();g=true});return m.promise()})();var j=(function(){if(l.isEnabled("com.atlassian.jira.projects.sidebar.DEFER_RESOURCES")&&!l.isEnabled("com.atlassian.jira.projects.sidebar.DEFER_RESOURCES_KILLSWITCH")){var m=a.getCurrentProjectType();var n=["wrc!jira.project.sidebar"];if(m){n.push("wrc!jira.project.sidebar."+m)}return f(n)}return new h().resolve().promise()})();var c=(function(){var m=new h();document.addEventListener("sidebar:initialised",function(n){b(n.detail);if(n.target.classList.contains("projects-sidebar")){m.resolve(n)}});return m.promise()})();k.when(c,j,d).done(function(p){var m=p.target;var o=m.parentElement.querySelector(".sidebar-placeholder");if(o){m.classList.add("fade-in");o.addEventListener("animationend",function(){o.parentNode.removeChild(o)});o.classList.add("fade-out")}m.classList.remove("sidebar-pending");var n=require("jira/projects/sidebar/sidebar-initializer");n.init(p.detail);i.trace("jira.projects.sidebar.init",{dclFired:g})});e("aui-sidebar",{type:e.type.CLASSNAME,attached:function(n){var o=AJS.sidebar(n);var m=document.createEvent("CustomEvent");m.initCustomEvent("sidebar:initialised",true,false,o);n.dispatchEvent(m)}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-placeholder-init', location = '/sidebar/sidebar-placeholder-init.js' */
define("jira/projects/sidebar/sidebar-placeholder-initializer",["wrm/require","jira/analytics","jira/util/logger"],function(a,b,c){function e(h){f();c.error("Error while rendering sidebar. Message:",h);d("bigpipe.sidebar.render.error",h)}function g(h){d("bigpipe.sidebar.render.success",h)}function f(){a(["wr!jira.webresources:jira-formatter","wr!jira.webresources:messages"],function(){var i=require("jira/util/formatter");var h=require("jira/flag");var j=document.createElement("a");j.setAttribute("href",".");j.textContent="refresh the page";h.showWarningMsg("",i.format("Loading sidebar is taking longer than usual. You can {0} to load it again.",j.outerHTML))}).fail(function(){c.error("Failed to display sidebar error message due to error when loading WRM dependencies.")})}function d(h,j){var i;if(j&&j.data){i={signature:j.data.signature}}b.send({name:h,data:i})}return{onSuccess:g,onError:e}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-quicksearch-plugin:commons_common', location = 'frontend/common.js' */
!function(e){function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var r=window.atlassianWebpackJsonpe5ed4b01bb42b7893d8aef5bda9bf664;window.atlassianWebpackJsonpe5ed4b01bb42b7893d8aef5bda9bf664=function(t,a,i){for(var c,u,s,l=0,f=[];l<t.length;l++)u=t[l],o[u]&&f.push(o[u][0]),o[u]=0;for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&(e[c]=a[c]);for(r&&r(t,a,i);f.length;)f.shift()();if(i)for(l=0;l<i.length;l++)s=n(n.s=i[l]);return s};var t={},o={2:0};n.e=function(e){function r(){c.onerror=c.onload=null,clearTimeout(u);var n=o[e];0!==n&&(n&&n[1](new Error("Loading chunk "+e+" failed.")),o[e]=void 0)}var t=o[e];if(0===t)return new Promise(function(e){e()});if(t)return t[2];var a=new Promise(function(n,r){t=o[e]=[n,r]});t[2]=a;var i=document.getElementsByTagName("head")[0];if({0:!0}[e])return WRM.require("wrc!com.atlassian.jira.plugins.jira-quicksearch-plugin:"+e),a;var c=document.createElement("script");c.type="text/javascript",c.charset="utf-8",c.async=!0,c.timeout=12e4,n.nc&&c.setAttribute("nonce",n.nc),c.src=n.p+"bundle."+e+".js";var u=setTimeout(r,12e4);return c.onerror=c.onload=r,i.appendChild(c),a},n.m=e,n.c=t,n.d=function(e,r,t){n.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:t})},n.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(r,"a",r),r},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n.oe=function(e){throw console.error(e),e},"undefined"!=typeof AJS&&(n.p=AJS.contextPath()+"/download/resources/com.atlassian.jira.plugins.jira-quicksearch-plugin:assets-54e2b242-e210-47b3-8788-d98c89c5c324/")}([]);;
;
/* module-key = 'com.atlassian.jira.plugins.jira-quicksearch-plugin:entrypoint-jira-quicksearch-plugin', location = 'frontend/bundle.jira-quicksearch-plugin.js' */
atlassianWebpackJsonpe5ed4b01bb42b7893d8aef5bda9bf664([1],[function(e,t){e.exports=require("jquery")},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.QUICK_SEARCH_RESULTS_EMPTY_STATE=t.QUICK_SEARCH_PARENT_LOADING_CLASS=t.QUICK_SEARCH_SPINNER_LOCATOR_CLASS=t.QUICK_SEARCH_SPINNER_CLASS=t.QUICK_SEARCH_INPUT_LOCATOR=t.QUICK_SEARCH_INPUT_ID=t.QUICK_SEARCH_FEATURE_FLAG=void 0;var r=n(5),u=i(r),a=n(2),s=i(a),o=s.default,c=(t.QUICK_SEARCH_FEATURE_FLAG="jira.quick.search",t.QUICK_SEARCH_INPUT_ID="quickSearchInput"),l=t.QUICK_SEARCH_INPUT_LOCATOR="#"+c,_=t.QUICK_SEARCH_SPINNER_CLASS="quick-search-spinner";t.QUICK_SEARCH_SPINNER_LOCATOR_CLASS=l+" ~ ."+_,t.QUICK_SEARCH_PARENT_LOADING_CLASS="quicksearch-loading",t.QUICK_SEARCH_RESULTS_EMPTY_STATE=Object.freeze([{id:"quick-search-issues",items:[],name:"Issues",url:(0,u.default)()+"/issues/?jql=order+by+lastViewed+DESC",viewAllTitle:"View all issues"},{id:"quick-search-projects",items:[],name:"ultimate.search.group.projects.name",url:(0,u.default)()+"/projects?selectedCategory=all&selectedProjectType=all&contains=",viewAllTitle:"View all projects"}])},function(e,t){e.exports=require("jira/util/formatter")},function(e,t){e.exports=require("jira/analytics")},function(e,t){e.exports=require("underscore")},function(e,t){e.exports=require("wrm/context-path")},function(e,t,n){"use strict";function i(){return(0,c.default)(_.QUICK_SEARCH_SPINNER_LOCATOR_CLASS)}function r(){return(0,c.default)(_.QUICK_SEARCH_INPUT_LOCATOR)}function u(){return r().parent()}function a(){u().addClass(_.QUICK_SEARCH_PARENT_LOADING_CLASS),i().spin()}function s(){u().removeClass(_.QUICK_SEARCH_PARENT_LOADING_CLASS),i().spinStop()}Object.defineProperty(t,"__esModule",{value:!0}),t.spinStart=a,t.spinStop=s;var o=n(0),c=function(e){return e&&e.__esModule?e:{default:e}}(o),l=n(1),_=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(l)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=n(0),u=i(r),a=n(4),s=i(a),o=n(3),c=i(o);n(8);var l=n(6),_=n(1),d=n(9),f=i(d),C=n(10),S=s.default.once(function(){(0,l.spinStart)(),n.e(0).then(n.bind(null,12))});(0,u.default)(function(){if(f.default.isFeatureEnabled(_.QUICK_SEARCH_FEATURE_FLAG)){c.default.send({name:"quicksearch.enabled"});var e=(0,u.default)(_.QUICK_SEARCH_INPUT_LOCATOR);e.after('<div class="'+_.QUICK_SEARCH_SPINNER_CLASS+'"></div>'),e.on("beforeBlurInput",function(e){e.preventDefault()}),e.focus(S),e.is(":focus")&&S()}}),(0,u.default)(window).load(function(){f.default.isFeatureEnabled(_.QUICK_SEARCH_FEATURE_FLAG)&&(0,C.showOnboardingTip)()})},function(e,t){},function(e,t){e.exports=require("jira/featureflags/feature-manager")},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){return"<div><p>"+e+"</p></div>"}function u(){if(0!==(0,f.default)(S).length){var e={anchor:S,id:"qs-onboarding-tip",isSequence:!1,showCloseButton:!0,closeButtonText:"OK, got it",callbacks:{hide:function(){return c.default.send({name:"quicksearch.onboarding.tip.dissmised"})}},title:"Find your work faster",bodyHtml:r("Search through all your issues and projects, and have the most important work always at your fingertips. Start typing to search...")},t=new s.default(e);if(!t.isDismissed()){if(t.show(),!t.isVisible())return void c.default.send({name:"quicksearch.onboarding.tip.notshown"});c.default.send({name:"quicksearch.onboarding.tip.shown"})}}}Object.defineProperty(t,"__esModule",{value:!0}),t.showOnboardingTip=u;var a=n(11),s=i(a),o=n(3),c=i(o),l=n(2),_=i(l),d=n(0),f=i(d),C=_.default,S="#quicksearch-menu:visible"},function(e,t){e.exports=require("jira-help-tips/feature/help-tip")}],[7]);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-header-async', location = 'node_modules/@atlassian/aui/src/js/aui/header-async.js' */
("undefined"===typeof window?global:window).__fa554824603df089875ffc2c324bafcd=function(){var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=__75cae523f4ec02598abff52e61f818c0,c=a&&a.__esModule?a:{"default":a},a=(a=__da172e72afc5a7088e3034df761062a6)&&a.__esModule?a:{"default":a},a=(0,a.default)("aui-header",{type:a.default.type.CLASSNAME,created:function(a){(0,c.default)(a)}});b.default=a;return b=b["default"]}.call(this);;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher.soy' */
// This file was automatically generated from appswitcher.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.appswitcher.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.appswitcher == 'undefined') { navlinks.templates.appswitcher = {}; }


navlinks.templates.appswitcher.linkSection = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.list.length > 0) {
    output += '<div class="aui-nav-heading sidebar-section-header">' + soy.$$escapeHtml(opt_data.title) + '</div><ul class="aui-nav nav-links">';
    var linkList8 = opt_data.list;
    var linkListLen8 = linkList8.length;
    for (var linkIndex8 = 0; linkIndex8 < linkListLen8; linkIndex8++) {
      var linkData8 = linkList8[linkIndex8];
      output += navlinks.templates.appswitcher.applicationsItem(linkData8);
    }
    output += '</ul>';
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.linkSection.soyTemplateName = 'navlinks.templates.appswitcher.linkSection';
}


navlinks.templates.appswitcher.applicationsItem = function(opt_data, opt_ignored) {
  return '<li class="nav-link"><a href="' + soy.$$escapeHtml(opt_data.link) + '" ' + ((opt_data.self) ? 'class="checked"' : '') + ' title="' + soy.$$escapeHtml(opt_data.link) + '"><span class="nav-link-label">' + soy.$$escapeHtml(opt_data.label) + '</span></a></li>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.applicationsItem.soyTemplateName = 'navlinks.templates.appswitcher.applicationsItem';
}


navlinks.templates.appswitcher.shortcutsItem = function(opt_data, opt_ignored) {
  return '<li class="nav-link"><a href="' + soy.$$escapeHtml(opt_data.link) + '" ' + ((opt_data.self) ? 'class="checked"' : '') + ' title="' + soy.$$escapeHtml(opt_data.link) + '"><span class="nav-link-label">' + soy.$$escapeHtml(opt_data.label) + '</span>' + ((opt_data.showDescription && opt_data.description) ? '<span class="nav-link-description">' + soy.$$escapeHtml(opt_data.description) + '</span>' : '') + '</a></li>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.shortcutsItem.soyTemplateName = 'navlinks.templates.appswitcher.shortcutsItem';
}


navlinks.templates.appswitcher.error = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-error">' + soy.$$filterNoAutoescape("Something went wrong, please \x3cspan class\x3d\x22app-switcher-retry\x22\x3etry again\x3c/span\x3e.") + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.error.soyTemplateName = 'navlinks.templates.appswitcher.error';
}


navlinks.templates.appswitcher.sidebarContents = function(opt_data, opt_ignored) {
  return '<div class="aui-page-panel-nav"><nav class="aui-navgroup aui-navgroup-vertical"><div class="app-switcher-section app-switcher-applications"><div class="aui-nav-heading">' + soy.$$escapeHtml("Application Links") + '</div><div class="app-switcher-loading">' + soy.$$filterNoAutoescape("Loading\x26hellip;") + '</div></div><div class="app-switcher-section app-switcher-shortcuts"><div class="aui-nav-heading">' + soy.$$escapeHtml("Shortcuts") + '</div><div class="app-switcher-loading">' + soy.$$filterNoAutoescape("Loading\x26hellip;") + '</div></div></nav></div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.sidebarContents.soyTemplateName = 'navlinks.templates.appswitcher.sidebarContents';
}


navlinks.templates.appswitcher.trigger = function(opt_data, opt_ignored) {
  return '<span class="aui-icon aui-icon-small aui-iconfont-appswitcher">' + soy.$$escapeHtml("Linked Applications") + '</span>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.trigger.soyTemplateName = 'navlinks.templates.appswitcher.trigger';
}


navlinks.templates.appswitcher.projectHeaderSection = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-title">' + aui.avatar.avatar({size: 'large', avatarImageUrl: opt_data.avatarUrl, isProject: true, title: opt_data.name}) + '<div class="sidebar-project-name">' + soy.$$escapeHtml(opt_data.name) + '</div></div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.projectHeaderSection.soyTemplateName = 'navlinks.templates.appswitcher.projectHeaderSection';
}


navlinks.templates.appswitcher.cogDropdown = function(opt_data, opt_ignored) {
  var output = '';
  var dropdownList__soy74 = '' + navlinks.templates.appswitcher.dropdownList({list: opt_data.links});
  output += aui.dropdown2.dropdown2({menu: {id: opt_data.id, content: dropdownList__soy74, extraClasses: 'aui-style-default sidebar-customize-section'}, trigger: {showIcon: false, content: '<span class="aui-icon aui-icon-small aui-iconfont-configure"></span>', container: '#app-switcher'}});
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.cogDropdown.soyTemplateName = 'navlinks.templates.appswitcher.cogDropdown';
}


navlinks.templates.appswitcher.dropdownList = function(opt_data, opt_ignored) {
  var output = '<ul class="sidebar-admin-links">';
  var linkList82 = opt_data.list;
  var linkListLen82 = linkList82.length;
  for (var linkIndex82 = 0; linkIndex82 < linkListLen82; linkIndex82++) {
    var linkData82 = linkList82[linkIndex82];
    output += '<li class="nav-link"><a href="' + soy.$$escapeHtml(linkData82.href) + '" title="' + soy.$$escapeHtml(linkData82.title) + '"><span class="nav-link-label">' + soy.$$escapeHtml(linkData82.label) + '</span></a></li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.dropdownList.soyTemplateName = 'navlinks.templates.appswitcher.dropdownList';
}


navlinks.templates.appswitcher.switcher = function(opt_data, opt_ignored) {
  var output = '';
  if (true) {
    if (AJS.DarkFeatures.isEnabled('rotp.sidebar')) {
      var sidebarContents__soy97 = '' + navlinks.templates.appswitcher.sidebarContents(null);
      var triggerContent__soy99 = '' + navlinks.templates.appswitcher.trigger(null);
      output += navlinks.templates.appswitcher.sidebar({sidebar: {id: 'app-switcher', content: sidebarContents__soy97}, trigger: {showIcon: false, content: triggerContent__soy99}});
    } else {
      output += navlinks.templates.appswitcher_old.switcher(null);
    }
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.switcher.soyTemplateName = 'navlinks.templates.appswitcher.switcher';
}


navlinks.templates.appswitcher.sidebar = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(opt_data.sidebar.id) + '" class="sidebar-trigger app-switcher-trigger" aria-owns="' + soy.$$escapeHtml(opt_data.sidebar.id) + '" aria-haspopup="true" data-is-user-admin="' + soy.$$escapeHtml(false) + '" data-is-sidebar="true" >' + soy.$$filterNoAutoescape(opt_data.trigger.content) + '</a><div id=' + soy.$$escapeHtml(opt_data.sidebar.id) + ' class="app-switcher-sidebar aui-style-default sidebar-offscreen">' + soy.$$filterNoAutoescape(opt_data.sidebar.content) + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.sidebar.soyTemplateName = 'navlinks.templates.appswitcher.sidebar';
}
;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher.js' */
(function(e,a){var d="is-user-admin";var c="#app-switcher";a.SideBar=function(f){var g=this;this.$sidebar=null;f=e.extend({sidebarContents:null},f);this.getLinks=function(){return e.ajax({url:AJS.contextPath()+"/rest/menu/latest/appswitcher",cache:false,dataType:"json"}).done(this.updateAppLinks).fail(this.showAppSwitcherError)};this.populateProjectHeader=function(i,h){g.getSidebar().find(".app-switcher-shortcuts .aui-nav-heading").after(navlinks.templates.appswitcher.projectHeaderSection({avatarUrl:h,name:i}))};this.getProjectData=function(){var h=e(".project-shortcut-dialog-trigger"),i=h.data("key"),j=h.data("entity-type");if(h.size()==0||!i||!j){e(".app-switcher-shortcuts").remove();return}var l,k;k=e.ajax({url:AJS.contextPath()+"/rest/project-shortcuts/1.0/local/"+i,cache:false,data:{entityType:j},dataType:"json"});l=e.ajax({url:AJS.contextPath()+"/rest/project-shortcuts/1.0/remote/"+i,cache:false,data:{entityType:j},dataType:"json"});e.when(k,l).then(function(n,m){g.updateProjectShortcuts(n,m,{key:i,entityType:j,name:h.data("name"),avatarUrl:h.find("img").prop("src")})},g.showProjectShortcutsError)};this.getSidebar=function(){if(!this.$sidebar){this.$sidebar=e(f.sidebarContents)}return this.$sidebar};this.addApplicationsCog=function(){e(".app-switcher-applications .aui-nav-heading").before(navlinks.templates.appswitcher.cogDropdown({id:"sidebar-applications-admin-dropdown",links:[{href:AJS.contextPath()+"/plugins/servlet/customize-application-navigator",label:"Customize navigator",title:"Add new entries, hide existing or restrict who sees what"},{href:AJS.contextPath()+"/plugins/servlet/applinks/listApplicationLinks",label:"Manage application links",title:"Link to more Atlassian applications"}]}))};this.addProjectShortcutsCog=function(h,j){var i=[{href:AJS.contextPath()+"/plugins/servlet/custom-content-links-admin?entityKey="+h,label:"Customize shortcuts",title:""}];if(g.entityMappings[j]){i.push({href:g.generateEntityLinksUrl(h,g.entityMappings[j]),label:"Manage product links",title:""})}g.getSidebar().find(".app-switcher-shortcuts .aui-nav-heading").before(navlinks.templates.appswitcher.cogDropdown({id:"sidebar-project-shortcuts-admin-dropdown",links:i}))};this.updateAppLinks=function(h){e(function(){g.getSidebar().find(".app-switcher-applications").html(navlinks.templates.appswitcher.linkSection({title:"Application Links",list:h}));if(g.getSidebar().data(d)){g.addApplicationsCog()}g.bindAnalyticsHandlers(g.getSidebar(),h)})};this.updateProjectShortcuts=function(k,i,j){var l=k[0].shortcuts,h=i[0].shortcuts;g.getSidebar().find(".app-switcher-shortcuts").html(navlinks.templates.appswitcher.linkSection({title:"Shortcuts",list:l.concat(h)}));if(g.getSidebar().data(d)){g.addProjectShortcutsCog(j.key,j.entityType)}g.populateProjectHeader(j.name,j.avatarUrl);g.bindAnalyticsHandlers(g.getSidebar(),data)};this.entityMappings={"confluence.space":"com.atlassian.applinks.api.application.confluence.ConfluenceSpaceEntityType","jira.project":"com.atlassian.applinks.api.application.jira.JiraProjectEntityType","bamboo.project":"com.atlassian.applinks.api.application.bamboo.BambooProjectEntityType","stash.project":"com.atlassian.applinks.api.application.stash.StashProjectEntityType"};this.generateEntityLinksUrl=function(h,i){if(i===g.entityMappings["confluence.space"]){return AJS.contextPath()+"/spaces/listentitylinks.action?typeId="+i+"&key="+h}else{return AJS.contextPath()+"/plugins/servlet/applinks/listEntityLinks/"+i+"/"+h}};this.showAppSwitcherError=function(){e(function(){var h=g.getSidebar();h.find(".app-switcher-applications .app-switcher-loading").replaceWith(navlinks.templates.appswitcher.error());h.off(".appswitcher").on("click.appswitcher",".app-switcher-retry",e.proxy(g.retryLoading,g))})};this.showProjectShortcutsError=function(){e(function(){var h=g.getSidebar();h.find(".app-switcher-shortcuts .app-switcher-loading").replaceWith(navlinks.templates.appswitcher.error());h.off(".appswitcher").on("click.appswitcher",".app-switcher-retry",e.proxy(g.retryLoading,g))})};this.retryLoading=function(h){this.getSidebar().html(navlinks.templates.appswitcher.sidebarContents());this.getLinks();this.getProjectData();h&&h.stopPropagation()};this.bindAnalyticsHandlers=function(h,i){};this.getLinks();e(this.getProjectData);this.toggleSidebar=function(j){var k=g.getSidebar(),i=e("body"),h=e(window.document);if(!i.hasClass("app-switcher-open")){var m=e("#header");k.css("left",-k.width());k.parent("body").length||k.appendTo("body");b({data:k});k.animate({left:0},300);function l(n){var p=n.target&&e(n.target),o=n.keyCode;if(n.originalEvent===j.originalEvent){return}if(p&&!o&&!(p.closest(k).length||p.closest(m).length)&&j.which==1&&!(n.shiftKey||n.ctrlKey||n.metaKey)){g.toggleSidebar()}else{if(o===27){g.toggleSidebar()}}}h.on("click.appSwitcher",l);h.on("keydown.appSwitcher",l);h.on("scroll.appSwitcher",k,b)}else{h.off(".appSwitcher")}i.toggleClass("app-switcher-open")};e("#header").on("click",".app-switcher-trigger",this.toggleSidebar)};function b(h){var f=e(document).scrollTop(),i=e("#header"),g=(i.height()+i.offset().top)-f;if(g>=0){h.data.css({top:g,position:"fixed"})}else{h.data.css({top:0,left:0,position:"fixed"})}}e(function(){if(e(c).data("is-sidebar")===true){new a.SideBar({sidebarContents:c})}})}(jQuery,window.NL=(window.NL||{})));;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher_old.js' */
var APPSWITCHER_TRIGGER_CLICK="appswitcher.trigger.click";var APPSWITCHER_DROPDOWN_SHOW="appswitcher.dropdown.show";var APPSWITCHER_DROPDOWN_DISPLAY_ERROR="appswitcher.dropdown.display.error";var APPSWITCHER_APP_LINK_CLICK="appswitcher.app.link.click";var APPSWITCHER_CONFIGURE_LINK_CLICK="appswitcher.configure.link.click";(function(c,f){var b="isAppSuggestionAvailable";var d="isSiteAdminUser";var e="isUserAdmin";var a="#app-switcher";f.AppSwitcher=function(j){var l=AJS.contextPath()+"/plugins/servlet/customize-application-navigator";var k="unified.usermanagement";var m=this;this.$dropdown=null;j=c.extend({dropdownContents:null},j);this.getLinks=function(){return c.ajax({url:AJS.contextPath()+"/rest/menu/latest/appswitcher",cache:false,dataType:"json"}).done(this.updateDropdown).fail(this.showError)};this.getDropdown=function(){if(!this.$dropdown){this.$dropdown=c(j.dropdownContents);this.envData=this.$dropdown.data("environment")}return this.$dropdown};this.updateDropdown=function(n){c(function(){m.getDropdown().html(navlinks.templates.appswitcher_old.applications({apps:n,showAdminLink:m.envData[e],adminLink:l}));m.bindAnalyticsHandlers();if(m.envData[b]===true){m.handleSuggestionApps(n)}})};this.bindAnalyticsHandlers=function(){c(".app-switcher-trigger").on("click",function(){AJS.trigger("analyticsEvent",{name:APPSWITCHER_TRIGGER_CLICK})});c("#app-switcher").on("aui-dropdown2-show",function(){AJS.trigger("analyticsEvent",{name:APPSWITCHER_DROPDOWN_SHOW})});c("#app-switcher .nav-link").on("click",function(){var p="custom";var q=c(this).find("a");var o=q.attr("href");var n=window.location.hostname;if(o&&o.indexOf("bitbucket.org")>-1){p="bitbucket-cloud"}else{if(o.indexOf(n+"/wiki")>-1){p="confluence"}else{if(o.indexOf(n+"/build")>-1){p="bamboo"}else{if(o.indexOf(n)>-1){p="jira"}}}}AJS.trigger("analyticsEvent",{name:APPSWITCHER_APP_LINK_CLICK,data:{product:p}})});c(".nav-link-edit-wrapper").on("click",function(){AJS.trigger("analyticsEvent",{name:APPSWITCHER_CONFIGURE_LINK_CLICK})})};this.isBillingSystemEnabled=function(){return(this.envData[d]===true)&&AJS.DarkFeatures.isEnabled(k)};this.handleSuggestionApps=function(q){var r=_.map(q,function(s){return s.applicationType.toLowerCase()});var o=c("<div id='app-switcher-suggestion-apps' class='aui-dropdown2-section'/>");o.html(navlinks.templates.appswitcher_old.suggestionApps);var p=o.find(".suggestion-apps");var n=false;_.each(g,function(s){if(!_.contains(r,s.appName)){n=true;p.append(navlinks.templates.appswitcher_old.suggestionApp({suggestionApp:s,isBillingSystemEnabled:m.isBillingSystemEnabled()}))}});if(!n){return}c("#app-switcher").append(o);c(".app-discovery-suggestion-app").click(function(){var t=c(this).find("a");var s;if(m.envData[d]===true){s="appswitcher.discovery.siteadmin.select.inproduct."}else{s="appswitcher.discovery.user.select."}s=s+t.attr("id").toLowerCase();AJS.trigger("analytics",{name:s})});c(".app-discovery-suggestion-app").hover(function(){c(this).find("a").removeClass("active").removeClass("aui-dropdown2-active")});c(".app-discovery-cancel-button").click(function(){AJS.trigger("analytics",{name:"appswitcher.discovery.nothanks.button.click"});i(h,"true");o.remove()})};this.showError=function(){c(function(){AJS.trigger("analyticsEvent",{name:APPSWITCHER_DROPDOWN_DISPLAY_ERROR});m.getDropdown().html(navlinks.templates.appswitcher_old.error()).off(".appswitcher").on("click.appswitcher",".app-switcher-retry",c.proxy(m.retryLoading,m))})};this.retryLoading=function(n){this.getDropdown().html(navlinks.templates.appswitcher_old.loading());this.getLinks();n&&n.stopPropagation()};this.getLinks()};var h="key-no-thanks";var g=[{appName:"jira",appDesc:"Issue & Project Tracking Software",discoveryUrl:"https://www.atlassian.com/software/jira",billingSystemDiscoveryUrl:"/admin/billing/addapplication"},{appName:"confluence",appDesc:"Collaboration and content sharing",discoveryUrl:"https://www.atlassian.com/software/confluence",billingSystemDiscoveryUrl:"/admin/billing/addapplication?product=confluence.ondemand"},{appName:"bamboo",appDesc:"Continuous integration",discoveryUrl:"https://www.atlassian.com/software/bamboo",billingSystemDiscoveryUrl:"/admin/billing/addapplication?product=bamboo.ondemand"}];var i=function(j,k){c.ajax({url:AJS.contextPath()+"/rest/menu/latest/userdata/",type:"PUT",contentType:"application/json",data:JSON.stringify({key:j,value:k})})};c(function(){if(c(a).data("is-switcher")===true){new f.AppSwitcher({dropdownContents:a})}})}(jQuery,window.NL=(window.NL||{})));;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher_old.soy' */
// This file was automatically generated from appswitcher_old.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.appswitcher_old.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.appswitcher_old == 'undefined') { navlinks.templates.appswitcher_old = {}; }


navlinks.templates.appswitcher_old.applications = function(opt_data, opt_ignored) {
  return '' + navlinks.templates.appswitcher_old.applicationsSection({list: opt_data.apps, listClass: 'nav-links', showDescription: opt_data.showDescription}) + ((opt_data.custom) ? navlinks.templates.appswitcher_old.applicationsSection({list: opt_data.custom, showDescription: opt_data.showDescription}) : '') + ((opt_data.showAdminLink) ? navlinks.templates.appswitcher_old.adminSection(opt_data) : '');
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.applications.soyTemplateName = 'navlinks.templates.appswitcher_old.applications';
}


navlinks.templates.appswitcher_old.applicationsSection = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.list.length > 0) {
    var param19 = '<ul' + ((opt_data.listClass) ? ' class="' + soy.$$escapeHtml(opt_data.listClass) + '"' : '') + '>';
    var linkList27 = opt_data.list;
    var linkListLen27 = linkList27.length;
    for (var linkIndex27 = 0; linkIndex27 < linkListLen27; linkIndex27++) {
      var linkData27 = linkList27[linkIndex27];
      param19 += navlinks.templates.appswitcher_old.applicationsItem(soy.$$augmentMap(linkData27, {showDescription: opt_data.showDescription}));
    }
    param19 += '</ul>';
    output += aui.dropdown2.section({content: param19});
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.applicationsSection.soyTemplateName = 'navlinks.templates.appswitcher_old.applicationsSection';
}


navlinks.templates.appswitcher_old.applicationsItem = function(opt_data, opt_ignored) {
  return '<li class="nav-link' + ((opt_data.self) ? ' nav-link-local' : '') + '"><a href="' + soy.$$escapeHtml(opt_data.link) + '" class="aui-dropdown2-radio ' + ((opt_data.self) ? 'aui-dropdown2-checked' : '') + '" title="' + soy.$$escapeHtml(opt_data.link) + '"><span class="nav-link-label">' + soy.$$escapeHtml(opt_data.label) + '</span>' + ((opt_data.showDescription && opt_data.description) ? '<span class="nav-link-description">' + soy.$$escapeHtml(opt_data.description) + '</span>' : '') + '</a></li>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.applicationsItem.soyTemplateName = 'navlinks.templates.appswitcher_old.applicationsItem';
}


navlinks.templates.appswitcher_old.adminSection = function(opt_data, opt_ignored) {
  return '' + aui.dropdown2.section({content: '<ul class="nav-links"><li><a class="nav-link-edit-wrapper" href="' + soy.$$escapeHtml(opt_data.adminLink) + '"><span class="nav-link-edit">' + soy.$$filterNoAutoescape("Configure\x26hellip;") + '</span></a></li></ul>'});
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.adminSection.soyTemplateName = 'navlinks.templates.appswitcher_old.adminSection';
}


navlinks.templates.appswitcher_old.error = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-error">' + soy.$$filterNoAutoescape("Something went wrong, please \x3cspan class\x3d\x22app-switcher-retry\x22\x3etry again\x3c/span\x3e.") + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.error.soyTemplateName = 'navlinks.templates.appswitcher_old.error';
}


navlinks.templates.appswitcher_old.loading = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-loading">' + soy.$$filterNoAutoescape("Loading\x26hellip;") + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.loading.soyTemplateName = 'navlinks.templates.appswitcher_old.loading';
}


navlinks.templates.appswitcher_old.trigger = function(opt_data, opt_ignored) {
  return '<span class="aui-icon aui-icon-small aui-iconfont-appswitcher">' + soy.$$escapeHtml("Linked Applications") + '</span>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.trigger.soyTemplateName = 'navlinks.templates.appswitcher_old.trigger';
}


navlinks.templates.appswitcher_old.switcher = function(opt_data, opt_ignored) {
  var output = '';
  if (true) {
    var loadingContent__soy81 = '' + navlinks.templates.appswitcher_old.loading(null);
    var triggerContent__soy83 = '' + navlinks.templates.appswitcher_old.trigger(null);
    output += aui.dropdown2.dropdown2({menu: {id: 'app-switcher', content: loadingContent__soy81, extraClasses: 'aui-style-default', extraAttributes: {'data-environment': {}, 'data-is-switcher': 'true'}}, trigger: {showIcon: false, content: triggerContent__soy83, extraClasses: 'app-switcher-trigger', extraAttributes: {href: '#app-switcher'}}});
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.switcher.soyTemplateName = 'navlinks.templates.appswitcher_old.switcher';
}


navlinks.templates.appswitcher_old.suggestionApp = function(opt_data, opt_ignored) {
  var output = '';
  var href__soy89 = opt_data.isBillingSystemEnabled == true ? opt_data.suggestionApp.billingSystemDiscoveryUrl : opt_data.suggestionApp.discoveryUrl;
  output += '<li class="app-discovery-suggestion-app"><a id="' + soy.$$escapeHtml(opt_data.suggestionApp.appName) + '" href="' + soy.$$escapeHtml(href__soy89) + '" class="app-discovery-link aui-icon-container app-discovery-' + soy.$$escapeHtml(opt_data.suggestionApp.appName) + '-product-icon" title="' + soy.$$escapeHtml(href__soy89) + '" target="_blank"/><div class="app-discovery-small">' + soy.$$escapeHtml(opt_data.suggestionApp.appDesc) + '</div></li>';
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.suggestionApp.soyTemplateName = 'navlinks.templates.appswitcher_old.suggestionApp';
}


navlinks.templates.appswitcher_old.suggestionApps = function(opt_data, opt_ignored) {
  return '<ul class=\'nav-links suggestion-apps\'><li><span class=\'app-discovery-suggest-title nav-link-label\'><h6>' + soy.$$escapeHtml("Try other Atlassian apps") + '</h6></span></li></ul><div class=\'buttons-container app-discovery-suggest-apps-buttons\'><div class=\'buttons\'><button class=\'aui-button aui-button-link app-discovery-cancel-button\' name=\'cancel\' accesskey=\'c\' href=\'#\'>' + soy.$$escapeHtml("Don\x27t show this again") + '</button></div></div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.suggestionApps.soyTemplateName = 'navlinks.templates.appswitcher_old.suggestionApps';
}
;
;
/* module-key = 'com.atlassian.jira.jira-header-plugin:header-templates', location = 'soy/headerDropdown.soy' */
// This file was automatically generated from headerDropdown.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Menu.Dropdowns.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Menu == 'undefined') { JIRA.Templates.Menu = {}; }
if (typeof JIRA.Templates.Menu.Dropdowns == 'undefined') { JIRA.Templates.Menu.Dropdowns = {}; }


JIRA.Templates.Menu.Dropdowns.dropdown2Fragment = function(opt_data, opt_ignored) {
  var output = '';
  var sectionList3 = opt_data.sections;
  var sectionListLen3 = sectionList3.length;
  for (var sectionIndex3 = 0; sectionIndex3 < sectionListLen3; sectionIndex3++) {
    var sectionData3 = sectionList3[sectionIndex3];
    output += JIRA.Templates.Menu.Dropdowns.dropdown2Section(sectionData3);
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Menu.Dropdowns.dropdown2Fragment.soyTemplateName = 'JIRA.Templates.Menu.Dropdowns.dropdown2Fragment';
}


JIRA.Templates.Menu.Dropdowns.dropdown2Section = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '';
  var hasItems__soy7 = opt_data.items && opt_data.items.length > 0;
  if (hasItems__soy7) {
    output += '<div' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-dropdown2-section' + ((opt_data.style) ? soy.$$escapeHtml(opt_data.style) : '') + '" >' + ((opt_data.label) ? '<strong>' + soy.$$escapeHtml(opt_data.label) + '</strong>' : '') + '<ul class="aui-list-truncate">';
    var itemList27 = opt_data.items;
    var itemListLen27 = itemList27.length;
    for (var itemIndex27 = 0; itemIndex27 < itemListLen27; itemIndex27++) {
      var itemData27 = itemList27[itemIndex27];
      output += '<li' + ((itemData27.id) ? ' id="' + soy.$$escapeHtml(itemData27.id) + '"' : '') + ((itemData27.style) ? ' class="' + soy.$$escapeHtml(itemData27.style) + '"' : '') + '>' + JIRA.Templates.Menu.Dropdowns.dropdown2Item(itemData27) + '</li>';
    }
    output += '</ul></div>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Menu.Dropdowns.dropdown2Section.soyTemplateName = 'JIRA.Templates.Menu.Dropdowns.dropdown2Section';
}


JIRA.Templates.Menu.Dropdowns.dropdown2Item = function(opt_data, opt_ignored) {
  var output = '<a href="' + soy.$$escapeHtml(opt_data.url) + '"' + ((opt_data.parameters && opt_data.parameters.trackClick) ? ' data-track-click="' + soy.$$escapeHtml(opt_data.parameters.trackClick) + '"' : '') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '_lnk"' : '') + ' class="' + ((opt_data.iconUrl) ? 'aui-icon-container' : '') + ((opt_data.parameters && opt_data.parameters['class']) ? ' ' + soy.$$escapeHtml(opt_data.parameters['class']) : '') + '"';
  if (opt_data.parameters) {
    var keyList69 = soy.$$getMapKeys(opt_data.parameters);
    var keyListLen69 = keyList69.length;
    for (var keyIndex69 = 0; keyIndex69 < keyListLen69; keyIndex69++) {
      var keyData69 = keyList69[keyIndex69];
      output += (keyData69 != 'class' && keyData69 != 'iconurl') ? ' ' + soy.$$escapeHtml(keyData69) + '="' + soy.$$escapeHtml(opt_data.parameters[keyData69]) + '"' : '';
    }
  }
  output += '>' + ((opt_data.iconUrl) ? '<img class="icon" src="' + soy.$$escapeHtml(opt_data.iconUrl) + '" alt="" />' : '') + soy.$$escapeHtml(opt_data.label) + '</a>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Menu.Dropdowns.dropdown2Item.soyTemplateName = 'JIRA.Templates.Menu.Dropdowns.dropdown2Item';
}
;
;
/* module-key = 'com.atlassian.jira.jira-header-plugin:analytics-header', location = 'js/header-analytics.js' */
define("jira/header/init-header-analytics",["jira/analytics","jira/util/logger","jquery"],function(n,t,e){"use strict";function i(n,t){var e=void 0;return n.forEach(function(n){n.id===t&&(e=n.analyticEventKey)}),e}function o(o){var m=e(o);m.on("click","#logo",function(){n.send({name:a+"home"}),t.trace(r)}),m.on("aui-dropdown2-show",l,function(){var n=e(this).attr("id");c(u,n)&&d(n,u,".open")}),m.on("aui-dropdown2-hide",l,function(){var n=e(this).attr("id");c(u,n)&&d(n,u,".close")}),m.on("aui-dropdown2-show",s,function(){var n=e(this);n.trigger("aui-dropdown2-show-before"),n.trigger("aui-dropdown2-show-after")}),m.on("click",y,function(){var n=this.getAttribute("aria-controls");c(u,n)&&d(n,u,".click")}),m.on("click",".aui-dropdown2 .aui-dropdown2-section a",function(o){var c=e(o.target).closest(l).first();if(null!==c){var d=c.find("a").index(o.target),s=c.attr("id"),y=i(u,s);n.send({name:a+y+".item.click",itemIndex:d}),t.trace(r)}})}var a="jira.navigation.header.",r="jira.header.analytics.event",c=function(n,t){return n.some(function(n){return n.id===t})},d=function(e,o,c){var d=i(o,e),u=a+d+c;n.send({name:u}),t.trace(r)},u=[{id:"home_link-content",analyticEventKey:"dashboards"},{id:"browse_link-content",analyticEventKey:"projects"},{id:"find_link-content",analyticEventKey:"issues"},{id:"tempo_menu-content",analyticEventKey:"tempo"},{id:"bonfire_top_menu_dropdown-content",analyticEventKey:"capture"},{id:"greenhopper_menu-content",analyticEventKey:"boards"},{id:"plugins-jira-webitem-main-content",analyticEventKey:"portfolio"},{id:"system-help-menu-content",analyticEventKey:"help"},{id:"system-admin-menu-content",analyticEventKey:"admin"}],s="#system-help-menu-content, #user-options-content, #system-admin-menu-content",l=u.map(function(n){return"#"+n.id}).join(", "),y=u.reduce(function(n,t){return n+"a.aui-dropdown2-trigger[aria-owns="+t.id+"], "},"");return{init:o}});;
;
/* module-key = 'com.atlassian.jira.jira-header-plugin:jira-header-assets', location = 'js/init-dropdown2.js' */
define("jira/header/dropdown/element",["jira/ajs/ajax/smart-ajax","jira/jquery/deferred","jira/skate","jira/util/data/meta","wrm/context-path","jquery"],function(e,a,t,o,n,r){"use strict";return t("aui-dropdown2-ajax",{type:t.type.CLASSNAME,attached:function(t){function d(){document.activeElement===s.get(0)&&u.get(0).focusItem(0)}function i(){s.data("kbd-interacted",!1)}var u=r(document.getElementById(t.getAttribute("aria-controls"))),s=r(t),c=u.data("aui-dropdown2-ajax-key");s.on("keydown.aui-dropdown2-ajax",function(){s.data("kbd-interacted",!0),setTimeout(i,4)}),u.on("aui-dropdown2-show-after.aui-dropdown2-ajax",i),i(),u.on("aui-dropdown2-show.aui-dropdown2-ajax",function(){if(u.trigger("aui-dropdown2-show-before"),c){var t=new a,i=new a;setTimeout(function(){t.resolve(s.data("kbd-interacted"))},0),u.empty(),u.addClass("aui-dropdown2-loading"),s.attr("aria-busy","true"),e.makeRequest({url:n()+"/rest/api/1.0/menus/"+c,data:{inAdminMode:o.getBoolean("in-admin-mode")},dataType:"json",cache:!1,success:function(e){i.resolve(e)},error:i.reject}),r.when(t,i).done(function(e,a){u.html(JIRA.Templates.Menu.Dropdowns.dropdown2Fragment(a)),e&&setTimeout(d,0)}).always(function(){s.attr("aria-busy","false"),u.removeClass("aui-dropdown2-loading"),u.trigger("aui-dropdown2-show-after")})}else u.trigger("aui-dropdown2-show-after")})},detached:function(e){var a=r(document.getElementById(e.getAttribute("aria-controls"))),t=r(e);a.off(".aui-dropdown2-ajax"),t.off(".aui-dropdown2-ajax")}})}),function(e){"use strict";e(document).on("aui-responsive-menu-item-created",".aui-header.aui-dropdown2-trigger-group",function(a){var t=a.originalEvent.detail;e(t.originalItem).find("> .aui-dropdown2-ajax").length>0&&e(t.newItem).find("> .aui-dropdown2-trigger").addClass("aui-dropdown2-ajax")})}(require("jquery"));;
;
/* module-key = 'com.atlassian.jira.jira-header-plugin:jira-header-assets', location = 'js/app-switcher-analytics.js' */
define("jira/header/init-app-switcher-analytics",["jira/analytics","jquery"],function(i,n){"use strict";function a(a){var e=n(a);e.on("aui-dropdown2-show-before","#app-switcher",function(){i.send({name:"navigation.header.appswitcher.open"})}),e.on("click","#app-switcher a, #app-switcher button",function(a){var e,t=n(a.target),o=t.closest("li").index();t.is(".nav-link-edit")?e="configure":t.is(".app-discovery-link")?e=this.id?this.id:"unknown.app.discovery":t.is(".app-discovery-cancel-button")?(e="dont.show",o=0):e="application",i.send({name:"navigation.header.appswitcher.click",data:{position:o,linkType:e}})}),e.on("aui-dropdown2-hide","#app-switcher",function(){i.send({name:"navigation.header.appswitcher.close"})})}return{init:a}});;
;
/* module-key = 'com.atlassian.jira.jira-header-plugin:jira-header', location = 'js/init-header.js' */
require(["jira/header/dropdown/element","jira/header/init-header-analytics","jira/header/init-app-switcher-analytics"],function(e,i,t){"use strict";i.init(document),t.init(document)});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-thumbnails', location = '/js/Thumbnails.js' */
define("wiki-edit/thumbnails",["wrm/data"],function(b){var a=b.claim("com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-thumbnails.thumbnails-allowed");return{isThumbnailable:function(f,e){var d=true;if(a!=null){d=!!a}if(!d){return false}var c;if(e){c=e.data("attachment-thumbnail")}if(c==null){return Boolean(f.match(/\.(jpg|jpeg|pjpeg|png)$/i))}else{if(c){return !f.match(/\.gif$/i)}return false}}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = '/templates/wiki-editor.soy' */
// This file was automatically generated from wiki-editor.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Plugins.WikiEditor.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Plugins == 'undefined') { JIRA.Templates.Plugins = {}; }
if (typeof JIRA.Templates.Plugins.WikiEditor == 'undefined') { JIRA.Templates.Plugins.WikiEditor = {}; }


JIRA.Templates.Plugins.WikiEditor.renderEditor = function(opt_data, opt_ignored) {
  var output = '<div id="wiki-edit-dropdown2-text-style-' + soy.$$escapeHtml(opt_data.editorId) + '" class="aui-dropdown2 aui-style-default wiki-edit-dropdown"><div class="aui-dropdown2-section"><ul class="aui-list-truncate"><li><a href="#" class="wiki-edit-operation" data-operation="paragraph" title="' + soy.$$escapeHtml("Paragraph") + '">' + soy.$$escapeHtml("Paragraph") + '</a></li><li><a href="#" class="wiki-edit-operation wiki-edit-operation-h1" data-operation="h1" title="' + soy.$$escapeHtml("Heading 1") + '">' + soy.$$escapeHtml("Heading 1") + '</a></li><li><a href="#" class="wiki-edit-operation wiki-edit-operation-h2" data-operation="h2" title="' + soy.$$escapeHtml("Heading 2") + '">' + soy.$$escapeHtml("Heading 2") + '</a></li><li><a href="#" class="wiki-edit-operation wiki-edit-operation-h3" data-operation="h3" title="' + soy.$$escapeHtml("Heading 3") + '">' + soy.$$escapeHtml("Heading 3") + '</a></li><li><a href="#" class="wiki-edit-operation wiki-edit-operation-h4" data-operation="h4" title="' + soy.$$escapeHtml("Heading 4") + '">' + soy.$$escapeHtml("Heading 4") + '</a></li><li><a href="#" class="wiki-edit-operation wiki-edit-operation-h5" data-operation="h5" title="' + soy.$$escapeHtml("Heading 5") + '">' + soy.$$escapeHtml("Heading 5") + '</a></li><li><a href="#" class="wiki-edit-operation wiki-edit-operation-h6" data-operation="h6" title="' + soy.$$escapeHtml("Heading 6") + '">' + soy.$$escapeHtml("Heading 6") + '</a></li><li><a href="#" class="wiki-edit-operation wiki-edit-operation-monospace" data-operation="monospace" title="' + soy.$$escapeHtml("Preformatted") + '">' + soy.$$escapeHtml("Preformatted") + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="paragraph-quote" title="' + soy.$$escapeHtml("Paragraph quote") + '">' + soy.$$escapeHtml("Paragraph quote") + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="block-quote" title="' + soy.$$escapeHtml("Block quote") + '">' + soy.$$escapeHtml("Block quote") + '</a></li></ul></div></div><div id="wiki-edit-dropdown2-more-' + soy.$$escapeHtml(opt_data.editorId) + '" class="aui-dropdown2 aui-style-default wiki-edit-dropdown"><div class="aui-dropdown2-section"><ul class="aui-list-truncate"><li><a href="#" class="wiki-edit-operation" data-operation="delete" data-shortcut="ctrl+shift+s, command+shift+s" title="' + soy.$$escapeHtml("Strikethrough") + ' (' + soy.$$escapeHtml(opt_data.controlKey) + '+Shift+S)">' + soy.$$escapeHtml("Strikethrough") + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="subscript">' + soy.$$escapeHtml("Subscript") + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="superscript">' + soy.$$escapeHtml("Superscript") + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="cite">' + soy.$$escapeHtml("Citation") + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="monospace-inline">' + soy.$$escapeHtml("Monospace") + '</a></li></ul></div></div><div id="wiki-edit-dropdown2-link-' + soy.$$escapeHtml(opt_data.editorId) + '" class="aui-dropdown2 aui-style-default wiki-edit-dropdown wiki-edit-dropdown-link"><div class="aui-dropdown2-section"><ul class="aui-list-truncate"><li><a href="#" class="wiki-edit-operation" data-operation="link" data-shortcut="ctrl+k, command+k" title="' + soy.$$escapeHtml("External link") + ' (' + soy.$$escapeHtml(opt_data.controlKey) + '+K)">' + soy.$$escapeHtml("External link") + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="link-mail">' + soy.$$escapeHtml("Mail link") + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="link-anchor">' + soy.$$escapeHtml("Anchor link") + '</a></li></ul></div></div><div id="wiki-edit-dropdown2-attachment-' + soy.$$escapeHtml(opt_data.editorId) + '" class="aui-dropdown2 aui-style-default wiki-edit-dropdown wiki-edit-dropdown-attachment"><div class="aui-dropdown2-section wiki-edit-insert-attachment"><ul class="aui-list-truncate"><li><a href="#"></a></li></ul></div><div class="aui-dropdown2-section wiki-edit-browse-image"><ul class="aui-list-truncate"><li><a href="#" class="wiki-attachment-browse"><span class="aui-icon aui-icon-small aui-iconfont-add"></span>&nbsp;&nbsp;' + soy.$$escapeHtml("Browse") + '</a></li></ul></div></div><div id="wiki-edit-color-picker-' + soy.$$escapeHtml(opt_data.editorId) + '" class="aui-dropdown2 aui-style-default wiki-edit-picker wiki-edit-color-picker">';
  var colors__soy80 = ['333333', '707070', 'cccccc', '205081', '59afe1', '14892c', '8eb021', 'd04437', 'f79232', 'f6c342', '654982', 'f691b2'];
  output += '<div class="aui-dropdown2-section"><ul>';
  var colorList82 = colors__soy80;
  var colorListLen82 = colorList82.length;
  for (var colorIndex82 = 0; colorIndex82 < colorListLen82; colorIndex82++) {
    var colorData82 = colorList82[colorIndex82];
    output += '<li><a href="#" style="background-color: #' + soy.$$escapeHtml(colorData82) + '" data-operation="color" data-color="#' + soy.$$escapeHtml(colorData82) + '">&nbsp;</a></li>';
  }
  output += '</ul></div></div><div id="wiki-edit-dropdown2-icon-picker-' + soy.$$escapeHtml(opt_data.editorId) + '" class="aui-dropdown2 aui-style-default wiki-edit-picker wiki-edit-icon-picker"><div class="aui-dropdown2-section"><ul><li><a href="#" class="wiki-edit-operation" title=":)" data-operation=":)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/smile.gif" alt="' + soy.$$escapeHtml("smile") + '" /></a></li><li><a href="#" class="wiki-edit-operation" title=":(" data-operation=":("><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/sad.gif" alt="' + soy.$$escapeHtml("sad") + '" /></a></li><li><a href="#" class="wiki-edit-operation" title=":P" data-operation=":P"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/tongue.gif" alt="' + soy.$$escapeHtml("tongue") + '" /></a></li><li><a href="#" class="wiki-edit-operation" title=":D" data-operation=":D"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/biggrin.gif" alt="' + soy.$$escapeHtml("biggrin") + '" /></a></li><li><a href="#" class="wiki-edit-operation" title=";)" data-operation=";)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/wink.gif" alt="' + soy.$$escapeHtml("wink") + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(y)" data-operation="(y)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/thumbs_up.gif" alt="' + soy.$$escapeHtml("thumbs up") + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(n)" data-operation="(n)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/thumbs_down.gif" alt="' + soy.$$escapeHtml("thumbs down") + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(i)" data-operation="(i)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/information.gif" alt="' + soy.$$escapeHtml("information") + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(/)" data-operation="(/)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/check.gif" alt="' + soy.$$escapeHtml("check") + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(x)" data-operation="(x)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/error.gif" alt="' + soy.$$escapeHtml("error") + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(!)" data-operation="(!)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/warning.gif" alt="' + soy.$$escapeHtml("warning") + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(+)" data-operation="(+)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/add.gif" alt="' + soy.$$escapeHtml("add") + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(-)" data-operation="(-)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/forbidden.gif" alt="' + soy.$$escapeHtml("forbidden") + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(?)" data-operation="(?)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/help_16.gif" alt="' + soy.$$escapeHtml("help") + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(on)" data-operation="(on)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/lightbulb_on.gif" alt="' + soy.$$escapeHtml("lightbulb on") + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(off)" data-operation="(off)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/lightbulb.gif" alt="' + soy.$$escapeHtml("lightbulb") + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(*)" data-operation="(*)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/star_yellow.gif" alt="' + soy.$$escapeHtml("star yellow") + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(*r)" data-operation="(*r)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/star_red.gif" alt="' + soy.$$escapeHtml("star red") + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(*g)" data-operation="(*g)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/star_green.gif" alt="' + soy.$$escapeHtml("star green") + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(*b)" data-operation="(*b)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/star_blue.gif" alt="' + soy.$$escapeHtml("star blue") + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(*y)" data-operation="(*y)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/star_yellow.gif" alt="' + soy.$$escapeHtml("star yellow") + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(flag)" data-operation="(flag)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/flag.gif" alt="' + soy.$$escapeHtml("flag") + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(flagoff)" data-operation="(flagoff)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/flag_grey.gif" alt="' + soy.$$escapeHtml("flag off") + '" /></a></li></ul></div></div><div id="wiki-edit-dropdown2-other-' + soy.$$escapeHtml(opt_data.editorId) + '" class="aui-dropdown2 aui-style-default wiki-edit-dropdown"><div class="aui-dropdown2-section"><ul class="aui-list-truncate"><div class="aui-dropdown2-section"><li><a href="#" class="wiki-edit-operation" data-operation="mention">' + soy.$$escapeHtml("User mention") + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="table">' + soy.$$escapeHtml("Table") + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="code">' + soy.$$escapeHtml("Code") + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="noformat">' + soy.$$escapeHtml("Preformatted") + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="panel">' + soy.$$escapeHtml("Panel") + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="hr">' + soy.$$escapeHtml("Horizontal ruler") + '</a></li><li class="wiki-edit-speech-item hidden"><a href="#" class="wiki-edit-operation" data-operation="speech">' + soy.$$escapeHtml("Speech recognition") + '</a></li></div>' + ((opt_data.helpData.showHelp) ? '<div class="aui-dropdown2-section"><li><a href="' + soy.$$escapeHtml("") + '/secure/WikiRendererHelpAction.jspa?section=texteffects" target="_blank" title="' + soy.$$escapeHtml("Show me wiki markup syntax") + '">' + soy.$$escapeHtml("Text help") + '</a></li><li><a href="' + soy.$$escapeHtml(opt_data.helpData.editorDocumentationUrl) + '" target="_blank" title="' + soy.$$escapeHtml(opt_data.helpData.editorDocumentationTitle) + '">' + soy.$$escapeHtml("Visual help") + '</a></li></div>' : '') + '</ul></div></div><div class="wiki-edit-toolbar" id="wiki-edit-' + soy.$$escapeHtml(opt_data.editorId) + '"><div class="aui-toolbar2"><div class="aui-toolbar2-inner"><div class="aui-toolbar2-primary"><div class="aui-buttons"><a href="#" tabindex="-1" class="aui-button aui-button-subtle aui-dropdown2-trigger wiki-edit-operation-dropdown wiki-edit-style-picker-trigger" aria-owns="wiki-edit-dropdown2-text-style-' + soy.$$escapeHtml(opt_data.editorId) + '" aria-haspopup="true" aria-controls="wiki-edit-dropdown2-text-style-' + soy.$$escapeHtml(opt_data.editorId) + '">' + soy.$$escapeHtml("Style") + '</a></div><div class="aui-buttons wiki-edit-toolbar-section"><a href="#" tabindex="-1" class="aui-button aui-button-subtle wiki-edit-operation" data-operation="bold" data-shortcut="ctrl+b, command+b" title="' + soy.$$escapeHtml("Bold") + ' (' + soy.$$escapeHtml(opt_data.controlKey) + '+B)"><span class="aui-icon aui-icon-small aui-iconfont-editor-bold">' + soy.$$escapeHtml("Bold") + '</span></a><a href="#" tabindex="-1" class="aui-button aui-button-subtle wiki-edit-operation" data-operation="italic" data-shortcut="ctrl+i, command+i" title="' + soy.$$escapeHtml("Italic") + ' (' + soy.$$escapeHtml(opt_data.controlKey) + '+I)"><span class="aui-icon aui-icon-small aui-iconfont-editor-italic">' + soy.$$escapeHtml("Italic") + '</span></a><a href="#" tabindex="-1" class="aui-button aui-button-subtle wiki-edit-operation" data-operation="underline" data-shortcut="ctrl+u, command+u" title="' + soy.$$escapeHtml("Underline") + ' (' + soy.$$escapeHtml(opt_data.controlKey) + '+U)"><span class="aui-icon aui-icon-small aui-iconfont-editor-underline">' + soy.$$escapeHtml("Underline") + '</span></a><a href="#" tabindex="-1" class="aui-button aui-button-subtle wiki-edit-operation wiki-edit-operation-color" data-operation="color" data-color="red" title="' + soy.$$escapeHtml("Text color") + '"><span class="aui-icon aui-icon-small aui-iconfont-editor-color">' + soy.$$escapeHtml("Text color") + '</span><span class="wiki-edit-color-indicator"></span></a><a href="#" tabindex="-1" class="aui-button aui-button-subtle aui-dropdown2-trigger wiki-edit-operation-dropdown wiki-edit-color-picker-trigger" data-operation="color-parameter" aria-owns="wiki-edit-color-picker-' + soy.$$escapeHtml(opt_data.editorId) + '" aria-haspopup="true" title="' + soy.$$escapeHtml("More colors") + '"><span>' + soy.$$escapeHtml("More colors") + '</span></a><a href="#" tabindex="-1" class="aui-button aui-button-subtle aui-dropdown2-trigger wiki-edit-operation-dropdown wiki-edit-more-picker-trigger" aria-owns="wiki-edit-dropdown2-more-' + soy.$$escapeHtml(opt_data.editorId) + '" aria-haspopup="true" aria-controls="wiki-edit-dropdown2-more-' + soy.$$escapeHtml(opt_data.editorId) + '" title="' + soy.$$escapeHtml("More") + '"><span class="aui-icon aui-icon-small aui-iconfont-editor-styles">' + soy.$$escapeHtml("More") + '</span></a></div><div class="aui-buttons"><a href="#" tabindex="-1" class="aui-button aui-button-subtle aui-dropdown2-trigger wiki-edit-operation-dropdown wiki-edit-link-picker-trigger" aria-owns="wiki-edit-dropdown2-link-' + soy.$$escapeHtml(opt_data.editorId) + '" aria-haspopup="true" aria-controls="wiki-edit-dropdown2-link-' + soy.$$escapeHtml(opt_data.editorId) + '" title="' + soy.$$escapeHtml("Link") + ' (' + soy.$$escapeHtml(opt_data.controlKey) + '+K)"><span class="aui-icon aui-icon-small aui-iconfont-link">' + soy.$$escapeHtml("Link") + '</span></a><a href="#" tabindex="-1" class="aui-button aui-button-subtle aui-dropdown2-trigger wiki-edit-operation-dropdown wiki-edit-attachment-picker-trigger" aria-owns="wiki-edit-dropdown2-attachment-' + soy.$$escapeHtml(opt_data.editorId) + '" aria-haspopup="true" aria-controls="wiki-edit-dropdown2-attachment-' + soy.$$escapeHtml(opt_data.editorId) + '" title="' + soy.$$escapeHtml("Attachment") + '"><span class="aui-icon aui-icon-small aui-iconfont-file-generic">' + soy.$$escapeHtml("Attachment") + '</span></a></div><div class="aui-buttons wiki-edit-toolbar-section"><a href="#" tabindex="-1" class="aui-button aui-button-subtle wiki-edit-operation" data-operation="bullet-list" data-shortcut="ctrl+shift+b, command+shift+b" title="' + soy.$$escapeHtml("Bullet list") + ' (' + soy.$$escapeHtml(opt_data.controlKey) + '+Shift+B)"><span class="aui-icon aui-icon-small aui-iconfont-editor-list-bullet">' + soy.$$escapeHtml("Bullet list") + '</span></a><a href="#" tabindex="-1" class="aui-button aui-button-subtle wiki-edit-operation" data-operation="numbered-list" data-shortcut="ctrl+shift+n, command+shift+n" title="' + soy.$$escapeHtml("Numbered list") + ' (' + soy.$$escapeHtml(opt_data.controlKey) + '+Shift+N)"><span class="aui-icon aui-icon-small aui-iconfont-editor-list-number">' + soy.$$escapeHtml("Numbered list") + '</span></a></div><div class="aui-buttons"><a href="#" tabindex="-1" class="aui-button aui-button-subtle aui-dropdown2-trigger wiki-edit-operation-dropdown wiki-edit-icon-picker-trigger wiki-edit-tooltip" aria-owns="wiki-edit-dropdown2-icon-picker-' + soy.$$escapeHtml(opt_data.editorId) + '" aria-haspopup="true" aria-controls="wiki-edit-dropdown2-icon-picker-' + soy.$$escapeHtml(opt_data.editorId) + '" title="' + soy.$$escapeHtml("Icons") + '"><span class="aui-icon aui-icon-small aui-iconfont-editor-emoticon">' + soy.$$escapeHtml("Icons") + '</span></a><a href="#" tabindex="-1" class="aui-button aui-button-subtle aui-dropdown2-trigger wiki-edit-operation-dropdown wiki-edit-other-picker-trigger wiki-edit-tooltip" aria-owns="wiki-edit-dropdown2-other-' + soy.$$escapeHtml(opt_data.editorId) + '" aria-haspopup="true" aria-controls="wiki-edit-dropdown2-other-' + soy.$$escapeHtml(opt_data.editorId) + '" title="' + soy.$$escapeHtml("Other") + '"><span class="aui-icon aui-icon-small aui-iconfont-add">' + soy.$$escapeHtml("Other") + '</span></a></div><div class="aui-buttons wiki-edit-toolbar-last"><a href="#" tabindex="-1" class="aui-button aui-button-subtle wiki-edit-visible-toggle wiki-edit-tooltip" title="' + soy.$$escapeHtml("Toggle visibility") + '"><span class="aui-icon icon-toolbartoggle">Lock / Unlock</span></a></div></div></div><!-- .aui-toolbar-inner --></div></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Plugins.WikiEditor.renderEditor.soyTemplateName = 'JIRA.Templates.Plugins.WikiEditor.renderEditor';
}


JIRA.Templates.Plugins.WikiEditor.renderListItem = function(opt_data, opt_ignored) {
  return '<li><a href="#" ' + soy.$$escapeHtml(opt_data.attachmentType ? 'data-attachment-type=' + opt_data.attachmentType : '') + ' ' + soy.$$escapeHtml(opt_data.attachmentHref ? 'data-attachment-href=' + opt_data.attachmentHref : '') + ' data-attachment-thumbnail=' + soy.$$escapeHtml(opt_data.attachmentThumbnailable ? true : false) + '><span class="wiki-edit-attachment-type-icon aui-icon aui-icon-small ' + soy.$$escapeHtml(((opt_data.attachmentTypeIcon == null) ? null : opt_data.attachmentTypeIcon.cssClass) != null ? ((opt_data.attachmentTypeIcon == null) ? null : opt_data.attachmentTypeIcon.cssClass) : 'aui-iconfont-file-txt') + '" title="' + soy.$$escapeHtml(((opt_data.attachmentTypeIcon == null) ? null : opt_data.attachmentTypeIcon.title) != null ? ((opt_data.attachmentTypeIcon == null) ? null : opt_data.attachmentTypeIcon.title) : "File") + '"></span>&nbsp;&nbsp;<span class="wiki-edit-attachment-name">' + soy.$$escapeHtml(opt_data.text) + '</span></a></li>';
};
if (goog.DEBUG) {
  JIRA.Templates.Plugins.WikiEditor.renderListItem.soyTemplateName = 'JIRA.Templates.Plugins.WikiEditor.renderListItem';
}


JIRA.Templates.Plugins.WikiEditor.temporaryAttachmentViewUrl = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml("") + '/secure/temporaryattachment/' + soy.$$escapeHtml(opt_data.formToken) + '/' + soy.$$escapeHtml(opt_data.temporaryAttachmentId) + '_' + soy.$$escapeHtml(opt_data.filename);
};
if (goog.DEBUG) {
  JIRA.Templates.Plugins.WikiEditor.temporaryAttachmentViewUrl.soyTemplateName = 'JIRA.Templates.Plugins.WikiEditor.temporaryAttachmentViewUrl';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = '/js/keymaster.js' */
(function(u){var v,B={},A={16:false,18:false,17:false,91:false},r="all",e={"":16,shift:16,"":18,alt:18,option:18,"":17,ctrl:17,control:17,"":91,command:91},f={backspace:8,tab:9,clear:12,enter:13,"return":13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,"delete":46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},a=function(k){return f[k]||k.toUpperCase().charCodeAt(0)},x=[];for(v=1;v<20;v++){f["f"+v]=111+v}function h(F,E){var k=F.length;while(k--){if(F[k]===E){return k}}return -1}function y(E,k){if(E.length!=k.length){return false}for(var F=0;F<E.length;F++){if(E[F]!==k[F]){return false}}return true}var q={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function i(k){for(v in A){A[v]=k[q[v]]}}function C(J){var G,I,E,F,K,H;G=J.keyCode;if(h(x,G)==-1){x.push(G)}if(G==93||G==224){G=91}if(G in A){A[G]=true;for(E in e){if(e[E]==G){g[E]=true}}return}i(J);if(!g.filter.call(this,J)){return}if(!(G in B)){return}H=n();for(F=0;F<B[G].length;F++){I=B[G][F];if(I.scope==H||I.scope=="all"){K=I.mods.length>0;for(E in A){if((!A[E]&&h(I.mods,+E)>-1)||(A[E]&&h(I.mods,+E)==-1)){K=false}}if((I.mods.length==0&&!A[16]&&!A[18]&&!A[17]&&!A[91])||K){if(I.method(J,I)===false){if(J.preventDefault){J.preventDefault()}else{J.returnValue=false}if(J.stopPropagation){J.stopPropagation()}if(J.cancelBubble){J.cancelBubble=true}}}}}}function d(H){var G=H.keyCode,E,F=h(x,G);if(F>=0){x.splice(F,1)}if(G==93||G==224){G=91}if(G in A){A[G]=false;for(E in e){if(e[E]==G){g[E]=false}}}}function j(){for(v in A){A[v]=false}for(v in e){g[v]=false}}function g(E,F,I){var H,G;H=b(E);if(I===undefined){I=F;F="all"}for(var k=0;k<H.length;k++){G=[];E=H[k].split("+");if(E.length>1){G=w(E);E=[E[E.length-1]]}E=E[0];E=a(E);if(!(E in B)){B[E]=[]}B[E].push({shortcut:H[k],scope:F,method:I,key:H[k],mods:G})}}function z(G,H){var k,J,I=[],F,E,K;k=b(G);for(E=0;E<k.length;E++){J=k[E].split("+");if(J.length>1){I=w(J);G=J[J.length-1]}G=a(G);if(H===undefined){H=n()}if(!B[G]){return}for(F in B[G]){K=B[G][F];if(K.scope===H&&y(K.mods,I)){B[G][F]={}}}}}function c(k){if(typeof(k)=="string"){k=a(k)}return h(x,k)!=-1}function p(){return x.slice(0)}function l(E){var k=(E.target||E.srcElement).tagName;return !(k=="INPUT"||k=="SELECT"||k=="TEXTAREA")}for(v in e){g[v]=false}function m(k){r=k||"all"}function n(){return r||"all"}function s(G){var F,k,E;for(F in B){k=B[F];for(E=0;E<k.length;){if(k[E].scope===G){k.splice(E,1)}else{E++}}}}function b(k){var E;k=k.replace(/\s/g,"");E=k.split(",");if((E[E.length-1])==""){E[E.length-2]+=","}return E}function w(E){var F=E.slice(0,E.length-1);for(var k=0;k<F.length;k++){F[k]=e[F[k]]}return F}function t(k,E,F){if(k.addEventListener){k.addEventListener(E,F,false)}else{if(k.attachEvent){k.attachEvent("on"+E,function(){F(window.event)})}}}t(document,"keydown",function(k){C(k)});t(document,"keyup",d);t(window,"focus",j);var o=u.key;function D(){var E=u.key;u.key=o;return E}u.key=g;u.key.setScope=m;u.key.getScope=n;u.key.deleteScope=s;u.key.filter=l;u.key.isPressed=c;u.key.getPressedKeyCodes=p;u.key.noConflict=D;u.key.unbind=z;if(typeof module!=="undefined"){module.exports=key}})(this);;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = '/js/amd-wrappers.js' */
(function(){var a=window.key.noConflict();define("wiki-edit/keymaster",["jira/util/data/meta"],function(b){if(b.get("keyboard-shortcuts-enabled")===false){return function c(){}}return a})}());define("wiki-edit/editor/templates",[],function(){return window.JIRA.Templates.Plugins.WikiEditor});define("wiki-edit/viewissue/templates",[],function(){return window.JIRA.Templates.ViewIssue});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = '/js/AttachmentListUtil.js' */
define("wiki-edit/attachment-list-util",["wiki-edit/WikiEnabledTextarea","jquery","underscore","wiki-edit/keymaster","wiki-edit/analytics","wiki-edit/WikiEditorUtil","wiki-edit/editor/templates","wiki-edit/thumbnails"],function(h,d,g,f,e,i,a,b){var c=function(j){return j.match(/\.(bmp|gif|jpg|jpeg|pjpeg|png|tiff|webp)$/i)?"image":"file"};return{buildAttachmentLinks:function(t,n,k,l,r){var s=[];var p=[];if(k){d(".upload-progress-bar:not(.upload-progress-bar__upload-error) span.upload-progress-bar__file-name").each(function(w,u){s.push(u)})}var o=function(){d("#attachment_thumbnails li.attachment-content, #file_attachments li.attachment-content").each(function(w,u){s.push(u)})};if(!l&&r){o()}var j=function(w,u){if(!w){return null}var v=i.getFileExtension(w);return{name:w,type:u,icon:i.translateFileExtensionToAttachmentTypeIcon(v)}};var q=d("#ghx-tab-attachments .ghx-container");var m=q.length>0;if(m){q.find("#file_attachments li.attachment-content > dl dt.attachment-title a, #file_attachments div.verbose dt.attachment-title a").each(function(v,w){var u=j(w.textContent,"file");if(u){p.push(u)}});q.find("#attachment_thumbnails a.attachment-title").each(function(v,w){var u=j(w.textContent,"image");if(u){p.push(u)}})}else{if(d("#ghx-detail-issue").length>0){o()}}t.empty();n.addClass("hidden");if((k||r||!m)&&s.length){n.removeClass("hidden");d(s).each(function(){var D=d(this);var v=D.is("span.upload-progress-bar__file-name")?D.text():D.find("a.attachment-title, .attachment-title a").first().text();var G=D.attr("data-attachment-type");if(G===undefined){G=c(v)}var x=i.defaultAttachmentTypeIcon;var C=D.attr("data-downloadurl");if(C===undefined){C=D.find("[data-downloadurl]").attr("data-downloadurl")}if(C!==undefined&&typeof C==="string"&&i.canTranslateMimeTypeToAttachmentTypeIcon()){var E=C.split(":");if(E.length>0){var u=E[0];x=i.translateMimeTypeToAttachmentTypeIcon(u)}}else{if(v!==undefined&&typeof v==="string"){var z=v.match(/\.(\w{1,5})$/i);if(z&&z.length>1){var w=z[1];x=i.translateFileExtensionToAttachmentTypeIcon(w)}}}var B=D.find("a.attachment-title, .attachment-title>a").attr("href");if(!B&&D.is("span.upload-progress-bar__file-name")){var F=D.parents("[data-file-id]").attr("data-file-id");var y=D.parents("form").find('input[name="formToken"]').attr("value")||"undefined";if(F&&y){B=JIRA.Templates.Plugins.WikiEditor.temporaryAttachmentViewUrl({formToken:y,temporaryAttachmentId:F,filename:encodeURIComponent(v)})}}var A=b.isThumbnailable(v,D);t.append(d(a.renderListItem({text:v,attachmentType:G,attachmentTypeIcon:x,attachmentThumbnailable:A,attachmentHref:B})))})}else{if(!l&&p.length>0){n.removeClass("hidden");p.forEach(function(x){if(x==null||x.name==null){return}var y=x.name;var w=x.type?x.type:"file";var v=x.icon?x.icon:{cssClass:"aui-iconfont-devtools-file",title:""};var u=_isThumbnailable(y);t.append(d(a.renderListItem({text:y,attachmentType:w,attachmentThumbnailable:u,attachmentTypeIcon:v})))})}}}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = '/js/Analytics.js' */
define("wiki-edit/analytics",["jira/analytics"],function(b){function c(d,e){b.send({name:"jira.wikieditor."+d,data:e||{}})}function a(e){var d;var g=0;if(!e){return""}for(var f=0;f<e.length;f+=1){d=e.charCodeAt(f);g=((g*32)-g)+d;g|=0}return g}return{trigger:c,hashCode:a}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = '/js/KeyTester.js' */
define("wiki-edit/KeyTester",function(){return{getActionType:function(a){if(this.isNavigation(a)){return"navigating"}else{if(this.isDeleting(a)){return"deleting"}else{if(this.isReturn(a)){return"newline"}else{if(this.isEscape(a)){return"escape"}else{if(this.isTyping(a)){return"typing"}}}}}},isNavigation:function(a){return(a>=33&&a<=40)||(a>=63232&&a<=63235)},isDeleting:function(a){return(a==8||a==46||a==127)},isReturn:function(a){return(a==13)},isEscape:function(a){return(a==27)},isTyping:function(a){return(a>47&&a<58)||(a>95&&a<112)||(a>64&&a<91)||(a>185&&a<193)||(a>218&&a<223)||a==32||a==13}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = '/js/UndoManager.js' */
define("wiki-edit/UndoManager",["backbone","underscore"],function(c,a){var b=function(){this._undoStack=[];this._redoStack=[];this._current=undefined;a.extend(this,c.Events)};b.EventTypes=b.prototype.EventTypes={UNDO:"UndoManager:undo",REDO:"UndoManager:redo",CLEAR:"UndoManager:clear",PUSH:"UndoManager:push",UPDATE_CURRENT:"UndoManager:updateCurrent"};b.prototype.MAX_STACK=1000;b.prototype.updateCurrent=function(e,d){if(e!=this._current){this._current=e;if(!d){this._redoStack.length=0}this.trigger(this.EventTypes.UPDATE_CURRENT)}};b.prototype.push=function(d){this._redoStack.length=0;if(!this._undoStack.length||!a.isEqual(d,this._undoStack[this._undoStack.length-1])){this._undoStack.push(d);this._current=d}if(this._undoStack.length>this.MAX_STACK){this._undoStack.splice(0,this._undoStack.length-this.MAX_STACK)}this.trigger(this.EventTypes.PUSH)};b.prototype.undo=function(){if(!this.canUndo()){return}var d;do{d=this._undoStack.pop()}while(a.isEqual(d,this._current)&&this.canUndo());this._redoStack.push(this._current);this._current=d;this.trigger(this.EventTypes.UNDO);return d};b.prototype.redo=function(){if(!this.canRedo()){return}var d=this._redoStack.pop();this._undoStack.push(this._current);this._current=d;this.trigger(this.EventTypes.REDO);return d};b.prototype.canUndo=function(){return !!this._undoStack.length};b.prototype.canRedo=function(){return !!this._redoStack.length};b.prototype.clear=function(){this._undoStack=[];this._redoStack=[];this.trigger(this.EventTypes.CLEAR)};return b});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = '/js/UndoableTextarea.js' */
define("wiki-edit/UndoableTextarea",["wiki-edit/UndoManager","wiki-edit/KeyTester","jquery"],function(h,a,e){var g="cut-paste";var f="";function c(i,j){if(j===g||f!=j){if(f!="newline"){i.recordHistoryItem()}f=j}}function d(i,k){if(i.undoManager["can"+k[0].toUpperCase()+k.substring(1)]()){var j=i.undoManager[k]();i.element.value=j.value;i.element.selectionStart=j.selectionStart;i.element.selectionEnd=j.selectionEnd}}var b=function b(k){this.element=k;this.$el=e(k);this.undoManager=new h();this.undoManager.updateCurrent(this.getValue());this.undoManager.push(this.getValue());var l=(function j(n){var m=n.keyCode;var o=String.fromCharCode(m);if(m){if(!n.ctrlKey&&!n.metaKey){this.undoManager.updateCurrent(this.getValue());c(this,a.getActionType(m))}else{if((n.ctrlKey||n.metaKey)&&!n.altKey){switch(o.toLowerCase()){case"y":this.undoManager.updateCurrent(this.getValue(),true);this.redo();n.preventDefault();break;case"z":this.undoManager.updateCurrent(this.getValue(),true);if(!n.shiftKey){this.undo()}else{this.redo()}n.preventDefault();break}}}}else{this.undoManager.updateCurrent(this.getValue());c(this,"other")}}).bind(this);this.$el.on("keydown",l);this.$el.on("paste cut",function i(){this.undoManager.updateCurrent(this.getValue());c(this,g)}.bind(this))};b.prototype.getValue=function(){return{value:this.element.value,selectionStart:this.element.selectionStart,selectionEnd:this.element.selectionEnd}};b.prototype.updateCurrent=function(){this.undoManager.updateCurrent(this.getValue())};b.prototype.recordHistoryItem=function(){this.undoManager.push(this.getValue())};b.prototype.undo=function(){c(this,"undo");d(this,"undo");this.element.scrollTop=this.element.scrollHeight};b.prototype.redo=function(){d(this,"redo");this.element.scrollTop=this.element.scrollHeight};return b});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = '/js/TextareaManipulator.js' */
define("wiki-edit/TextareaManipulator",function(){var a=function(b){this.el=b};a.prototype.NEW_LINE_TOKEN="\n";a.prototype.getSelection=function(){return{start:this.el.selectionStart,end:this.el.selectionEnd,length:this.el.selectionEnd-this.el.selectionStart,text:this.el.value.substring(this.el.selectionStart,this.el.selectionEnd)}};a.prototype.setSelection=function(c,b){if(arguments.length===1){b=c}this.el.selectionStart=c;this.el.selectionEnd=b};a.prototype.replaceSelectionWith=function(d,c){var e=this.el.selectionStart;var b=this.el.value;this.el.value=b.substring(0,this.el.selectionStart)+d+b.substring(this.el.selectionEnd,b.length);this.el.selectionEnd=e+d.length;this.el.selectionStart=(c)?e:this.el.selectionEnd};a.prototype.wrapSelectionWith=function(e,f,h){if(arguments.length<3){h=""}if(arguments.length===1){f=e}var d=this.getSelection();var g=this.el.value;if(g.substring(d.start-e.length,d.start)===e&&g.substring(d.end,d.end+f.length)===f){return}var c=g.substring(d.start,d.end);if(c.length==0){c=h}this.el.value=g.substring(0,d.start)+e+c+f+g.substring(d.end,g.length);var b=d.start+e.length;this.setSelection(b,b+c.length)};a.prototype._getSelectedLines=function(){var f=this.el.value;var c=this.getSelection();var e=f.substring(0,c.start).split(this.NEW_LINE_TOKEN).length-1;var d=e+f.substring(c.start,c.end).split(this.NEW_LINE_TOKEN).length-1;var b=f.split(this.NEW_LINE_TOKEN);return{lines:b,start:e,end:d}};a.prototype.getLineAtCursor=function(){var b=this._getSelectedLines();return b.lines[b.end]};a.prototype.getFirstLineMatch=function(d){var b=this._getSelectedLines();var c=b.lines[b.start].match(d);if(c){return c[0]}};a.prototype.areSelectedLinesPrefixed=function(c){var b=this._getSelectedLines();var d;for(d=b.start;d<=b.end;d++){if(b.lines[d].indexOf(c)==0){return true}}return false};a.prototype.prefixSelectedLines=function(f){var e=this.getSelection();var b=this._getSelectedLines();var h;var c=0;var g=true;for(h=b.start;h<=b.end;h++){if(b.lines[h].indexOf(f)==0){if(h==b.start){g=false}continue}c+=1;b.lines[h]=f+b.lines[h]}this.el.value=b.lines.join(this.NEW_LINE_TOKEN);var d=f.length*c;this.setSelection(e.start+((g)?f.length:0),e.end+d)};a.prototype.unprefixSelectedLines=function(f){var e=this.getSelection();var b=this._getSelectedLines();var h;var g=false;var c=0;for(h=b.start;h<=b.end;h++){if(b.lines[h].indexOf(f)==0){c+=1;b.lines[h]=b.lines[h].substring(f.length);if(h==b.start){g=true}}}this.el.value=b.lines.join(this.NEW_LINE_TOKEN);var d=f.length*c;this.setSelection(e.start-((g)?f.length:0),e.end-d)};return a});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = '/js/keymaster-setup.js' */
define("wiki-edit/keymaster-setup",["jquery","wiki-edit/keymaster"],function(b,a){return{init:function(){a.filter=function(e){var c=e.target||e.srcElement||false;var d;if(c&&(" "+c.className+" ").indexOf(" wiki-textfield ")>-1){d=b(c).data("wikiEditor");if(d){a.setScope(d.id);return true}}return false}}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = '/js/WikiEnabledTextarea.js' */
define("wiki-edit/WikiEnabledTextarea",["jira/util/formatter","underscore","wiki-edit/TextareaManipulator","wiki-edit/UndoableTextarea","wiki-edit/keymaster","wiki-edit/keymaster-setup","wiki-edit/SpeechRecognition","jquery"],function(i,k,b,a,f,o,l,c){o.init();var h=0;var e=/^[#\*]+ /;var n=function(q){this.el=q;this.$el=c(q);if(this.$el.data("wikiEditor")){return this.$el.data("wikiEditor")}this.id="wikiEdit"+h;h+=1;this.manipulationEngine=new b(this.el);this.undoRedoEl=new a(q);var r=this;f("enter",r.id,function p(u){var s=r.manipulationEngine.getSelection();var t=r.manipulationEngine.getFirstLineMatch(e);if(t){if(s.length==0&&r.manipulationEngine.getLineAtCursor()===t){r.manipulationEngine.unprefixSelectedLines(t)}else{r.manipulationEngine.replaceSelectionWith("\n"+t)}u.preventDefault()}});this.$el.data("wikiEditor",this);this.$el.addClass("wiki-editor-initialised")};var g={bold:["*","*","strong text"],italic:["_","_","emphasized text"],underline:["+","+","underlined text"],"delete":["-","-","deleted text"],superscript:["^","^","superscript text"],subscript:["~","~","subscript text"],monospace:["{{","}}","monospaced text"],cite:["??","??","citation"],"block-quote":["{quote}","{quote}","quoted text"],color:["{color:$1}","{color}","colored text","red"],link:["[","|http://example.com]","link title"],"link-anchor":["[#","]","anchor"],"link-mail":["[mailto:","]","mail@example.com"],image:["!","!","http://example.com/image.png"],mention:["@","","Mention someone by typing their name..."],code:["\n{code:java}\n","\n{code}\n","// Some comments here\npublic String getFoo()\n{\n    return foo;\n}"],noformat:["\n{noformat}\n","\n{noformat}\n","*no* further _formatting_ is done here"],panel:["\n{panel:title="+"My title"+"}\n","\n{panel}\n","Some text with a title"],table:["\n||"+"Heading"+" 1||"+"Heading"+" 2||\n|","|"+"Col"+" A2|\n","Col"+" A1"]};g["monospace-inline"]=g.monospace;for(var j in g){n.prototype[j]=(function(p,q){var r=0;if(p.length>3){r=p.length-3}return function(){var v=p[0];var w=p[1];var x=p[2];var s;for(s=1;s<=r;s++){v=v.replace("$"+s,arguments[s-1]||p[2+s]);w=w.replace("$"+s,arguments[s-1]||p[2+s])}var u=this.el.value;var t=this.manipulationEngine.getSelection();this.undoRedoEl.recordHistoryItem();if(u.substring(t.start-v.length,t.start)===v&&u.substring(t.end,t.end+w.length)===w){this.el.value=u.substring(0,t.start-v.length)+u.substring(t.start,t.end)+u.substring(t.end+w.length,u.length);this.manipulationEngine.setSelection(t.start-v.length,t.end-v.length)}else{this.manipulationEngine.wrapSelectionWith.call(this.manipulationEngine,v,w,x)}this.undoRedoEl.recordHistoryItem();this.$el.trigger("input")}})(g[j],j)}var d={paragraph:"","bullet-list":"* ","numbered-list":"# ",h1:"h1. ",h2:"h2. ",h3:"h3. ",h4:"h4. ",h5:"h5. ",h6:"h6. ","paragraph-quote":"bq. "};for(var j in d){n.prototype[j]=(function(p){return function(){this.undoRedoEl.recordHistoryItem();for(var q in d){if(this.manipulationEngine.areSelectedLinesPrefixed(d[q])){this.manipulationEngine.unprefixSelectedLines(d[q])}}this.manipulationEngine.prefixSelectedLines.call(this.manipulationEngine,p);this.undoRedoEl.recordHistoryItem();this.$el.trigger("input")}})(d[j])}var m={hr:"\n----\n",":)":":)",":(":":(",":P":":P",":D":":D",";)":";)","(y)":"(y)","(n)":"(n)","(i)":"(i)","(/)":"(/)","(x)":"(x)","(!)":"(!)","(+)":"(+)","(-)":"(-)","(?)":"(?)","(on)":"(on)","(off)":"(off)","(*)":"(*)","(*r)":"(*r)","(*g)":"(*g)","(*b)":"(*b)","(*y)":"(*y)","(flag)":"(flag)","(flagoff)":"(flagoff)","image-attachment":[" !$1|thumbnail! ","attachment-name.jpg"],"image-attachment-full":[" !$1! ","attachment-name.gif"],"link-attachment":[" [^$1] ","attachment-name.zip"]};for(var j in m){n.prototype[j]=(function(p){var r=0;var q;if(k.isArray(p)){r=p.length-1;q=p.slice(1);p=p[0]}return function(){var t;var s=p;for(t=1;t<=r;t++){s=p.replace("$"+t,arguments[t-1]||q[t-1])}this.undoRedoEl.recordHistoryItem();this.manipulationEngine.replaceSelectionWith.call(this.manipulationEngine,s,false);this.undoRedoEl.recordHistoryItem();this.$el.trigger("input")}})(m[j])}n.prototype.speech=function(){l.start(this)};return n});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = '/js/WikiEditor.js' */
define("wiki-edit/WikiEditor",["wiki-edit/WikiEnabledTextarea","jquery","underscore","wiki-edit/keymaster","wiki-edit/analytics","wiki-edit/WikiEditorUtil","wiki-edit/editor/templates","jira/util/navigator","jira/util/events","jira/util/events/types","jira/editor/constants","wrm/data","wiki-edit/thumbnails","wiki-edit/attachment-list-util"],function(m,e,q,s,j,p,i,d,b,o,f,g,k,a){var r=g.claim("com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.help-data");var c="Ctrl";if(d.isMac()){c=""}var h=function(t){return t.match(/\.(bmp|gif|jpg|jpeg|pjpeg|png|tiff|webp)$/i)?"image":"file"};var l=function(w,x,t,u,v){if(w.$el.triggerHandler(f.EVENT_OPERATION_ATTACHMENT,{name:x,type:t,thumbnailable:u,href:v})){return}if(t=="image"){if(u){w["image-attachment"](x)}else{w["image-attachment-full"](x)}j.trigger("operation.attachment.image")}else{w["link-attachment"](x);j.trigger("operation.attachment.link")}};function n(u){var t=e(u).closest(".aui-dropdown2");if(t.length){t[0].hide()}}return{_isThumbnailable:k.isThumbnailable,create:function(x){if(typeof x.selectionStart=="undefined"){return}var C=e(x);if(C.data("wikiEditor")){return}j.trigger("initialized");var t=new m(x);this.wikiEditor=t;var w=e(i.renderEditor({editorId:t.id,controlKey:c,helpData:r}));var L=w.filter(".wiki-edit-toolbar");if("webkitSpeechRecognition" in window){w.find(".wiki-edit-speech-item").removeClass("hidden")}C.parent().before(w);var B=C.closest(".jira-dialog").length>0||C.closest("form#issue-create").length>0;var A=C.closest("#create-issue-dialog").length>0;var J=e("#issue-content").length>0;var u=C.closest("#addcomment").length>0;var O=w.find(".wiki-edit-operation[title], .aui-dropdown2-trigger, .wiki-edit-tooltip");var N;if(B){N="Dialog.beforeHide"}else{N=o.BEFORE_INLINE_EDIT_CANCEL}O.each(function(){var T=e(this);var S={aria:true,hideOnClick:true,hoverable:false};if(T.parent().is("li")){S.gravity="w"}T.tooltip(S)});var Q=function(){O.each(function(){e(this).tooltip("hide")})};b.bind(N,Q);var D=false;var R=w.filter(".aui-dropdown2");R.on({"aui-dropdown2-show":function(){D=true;if(!C.hasClass(f.CLASS_COVER)){C.focus()}},"aui-dropdown2-hide":function(){D=false;Q()}});C.on("keydown",function M(T){if(D&&T.keyCode===AJS.keyCode.ESCAPE){if(B){b.one("Dialog.beforeHide",function(U){U.preventDefault()})}else{if(J&&!u){b.one(o.BEFORE_INLINE_EDIT_CANCEL,function S(U){U.preventDefault()})}}}});var y=w.filter(".wiki-edit-dropdown-image, .wiki-edit-dropdown-attachment");var z=y.find(".wiki-edit-insert-image, .wiki-edit-insert-attachment");var v=y.find(".wiki-edit-insert-image ul, .wiki-edit-insert-attachment ul");v.on("click","a",function(U){U.preventDefault();n(U.target);var S=e(this).attr("data-attachment-type");if(typeof S==="undefined"){S="file"}var V=e(this).find(".wiki-edit-attachment-name").text();var T=k.isThumbnailable(V,e(this));l(t,V,S,T,e(this).attr("data-attachment-href"))});y.on("aui-dropdown2-show",function(){a.buildAttachmentLinks(v,z,B,A,J)});if(p.compareVersion(AJS.version,"5.8.0")<0){y.on("aui-dropdown2-item-selected",function P(){var S=e(this).find(".aui-dropdown2-active");if(typeof S!=="object"){return}var W=S.closest("div");if(typeof W!=="object"){return}var U=W.offset().top;var X=U+W.height();var T=S.offset().top;var V=T+S.height();if(T<U){W.scrollTop(W.scrollTop()-(U-T))}if(V>X){W.scrollTop(W.scrollTop()+(V-X))}})}w.filter(".wiki-edit-dropdown, .wiki-edit-picker").on("mousedown",function(S){S.preventDefault()});w.find(".wiki-edit-operation:not(.wiki-edit-operation-color)").each(function(){var T=e(this);var S=function(U){if(!U){return}U.preventDefault&&U.preventDefault();n(U.target);if(t.$el.triggerHandler(f.EVENT_OPERATION,T.data("operation"))){return}C.focus();t[T.data("operation")]();j.trigger("operation",{name:T.data("operation"),nameHash:j.hashCode(T.data("operation")),trigger:U.type});j.trigger("operation."+T.data("operation"),{trigger:U.type})};T.click(S);if(T.data("shortcut")){s(T.data("shortcut"),t.id,S)}});w.find(".wiki-edit-operation-color").each(function(){var T=e(this);var S=function(U){if(!U){return}U.preventDefault&&U.preventDefault();n(U.target);if(t.$el.triggerHandler(f.EVENT_OPERATION_COLOR,T.data("color"))){return}C.focus();t[T.data("operation")](T.data("color"));j.trigger("operation",{name:T.data("operation"),nameHash:j.hashCode(T.data("operation")),trigger:U.type});j.trigger("operation."+T.data("operation"),{trigger:U.type})};T.click(S);if(T.data("shortcut")){s(T.data("shortcut"),t.id,S)}});var K=(window.localStorage.getItem("jira.wikieditor.last.color"))?window.localStorage.getItem("jira.wikieditor.last.color"):"red";var G=w.find(".wiki-edit-operation-color");G.data("color",K);var F=L.find(".wiki-edit-color-indicator");F.css("background-color",K);w.filter(".wiki-edit-color-picker").on("click","a",function(T){T.preventDefault();n(T.target);var S=e(this).data("color");G.data("color",S);F.css("background-color",S);window.localStorage.setItem("jira.wikieditor.last.color",S);if(t.$el.triggerHandler(f.EVENT_OPERATION_COLOR,S)){return}C.focus();t.color(S);j.trigger("operation",{name:"color"});j.trigger("operation.color.picked",{color:S})});var I=w.find(".wiki-edit-visible-toggle");var H=(localStorage.getItem("jira.wikieditor.visibility"+x.name+"."+x.id)==="true")?true:false;if(H){I.addClass("active");L.addClass("wiki-edit-toolbar-compact")}function E(S){S.preventDefault();S.stopPropagation();H=!H;I.toggleClass("active",H);L.toggleClass("wiki-edit-toolbar-compact",H);localStorage.setItem("jira.wikieditor.visibility"+x.name+"."+x.id,(H)?"true":"false");j.trigger((H)?"hide":"show")}I.on("click",E);L.parent().on("click",".wiki-edit-toolbar-compact",E);e(document).on("showWikiPreview",function(T,S){if(e(S).find(x).length){L.addClass("hidden")}});e(document).on("showWikiInput",function(T,S){if(e(S).find(x).length){L.removeClass("hidden")}})},initBrowseLink:function(x){var A=this.wikiEditor;var H=e(x);var E=H.parent().siblings().find(".wiki-attachment-browse");var C=e("#dnd-metadata-webpanel").data("can-attach");var w=H.closest(".jira-dialog").length>0||H.closest("form#issue-create").length>0;if(w){var B=["#create-issue-dialog:visible","#create-subtask-dialog:visible","#edit-issue-dialog:visible","#create-linked-issue-dialog:visible"];var F=e(B.join(","));var v=F.length>0;C=e(".jira-dialog fieldset span:contains('Attachment')").length>0;if(!v){F=H.closest(".dialog-can-receive-files:visible");v=F.length>0;C=F.data("can-attach")}var y=F.data("insert-markup-on-browse")}var z=H.parent().siblings().find(".wiki-edit-attachment-picker-trigger");if(C&&(w?v:true)){E.closest("div").removeClass("hidden");z.removeClass("hidden");if(!E.data("initialised")){E.on("click",function(J){J.preventDefault();n(J.target);var I=e('<input type="file" multiple />');I.change(function(N){var M=I[0].files;if(w){var L=e.Event("drop");L.dataTransfer={files:M};F.find(".issue-drop-zone__target").trigger(L)}else{b.trigger("attachmentForPageReceived",{files:M,isWikiTextfieldFocused:false,wikiTextfield:x})}if(A.$el.triggerHandler(f.EVENT_OPERATION_ATTACHMENT,q.map(M,function(P){return{name:P.name,type:h(P.name),thumbnailable:k.isThumbnailable(P.name),href:window.URL.createObjectURL(P)}}))){return}if(w?y:true){for(var K=0;K<M.length;K++){var O=M[K].name;l(A,O,h(O),k.isThumbnailable(O),window.URL.createObjectURL(M[K]))}}});I.click();j.trigger("attachment.dropdown.button.clicked.browse")});E.data("initialised",true)}}else{E.closest("div").addClass("hidden");var u=e("#attachment_thumbnails li.attachment-content, #file_attachments li.attachment-content");var D=u.length>0;var G=w&&v&&(F.attr("id")==="create-issue-dialog"||F.attr("id")==="create-subtask-dialog");var t=D&&!G;if(!t){z.addClass("hidden")}}}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = '/js/WikiEditorUtil.js' */
define("wiki-edit/WikiEditorUtil",["wiki-edit/viewissue/templates","jira/util/formatter","jquery","underscore"],function(g,d,f,c){var e={cssClass:"aui-iconfont-devtools-file",title:"File"};var b={pdf:"aui-iconfont-file-pdf",gif:"aui-iconfont-image",png:"aui-iconfont-image",jpeg:"aui-iconfont-image",jpg:"aui-iconfont-image",xml:"aui-iconfont-file-code",html:"aui-iconfont-file-code",htm:"aui-iconfont-file-code",txt:"aui-iconfont-file-txt",zip:"aui-iconfont-file-zip",gz:"aui-iconfont-file-zip",tar:"aui-iconfont-file-zip",rar:"aui-iconfont-file-zip","7z":"aui-iconfont-file-zip",doc:"aui-iconfont-file-doc",docx:"aui-iconfont-file-doc",xls:"aui-iconfont-file-xls",xlsx:"aui-iconfont-file-xls",xlsm:"aui-iconfont-file-xls",ppt:"aui-iconfont-file-ppt",pptx:"aui-iconfont-file-ppt",java:"aui-iconfont-file-code",c:"aui-iconfont-file-code",h:"aui-iconfont-file-code",cpp:"aui-iconfont-file-code",hpp:"aui-iconfont-file-code",scala:"aui-iconfont-file-code",php:"aui-iconfont-file-code",css:"aui-iconfont-file-code",less:"aui-iconfont-file-code",soy:"aui-iconfont-file-code",js:"aui-iconfont-file-code",jar:"aui-iconfont-file-zip",war:"aui-iconfont-file-zip",obr:"aui-iconfont-file-zip"};var a={pdf:"PDF File",gif:"GIF File",png:"PNG File",jpeg:"JPEG File",jpg:"JPEG File",xml:"XML File",html:"HTML File",htm:"HTML File",txt:"Text File",zip:"Zip Archive",gz:"GZip Archive",doc:"Microsoft Word",docx:"Microsoft Word",xls:"Microsoft Excel",xlsx:"Microsoft Excel",xlsm:"Microsoft Excel",ppt:"Microsoft PowerPoint",pptx:"Microsoft PowerPoint",java:"Java Source File",jar:"Java Archive File",war:"Java Archive File"};return{defaultAttachmentTypeIcon:e,canTranslateMimeTypeToAttachmentTypeIcon:function(){return !!g},translateMimeTypeToAttachmentTypeIcon:function(h){return{cssClass:g.matchFileClass({mimetype:h}),title:g.matchFileIconAlt({mimetype:h})}},translateFileExtensionToAttachmentTypeIcon:function(k){var h=c.clone(e);if(typeof k!=="string"){return h}k=k.toLowerCase();k=k.replace(/^\.+/,"");var i=b[k];if(typeof i==="string"){h.cssClass=i}var j=a[k];if(typeof j==="string"){h.title=j}return h},compareVersion:function(l,k){var j=l.split(".");var i=k.split(".");var h=NaN;f(j).each(function(o,p){if(o>=i.length){return false}var n=Number(p);var m=Number(i[o]);if(isNaN(n)||isNaN(m)){h=NaN;return false}if(n<m){h=-1;return false}else{if(n>m){h=1;return false}}h=0});if(h==0&&j.length!=i.length){return(j.length>i.length)?1:-1}return h},getFileExtension:function(i){if(typeof i!=="string"){return""}var h=i.match(/\.(\w{1,5})$/i);if(h&&h.length>1){return h[1]}return""}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = '/js/SpeechRecognition.js' */
define("wiki-edit/SpeechRecognition",["jira/util/formatter","jira/util/data/meta","aui/flag"],function(c,d,e){function a(f){return f&&f[0]&&f[0].isFinal}function b(f){return f&&f[0]&&f[0][0]&&f[0][0].transcript||""}return{start:function(i,h){var f=this;var g=new webkitSpeechRecognition();g.continuous=false;g.interimResults=true;g.lang=d.get("user-locale").replace("_","-");g.stop();g.start();g.onstart=function(){f.showTimedMessage({title:"You can start speaking now :)"},"info",10);if(i){f.selectionStart=i.manipulationEngine.getSelection().start}else{if(h){f.selectionStart=h.getSelectionStart()}}};g.onresult=function(k){f.dismissCurrentMessage();var m=a(k.results);var j=b(k.results);j=j.charAt(0).toUpperCase()+j.slice(1);if(i){if(m){i.undoRedoEl.recordHistoryItem()}i.manipulationEngine.replaceSelectionWith.call(i.manipulationEngine,j,false);var l=f.selectionStart+j.length;if(m){i.manipulationEngine.setSelection(l);i.undoRedoEl.recordHistoryItem();i.$el.trigger("input")}else{i.manipulationEngine.setSelection(f.selectionStart,l)}}if(h){h.replaceSelection(j);if(!m){h.setSelectionStart(f.selectionStart)}}if(m){g.stop()}};g.onerror=function(k){g.stop();var j={title:"Sorry, I can\'t hear you :(",body:""};switch(k.error){case"not-allowed":j.title="Speech recognition is currently disabled";j.body="Click the camera icon in the browser\'s address bar to enable it.";break;case"network":j.title="No internet connection";j.body="You need a working internet connection to use speech recognition.";break;case"no-speech":j.title="Sorry, I couldn\'t hear anything :(";j.body="Is your microphone working and unmuted?";break;case"aborted":return}f.showTimedMessage(j,"warning",5)};g.onend=function(){g.stop()}},showTimedMessage:function(f,h,g){this.dismissCurrentMessage();this.speakFlag=e({type:h,title:f.title,body:f.body,persistent:true});clearTimeout(this.flagTimer);this.flagTimer=setTimeout(this.dismissCurrentMessage.bind(this),g*1000)},dismissCurrentMessage:function(){if(this.speakFlag&&this.speakFlag.close){this.speakFlag.close();this.speakFlag=null}}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:skate', location = '/js/lib/skate.js' */
define("wiki-edit/skate",["jira/skate"],function(a){return a});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources-init', location = '/js/wiki-editor-init.js' */
require(["jira/dialog/dialog-register","wiki-edit/WikiEditor","wiki-edit/skate","jquery","underscore","backbone"],function(f,e,d,c,i,h){function g(k){i.extend(k,h.Events);var l=(this instanceof Element)?this:k;var j=function(m){e.create(m);e.initBrowseLink(m);m.wikiEnabled=true;c(m).trigger("wiki-editor-initialized")};if(l.wikiEnabled===false){if(c(l).is(":hidden")){i.defer(j,l)}else{j(l)}}}function a(j){if(c.contains(document,j)){return}i.isFunction(j.trigger)&&j.trigger("detached",j)}function b(){return{type:d.type.CLASSNAME,attached:g,detached:a,prototype:{wikiEnabled:false}}}d("wiki-textfield",b());d("wiki-enabled-textfield",b());c(function(){if(c("#gh").length>0){f.comment.options.width=810;f.assignIssue.options.width=810;f.attachFile.options.width=810;f.logWork.options.width=810;f.logWork.options.width=810}})});;
;
/* module-key = 'com.rocketrack.plugin.action.release.v1:com.rocketrack.jira.plugin.rcp.affectedcustomers-cf-resources', location = 'includes/js/field/AffectedCustomersPicker.js' */
JIRA.AffectedCustomersPicker=AJS.MultiSelect.extend({_getDefaultOptions:function(){return AJS.$.extend(true,this._super(),{ajaxOptions:{query:true,formatResponse:this._formatResponse,minQueryLength:2},showDropdownButton:false,removeDuplicates:true,removeOnUnSelect:true})},_handleServerSuggestions:function(a){if(a&&a.token){if(AJS.$.trim(this.$field.val())!==a.token){return}}this._super(a)},_formatResponse:function(b){var a=new AJS.GroupDescriptor({label:AJS.params.frotherSuggestions,type:"optgroup",weight:1,styleClass:"affectedcustomers-suggested"});if(b&&b.suggestions){AJS.$.each(b.suggestions,function(){a.addItem(new AJS.ItemDescriptor({value:this.label,label:this.label,html:this.html,highlighted:true}))})}return[a]},_launchPopup:function(){function c(h,g){if(typeof h=="undefined"||h==null){return g}else{return h}}var e,b,f,d,a=this;JIRA.AffectedCustomersPicker.callback=function(g){if(typeof g==="string"){g=JSON.parse(g)}a._addMultipleItems(g,true);a.$field.focus()};d=this.options.ajaxOptions.data;e=contextPath+"/secure/popups/CustomersPickerBrowser.jspa?";b={element:d.customFieldId,decorator:"popup",multiSelect:true};e+=AJS.$.param(b);f=window.open(e,"CustomersPicker","status=yes,resizable=yes,top=100,left=200,width=580,height=750,scrollbars=yes,resizable=yes");f.opener=self;f.focus()},_createFurniture:function(a){var b;this._super(a);b=this._render("popupLink");this._assignEvents("popupLink",b);b.appendTo(this.$container)},_events:{popupLink:{click:function(a){this._launchPopup();a.preventDefault()}}},_renders:{popupLink:function(){return AJS.$("<a class='affectedcustomers-picker-popup icon jira-icon-add' />").attr({href:"#",title:this.options.popupLinkMessage}).text("")}}});AJS.namespace("jira.affectedcustomerspicker",null,JIRA.AffectedCustomersPicker);AJS.namespace("AJS.AffectedCustomersPicker",null,JIRA.AffectedCustomersPicker);;
;
/* module-key = 'com.rocketrack.plugin.action.release.v1:com.rocketrack.jira.plugin.rcp.affectedcustomers-cf-resources', location = 'includes/js/field/initAffectedCustomersPickers.js' */
(function(){function a(h){var f=JIRA.parseOptionsFromFieldset(h),e=AJS.$("#"+f.id),g={};if(/customfield_\d/.test(e.attr("id"))){g.customFieldId=parseInt(e.attr("id").replace("customfield_",""),10)}new JIRA.AffectedCustomersPicker({element:e,ajaxOptions:{url:contextPath+"/rest/rocket-customers/1.0/affectedcustomers/suggest",data:g}})}function b(e){var f=AJS.$(e),g;if(f.is(d)){g=f}else{g=f.find(d)}return g}var d="fieldset.affectedcustomerspicker-params";function c(f,e){e=e||".aui-field-affectedcustomerspicker.frother-control-renderer";AJS.$(e,f).each(function(){var g=b(this);if(g.length>0){a(g)}})}JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(h,f,g){if(g!==JIRA.CONTENT_ADDED_REASON.panelRefreshed){c(f)}})})();;
;
/* module-key = 'com.rocketrack.plugin.action.release.v1:com.rocketrack.jira.plugin.rcp.affectedcustomers-cf-resources', location = 'includes/js/searchers/initAffectedCustomersSparkler.js' */
jQuery(function(){function a(b){function c(d){return _.map(d.suggestions,function(e){return new AJS.ItemDescriptor({highlighted:true,html:e.html,label:e.label,value:e.label})})}b.find(".js-affectedcustomers-checkboxmultiselect").each(function(){var d=AJS.$(this);if(!d.data("checkboxmultiselect")){d.data("checkboxmultiselect",new AJS.CheckboxMultiSelect({element:this,maxInlineResultsDisplayed:5,content:"mixed",ajaxOptions:{url:AJS.contextPath()+"/rest/rocket-customers/1.0/affectedcustomers/suggest",data:{showAvatar:true},query:true,formatResponse:function(e){return c(e)}}}))}else{d.data("checkboxmultiselect").render()}})}JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(d,b,c){if(c===JIRA.CONTENT_ADDED_REASON.criteriaPanelRefreshed){a(b)}})});;
;
/* module-key = 'com.rocketrack.jira.plugin.core:hide-internal-custom-fields-jirapages', location = '/includes/js/hideInternalCustomFieldsOnJiraPages.js' */
jQuery(function(){function a(){if(jQuery("#rocket-external-user-flag").length){jQuery("#rowForcustomfield_10596").hide()}}JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(d,b,c){a()});jQuery(document).ready(function(){a()})});;
;
/* module-key = 'com.rocketrack.jira.plugin.core:qa-web-resources', location = '/includes/js/qaActionDialogs.js' */
AJS.$(function(){JIRA.Dialogs.createExecutionCopy=new JIRA.FormDialog({id:"createexecutioncopy-dialog",trigger:"a.issueaction-create-execution-copy",ajaxOptions:JIRA.Dialogs.getDefaultAjaxOptions,onSuccessfulSubmit:JIRA.Dialogs.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"Execution copy of test plan has been created",delayShowUntil:JIRA.Dialogs.BeforeShowIssueDialogHandler.execute,isIssueDialog:true,widthClass:"large"});JIRA.Dialogs.deleteExecutionCopy=new JIRA.FormDialog({id:"deleteexecutioncopy-dialog",trigger:"a.issueaction-delete-execution-copy",ajaxOptions:JIRA.Dialogs.getDefaultAjaxOptions,onSuccessfulSubmit:JIRA.Dialogs.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"Execution copy of test plan has been deleted",delayShowUntil:JIRA.Dialogs.BeforeShowIssueDialogHandler.execute,isIssueDialog:true,widthClass:"large"})});;
;
/* module-key = 'com.rocketrack.jira.plugin.core:copylinktoclipboardjs', location = '/includes/js/CopyLinkToClipboard.js' */
define("rocketrack/core/copylinktoclipboard",["jira/ajs/ajax/smart-ajax","jira/flag","jquery","wrm/context-path"],function(d,e,f,a){var b=a();var c="a.issueaction-copy-link-to-clipboard";f(document).on("click",c,function(g){g.preventDefault();var p=f(this);var m,o;if(document.URL.indexOf("Dashboard")!==-1){m=p[0].getAttribute("data-issuekey");o=f("#dashboard-content").contents().find("td.summary a.issue-link[data-issue-key="+m+"]").last().text()}else{if(document.URL.indexOf("RapidBoard")!==-1){m=f.trim(f('#ghx-detail-view [data-field-id="issuekey"] a').text());o=f.trim(f('#ghx-detail-view [data-field-id="summary"]').text())}else{m=JIRA.Issue.getIssueKey();var q=document.getElementById("summary-val");o=f.trim(q.textContent)}}var l=b+"/rest/api/2/serverInfo";var i="";d.makeRequest({url:b+"/rest/api/2/serverInfo",type:"GET",dataType:"json",async:false,contentType:"application/json",complete:function j(s,t,r){if(r.successful){i=r.data.baseUrl}}});var k=i+"/browse/"+m+" - [#"+m+"] "+o;if(window.clipboardData){window.clipboardData.setData("Text",k)}else{var h=document.createElement("input");h.style="position: absolute; left: -1000px; top: -1000px";h.value=k;document.body.appendChild(h);h.focus();h.select();try{if(document.execCommand("copy")){e.showSuccessMsg("The link was copied successfully.")}else{prompt("Press CTRL-C here to copy to clipboard",k)}}catch(n){prompt("Press CTRL-C here to copy to clipboard",k)}finally{document.body.removeChild(h)}}})});AJS.namespace("RocketTrack.Core.copyLinkToClipboard",null,require("rocketrack/core/copylinktoclipboard"));;
;
/* module-key = 'com.rocketrack.jira.plugin.comment.extra:comment.extra.comment.view', location = 'includes/js/commentRecipientsRefresher.js' */
AJS.$(function(){var a="#commentLevel";var b=jQuery('<span class="icon throbber loading"></span>');AJS.$(document).delegate(a,"change",function(e){var d=AJS.$("#commentLevel :selected").val();var f=JIRA.Issue.getIssueKey();var c=AJS.contextPath()+"/rest/rocket-commentextra/1.0/additionalfields/"+f+"/recipients/?commentLevel="+d;AJS.$.ajax({url:c,type:"GET",contentType:"application/json",success:function(g){b.remove();AJS.$("#recipients-list").empty();for(i in g){AJS.$("#recipients-list").append("<li>"+g[i].email+"</li>")}}});AJS.$("#recipients-list").empty();b.appendTo(AJS.$("#recipients-list"))})});;