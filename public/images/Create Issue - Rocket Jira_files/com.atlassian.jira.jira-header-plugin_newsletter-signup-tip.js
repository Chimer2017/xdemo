;
/* module-key = 'com.atlassian.jira.jira-header-plugin:newsletter-signup-tip', location = 'static/components/newsletter/NewsletterSignup.soy' */
// This file was automatically generated from NewsletterSignup.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }


JIRA.Templates.newsletterSignupTip = function(opt_data, opt_ignored) {
  return '<div><p>' + soy.$$escapeHtml(opt_data.description) + '</p>' + aui.form.form({action: '#', isTopLabels: true, extraClasses: 'insiders-signup-form', content: '' + aui.form.textField({id: 'jira-newsletter-user-email', placeholderText: '' + soy.$$escapeHtml("Email address"), value: opt_data.userEmail}) + aui.form.fieldGroup({content: '' + aui.form.select({id: 'jira-newsletter-role', options: opt_data.roles})}) + aui.form.textField({id: 'jira-newsletter-other-role-name', placeholderText: '' + soy.$$escapeHtml("e.g. King of the North"), extraClasses: 'hidden'}) + aui.form.fieldGroup({content: '' + aui.form.field({id: 'jira-newsletter-opt-in', type: 'checkbox', isChecked: false, extraClasses: 'jira-newsletter-opt-in', labelContent: '' + soy.$$filterNoAutoescape("By providing your email, you agree to have Atlassian content delivered straight to your inbox.")})}) + aui.form.buttons({content: '' + aui.form.submit({type: 'primary', text: '' + soy.$$filterNoAutoescape("Sign me up")}) + aui.form.linkButton({text: '' + soy.$$escapeHtml("No, thanks")})})}) + '</div>';
};
if (goog.DEBUG) {
  JIRA.Templates.newsletterSignupTip.soyTemplateName = 'JIRA.Templates.newsletterSignupTip';
}
;
;
/* module-key = 'com.atlassian.jira.jira-header-plugin:newsletter-signup-tip', location = 'static/components/newsletter/NewsletterRoles.js' */
define("jira/newsletter/roles",["jira/util/formatter","underscore","exports"],function(e,t,n){"use strict";n.getRoles=function(){var n=[{value:"",text:"Choose your role",disabled:!0,selected:!0}],s=[{value:"software-engineer",text:"Software Engineering"},{value:"product-manager",text:"Product Management"},{value:"qa",text:"Quality Assurance"},{value:"design",text:"Design"},{value:"management",text:"Management"},{value:"sys-admin",text:"Systems Administration"}],r=[{value:"other",text:"Other"}];return n.concat(t.shuffle(s)).concat(r)}});;
;
/* module-key = 'com.atlassian.jira.jira-header-plugin:newsletter-signup-tip', location = 'static/components/newsletter/NewsletterSignup.js' */
define("jira/newsletter/signuptip",["jira/analytics","jira/util/formatter","jira/util/data/meta","jira/newsletter/roles","jira-help-tips/feature/help-tip","atlassian/libs/underscore-1.8.3","jquery"],function(e,i,n,t,r,a,s){function l(e){return!(e.length>255)&&d.test(e)}function o(e){return a.reduce(e,function(e,i){return(e=(e<<5)-e+i.charCodeAt(0))&e},0)}function u(e){return a.omit(e,a.isUndefined)}var d=/^[a-zA-Z0-9.!#$%'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;return{render:function(e){var i=a.random(1e4);setTimeout(function(){this.doRender(a.extend(e,{signupTipDelay:i}))}.bind(this),i)},doRender:function(a){var d={anchor:"#user-options",isSequence:!1,showCloseButton:!1};d.id=a.signupId,d.title=a.signupTitle,d.bodyHtml=JIRA.Templates.newsletterSignupTip({userEmail:a.userEmail,description:a.signupDescription,roles:t.getRoles()});var p=new r(d);if(!p.isDismissed()){var f=function(){return s("#aui-flag-container").find(".aui-flag").filter(":not([aria-hidden=true]):visible").length};if(f())return void e.send({name:"jira.newsletter.signuptip.notshown",data:{flagsVisible:f(),signupTipDelay:a.signupTipDelay}});p.show(),e.send({name:"jira.newsletter.signuptip.shown"});var g=s("body");g.on("submit","form.aui.insiders-signup-form",function(t){t.preventDefault();var r=s(this);r.find(".error").remove();var d=r.find("#jira-newsletter-user-email"),g=r.find("#jira-newsletter-role"),m=r.find("#jira-newsletter-opt-in"),c=d.val(),h=g.val(),w=m.prop("checked"),j="other"===h?r.find("#jira-newsletter-other-role-name").val().substring(0,100):void 0,v=l(c),T=!0===w;v&&T?(s.ajax({type:"POST",url:i.format(a.formUrl,encodeURI(c)),dataType:"json",contentType:"application/json",data:JSON.stringify({role:h,otherRoleName:j,lang:n.getLanguage()})}).success(function(){e.send({name:"jira.newsletter.signuptip.submitted",data:u({role:h,otherRoleName:j,lang:n.getLanguage(),checksum:o(c.split("@")[0]),flagsVisible:f(),signupTipDelay:a.signupTipDelay})})}).error(function(i){e.send({name:"jira.newsletter.signuptip.error",data:{statusCode:i.status}})}),a.userEmail!==c&&e.send({name:"jira.newsletter.signuptip.email.changed"}),p.dismiss("newslettersubscribed")):(v||(e.send({name:"jira.newsletter.signuptip.email.validationerror",data:{flagsVisible:f()}}),d.after(aui.form.fieldError({message:"Please enter a valid e-mail address."}))),T||(e.send({name:"jira.newsletter.signuptip.opt-in.validationerror",data:{flagsVisible:f()}}),m.parent().after(aui.form.fieldError({message:"Please agree to continue."}))))}),g.on("click","form.aui.insiders-signup-form a.cancel",function(i){i.preventDefault(),e.send({name:"jira.newsletter.signuptip.dismissed",data:{flagsVisible:f(),signupTipDelay:a.signupTipDelay}}),p.dismiss("newslettercancelled")}),g.on("change","form.aui.insiders-signup-form",function(e){var i=s(this),n=i.find("#jira-newsletter-role");i.find("#jira-newsletter-other-role-name").parent().closest("div").toggleClass("hidden","other"!==n.val())})}}}});;